Started GET "/restaurants/1" for ::1 at 2023-11-19 12:33:49 +0100
  [1m[36mActiveRecord::SchemaMigration Load (44.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (44.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (44.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (43.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (46.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (45.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (46.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (46.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (49.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (56.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.1ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (49.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 396.2ms | Allocations: 65922)
  [1m[36mDish Load (43.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (46.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (51.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 4.8ms | Allocations: 882)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 424)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 426)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 423)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 432)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 427)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 426)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 423)
  Rendered layouts/_comment.html.erb (Duration: 135.0ms | Allocations: 11420)
  Rendered layouts/_add_comment.html.erb (Duration: 1.7ms | Allocations: 665)
  [1m[35m (46.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 869.2ms | Allocations: 91224)
  Rendered layouts/_header.html.erb (Duration: 10.3ms | Allocations: 1350)
  [1m[36mUser Load (46.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 381.1ms | Allocations: 16802)
  Rendered layout layouts/application.html.erb (Duration: 1333.5ms | Allocations: 128374)
Completed 200 OK in 3053ms (Views: 828.4ms | ActiveRecord: 1653.4ms | Allocations: 187172)


Started GET "/users/Mr.Dani" for ::1 at 2023-11-19 12:34:11 +0100
Processing by UsersController#show as */*
  Parameters: {"id"=>"Mr"}
  [1m[36mUser Load (50.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (48.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (48.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (45.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (47.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-19 11:34:12.038113')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (46.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-19 11:34:12.098695')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (49.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-19 11:34:12.158658')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (61.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (64.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (48.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 11:34:12.374832')[0m  [["reviewable_id", 8], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (46.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 8]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (49.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "8"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (45.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "8"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (50.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 11:34:12.659522')[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (48.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (46.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (47.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (50.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 11:34:12.864277')[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (49.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (51.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 11:34:12.976996')[0m  [["reviewable_id", 1], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (44.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 11:34:13.036271')[0m  [["reviewable_id", 2], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (44.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 11:34:13.082790')[0m  [["reviewable_id", 3], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (44.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (48.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 22.2ms | Allocations: 3747)
  Rendered layouts/_header.html.erb (Duration: 4.3ms | Allocations: 1053)
  [1m[36mCACHE User Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 26.7ms | Allocations: 4330)
  Rendered layout layouts/application.html.erb (Duration: 72.3ms | Allocations: 12821)
Completed 200 OK in 1541ms (Views: 73.4ms | ActiveRecord: 1269.0ms | Allocations: 28127)


Started GET "/users/Mr.Dani" for ::1 at 2023-11-19 12:34:39 +0100
Processing by UsersController#show as */*
  Parameters: {"id"=>"Mr"}
  [1m[36mUser Load (49.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (49.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (58.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (52.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (45.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-19 11:34:39.464187')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (45.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-19 11:34:39.518773')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (47.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-19 11:34:39.582424')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (58.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (47.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (47.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 11:34:39.759240')[0m  [["reviewable_id", 8], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (54.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 8]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (46.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "8"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (46.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "8"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (45.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 11:34:39.967144')[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (46.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (46.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (46.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (52.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 11:34:40.169427')[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (45.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (63.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 11:34:40.280909')[0m  [["reviewable_id", 1], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (44.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 11:34:40.345918')[0m  [["reviewable_id", 2], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (48.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 11:34:40.392755')[0m  [["reviewable_id", 3], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (44.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (46.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 11.8ms | Allocations: 2212)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1053)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.9ms | Allocations: 4326)
  Rendered layout layouts/application.html.erb (Duration: 48.8ms | Allocations: 11272)
Completed 200 OK in 1399ms (Views: 53.1ms | ActiveRecord: 1175.7ms | Allocations: 23840)


Started GET "/restaurants/1" for ::1 at 2023-11-19 12:36:32 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (63.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (69.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (55.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (47.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (50.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (51.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (46.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (43.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (44.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (49.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (52.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 84.1ms | Allocations: 2948)
  [1m[36mDish Load (53.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (46.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (48.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 7.8ms | Allocations: 859)
  Rendered layouts/_reaction.html.erb (Duration: 3.4ms | Allocations: 424)
  Rendered layouts/_reaction.html.erb (Duration: 11.0ms | Allocations: 426)
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 423)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 432)
  Rendered layouts/_reaction.html.erb (Duration: 2.2ms | Allocations: 427)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 426)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 423)
  Rendered layouts/_comment.html.erb (Duration: 164.4ms | Allocations: 11084)
  Rendered layouts/_add_comment.html.erb (Duration: 15.1ms | Allocations: 662)
  [1m[35m (46.2ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 593.6ms | Allocations: 23764)
  Rendered layouts/_header.html.erb (Duration: 10.5ms | Allocations: 1324)
  [1m[36mUser Load (50.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (49.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 279.3ms | Allocations: 13348)
  Rendered layout layouts/application.html.erb (Duration: 957.0ms | Allocations: 57307)
Completed 200 OK in 2578ms (Views: 425.2ms | ActiveRecord: 1838.4ms | Allocations: 83398)


Started GET "/restaurants/1/dishes/1" for ::1 at 2023-11-19 12:38:09 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"1", "id"=>"1"}
  [1m[36mDish Load (43.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 1], ["restaurant_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (45.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[36mReview Load (46.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 56.2ms | Allocations: 3890)
  Rendered dishes/show.html.erb within layouts/application (Duration: 112.9ms | Allocations: 5982)
  Rendered layout layouts/application.html.erb (Duration: 113.4ms | Allocations: 6074)
Completed 500 Internal Server Error in 212ms (ActiveRecord: 135.2ms | Allocations: 8125)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `locals' for #<ActionView::Base:0x00000000015a40>):
    17:       <% end %>
    18:       <div class="comment_actions_row">
    19:         <div class="comment_action_item">
    20:           <%= render "layouts/reaction", locals: {comment: comment, button: "Like", rcts_no: locals[:reactions][comment.id][:likes], user_reaction_id: locals[:user_reactions][comment.id][:reaction_id]} %>
    21:         </div>
    22:         <div class="comment_action_item">
    23:           <%= render "layouts/reaction", locals: {comment: comment, button: "Dislike", rcts_no: locals[:reactions][comment.id][:dislikes], user_reaction_id: locals[:user_reactions][comment.id][:reaction_id]} %>
  
app/views/layouts/_comment.html.erb:20
app/views/layouts/_comment.html.erb:2
app/views/dishes/show.html.erb:8
Started GET "/restaurants/1" for ::1 at 2023-11-19 12:39:48 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (47.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (49.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (46.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (49.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (51.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (56.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (46.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (51.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (56.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (58.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (48.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (45.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (48.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (49.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 66.7ms | Allocations: 2295)
  [1m[36mDish Load (44.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (46.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (45.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 6.1ms | Allocations: 605)
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 423)
  Rendered layouts/_reaction.html.erb (Duration: 6.6ms | Allocations: 426)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 423)
  Rendered layouts/_reaction.html.erb (Duration: 3.1ms | Allocations: 429)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 427)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 426)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 423)
  Rendered layouts/_comment.html.erb (Duration: 101.5ms | Allocations: 8399)
  Rendered layouts/_add_comment.html.erb (Duration: 1.1ms | Allocations: 516)
  [1m[35m (48.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 327.1ms | Allocations: 13938)
  Rendered layouts/_header.html.erb (Duration: 3.9ms | Allocations: 1064)
  [1m[36mUser Load (46.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 103.1ms | Allocations: 4599)
  Rendered layout layouts/application.html.erb (Duration: 445.0ms | Allocations: 23332)
Completed 200 OK in 1202ms (Views: 121.0ms | ActiveRecord: 978.3ms | Allocations: 29016)


Started GET "/restaurants/1/dishes/1" for ::1 at 2023-11-19 12:39:53 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"1", "id"=>"1"}
  [1m[36mDish Load (46.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 1], ["restaurant_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (45.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[36mReview Load (62.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 89.9ms | Allocations: 2468)
  Rendered dishes/show.html.erb within layouts/application (Duration: 148.1ms | Allocations: 3127)
  Rendered layout layouts/application.html.erb (Duration: 151.7ms | Allocations: 3219)
Completed 500 Internal Server Error in 211ms (ActiveRecord: 155.0ms | Allocations: 4058)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `locals' for #<ActionView::Base:0x00000000015dd8>):
    17:       <% end %>
    18:       <div class="comment_actions_row">
    19:         <div class="comment_action_item">
    20:           <%= render "layouts/reaction", locals: {comment: comment, button: "Like", rcts_no: locals[:reactions][comment.id][:likes], user_reaction_id: locals[:user_reactions][comment.id][:reaction_id]} %>
    21:         </div>
    22:         <div class="comment_action_item">
    23:           <%= render "layouts/reaction", locals: {comment: comment, button: "Dislike", rcts_no: locals[:reactions][comment.id][:dislikes], user_reaction_id: locals[:user_reactions][comment.id][:reaction_id]} %>
  
app/views/layouts/_comment.html.erb:20
app/views/layouts/_comment.html.erb:2
app/views/dishes/show.html.erb:8
Started GET "/restaurants/1/dishes/1" for ::1 at 2023-11-19 12:51:59 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"1", "id"=>"1"}
  [1m[36mDish Load (41.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 1], ["restaurant_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (43.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  Rendered dishes/show.html.erb within layouts/application (Duration: 171.4ms | Allocations: 9898)
  Rendered layout layouts/application.html.erb (Duration: 172.3ms | Allocations: 9991)
Completed 500 Internal Server Error in 1354ms (ActiveRecord: 466.7ms | Allocations: 19482)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `locals' for #<ActionView::Base:0x0000000001c930>):
    2:   <div class="title_container">
    3:     <div class="title">Restaurante <span class="title_key_word"><%= @dish.restaurant.nombre %></span></div>
    4:     <!-- Mostrar el botÃ³n de editar solo si el usuario es el propietario del restaurante -->
    5:     <% if session[:username].present? and user_is_owner?(locals[:restaurant].id) %>
    6:       <!-- Si el restaurante tiene su imported_id distinto de nil, significa que es un restaurante importado y no se puede editar -->
    7:       <% if locals[:restaurant].imported_id.nil? %>
    8:           <%= link_to edit_restaurant_dish_path(locals[:restaurant].id), style: "text-decoration: none" do %>
  
app/views/dishes/show.html.erb:5
Started GET "/restaurants/1/dishes/new" for ::1 at 2023-11-19 12:58:37 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"1"}
  [1m[36mRestaurant Load (52.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/new.html.erb within layouts/application (Duration: 22.8ms | Allocations: 1786)
  Rendered layouts/_header.html.erb (Duration: 15.6ms | Allocations: 1356)
  [1m[36mUser Load (49.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (52.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 351.7ms | Allocations: 13192)
  Rendered layout layouts/application.html.erb (Duration: 563.6ms | Allocations: 43379)
Completed 200 OK in 1612ms (Views: 471.7ms | ActiveRecord: 570.4ms | Allocations: 59261)


Started GET "/restaurants/1/dishes/new" for ::1 at 2023-11-19 12:59:44 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"1"}
  [1m[36mRestaurant Load (48.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 8.1ms | Allocations: 1548)
  Rendered dishes/new.html.erb within layouts/application (Duration: 12.8ms | Allocations: 1848)
  Rendered layout layouts/application.html.erb (Duration: 13.6ms | Allocations: 1941)
Completed 500 Internal Server Error in 576ms (ActiveRecord: 342.8ms | Allocations: 15223)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `dishes_path' for #<ActionView::Base:0x00000000029e50>):
    1: <%= form_with model: @dish, html: {multipart:true, remote: true} do |form| %>
    2:   <div class="categories_new_form_container">
    3:       <div class="categories_new_name_container">
    4:                 <div>
  
app/views/dishes/_form.html.erb:1
app/views/dishes/new.html.erb:6
Started GET "/users/Mr.Dani" for ::1 at 2023-11-19 13:13:46 +0100
Processing by UsersController#show as */*
  Parameters: {"id"=>"Mr"}
  [1m[36mUser Load (44.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (53.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (45.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (45.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (46.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-19 12:13:48.727013')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (46.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-19 12:13:48.777477')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (45.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-19 12:13:48.828818')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (48.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (51.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (46.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 12:13:49.134975')[0m  [["reviewable_id", 8], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (47.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 8]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (44.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "8"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (49.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "8"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (45.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 12:13:49.479952')[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (44.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (45.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (45.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (50.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 12:13:49.676522')[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (46.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (45.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 12:13:49.789669')[0m  [["reviewable_id", 1], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (45.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 12:13:49.839216')[0m  [["reviewable_id", 2], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (46.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 12:13:49.891954')[0m  [["reviewable_id", 3], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (50.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (47.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 23.5ms | Allocations: 3174)
  Rendered layouts/_header.html.erb (Duration: 10.2ms | Allocations: 1321)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 25.2ms | Allocations: 5089)
  Rendered layout layouts/application.html.erb (Duration: 129.8ms | Allocations: 28490)
Completed 200 OK in 3055ms (Views: 135.0ms | ActiveRecord: 1935.3ms | Allocations: 72588)


Started GET "/restaurants" for ::1 at 2023-11-19 13:13:53 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (52.4ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (46.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (45.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (43.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (43.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (49.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (49.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (47.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (48.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 309.4ms | Allocations: 14624)
  Rendered layouts/_header.html.erb (Duration: 10.3ms | Allocations: 1069)
  [1m[36mUser Load (47.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 127.2ms | Allocations: 4614)
  Rendered layout layouts/application.html.erb (Duration: 490.6ms | Allocations: 24254)
Completed 200 OK in 1031ms (Views: 226.1ms | ActiveRecord: 662.1ms | Allocations: 32988)


Started GET "/restaurants/1" for ::1 at 2023-11-19 13:13:58 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (86.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (67.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (68.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (124.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (70.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (67.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (45.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (155.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (48.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (113.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (188.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (71.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (61.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (246.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 275.2ms | Allocations: 2868)
  [1m[36mDish Load (116.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (46.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (46.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 2.4ms | Allocations: 861)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 426)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 428)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 425)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 434)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 429)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 428)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 425)
  Rendered layouts/_comment.html.erb (Duration: 204.9ms | Allocations: 10049)
  Rendered layouts/_add_comment.html.erb (Duration: 1.6ms | Allocations: 664)
  [1m[35m (46.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 721.5ms | Allocations: 17134)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1056)
  [1m[36mUser Load (83.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (120.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 222.9ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 955.1ms | Allocations: 26451)
Completed 200 OK in 2424ms (Views: 250.8ms | ActiveRecord: 2000.4ms | Allocations: 36535)


Started GET "/restaurants/1/dishes/new" for ::1 at 2023-11-19 13:14:03 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"1"}
  [1m[36mRestaurant Load (43.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 86.6ms | Allocations: 51610)
  Rendered dishes/new.html.erb within layouts/application (Duration: 87.5ms | Allocations: 51898)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1066)
  [1m[36mUser Load (44.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (47.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 102.7ms | Allocations: 4607)
  Rendered layout layouts/application.html.erb (Duration: 195.3ms | Allocations: 61305)
Completed 200 OK in 241ms (Views: 104.4ms | ActiveRecord: 135.0ms | Allocations: 62413)


Started GET "/restaurants/1/dishes/new" for ::1 at 2023-11-19 13:19:38 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"1"}
  [1m[36mRestaurant Load (44.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 5.7ms | Allocations: 2736)
  Rendered dishes/new.html.erb within layouts/application (Duration: 6.8ms | Allocations: 3035)
  Rendered layouts/_header.html.erb (Duration: 2.7ms | Allocations: 1324)
  [1m[36mUser Load (45.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 235.9ms | Allocations: 13379)
  Rendered layout layouts/application.html.erb (Duration: 272.4ms | Allocations: 36606)
Completed 200 OK in 704ms (Views: 87.2ms | ActiveRecord: 479.5ms | Allocations: 49922)


Started GET "/restaurants/7" for ::1 at 2023-11-19 13:19:52 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (43.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (43.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (46.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
Started GET "/restaurants/7" for ::1 at 2023-11-19 13:19:52 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mPost Load (57.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (47.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (45.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (44.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (47.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (45.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 51.5ms | Allocations: 2117)
  [1m[36mDish Load (44.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (47.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (54.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 58.2ms | Allocations: 1845)
  Rendered layouts/_add_comment.html.erb (Duration: 6.0ms | Allocations: 664)
  [1m[35m (45.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 267.9ms | Allocations: 8446)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1056)
  [1m[36mUser Load (51.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 109.9ms | Allocations: 6095)
  Rendered layout layouts/application.html.erb (Duration: 385.8ms | Allocations: 19321)
Completed 200 OK in 1253ms (Views: 53.9ms | ActiveRecord: 1131.7ms | Allocations: 34344)


  [1m[36mRestaurant Load (55.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (47.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (48.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (49.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (51.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (47.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (47.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (58.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (49.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (44.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (47.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (45.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 56.7ms | Allocations: 1490)
  [1m[36mDish Load (45.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (43.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (44.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 93.2ms | Allocations: 490)
  Rendered layouts/_add_comment.html.erb (Duration: 1.0ms | Allocations: 512)
  [1m[35m (47.1ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 350.1ms | Allocations: 3889)
  Rendered layouts/_header.html.erb (Duration: 5.8ms | Allocations: 1068)
  [1m[36mUser Load (43.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 192.5ms | Allocations: 4636)
  Rendered layout layouts/application.html.erb (Duration: 566.1ms | Allocations: 13326)
Completed 200 OK in 2274ms (Views: 252.1ms | ActiveRecord: 1346.5ms | Allocations: 45881)


Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 13:19:58 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.1ms | Allocations: 2111)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.4ms | Allocations: 2186)
  Rendered layouts/_header.html.erb (Duration: 2.9ms | Allocations: 1068)
  [1m[36mUser Load (43.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (47.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 101.1ms | Allocations: 4595)
  Rendered layout layouts/application.html.erb (Duration: 114.3ms | Allocations: 11584)
Completed 200 OK in 161ms (Views: 23.4ms | ActiveRecord: 135.5ms | Allocations: 12461)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:20:27 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que vas a probar", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 0.4ms | Allocations: 1062)
  Rendered dishes/new.html.erb within layouts/application (Duration: 0.7ms | Allocations: 1176)
  Rendered layout layouts/application.html.erb (Duration: 1.0ms | Allocations: 1268)
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms | Allocations: 3177)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `dishes_path' for #<ActionView::Base:0x00000000037ac8>):
    1: <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
    2: <%= form_with model: [@restaurant, @dish], html: {multipart:true, remote: true} do |form| %>
    3:   <div class="categories_new_form_container">
    4:       <div class="categories_new_name_container">
    5:                 <div>
  
app/views/dishes/_form.html.erb:2
app/views/dishes/new.html.erb:6
app/controllers/dishes_controller.rb:28:in `create'
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 13:21:13 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.2ms | Allocations: 2734)
  Rendered dishes/new.html.erb within layouts/application (Duration: 5.4ms | Allocations: 3029)
  Rendered layouts/_header.html.erb (Duration: 4.7ms | Allocations: 1324)
  [1m[36mUser Load (46.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (47.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 251.7ms | Allocations: 13395)
  Rendered layout layouts/application.html.erb (Duration: 287.7ms | Allocations: 36614)
Completed 200 OK in 713ms (Views: 106.3ms | ActiveRecord: 513.8ms | Allocations: 50043)


Started GET "/restaurants/7/" for ::1 at 2023-11-19 13:21:23 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (53.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (44.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (44.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (48.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (43.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (43.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (43.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (43.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 48.6ms | Allocations: 2096)
  [1m[36mDish Load (43.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (44.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (43.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 49.8ms | Allocations: 1709)
  Rendered layouts/_add_comment.html.erb (Duration: 1.6ms | Allocations: 664)
  [1m[35m (43.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 245.9ms | Allocations: 7962)
  Rendered layouts/_header.html.erb (Duration: 5.6ms | Allocations: 1060)
  [1m[36mUser Load (43.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 107.2ms | Allocations: 4583)
  Rendered layout layouts/application.html.erb (Duration: 373.6ms | Allocations: 17342)
Completed 200 OK in 1287ms (Views: 66.3ms | ActiveRecord: 1106.9ms | Allocations: 29810)


Started GET "/restaurants/7/" for ::1 at 2023-11-19 13:21:30 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (47.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (52.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (46.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (46.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (46.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (44.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (55.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (46.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 52.6ms | Allocations: 1490)
  [1m[36mDish Load (50.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (46.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (46.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 54.2ms | Allocations: 485)
  Rendered layouts/_add_comment.html.erb (Duration: 1.3ms | Allocations: 513)
  [1m[35m (47.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 266.7ms | Allocations: 3849)
  Rendered layouts/_header.html.erb (Duration: 6.2ms | Allocations: 1056)
  [1m[36mUser Load (43.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (49.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 157.0ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 455.1ms | Allocations: 13191)
Completed 200 OK in 1067ms (Views: 125.8ms | ActiveRecord: 894.4ms | Allocations: 18119)


Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 13:21:45 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.6ms | Allocations: 2099)
  Rendered dishes/new.html.erb within layouts/application (Duration: 5.0ms | Allocations: 2174)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1056)
  [1m[36mUser Load (43.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 94.5ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 113.4ms | Allocations: 11516)
Completed 200 OK in 163ms (Views: 28.3ms | ActiveRecord: 131.5ms | Allocations: 12396)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:00 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (46.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.6ms | Allocations: 2104)
  Rendered dishes/new.html.erb within layouts/application (Duration: 2.8ms | Allocations: 2218)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1056)
  [1m[36mUser Load (43.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 106.0ms | Allocations: 4588)
  Rendered layout layouts/application.html.erb (Duration: 115.1ms | Allocations: 11572)
Completed 200 OK in 168ms (Views: 26.5ms | ActiveRecord: 135.4ms | Allocations: 13695)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:03 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (46.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.3ms | Allocations: 2096)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.5ms | Allocations: 2167)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1060)
  [1m[36mUser Load (45.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 99.3ms | Allocations: 4587)
  Rendered layout layouts/application.html.erb (Duration: 109.4ms | Allocations: 11537)
Completed 200 OK in 159ms (Views: 18.5ms | ActiveRecord: 137.5ms | Allocations: 13031)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:04 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.7ms | Allocations: 2090)
  Rendered dishes/new.html.erb within layouts/application (Duration: 2.9ms | Allocations: 2161)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1056)
  [1m[36mUser Load (44.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 95.5ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 103.9ms | Allocations: 11508)
Completed 200 OK in 153ms (Views: 16.2ms | ActiveRecord: 131.9ms | Allocations: 13008)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:05 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.7ms | Allocations: 2090)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.0ms | Allocations: 2161)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1056)
  [1m[36mUser Load (44.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 97.2ms | Allocations: 4577)
  Rendered layout layouts/application.html.erb (Duration: 107.5ms | Allocations: 11504)
Completed 200 OK in 157ms (Views: 19.5ms | ActiveRecord: 134.2ms | Allocations: 13005)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:05 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.1ms | Allocations: 2090)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.5ms | Allocations: 2161)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1056)
  [1m[36mUser Load (46.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 100.3ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 112.7ms | Allocations: 11502)
Completed 200 OK in 161ms (Views: 21.2ms | ActiveRecord: 136.6ms | Allocations: 12995)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:06 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.3ms | Allocations: 2090)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.5ms | Allocations: 2161)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1056)
  [1m[36mUser Load (43.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 96.8ms | Allocations: 4595)
  Rendered layout layouts/application.html.erb (Duration: 107.4ms | Allocations: 11522)
Completed 200 OK in 156ms (Views: 21.0ms | ActiveRecord: 131.2ms | Allocations: 13029)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:07 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.6ms | Allocations: 2096)
  Rendered dishes/new.html.erb within layouts/application (Duration: 2.9ms | Allocations: 2167)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1060)
  [1m[36mUser Load (43.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 96.6ms | Allocations: 4587)
  Rendered layout layouts/application.html.erb (Duration: 105.4ms | Allocations: 11537)
Completed 200 OK in 153ms (Views: 16.8ms | ActiveRecord: 132.9ms | Allocations: 13052)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:07 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (46.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.8ms | Allocations: 2090)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.1ms | Allocations: 2161)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1056)
  [1m[36mUser Load (47.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 101.4ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 110.0ms | Allocations: 11503)
Completed 200 OK in 160ms (Views: 17.0ms | ActiveRecord: 140.0ms | Allocations: 13018)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:20 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (47.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.1ms | Allocations: 2090)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.5ms | Allocations: 2161)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1057)
  [1m[36mUser Load (43.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 96.1ms | Allocations: 4576)
  Rendered layout layouts/application.html.erb (Duration: 107.2ms | Allocations: 11504)
Completed 200 OK in 159ms (Views: 20.7ms | ActiveRecord: 134.7ms | Allocations: 12998)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:20 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.3ms | Allocations: 2090)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.6ms | Allocations: 2161)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1056)
  [1m[36mUser Load (45.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 98.1ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 110.0ms | Allocations: 11502)
Completed 200 OK in 157ms (Views: 22.0ms | ActiveRecord: 131.9ms | Allocations: 12987)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:20 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.5ms | Allocations: 2090)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.8ms | Allocations: 2161)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1056)
  [1m[36mUser Load (44.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 99.2ms | Allocations: 4594)
  Rendered layout layouts/application.html.erb (Duration: 110.3ms | Allocations: 11521)
Completed 200 OK in 158ms (Views: 22.9ms | ActiveRecord: 131.8ms | Allocations: 13018)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:21 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.0ms | Allocations: 2096)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.3ms | Allocations: 2167)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1060)
  [1m[36mUser Load (46.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 96.4ms | Allocations: 4588)
  Rendered layout layouts/application.html.erb (Duration: 108.3ms | Allocations: 11538)
Completed 200 OK in 155ms (Views: 19.8ms | ActiveRecord: 132.5ms | Allocations: 13036)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:21 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.5ms | Allocations: 2091)
  Rendered dishes/new.html.erb within layouts/application (Duration: 2.7ms | Allocations: 2162)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1057)
  [1m[36mUser Load (43.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 96.7ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 104.8ms | Allocations: 11505)
Completed 200 OK in 151ms (Views: 16.9ms | ActiveRecord: 132.1ms | Allocations: 13005)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:23 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.7ms | Allocations: 2090)
  Rendered dishes/new.html.erb within layouts/application (Duration: 2.9ms | Allocations: 2161)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1057)
  [1m[36mUser Load (60.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (47.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 116.6ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 125.2ms | Allocations: 11503)
Completed 200 OK in 173ms (Views: 18.3ms | ActiveRecord: 151.5ms | Allocations: 13009)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:23 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (46.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.0ms | Allocations: 2090)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.2ms | Allocations: 2161)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1056)
  [1m[36mUser Load (43.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 95.5ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 103.9ms | Allocations: 11502)
Completed 200 OK in 154ms (Views: 16.7ms | ActiveRecord: 134.3ms | Allocations: 12971)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:24 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.0ms | Allocations: 2090)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.3ms | Allocations: 2161)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1056)
  [1m[36mUser Load (46.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 100.8ms | Allocations: 4594)
  Rendered layout layouts/application.html.erb (Duration: 110.8ms | Allocations: 11521)
Completed 200 OK in 158ms (Views: 21.0ms | ActiveRecord: 134.3ms | Allocations: 12998)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:38 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (47.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.6ms | Allocations: 2096)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.1ms | Allocations: 2167)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1060)
  [1m[36mUser Load (43.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 95.6ms | Allocations: 4588)
  Rendered layout layouts/application.html.erb (Duration: 106.9ms | Allocations: 11538)
Completed 200 OK in 161ms (Views: 21.1ms | ActiveRecord: 134.2ms | Allocations: 13047)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:39 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.4ms | Allocations: 2091)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.7ms | Allocations: 2162)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1056)
  [1m[36mUser Load (43.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 95.6ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 105.5ms | Allocations: 11504)
Completed 200 OK in 153ms (Views: 19.7ms | ActiveRecord: 130.0ms | Allocations: 13009)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:39 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (46.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.9ms | Allocations: 2090)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.2ms | Allocations: 2161)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1057)
  [1m[36mUser Load (50.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (42.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 101.3ms | Allocations: 4576)
  Rendered layout layouts/application.html.erb (Duration: 112.0ms | Allocations: 11504)
Completed 200 OK in 162ms (Views: 19.6ms | ActiveRecord: 139.1ms | Allocations: 13041)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:39 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (46.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.8ms | Allocations: 2090)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.3ms | Allocations: 2161)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1056)
  [1m[36mUser Load (43.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 97.0ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 111.1ms | Allocations: 11502)
Completed 200 OK in 162ms (Views: 24.7ms | ActiveRecord: 133.5ms | Allocations: 12975)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:39 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.7ms | Allocations: 2090)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.0ms | Allocations: 2161)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1056)
  [1m[36mUser Load (42.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 97.1ms | Allocations: 4594)
  Rendered layout layouts/application.html.erb (Duration: 105.5ms | Allocations: 11521)
Completed 200 OK in 153ms (Views: 19.5ms | ActiveRecord: 130.4ms | Allocations: 13013)


Started GET "/restaurants/7/" for ::1 at 2023-11-19 13:22:44 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (47.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (44.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (44.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (44.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (45.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (47.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (43.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (44.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 48.0ms | Allocations: 1502)
  [1m[36mDish Load (43.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (46.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (43.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 45.2ms | Allocations: 485)
  Rendered layouts/_add_comment.html.erb (Duration: 1.4ms | Allocations: 518)
  [1m[35m (44.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 233.9ms | Allocations: 3866)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1060)
  [1m[36mUser Load (44.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 102.2ms | Allocations: 4588)
  Rendered layout layouts/application.html.erb (Duration: 344.3ms | Allocations: 13238)
Completed 200 OK in 900ms (Views: 33.7ms | ActiveRecord: 849.5ms | Allocations: 18178)


Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 13:22:48 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.4ms | Allocations: 2098)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.6ms | Allocations: 2173)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1056)
  [1m[36mUser Load (43.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (47.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 97.8ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 106.7ms | Allocations: 11514)
Completed 200 OK in 153ms (Views: 16.9ms | ActiveRecord: 134.2ms | Allocations: 12388)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:53 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"", "descripcion"=>"", "precio"=>""}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.1ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.3ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1056)
  [1m[36mUser Load (44.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 96.8ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 105.9ms | Allocations: 11501)
Completed 200 OK in 155ms (Views: 18.3ms | ActiveRecord: 131.9ms | Allocations: 12989)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:54 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"", "descripcion"=>"", "precio"=>""}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.6ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.9ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1056)
  [1m[36mUser Load (50.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 106.1ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 117.5ms | Allocations: 11500)
Completed 200 OK in 166ms (Views: 21.3ms | ActiveRecord: 141.7ms | Allocations: 13012)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:54 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"", "descripcion"=>"", "precio"=>""}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.6ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 2.8ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 2.2ms | Allocations: 1060)
  [1m[36mUser Load (44.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 97.3ms | Allocations: 4600)
  Rendered layout layouts/application.html.erb (Duration: 108.8ms | Allocations: 11540)
Completed 200 OK in 157ms (Views: 20.9ms | ActiveRecord: 133.1ms | Allocations: 13042)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:54 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"", "descripcion"=>"", "precio"=>""}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.6ms | Allocations: 2094)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.8ms | Allocations: 2165)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1060)
  [1m[36mUser Load (43.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 95.6ms | Allocations: 4588)
  Rendered layout layouts/application.html.erb (Duration: 105.6ms | Allocations: 11533)
Completed 200 OK in 153ms (Views: 19.2ms | ActiveRecord: 130.9ms | Allocations: 13026)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:54 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"", "descripcion"=>"", "precio"=>""}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.5ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.8ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1056)
  [1m[36mUser Load (43.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 97.8ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 110.2ms | Allocations: 11500)
Completed 200 OK in 157ms (Views: 21.3ms | ActiveRecord: 133.4ms | Allocations: 13001)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:27:53 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"", "descripcion"=>"", "precio"=>""}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 5.4ms | Allocations: 2089)
  Rendered dishes/new.html.erb within layouts/application (Duration: 5.8ms | Allocations: 2160)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1056)
  [1m[36mUser Load (43.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 98.0ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 110.5ms | Allocations: 11501)
Completed 200 OK in 164ms (Views: 23.3ms | ActiveRecord: 132.7ms | Allocations: 13017)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:27:54 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"", "descripcion"=>"", "precio"=>""}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.1ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.4ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1056)
  [1m[36mUser Load (42.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 96.0ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 108.3ms | Allocations: 11500)
Completed 200 OK in 157ms (Views: 22.7ms | ActiveRecord: 131.3ms | Allocations: 12992)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:27:54 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"", "descripcion"=>"", "precio"=>""}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 7.8ms | Allocations: 2089)
  Rendered dishes/new.html.erb within layouts/application (Duration: 8.1ms | Allocations: 2160)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1060)
  [1m[36mUser Load (51.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 103.8ms | Allocations: 4601)
  Rendered layout layouts/application.html.erb (Duration: 118.3ms | Allocations: 11545)
Completed 200 OK in 165ms (Views: 23.7ms | ActiveRecord: 138.5ms | Allocations: 13062)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:27:54 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"", "descripcion"=>"", "precio"=>""}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (47.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.8ms | Allocations: 2093)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.1ms | Allocations: 2164)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1060)
  [1m[36mUser Load (42.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (47.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 97.1ms | Allocations: 4588)
  Rendered layout layouts/application.html.erb (Duration: 105.2ms | Allocations: 11535)
Completed 200 OK in 157ms (Views: 15.4ms | ActiveRecord: 138.2ms | Allocations: 13046)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:27:55 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"", "descripcion"=>"", "precio"=>""}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.4ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.8ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1056)
  [1m[36mUser Load (43.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 95.5ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 106.8ms | Allocations: 11500)
Completed 200 OK in 159ms (Views: 20.1ms | ActiveRecord: 132.9ms | Allocations: 13003)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:28:04 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"", "descripcion"=>"", "precio"=>""}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.2ms | Allocations: 2089)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.4ms | Allocations: 2160)
  Rendered layouts/_header.html.erb (Duration: 3.6ms | Allocations: 1056)
  [1m[36mUser Load (45.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 98.2ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 113.1ms | Allocations: 11501)
Completed 200 OK in 163ms (Views: 23.1ms | ActiveRecord: 135.4ms | Allocations: 12999)


Started GET "/restaurants/new" for ::1 at 2023-11-19 13:28:26 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (87.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 177.0ms | Allocations: 18334)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 178.7ms | Allocations: 18581)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1056)
  [1m[36mUser Load (43.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 99.5ms | Allocations: 4586)
  Rendered layout layouts/application.html.erb (Duration: 284.3ms | Allocations: 27913)
Completed 200 OK in 286ms (Views: 64.3ms | ActiveRecord: 220.8ms | Allocations: 28249)


Started POST "/restaurants" for ::1 at 2023-11-19 13:28:32 +0100
Processing by RestaurantsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "restaurant"=>{"nombre"=>"", "telefono"=>"", "direccion"=>"", "horario"=>"", "categoria"=>""}, "button"=>""}
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (43.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/restaurants_controller.rb:43:in `create'
  [1m[36mRestaurant Create (93.8ms)[0m  [1m[32mINSERT INTO "restaurants" ("categoria", "nombre", "ruta_img_perfil", "ruta_img_fondo", "direccion", "telefono", "horario", "imported_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["categoria", ""], ["nombre", ""], ["ruta_img_perfil", nil], ["ruta_img_fondo", nil], ["direccion", ""], ["telefono", ""], ["horario", ""], ["imported_id", nil]]
  â†³ app/controllers/restaurants_controller.rb:43:in `create'
  [1m[36mTRANSACTION (43.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/restaurants_controller.rb:43:in `create'
Completed 500 Internal Server Error in 142ms (ActiveRecord: 180.1ms | Allocations: 4635)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  insert or update on table "restaurants" violates foreign key constraint "fk_rails_933d904194"
DETAIL:  Key (categoria)=() is not present in table "categories".
):
  
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 13:28:45 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.1ms | Allocations: 2100)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.5ms | Allocations: 2179)
  Rendered layouts/_header.html.erb (Duration: 2.3ms | Allocations: 1060)
  [1m[36mUser Load (44.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 98.9ms | Allocations: 4600)
  Rendered layout layouts/application.html.erb (Duration: 109.5ms | Allocations: 11562)
Completed 200 OK in 158ms (Views: 21.2ms | ActiveRecord: 134.3ms | Allocations: 12468)


Started GET "/restaurants/new" for ::1 at 2023-11-19 13:31:41 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (61.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 141.7ms | Allocations: 6259)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 142.7ms | Allocations: 6530)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1316)
  [1m[36mUser Load (46.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (47.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 225.3ms | Allocations: 13450)
  Rendered layout layouts/application.html.erb (Duration: 386.0ms | Allocations: 40102)
Completed 200 OK in 683ms (Views: 72.7ms | ActiveRecord: 520.3ms | Allocations: 48576)


Started POST "/restaurants" for ::1 at 2023-11-19 13:31:46 +0100
Processing by RestaurantsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "restaurant"=>{"nombre"=>"", "telefono"=>"", "direccion"=>"", "horario"=>"", "categoria"=>""}, "button"=>""}
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (43.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/restaurants_controller.rb:43:in `create'
  [1m[36mRestaurant Create (89.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("categoria", "nombre", "ruta_img_perfil", "ruta_img_fondo", "direccion", "telefono", "horario", "imported_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["categoria", ""], ["nombre", ""], ["ruta_img_perfil", nil], ["ruta_img_fondo", nil], ["direccion", ""], ["telefono", ""], ["horario", ""], ["imported_id", nil]]
  â†³ app/controllers/restaurants_controller.rb:43:in `create'
  [1m[36mTRANSACTION (42.8ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/restaurants_controller.rb:43:in `create'
Completed 500 Internal Server Error in 137ms (ActiveRecord: 175.5ms | Allocations: 3520)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  insert or update on table "restaurants" violates foreign key constraint "fk_rails_933d904194"
DETAIL:  Key (categoria)=() is not present in table "categories".
):
  
Started GET "/restaurants/nwe" for ::1 at 2023-11-19 13:32:15 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"nwe"}
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
Completed 404 Not Found in 48ms (ActiveRecord: 43.6ms | Allocations: 1393)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::RecordNotFound (Couldn't find Restaurant with 'id'=nwe):
  
app/controllers/restaurants_controller.rb:22:in `show'
Started GET "/restaurants/new" for ::1 at 2023-11-19 13:32:19 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (88.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 95.2ms | Allocations: 2999)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 95.5ms | Allocations: 3066)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1060)
  [1m[36mUser Load (43.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 94.2ms | Allocations: 4600)
  Rendered layout layouts/application.html.erb (Duration: 195.1ms | Allocations: 12428)
Completed 200 OK in 196ms (Views: 19.7ms | ActiveRecord: 176.2ms | Allocations: 12692)


Started GET "/restaurants/new" for ::1 at 2023-11-19 13:33:39 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (47.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 130.2ms | Allocations: 6256)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 133.0ms | Allocations: 6576)
  Rendered layouts/_header.html.erb (Duration: 5.8ms | Allocations: 1313)
  [1m[36mUser Load (47.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 261.6ms | Allocations: 13487)
  Rendered layout layouts/application.html.erb (Duration: 473.3ms | Allocations: 40202)
Completed 200 OK in 717ms (Views: 201.1ms | ActiveRecord: 419.9ms | Allocations: 48673)


Started GET "/restaurants/new" for ::1 at 2023-11-19 13:34:04 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (47.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 117.0ms | Allocations: 6242)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 118.7ms | Allocations: 6561)
  Rendered layouts/_header.html.erb (Duration: 3.1ms | Allocations: 1307)
  [1m[36mUser Load (45.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 225.8ms | Allocations: 13489)
  Rendered layout layouts/application.html.erb (Duration: 380.8ms | Allocations: 39939)
Completed 200 OK in 596ms (Views: 105.2ms | ActiveRecord: 418.8ms | Allocations: 48306)


Started GET "/restaurants/new" for ::1 at 2023-11-19 13:34:35 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (61.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 116.9ms | Allocations: 6272)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 117.8ms | Allocations: 6595)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1311)
  [1m[36mUser Load (56.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 241.4ms | Allocations: 13501)
  Rendered layout layouts/application.html.erb (Duration: 380.1ms | Allocations: 40094)
Completed 200 OK in 598ms (Views: 69.4ms | ActiveRecord: 461.4ms | Allocations: 48494)


Started GET "/restaurants/new" for ::1 at 2023-11-19 13:35:33 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (45.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 166.6ms | Allocations: 6252)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 173.9ms | Allocations: 6575)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1319)
  [1m[36mUser Load (42.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 203.9ms | Allocations: 13536)
  Rendered layout layouts/application.html.erb (Duration: 407.0ms | Allocations: 40282)
Completed 200 OK in 647ms (Views: 147.4ms | ActiveRecord: 414.7ms | Allocations: 48700)


Started GET "/restaurants/new" for ::1 at 2023-11-19 13:36:15 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (45.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 110.0ms | Allocations: 6251)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 111.5ms | Allocations: 6570)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1307)
  [1m[36mUser Load (44.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 206.4ms | Allocations: 13391)
  Rendered layout layouts/application.html.erb (Duration: 338.5ms | Allocations: 39862)
Completed 200 OK in 545ms (Views: 70.0ms | ActiveRecord: 406.6ms | Allocations: 48209)


Started GET "/restaurants/new" for ::1 at 2023-11-19 13:36:23 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (45.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 106.7ms | Allocations: 6240)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 107.9ms | Allocations: 6563)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1319)
  [1m[36mUser Load (44.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 208.5ms | Allocations: 13517)
  Rendered layout layouts/application.html.erb (Duration: 336.3ms | Allocations: 40248)
Completed 200 OK in 558ms (Views: 68.4ms | ActiveRecord: 409.0ms | Allocations: 48704)


Started GET "/restaurants/new" for ::1 at 2023-11-19 13:36:31 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (43.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 101.0ms | Allocations: 6247)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 104.5ms | Allocations: 6568)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1319)
  [1m[36mUser Load (43.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (52.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 213.6ms | Allocations: 13499)
  Rendered layout layouts/application.html.erb (Duration: 340.4ms | Allocations: 40235)
Completed 200 OK in 570ms (Views: 69.7ms | ActiveRecord: 430.7ms | Allocations: 48620)


Started GET "/restaurants/new" for ::1 at 2023-11-19 13:37:36 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (44.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 121.5ms | Allocations: 6264)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 124.6ms | Allocations: 6583)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1319)
  [1m[36mUser Load (44.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (49.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 214.7ms | Allocations: 13479)
  Rendered layout layouts/application.html.erb (Duration: 361.5ms | Allocations: 40257)
Completed 200 OK in 572ms (Views: 94.5ms | ActiveRecord: 405.9ms | Allocations: 48593)


Started POST "/restaurants" for ::1 at 2023-11-19 16:09:08 +0100
Processing by RestaurantsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "restaurant"=>{"nombre"=>"", "telefono"=>"", "direccion"=>"", "horario"=>"", "categoria"=>""}, "button"=>""}
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (44.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/restaurants_controller.rb:43:in `create'
  [1m[36mRestaurant Create (146.5ms)[0m  [1m[32mINSERT INTO "restaurants" ("categoria", "nombre", "ruta_img_perfil", "ruta_img_fondo", "direccion", "telefono", "horario", "imported_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["categoria", ""], ["nombre", ""], ["ruta_img_perfil", nil], ["ruta_img_fondo", nil], ["direccion", ""], ["telefono", ""], ["horario", ""], ["imported_id", nil]]
  â†³ app/controllers/restaurants_controller.rb:43:in `create'
  [1m[36mTRANSACTION (45.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/restaurants_controller.rb:43:in `create'
Completed 500 Internal Server Error in 2012ms (ActiveRecord: 599.4ms | Allocations: 13698)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  insert or update on table "restaurants" violates foreign key constraint "fk_rails_933d904194"
DETAIL:  Key (categoria)=() is not present in table "categories".
):
  
Started GET "/restaurants/nwe" for ::1 at 2023-11-19 16:09:32 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"nwe"}
  [1m[36mRestaurant Load (45.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
Completed 404 Not Found in 187ms (ActiveRecord: 137.4ms | Allocations: 1514)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::RecordNotFound (Couldn't find Restaurant with 'id'=nwe):
  
app/controllers/restaurants_controller.rb:22:in `show'
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:09:44 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 20.5ms | Allocations: 2728)
  Rendered dishes/new.html.erb within layouts/application (Duration: 22.5ms | Allocations: 3022)
  Rendered layouts/_header.html.erb (Duration: 4.5ms | Allocations: 1326)
  [1m[36mUser Load (43.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 221.1ms | Allocations: 13312)
  Rendered layout layouts/application.html.erb (Duration: 308.2ms | Allocations: 36530)
Completed 200 OK in 528ms (Views: 225.0ms | ActiveRecord: 277.2ms | Allocations: 41853)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:09:52 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"", "descripcion"=>"", "precio"=>""}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (48.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 5.7ms | Allocations: 2102)
  Rendered dishes/new.html.erb within layouts/application (Duration: 6.2ms | Allocations: 2216)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1056)
  [1m[36mUser Load (43.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 100.9ms | Allocations: 4576)
  Rendered layout layouts/application.html.erb (Duration: 115.8ms | Allocations: 11562)
Completed 200 OK in 169ms (Views: 28.7ms | ActiveRecord: 136.1ms | Allocations: 13684)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:09:53 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"", "descripcion"=>"", "precio"=>""}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (50.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 6.9ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 8.2ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1056)
  [1m[36mUser Load (46.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 106.8ms | Allocations: 4576)
  Rendered layout layouts/application.html.erb (Duration: 121.9ms | Allocations: 11501)
Completed 200 OK in 177ms (Views: 33.0ms | ActiveRecord: 140.0ms | Allocations: 13016)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:09:53 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"", "descripcion"=>"", "precio"=>""}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (49.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.3ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.6ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1056)
  [1m[36mUser Load (44.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 100.5ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 114.6ms | Allocations: 11500)
Completed 200 OK in 171ms (Views: 25.4ms | ActiveRecord: 139.3ms | Allocations: 12988)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:22 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (54.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 6.4ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 7.8ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 7.5ms | Allocations: 1056)
  [1m[36mUser Load (50.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (54.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 130.0ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 159.0ms | Allocations: 11500)
Completed 200 OK in 219ms (Views: 55.7ms | ActiveRecord: 158.2ms | Allocations: 13006)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:22 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (48.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 11.6ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 12.3ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1056)
  [1m[36mUser Load (44.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (49.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 140.3ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 160.6ms | Allocations: 11500)
Completed 200 OK in 256ms (Views: 102.2ms | ActiveRecord: 141.7ms | Allocations: 12999)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:22 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (48.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 8.8ms | Allocations: 2095)
  Rendered dishes/new.html.erb within layouts/application (Duration: 12.6ms | Allocations: 2166)
  Rendered layouts/_header.html.erb (Duration: 2.2ms | Allocations: 1060)
  [1m[36mUser Load (43.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 103.8ms | Allocations: 4587)
  Rendered layout layouts/application.html.erb (Duration: 130.3ms | Allocations: 11536)
Completed 200 OK in 193ms (Views: 43.8ms | ActiveRecord: 137.0ms | Allocations: 13040)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:23 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (49.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.6ms | Allocations: 2094)
  Rendered dishes/new.html.erb within layouts/application (Duration: 5.0ms | Allocations: 2165)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1060)
  [1m[36mUser Load (44.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (47.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 106.0ms | Allocations: 4587)
  Rendered layout layouts/application.html.erb (Duration: 119.2ms | Allocations: 11535)
Completed 200 OK in 177ms (Views: 31.5ms | ActiveRecord: 140.7ms | Allocations: 13025)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:24 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 6.1ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 6.9ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 7.7ms | Allocations: 1057)
  [1m[36mUser Load (46.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 116.2ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 148.0ms | Allocations: 11501)
Completed 200 OK in 202ms (Views: 57.9ms | ActiveRecord: 136.0ms | Allocations: 13013)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:25 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 11.9ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 15.8ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 2.7ms | Allocations: 1056)
  [1m[36mUser Load (44.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 96.9ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 127.7ms | Allocations: 11500)
Completed 200 OK in 187ms (Views: 40.5ms | ActiveRecord: 133.4ms | Allocations: 12998)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:26 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (47.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 8.4ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 9.8ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 5.3ms | Allocations: 1056)
  [1m[36mUser Load (47.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (57.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 126.2ms | Allocations: 4576)
  Rendered layout layouts/application.html.erb (Duration: 164.8ms | Allocations: 11501)
Completed 200 OK in 218ms (Views: 62.0ms | ActiveRecord: 151.4ms | Allocations: 13010)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:26 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.7ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.1ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 4.9ms | Allocations: 1056)
  [1m[36mUser Load (45.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (47.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 114.6ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 136.4ms | Allocations: 11500)
Completed 200 OK in 191ms (Views: 44.8ms | ActiveRecord: 138.2ms | Allocations: 13013)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:26 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (63.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 35.0ms | Allocations: 2108)
  Rendered dishes/new.html.erb within layouts/application (Duration: 38.0ms | Allocations: 2179)
  Rendered layouts/_header.html.erb (Duration: 3.3ms | Allocations: 1068)
  [1m[36mUser Load (43.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 108.7ms | Allocations: 4611)
  Rendered layout layouts/application.html.erb (Duration: 179.3ms | Allocations: 11621)
Completed 200 OK in 255ms (Views: 91.6ms | ActiveRecord: 152.9ms | Allocations: 13098)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:27 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (53.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 6.1ms | Allocations: 2097)
  Rendered dishes/new.html.erb within layouts/application (Duration: 6.5ms | Allocations: 2168)
  Rendered layouts/_header.html.erb (Duration: 4.6ms | Allocations: 1068)
  [1m[36mUser Load (49.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 124.5ms | Allocations: 4609)
  Rendered layout layouts/application.html.erb (Duration: 144.3ms | Allocations: 11607)
Completed 200 OK in 209ms (Views: 51.8ms | ActiveRecord: 147.2ms | Allocations: 13117)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:27 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 10.7ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 12.1ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 3.3ms | Allocations: 1056)
  [1m[36mUser Load (49.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 119.1ms | Allocations: 4576)
  Rendered layout layouts/application.html.erb (Duration: 157.7ms | Allocations: 11501)
Completed 200 OK in 211ms (Views: 63.0ms | ActiveRecord: 139.3ms | Allocations: 12984)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:28 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (58.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 23.1ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 24.5ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1056)
  [1m[36mUser Load (44.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 101.7ms | Allocations: 4576)
  Rendered layout layouts/application.html.erb (Duration: 140.6ms | Allocations: 11501)
Completed 200 OK in 224ms (Views: 52.8ms | ActiveRecord: 148.0ms | Allocations: 12993)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:28 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.7ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 5.2ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1056)
  [1m[36mUser Load (46.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 122.0ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 138.7ms | Allocations: 11500)
Completed 200 OK in 198ms (Views: 48.0ms | ActiveRecord: 137.0ms | Allocations: 12992)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:29 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (51.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 27.8ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 29.2ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 6.5ms | Allocations: 1056)
  [1m[36mUser Load (43.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 106.9ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 159.2ms | Allocations: 11500)
Completed 200 OK in 233ms (Views: 78.2ms | ActiveRecord: 137.8ms | Allocations: 12989)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:29 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (47.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 32.7ms | Allocations: 2095)
  Rendered dishes/new.html.erb within layouts/application (Duration: 33.8ms | Allocations: 2166)
  Rendered layouts/_header.html.erb (Duration: 8.3ms | Allocations: 1068)
  [1m[36mUser Load (43.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 113.6ms | Allocations: 4611)
  Rendered layout layouts/application.html.erb (Duration: 176.1ms | Allocations: 11614)
Completed 200 OK in 237ms (Views: 89.9ms | ActiveRecord: 134.6ms | Allocations: 13110)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:29 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 8.6ms | Allocations: 2101)
  Rendered dishes/new.html.erb within layouts/application (Duration: 9.0ms | Allocations: 2172)
  Rendered layouts/_header.html.erb (Duration: 2.3ms | Allocations: 1068)
  [1m[36mUser Load (43.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (50.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 121.5ms | Allocations: 4611)
  Rendered layout layouts/application.html.erb (Duration: 141.8ms | Allocations: 11614)
Completed 200 OK in 200ms (Views: 49.1ms | ActiveRecord: 138.8ms | Allocations: 13122)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:30 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.3ms | Allocations: 2094)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.7ms | Allocations: 2165)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1056)
  [1m[36mUser Load (43.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 114.4ms | Allocations: 4576)
  Rendered layout layouts/application.html.erb (Duration: 125.8ms | Allocations: 11507)
Completed 200 OK in 181ms (Views: 38.4ms | ActiveRecord: 132.0ms | Allocations: 12991)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:30 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (49.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.3ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.7ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 6.0ms | Allocations: 1056)
  [1m[36mUser Load (47.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (47.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 140.2ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 163.4ms | Allocations: 11500)
Completed 200 OK in 224ms (Views: 72.2ms | ActiveRecord: 143.9ms | Allocations: 13007)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:30 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.3ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.6ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1056)
  [1m[36mUser Load (45.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 114.5ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 125.5ms | Allocations: 11500)
Completed 200 OK in 178ms (Views: 36.7ms | ActiveRecord: 133.3ms | Allocations: 12983)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:31 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (49.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 25.4ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 26.9ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 4.2ms | Allocations: 1056)
  [1m[36mUser Load (46.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 111.9ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 160.3ms | Allocations: 11501)
Completed 200 OK in 229ms (Views: 71.9ms | ActiveRecord: 140.2ms | Allocations: 13004)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:31 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 9.9ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 12.0ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 18.5ms | Allocations: 1069)
  [1m[36mUser Load (44.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 136.4ms | Allocations: 4611)
  Rendered layout layouts/application.html.erb (Duration: 218.7ms | Allocations: 11588)
Completed 200 OK in 271ms (Views: 130.5ms | ActiveRecord: 133.7ms | Allocations: 13093)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:31 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (47.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 11.8ms | Allocations: 2098)
  Rendered dishes/new.html.erb within layouts/application (Duration: 12.2ms | Allocations: 2169)
  Rendered layouts/_header.html.erb (Duration: 9.6ms | Allocations: 1068)
  [1m[36mUser Load (54.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (53.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 142.4ms | Allocations: 4611)
  Rendered layout layouts/application.html.erb (Duration: 181.5ms | Allocations: 11603)
Completed 200 OK in 237ms (Views: 75.7ms | ActiveRecord: 155.1ms | Allocations: 13105)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:32 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 13.9ms | Allocations: 2093)
  Rendered dishes/new.html.erb within layouts/application (Duration: 14.4ms | Allocations: 2164)
  Rendered layouts/_header.html.erb (Duration: 7.1ms | Allocations: 1056)
  [1m[36mUser Load (71.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 140.5ms | Allocations: 4576)
  Rendered layout layouts/application.html.erb (Duration: 177.9ms | Allocations: 11516)
Completed 200 OK in 235ms (Views: 64.0ms | ActiveRecord: 160.3ms | Allocations: 13000)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:32 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (46.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 19.0ms | Allocations: 2089)
  Rendered dishes/new.html.erb within layouts/application (Duration: 20.2ms | Allocations: 2160)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1056)
  [1m[36mUser Load (47.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 112.4ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 158.3ms | Allocations: 11501)
Completed 200 OK in 222ms (Views: 74.1ms | ActiveRecord: 138.7ms | Allocations: 12994)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:33 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (46.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 22.2ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 24.4ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1056)
  [1m[36mUser Load (51.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 109.5ms | Allocations: 4578)
  Rendered layout layouts/application.html.erb (Duration: 143.2ms | Allocations: 11503)
Completed 200 OK in 208ms (Views: 48.9ms | ActiveRecord: 142.1ms | Allocations: 13007)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:33 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (47.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 14.8ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 15.8ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 2.7ms | Allocations: 1056)
  [1m[36mUser Load (43.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 108.7ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 134.8ms | Allocations: 11500)
Completed 200 OK in 195ms (Views: 50.3ms | ActiveRecord: 135.2ms | Allocations: 12991)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:37 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.0ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.2ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 3.7ms | Allocations: 1068)
  [1m[36mUser Load (44.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 137.6ms | Allocations: 4612)
  Rendered layout layouts/application.html.erb (Duration: 166.6ms | Allocations: 11571)
Completed 200 OK in 219ms (Views: 76.0ms | ActiveRecord: 135.7ms | Allocations: 13093)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:38 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (56.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.9ms | Allocations: 2098)
  Rendered dishes/new.html.erb within layouts/application (Duration: 5.3ms | Allocations: 2169)
  Rendered layouts/_header.html.erb (Duration: 2.4ms | Allocations: 1068)
  [1m[36mUser Load (43.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (53.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 133.8ms | Allocations: 4611)
  Rendered layout layouts/application.html.erb (Duration: 159.6ms | Allocations: 11598)
Completed 200 OK in 229ms (Views: 64.7ms | ActiveRecord: 153.8ms | Allocations: 13096)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:38 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (48.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.6ms | Allocations: 2095)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.0ms | Allocations: 2166)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1056)
  [1m[36mUser Load (46.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (49.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 138.4ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 158.1ms | Allocations: 11523)
Completed 200 OK in 217ms (Views: 62.5ms | ActiveRecord: 145.0ms | Allocations: 13029)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:39 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 7.0ms | Allocations: 2089)
  Rendered dishes/new.html.erb within layouts/application (Duration: 7.9ms | Allocations: 2160)
  Rendered layouts/_header.html.erb (Duration: 3.1ms | Allocations: 1056)
  [1m[36mUser Load (46.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 126.0ms | Allocations: 4578)
  Rendered layout layouts/application.html.erb (Duration: 159.0ms | Allocations: 11504)
Completed 200 OK in 221ms (Views: 70.8ms | ActiveRecord: 135.7ms | Allocations: 13026)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:39 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (127.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.1ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.4ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 4.7ms | Allocations: 1056)
  [1m[36mUser Load (138.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (88.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 256.5ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 272.7ms | Allocations: 11500)
Completed 200 OK in 407ms (Views: 47.6ms | ActiveRecord: 353.5ms | Allocations: 12986)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:40 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (179.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 22.2ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 24.4ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 3.1ms | Allocations: 1056)
  [1m[36mUser Load (125.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (66.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 226.5ms | Allocations: 4576)
  Rendered layout layouts/application.html.erb (Duration: 286.7ms | Allocations: 11501)
Completed 200 OK in 483ms (Views: 95.3ms | ActiveRecord: 372.2ms | Allocations: 12981)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:43 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (240.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 19.4ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 20.1ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 6.1ms | Allocations: 1069)
  [1m[36mUser Load (68.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (74.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 193.6ms | Allocations: 4613)
  Rendered layout layouts/application.html.erb (Duration: 250.2ms | Allocations: 11563)
Completed 200 OK in 501ms (Views: 109.1ms | ActiveRecord: 382.8ms | Allocations: 13058)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:45 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (47.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.7ms | Allocations: 2094)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.0ms | Allocations: 2165)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1068)
  [1m[36mUser Load (44.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (48.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 115.3ms | Allocations: 4611)
  Rendered layout layouts/application.html.erb (Duration: 128.3ms | Allocations: 11604)
Completed 200 OK in 185ms (Views: 39.7ms | ActiveRecord: 140.7ms | Allocations: 13108)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:47 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (46.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 7.8ms | Allocations: 2099)
  Rendered dishes/new.html.erb within layouts/application (Duration: 8.8ms | Allocations: 2170)
  Rendered layouts/_header.html.erb (Duration: 15.8ms | Allocations: 1056)
  [1m[36mUser Load (49.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (47.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 151.5ms | Allocations: 4576)
  Rendered layout layouts/application.html.erb (Duration: 198.4ms | Allocations: 11515)
Completed 200 OK in 253ms (Views: 102.8ms | ActiveRecord: 143.7ms | Allocations: 13022)


Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:12:22 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.8ms | Allocations: 1484)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.8ms | Allocations: 1786)
  Rendered layout layouts/application.html.erb (Duration: 5.7ms | Allocations: 1879)
Completed 500 Internal Server Error in 420ms (ActiveRecord: 303.0ms | Allocations: 15199)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `post' for #<ActionView::Base:0x0000000008a9d0>):
    1: <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
    2: <%= form_with model: [@restaurant, @dish], method:post, html: {multipart:true, remote: true} do |form| %>
    3:   <div class="categories_new_form_container">
    4:       <div class="categories_new_name_container">
    5:                 <div>
  
app/views/dishes/_form.html.erb:2
app/views/dishes/new.html.erb:6
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:12:40 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 1.4ms | Allocations: 1483)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.5ms | Allocations: 1783)
  Rendered layout layouts/application.html.erb (Duration: 4.8ms | Allocations: 1876)
Completed 500 Internal Server Error in 400ms (ActiveRecord: 283.4ms | Allocations: 15256)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `post' for #<ActionView::Base:0x000000000917a8>):
    1: <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
    2: <%= form_with model: [@restaurant, @dish], method: post, html: {multipart:true, remote: true} do |form| %>
    3:   <div class="categories_new_form_container">
    4:       <div class="categories_new_name_container">
    5:                 <div>
  
app/views/dishes/_form.html.erb:2
app/views/dishes/new.html.erb:6
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:12:59 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.4ms | Allocations: 1519)
  Rendered dishes/new.html.erb within layouts/application (Duration: 5.0ms | Allocations: 1833)
  Rendered layout layouts/application.html.erb (Duration: 5.3ms | Allocations: 1934)
Completed 500 Internal Server Error in 383ms (ActiveRecord: 276.6ms | Allocations: 15306)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
<%= form_with (model: [@restaurant, @dish], method: post, html: {multipart:true, remote: true}) do |form| %>
  <div class="categories_new_form_container">
      <div class="categories_new_name_container">
                <div>
          <label class="my_account_form_label">Nombre del plato</label><br>
          <%= form.text_field :nombre, class: "my_account_form_text_field", placeholder: "Mi plato" %>
        </div>

        <div>
          <label class="my_account_form_label">DescripciÃ³n</label><br>
          <%= form.text_field :descripcion, class: "my_account_form_text_field", placeholder: "El mejor plato que vas a probar" %>
        </div>

        <div>
          <label class="my_account_form_label">Precio</label><br>
          <!-- El precio tiene que poder ser un numero decimal por lo que se usa el tipo number_field y para que pueda introducir un numero decimal se usa el atributo step -->
          <%= form.number_field :precio, class: "my_account_form_text_field", placeholder: "9.99", step: "0.01" %>
        </div>
      </div>

      <div class="my_account_profile_img_container">
        <div class="my_account_profile_img_title">AÃ±ade una imagen del plato</div>
        <% if @dish.ruta_img_plato.present? %>
          <%= image_tag @dish.ruta_img_plato, class: "categories_new_img", id: "restaurant_image" %>
        <% else %>
          <%= image_tag "Default-dish-img", class: "categories_new_img", id: "restaurant_image" %>
        <% end %>
        <label class="new_post_image_upload_button">
          <%= form.file_field :ruta_img_plato, id: "upload_image_input", style: "display:none;" %>
          <%= image_tag "image-icon", class: "new_post_image_upload_icon", onclick: "$('#upload_image_input').click();" %>
          <div class="new_post_image_upload_text">Modificar</div>
        </label>
      </div>

      <div class="categories_new_button_container">
        <%= form.button type: :submit, class: "new_post_submit" do %>
          <%= image_tag "send", class: "new_post_submit_icon" %>
          <div class="new_post_submit_text">Publicar</div>
        <% end %>
      </div>
  </div>
<% end %>



<script>
  document.getElementById('upload_image_input').addEventListener('change', function(event) {
    var reader = new FileReader();
    reader.onload = function(e) {
      document.getElementById('restaurant_image').src = e.target.result;
    };
    reader.readAsDataURL(event.target.files[0]);
  });
</script>

):
1:    <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
2:    <%= form_with (model: [@restaurant, @dish], method: post, html: {multipart:true, remote: true}) do |form| %>
3:      <div class="categories_new_form_container">
4:          <div class="categories_new_name_container">
5:                    <div>
6:              <label class="my_account_form_label">Nombre del plato</label><br>
7:              <%= form.text_field :nombre, class: "my_account_form_text_field", placeholder: "Mi plato" %>
8:            </div>
9:    
10:            <div>
11:              <label class="my_account_form_label">DescripciÃ³n</label><br>
12:              <%= form.text_field :descripcion, class: "my_account_form_text_field", placeholder: "El mejor plato que vas a probar" %>
13:            </div>
14:    
15:            <div>
16:              <label class="my_account_form_label">Precio</label><br>
17:              <!-- El precio tiene que poder ser un numero decimal por lo que se usa el tipo number_field y para que pueda introducir un numero decimal se usa el atributo step -->
18:              <%= form.number_field :precio, class: "my_account_form_text_field", placeholder: "9.99", step: "0.01" %>
19:            </div>
20:          </div>
21:    
22:          <div class="my_account_profile_img_container">
23:            <div class="my_account_profile_img_title">AÃ±ade una imagen del plato</div>
24:            <% if @dish.ruta_img_plato.present? %>
25:              <%= image_tag @dish.ruta_img_plato, class: "categories_new_img", id: "restaurant_image" %>
26:            <% else %>
27:              <%= image_tag "Default-dish-img", class: "categories_new_img", id: "restaurant_image" %>
28:            <% end %>
29:            <label class="new_post_image_upload_button">
30:              <%= form.file_field :ruta_img_plato, id: "upload_image_input", style: "display:none;" %>
31:              <%= image_tag "image-icon", class: "new_post_image_upload_icon", onclick: "$('#upload_image_input').click();" %>
32:              <div class="new_post_image_upload_text">Modificar</div>
33:            </label>
34:          </div>
35:    
36:          <div class="categories_new_button_container">
37:            <%= form.button type: :submit, class: "new_post_submit" do %>
38:              <%= image_tag "send", class: "new_post_submit_icon" %>
39:              <div class="new_post_submit_text">Publicar</div>
40:            <% end %>
41:          </div>
42:      </div>
43:    <% end %>
44:    
45:    
46:    
47:    <script>
48:      document.getElementById('upload_image_input').addEventListener('change', function(event) {
49:        var reader = new FileReader();
50:        reader.onload = function(e) {
51:          document.getElementById('restaurant_image').src = e.target.result;
52:        };
53:        reader.readAsDataURL(event.target.files[0]);
54:      });
55:    </script>
  
app/views/dishes/_form.html.erb:2: syntax error, unexpected label
app/views/dishes/new.html.erb:6
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/show_exceptions.rb:36)
Processing by ErrorsController#internal_server_error as HTML
  Parameters: {"restaurant_id"=>"7"}
  Rendering layout layouts/application.html.erb
  Rendering errors/internal_server_error.html.erb within layouts/application
  Rendered errors/internal_server_error.html.erb within layouts/application (Duration: 2.0ms | Allocations: 91)
  Rendered layouts/_header.html.erb (Duration: 10.8ms | Allocations: 1392)
  [1m[36mUser Load (44.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (47.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 294.6ms | Allocations: 13297)
  Rendered layout layouts/application.html.erb (Duration: 358.6ms | Allocations: 33872)
Completed 500 Internal Server Error in 367ms (Views: 178.3ms | ActiveRecord: 187.8ms | Allocations: 34335)


Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:14:02 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (52.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 18.2ms | Allocations: 1569)
  Rendered dishes/new.html.erb within layouts/application (Duration: 21.3ms | Allocations: 1662)
  Rendered layout layouts/application.html.erb (Duration: 27.3ms | Allocations: 1762)
Completed 500 Internal Server Error in 106ms (ActiveRecord: 52.8ms | Allocations: 2665)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
<%= form_with (model: [@restaurant, @dish], method: post, html: {multipart:true, remote: true}) do |form| %>
  <div class="categories_new_form_container">
      <div class="categories_new_name_container">
                <div>
          <label class="my_account_form_label">Nombre del plato</label><br>
          <%= form.text_field :nombre, class: "my_account_form_text_field", placeholder: "Mi plato" %>
        </div>

        <div>
          <label class="my_account_form_label">DescripciÃ³n</label><br>
          <%= form.text_field :descripcion, class: "my_account_form_text_field", placeholder: "El mejor plato que vas a probar" %>
        </div>

        <div>
          <label class="my_account_form_label">Precio</label><br>
          <!-- El precio tiene que poder ser un numero decimal por lo que se usa el tipo number_field y para que pueda introducir un numero decimal se usa el atributo step -->
          <%= form.number_field :precio, class: "my_account_form_text_field", placeholder: "9.99", step: "0.01" %>
        </div>
      </div>

      <div class="my_account_profile_img_container">
        <div class="my_account_profile_img_title">AÃ±ade una imagen del plato</div>
        <% if @dish.ruta_img_plato.present? %>
          <%= image_tag @dish.ruta_img_plato, class: "categories_new_img", id: "restaurant_image" %>
        <% else %>
          <%= image_tag "Default-dish-img", class: "categories_new_img", id: "restaurant_image" %>
        <% end %>
        <label class="new_post_image_upload_button">
          <%= form.file_field :ruta_img_plato, id: "upload_image_input", style: "display:none;" %>
          <%= image_tag "image-icon", class: "new_post_image_upload_icon", onclick: "$('#upload_image_input').click();" %>
          <div class="new_post_image_upload_text">Modificar</div>
        </label>
      </div>

      <div class="categories_new_button_container">
        <%= form.button type: :submit, class: "new_post_submit" do %>
          <%= image_tag "send", class: "new_post_submit_icon" %>
          <div class="new_post_submit_text">Publicar</div>
        <% end %>
      </div>
  </div>
<% end %>



<script>
  document.getElementById('upload_image_input').addEventListener('change', function(event) {
    var reader = new FileReader();
    reader.onload = function(e) {
      document.getElementById('restaurant_image').src = e.target.result;
    };
    reader.readAsDataURL(event.target.files[0]);
  });
</script>

):
1:    <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
2:    <%= form_with (model: [@restaurant, @dish], method: post, html: {multipart:true, remote: true}) do |form| %>
3:      <div class="categories_new_form_container">
4:          <div class="categories_new_name_container">
5:                    <div>
6:              <label class="my_account_form_label">Nombre del plato</label><br>
7:              <%= form.text_field :nombre, class: "my_account_form_text_field", placeholder: "Mi plato" %>
8:            </div>
9:    
10:            <div>
11:              <label class="my_account_form_label">DescripciÃ³n</label><br>
12:              <%= form.text_field :descripcion, class: "my_account_form_text_field", placeholder: "El mejor plato que vas a probar" %>
13:            </div>
14:    
15:            <div>
16:              <label class="my_account_form_label">Precio</label><br>
17:              <!-- El precio tiene que poder ser un numero decimal por lo que se usa el tipo number_field y para que pueda introducir un numero decimal se usa el atributo step -->
18:              <%= form.number_field :precio, class: "my_account_form_text_field", placeholder: "9.99", step: "0.01" %>
19:            </div>
20:          </div>
21:    
22:          <div class="my_account_profile_img_container">
23:            <div class="my_account_profile_img_title">AÃ±ade una imagen del plato</div>
24:            <% if @dish.ruta_img_plato.present? %>
25:              <%= image_tag @dish.ruta_img_plato, class: "categories_new_img", id: "restaurant_image" %>
26:            <% else %>
27:              <%= image_tag "Default-dish-img", class: "categories_new_img", id: "restaurant_image" %>
28:            <% end %>
29:            <label class="new_post_image_upload_button">
30:              <%= form.file_field :ruta_img_plato, id: "upload_image_input", style: "display:none;" %>
31:              <%= image_tag "image-icon", class: "new_post_image_upload_icon", onclick: "$('#upload_image_input').click();" %>
32:              <div class="new_post_image_upload_text">Modificar</div>
33:            </label>
34:          </div>
35:    
36:          <div class="categories_new_button_container">
37:            <%= form.button type: :submit, class: "new_post_submit" do %>
38:              <%= image_tag "send", class: "new_post_submit_icon" %>
39:              <div class="new_post_submit_text">Publicar</div>
40:            <% end %>
41:          </div>
42:      </div>
43:    <% end %>
44:    
45:    
46:    
47:    <script>
48:      document.getElementById('upload_image_input').addEventListener('change', function(event) {
49:        var reader = new FileReader();
50:        reader.onload = function(e) {
51:          document.getElementById('restaurant_image').src = e.target.result;
52:        };
53:        reader.readAsDataURL(event.target.files[0]);
54:      });
55:    </script>
  
app/views/dishes/_form.html.erb:2: syntax error, unexpected label
app/views/dishes/new.html.erb:6
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/show_exceptions.rb:36)
Processing by ErrorsController#internal_server_error as HTML
  Parameters: {"restaurant_id"=>"7"}
  Rendering layout layouts/application.html.erb
  Rendering errors/internal_server_error.html.erb within layouts/application
  Rendered errors/internal_server_error.html.erb within layouts/application (Duration: 0.1ms | Allocations: 6)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1107)
  [1m[36mUser Load (45.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 127.9ms | Allocations: 4612)
  Rendered layout layouts/application.html.erb (Duration: 135.0ms | Allocations: 9670)
Completed 500 Internal Server Error in 136ms (Views: 45.5ms | ActiveRecord: 90.1ms | Allocations: 9907)


Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:15:46 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (46.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 1.6ms | Allocations: 1568)
  Rendered dishes/new.html.erb within layouts/application (Duration: 2.1ms | Allocations: 1661)
  Rendered layout layouts/application.html.erb (Duration: 2.6ms | Allocations: 1761)
Completed 500 Internal Server Error in 54ms (ActiveRecord: 46.3ms | Allocations: 2663)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
<%= form_with (model: [@restaurant, @dish], method: post, html: {multipart:true, remote: true}) do |form| %>
  <div class="categories_new_form_container">
      <div class="categories_new_name_container">
                <div>
          <label class="my_account_form_label">Nombre del plato</label><br>
          <%= form.text_field :nombre, class: "my_account_form_text_field", placeholder: "Mi plato" %>
        </div>

        <div>
          <label class="my_account_form_label">DescripciÃ³n</label><br>
          <%= form.text_field :descripcion, class: "my_account_form_text_field", placeholder: "El mejor plato que vas a probar" %>
        </div>

        <div>
          <label class="my_account_form_label">Precio</label><br>
          <!-- El precio tiene que poder ser un numero decimal por lo que se usa el tipo number_field y para que pueda introducir un numero decimal se usa el atributo step -->
          <%= form.number_field :precio, class: "my_account_form_text_field", placeholder: "9.99", step: "0.01" %>
        </div>
      </div>

      <div class="my_account_profile_img_container">
        <div class="my_account_profile_img_title">AÃ±ade una imagen del plato</div>
        <% if @dish.ruta_img_plato.present? %>
          <%= image_tag @dish.ruta_img_plato, class: "categories_new_img", id: "restaurant_image" %>
        <% else %>
          <%= image_tag "Default-dish-img", class: "categories_new_img", id: "restaurant_image" %>
        <% end %>
        <label class="new_post_image_upload_button">
          <%= form.file_field :ruta_img_plato, id: "upload_image_input", style: "display:none;" %>
          <%= image_tag "image-icon", class: "new_post_image_upload_icon", onclick: "$('#upload_image_input').click();" %>
          <div class="new_post_image_upload_text">Modificar</div>
        </label>
      </div>

      <div class="categories_new_button_container">
        <%= form.button type: :submit, class: "new_post_submit" do %>
          <%= image_tag "send", class: "new_post_submit_icon" %>
          <div class="new_post_submit_text">Publicar</div>
        <% end %>
      </div>
  </div>
<% end %>



<script>
  document.getElementById('upload_image_input').addEventListener('change', function(event) {
    var reader = new FileReader();
    reader.onload = function(e) {
      document.getElementById('restaurant_image').src = e.target.result;
    };
    reader.readAsDataURL(event.target.files[0]);
  });
</script>

):
1:    <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
2:    <%= form_with (model: [@restaurant, @dish], method: post, html: {multipart:true, remote: true}) do |form| %>
3:      <div class="categories_new_form_container">
4:          <div class="categories_new_name_container">
5:                    <div>
6:              <label class="my_account_form_label">Nombre del plato</label><br>
7:              <%= form.text_field :nombre, class: "my_account_form_text_field", placeholder: "Mi plato" %>
8:            </div>
9:    
10:            <div>
11:              <label class="my_account_form_label">DescripciÃ³n</label><br>
12:              <%= form.text_field :descripcion, class: "my_account_form_text_field", placeholder: "El mejor plato que vas a probar" %>
13:            </div>
14:    
15:            <div>
16:              <label class="my_account_form_label">Precio</label><br>
17:              <!-- El precio tiene que poder ser un numero decimal por lo que se usa el tipo number_field y para que pueda introducir un numero decimal se usa el atributo step -->
18:              <%= form.number_field :precio, class: "my_account_form_text_field", placeholder: "9.99", step: "0.01" %>
19:            </div>
20:          </div>
21:    
22:          <div class="my_account_profile_img_container">
23:            <div class="my_account_profile_img_title">AÃ±ade una imagen del plato</div>
24:            <% if @dish.ruta_img_plato.present? %>
25:              <%= image_tag @dish.ruta_img_plato, class: "categories_new_img", id: "restaurant_image" %>
26:            <% else %>
27:              <%= image_tag "Default-dish-img", class: "categories_new_img", id: "restaurant_image" %>
28:            <% end %>
29:            <label class="new_post_image_upload_button">
30:              <%= form.file_field :ruta_img_plato, id: "upload_image_input", style: "display:none;" %>
31:              <%= image_tag "image-icon", class: "new_post_image_upload_icon", onclick: "$('#upload_image_input').click();" %>
32:              <div class="new_post_image_upload_text">Modificar</div>
33:            </label>
34:          </div>
35:    
36:          <div class="categories_new_button_container">
37:            <%= form.button type: :submit, class: "new_post_submit" do %>
38:              <%= image_tag "send", class: "new_post_submit_icon" %>
39:              <div class="new_post_submit_text">Publicar</div>
40:            <% end %>
41:          </div>
42:      </div>
43:    <% end %>
44:    
45:    
46:    
47:    <script>
48:      document.getElementById('upload_image_input').addEventListener('change', function(event) {
49:        var reader = new FileReader();
50:        reader.onload = function(e) {
51:          document.getElementById('restaurant_image').src = e.target.result;
52:        };
53:        reader.readAsDataURL(event.target.files[0]);
54:      });
55:    </script>
  
app/views/dishes/_form.html.erb:2: syntax error, unexpected label
app/views/dishes/new.html.erb:6
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/show_exceptions.rb:36)
Processing by ErrorsController#internal_server_error as HTML
  Parameters: {"restaurant_id"=>"7"}
  Rendering layout layouts/application.html.erb
  Rendering errors/internal_server_error.html.erb within layouts/application
  Rendered errors/internal_server_error.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layouts/_header.html.erb (Duration: 2.9ms | Allocations: 1107)
  [1m[36mUser Load (44.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 102.4ms | Allocations: 4611)
  Rendered layout layouts/application.html.erb (Duration: 114.2ms | Allocations: 9669)
Completed 500 Internal Server Error in 115ms (Views: 24.6ms | ActiveRecord: 90.2ms | Allocations: 9906)


Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:16:03 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 1.0ms | Allocations: 1494)
  Rendered dishes/new.html.erb within layouts/application (Duration: 1.9ms | Allocations: 1810)
  Rendered layout layouts/application.html.erb (Duration: 2.3ms | Allocations: 1911)
Completed 500 Internal Server Error in 363ms (ActiveRecord: 277.9ms | Allocations: 15259)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
<%= form_with (model: [@restaurant, @dish], html: {multipart:true, remote: true}) do |form| %>
  <div class="categories_new_form_container">
      <div class="categories_new_name_container">
                <div>
          <label class="my_account_form_label">Nombre del plato</label><br>
          <%= form.text_field :nombre, class: "my_account_form_text_field", placeholder: "Mi plato" %>
        </div>

        <div>
          <label class="my_account_form_label">DescripciÃ³n</label><br>
          <%= form.text_field :descripcion, class: "my_account_form_text_field", placeholder: "El mejor plato que vas a probar" %>
        </div>

        <div>
          <label class="my_account_form_label">Precio</label><br>
          <!-- El precio tiene que poder ser un numero decimal por lo que se usa el tipo number_field y para que pueda introducir un numero decimal se usa el atributo step -->
          <%= form.number_field :precio, class: "my_account_form_text_field", placeholder: "9.99", step: "0.01" %>
        </div>
      </div>

      <div class="my_account_profile_img_container">
        <div class="my_account_profile_img_title">AÃ±ade una imagen del plato</div>
        <% if @dish.ruta_img_plato.present? %>
          <%= image_tag @dish.ruta_img_plato, class: "categories_new_img", id: "restaurant_image" %>
        <% else %>
          <%= image_tag "Default-dish-img", class: "categories_new_img", id: "restaurant_image" %>
        <% end %>
        <label class="new_post_image_upload_button">
          <%= form.file_field :ruta_img_plato, id: "upload_image_input", style: "display:none;" %>
          <%= image_tag "image-icon", class: "new_post_image_upload_icon", onclick: "$('#upload_image_input').click();" %>
          <div class="new_post_image_upload_text">Modificar</div>
        </label>
      </div>

      <div class="categories_new_button_container">
        <%= form.button type: :submit, class: "new_post_submit" do %>
          <%= image_tag "send", class: "new_post_submit_icon" %>
          <div class="new_post_submit_text">Publicar</div>
        <% end %>
      </div>
  </div>
<% end %>



<script>
  document.getElementById('upload_image_input').addEventListener('change', function(event) {
    var reader = new FileReader();
    reader.onload = function(e) {
      document.getElementById('restaurant_image').src = e.target.result;
    };
    reader.readAsDataURL(event.target.files[0]);
  });
</script>

):
1:    <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
2:    <%= form_with (model: [@restaurant, @dish], html: {multipart:true, remote: true}) do |form| %>
3:      <div class="categories_new_form_container">
4:          <div class="categories_new_name_container">
5:                    <div>
6:              <label class="my_account_form_label">Nombre del plato</label><br>
7:              <%= form.text_field :nombre, class: "my_account_form_text_field", placeholder: "Mi plato" %>
8:            </div>
9:    
10:            <div>
11:              <label class="my_account_form_label">DescripciÃ³n</label><br>
12:              <%= form.text_field :descripcion, class: "my_account_form_text_field", placeholder: "El mejor plato que vas a probar" %>
13:            </div>
14:    
15:            <div>
16:              <label class="my_account_form_label">Precio</label><br>
17:              <!-- El precio tiene que poder ser un numero decimal por lo que se usa el tipo number_field y para que pueda introducir un numero decimal se usa el atributo step -->
18:              <%= form.number_field :precio, class: "my_account_form_text_field", placeholder: "9.99", step: "0.01" %>
19:            </div>
20:          </div>
21:    
22:          <div class="my_account_profile_img_container">
23:            <div class="my_account_profile_img_title">AÃ±ade una imagen del plato</div>
24:            <% if @dish.ruta_img_plato.present? %>
25:              <%= image_tag @dish.ruta_img_plato, class: "categories_new_img", id: "restaurant_image" %>
26:            <% else %>
27:              <%= image_tag "Default-dish-img", class: "categories_new_img", id: "restaurant_image" %>
28:            <% end %>
29:            <label class="new_post_image_upload_button">
30:              <%= form.file_field :ruta_img_plato, id: "upload_image_input", style: "display:none;" %>
31:              <%= image_tag "image-icon", class: "new_post_image_upload_icon", onclick: "$('#upload_image_input').click();" %>
32:              <div class="new_post_image_upload_text">Modificar</div>
33:            </label>
34:          </div>
35:    
36:          <div class="categories_new_button_container">
37:            <%= form.button type: :submit, class: "new_post_submit" do %>
38:              <%= image_tag "send", class: "new_post_submit_icon" %>
39:              <div class="new_post_submit_text">Publicar</div>
40:            <% end %>
41:          </div>
42:      </div>
43:    <% end %>
44:    
45:    
46:    
47:    <script>
48:      document.getElementById('upload_image_input').addEventListener('change', function(event) {
49:        var reader = new FileReader();
50:        reader.onload = function(e) {
51:          document.getElementById('restaurant_image').src = e.target.result;
52:        };
53:        reader.readAsDataURL(event.target.files[0]);
54:      });
55:    </script>
  
app/views/dishes/_form.html.erb:2: syntax error, unexpected label
app/views/dishes/new.html.erb:6
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/show_exceptions.rb:36)
Processing by ErrorsController#internal_server_error as HTML
  Parameters: {"restaurant_id"=>"7"}
  Rendering layout layouts/application.html.erb
  Rendering errors/internal_server_error.html.erb within layouts/application
  Rendered errors/internal_server_error.html.erb within layouts/application (Duration: 0.8ms | Allocations: 89)
  Rendered layouts/_header.html.erb (Duration: 3.6ms | Allocations: 1392)
  [1m[36mUser Load (43.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 215.2ms | Allocations: 13295)
  Rendered layout layouts/application.html.erb (Duration: 278.9ms | Allocations: 33866)
Completed 500 Internal Server Error in 286ms (Views: 105.9ms | ActiveRecord: 177.3ms | Allocations: 34325)


Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:16:18 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 20.3ms | Allocations: 2732)
  Rendered dishes/new.html.erb within layouts/application (Duration: 24.4ms | Allocations: 3030)
  Rendered layouts/_header.html.erb (Duration: 3.3ms | Allocations: 1328)
  [1m[36mUser Load (44.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 215.8ms | Allocations: 13390)
  Rendered layout layouts/application.html.erb (Duration: 282.8ms | Allocations: 36500)
Completed 200 OK in 653ms (Views: 105.7ms | ActiveRecord: 453.6ms | Allocations: 49795)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:41 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.3ms | Allocations: 2102)
  Rendered dishes/new.html.erb within layouts/application (Duration: 5.1ms | Allocations: 2216)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1056)
  [1m[36mUser Load (44.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 99.3ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 113.0ms | Allocations: 11575)
Completed 200 OK in 166ms (Views: 26.0ms | ActiveRecord: 134.8ms | Allocations: 13698)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:41 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.4ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.7ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1056)
  [1m[36mUser Load (43.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (47.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 99.2ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 113.1ms | Allocations: 11500)
Completed 200 OK in 160ms (Views: 23.3ms | ActiveRecord: 134.1ms | Allocations: 12985)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:42 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.6ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.3ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1056)
  [1m[36mUser Load (45.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 95.1ms | Allocations: 4576)
  Rendered layout layouts/application.html.erb (Duration: 104.3ms | Allocations: 11501)
Completed 200 OK in 152ms (Views: 16.7ms | ActiveRecord: 131.8ms | Allocations: 12996)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:42 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.7ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.0ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1056)
  [1m[36mUser Load (43.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 97.2ms | Allocations: 4583)
  Rendered layout layouts/application.html.erb (Duration: 108.6ms | Allocations: 11508)
Completed 200 OK in 156ms (Views: 22.9ms | ActiveRecord: 130.0ms | Allocations: 13010)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:42 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.3ms | Allocations: 2094)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.6ms | Allocations: 2165)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1060)
  [1m[36mUser Load (44.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 95.9ms | Allocations: 4590)
  Rendered layout layouts/application.html.erb (Duration: 105.4ms | Allocations: 11547)
Completed 200 OK in 157ms (Views: 18.3ms | ActiveRecord: 131.8ms | Allocations: 13048)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:43 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.8ms | Allocations: 2094)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.1ms | Allocations: 2165)
  Rendered layouts/_header.html.erb (Duration: 2.7ms | Allocations: 1056)
  [1m[36mUser Load (43.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 96.4ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 108.2ms | Allocations: 11506)
Completed 200 OK in 165ms (Views: 21.6ms | ActiveRecord: 131.6ms | Allocations: 13005)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:43 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.1ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.4ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1056)
  [1m[36mUser Load (43.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 94.3ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 103.6ms | Allocations: 11500)
Completed 200 OK in 155ms (Views: 17.2ms | ActiveRecord: 131.9ms | Allocations: 12992)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:44 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (56.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.8ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.1ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1056)
  [1m[36mUser Load (43.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 103.9ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 114.8ms | Allocations: 11500)
Completed 200 OK in 176ms (Views: 27.8ms | ActiveRecord: 144.9ms | Allocations: 13000)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:44 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.2ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.5ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1056)
  [1m[36mUser Load (46.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 103.3ms | Allocations: 4594)
  Rendered layout layouts/application.html.erb (Duration: 113.1ms | Allocations: 11519)
Completed 200 OK in 162ms (Views: 23.8ms | ActiveRecord: 134.4ms | Allocations: 13018)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:44 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 5.3ms | Allocations: 2095)
  Rendered dishes/new.html.erb within layouts/application (Duration: 5.7ms | Allocations: 2166)
  Rendered layouts/_header.html.erb (Duration: 2.6ms | Allocations: 1060)
  [1m[36mUser Load (45.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 95.7ms | Allocations: 4599)
  Rendered layout layouts/application.html.erb (Duration: 109.8ms | Allocations: 11556)
Completed 200 OK in 156ms (Views: 21.7ms | ActiveRecord: 132.0ms | Allocations: 13060)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:44 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.8ms | Allocations: 2094)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.0ms | Allocations: 2165)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1056)
  [1m[36mUser Load (43.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 95.8ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 104.3ms | Allocations: 11506)
Completed 200 OK in 155ms (Views: 16.5ms | ActiveRecord: 133.7ms | Allocations: 12993)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:45 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.6ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 5.0ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1056)
  [1m[36mUser Load (42.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 94.0ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 105.4ms | Allocations: 11500)
Completed 200 OK in 159ms (Views: 19.1ms | ActiveRecord: 131.1ms | Allocations: 13005)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:45 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.7ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 2.9ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1056)
  [1m[36mUser Load (43.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 97.8ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 107.2ms | Allocations: 11500)
Completed 200 OK in 155ms (Views: 20.6ms | ActiveRecord: 130.4ms | Allocations: 12998)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:45 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.5ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.8ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 3.7ms | Allocations: 1056)
  [1m[36mUser Load (43.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 97.0ms | Allocations: 4594)
  Rendered layout layouts/application.html.erb (Duration: 110.1ms | Allocations: 11519)
Completed 200 OK in 158ms (Views: 23.6ms | ActiveRecord: 131.3ms | Allocations: 13021)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:45 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.0ms | Allocations: 2095)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.2ms | Allocations: 2166)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1060)
  [1m[36mUser Load (45.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 127.4ms | Allocations: 4599)
  Rendered layout layouts/application.html.erb (Duration: 137.9ms | Allocations: 11556)
Completed 200 OK in 185ms (Views: 48.4ms | ActiveRecord: 133.5ms | Allocations: 13048)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:46 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.6ms | Allocations: 2094)
  Rendered dishes/new.html.erb within layouts/application (Duration: 5.3ms | Allocations: 2165)
  Rendered layouts/_header.html.erb (Duration: 2.8ms | Allocations: 1057)
  [1m[36mUser Load (44.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 99.0ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 115.5ms | Allocations: 11507)
Completed 200 OK in 162ms (Views: 28.8ms | ActiveRecord: 130.3ms | Allocations: 12999)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:46 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.7ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.2ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1056)
  [1m[36mUser Load (44.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 95.5ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 106.9ms | Allocations: 11500)
Completed 200 OK in 160ms (Views: 20.3ms | ActiveRecord: 132.5ms | Allocations: 13010)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:47 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.0ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.3ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 3.9ms | Allocations: 1056)
  [1m[36mUser Load (43.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 94.7ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 109.0ms | Allocations: 11500)
Completed 200 OK in 156ms (Views: 23.0ms | ActiveRecord: 130.2ms | Allocations: 12998)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:47 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.2ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.5ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1056)
  [1m[36mUser Load (49.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 100.9ms | Allocations: 4595)
  Rendered layout layouts/application.html.erb (Duration: 110.2ms | Allocations: 11520)
Completed 200 OK in 160ms (Views: 18.8ms | ActiveRecord: 136.7ms | Allocations: 13031)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:47 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 5.9ms | Allocations: 2095)
  Rendered dishes/new.html.erb within layouts/application (Duration: 7.2ms | Allocations: 2166)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1060)
  [1m[36mUser Load (43.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 94.9ms | Allocations: 4602)
  Rendered layout layouts/application.html.erb (Duration: 109.2ms | Allocations: 11559)
Completed 200 OK in 156ms (Views: 22.9ms | ActiveRecord: 130.4ms | Allocations: 13069)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:51 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.1ms | Allocations: 2094)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.4ms | Allocations: 2165)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1056)
  [1m[36mUser Load (43.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 101.8ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 114.0ms | Allocations: 11506)
Completed 200 OK in 163ms (Views: 25.1ms | ActiveRecord: 133.5ms | Allocations: 12986)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:52 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.6ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.1ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1056)
  [1m[36mUser Load (43.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 95.6ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 107.6ms | Allocations: 11500)
Completed 200 OK in 155ms (Views: 21.6ms | ActiveRecord: 129.9ms | Allocations: 12980)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:53 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.2ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.5ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1056)
  [1m[36mUser Load (44.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 99.5ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 108.3ms | Allocations: 11500)
Completed 200 OK in 161ms (Views: 19.5ms | ActiveRecord: 132.5ms | Allocations: 13012)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:53 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.5ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.8ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1056)
  [1m[36mUser Load (43.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 100.8ms | Allocations: 4594)
  Rendered layout layouts/application.html.erb (Duration: 110.2ms | Allocations: 11519)
Completed 200 OK in 163ms (Views: 22.8ms | ActiveRecord: 132.1ms | Allocations: 13006)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:54 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.8ms | Allocations: 2095)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.1ms | Allocations: 2166)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1060)
  [1m[36mUser Load (43.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (69.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 121.1ms | Allocations: 4599)
  Rendered layout layouts/application.html.erb (Duration: 130.2ms | Allocations: 11556)
Completed 200 OK in 184ms (Views: 18.6ms | ActiveRecord: 158.3ms | Allocations: 13054)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:54 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.1ms | Allocations: 2094)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.7ms | Allocations: 2165)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1056)
  [1m[36mUser Load (48.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 105.6ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 126.2ms | Allocations: 11506)
Completed 200 OK in 175ms (Views: 32.2ms | ActiveRecord: 139.4ms | Allocations: 13004)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:55 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.0ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.3ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1056)
  [1m[36mUser Load (43.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 96.9ms | Allocations: 4576)
  Rendered layout layouts/application.html.erb (Duration: 113.2ms | Allocations: 11501)
Completed 200 OK in 160ms (Views: 24.9ms | ActiveRecord: 132.4ms | Allocations: 13008)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:17:11 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 11.3ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 13.4ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1056)
  [1m[36mUser Load (44.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 100.8ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 124.7ms | Allocations: 11500)
Completed 200 OK in 179ms (Views: 39.2ms | ActiveRecord: 132.5ms | Allocations: 12994)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:17:11 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (49.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 8.6ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 9.2ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1056)
  [1m[36mUser Load (43.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 104.6ms | Allocations: 4598)
  Rendered layout layouts/application.html.erb (Duration: 122.6ms | Allocations: 11523)
Completed 200 OK in 180ms (Views: 34.9ms | ActiveRecord: 138.1ms | Allocations: 13021)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:17:12 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 20.6ms | Allocations: 2095)
  Rendered dishes/new.html.erb within layouts/application (Duration: 21.1ms | Allocations: 2166)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1060)
  [1m[36mUser Load (57.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 116.2ms | Allocations: 4597)
  Rendered layout layouts/application.html.erb (Duration: 147.9ms | Allocations: 11554)
Completed 200 OK in 206ms (Views: 45.7ms | ActiveRecord: 148.8ms | Allocations: 13048)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:17:12 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 17.5ms | Allocations: 2092)
  Rendered dishes/new.html.erb within layouts/application (Duration: 18.3ms | Allocations: 2163)
  Rendered layouts/_header.html.erb (Duration: 13.3ms | Allocations: 1056)
  [1m[36mUser Load (43.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (53.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 124.7ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 186.1ms | Allocations: 11507)
Completed 200 OK in 252ms (Views: 91.8ms | ActiveRecord: 141.9ms | Allocations: 12982)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:17:13 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (49.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 5.5ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 6.2ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 11.7ms | Allocations: 1056)
  [1m[36mUser Load (45.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 122.1ms | Allocations: 4578)
  Rendered layout layouts/application.html.erb (Duration: 168.4ms | Allocations: 11503)
Completed 200 OK in 236ms (Views: 82.1ms | ActiveRecord: 139.2ms | Allocations: 13001)


Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:20:45 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (64.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 35.9ms | Allocations: 2092)
  Rendered dishes/new.html.erb within layouts/application (Duration: 37.0ms | Allocations: 2171)
  Rendered layouts/_header.html.erb (Duration: 9.6ms | Allocations: 1056)
  [1m[36mUser Load (45.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 126.6ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 201.8ms | Allocations: 11512)
Completed 200 OK in 289ms (Views: 111.4ms | ActiveRecord: 156.4ms | Allocations: 12400)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:20:55 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"12"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (47.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 6.4ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 7.0ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 8.2ms | Allocations: 1059)
  [1m[36mUser Load (48.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (80.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 145.0ms | Allocations: 4599)
  Rendered layout layouts/application.html.erb (Duration: 169.0ms | Allocations: 11527)
Completed 200 OK in 228ms (Views: 40.5ms | ActiveRecord: 176.4ms | Allocations: 12991)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:20:57 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"12"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.3ms | Allocations: 2095)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.6ms | Allocations: 2166)
  Rendered layouts/_header.html.erb (Duration: 7.2ms | Allocations: 1058)
  [1m[36mUser Load (46.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 106.5ms | Allocations: 4599)
  Rendered layout layouts/application.html.erb (Duration: 124.0ms | Allocations: 11554)
Completed 200 OK in 173ms (Views: 32.4ms | ActiveRecord: 137.7ms | Allocations: 13054)


Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:26:13 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 47.7ms | Allocations: 2714)
  Rendered dishes/new.html.erb within layouts/application (Duration: 52.5ms | Allocations: 3016)
  Rendered layouts/_header.html.erb (Duration: 10.0ms | Allocations: 1318)
  [1m[36mUser Load (45.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 271.8ms | Allocations: 13408)
  Rendered layout layouts/application.html.erb (Duration: 558.9ms | Allocations: 36606)
Completed 200 OK in 1164ms (Views: 413.5ms | ActiveRecord: 480.7ms | Allocations: 49925)


Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:26:23 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (51.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 39.3ms | Allocations: 2099)
  Rendered dishes/new.html.erb within layouts/application (Duration: 40.7ms | Allocations: 2178)
  Rendered layouts/_header.html.erb (Duration: 11.8ms | Allocations: 1060)
  [1m[36mUser Load (43.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 155.5ms | Allocations: 4581)
  Rendered layout layouts/application.html.erb (Duration: 232.5ms | Allocations: 11550)
Completed 200 OK in 367ms (Views: 150.0ms | ActiveRecord: 138.9ms | Allocations: 12421)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:26:32 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"12"}, "button"=>"", "restaurant_id"=>"7"}
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 5.4ms | Allocations: 1060)
  Rendered dishes/new.html.erb within layouts/application (Duration: 9.2ms | Allocations: 1174)
  Rendered layout layouts/application.html.erb (Duration: 10.4ms | Allocations: 1266)
Completed 500 Internal Server Error in 46ms (ActiveRecord: 0.0ms | Allocations: 2998)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `dishes_path' for #<ActionView::Base:0x000000000ad9f8>):
    1: <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
    2: <%= form_with model: [@restaurant, @dish], html: {multipart:true, remote: true} do |form| %>
    3:   <div class="categories_new_form_container">
    4:       <div class="categories_new_name_container">
    5:                 <div>
  
app/views/dishes/_form.html.erb:2
app/views/dishes/new.html.erb:6
app/controllers/dishes_controller.rb:26:in `create'
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:27:26 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (56.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 36.6ms | Allocations: 2111)
  Rendered dishes/new.html.erb within layouts/application (Duration: 37.0ms | Allocations: 2186)
  Rendered layouts/_header.html.erb (Duration: 9.8ms | Allocations: 1068)
  [1m[36mUser Load (44.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (51.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 123.7ms | Allocations: 4612)
  Rendered layout layouts/application.html.erb (Duration: 205.1ms | Allocations: 11630)
Completed 200 OK in 271ms (Views: 110.2ms | ActiveRecord: 152.1ms | Allocations: 12509)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:27:35 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"12"}, "button"=>"", "restaurant_id"=>"7"}
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 0.5ms | Allocations: 1056)
  Rendered dishes/new.html.erb within layouts/application (Duration: 1.3ms | Allocations: 1127)
  Rendered layout layouts/application.html.erb (Duration: 1.5ms | Allocations: 1219)
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.0ms | Allocations: 2279)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `dishes_path' for #<ActionView::Base:0x000000000add68>):
    1: <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
    2: <%= form_with model: [@restaurant, @dish], html: {multipart:true, remote: true} do |form| %>
    3:   <div class="categories_new_form_container">
    4:       <div class="categories_new_name_container">
    5:                 <div>
  
app/views/dishes/_form.html.erb:2
app/views/dishes/new.html.erb:6
app/controllers/dishes_controller.rb:26:in `create'
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:28:08 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 16.2ms | Allocations: 2740)
  Rendered dishes/new.html.erb within layouts/application (Duration: 17.7ms | Allocations: 3038)
  Rendered layouts/_header.html.erb (Duration: 8.7ms | Allocations: 1324)
  [1m[36mUser Load (44.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 233.7ms | Allocations: 13378)
  Rendered layout layouts/application.html.erb (Duration: 312.4ms | Allocations: 36606)
Completed 200 OK in 685ms (Views: 132.7ms | ActiveRecord: 457.6ms | Allocations: 49921)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:28:39 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"100% real", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.0ms | Allocations: 1105)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.4ms | Allocations: 1219)
  Rendered layout layouts/application.html.erb (Duration: 3.6ms | Allocations: 1311)
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms | Allocations: 3066)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (No route matches {:action=>"create", :controller=>"dishes", :restaurant_id=>nil}, missing required keys: [:restaurant_id]):
    1: <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
    2: <%= form_for @dish, url: restaurant_dishes_path(@restaurant), html: { multipart: true } do |form| %>
    3:   <div class="categories_new_form_container">
    4:       <div class="categories_new_name_container">
    5:                 <div>
  
app/views/dishes/_form.html.erb:2
app/views/dishes/new.html.erb:6
app/controllers/dishes_controller.rb:26:in `create'
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:29:13 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 11.2ms | Allocations: 2728)
  Rendered dishes/new.html.erb within layouts/application (Duration: 12.6ms | Allocations: 3026)
  Rendered layouts/_header.html.erb (Duration: 7.9ms | Allocations: 1324)
  [1m[36mUser Load (43.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 230.2ms | Allocations: 13377)
  Rendered layout layouts/application.html.erb (Duration: 300.5ms | Allocations: 36594)
Completed 200 OK in 664ms (Views: 117.2ms | ActiveRecord: 458.2ms | Allocations: 49945)


Started POST "/restaurants/7" for ::1 at 2023-11-19 16:29:19 +0100
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionController::RoutingError (No route matches [POST] "/restaurants/7"):
  
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:29:19 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (85.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 18.0ms | Allocations: 2112)
  Rendered dishes/new.html.erb within layouts/application (Duration: 18.4ms | Allocations: 2187)
  Rendered layouts/_header.html.erb (Duration: 9.7ms | Allocations: 1068)
  [1m[36mUser Load (46.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 106.6ms | Allocations: 4611)
  Rendered layout layouts/application.html.erb (Duration: 148.3ms | Allocations: 11629)
Completed 200 OK in 254ms (Views: 59.3ms | ActiveRecord: 175.5ms | Allocations: 12504)


Started POST "/restaurants/7" for ::1 at 2023-11-19 16:30:24 +0100
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionController::RoutingError (No route matches [POST] "/restaurants/7"):
  
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:30:25 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (46.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 26.0ms | Allocations: 2728)
  Rendered dishes/new.html.erb within layouts/application (Duration: 29.9ms | Allocations: 3022)
  Rendered layouts/_header.html.erb (Duration: 3.3ms | Allocations: 1324)
  [1m[36mUser Load (45.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 254.3ms | Allocations: 13377)
  Rendered layout layouts/application.html.erb (Duration: 353.1ms | Allocations: 36592)
Completed 200 OK in 778ms (Views: 173.8ms | ActiveRecord: 482.5ms | Allocations: 49876)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:30:30 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"", "descripcion"=>"", "precio"=>"123"}, "button"=>"", "restaurant_id"=>"7"}
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 0.6ms | Allocations: 1093)
  Rendered dishes/new.html.erb within layouts/application (Duration: 1.3ms | Allocations: 1207)
  Rendered layout layouts/application.html.erb (Duration: 1.6ms | Allocations: 1299)
Completed 500 Internal Server Error in 18ms (ActiveRecord: 0.0ms | Allocations: 3049)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (No route matches {:action=>"create", :controller=>"dishes", :restaurant_id=>nil}, missing required keys: [:restaurant_id]):
    1: <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
    2: <%= form_for @dish, url: restaurant_dishes_path(@restaurant), html: { multipart: true } do |form| %>
    3:   <div class="categories_new_form_container">
    4:       <div class="categories_new_name_container">
    5:                 <div>
  
app/views/dishes/_form.html.erb:2
app/views/dishes/new.html.erb:6
app/controllers/dishes_controller.rb:26:in `create'
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:31:07 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 23.6ms | Allocations: 2728)
  Rendered dishes/new.html.erb within layouts/application (Duration: 26.7ms | Allocations: 3022)
  Rendered layouts/_header.html.erb (Duration: 2.9ms | Allocations: 1324)
  [1m[36mUser Load (44.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 225.6ms | Allocations: 13377)
  Rendered layout layouts/application.html.erb (Duration: 291.8ms | Allocations: 36592)
Completed 200 OK in 664ms (Views: 111.3ms | ActiveRecord: 461.3ms | Allocations: 49933)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:31:14 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"12"}, "button"=>"", "restaurant_id"=>"7"}
Completed 404 Not Found in 11ms (ActiveRecord: 0.0ms | Allocations: 889)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::RecordNotFound (Couldn't find Restaurant without an ID):
  
app/controllers/dishes_controller.rb:21:in `create'
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:31:15 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (62.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 32.1ms | Allocations: 2112)
  Rendered dishes/new.html.erb within layouts/application (Duration: 32.4ms | Allocations: 2187)
  Rendered layouts/_header.html.erb (Duration: 9.1ms | Allocations: 1068)
  [1m[36mUser Load (43.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 115.2ms | Allocations: 4611)
  Rendered layout layouts/application.html.erb (Duration: 175.6ms | Allocations: 11629)
Completed 200 OK in 275ms (Views: 89.4ms | ActiveRecord: 149.4ms | Allocations: 12501)


Started GET "/search?search=El+mejor" for ::1 at 2023-11-19 16:31:29 +0100
Processing by RestaurantsController#search as HTML
  Parameters: {"search"=>"El mejor"}
  [1m[36mRestaurant Load (52.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE (lower(nombre) LIKE '%el mejor%')[0m
  â†³ app/controllers/restaurants_controller.rb:82:in `search'
Redirected to http://localhost:3000/restaurants/7
Completed 302 Found in 57ms (ActiveRecord: 52.1ms | Allocations: 833)


Started GET "/restaurants/7" for ::1 at 2023-11-19 16:31:29 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (46.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (43.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (45.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (53.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (50.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (47.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (60.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (62.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (57.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (47.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (50.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 77.0ms | Allocations: 2093)
  [1m[36mDish Load (57.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (66.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (46.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 110.0ms | Allocations: 1709)
  Rendered layouts/_add_comment.html.erb (Duration: 6.9ms | Allocations: 664)
  [1m[35m (49.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 447.1ms | Allocations: 7986)
  Rendered layouts/_header.html.erb (Duration: 11.4ms | Allocations: 1068)
  [1m[36mUser Load (45.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (48.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 131.5ms | Allocations: 4613)
  Rendered layout layouts/application.html.erb (Duration: 646.4ms | Allocations: 17444)
Completed 200 OK in 1744ms (Views: 312.6ms | ActiveRecord: 1221.2ms | Allocations: 29952)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:32:29 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"12"}, "button"=>"", "restaurant_id"=>"7"}
Completed 404 Not Found in 8ms (ActiveRecord: 0.0ms | Allocations: 829)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::RecordNotFound (Couldn't find Restaurant without an ID):
  
app/controllers/dishes_controller.rb:21:in `create'
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:32:30 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (51.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 20.0ms | Allocations: 2112)
  Rendered dishes/new.html.erb within layouts/application (Duration: 20.6ms | Allocations: 2187)
  Rendered layouts/_header.html.erb (Duration: 8.3ms | Allocations: 1068)
  [1m[36mUser Load (45.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 135.3ms | Allocations: 4612)
  Rendered layout layouts/application.html.erb (Duration: 199.3ms | Allocations: 11630)
Completed 200 OK in 263ms (Views: 110.7ms | ActiveRecord: 142.4ms | Allocations: 12495)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:32:43 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"123"}, "button"=>"", "restaurant_id"=>"7"}
Completed 404 Not Found in 5ms (ActiveRecord: 0.0ms | Allocations: 843)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::RecordNotFound (Couldn't find Restaurant without an ID):
  
app/controllers/dishes_controller.rb:21:in `create'
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:32:44 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (47.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 19.1ms | Allocations: 2112)
  Rendered dishes/new.html.erb within layouts/application (Duration: 19.4ms | Allocations: 2187)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1068)
  [1m[36mUser Load (46.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 111.4ms | Allocations: 4611)
  Rendered layout layouts/application.html.erb (Duration: 146.7ms | Allocations: 11629)
Completed 200 OK in 216ms (Views: 54.3ms | ActiveRecord: 140.9ms | Allocations: 12509)


Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:34:33 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (50.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 20.2ms | Allocations: 2728)
  Rendered dishes/new.html.erb within layouts/application (Duration: 23.0ms | Allocations: 3024)
  Rendered layouts/_header.html.erb (Duration: 3.3ms | Allocations: 1324)
  [1m[36mUser Load (53.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 345.8ms | Allocations: 13379)
  Rendered layout layouts/application.html.erb (Duration: 407.4ms | Allocations: 36594)
Completed 200 OK in 822ms (Views: 214.3ms | ActiveRecord: 478.8ms | Allocations: 49912)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:34:39 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"32"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (47.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:21:in `create'
  [1m[36mTRANSACTION (44.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mRestaurant Load (48.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mDish Create (44.2ms)[0m  [1m[32mINSERT INTO "dishes" ("restaurant_id", "nombre", "ruta_img_plato", "descripcion", "precio") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["restaurant_id", 7], ["nombre", "a"], ["ruta_img_plato", nil], ["descripcion", "a"], ["precio", 32.0]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mTRANSACTION (44.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:22:in `create'
Redirected to http://localhost:3000/restaurants/7/edit
Completed 302 Found in 263ms (ActiveRecord: 231.2ms | Allocations: 4748)


Started GET "/restaurants/7/edit" for ::1 at 2023-11-19 16:34:39 +0100
Processing by RestaurantsController#edit as TURBO_STREAM
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (47.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:56:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  [1m[36mCategory Load (43.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 169.2ms | Allocations: 6266)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 171.0ms | Allocations: 6548)
  Rendered layouts/_header.html.erb (Duration: 10.1ms | Allocations: 1060)
  [1m[36mUser Load (47.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (48.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 133.6ms | Allocations: 4592)
  Rendered layout layouts/application.html.erb (Duration: 352.2ms | Allocations: 15927)
Completed 200 OK in 405ms (Views: 163.4ms | ActiveRecord: 237.0ms | Allocations: 16893)


Started GET "/search?search=mejor" for ::1 at 2023-11-19 16:34:50 +0100
Processing by RestaurantsController#search as HTML
  Parameters: {"search"=>"mejor"}
  [1m[36mRestaurant Load (49.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE (lower(nombre) LIKE '%mejor%')[0m
  â†³ app/controllers/restaurants_controller.rb:82:in `search'
Redirected to http://localhost:3000/restaurants/7
Completed 302 Found in 54ms (ActiveRecord: 49.9ms | Allocations: 695)


Started GET "/restaurants/7" for ::1 at 2023-11-19 16:34:50 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (44.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (43.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (45.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (48.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (46.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (59.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (50.1ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (44.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 68.0ms | Allocations: 2079)
  [1m[36mDish Load (49.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (44.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (49.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 56.0ms | Allocations: 1706)
  Rendered layouts/_add_comment.html.erb (Duration: 2.8ms | Allocations: 664)
  [1m[35m (51.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.6ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 302.5ms | Allocations: 8521)
  Rendered layouts/_header.html.erb (Duration: 7.5ms | Allocations: 1056)
  [1m[36mUser Load (46.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (55.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 146.4ms | Allocations: 4578)
  Rendered layout layouts/application.html.erb (Duration: 505.6ms | Allocations: 17866)
Completed 200 OK in 1415ms (Views: 170.5ms | ActiveRecord: 1160.5ms | Allocations: 30151)


Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:35:28 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (49.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 19.1ms | Allocations: 2712)
  Rendered dishes/new.html.erb within layouts/application (Duration: 21.9ms | Allocations: 3006)
  Rendered layouts/_header.html.erb (Duration: 15.6ms | Allocations: 1312)
  [1m[36mUser Load (47.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 262.8ms | Allocations: 13304)
  Rendered layout layouts/application.html.erb (Duration: 355.7ms | Allocations: 36315)
Completed 200 OK in 792ms (Views: 172.6ms | ActiveRecord: 491.4ms | Allocations: 49580)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:35:47 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"100% verÃ­dico", "precio"=>"9.97"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (46.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:21:in `create'
  [1m[36mTRANSACTION (43.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mRestaurant Load (43.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mDish Create (44.3ms)[0m  [1m[32mINSERT INTO "dishes" ("restaurant_id", "nombre", "ruta_img_plato", "descripcion", "precio") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["restaurant_id", 7], ["nombre", "El mejor plato del mundo"], ["ruta_img_plato", nil], ["descripcion", "100% verÃ­dico"], ["precio", 9.97]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mTRANSACTION (45.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:22:in `create'
Redirected to http://localhost:3000/restaurants/7
Completed 302 Found in 238ms (ActiveRecord: 222.8ms | Allocations: 4649)


Started GET "/restaurants/7" for ::1 at 2023-11-19 16:35:47 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (44.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (46.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (44.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (48.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (46.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (55.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (49.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (50.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (45.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (57.1ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (47.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 78.7ms | Allocations: 2084)
  [1m[36mDish Load (62.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (53.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (44.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 50.7ms | Allocations: 1706)
  Rendered layouts/_add_comment.html.erb (Duration: 2.5ms | Allocations: 658)
  [1m[35m (81.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.4ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 368.0ms | Allocations: 8952)
  Rendered layouts/_header.html.erb (Duration: 8.4ms | Allocations: 1056)
  [1m[36mUser Load (44.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 109.5ms | Allocations: 4578)
  Rendered layout layouts/application.html.erb (Duration: 520.0ms | Allocations: 18310)
Completed 200 OK in 1456ms (Views: 156.2ms | ActiveRecord: 1195.7ms | Allocations: 30787)


Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:36:08 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (54.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 17.4ms | Allocations: 2093)
  Rendered dishes/new.html.erb within layouts/application (Duration: 17.7ms | Allocations: 2168)
  Rendered layouts/_header.html.erb (Duration: 3.5ms | Allocations: 1056)
  [1m[36mUser Load (44.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 116.0ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 154.1ms | Allocations: 11509)
Completed 200 OK in 225ms (Views: 64.1ms | ActiveRecord: 145.4ms | Allocations: 12387)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:36:41 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El segundo mejor plato del mundo", "descripcion"=>"99% cierto", "precio"=>"9.98", "ruta_img_plato"=>#<ActionDispatch::Http::UploadedFile:0x00007fcceccac720 @tempfile=#<Tempfile:/tmp/RackMultipart20231119-13191-jfwi37.jpg>, @content_type="image/jpeg", @original_filename="Default-dish-img.jpg", @headers="Content-Disposition: form-data; name=\"dish[ruta_img_plato]\"; filename=\"Default-dish-img.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (46.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:21:in `create'
  [1m[36mTRANSACTION (43.9ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mRestaurant Load (48.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mDish Create (44.0ms)[0m  [1m[32mINSERT INTO "dishes" ("restaurant_id", "nombre", "ruta_img_plato", "descripcion", "precio") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["restaurant_id", 7], ["nombre", "El segundo mejor plato del mundo"], ["ruta_img_plato", "#<ActionDispatch::Http::UploadedFile:0x00007fcceccac720>"], ["descripcion", "99% cierto"], ["precio", 9.98]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mTRANSACTION (55.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:22:in `create'
Redirected to http://localhost:3000/restaurants/7
Completed 302 Found in 253ms (ActiveRecord: 238.2ms | Allocations: 3192)


Started GET "/restaurants/7" for ::1 at 2023-11-19 16:36:41 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (44.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (45.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (48.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (50.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (51.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (50.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (47.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (46.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (45.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 82.1ms | Allocations: 1503)
  [1m[36mDish Load (49.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  Rendered restaurants/show.html.erb within layouts/application (Duration: 174.3ms | Allocations: 5164)
  Rendered layout layouts/application.html.erb (Duration: 175.7ms | Allocations: 5256)
Completed 500 Internal Server Error in 835ms (ActiveRecord: 657.1ms | Allocations: 10236)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (The asset "ruta_img_plato" is not present in the asset pipeline.
):
    11:         <%= link_to get_dish_path(dish), style: "text-decoration: none !important" do %>
    12:           <div class="restaurant_dish_container">
    13:             <% if dish.ruta_img_plato.present? %>
    14:               <%= image_tag "ruta_img_plato", class: "restaurant_dish_img" %>
    15:             <% else %>
    16:               <%= image_tag "default-dish-img", class: "restaurant_dish_img" %>
    17:             <% end %>
  
app/views/restaurants/show.html.erb:14
app/views/restaurants/show.html.erb:11
app/views/restaurants/show.html.erb:10
Started GET "/restaurants/7" for ::1 at 2023-11-19 16:37:02 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (61.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (45.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (47.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (61.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (46.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (62.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (48.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (53.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (47.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 69.8ms | Allocations: 1503)
  [1m[36mDish Load (45.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  Rendered restaurants/show.html.erb within layouts/application (Duration: 141.3ms | Allocations: 5133)
  Rendered layout layouts/application.html.erb (Duration: 141.7ms | Allocations: 5225)
Completed 500 Internal Server Error in 820ms (ActiveRecord: 701.3ms | Allocations: 10184)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (The asset "ruta_img_plato" is not present in the asset pipeline.
):
    11:         <%= link_to get_dish_path(dish), style: "text-decoration: none !important" do %>
    12:           <div class="restaurant_dish_container">
    13:             <% if dish.ruta_img_plato.present? %>
    14:               <%= image_tag "ruta_img_plato", class: "restaurant_dish_img" %>
    15:             <% else %>
    16:               <%= image_tag "default-dish-img", class: "restaurant_dish_img" %>
    17:             <% end %>
  
app/views/restaurants/show.html.erb:14
app/views/restaurants/show.html.erb:11
app/views/restaurants/show.html.erb:10
Started GET "/restaurants/7" for ::1 at 2023-11-19 16:37:09 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (60.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (43.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (50.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (43.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (48.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (44.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (46.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (46.1ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (44.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 66.7ms | Allocations: 1495)
  [1m[36mDish Load (85.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  Rendered restaurants/show.html.erb within layouts/application (Duration: 207.3ms | Allocations: 5112)
  Rendered layout layouts/application.html.erb (Duration: 207.6ms | Allocations: 5204)
Completed 500 Internal Server Error in 815ms (ActiveRecord: 691.0ms | Allocations: 10156)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (The asset "ruta_img_plato" is not present in the asset pipeline.
):
    11:         <%= link_to get_dish_path(dish), style: "text-decoration: none !important" do %>
    12:           <div class="restaurant_dish_container">
    13:             <% if dish.ruta_img_plato.present? %>
    14:               <%= image_tag "ruta_img_plato", class: "restaurant_dish_img" %>
    15:             <% else %>
    16:               <%= image_tag "default-dish-img", class: "restaurant_dish_img" %>
    17:             <% end %>
  
app/views/restaurants/show.html.erb:14
app/views/restaurants/show.html.erb:11
app/views/restaurants/show.html.erb:10
Started GET "/restaurants/7" for ::1 at 2023-11-19 16:37:22 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (63.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (46.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (46.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (59.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (47.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (51.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (43.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (48.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (48.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (43.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 82.9ms | Allocations: 1498)
  [1m[36mDish Load (45.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  Rendered restaurants/show.html.erb within layouts/application (Duration: 160.6ms | Allocations: 5116)
  Rendered layout layouts/application.html.erb (Duration: 161.5ms | Allocations: 5208)
Completed 500 Internal Server Error in 802ms (ActiveRecord: 677.3ms | Allocations: 10159)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (The asset "ruta_img_plato" is not present in the asset pipeline.
):
    11:         <%= link_to get_dish_path(dish), style: "text-decoration: none !important" do %>
    12:           <div class="restaurant_dish_container">
    13:             <% if dish.ruta_img_plato.present? %>
    14:               <%= image_tag "ruta_img_plato", class: "restaurant_dish_img" %>
    15:             <% else %>
    16:               <%= image_tag "default-dish-img", class: "restaurant_dish_img" %>
    17:             <% end %>
  
app/views/restaurants/show.html.erb:14
app/views/restaurants/show.html.erb:11
app/views/restaurants/show.html.erb:10
Started GET "/restaurants/7" for ::1 at 2023-11-19 16:37:46 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (69.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (45.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (46.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (48.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (51.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (46.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (47.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (52.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (59.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (47.1ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (47.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 83.1ms | Allocations: 1495)
  [1m[36mDish Load (46.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  Rendered restaurants/show.html.erb within layouts/application (Duration: 190.4ms | Allocations: 5112)
  Rendered layout layouts/application.html.erb (Duration: 190.8ms | Allocations: 5204)
Completed 500 Internal Server Error in 903ms (ActiveRecord: 695.9ms | Allocations: 10156)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (The asset "ruta_img_plato" is not present in the asset pipeline.
):
    11:         <%= link_to get_dish_path(dish), style: "text-decoration: none !important" do %>
    12:           <div class="restaurant_dish_container">
    13:             <% if dish.ruta_img_plato.present? %>
    14:               <%= image_tag "ruta_img_plato", class: "restaurant_dish_img" %>
    15:             <% else %>
    16:               <%= image_tag "default-dish-img", class: "restaurant_dish_img" %>
    17:             <% end %>
  
app/views/restaurants/show.html.erb:14
app/views/restaurants/show.html.erb:11
app/views/restaurants/show.html.erb:10
Started GET "/" for ::1 at 2023-11-19 16:52:15 +0100
  [1m[36mActiveRecord::SchemaMigration Load (44.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (44.4ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (45.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (43.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (53.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (45.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (44.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (50.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (46.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (44.8ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 514.6ms | Allocations: 51183)
  Rendered layouts/_header.html.erb (Duration: 3.3ms | Allocations: 1400)
  Rendered layouts/_sidenav.html.erb (Duration: 8.5ms | Allocations: 3435)
  Rendered layout layouts/application.html.erb (Duration: 573.1ms | Allocations: 75444)
Completed 200 OK in 1435ms (Views: 395.4ms | ActiveRecord: 779.5ms | Allocations: 117768)


Started GET "/restaurants/7" for ::1 at 2023-11-19 16:52:21 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (45.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (46.5ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (46.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (58.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (51.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (43.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (45.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (45.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.1ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 6.2ms | Allocations: 1805)
  [1m[36mDish Load (43.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  Rendered restaurants/show.html.erb within layouts/application (Duration: 264.2ms | Allocations: 15987)
  Rendered layout layouts/application.html.erb (Duration: 264.6ms | Allocations: 16079)
Completed 500 Internal Server Error in 1213ms (ActiveRecord: 909.3ms | Allocations: 29527)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (The asset "ruta_img_plato" is not present in the asset pipeline.
):
    11:         <%= link_to get_dish_path(dish), style: "text-decoration: none !important" do %>
    12:           <div class="restaurant_dish_container">
    13:             <% if dish.ruta_img_plato.present? %>
    14:               <%= image_tag "ruta_img_plato", class: "restaurant_dish_img" %>
    15:             <% else %>
    16:               <%= image_tag "default-dish-img", class: "restaurant_dish_img" %>
    17:             <% end %>
  
app/views/restaurants/show.html.erb:14
app/views/restaurants/show.html.erb:11
app/views/restaurants/show.html.erb:10
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:53:18 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (47.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 25.7ms | Allocations: 3315)
  Rendered dishes/new.html.erb within layouts/application (Duration: 29.1ms | Allocations: 3606)
  Rendered layouts/_header.html.erb (Duration: 4.1ms | Allocations: 1070)
  Rendered layouts/_sidenav.html.erb (Duration: 5.8ms | Allocations: 2615)
  Rendered layout layouts/application.html.erb (Duration: 49.4ms | Allocations: 11062)
Completed 200 OK in 106ms (Views: 51.1ms | ActiveRecord: 47.3ms | Allocations: 12217)


Started GET "/login" for ::1 at 2023-11-19 16:53:49 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 8.7ms | Allocations: 2997)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1057)
  Rendered layouts/_sidenav.html.erb (Duration: 3.5ms | Allocations: 2580)
  Rendered layout layouts/application.html.erb (Duration: 21.9ms | Allocations: 10352)
Completed 200 OK in 102ms (Views: 22.9ms | ActiveRecord: 49.3ms | Allocations: 17916)


Started POST "/login" for ::1 at 2023-11-19 16:53:56 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"Mr.Dani", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (45.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 286ms (ActiveRecord: 45.8ms | Allocations: 1250)


Started GET "/" for ::1 at 2023-11-19 16:53:57 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (90.5ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (52.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (69.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (106.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (81.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (78.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (96.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (46.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (108.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 276.5ms | Allocations: 12158)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1057)
  [1m[36mUser Load (130.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (137.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 475.4ms | Allocations: 8513)
  Rendered layout layouts/application.html.erb (Duration: 757.9ms | Allocations: 25644)
Completed 200 OK in 1248ms (Views: 174.2ms | ActiveRecord: 1063.0ms | Allocations: 28604)


Started GET "/restaurants/7" for ::1 at 2023-11-19 16:54:00 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (48.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (64.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (68.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (127.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (44.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (120.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (49.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (66.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (83.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (73.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (123.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (54.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 60.6ms | Allocations: 1505)
  [1m[36mDish Load (71.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (146.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (69.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 116.5ms | Allocations: 1866)
  Rendered layouts/_add_comment.html.erb (Duration: 2.0ms | Allocations: 687)
  [1m[35m (50.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.3ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 464.4ms | Allocations: 6926)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1070)
  [1m[36mUser Load (65.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (73.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 148.5ms | Allocations: 4618)
  Rendered layout layouts/application.html.erb (Duration: 621.8ms | Allocations: 16383)
Completed 200 OK in 1566ms (Views: 92.1ms | ActiveRecord: 1445.5ms | Allocations: 21364)


Started GET "/restaurants/7" for ::1 at 2023-11-19 16:56:03 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (49.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (46.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (52.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (50.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (48.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (52.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (51.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (47.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (47.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (51.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (44.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 48.6ms | Allocations: 1485)
  [1m[36mDish Load (44.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (47.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (43.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 45.3ms | Allocations: 485)
  Rendered layouts/_add_comment.html.erb (Duration: 1.1ms | Allocations: 515)
  [1m[35m (45.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 446.8ms | Allocations: 68670)
  Rendered layouts/_header.html.erb (Duration: 2.3ms | Allocations: 1061)
  [1m[36mUser Load (45.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (59.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 115.9ms | Allocations: 4588)
  Rendered layout layouts/application.html.erb (Duration: 575.3ms | Allocations: 78047)
Completed 200 OK in 1199ms (Views: 245.4ms | ActiveRecord: 918.1ms | Allocations: 82993)


Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:56:23 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (46.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.0ms | Allocations: 2394)
  Rendered dishes/new.html.erb within layouts/application (Duration: 2.2ms | Allocations: 2470)
  Rendered layout layouts/application.html.erb (Duration: 2.5ms | Allocations: 2562)
Completed 500 Internal Server Error in 51ms (ActiveRecord: 46.6ms | Allocations: 3404)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (The asset "Default-dish-img" is not present in the asset pipeline.
):
    24:         <% if @dish.ruta_img_plato.present? %>
    25:           <%= image_tag @dish.ruta_img_plato, class: "categories_new_img", id: "restaurant_image" %>
    26:         <% else %>
    27:           <%= image_tag "Default-dish-img", class: "categories_new_img", id: "restaurant_image" %>
    28:         <% end %>
    29:         <label class="new_post_image_upload_button">
    30:           <%= form.file_field :ruta_img_plato, id: "upload_image_input", style: "display:none;" %>
  
app/views/dishes/_form.html.erb:27
app/views/dishes/_form.html.erb:2
app/views/dishes/new.html.erb:6
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:57:10 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (47.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 7.4ms | Allocations: 2719)
  Rendered dishes/new.html.erb within layouts/application (Duration: 9.9ms | Allocations: 3013)
  Rendered layouts/_header.html.erb (Duration: 4.4ms | Allocations: 1320)
  [1m[36mUser Load (44.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 235.3ms | Allocations: 13385)
  Rendered layout layouts/application.html.erb (Duration: 273.1ms | Allocations: 36558)
Completed 200 OK in 654ms (Views: 95.0ms | ActiveRecord: 472.9ms | Allocations: 49861)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:57:29 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"b", "descripcion"=>"b", "precio"=>"12", "ruta_img_plato"=>#<ActionDispatch::Http::UploadedFile:0x00007f3ebe992f38 @tempfile=#<Tempfile:/tmp/RackMultipart20231119-4356-q70mm2.png>, @content_type="image/png", @original_filename="Captura desde 2023-11-03 13-23-39.png", @headers="Content-Disposition: form-data; name=\"dish[ruta_img_plato]\"; filename=\"Captura desde 2023-11-03 13-23-39.png\"\r\nContent-Type: image/png\r\n">}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (47.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:21:in `create'
  [1m[36mTRANSACTION (44.9ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mRestaurant Load (66.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mDish Create (45.5ms)[0m  [1m[32mINSERT INTO "dishes" ("restaurant_id", "nombre", "ruta_img_plato", "descripcion", "precio") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["restaurant_id", 7], ["nombre", "b"], ["ruta_img_plato", "#<ActionDispatch::Http::UploadedFile:0x00007f3ebe992f38>"], ["descripcion", "b"], ["precio", 12.0]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mTRANSACTION (44.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:22:in `create'
Redirected to http://localhost:3000/restaurants/7
Completed 302 Found in 275ms (ActiveRecord: 248.9ms | Allocations: 5561)


Started GET "/restaurants/7" for ::1 at 2023-11-19 16:57:29 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (62.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (51.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (45.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (49.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (45.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (48.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (45.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (61.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (46.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (44.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 51.6ms | Allocations: 2083)
  [1m[36mDish Load (43.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  Rendered restaurants/show.html.erb within layouts/application (Duration: 109.5ms | Allocations: 7992)
  Rendered layout layouts/application.html.erb (Duration: 110.0ms | Allocations: 8084)
Completed 500 Internal Server Error in 1008ms (ActiveRecord: 932.7ms | Allocations: 20593)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (The asset "ruta_img_plato" is not present in the asset pipeline.
):
    11:         <%= link_to get_dish_path(dish), style: "text-decoration: none !important" do %>
    12:           <div class="restaurant_dish_container">
    13:             <% if dish.ruta_img_plato.present? %>
    14:               <%= image_tag "ruta_img_plato", class: "restaurant_dish_img" %>
    15:             <% else %>
    16:               <%= image_tag "default-dish-img", class: "restaurant_dish_img" %>
    17:             <% end %>
  
app/views/restaurants/show.html.erb:14
app/views/restaurants/show.html.erb:11
app/views/restaurants/show.html.erb:10
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:59:13 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (70.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.2ms | Allocations: 2717)
  Rendered dishes/new.html.erb within layouts/application (Duration: 5.2ms | Allocations: 3013)
  Rendered layouts/_header.html.erb (Duration: 2.9ms | Allocations: 1320)
  [1m[36mUser Load (46.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 226.1ms | Allocations: 13411)
  Rendered layout layouts/application.html.erb (Duration: 277.2ms | Allocations: 36585)
Completed 200 OK in 666ms (Views: 97.0ms | ActiveRecord: 483.1ms | Allocations: 49957)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:59:22 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"c", "descripcion"=>"c", "precio"=>"3", "ruta_img_plato"=>#<ActionDispatch::Http::UploadedFile:0x00007f3ebe8f3f28 @tempfile=#<Tempfile:/tmp/RackMultipart20231119-4356-op7738.png>, @content_type="image/png", @original_filename="Captura desde 2023-11-03 13-23-39.png", @headers="Content-Disposition: form-data; name=\"dish[ruta_img_plato]\"; filename=\"Captura desde 2023-11-03 13-23-39.png\"\r\nContent-Type: image/png\r\n">}, "button"=>"", "restaurant_id"=>"7"}
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms | Allocations: 771)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionController::ParameterMissing (param is missing or the value is empty: restaurant):
  
app/controllers/dishes_controller.rb:20:in `create'
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:59:23 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.1ms | Allocations: 2101)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.7ms | Allocations: 2176)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1064)
  [1m[36mUser Load (44.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 105.5ms | Allocations: 4599)
  Rendered layout layouts/application.html.erb (Duration: 119.4ms | Allocations: 11603)
Completed 200 OK in 166ms (Views: 28.8ms | ActiveRecord: 135.0ms | Allocations: 12497)


Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 17:00:04 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 10.5ms | Allocations: 2717)
  Rendered dishes/new.html.erb within layouts/application (Duration: 12.4ms | Allocations: 3015)
  Rendered layouts/_header.html.erb (Duration: 2.9ms | Allocations: 1320)
  [1m[36mUser Load (44.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 272.8ms | Allocations: 13366)
  Rendered layout layouts/application.html.erb (Duration: 314.5ms | Allocations: 36545)
Completed 200 OK in 680ms (Views: 135.8ms | ActiveRecord: 460.6ms | Allocations: 49870)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 17:00:16 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"c", "descripcion"=>"c", "precio"=>"12", "ruta_img_plato"=>#<ActionDispatch::Http::UploadedFile:0x00007f3ebee56510 @tempfile=#<Tempfile:/tmp/RackMultipart20231119-4356-36nbwv.png>, @content_type="image/png", @original_filename="Captura desde 2023-11-03 13-23-39.png", @headers="Content-Disposition: form-data; name=\"dish[ruta_img_plato]\"; filename=\"Captura desde 2023-11-03 13-23-39.png\"\r\nContent-Type: image/png\r\n">}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (51.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 95.1ms | Allocations: 58359)
  Rendered dishes/new.html.erb within layouts/application (Duration: 95.5ms | Allocations: 58473)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1067)
  [1m[36mUser Load (49.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 102.6ms | Allocations: 4602)
  Rendered layout layouts/application.html.erb (Duration: 204.4ms | Allocations: 67849)
Completed 422 Unprocessable Entity in 260ms (Views: 111.3ms | ActiveRecord: 145.3ms | Allocations: 70067)


Started GET "/restaurants/new" for ::1 at 2023-11-19 17:02:59 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (89.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 156.5ms | Allocations: 6527)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 157.6ms | Allocations: 6844)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1056)
  [1m[36mUser Load (44.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 96.7ms | Allocations: 4584)
  Rendered layout layouts/application.html.erb (Duration: 260.3ms | Allocations: 16179)
Completed 200 OK in 263ms (Views: 38.4ms | ActiveRecord: 223.1ms | Allocations: 16684)


Started POST "/restaurants" for ::1 at 2023-11-19 17:03:23 +0100
Processing by RestaurantsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "restaurant"=>{"nombre"=>"prueba", "telefono"=>"a", "direccion"=>"a", "horario"=>"a", "categoria"=>"burger", "ruta_img_fondo"=>#<ActionDispatch::Http::UploadedFile:0x00007f3ee531d938 @tempfile=#<Tempfile:/tmp/RackMultipart20231119-4356-g4iofg.jpg>, @content_type="image/jpeg", @original_filename="21_bestrestaurantintheworld.jpg", @headers="Content-Disposition: form-data; name=\"restaurant[ruta_img_fondo]\"; filename=\"21_bestrestaurantintheworld.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "button"=>""}
  [1m[36mTRANSACTION (44.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/restaurants_controller.rb:43:in `create'
  [1m[36mRestaurant Create (91.8ms)[0m  [1m[32mINSERT INTO "restaurants" ("categoria", "nombre", "ruta_img_perfil", "ruta_img_fondo", "direccion", "telefono", "horario", "imported_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["categoria", "burger"], ["nombre", "prueba"], ["ruta_img_perfil", nil], ["ruta_img_fondo", "15ce3c0420cfdec1ff55.jpg"], ["direccion", "a"], ["telefono", "a"], ["horario", "a"], ["imported_id", nil]]
  â†³ app/controllers/restaurants_controller.rb:43:in `create'
  [1m[36mTRANSACTION (47.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/restaurants_controller.rb:43:in `create'
Redirected to http://localhost:3000/restaurants/12
  [1m[36mUser Load (45.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:48:in `create'
  [1m[36mTRANSACTION (43.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/restaurants_controller.rb:48:in `create'
  [1m[36mRestaurant::HABTM_Users Create (45.2ms)[0m  [1m[32mINSERT INTO "restaurants_users" ("restaurant_id", "user_id") VALUES ($1, $2)[0m  [["restaurant_id", 12], ["user_id", "Mr.Dani"]]
  â†³ app/controllers/restaurants_controller.rb:48:in `create'
  [1m[36mTRANSACTION (45.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/restaurants_controller.rb:48:in `create'
Completed 302 Found in 383ms (ActiveRecord: 452.3ms | Allocations: 7648)


Started GET "/restaurants/12" for ::1 at 2023-11-19 17:03:23 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (44.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (44.8ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (44.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (55.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (44.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (43.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (43.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (47.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 139.5ms | Allocations: 58441)
  [1m[36mDish Load (43.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (46.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (43.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 47.4ms | Allocations: 1706)
  Rendered layouts/_add_comment.html.erb (Duration: 1.3ms | Allocations: 664)
  [1m[35m (44.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=12 AND posts.autor=users.nombre AND posts.restaurant_id=12[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 330.1ms | Allocations: 64295)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1070)
  [1m[36mUser Load (43.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 98.5ms | Allocations: 4630)
  Rendered layout layouts/application.html.erb (Duration: 441.9ms | Allocations: 73734)
Completed 200 OK in 1286ms (Views: 129.4ms | ActiveRecord: 1101.4ms | Allocations: 86058)


Started GET "/restaurants/12/dishes/new" for ::1 at 2023-11-19 17:06:01 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"12"}
  [1m[36mRestaurant Load (47.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.8ms | Allocations: 2112)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.4ms | Allocations: 2187)
  Rendered layouts/_header.html.erb (Duration: 4.2ms | Allocations: 1063)
  [1m[36mUser Load (44.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 101.0ms | Allocations: 4604)
  Rendered layout layouts/application.html.erb (Duration: 114.6ms | Allocations: 11579)
Completed 200 OK in 167ms (Views: 25.3ms | ActiveRecord: 137.6ms | Allocations: 12448)


Started POST "/restaurants/12/dishes" for ::1 at 2023-11-19 17:06:12 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"12", "ruta_img_plato"=>#<ActionDispatch::Http::UploadedFile:0x00007f3ebe80a3c8 @tempfile=#<Tempfile:/tmp/RackMultipart20231119-4356-g086np.jpg>, @content_type="image/jpeg", @original_filename="21_bestrestaurantintheworld.jpg", @headers="Content-Disposition: form-data; name=\"dish[ruta_img_plato]\"; filename=\"21_bestrestaurantintheworld.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "button"=>"", "restaurant_id"=>"12"}
  [1m[36mRestaurant Load (44.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 138.0ms | Allocations: 58769)
  Rendered dishes/new.html.erb within layouts/application (Duration: 138.9ms | Allocations: 58840)
  Rendered layouts/_header.html.erb (Duration: 2.3ms | Allocations: 1074)
  [1m[36mUser Load (46.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 108.4ms | Allocations: 4641)
  Rendered layout layouts/application.html.erb (Duration: 259.2ms | Allocations: 68298)
Completed 422 Unprocessable Entity in 308ms (Views: 169.6ms | ActiveRecord: 134.7ms | Allocations: 69817)


Started POST "/restaurants/12/dishes" for ::1 at 2023-11-19 17:08:52 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"12"}, "button"=>"", "restaurant_id"=>"12"}
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (44.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mRestaurant Load (46.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mDish Create (44.8ms)[0m  [1m[32mINSERT INTO "dishes" ("restaurant_id", "nombre", "ruta_img_plato", "descripcion", "precio") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["restaurant_id", 12], ["nombre", "a"], ["ruta_img_plato", nil], ["descripcion", "a"], ["precio", 12.0]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mTRANSACTION (44.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:22:in `create'
Redirected to http://localhost:3000/restaurants/12/edit
Completed 302 Found in 493ms (ActiveRecord: 455.7ms | Allocations: 15843)


Started GET "/restaurants/12/edit" for ::1 at 2023-11-19 17:08:53 +0100
Processing by RestaurantsController#edit as TURBO_STREAM
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (44.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:56:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  [1m[36mCategory Load (44.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 107.3ms | Allocations: 6353)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 108.1ms | Allocations: 6642)
  Rendered layouts/_header.html.erb (Duration: 2.8ms | Allocations: 1330)
  [1m[36mUser Load (49.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 262.0ms | Allocations: 13321)
  Rendered layout layouts/application.html.erb (Duration: 390.9ms | Allocations: 40148)
Completed 200 OK in 442ms (Views: 118.3ms | ActiveRecord: 318.6ms | Allocations: 42166)


Started GET "/restaurants/12/dishes/new" for ::1 at 2023-11-19 17:09:18 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"12"}
  [1m[36mRestaurant Load (45.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 28.4ms | Allocations: 2624)
  Rendered dishes/new.html.erb within layouts/application (Duration: 30.2ms | Allocations: 2912)
  Rendered layouts/_header.html.erb (Duration: 11.0ms | Allocations: 1070)
  [1m[36mUser Load (52.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (52.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 136.9ms | Allocations: 4629)
  Rendered layout layouts/application.html.erb (Duration: 204.5ms | Allocations: 12351)
Completed 200 OK in 284ms (Views: 108.8ms | ActiveRecord: 150.6ms | Allocations: 13440)


Started POST "/restaurants/12/dishes" for ::1 at 2023-11-19 17:09:28 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"332", "ruta_img_plato"=>#<ActionDispatch::Http::UploadedFile:0x00007f3ebe7cb600 @tempfile=#<Tempfile:/tmp/RackMultipart20231119-4356-tmxzk4.jpg>, @content_type="image/jpeg", @original_filename="21_bestrestaurantintheworld.jpg", @headers="Content-Disposition: form-data; name=\"dish[ruta_img_plato]\"; filename=\"21_bestrestaurantintheworld.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "button"=>"", "restaurant_id"=>"12"}
  [1m[36mTRANSACTION (46.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mRestaurant Load (44.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mDish Create (44.6ms)[0m  [1m[32mINSERT INTO "dishes" ("restaurant_id", "nombre", "ruta_img_plato", "descripcion", "precio") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["restaurant_id", 12], ["nombre", "a"], ["ruta_img_plato", "d5a0e8de17ba84108594.jpg"], ["descripcion", "a"], ["precio", 332.0]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mTRANSACTION (44.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:22:in `create'
Redirected to http://localhost:3000/restaurants/12/edit
Completed 302 Found in 191ms (ActiveRecord: 179.0ms | Allocations: 2780)


Started GET "/restaurants/12/edit" for ::1 at 2023-11-19 17:09:28 +0100
Processing by RestaurantsController#edit as TURBO_STREAM
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (44.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:56:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  [1m[36mCategory Load (44.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 49.5ms | Allocations: 3074)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 49.8ms | Allocations: 3138)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1068)
  [1m[36mUser Load (43.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 94.6ms | Allocations: 4625)
  Rendered layout layouts/application.html.erb (Duration: 166.1ms | Allocations: 20556)
Completed 200 OK in 213ms (Views: 35.7ms | ActiveRecord: 174.9ms | Allocations: 21221)


Started GET "/restaurants/12/" for ::1 at 2023-11-19 17:09:38 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (49.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (45.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (46.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (47.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (44.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (53.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (45.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (47.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (46.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 50.3ms | Allocations: 2090)
  [1m[36mDish Load (44.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  Rendered restaurants/show.html.erb within layouts/application (Duration: 105.9ms | Allocations: 7194)
  Rendered layout layouts/application.html.erb (Duration: 106.8ms | Allocations: 7286)
Completed 500 Internal Server Error in 976ms (ActiveRecord: 881.9ms | Allocations: 27485)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (The asset "ruta_img_plato" is not present in the asset pipeline.
):
    11:         <%= link_to get_dish_path(dish), style: "text-decoration: none !important" do %>
    12:           <div class="restaurant_dish_container">
    13:             <% if dish.ruta_img_plato.present? %>
    14:               <%= image_tag "ruta_img_plato", class: "restaurant_dish_img" %>
    15:             <% else %>
    16:               <%= image_tag "default-dish-img", class: "restaurant_dish_img" %>
    17:             <% end %>
  
app/views/restaurants/show.html.erb:14
app/views/restaurants/show.html.erb:11
app/views/restaurants/show.html.erb:10
Started GET "/restaurants/12/" for ::1 at 2023-11-19 17:09:57 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (49.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (46.1ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (46.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (49.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (50.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (47.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (52.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (45.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (58.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (47.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 54.2ms | Allocations: 1512)
  [1m[36mDish Load (44.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  Rendered restaurants/show.html.erb within layouts/application (Duration: 106.5ms | Allocations: 4749)
  Rendered layout layouts/application.html.erb (Duration: 107.2ms | Allocations: 4841)
Completed 500 Internal Server Error in 726ms (ActiveRecord: 670.9ms | Allocations: 9778)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (The asset "ruta_img_plato" is not present in the asset pipeline.
):
    11:         <%= link_to get_dish_path(dish), style: "text-decoration: none !important" do %>
    12:           <div class="restaurant_dish_container">
    13:             <% if dish.ruta_img_plato.present? %>
    14:               <%= image_tag "ruta_img_plato", class: "restaurant_dish_img" %>
    15:             <% else %>
    16:               <%= image_tag "default-dish-img", class: "restaurant_dish_img" %>
    17:             <% end %>
  
app/views/restaurants/show.html.erb:14
app/views/restaurants/show.html.erb:11
app/views/restaurants/show.html.erb:10
Started GET "/restaurants/12/" for ::1 at 2023-11-19 17:10:01 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (45.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (45.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (46.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (55.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (47.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (45.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (47.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (43.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (49.0ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (47.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 53.3ms | Allocations: 1511)
  [1m[36mDish Load (49.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  Rendered restaurants/show.html.erb within layouts/application (Duration: 110.4ms | Allocations: 4748)
  Rendered layout layouts/application.html.erb (Duration: 111.1ms | Allocations: 4840)
Completed 500 Internal Server Error in 712ms (ActiveRecord: 658.6ms | Allocations: 9765)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (The asset "ruta_img_plato" is not present in the asset pipeline.
):
    11:         <%= link_to get_dish_path(dish), style: "text-decoration: none !important" do %>
    12:           <div class="restaurant_dish_container">
    13:             <% if dish.ruta_img_plato.present? %>
    14:               <%= image_tag "ruta_img_plato", class: "restaurant_dish_img" %>
    15:             <% else %>
    16:               <%= image_tag "default-dish-img", class: "restaurant_dish_img" %>
    17:             <% end %>
  
app/views/restaurants/show.html.erb:14
app/views/restaurants/show.html.erb:11
app/views/restaurants/show.html.erb:10
Started GET "/restaurants/12/edit" for ::1 at 2023-11-19 17:10:25 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (45.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:56:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  [1m[36mCategory Load (46.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 63.2ms | Allocations: 3078)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 64.3ms | Allocations: 3142)
  Rendered layouts/_header.html.erb (Duration: 6.0ms | Allocations: 1080)
  [1m[36mUser Load (47.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 121.2ms | Allocations: 4663)
  Rendered layout layouts/application.html.erb (Duration: 214.0ms | Allocations: 12717)
Completed 200 OK in 265ms (Views: 74.9ms | ActiveRecord: 186.1ms | Allocations: 13376)


Started GET "/restaurants/12/dishes/new" for ::1 at 2023-11-19 17:10:27 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"12"}
  [1m[36mRestaurant Load (45.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 12.5ms | Allocations: 2116)
  Rendered dishes/new.html.erb within layouts/application (Duration: 13.4ms | Allocations: 2191)
  Rendered layouts/_header.html.erb (Duration: 8.3ms | Allocations: 1080)
  [1m[36mUser Load (48.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 120.3ms | Allocations: 4661)
  Rendered layout layouts/application.html.erb (Duration: 164.7ms | Allocations: 11702)
Completed 200 OK in 215ms (Views: 71.8ms | ActiveRecord: 138.7ms | Allocations: 12600)


Started POST "/restaurants/12/dishes" for ::1 at 2023-11-19 17:10:37 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"adsfa", "descripcion"=>"adsfasdfsadf", "precio"=>"12", "ruta_img_plato"=>#<ActionDispatch::Http::UploadedFile:0x00007f3ebe840838 @tempfile=#<Tempfile:/tmp/RackMultipart20231119-4356-bapoxe.png>, @content_type="image/png", @original_filename="Captura desde 2023-11-03 13-23-39.png", @headers="Content-Disposition: form-data; name=\"dish[ruta_img_plato]\"; filename=\"Captura desde 2023-11-03 13-23-39.png\"\r\nContent-Type: image/png\r\n">}, "button"=>"", "restaurant_id"=>"12"}
  [1m[36mTRANSACTION (47.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mRestaurant Load (50.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mDish Create (44.1ms)[0m  [1m[32mINSERT INTO "dishes" ("restaurant_id", "nombre", "ruta_img_plato", "descripcion", "precio") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["restaurant_id", 12], ["nombre", "adsfa"], ["ruta_img_plato", "9cab17be2034fb975a9c.png"], ["descripcion", "adsfasdfsadf"], ["precio", 12.0]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mTRANSACTION (44.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:22:in `create'
Redirected to http://localhost:3000/restaurants/12/edit
Completed 302 Found in 198ms (ActiveRecord: 186.4ms | Allocations: 2778)


Started GET "/restaurants/12/edit" for ::1 at 2023-11-19 17:10:38 +0100
Processing by RestaurantsController#edit as TURBO_STREAM
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (47.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:56:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  [1m[36mCategory Load (46.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 62.0ms | Allocations: 3059)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 62.5ms | Allocations: 3123)
  Rendered layouts/_header.html.erb (Duration: 3.0ms | Allocations: 1072)
  [1m[36mUser Load (43.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 102.8ms | Allocations: 4643)
  Rendered layout layouts/application.html.erb (Duration: 213.9ms | Allocations: 20574)
Completed 200 OK in 267ms (Views: 78.7ms | ActiveRecord: 183.2ms | Allocations: 21239)


Started GET "/restaurants/12/" for ::1 at 2023-11-19 17:10:42 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (48.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (46.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (48.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (52.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (44.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (44.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (46.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (46.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 51.4ms | Allocations: 1513)
  [1m[36mDish Load (45.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  Rendered restaurants/show.html.erb within layouts/application (Duration: 104.4ms | Allocations: 4184)
  Rendered layout layouts/application.html.erb (Duration: 104.9ms | Allocations: 4276)
Completed 500 Internal Server Error in 690ms (ActiveRecord: 648.7ms | Allocations: 9196)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (The asset "ruta_img_plato" is not present in the asset pipeline.
):
    11:         <%= link_to get_dish_path(dish), style: "text-decoration: none !important" do %>
    12:           <div class="restaurant_dish_container">
    13:             <% if dish.ruta_img_plato.present? %>
    14:               <%= image_tag "ruta_img_plato", class: "restaurant_dish_img" %>
    15:             <% else %>
    16:               <%= image_tag "default-dish-img", class: "restaurant_dish_img" %>
    17:             <% end %>
  
app/views/restaurants/show.html.erb:14
app/views/restaurants/show.html.erb:11
app/views/restaurants/show.html.erb:10
Started GET "/restaurants/12/" for ::1 at 2023-11-19 17:11:41 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (45.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (46.1ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (46.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (47.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (51.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (47.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (51.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (47.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.1ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (52.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 59.9ms | Allocations: 2166)
  [1m[36mDish Load (43.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (44.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (44.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 46.7ms | Allocations: 1714)
  Rendered layouts/_add_comment.html.erb (Duration: 1.8ms | Allocations: 670)
  [1m[35m (47.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=12 AND posts.autor=users.nombre AND posts.restaurant_id=12[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 455.2ms | Allocations: 63723)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1338)
  [1m[36mUser Load (44.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 213.4ms | Allocations: 13471)
  Rendered layout layouts/application.html.erb (Duration: 692.4ms | Allocations: 97396)
Completed 200 OK in 1808ms (Views: 192.0ms | ActiveRecord: 1501.5ms | Allocations: 118365)


Started GET "/restaurants/12/dishes/new" for ::1 at 2023-11-19 17:11:55 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"12"}
  [1m[36mRestaurant Load (44.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 13.6ms | Allocations: 2672)
  Rendered dishes/new.html.erb within layouts/application (Duration: 14.9ms | Allocations: 2959)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1080)
  [1m[36mUser Load (44.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (47.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 104.2ms | Allocations: 4662)
  Rendered layout layouts/application.html.erb (Duration: 128.7ms | Allocations: 12459)
Completed 200 OK in 178ms (Views: 38.4ms | ActiveRecord: 135.6ms | Allocations: 13567)


Started POST "/restaurants/12/dishes" for ::1 at 2023-11-19 17:13:01 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"aafds", "descripcion"=>"adsfasdf", "precio"=>"12312"}, "button"=>"", "restaurant_id"=>"12"}
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (45.9ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mRestaurant Load (44.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mDish Create (46.0ms)[0m  [1m[32mINSERT INTO "dishes" ("restaurant_id", "nombre", "ruta_img_plato", "descripcion", "precio") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["restaurant_id", 12], ["nombre", "aafds"], ["ruta_img_plato", nil], ["descripcion", "adsfasdf"], ["precio", 12312.0]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mTRANSACTION (44.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:22:in `create'
Redirected to http://localhost:3000/restaurants/12
Completed 302 Found in 488ms (ActiveRecord: 455.0ms | Allocations: 15831)


Started GET "/restaurants/12" for ::1 at 2023-11-19 17:13:01 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (52.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (48.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (45.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (54.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (50.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (43.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (46.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (47.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (44.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (44.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 51.1ms | Allocations: 2165)
  [1m[36mDish Load (44.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (49.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (44.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 48.1ms | Allocations: 1706)
  Rendered layouts/_add_comment.html.erb (Duration: 5.3ms | Allocations: 670)
  [1m[35m (45.1ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=12 AND posts.autor=users.nombre AND posts.restaurant_id=12[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 263.3ms | Allocations: 9278)
  Rendered layouts/_header.html.erb (Duration: 3.8ms | Allocations: 1340)
  [1m[36mUser Load (44.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 226.9ms | Allocations: 13338)
  Rendered layout layouts/application.html.erb (Duration: 561.8ms | Allocations: 42855)
Completed 200 OK in 1457ms (Views: 152.9ms | ActiveRecord: 1231.7ms | Allocations: 56362)


