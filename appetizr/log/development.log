Started GET "/" for 127.0.0.1 at 2023-12-02 19:09:17 +0100
  [1m[36mActiveRecord::SchemaMigration Load (31.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (31.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (32.4ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (30.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC LIMIT $1[0m  [["LIMIT", 5]]
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (29.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (30.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (30.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (31.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (32.4ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:28
  [1m[36mCategory Load (30.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:60
  [1m[36mRestaurant Load (31.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:73
  Rendered restaurants/index.html.erb within layouts/application (Duration: 1698.8ms | Allocations: 168443)
  Rendered layouts/_header.html.erb (Duration: 2.7ms | Allocations: 1382)
  Rendered layouts/_sidenav.html.erb (Duration: 5.1ms | Allocations: 3383)
  Rendered layout layouts/application.html.erb (Duration: 1861.3ms | Allocations: 192550)
Completed 200 OK in 3289ms (Views: 1737.4ms | ActiveRecord: 874.3ms | Allocations: 240775)


Started GET "/restaurants/43" for 127.0.0.1 at 2023-12-02 19:09:32 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"43"}
  [1m[36mRestaurant Load (101.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:27:in `show'
  [1m[36mRank Exists? (88.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:35:in `show'
  [1m[36mRank Load (294.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 43]]
  â†³ app/controllers/restaurants_controller.rb:38:in `show'
  [1m[35m (33.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=43 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (33.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=43 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (31.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=43 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (29.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 43], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (31.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=43 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (31.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=43 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (30.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=43 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (30.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=43 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (29.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (31.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=43 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 4.7ms | Allocations: 3231)
  [1m[36mDish Load (30.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 43]]
  â†³ app/views/restaurants/show.html.erb:9
  Rendered restaurants/show.html.erb within layouts/application (Duration: 266.2ms | Allocations: 16966)
  Rendered layout layouts/application.html.erb (Duration: 268.8ms | Allocations: 17057)
Completed 500 Internal Server Error in 1697ms (ActiveRecord: 1034.8ms | Allocations: 47123)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (The asset "e7e6760ef0ea313b05ce.jpg" is not present in the asset pipeline.
):
     9:     <% @restaurant.dishes.each do |dish| %>
    10:       <div class="restaurant_dish_container" onclick="window.location='<%= get_dish_path(dish) %>'" style="cursor: pointer;">
    11:         <% if dish.ruta_img_plato.present? %>
    12:           <%= image_tag dish.ruta_img_plato, class: "restaurant_dish_img" %>
    13:         <% else %>
    14:           <%= image_tag "default-dish-img", class: "restaurant_dish_img" %>
    15:         <% end %>
  
app/views/restaurants/show.html.erb:12
app/views/restaurants/show.html.erb:9
Started GET "/restaurants/43" for 127.0.0.1 at 2023-12-02 19:13:19 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"43"}
  [1m[36mRestaurant Load (29.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:27:in `show'
  [1m[36mRank Exists? (30.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:35:in `show'
  [1m[36mRank Load (30.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 43]]
  â†³ app/controllers/restaurants_controller.rb:38:in `show'
  [1m[35m (69.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=43 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (31.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=43 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (30.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=43 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (30.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 43], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (30.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=43 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (33.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=43 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (31.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=43 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (42.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=43 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (31.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (30.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=43 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 2.7ms | Allocations: 2542)
  [1m[36mDish Load (31.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 43]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (31.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (29.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "albertoperez19"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "albertoperez19"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (30.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 879)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 310.8ms | Allocations: 21545)
  Rendered layouts/_add_comment.html.erb (Duration: 1.6ms | Allocations: 682)
  [1m[35m (31.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=43 AND posts.autor=users.nombre AND posts.restaurant_id=43[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mRestaurant Load (31.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mUser Load (28.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 440)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 438)
  Rendered layouts/_comment.html.erb (Duration: 68.4ms | Allocations: 3638)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 527.9ms | Allocations: 31518)
  Rendered layouts/_header.html.erb (Duration: 3.2ms | Allocations: 1077)
  Rendered layouts/_sidenav.html.erb (Duration: 4.1ms | Allocations: 2630)
  Rendered layout layouts/application.html.erb (Duration: 540.5ms | Allocations: 38975)
Completed 200 OK in 1259ms (Views: 293.7ms | ActiveRecord: 698.8ms | Allocations: 44518)


Started GET "/login" for 127.0.0.1 at 2023-12-02 19:13:25 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 6.7ms | Allocations: 3225)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1079)
  Rendered layouts/_sidenav.html.erb (Duration: 5.8ms | Allocations: 2631)
  Rendered layout layouts/application.html.erb (Duration: 32.4ms | Allocations: 10689)
Completed 200 OK in 63ms (Views: 33.4ms | ActiveRecord: 0.0ms | Allocations: 11186)


Started POST "/login" for 127.0.0.1 at 2023-12-02 19:13:34 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"str1ien", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (253.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 763ms (ActiveRecord: 253.8ms | Allocations: 976)


Started GET "/" for 127.0.0.1 at 2023-12-02 19:13:35 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Load (396.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (30.0ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (31.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC LIMIT $1[0m  [["LIMIT", 5]]
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (32.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (30.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (29.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (30.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (30.9ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:28
  [1m[36mCategory Load (33.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:60
  [1m[36mRestaurant Load (30.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:73
  Rendered restaurants/index.html.erb within layouts/application (Duration: 154.2ms | Allocations: 25412)
  Rendered layouts/_header.html.erb (Duration: 2.9ms | Allocations: 1078)
  [1m[36mUser Load (31.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (29.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 144.4ms | Allocations: 8519)
  Rendered layout layouts/application.html.erb (Duration: 309.3ms | Allocations: 38799)
Completed 200 OK in 945ms (Views: 124.0ms | ActiveRecord: 767.4ms | Allocations: 42685)


Started GET "/restaurants/43" for 127.0.0.1 at 2023-12-02 19:13:44 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"43"}
  [1m[36mRestaurant Load (85.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:27:in `show'
  [1m[36mRank Exists? (29.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:35:in `show'
  [1m[36mRank Load (30.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 43]]
  â†³ app/controllers/restaurants_controller.rb:38:in `show'
  [1m[35m (30.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=43 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (29.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=43 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (30.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=43 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (30.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 43], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (32.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='str1ien' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=43 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (30.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=43 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (30.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=43 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (30.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=43 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (29.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (31.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='str1ien' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=43 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (30.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='str1ien' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 34.5ms | Allocations: 2826)
  [1m[36mDish Load (30.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 43]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (33.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='str1ien' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (29.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='str1ien' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (37.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='str1ien' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (29.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='str1ien' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (29.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (29.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "albertoperez19"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "albertoperez19"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (30.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 618)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 438)
  Rendered layouts/_comment.html.erb (Duration: 100.1ms | Allocations: 4447)
  Rendered layouts/_add_comment.html.erb (Duration: 1.5ms | Allocations: 531)
  [1m[35m (29.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=43 AND posts.autor=users.nombre AND posts.restaurant_id=43[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mRestaurant Load (30.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 440)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 438)
  Rendered layouts/_comment.html.erb (Duration: 35.7ms | Allocations: 2789)
  [1m[35m (30.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='str1ien' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered layouts/_add_comment.html.erb (Duration: 1.6ms | Allocations: 354)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 414.4ms | Allocations: 15256)
  Rendered layouts/_header.html.erb (Duration: 3.4ms | Allocations: 1077)
  [1m[36mUser Load (30.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (39.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 91.9ms | Allocations: 4625)
  Rendered layout layouts/application.html.erb (Duration: 523.9ms | Allocations: 24708)
Completed 200 OK in 1234ms (Views: 83.7ms | ActiveRecord: 893.2ms | Allocations: 30268)


Started GET "/restaurants/43/dishes/new" for 127.0.0.1 at 2023-12-02 19:13:49 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"43"}
  [1m[36mRestaurant Load (101.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:19:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 8.8ms | Allocations: 3033)
  Rendered dishes/new.html.erb within layouts/application (Duration: 29.1ms | Allocations: 3328)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1073)
  [1m[36mUser Load (29.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (30.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 70.4ms | Allocations: 4608)
  Rendered layout layouts/application.html.erb (Duration: 105.9ms | Allocations: 12747)
Completed 200 OK in 465ms (Views: 46.9ms | ActiveRecord: 161.1ms | Allocations: 13865)


Started POST "/restaurants/43/dishes" for 127.0.0.1 at 2023-12-02 19:14:22 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"codornices", "descripcion"=>"espectaculares", "precio"=>"12", "ruta_img_plato"=>#<ActionDispatch::Http::UploadedFile:0x00007f6f4a9c8a40 @tempfile=#<Tempfile:/tmp/RackMultipart20231202-1280136-m01mqx.jpg>, @content_type="image/jpeg", @original_filename="codorniz.jpg", @headers="Content-Disposition: form-data; name=\"dish[ruta_img_plato]\"; filename=\"codorniz.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "button"=>"", "restaurant_id"=>"43"}
  [1m[36mTRANSACTION (284.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:25:in `create'
  [1m[36mRestaurant Load (43.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:25:in `create'
  [1m[36mDish Create (39.8ms)[0m  [1m[32mINSERT INTO "dishes" ("restaurant_id", "nombre", "ruta_img_plato", "descripcion", "precio", "imported_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_id", 43], ["nombre", "codornices"], ["ruta_img_plato", "d0ab867d07c5aa5daeaa.jpg"], ["descripcion", "espectaculares"], ["precio", 12.0], ["imported_id", nil]]
  â†³ app/controllers/dishes_controller.rb:25:in `create'
  [1m[36mTRANSACTION (40.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:25:in `create'
Redirected to http://localhost:3000/restaurants/43
Completed 302 Found in 420ms (ActiveRecord: 407.9ms | Allocations: 5055)


Started GET "/restaurants/43" for 127.0.0.1 at 2023-12-02 19:14:22 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"43"}
  [1m[36mRestaurant Load (29.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:27:in `show'
  [1m[36mRank Exists? (29.8ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:35:in `show'
  [1m[36mRank Load (30.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 43]]
  â†³ app/controllers/restaurants_controller.rb:38:in `show'
  [1m[35m (30.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=43 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (36.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=43 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (30.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=43 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (29.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 43], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (30.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='str1ien' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=43 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (29.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=43 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (31.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=43 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (34.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=43 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (29.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (30.0ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='str1ien' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=43 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (31.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='str1ien' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 43.4ms | Allocations: 2836)
  [1m[36mDish Load (29.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 43]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (32.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='str1ien' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (30.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='str1ien' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (32.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='str1ien' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (31.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='str1ien' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (29.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='str1ien' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (29.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (30.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "albertoperez19"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "albertoperez19"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (35.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 618)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 440)
  Rendered layouts/_comment.html.erb (Duration: 108.2ms | Allocations: 4372)
  Rendered layouts/_add_comment.html.erb (Duration: 0.9ms | Allocations: 531)
  [1m[35m (30.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=43 AND posts.autor=users.nombre AND posts.restaurant_id=43[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mRestaurant Load (31.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 440)
  Rendered layouts/_comment.html.erb (Duration: 37.6ms | Allocations: 2792)
  [1m[35m (33.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='str1ien' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 356)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 577.8ms | Allocations: 72903)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1081)
  [1m[36mUser Load (29.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (29.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 72.0ms | Allocations: 4634)
  Rendered layout layouts/application.html.erb (Duration: 658.4ms | Allocations: 82371)
Completed 200 OK in 1115ms (Views: 194.1ms | ActiveRecord: 866.8ms | Allocations: 87895)


Started GET "/" for 127.0.0.1 at 2023-12-15 12:27:32 +0100
  [1m[36mActiveRecord::SchemaMigration Load (33.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (32.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (31.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (31.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC LIMIT $1[0m  [["LIMIT", 5]]
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (31.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (30.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (31.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (35.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (54.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:28
  [1m[36mCategory Load (31.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:60
  [1m[36mRestaurant Load (32.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:73
  Rendered restaurants/index.html.erb within layouts/application (Duration: 179.2ms | Allocations: 10183)
  Rendered layout layouts/application.html.erb (Duration: 1068.5ms | Allocations: 188978)
Completed 500 Internal Server Error in 3272ms (ActiveRecord: 1819.6ms | Allocations: 237243)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (Asset `controllers/application.js` was not declared to be precompiled in production.
Declare links to your assets in `app/assets/config/manifest.js`.

  //= link controllers/application.js

and restart your server):
     8: 
     9:     <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    10:     <%= stylesheet_link_tag "styles" %>
    11:     <%= javascript_importmap_tags %>
    12: 
    13:     <style>
    14:       @import url('https://fonts.cdnfonts.com/css/chillax');
  
app/views/layouts/application.html.erb:11
Started GET "/" for 127.0.0.1 at 2023-12-15 12:28:43 +0100
  [1m[36mActiveRecord::SchemaMigration Load (86.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (32.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (47.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (31.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC LIMIT $1[0m  [["LIMIT", 5]]
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (47.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (40.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (69.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (53.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (34.9ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:28
  [1m[36mCategory Load (43.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:60
  [1m[36mRestaurant Load (101.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:73
  Rendered restaurants/index.html.erb within layouts/application (Duration: 246.1ms | Allocations: 10184)
  Rendered layout layouts/application.html.erb (Duration: 409.6ms | Allocations: 113354)
Completed 500 Internal Server Error in 2621ms (ActiveRecord: 1554.7ms | Allocations: 161529)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (Asset `controllers/hello_controller.js` was not declared to be precompiled in production.
Declare links to your assets in `app/assets/config/manifest.js`.

  //= link controllers/hello_controller.js

and restart your server):
     8: 
     9:     <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    10:     <%= stylesheet_link_tag "styles" %>
    11:     <%= javascript_importmap_tags %>
    12: 
    13:     <style>
    14:       @import url('https://fonts.cdnfonts.com/css/chillax');
  
app/views/layouts/application.html.erb:11
Started GET "/" for 127.0.0.1 at 2023-12-15 12:29:44 +0100
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::NoDatabaseError (We could not find your database: brm33sftclngywwhayzb. Available database configurations can be found in config/database.yml file.

To resolve this error:

- Did you create the database for this app, or delete it? You may need to create your database.
- Has the database name changed? Check your database.yml config has the correct database name.

To create your database, run:

        bin/rails db:create
):
  
activerecord (7.1.2) lib/active_record/connection_adapters/postgresql_adapter.rb:74:in `rescue in new_client'
activerecord (7.1.2) lib/active_record/connection_adapters/postgresql_adapter.rb:68:in `new_client'
activerecord (7.1.2) lib/active_record/connection_adapters/postgresql_adapter.rb:980:in `connect'
activerecord (7.1.2) lib/active_record/connection_adapters/postgresql_adapter.rb:992:in `reconnect'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract_adapter.rb:685:in `block in reconnect!'
activesupport (7.1.2) lib/active_support/concurrency/null_lock.rb:9:in `synchronize'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract_adapter.rb:684:in `reconnect!'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract_adapter.rb:788:in `verify!'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract_adapter.rb:795:in `connect!'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract_adapter.rb:1001:in `block in with_raw_connection'
activesupport (7.1.2) lib/active_support/concurrency/null_lock.rb:9:in `synchronize'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract_adapter.rb:1000:in `with_raw_connection'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract_adapter.rb:1113:in `valid_raw_connection'
activerecord (7.1.2) lib/active_record/connection_adapters/postgresql_adapter.rb:616:in `get_database_version'
activerecord (7.1.2) lib/active_record/connection_adapters/schema_cache.rb:374:in `database_version'
activerecord (7.1.2) lib/active_record/connection_adapters/schema_cache.rb:70:in `database_version'
activerecord (7.1.2) lib/active_record/connection_adapters/schema_cache.rb:200:in `database_version'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract_adapter.rb:871:in `database_version'
activerecord (7.1.2) lib/active_record/connection_adapters/postgresql_adapter.rb:644:in `check_version'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:675:in `new_connection'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:720:in `checkout_new_connection'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:699:in `try_to_checkout_new_connection'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:657:in `acquire_connection'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:355:in `checkout'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:184:in `connection'
activerecord (7.1.2) lib/active_record/migration/pending_migration_connection.rb:8:in `establish_temporary_connection'
activerecord (7.1.2) lib/active_record/migration.rb:773:in `block in pending_migrations'
activerecord (7.1.2) lib/active_record/migration.rb:772:in `each'
activerecord (7.1.2) lib/active_record/migration.rb:772:in `pending_migrations'
activerecord (7.1.2) lib/active_record/migration.rb:751:in `check_pending_migrations'
activerecord (7.1.2) lib/active_record/migration.rb:643:in `block (2 levels) in call'
activesupport (7.1.2) lib/active_support/file_update_checker.rb:85:in `execute'
activerecord (7.1.2) lib/active_record/migration.rb:648:in `block in call'
activerecord (7.1.2) lib/active_record/migration.rb:640:in `synchronize'
activerecord (7.1.2) lib/active_record/migration.rb:640:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
activesupport (7.1.2) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.1.2) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/actionable_exceptions.rb:16:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (7.1.2) lib/rails/rack/logger.rb:37:in `call_app'
railties (7.1.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:135:in `block in tagged'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:39:in `tagged'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:135:in `tagged'
activesupport (7.1.2) lib/active_support/broadcast_logger.rb:240:in `method_missing'
railties (7.1.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/remote_ip.rb:92:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/request_id.rb:28:in `call'
rack (3.0.8) lib/rack/method_override.rb:28:in `call'
rack (3.0.8) lib/rack/runtime.rb:24:in `call'
activesupport (7.1.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:59:in `block in call'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:24:in `collect_events'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:58:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.8) lib/rack/sendfile.rb:114:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/host_authorization.rb:141:in `call'
railties (7.1.2) lib/rails/engine.rb:529:in `call'
puma (6.4.0) lib/puma/configuration.rb:272:in `call'
puma (6.4.0) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.0) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.0) lib/puma/request.rb:99:in `handle_request'
puma (6.4.0) lib/puma/server.rb:443:in `process_client'
puma (6.4.0) lib/puma/server.rb:241:in `block in run'
puma (6.4.0) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
Started GET "/" for 127.0.0.1 at 2023-12-15 12:30:34 +0100
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::NoDatabaseError (We could not find your database: brm33sftclngywwhayzb. Available database configurations can be found in config/database.yml file.

To resolve this error:

- Did you create the database for this app, or delete it? You may need to create your database.
- Has the database name changed? Check your database.yml config has the correct database name.

To create your database, run:

        bin/rails db:create
):
  
activerecord (7.1.2) lib/active_record/connection_adapters/postgresql_adapter.rb:74:in `rescue in new_client'
activerecord (7.1.2) lib/active_record/connection_adapters/postgresql_adapter.rb:68:in `new_client'
activerecord (7.1.2) lib/active_record/connection_adapters/postgresql_adapter.rb:980:in `connect'
activerecord (7.1.2) lib/active_record/connection_adapters/postgresql_adapter.rb:992:in `reconnect'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract_adapter.rb:685:in `block in reconnect!'
activesupport (7.1.2) lib/active_support/concurrency/null_lock.rb:9:in `synchronize'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract_adapter.rb:684:in `reconnect!'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract_adapter.rb:788:in `verify!'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract_adapter.rb:795:in `connect!'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract_adapter.rb:1001:in `block in with_raw_connection'
activesupport (7.1.2) lib/active_support/concurrency/null_lock.rb:9:in `synchronize'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract_adapter.rb:1000:in `with_raw_connection'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract_adapter.rb:1113:in `valid_raw_connection'
activerecord (7.1.2) lib/active_record/connection_adapters/postgresql_adapter.rb:616:in `get_database_version'
activerecord (7.1.2) lib/active_record/connection_adapters/schema_cache.rb:374:in `database_version'
activerecord (7.1.2) lib/active_record/connection_adapters/schema_cache.rb:70:in `database_version'
activerecord (7.1.2) lib/active_record/connection_adapters/schema_cache.rb:200:in `database_version'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract_adapter.rb:871:in `database_version'
activerecord (7.1.2) lib/active_record/connection_adapters/postgresql_adapter.rb:644:in `check_version'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:675:in `new_connection'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:720:in `checkout_new_connection'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:699:in `try_to_checkout_new_connection'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:657:in `acquire_connection'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:355:in `checkout'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:184:in `connection'
activerecord (7.1.2) lib/active_record/migration/pending_migration_connection.rb:8:in `establish_temporary_connection'
activerecord (7.1.2) lib/active_record/migration.rb:773:in `block in pending_migrations'
activerecord (7.1.2) lib/active_record/migration.rb:772:in `each'
activerecord (7.1.2) lib/active_record/migration.rb:772:in `pending_migrations'
activerecord (7.1.2) lib/active_record/migration.rb:751:in `check_pending_migrations'
activerecord (7.1.2) lib/active_record/migration.rb:643:in `block (2 levels) in call'
activesupport (7.1.2) lib/active_support/file_update_checker.rb:85:in `execute'
activerecord (7.1.2) lib/active_record/migration.rb:648:in `block in call'
activerecord (7.1.2) lib/active_record/migration.rb:640:in `synchronize'
activerecord (7.1.2) lib/active_record/migration.rb:640:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
activesupport (7.1.2) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.1.2) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/actionable_exceptions.rb:16:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (7.1.2) lib/rails/rack/logger.rb:37:in `call_app'
railties (7.1.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:135:in `block in tagged'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:39:in `tagged'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:135:in `tagged'
activesupport (7.1.2) lib/active_support/broadcast_logger.rb:240:in `method_missing'
railties (7.1.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/remote_ip.rb:92:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/request_id.rb:28:in `call'
rack (3.0.8) lib/rack/method_override.rb:28:in `call'
rack (3.0.8) lib/rack/runtime.rb:24:in `call'
activesupport (7.1.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:59:in `block in call'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:24:in `collect_events'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:58:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.8) lib/rack/sendfile.rb:114:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/host_authorization.rb:141:in `call'
railties (7.1.2) lib/rails/engine.rb:529:in `call'
puma (6.4.0) lib/puma/configuration.rb:272:in `call'
puma (6.4.0) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.0) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.0) lib/puma/request.rb:99:in `handle_request'
puma (6.4.0) lib/puma/server.rb:443:in `process_client'
puma (6.4.0) lib/puma/server.rb:241:in `block in run'
puma (6.4.0) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
Started GET "/" for 127.0.0.1 at 2023-12-15 12:32:53 +0100
  [1m[36mActiveRecord::SchemaMigration Load (59.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (277.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (306.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (37.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC LIMIT $1[0m  [["LIMIT", 5]]
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (51.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (58.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (33.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (62.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (33.2ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:28
  [1m[36mCategory Load (39.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:60
  [1m[36mRestaurant Load (57.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:73
  Rendered restaurants/index.html.erb within layouts/application (Duration: 200.3ms | Allocations: 10189)
  Rendered layout layouts/application.html.erb (Duration: 259.4ms | Allocations: 44618)
Completed 500 Internal Server Error in 2505ms (ActiveRecord: 1616.6ms | Allocations: 92796)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (link_tree argument must be a relative path):
  
sprockets (4.2.1) lib/sprockets/directive_processor.rb:411:in `expand_relative_dirname'
sprockets (4.2.1) lib/sprockets/directive_processor.rb:359:in `process_link_tree_directive'
sprockets (4.2.1) lib/sprockets/directive_processor.rb:189:in `block in process_directives'
sprockets (4.2.1) lib/sprockets/directive_processor.rb:187:in `each'
sprockets (4.2.1) lib/sprockets/directive_processor.rb:187:in `process_directives'
sprockets (4.2.1) lib/sprockets/directive_processor.rb:84:in `_call'
sprockets (4.2.1) lib/sprockets/directive_processor.rb:65:in `call'
sprockets (4.2.1) lib/sprockets/processor_utils.rb:84:in `call_processor'
sprockets (4.2.1) lib/sprockets/processor_utils.rb:66:in `block in call_processors'
sprockets (4.2.1) lib/sprockets/processor_utils.rb:65:in `reverse_each'
sprockets (4.2.1) lib/sprockets/processor_utils.rb:65:in `call_processors'
sprockets (4.2.1) lib/sprockets/loader.rb:184:in `load_from_unloaded'
sprockets (4.2.1) lib/sprockets/loader.rb:59:in `block in load'
sprockets (4.2.1) lib/sprockets/loader.rb:339:in `fetch_asset_from_dependency_cache'
sprockets (4.2.1) lib/sprockets/loader.rb:43:in `load'
sprockets (4.2.1) lib/sprockets/cached_environment.rb:44:in `block in load'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/map.rb:207:in `block in fetch_or_store'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/map.rb:187:in `fetch'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/map.rb:206:in `fetch_or_store'
sprockets (4.2.1) lib/sprockets/cached_environment.rb:44:in `load'
sprockets (4.2.1) lib/sprockets/bundle.rb:27:in `call'
sprockets (4.2.1) lib/sprockets/processor_utils.rb:84:in `call_processor'
sprockets (4.2.1) lib/sprockets/processor_utils.rb:66:in `block in call_processors'
sprockets (4.2.1) lib/sprockets/processor_utils.rb:65:in `reverse_each'
sprockets (4.2.1) lib/sprockets/processor_utils.rb:65:in `call_processors'
sprockets (4.2.1) lib/sprockets/loader.rb:184:in `load_from_unloaded'
sprockets (4.2.1) lib/sprockets/loader.rb:59:in `block in load'
sprockets (4.2.1) lib/sprockets/loader.rb:339:in `fetch_asset_from_dependency_cache'
sprockets (4.2.1) lib/sprockets/loader.rb:43:in `load'
sprockets (4.2.1) lib/sprockets/cached_environment.rb:44:in `block in load'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/map.rb:207:in `block in fetch_or_store'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/map.rb:187:in `fetch'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/map.rb:206:in `fetch_or_store'
sprockets (4.2.1) lib/sprockets/cached_environment.rb:44:in `load'
sprockets (4.2.1) lib/sprockets/base.rb:81:in `find_asset'
sprockets (4.2.1) lib/sprockets/base.rb:88:in `find_all_linked_assets'
sprockets (4.2.1) lib/sprockets/manifest.rb:125:in `each'
sprockets (4.2.1) lib/sprockets/manifest.rb:125:in `to_a'
sprockets (4.2.1) lib/sprockets/manifest.rb:125:in `block (2 levels) in find'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/executor/safe_task_executor.rb:24:in `block in execute'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/synchronization/mutex_lockable_object.rb:48:in `block in synchronize'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/synchronization/mutex_lockable_object.rb:48:in `synchronize'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/synchronization/mutex_lockable_object.rb:48:in `synchronize'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/executor/safe_task_executor.rb:22:in `execute'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/promise.rb:564:in `block in realize'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:352:in `run_task'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:343:in `block (3 levels) in create_worker'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `loop'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `block (2 levels) in create_worker'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:333:in `catch'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:333:in `block in create_worker'
Started GET "/" for 127.0.0.1 at 2023-12-15 12:35:24 +0100
  [1m[36mActiveRecord::SchemaMigration Load (34.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (32.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (31.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (34.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC LIMIT $1[0m  [["LIMIT", 5]]
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (39.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (31.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (36.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (31.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (39.3ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:28
  [1m[36mCategory Load (32.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:60
  [1m[36mRestaurant Load (33.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:73
  Rendered restaurants/index.html.erb within layouts/application (Duration: 165.7ms | Allocations: 10184)
  Rendered layout layouts/application.html.erb (Duration: 324.3ms | Allocations: 108965)
Completed 500 Internal Server Error in 4415ms (ActiveRecord: 1691.8ms | Allocations: 157147)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (Asset `controllers/application.js` was not declared to be precompiled in production.
Declare links to your assets in `app/assets/config/manifest.js`.

  //= link controllers/application.js

and restart your server):
     8: 
     9:     <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    10:     <%= stylesheet_link_tag "styles" %>
    11:     <%= javascript_importmap_tags %>
    12: 
    13:     <style>
    14:       @import url('https://fonts.cdnfonts.com/css/chillax');
  
app/views/layouts/application.html.erb:11
Started GET "/" for 127.0.0.1 at 2023-12-15 12:36:17 +0100
  [1m[36mActiveRecord::SchemaMigration Load (31.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (30.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (32.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (35.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC LIMIT $1[0m  [["LIMIT", 5]]
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (45.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (36.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (29.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (31.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (31.0ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:28
  [1m[36mCategory Load (36.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:60
  [1m[36mRestaurant Load (30.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:73
  Rendered restaurants/index.html.erb within layouts/application (Duration: 157.2ms | Allocations: 10189)
  Rendered layout layouts/application.html.erb (Duration: 301.1ms | Allocations: 87805)
Completed 500 Internal Server Error in 1860ms (ActiveRecord: 1154.3ms | Allocations: 135977)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (Asset `controllers/hello_controller.js` was not declared to be precompiled in production.
Declare links to your assets in `app/assets/config/manifest.js`.

  //= link controllers/hello_controller.js

and restart your server):
     8: 
     9:     <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    10:     <%= stylesheet_link_tag "styles" %>
    11:     <%= javascript_importmap_tags %>
    12: 
    13:     <style>
    14:       @import url('https://fonts.cdnfonts.com/css/chillax');
  
app/views/layouts/application.html.erb:11
Started GET "/" for 127.0.0.1 at 2023-12-15 12:36:44 +0100
  [1m[36mActiveRecord::SchemaMigration Load (51.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (56.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (37.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (37.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC LIMIT $1[0m  [["LIMIT", 5]]
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (31.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (41.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (33.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (33.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (40.0ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:28
  [1m[36mCategory Load (38.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:60
  [1m[36mRestaurant Load (33.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:73
  Rendered restaurants/index.html.erb within layouts/application (Duration: 169.2ms | Allocations: 10184)
  Rendered layout layouts/application.html.erb (Duration: 398.1ms | Allocations: 117314)
Completed 500 Internal Server Error in 3014ms (ActiveRecord: 961.2ms | Allocations: 165493)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (Asset `controllers/index.js` was not declared to be precompiled in production.
Declare links to your assets in `app/assets/config/manifest.js`.

  //= link controllers/index.js

and restart your server):
     8: 
     9:     <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    10:     <%= stylesheet_link_tag "styles" %>
    11:     <%= javascript_importmap_tags %>
    12: 
    13:     <style>
    14:       @import url('https://fonts.cdnfonts.com/css/chillax');
  
app/views/layouts/application.html.erb:11
Started GET "/" for 127.0.0.1 at 2023-12-15 12:37:11 +0100
  [1m[36mActiveRecord::SchemaMigration Load (32.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (31.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (32.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (31.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC LIMIT $1[0m  [["LIMIT", 5]]
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (278.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (35.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (36.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (38.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (43.2ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:28
  [1m[36mCategory Load (32.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:60
  [1m[36mRestaurant Load (33.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:73
  Rendered restaurants/index.html.erb within layouts/application (Duration: 419.2ms | Allocations: 10181)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 415)
  Rendered layouts/_sidenav.html.erb (Duration: 3.0ms | Allocations: 963)
  Rendered layout layouts/application.html.erb (Duration: 542.2ms | Allocations: 89503)
Completed 200 OK in 2613ms (Views: 157.3ms | ActiveRecord: 1485.7ms | Allocations: 137728)


Started GET "/categories" for 127.0.0.1 at 2023-12-15 12:37:25 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (307.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 316.3ms | Allocations: 2356)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 118)
  Rendered layouts/_sidenav.html.erb (Duration: 1.4ms | Allocations: 230)
  Rendered layout layouts/application.html.erb (Duration: 324.2ms | Allocations: 3328)
Completed 200 OK in 326ms (Views: 17.8ms | ActiveRecord: 307.3ms | Allocations: 3828)


Started GET "/categories/Burger" for 127.0.0.1 at 2023-12-15 12:37:28 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"Burger"}
  [1m[36mCategory Load (204.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (34.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='Burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (41.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='Burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (51.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='Burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (31.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (36.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='Burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mPost Load (31.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mRestaurant Load (33.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mUser Load (36.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 132)
  [1m[36mUser Load (67.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "albertoperez19"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "albertoperez19"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 134)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 131)
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 134)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 131)
  Rendered layouts/_comment.html.erb (Duration: 373.6ms | Allocations: 17767)
  Rendered layouts/_add_comment.html.erb (Duration: 1.1ms | Allocations: 197)
  Rendered categories/show.html.erb within layouts/application (Duration: 377.1ms | Allocations: 18481)
  Rendered layouts/_header.html.erb (Duration: 0.4ms | Allocations: 117)
  Rendered layouts/_sidenav.html.erb (Duration: 1.0ms | Allocations: 230)
  Rendered layout layouts/application.html.erb (Duration: 381.5ms | Allocations: 19435)
Completed 200 OK in 1269ms (Views: 154.8ms | ActiveRecord: 718.8ms | Allocations: 32591)


Started POST "/reactions" for 127.0.0.1 at 2023-12-15 12:37:31 +0100
Processing by ReactionsController#create as TURBO_STREAM
  Parameters: {"reaction"=>{"reaccion"=>"Like", "reactionable_id"=>"57", "reactionable_type"=>"Post"}}
Redirected to http://localhost:3000/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 514)


Started GET "/login" for 127.0.0.1 at 2023-12-15 12:37:31 +0100
Processing by LoginsController#new as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 2.6ms | Allocations: 2058)
  Rendered layouts/_header.html.erb (Duration: 0.2ms | Allocations: 118)
  Rendered layouts/_sidenav.html.erb (Duration: 0.4ms | Allocations: 231)
  Rendered layout layouts/application.html.erb (Duration: 4.4ms | Allocations: 3063)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms | Allocations: 3630)


Started GET "/categories/Burger" for 127.0.0.1 at 2023-12-15 12:37:50 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"Burger"}
  [1m[36mCategory Load (100.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (100.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='Burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (53.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='Burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (49.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='Burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (32.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (317.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='Burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mPost Load (45.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mRestaurant Load (32.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mUser Load (32.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 148)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 131)
  [1m[36mUser Load (32.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "albertoperez19"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "albertoperez19"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 134)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 131)
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 134)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 131)
  Rendered layouts/_comment.html.erb (Duration: 187.6ms | Allocations: 6229)
  Rendered layouts/_add_comment.html.erb (Duration: 0.4ms | Allocations: 46)
  Rendered categories/show.html.erb within layouts/application (Duration: 188.9ms | Allocations: 6416)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 117)
  Rendered layouts/_sidenav.html.erb (Duration: 1.5ms | Allocations: 230)
  Rendered layout layouts/application.html.erb (Duration: 196.4ms | Allocations: 7370)
Completed 200 OK in 930ms (Views: 55.4ms | ActiveRecord: 794.4ms | Allocations: 10193)


Started GET "/categories/chino" for 127.0.0.1 at 2023-12-15 12:39:50 +0100
  [1m[36mActiveRecord::SchemaMigration Load (32.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"chino"}
  [1m[36mCategory Load (41.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "chino"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
Completed 404 Not Found in 783ms (ActiveRecord: 395.2ms | Allocations: 14378)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::RecordNotFound (Couldn't find Category with 'nombre'=chino):
  
app/controllers/categories_controller.rb:8:in `show'
Started GET "/categories/Burger" for 127.0.0.1 at 2023-12-15 12:39:59 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"Burger"}
  [1m[36mCategory Load (307.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (31.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='Burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (42.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='Burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (50.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='Burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (30.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (29.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='Burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mPost Load (40.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mRestaurant Load (30.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mUser Load (272.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.5ms | Allocations: 552)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 132)
  [1m[36mUser Load (30.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "albertoperez19"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "albertoperez19"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 134)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 131)
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 134)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 131)
  Rendered layouts/_comment.html.erb (Duration: 755.2ms | Allocations: 31680)
  Rendered layouts/_add_comment.html.erb (Duration: 0.9ms | Allocations: 201)
  Rendered categories/show.html.erb within layouts/application (Duration: 758.2ms | Allocations: 32426)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 409)
  Rendered layouts/_sidenav.html.erb (Duration: 1.5ms | Allocations: 965)
  Rendered layout layouts/application.html.erb (Duration: 868.5ms | Allocations: 80280)
Completed 200 OK in 2070ms (Views: 379.1ms | ActiveRecord: 1454.0ms | Allocations: 103644)


Started POST "/reactions" for 127.0.0.1 at 2023-12-15 12:40:09 +0100
Processing by ReactionsController#create as TURBO_STREAM
  Parameters: {"reaction"=>{"reaccion"=>"Like", "reactionable_id"=>"57", "reactionable_type"=>"Post"}}
Redirected to http://localhost:3000/login
Completed 302 Found in 4ms (ActiveRecord: 0.0ms | Allocations: 1527)


Started GET "/login" for 127.0.0.1 at 2023-12-15 12:40:09 +0100
Processing by LoginsController#new as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 3.6ms | Allocations: 2040)
  Rendered layouts/_header.html.erb (Duration: 0.2ms | Allocations: 118)
  Rendered layouts/_sidenav.html.erb (Duration: 0.4ms | Allocations: 231)
  Rendered layout layouts/application.html.erb (Duration: 5.7ms | Allocations: 3045)
Completed 200 OK in 7ms (Views: 6.3ms | ActiveRecord: 0.0ms | Allocations: 3612)


