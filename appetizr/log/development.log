Started GET "/restaurants/1" for ::1 at 2023-11-19 12:33:49 +0100
  [1m[36mActiveRecord::SchemaMigration Load (44.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (44.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (44.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (43.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (46.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (45.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (46.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (46.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (49.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (56.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.1ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (49.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 396.2ms | Allocations: 65922)
  [1m[36mDish Load (43.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (46.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (51.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 4.8ms | Allocations: 882)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 424)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 426)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 423)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 432)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 427)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 426)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 423)
  Rendered layouts/_comment.html.erb (Duration: 135.0ms | Allocations: 11420)
  Rendered layouts/_add_comment.html.erb (Duration: 1.7ms | Allocations: 665)
  [1m[35m (46.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 869.2ms | Allocations: 91224)
  Rendered layouts/_header.html.erb (Duration: 10.3ms | Allocations: 1350)
  [1m[36mUser Load (46.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 381.1ms | Allocations: 16802)
  Rendered layout layouts/application.html.erb (Duration: 1333.5ms | Allocations: 128374)
Completed 200 OK in 3053ms (Views: 828.4ms | ActiveRecord: 1653.4ms | Allocations: 187172)


Started GET "/users/Mr.Dani" for ::1 at 2023-11-19 12:34:11 +0100
Processing by UsersController#show as */*
  Parameters: {"id"=>"Mr"}
  [1m[36mUser Load (50.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (48.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (48.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (45.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (47.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-19 11:34:12.038113')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (46.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-19 11:34:12.098695')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (49.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-19 11:34:12.158658')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (61.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (64.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (48.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 11:34:12.374832')[0m  [["reviewable_id", 8], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (46.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 8]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (49.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "8"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (45.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "8"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (50.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 11:34:12.659522')[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (48.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (46.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (47.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (50.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 11:34:12.864277')[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (49.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (51.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 11:34:12.976996')[0m  [["reviewable_id", 1], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (44.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 11:34:13.036271')[0m  [["reviewable_id", 2], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (44.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 11:34:13.082790')[0m  [["reviewable_id", 3], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (44.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (48.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 22.2ms | Allocations: 3747)
  Rendered layouts/_header.html.erb (Duration: 4.3ms | Allocations: 1053)
  [1m[36mCACHE User Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 26.7ms | Allocations: 4330)
  Rendered layout layouts/application.html.erb (Duration: 72.3ms | Allocations: 12821)
Completed 200 OK in 1541ms (Views: 73.4ms | ActiveRecord: 1269.0ms | Allocations: 28127)


Started GET "/users/Mr.Dani" for ::1 at 2023-11-19 12:34:39 +0100
Processing by UsersController#show as */*
  Parameters: {"id"=>"Mr"}
  [1m[36mUser Load (49.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (49.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (58.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (52.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (45.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-19 11:34:39.464187')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (45.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-19 11:34:39.518773')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (47.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-19 11:34:39.582424')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (58.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (47.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (47.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 11:34:39.759240')[0m  [["reviewable_id", 8], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (54.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 8]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (46.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "8"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (46.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "8"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (45.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 11:34:39.967144')[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (46.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (46.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (46.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (52.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 11:34:40.169427')[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (45.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (63.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 11:34:40.280909')[0m  [["reviewable_id", 1], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (44.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 11:34:40.345918')[0m  [["reviewable_id", 2], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (48.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 11:34:40.392755')[0m  [["reviewable_id", 3], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (44.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (46.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 11.8ms | Allocations: 2212)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1053)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.9ms | Allocations: 4326)
  Rendered layout layouts/application.html.erb (Duration: 48.8ms | Allocations: 11272)
Completed 200 OK in 1399ms (Views: 53.1ms | ActiveRecord: 1175.7ms | Allocations: 23840)


Started GET "/restaurants/1" for ::1 at 2023-11-19 12:36:32 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (63.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (69.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (55.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (47.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (50.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (51.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (46.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (43.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (44.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (49.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (52.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 84.1ms | Allocations: 2948)
  [1m[36mDish Load (53.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (46.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (48.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 7.8ms | Allocations: 859)
  Rendered layouts/_reaction.html.erb (Duration: 3.4ms | Allocations: 424)
  Rendered layouts/_reaction.html.erb (Duration: 11.0ms | Allocations: 426)
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 423)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 432)
  Rendered layouts/_reaction.html.erb (Duration: 2.2ms | Allocations: 427)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 426)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 423)
  Rendered layouts/_comment.html.erb (Duration: 164.4ms | Allocations: 11084)
  Rendered layouts/_add_comment.html.erb (Duration: 15.1ms | Allocations: 662)
  [1m[35m (46.2ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 593.6ms | Allocations: 23764)
  Rendered layouts/_header.html.erb (Duration: 10.5ms | Allocations: 1324)
  [1m[36mUser Load (50.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (49.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 279.3ms | Allocations: 13348)
  Rendered layout layouts/application.html.erb (Duration: 957.0ms | Allocations: 57307)
Completed 200 OK in 2578ms (Views: 425.2ms | ActiveRecord: 1838.4ms | Allocations: 83398)


Started GET "/restaurants/1/dishes/1" for ::1 at 2023-11-19 12:38:09 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"1", "id"=>"1"}
  [1m[36mDish Load (43.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 1], ["restaurant_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (45.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[36mReview Load (46.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 56.2ms | Allocations: 3890)
  Rendered dishes/show.html.erb within layouts/application (Duration: 112.9ms | Allocations: 5982)
  Rendered layout layouts/application.html.erb (Duration: 113.4ms | Allocations: 6074)
Completed 500 Internal Server Error in 212ms (ActiveRecord: 135.2ms | Allocations: 8125)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `locals' for #<ActionView::Base:0x00000000015a40>):
    17:       <% end %>
    18:       <div class="comment_actions_row">
    19:         <div class="comment_action_item">
    20:           <%= render "layouts/reaction", locals: {comment: comment, button: "Like", rcts_no: locals[:reactions][comment.id][:likes], user_reaction_id: locals[:user_reactions][comment.id][:reaction_id]} %>
    21:         </div>
    22:         <div class="comment_action_item">
    23:           <%= render "layouts/reaction", locals: {comment: comment, button: "Dislike", rcts_no: locals[:reactions][comment.id][:dislikes], user_reaction_id: locals[:user_reactions][comment.id][:reaction_id]} %>
  
app/views/layouts/_comment.html.erb:20
app/views/layouts/_comment.html.erb:2
app/views/dishes/show.html.erb:8
Started GET "/restaurants/1" for ::1 at 2023-11-19 12:39:48 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (47.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (49.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (46.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (49.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (51.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (56.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (46.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (51.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (56.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (58.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (48.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (45.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (48.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (49.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 66.7ms | Allocations: 2295)
  [1m[36mDish Load (44.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (46.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (45.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 6.1ms | Allocations: 605)
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 423)
  Rendered layouts/_reaction.html.erb (Duration: 6.6ms | Allocations: 426)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 423)
  Rendered layouts/_reaction.html.erb (Duration: 3.1ms | Allocations: 429)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 427)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 426)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 423)
  Rendered layouts/_comment.html.erb (Duration: 101.5ms | Allocations: 8399)
  Rendered layouts/_add_comment.html.erb (Duration: 1.1ms | Allocations: 516)
  [1m[35m (48.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 327.1ms | Allocations: 13938)
  Rendered layouts/_header.html.erb (Duration: 3.9ms | Allocations: 1064)
  [1m[36mUser Load (46.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 103.1ms | Allocations: 4599)
  Rendered layout layouts/application.html.erb (Duration: 445.0ms | Allocations: 23332)
Completed 200 OK in 1202ms (Views: 121.0ms | ActiveRecord: 978.3ms | Allocations: 29016)


Started GET "/restaurants/1/dishes/1" for ::1 at 2023-11-19 12:39:53 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"1", "id"=>"1"}
  [1m[36mDish Load (46.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 1], ["restaurant_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (45.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[36mReview Load (62.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 89.9ms | Allocations: 2468)
  Rendered dishes/show.html.erb within layouts/application (Duration: 148.1ms | Allocations: 3127)
  Rendered layout layouts/application.html.erb (Duration: 151.7ms | Allocations: 3219)
Completed 500 Internal Server Error in 211ms (ActiveRecord: 155.0ms | Allocations: 4058)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `locals' for #<ActionView::Base:0x00000000015dd8>):
    17:       <% end %>
    18:       <div class="comment_actions_row">
    19:         <div class="comment_action_item">
    20:           <%= render "layouts/reaction", locals: {comment: comment, button: "Like", rcts_no: locals[:reactions][comment.id][:likes], user_reaction_id: locals[:user_reactions][comment.id][:reaction_id]} %>
    21:         </div>
    22:         <div class="comment_action_item">
    23:           <%= render "layouts/reaction", locals: {comment: comment, button: "Dislike", rcts_no: locals[:reactions][comment.id][:dislikes], user_reaction_id: locals[:user_reactions][comment.id][:reaction_id]} %>
  
app/views/layouts/_comment.html.erb:20
app/views/layouts/_comment.html.erb:2
app/views/dishes/show.html.erb:8
Started GET "/restaurants/1/dishes/1" for ::1 at 2023-11-19 12:51:59 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"1", "id"=>"1"}
  [1m[36mDish Load (41.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 1], ["restaurant_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (43.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  Rendered dishes/show.html.erb within layouts/application (Duration: 171.4ms | Allocations: 9898)
  Rendered layout layouts/application.html.erb (Duration: 172.3ms | Allocations: 9991)
Completed 500 Internal Server Error in 1354ms (ActiveRecord: 466.7ms | Allocations: 19482)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `locals' for #<ActionView::Base:0x0000000001c930>):
    2:   <div class="title_container">
    3:     <div class="title">Restaurante <span class="title_key_word"><%= @dish.restaurant.nombre %></span></div>
    4:     <!-- Mostrar el botÃ³n de editar solo si el usuario es el propietario del restaurante -->
    5:     <% if session[:username].present? and user_is_owner?(locals[:restaurant].id) %>
    6:       <!-- Si el restaurante tiene su imported_id distinto de nil, significa que es un restaurante importado y no se puede editar -->
    7:       <% if locals[:restaurant].imported_id.nil? %>
    8:           <%= link_to edit_restaurant_dish_path(locals[:restaurant].id), style: "text-decoration: none" do %>
  
app/views/dishes/show.html.erb:5
Started GET "/restaurants/1/dishes/new" for ::1 at 2023-11-19 12:58:37 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"1"}
  [1m[36mRestaurant Load (52.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/new.html.erb within layouts/application (Duration: 22.8ms | Allocations: 1786)
  Rendered layouts/_header.html.erb (Duration: 15.6ms | Allocations: 1356)
  [1m[36mUser Load (49.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (52.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 351.7ms | Allocations: 13192)
  Rendered layout layouts/application.html.erb (Duration: 563.6ms | Allocations: 43379)
Completed 200 OK in 1612ms (Views: 471.7ms | ActiveRecord: 570.4ms | Allocations: 59261)


Started GET "/restaurants/1/dishes/new" for ::1 at 2023-11-19 12:59:44 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"1"}
  [1m[36mRestaurant Load (48.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 8.1ms | Allocations: 1548)
  Rendered dishes/new.html.erb within layouts/application (Duration: 12.8ms | Allocations: 1848)
  Rendered layout layouts/application.html.erb (Duration: 13.6ms | Allocations: 1941)
Completed 500 Internal Server Error in 576ms (ActiveRecord: 342.8ms | Allocations: 15223)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `dishes_path' for #<ActionView::Base:0x00000000029e50>):
    1: <%= form_with model: @dish, html: {multipart:true, remote: true} do |form| %>
    2:   <div class="categories_new_form_container">
    3:       <div class="categories_new_name_container">
    4:                 <div>
  
app/views/dishes/_form.html.erb:1
app/views/dishes/new.html.erb:6
Started GET "/users/Mr.Dani" for ::1 at 2023-11-19 13:13:46 +0100
Processing by UsersController#show as */*
  Parameters: {"id"=>"Mr"}
  [1m[36mUser Load (44.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (53.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (45.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (45.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (46.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-19 12:13:48.727013')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (46.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-19 12:13:48.777477')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (45.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-19 12:13:48.828818')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (48.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (51.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (46.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 12:13:49.134975')[0m  [["reviewable_id", 8], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (47.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 8]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (44.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "8"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (49.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "8"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (45.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 12:13:49.479952')[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (44.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (45.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (45.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (50.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 12:13:49.676522')[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (46.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (45.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 12:13:49.789669')[0m  [["reviewable_id", 1], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (45.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 12:13:49.839216')[0m  [["reviewable_id", 2], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (46.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 12:13:49.891954')[0m  [["reviewable_id", 3], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (50.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (47.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 23.5ms | Allocations: 3174)
  Rendered layouts/_header.html.erb (Duration: 10.2ms | Allocations: 1321)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 25.2ms | Allocations: 5089)
  Rendered layout layouts/application.html.erb (Duration: 129.8ms | Allocations: 28490)
Completed 200 OK in 3055ms (Views: 135.0ms | ActiveRecord: 1935.3ms | Allocations: 72588)


Started GET "/restaurants" for ::1 at 2023-11-19 13:13:53 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (52.4ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (46.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (45.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (43.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (43.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (49.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (49.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (47.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (48.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 309.4ms | Allocations: 14624)
  Rendered layouts/_header.html.erb (Duration: 10.3ms | Allocations: 1069)
  [1m[36mUser Load (47.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 127.2ms | Allocations: 4614)
  Rendered layout layouts/application.html.erb (Duration: 490.6ms | Allocations: 24254)
Completed 200 OK in 1031ms (Views: 226.1ms | ActiveRecord: 662.1ms | Allocations: 32988)


Started GET "/restaurants/1" for ::1 at 2023-11-19 13:13:58 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (86.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (67.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (68.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (124.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (70.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (67.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (45.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (155.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (48.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (113.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (188.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (71.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (61.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (246.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 275.2ms | Allocations: 2868)
  [1m[36mDish Load (116.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (46.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (46.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 2.4ms | Allocations: 861)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 426)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 428)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 425)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 434)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 429)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 428)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 425)
  Rendered layouts/_comment.html.erb (Duration: 204.9ms | Allocations: 10049)
  Rendered layouts/_add_comment.html.erb (Duration: 1.6ms | Allocations: 664)
  [1m[35m (46.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 721.5ms | Allocations: 17134)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1056)
  [1m[36mUser Load (83.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (120.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 222.9ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 955.1ms | Allocations: 26451)
Completed 200 OK in 2424ms (Views: 250.8ms | ActiveRecord: 2000.4ms | Allocations: 36535)


Started GET "/restaurants/1/dishes/new" for ::1 at 2023-11-19 13:14:03 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"1"}
  [1m[36mRestaurant Load (43.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 86.6ms | Allocations: 51610)
  Rendered dishes/new.html.erb within layouts/application (Duration: 87.5ms | Allocations: 51898)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1066)
  [1m[36mUser Load (44.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (47.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 102.7ms | Allocations: 4607)
  Rendered layout layouts/application.html.erb (Duration: 195.3ms | Allocations: 61305)
Completed 200 OK in 241ms (Views: 104.4ms | ActiveRecord: 135.0ms | Allocations: 62413)


Started GET "/restaurants/1/dishes/new" for ::1 at 2023-11-19 13:19:38 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"1"}
  [1m[36mRestaurant Load (44.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 5.7ms | Allocations: 2736)
  Rendered dishes/new.html.erb within layouts/application (Duration: 6.8ms | Allocations: 3035)
  Rendered layouts/_header.html.erb (Duration: 2.7ms | Allocations: 1324)
  [1m[36mUser Load (45.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 235.9ms | Allocations: 13379)
  Rendered layout layouts/application.html.erb (Duration: 272.4ms | Allocations: 36606)
Completed 200 OK in 704ms (Views: 87.2ms | ActiveRecord: 479.5ms | Allocations: 49922)


Started GET "/restaurants/7" for ::1 at 2023-11-19 13:19:52 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (43.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (43.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (46.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
Started GET "/restaurants/7" for ::1 at 2023-11-19 13:19:52 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mPost Load (57.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (47.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (45.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (44.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (47.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (45.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 51.5ms | Allocations: 2117)
  [1m[36mDish Load (44.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (47.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (54.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 58.2ms | Allocations: 1845)
  Rendered layouts/_add_comment.html.erb (Duration: 6.0ms | Allocations: 664)
  [1m[35m (45.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 267.9ms | Allocations: 8446)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1056)
  [1m[36mUser Load (51.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 109.9ms | Allocations: 6095)
  Rendered layout layouts/application.html.erb (Duration: 385.8ms | Allocations: 19321)
Completed 200 OK in 1253ms (Views: 53.9ms | ActiveRecord: 1131.7ms | Allocations: 34344)


  [1m[36mRestaurant Load (55.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (47.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (48.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (49.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (51.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (47.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (47.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (58.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (49.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (44.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (47.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (45.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 56.7ms | Allocations: 1490)
  [1m[36mDish Load (45.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (43.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (44.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 93.2ms | Allocations: 490)
  Rendered layouts/_add_comment.html.erb (Duration: 1.0ms | Allocations: 512)
  [1m[35m (47.1ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 350.1ms | Allocations: 3889)
  Rendered layouts/_header.html.erb (Duration: 5.8ms | Allocations: 1068)
  [1m[36mUser Load (43.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 192.5ms | Allocations: 4636)
  Rendered layout layouts/application.html.erb (Duration: 566.1ms | Allocations: 13326)
Completed 200 OK in 2274ms (Views: 252.1ms | ActiveRecord: 1346.5ms | Allocations: 45881)


Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 13:19:58 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.1ms | Allocations: 2111)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.4ms | Allocations: 2186)
  Rendered layouts/_header.html.erb (Duration: 2.9ms | Allocations: 1068)
  [1m[36mUser Load (43.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (47.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 101.1ms | Allocations: 4595)
  Rendered layout layouts/application.html.erb (Duration: 114.3ms | Allocations: 11584)
Completed 200 OK in 161ms (Views: 23.4ms | ActiveRecord: 135.5ms | Allocations: 12461)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:20:27 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que vas a probar", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 0.4ms | Allocations: 1062)
  Rendered dishes/new.html.erb within layouts/application (Duration: 0.7ms | Allocations: 1176)
  Rendered layout layouts/application.html.erb (Duration: 1.0ms | Allocations: 1268)
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms | Allocations: 3177)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `dishes_path' for #<ActionView::Base:0x00000000037ac8>):
    1: <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
    2: <%= form_with model: [@restaurant, @dish], html: {multipart:true, remote: true} do |form| %>
    3:   <div class="categories_new_form_container">
    4:       <div class="categories_new_name_container">
    5:                 <div>
  
app/views/dishes/_form.html.erb:2
app/views/dishes/new.html.erb:6
app/controllers/dishes_controller.rb:28:in `create'
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 13:21:13 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.2ms | Allocations: 2734)
  Rendered dishes/new.html.erb within layouts/application (Duration: 5.4ms | Allocations: 3029)
  Rendered layouts/_header.html.erb (Duration: 4.7ms | Allocations: 1324)
  [1m[36mUser Load (46.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (47.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 251.7ms | Allocations: 13395)
  Rendered layout layouts/application.html.erb (Duration: 287.7ms | Allocations: 36614)
Completed 200 OK in 713ms (Views: 106.3ms | ActiveRecord: 513.8ms | Allocations: 50043)


Started GET "/restaurants/7/" for ::1 at 2023-11-19 13:21:23 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (53.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (44.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (44.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (48.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (43.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (43.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (43.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (43.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 48.6ms | Allocations: 2096)
  [1m[36mDish Load (43.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (44.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (43.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 49.8ms | Allocations: 1709)
  Rendered layouts/_add_comment.html.erb (Duration: 1.6ms | Allocations: 664)
  [1m[35m (43.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 245.9ms | Allocations: 7962)
  Rendered layouts/_header.html.erb (Duration: 5.6ms | Allocations: 1060)
  [1m[36mUser Load (43.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 107.2ms | Allocations: 4583)
  Rendered layout layouts/application.html.erb (Duration: 373.6ms | Allocations: 17342)
Completed 200 OK in 1287ms (Views: 66.3ms | ActiveRecord: 1106.9ms | Allocations: 29810)


Started GET "/restaurants/7/" for ::1 at 2023-11-19 13:21:30 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (47.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (52.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (46.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (46.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (46.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (44.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (55.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (46.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 52.6ms | Allocations: 1490)
  [1m[36mDish Load (50.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (46.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (46.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 54.2ms | Allocations: 485)
  Rendered layouts/_add_comment.html.erb (Duration: 1.3ms | Allocations: 513)
  [1m[35m (47.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 266.7ms | Allocations: 3849)
  Rendered layouts/_header.html.erb (Duration: 6.2ms | Allocations: 1056)
  [1m[36mUser Load (43.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (49.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 157.0ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 455.1ms | Allocations: 13191)
Completed 200 OK in 1067ms (Views: 125.8ms | ActiveRecord: 894.4ms | Allocations: 18119)


Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 13:21:45 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.6ms | Allocations: 2099)
  Rendered dishes/new.html.erb within layouts/application (Duration: 5.0ms | Allocations: 2174)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1056)
  [1m[36mUser Load (43.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 94.5ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 113.4ms | Allocations: 11516)
Completed 200 OK in 163ms (Views: 28.3ms | ActiveRecord: 131.5ms | Allocations: 12396)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:00 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (46.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.6ms | Allocations: 2104)
  Rendered dishes/new.html.erb within layouts/application (Duration: 2.8ms | Allocations: 2218)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1056)
  [1m[36mUser Load (43.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 106.0ms | Allocations: 4588)
  Rendered layout layouts/application.html.erb (Duration: 115.1ms | Allocations: 11572)
Completed 200 OK in 168ms (Views: 26.5ms | ActiveRecord: 135.4ms | Allocations: 13695)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:03 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (46.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.3ms | Allocations: 2096)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.5ms | Allocations: 2167)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1060)
  [1m[36mUser Load (45.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 99.3ms | Allocations: 4587)
  Rendered layout layouts/application.html.erb (Duration: 109.4ms | Allocations: 11537)
Completed 200 OK in 159ms (Views: 18.5ms | ActiveRecord: 137.5ms | Allocations: 13031)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:04 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.7ms | Allocations: 2090)
  Rendered dishes/new.html.erb within layouts/application (Duration: 2.9ms | Allocations: 2161)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1056)
  [1m[36mUser Load (44.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 95.5ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 103.9ms | Allocations: 11508)
Completed 200 OK in 153ms (Views: 16.2ms | ActiveRecord: 131.9ms | Allocations: 13008)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:05 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.7ms | Allocations: 2090)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.0ms | Allocations: 2161)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1056)
  [1m[36mUser Load (44.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 97.2ms | Allocations: 4577)
  Rendered layout layouts/application.html.erb (Duration: 107.5ms | Allocations: 11504)
Completed 200 OK in 157ms (Views: 19.5ms | ActiveRecord: 134.2ms | Allocations: 13005)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:05 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.1ms | Allocations: 2090)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.5ms | Allocations: 2161)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1056)
  [1m[36mUser Load (46.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 100.3ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 112.7ms | Allocations: 11502)
Completed 200 OK in 161ms (Views: 21.2ms | ActiveRecord: 136.6ms | Allocations: 12995)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:06 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.3ms | Allocations: 2090)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.5ms | Allocations: 2161)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1056)
  [1m[36mUser Load (43.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 96.8ms | Allocations: 4595)
  Rendered layout layouts/application.html.erb (Duration: 107.4ms | Allocations: 11522)
Completed 200 OK in 156ms (Views: 21.0ms | ActiveRecord: 131.2ms | Allocations: 13029)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:07 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.6ms | Allocations: 2096)
  Rendered dishes/new.html.erb within layouts/application (Duration: 2.9ms | Allocations: 2167)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1060)
  [1m[36mUser Load (43.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 96.6ms | Allocations: 4587)
  Rendered layout layouts/application.html.erb (Duration: 105.4ms | Allocations: 11537)
Completed 200 OK in 153ms (Views: 16.8ms | ActiveRecord: 132.9ms | Allocations: 13052)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:07 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (46.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.8ms | Allocations: 2090)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.1ms | Allocations: 2161)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1056)
  [1m[36mUser Load (47.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 101.4ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 110.0ms | Allocations: 11503)
Completed 200 OK in 160ms (Views: 17.0ms | ActiveRecord: 140.0ms | Allocations: 13018)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:20 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (47.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.1ms | Allocations: 2090)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.5ms | Allocations: 2161)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1057)
  [1m[36mUser Load (43.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 96.1ms | Allocations: 4576)
  Rendered layout layouts/application.html.erb (Duration: 107.2ms | Allocations: 11504)
Completed 200 OK in 159ms (Views: 20.7ms | ActiveRecord: 134.7ms | Allocations: 12998)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:20 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.3ms | Allocations: 2090)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.6ms | Allocations: 2161)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1056)
  [1m[36mUser Load (45.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 98.1ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 110.0ms | Allocations: 11502)
Completed 200 OK in 157ms (Views: 22.0ms | ActiveRecord: 131.9ms | Allocations: 12987)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:20 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.5ms | Allocations: 2090)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.8ms | Allocations: 2161)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1056)
  [1m[36mUser Load (44.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 99.2ms | Allocations: 4594)
  Rendered layout layouts/application.html.erb (Duration: 110.3ms | Allocations: 11521)
Completed 200 OK in 158ms (Views: 22.9ms | ActiveRecord: 131.8ms | Allocations: 13018)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:21 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.0ms | Allocations: 2096)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.3ms | Allocations: 2167)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1060)
  [1m[36mUser Load (46.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 96.4ms | Allocations: 4588)
  Rendered layout layouts/application.html.erb (Duration: 108.3ms | Allocations: 11538)
Completed 200 OK in 155ms (Views: 19.8ms | ActiveRecord: 132.5ms | Allocations: 13036)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:21 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.5ms | Allocations: 2091)
  Rendered dishes/new.html.erb within layouts/application (Duration: 2.7ms | Allocations: 2162)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1057)
  [1m[36mUser Load (43.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 96.7ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 104.8ms | Allocations: 11505)
Completed 200 OK in 151ms (Views: 16.9ms | ActiveRecord: 132.1ms | Allocations: 13005)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:23 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.7ms | Allocations: 2090)
  Rendered dishes/new.html.erb within layouts/application (Duration: 2.9ms | Allocations: 2161)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1057)
  [1m[36mUser Load (60.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (47.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 116.6ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 125.2ms | Allocations: 11503)
Completed 200 OK in 173ms (Views: 18.3ms | ActiveRecord: 151.5ms | Allocations: 13009)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:23 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (46.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.0ms | Allocations: 2090)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.2ms | Allocations: 2161)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1056)
  [1m[36mUser Load (43.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 95.5ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 103.9ms | Allocations: 11502)
Completed 200 OK in 154ms (Views: 16.7ms | ActiveRecord: 134.3ms | Allocations: 12971)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:24 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.0ms | Allocations: 2090)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.3ms | Allocations: 2161)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1056)
  [1m[36mUser Load (46.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 100.8ms | Allocations: 4594)
  Rendered layout layouts/application.html.erb (Duration: 110.8ms | Allocations: 11521)
Completed 200 OK in 158ms (Views: 21.0ms | ActiveRecord: 134.3ms | Allocations: 12998)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:38 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (47.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.6ms | Allocations: 2096)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.1ms | Allocations: 2167)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1060)
  [1m[36mUser Load (43.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 95.6ms | Allocations: 4588)
  Rendered layout layouts/application.html.erb (Duration: 106.9ms | Allocations: 11538)
Completed 200 OK in 161ms (Views: 21.1ms | ActiveRecord: 134.2ms | Allocations: 13047)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:39 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.4ms | Allocations: 2091)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.7ms | Allocations: 2162)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1056)
  [1m[36mUser Load (43.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 95.6ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 105.5ms | Allocations: 11504)
Completed 200 OK in 153ms (Views: 19.7ms | ActiveRecord: 130.0ms | Allocations: 13009)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:39 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (46.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.9ms | Allocations: 2090)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.2ms | Allocations: 2161)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1057)
  [1m[36mUser Load (50.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (42.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 101.3ms | Allocations: 4576)
  Rendered layout layouts/application.html.erb (Duration: 112.0ms | Allocations: 11504)
Completed 200 OK in 162ms (Views: 19.6ms | ActiveRecord: 139.1ms | Allocations: 13041)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:39 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (46.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.8ms | Allocations: 2090)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.3ms | Allocations: 2161)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1056)
  [1m[36mUser Load (43.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 97.0ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 111.1ms | Allocations: 11502)
Completed 200 OK in 162ms (Views: 24.7ms | ActiveRecord: 133.5ms | Allocations: 12975)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:39 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"Es el mejor plato que probarÃ¡s", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.7ms | Allocations: 2090)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.0ms | Allocations: 2161)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1056)
  [1m[36mUser Load (42.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 97.1ms | Allocations: 4594)
  Rendered layout layouts/application.html.erb (Duration: 105.5ms | Allocations: 11521)
Completed 200 OK in 153ms (Views: 19.5ms | ActiveRecord: 130.4ms | Allocations: 13013)


Started GET "/restaurants/7/" for ::1 at 2023-11-19 13:22:44 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (47.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (44.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (44.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (44.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (45.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (47.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (43.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (44.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 48.0ms | Allocations: 1502)
  [1m[36mDish Load (43.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (46.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (43.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 45.2ms | Allocations: 485)
  Rendered layouts/_add_comment.html.erb (Duration: 1.4ms | Allocations: 518)
  [1m[35m (44.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 233.9ms | Allocations: 3866)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1060)
  [1m[36mUser Load (44.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 102.2ms | Allocations: 4588)
  Rendered layout layouts/application.html.erb (Duration: 344.3ms | Allocations: 13238)
Completed 200 OK in 900ms (Views: 33.7ms | ActiveRecord: 849.5ms | Allocations: 18178)


Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 13:22:48 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.4ms | Allocations: 2098)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.6ms | Allocations: 2173)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1056)
  [1m[36mUser Load (43.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (47.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 97.8ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 106.7ms | Allocations: 11514)
Completed 200 OK in 153ms (Views: 16.9ms | ActiveRecord: 134.2ms | Allocations: 12388)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:53 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"", "descripcion"=>"", "precio"=>""}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.1ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.3ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1056)
  [1m[36mUser Load (44.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 96.8ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 105.9ms | Allocations: 11501)
Completed 200 OK in 155ms (Views: 18.3ms | ActiveRecord: 131.9ms | Allocations: 12989)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:54 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"", "descripcion"=>"", "precio"=>""}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.6ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.9ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1056)
  [1m[36mUser Load (50.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 106.1ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 117.5ms | Allocations: 11500)
Completed 200 OK in 166ms (Views: 21.3ms | ActiveRecord: 141.7ms | Allocations: 13012)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:54 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"", "descripcion"=>"", "precio"=>""}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.6ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 2.8ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 2.2ms | Allocations: 1060)
  [1m[36mUser Load (44.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 97.3ms | Allocations: 4600)
  Rendered layout layouts/application.html.erb (Duration: 108.8ms | Allocations: 11540)
Completed 200 OK in 157ms (Views: 20.9ms | ActiveRecord: 133.1ms | Allocations: 13042)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:54 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"", "descripcion"=>"", "precio"=>""}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.6ms | Allocations: 2094)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.8ms | Allocations: 2165)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1060)
  [1m[36mUser Load (43.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 95.6ms | Allocations: 4588)
  Rendered layout layouts/application.html.erb (Duration: 105.6ms | Allocations: 11533)
Completed 200 OK in 153ms (Views: 19.2ms | ActiveRecord: 130.9ms | Allocations: 13026)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:22:54 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"", "descripcion"=>"", "precio"=>""}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.5ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.8ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1056)
  [1m[36mUser Load (43.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 97.8ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 110.2ms | Allocations: 11500)
Completed 200 OK in 157ms (Views: 21.3ms | ActiveRecord: 133.4ms | Allocations: 13001)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:27:53 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"", "descripcion"=>"", "precio"=>""}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 5.4ms | Allocations: 2089)
  Rendered dishes/new.html.erb within layouts/application (Duration: 5.8ms | Allocations: 2160)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1056)
  [1m[36mUser Load (43.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 98.0ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 110.5ms | Allocations: 11501)
Completed 200 OK in 164ms (Views: 23.3ms | ActiveRecord: 132.7ms | Allocations: 13017)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:27:54 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"", "descripcion"=>"", "precio"=>""}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.1ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.4ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1056)
  [1m[36mUser Load (42.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 96.0ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 108.3ms | Allocations: 11500)
Completed 200 OK in 157ms (Views: 22.7ms | ActiveRecord: 131.3ms | Allocations: 12992)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:27:54 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"", "descripcion"=>"", "precio"=>""}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 7.8ms | Allocations: 2089)
  Rendered dishes/new.html.erb within layouts/application (Duration: 8.1ms | Allocations: 2160)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1060)
  [1m[36mUser Load (51.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 103.8ms | Allocations: 4601)
  Rendered layout layouts/application.html.erb (Duration: 118.3ms | Allocations: 11545)
Completed 200 OK in 165ms (Views: 23.7ms | ActiveRecord: 138.5ms | Allocations: 13062)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:27:54 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"", "descripcion"=>"", "precio"=>""}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (47.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.8ms | Allocations: 2093)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.1ms | Allocations: 2164)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1060)
  [1m[36mUser Load (42.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (47.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 97.1ms | Allocations: 4588)
  Rendered layout layouts/application.html.erb (Duration: 105.2ms | Allocations: 11535)
Completed 200 OK in 157ms (Views: 15.4ms | ActiveRecord: 138.2ms | Allocations: 13046)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:27:55 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"", "descripcion"=>"", "precio"=>""}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.4ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.8ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1056)
  [1m[36mUser Load (43.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 95.5ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 106.8ms | Allocations: 11500)
Completed 200 OK in 159ms (Views: 20.1ms | ActiveRecord: 132.9ms | Allocations: 13003)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 13:28:04 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"", "descripcion"=>"", "precio"=>""}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.2ms | Allocations: 2089)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.4ms | Allocations: 2160)
  Rendered layouts/_header.html.erb (Duration: 3.6ms | Allocations: 1056)
  [1m[36mUser Load (45.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 98.2ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 113.1ms | Allocations: 11501)
Completed 200 OK in 163ms (Views: 23.1ms | ActiveRecord: 135.4ms | Allocations: 12999)


Started GET "/restaurants/new" for ::1 at 2023-11-19 13:28:26 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (87.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 177.0ms | Allocations: 18334)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 178.7ms | Allocations: 18581)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1056)
  [1m[36mUser Load (43.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 99.5ms | Allocations: 4586)
  Rendered layout layouts/application.html.erb (Duration: 284.3ms | Allocations: 27913)
Completed 200 OK in 286ms (Views: 64.3ms | ActiveRecord: 220.8ms | Allocations: 28249)


Started POST "/restaurants" for ::1 at 2023-11-19 13:28:32 +0100
Processing by RestaurantsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "restaurant"=>{"nombre"=>"", "telefono"=>"", "direccion"=>"", "horario"=>"", "categoria"=>""}, "button"=>""}
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (43.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/restaurants_controller.rb:43:in `create'
  [1m[36mRestaurant Create (93.8ms)[0m  [1m[32mINSERT INTO "restaurants" ("categoria", "nombre", "ruta_img_perfil", "ruta_img_fondo", "direccion", "telefono", "horario", "imported_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["categoria", ""], ["nombre", ""], ["ruta_img_perfil", nil], ["ruta_img_fondo", nil], ["direccion", ""], ["telefono", ""], ["horario", ""], ["imported_id", nil]]
  â†³ app/controllers/restaurants_controller.rb:43:in `create'
  [1m[36mTRANSACTION (43.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/restaurants_controller.rb:43:in `create'
Completed 500 Internal Server Error in 142ms (ActiveRecord: 180.1ms | Allocations: 4635)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  insert or update on table "restaurants" violates foreign key constraint "fk_rails_933d904194"
DETAIL:  Key (categoria)=() is not present in table "categories".
):
  
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 13:28:45 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.1ms | Allocations: 2100)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.5ms | Allocations: 2179)
  Rendered layouts/_header.html.erb (Duration: 2.3ms | Allocations: 1060)
  [1m[36mUser Load (44.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 98.9ms | Allocations: 4600)
  Rendered layout layouts/application.html.erb (Duration: 109.5ms | Allocations: 11562)
Completed 200 OK in 158ms (Views: 21.2ms | ActiveRecord: 134.3ms | Allocations: 12468)


Started GET "/restaurants/new" for ::1 at 2023-11-19 13:31:41 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (61.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 141.7ms | Allocations: 6259)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 142.7ms | Allocations: 6530)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1316)
  [1m[36mUser Load (46.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (47.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 225.3ms | Allocations: 13450)
  Rendered layout layouts/application.html.erb (Duration: 386.0ms | Allocations: 40102)
Completed 200 OK in 683ms (Views: 72.7ms | ActiveRecord: 520.3ms | Allocations: 48576)


Started POST "/restaurants" for ::1 at 2023-11-19 13:31:46 +0100
Processing by RestaurantsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "restaurant"=>{"nombre"=>"", "telefono"=>"", "direccion"=>"", "horario"=>"", "categoria"=>""}, "button"=>""}
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (43.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/restaurants_controller.rb:43:in `create'
  [1m[36mRestaurant Create (89.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("categoria", "nombre", "ruta_img_perfil", "ruta_img_fondo", "direccion", "telefono", "horario", "imported_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["categoria", ""], ["nombre", ""], ["ruta_img_perfil", nil], ["ruta_img_fondo", nil], ["direccion", ""], ["telefono", ""], ["horario", ""], ["imported_id", nil]]
  â†³ app/controllers/restaurants_controller.rb:43:in `create'
  [1m[36mTRANSACTION (42.8ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/restaurants_controller.rb:43:in `create'
Completed 500 Internal Server Error in 137ms (ActiveRecord: 175.5ms | Allocations: 3520)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  insert or update on table "restaurants" violates foreign key constraint "fk_rails_933d904194"
DETAIL:  Key (categoria)=() is not present in table "categories".
):
  
Started GET "/restaurants/nwe" for ::1 at 2023-11-19 13:32:15 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"nwe"}
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
Completed 404 Not Found in 48ms (ActiveRecord: 43.6ms | Allocations: 1393)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::RecordNotFound (Couldn't find Restaurant with 'id'=nwe):
  
app/controllers/restaurants_controller.rb:22:in `show'
Started GET "/restaurants/new" for ::1 at 2023-11-19 13:32:19 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (88.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 95.2ms | Allocations: 2999)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 95.5ms | Allocations: 3066)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1060)
  [1m[36mUser Load (43.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 94.2ms | Allocations: 4600)
  Rendered layout layouts/application.html.erb (Duration: 195.1ms | Allocations: 12428)
Completed 200 OK in 196ms (Views: 19.7ms | ActiveRecord: 176.2ms | Allocations: 12692)


Started GET "/restaurants/new" for ::1 at 2023-11-19 13:33:39 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (47.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 130.2ms | Allocations: 6256)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 133.0ms | Allocations: 6576)
  Rendered layouts/_header.html.erb (Duration: 5.8ms | Allocations: 1313)
  [1m[36mUser Load (47.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 261.6ms | Allocations: 13487)
  Rendered layout layouts/application.html.erb (Duration: 473.3ms | Allocations: 40202)
Completed 200 OK in 717ms (Views: 201.1ms | ActiveRecord: 419.9ms | Allocations: 48673)


Started GET "/restaurants/new" for ::1 at 2023-11-19 13:34:04 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (47.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 117.0ms | Allocations: 6242)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 118.7ms | Allocations: 6561)
  Rendered layouts/_header.html.erb (Duration: 3.1ms | Allocations: 1307)
  [1m[36mUser Load (45.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 225.8ms | Allocations: 13489)
  Rendered layout layouts/application.html.erb (Duration: 380.8ms | Allocations: 39939)
Completed 200 OK in 596ms (Views: 105.2ms | ActiveRecord: 418.8ms | Allocations: 48306)


Started GET "/restaurants/new" for ::1 at 2023-11-19 13:34:35 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (61.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 116.9ms | Allocations: 6272)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 117.8ms | Allocations: 6595)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1311)
  [1m[36mUser Load (56.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 241.4ms | Allocations: 13501)
  Rendered layout layouts/application.html.erb (Duration: 380.1ms | Allocations: 40094)
Completed 200 OK in 598ms (Views: 69.4ms | ActiveRecord: 461.4ms | Allocations: 48494)


Started GET "/restaurants/new" for ::1 at 2023-11-19 13:35:33 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (45.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 166.6ms | Allocations: 6252)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 173.9ms | Allocations: 6575)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1319)
  [1m[36mUser Load (42.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 203.9ms | Allocations: 13536)
  Rendered layout layouts/application.html.erb (Duration: 407.0ms | Allocations: 40282)
Completed 200 OK in 647ms (Views: 147.4ms | ActiveRecord: 414.7ms | Allocations: 48700)


Started GET "/restaurants/new" for ::1 at 2023-11-19 13:36:15 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (45.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 110.0ms | Allocations: 6251)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 111.5ms | Allocations: 6570)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1307)
  [1m[36mUser Load (44.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 206.4ms | Allocations: 13391)
  Rendered layout layouts/application.html.erb (Duration: 338.5ms | Allocations: 39862)
Completed 200 OK in 545ms (Views: 70.0ms | ActiveRecord: 406.6ms | Allocations: 48209)


Started GET "/restaurants/new" for ::1 at 2023-11-19 13:36:23 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (45.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 106.7ms | Allocations: 6240)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 107.9ms | Allocations: 6563)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1319)
  [1m[36mUser Load (44.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 208.5ms | Allocations: 13517)
  Rendered layout layouts/application.html.erb (Duration: 336.3ms | Allocations: 40248)
Completed 200 OK in 558ms (Views: 68.4ms | ActiveRecord: 409.0ms | Allocations: 48704)


Started GET "/restaurants/new" for ::1 at 2023-11-19 13:36:31 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (43.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 101.0ms | Allocations: 6247)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 104.5ms | Allocations: 6568)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1319)
  [1m[36mUser Load (43.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (52.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 213.6ms | Allocations: 13499)
  Rendered layout layouts/application.html.erb (Duration: 340.4ms | Allocations: 40235)
Completed 200 OK in 570ms (Views: 69.7ms | ActiveRecord: 430.7ms | Allocations: 48620)


Started GET "/restaurants/new" for ::1 at 2023-11-19 13:37:36 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (44.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 121.5ms | Allocations: 6264)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 124.6ms | Allocations: 6583)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1319)
  [1m[36mUser Load (44.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (49.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 214.7ms | Allocations: 13479)
  Rendered layout layouts/application.html.erb (Duration: 361.5ms | Allocations: 40257)
Completed 200 OK in 572ms (Views: 94.5ms | ActiveRecord: 405.9ms | Allocations: 48593)


Started POST "/restaurants" for ::1 at 2023-11-19 16:09:08 +0100
Processing by RestaurantsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "restaurant"=>{"nombre"=>"", "telefono"=>"", "direccion"=>"", "horario"=>"", "categoria"=>""}, "button"=>""}
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (44.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/restaurants_controller.rb:43:in `create'
  [1m[36mRestaurant Create (146.5ms)[0m  [1m[32mINSERT INTO "restaurants" ("categoria", "nombre", "ruta_img_perfil", "ruta_img_fondo", "direccion", "telefono", "horario", "imported_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["categoria", ""], ["nombre", ""], ["ruta_img_perfil", nil], ["ruta_img_fondo", nil], ["direccion", ""], ["telefono", ""], ["horario", ""], ["imported_id", nil]]
  â†³ app/controllers/restaurants_controller.rb:43:in `create'
  [1m[36mTRANSACTION (45.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/restaurants_controller.rb:43:in `create'
Completed 500 Internal Server Error in 2012ms (ActiveRecord: 599.4ms | Allocations: 13698)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  insert or update on table "restaurants" violates foreign key constraint "fk_rails_933d904194"
DETAIL:  Key (categoria)=() is not present in table "categories".
):
  
Started GET "/restaurants/nwe" for ::1 at 2023-11-19 16:09:32 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"nwe"}
  [1m[36mRestaurant Load (45.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
Completed 404 Not Found in 187ms (ActiveRecord: 137.4ms | Allocations: 1514)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::RecordNotFound (Couldn't find Restaurant with 'id'=nwe):
  
app/controllers/restaurants_controller.rb:22:in `show'
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:09:44 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 20.5ms | Allocations: 2728)
  Rendered dishes/new.html.erb within layouts/application (Duration: 22.5ms | Allocations: 3022)
  Rendered layouts/_header.html.erb (Duration: 4.5ms | Allocations: 1326)
  [1m[36mUser Load (43.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 221.1ms | Allocations: 13312)
  Rendered layout layouts/application.html.erb (Duration: 308.2ms | Allocations: 36530)
Completed 200 OK in 528ms (Views: 225.0ms | ActiveRecord: 277.2ms | Allocations: 41853)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:09:52 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"", "descripcion"=>"", "precio"=>""}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (48.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 5.7ms | Allocations: 2102)
  Rendered dishes/new.html.erb within layouts/application (Duration: 6.2ms | Allocations: 2216)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1056)
  [1m[36mUser Load (43.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 100.9ms | Allocations: 4576)
  Rendered layout layouts/application.html.erb (Duration: 115.8ms | Allocations: 11562)
Completed 200 OK in 169ms (Views: 28.7ms | ActiveRecord: 136.1ms | Allocations: 13684)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:09:53 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"", "descripcion"=>"", "precio"=>""}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (50.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 6.9ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 8.2ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1056)
  [1m[36mUser Load (46.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 106.8ms | Allocations: 4576)
  Rendered layout layouts/application.html.erb (Duration: 121.9ms | Allocations: 11501)
Completed 200 OK in 177ms (Views: 33.0ms | ActiveRecord: 140.0ms | Allocations: 13016)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:09:53 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"", "descripcion"=>"", "precio"=>""}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (49.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.3ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.6ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1056)
  [1m[36mUser Load (44.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 100.5ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 114.6ms | Allocations: 11500)
Completed 200 OK in 171ms (Views: 25.4ms | ActiveRecord: 139.3ms | Allocations: 12988)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:22 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (54.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 6.4ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 7.8ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 7.5ms | Allocations: 1056)
  [1m[36mUser Load (50.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (54.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 130.0ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 159.0ms | Allocations: 11500)
Completed 200 OK in 219ms (Views: 55.7ms | ActiveRecord: 158.2ms | Allocations: 13006)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:22 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (48.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 11.6ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 12.3ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1056)
  [1m[36mUser Load (44.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (49.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 140.3ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 160.6ms | Allocations: 11500)
Completed 200 OK in 256ms (Views: 102.2ms | ActiveRecord: 141.7ms | Allocations: 12999)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:22 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (48.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 8.8ms | Allocations: 2095)
  Rendered dishes/new.html.erb within layouts/application (Duration: 12.6ms | Allocations: 2166)
  Rendered layouts/_header.html.erb (Duration: 2.2ms | Allocations: 1060)
  [1m[36mUser Load (43.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 103.8ms | Allocations: 4587)
  Rendered layout layouts/application.html.erb (Duration: 130.3ms | Allocations: 11536)
Completed 200 OK in 193ms (Views: 43.8ms | ActiveRecord: 137.0ms | Allocations: 13040)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:23 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (49.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.6ms | Allocations: 2094)
  Rendered dishes/new.html.erb within layouts/application (Duration: 5.0ms | Allocations: 2165)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1060)
  [1m[36mUser Load (44.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (47.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 106.0ms | Allocations: 4587)
  Rendered layout layouts/application.html.erb (Duration: 119.2ms | Allocations: 11535)
Completed 200 OK in 177ms (Views: 31.5ms | ActiveRecord: 140.7ms | Allocations: 13025)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:24 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 6.1ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 6.9ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 7.7ms | Allocations: 1057)
  [1m[36mUser Load (46.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 116.2ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 148.0ms | Allocations: 11501)
Completed 200 OK in 202ms (Views: 57.9ms | ActiveRecord: 136.0ms | Allocations: 13013)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:25 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 11.9ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 15.8ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 2.7ms | Allocations: 1056)
  [1m[36mUser Load (44.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 96.9ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 127.7ms | Allocations: 11500)
Completed 200 OK in 187ms (Views: 40.5ms | ActiveRecord: 133.4ms | Allocations: 12998)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:26 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (47.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 8.4ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 9.8ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 5.3ms | Allocations: 1056)
  [1m[36mUser Load (47.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (57.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 126.2ms | Allocations: 4576)
  Rendered layout layouts/application.html.erb (Duration: 164.8ms | Allocations: 11501)
Completed 200 OK in 218ms (Views: 62.0ms | ActiveRecord: 151.4ms | Allocations: 13010)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:26 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.7ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.1ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 4.9ms | Allocations: 1056)
  [1m[36mUser Load (45.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (47.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 114.6ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 136.4ms | Allocations: 11500)
Completed 200 OK in 191ms (Views: 44.8ms | ActiveRecord: 138.2ms | Allocations: 13013)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:26 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (63.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 35.0ms | Allocations: 2108)
  Rendered dishes/new.html.erb within layouts/application (Duration: 38.0ms | Allocations: 2179)
  Rendered layouts/_header.html.erb (Duration: 3.3ms | Allocations: 1068)
  [1m[36mUser Load (43.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 108.7ms | Allocations: 4611)
  Rendered layout layouts/application.html.erb (Duration: 179.3ms | Allocations: 11621)
Completed 200 OK in 255ms (Views: 91.6ms | ActiveRecord: 152.9ms | Allocations: 13098)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:27 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (53.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 6.1ms | Allocations: 2097)
  Rendered dishes/new.html.erb within layouts/application (Duration: 6.5ms | Allocations: 2168)
  Rendered layouts/_header.html.erb (Duration: 4.6ms | Allocations: 1068)
  [1m[36mUser Load (49.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 124.5ms | Allocations: 4609)
  Rendered layout layouts/application.html.erb (Duration: 144.3ms | Allocations: 11607)
Completed 200 OK in 209ms (Views: 51.8ms | ActiveRecord: 147.2ms | Allocations: 13117)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:27 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 10.7ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 12.1ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 3.3ms | Allocations: 1056)
  [1m[36mUser Load (49.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 119.1ms | Allocations: 4576)
  Rendered layout layouts/application.html.erb (Duration: 157.7ms | Allocations: 11501)
Completed 200 OK in 211ms (Views: 63.0ms | ActiveRecord: 139.3ms | Allocations: 12984)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:28 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (58.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 23.1ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 24.5ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1056)
  [1m[36mUser Load (44.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 101.7ms | Allocations: 4576)
  Rendered layout layouts/application.html.erb (Duration: 140.6ms | Allocations: 11501)
Completed 200 OK in 224ms (Views: 52.8ms | ActiveRecord: 148.0ms | Allocations: 12993)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:28 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.7ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 5.2ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1056)
  [1m[36mUser Load (46.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 122.0ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 138.7ms | Allocations: 11500)
Completed 200 OK in 198ms (Views: 48.0ms | ActiveRecord: 137.0ms | Allocations: 12992)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:29 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (51.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 27.8ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 29.2ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 6.5ms | Allocations: 1056)
  [1m[36mUser Load (43.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 106.9ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 159.2ms | Allocations: 11500)
Completed 200 OK in 233ms (Views: 78.2ms | ActiveRecord: 137.8ms | Allocations: 12989)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:29 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (47.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 32.7ms | Allocations: 2095)
  Rendered dishes/new.html.erb within layouts/application (Duration: 33.8ms | Allocations: 2166)
  Rendered layouts/_header.html.erb (Duration: 8.3ms | Allocations: 1068)
  [1m[36mUser Load (43.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 113.6ms | Allocations: 4611)
  Rendered layout layouts/application.html.erb (Duration: 176.1ms | Allocations: 11614)
Completed 200 OK in 237ms (Views: 89.9ms | ActiveRecord: 134.6ms | Allocations: 13110)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:29 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 8.6ms | Allocations: 2101)
  Rendered dishes/new.html.erb within layouts/application (Duration: 9.0ms | Allocations: 2172)
  Rendered layouts/_header.html.erb (Duration: 2.3ms | Allocations: 1068)
  [1m[36mUser Load (43.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (50.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 121.5ms | Allocations: 4611)
  Rendered layout layouts/application.html.erb (Duration: 141.8ms | Allocations: 11614)
Completed 200 OK in 200ms (Views: 49.1ms | ActiveRecord: 138.8ms | Allocations: 13122)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:30 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.3ms | Allocations: 2094)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.7ms | Allocations: 2165)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1056)
  [1m[36mUser Load (43.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 114.4ms | Allocations: 4576)
  Rendered layout layouts/application.html.erb (Duration: 125.8ms | Allocations: 11507)
Completed 200 OK in 181ms (Views: 38.4ms | ActiveRecord: 132.0ms | Allocations: 12991)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:30 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (49.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.3ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.7ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 6.0ms | Allocations: 1056)
  [1m[36mUser Load (47.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (47.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 140.2ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 163.4ms | Allocations: 11500)
Completed 200 OK in 224ms (Views: 72.2ms | ActiveRecord: 143.9ms | Allocations: 13007)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:30 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.3ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.6ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1056)
  [1m[36mUser Load (45.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 114.5ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 125.5ms | Allocations: 11500)
Completed 200 OK in 178ms (Views: 36.7ms | ActiveRecord: 133.3ms | Allocations: 12983)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:31 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (49.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 25.4ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 26.9ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 4.2ms | Allocations: 1056)
  [1m[36mUser Load (46.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 111.9ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 160.3ms | Allocations: 11501)
Completed 200 OK in 229ms (Views: 71.9ms | ActiveRecord: 140.2ms | Allocations: 13004)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:31 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 9.9ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 12.0ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 18.5ms | Allocations: 1069)
  [1m[36mUser Load (44.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 136.4ms | Allocations: 4611)
  Rendered layout layouts/application.html.erb (Duration: 218.7ms | Allocations: 11588)
Completed 200 OK in 271ms (Views: 130.5ms | ActiveRecord: 133.7ms | Allocations: 13093)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:31 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (47.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 11.8ms | Allocations: 2098)
  Rendered dishes/new.html.erb within layouts/application (Duration: 12.2ms | Allocations: 2169)
  Rendered layouts/_header.html.erb (Duration: 9.6ms | Allocations: 1068)
  [1m[36mUser Load (54.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (53.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 142.4ms | Allocations: 4611)
  Rendered layout layouts/application.html.erb (Duration: 181.5ms | Allocations: 11603)
Completed 200 OK in 237ms (Views: 75.7ms | ActiveRecord: 155.1ms | Allocations: 13105)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:32 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 13.9ms | Allocations: 2093)
  Rendered dishes/new.html.erb within layouts/application (Duration: 14.4ms | Allocations: 2164)
  Rendered layouts/_header.html.erb (Duration: 7.1ms | Allocations: 1056)
  [1m[36mUser Load (71.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 140.5ms | Allocations: 4576)
  Rendered layout layouts/application.html.erb (Duration: 177.9ms | Allocations: 11516)
Completed 200 OK in 235ms (Views: 64.0ms | ActiveRecord: 160.3ms | Allocations: 13000)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:32 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (46.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 19.0ms | Allocations: 2089)
  Rendered dishes/new.html.erb within layouts/application (Duration: 20.2ms | Allocations: 2160)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1056)
  [1m[36mUser Load (47.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 112.4ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 158.3ms | Allocations: 11501)
Completed 200 OK in 222ms (Views: 74.1ms | ActiveRecord: 138.7ms | Allocations: 12994)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:33 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (46.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 22.2ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 24.4ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1056)
  [1m[36mUser Load (51.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 109.5ms | Allocations: 4578)
  Rendered layout layouts/application.html.erb (Duration: 143.2ms | Allocations: 11503)
Completed 200 OK in 208ms (Views: 48.9ms | ActiveRecord: 142.1ms | Allocations: 13007)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:33 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (47.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 14.8ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 15.8ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 2.7ms | Allocations: 1056)
  [1m[36mUser Load (43.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 108.7ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 134.8ms | Allocations: 11500)
Completed 200 OK in 195ms (Views: 50.3ms | ActiveRecord: 135.2ms | Allocations: 12991)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:37 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.0ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.2ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 3.7ms | Allocations: 1068)
  [1m[36mUser Load (44.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 137.6ms | Allocations: 4612)
  Rendered layout layouts/application.html.erb (Duration: 166.6ms | Allocations: 11571)
Completed 200 OK in 219ms (Views: 76.0ms | ActiveRecord: 135.7ms | Allocations: 13093)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:38 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (56.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.9ms | Allocations: 2098)
  Rendered dishes/new.html.erb within layouts/application (Duration: 5.3ms | Allocations: 2169)
  Rendered layouts/_header.html.erb (Duration: 2.4ms | Allocations: 1068)
  [1m[36mUser Load (43.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (53.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 133.8ms | Allocations: 4611)
  Rendered layout layouts/application.html.erb (Duration: 159.6ms | Allocations: 11598)
Completed 200 OK in 229ms (Views: 64.7ms | ActiveRecord: 153.8ms | Allocations: 13096)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:38 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (48.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.6ms | Allocations: 2095)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.0ms | Allocations: 2166)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1056)
  [1m[36mUser Load (46.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (49.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 138.4ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 158.1ms | Allocations: 11523)
Completed 200 OK in 217ms (Views: 62.5ms | ActiveRecord: 145.0ms | Allocations: 13029)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:39 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 7.0ms | Allocations: 2089)
  Rendered dishes/new.html.erb within layouts/application (Duration: 7.9ms | Allocations: 2160)
  Rendered layouts/_header.html.erb (Duration: 3.1ms | Allocations: 1056)
  [1m[36mUser Load (46.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 126.0ms | Allocations: 4578)
  Rendered layout layouts/application.html.erb (Duration: 159.0ms | Allocations: 11504)
Completed 200 OK in 221ms (Views: 70.8ms | ActiveRecord: 135.7ms | Allocations: 13026)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:39 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (127.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.1ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.4ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 4.7ms | Allocations: 1056)
  [1m[36mUser Load (138.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (88.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 256.5ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 272.7ms | Allocations: 11500)
Completed 200 OK in 407ms (Views: 47.6ms | ActiveRecord: 353.5ms | Allocations: 12986)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:40 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (179.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 22.2ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 24.4ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 3.1ms | Allocations: 1056)
  [1m[36mUser Load (125.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (66.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 226.5ms | Allocations: 4576)
  Rendered layout layouts/application.html.erb (Duration: 286.7ms | Allocations: 11501)
Completed 200 OK in 483ms (Views: 95.3ms | ActiveRecord: 372.2ms | Allocations: 12981)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:43 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (240.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 19.4ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 20.1ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 6.1ms | Allocations: 1069)
  [1m[36mUser Load (68.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (74.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 193.6ms | Allocations: 4613)
  Rendered layout layouts/application.html.erb (Duration: 250.2ms | Allocations: 11563)
Completed 200 OK in 501ms (Views: 109.1ms | ActiveRecord: 382.8ms | Allocations: 13058)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:45 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (47.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.7ms | Allocations: 2094)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.0ms | Allocations: 2165)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1068)
  [1m[36mUser Load (44.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (48.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 115.3ms | Allocations: 4611)
  Rendered layout layouts/application.html.erb (Duration: 128.3ms | Allocations: 11604)
Completed 200 OK in 185ms (Views: 39.7ms | ActiveRecord: 140.7ms | Allocations: 13108)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:10:47 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Mi platito", "descripcion"=>"a", "precio"=>"9.00"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (46.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 7.8ms | Allocations: 2099)
  Rendered dishes/new.html.erb within layouts/application (Duration: 8.8ms | Allocations: 2170)
  Rendered layouts/_header.html.erb (Duration: 15.8ms | Allocations: 1056)
  [1m[36mUser Load (49.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (47.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 151.5ms | Allocations: 4576)
  Rendered layout layouts/application.html.erb (Duration: 198.4ms | Allocations: 11515)
Completed 200 OK in 253ms (Views: 102.8ms | ActiveRecord: 143.7ms | Allocations: 13022)


Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:12:22 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.8ms | Allocations: 1484)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.8ms | Allocations: 1786)
  Rendered layout layouts/application.html.erb (Duration: 5.7ms | Allocations: 1879)
Completed 500 Internal Server Error in 420ms (ActiveRecord: 303.0ms | Allocations: 15199)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `post' for #<ActionView::Base:0x0000000008a9d0>):
    1: <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
    2: <%= form_with model: [@restaurant, @dish], method:post, html: {multipart:true, remote: true} do |form| %>
    3:   <div class="categories_new_form_container">
    4:       <div class="categories_new_name_container">
    5:                 <div>
  
app/views/dishes/_form.html.erb:2
app/views/dishes/new.html.erb:6
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:12:40 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 1.4ms | Allocations: 1483)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.5ms | Allocations: 1783)
  Rendered layout layouts/application.html.erb (Duration: 4.8ms | Allocations: 1876)
Completed 500 Internal Server Error in 400ms (ActiveRecord: 283.4ms | Allocations: 15256)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `post' for #<ActionView::Base:0x000000000917a8>):
    1: <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
    2: <%= form_with model: [@restaurant, @dish], method: post, html: {multipart:true, remote: true} do |form| %>
    3:   <div class="categories_new_form_container">
    4:       <div class="categories_new_name_container">
    5:                 <div>
  
app/views/dishes/_form.html.erb:2
app/views/dishes/new.html.erb:6
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:12:59 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.4ms | Allocations: 1519)
  Rendered dishes/new.html.erb within layouts/application (Duration: 5.0ms | Allocations: 1833)
  Rendered layout layouts/application.html.erb (Duration: 5.3ms | Allocations: 1934)
Completed 500 Internal Server Error in 383ms (ActiveRecord: 276.6ms | Allocations: 15306)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
<%= form_with (model: [@restaurant, @dish], method: post, html: {multipart:true, remote: true}) do |form| %>
  <div class="categories_new_form_container">
      <div class="categories_new_name_container">
                <div>
          <label class="my_account_form_label">Nombre del plato</label><br>
          <%= form.text_field :nombre, class: "my_account_form_text_field", placeholder: "Mi plato" %>
        </div>

        <div>
          <label class="my_account_form_label">DescripciÃ³n</label><br>
          <%= form.text_field :descripcion, class: "my_account_form_text_field", placeholder: "El mejor plato que vas a probar" %>
        </div>

        <div>
          <label class="my_account_form_label">Precio</label><br>
          <!-- El precio tiene que poder ser un numero decimal por lo que se usa el tipo number_field y para que pueda introducir un numero decimal se usa el atributo step -->
          <%= form.number_field :precio, class: "my_account_form_text_field", placeholder: "9.99", step: "0.01" %>
        </div>
      </div>

      <div class="my_account_profile_img_container">
        <div class="my_account_profile_img_title">AÃ±ade una imagen del plato</div>
        <% if @dish.ruta_img_plato.present? %>
          <%= image_tag @dish.ruta_img_plato, class: "categories_new_img", id: "restaurant_image" %>
        <% else %>
          <%= image_tag "Default-dish-img", class: "categories_new_img", id: "restaurant_image" %>
        <% end %>
        <label class="new_post_image_upload_button">
          <%= form.file_field :ruta_img_plato, id: "upload_image_input", style: "display:none;" %>
          <%= image_tag "image-icon", class: "new_post_image_upload_icon", onclick: "$('#upload_image_input').click();" %>
          <div class="new_post_image_upload_text">Modificar</div>
        </label>
      </div>

      <div class="categories_new_button_container">
        <%= form.button type: :submit, class: "new_post_submit" do %>
          <%= image_tag "send", class: "new_post_submit_icon" %>
          <div class="new_post_submit_text">Publicar</div>
        <% end %>
      </div>
  </div>
<% end %>



<script>
  document.getElementById('upload_image_input').addEventListener('change', function(event) {
    var reader = new FileReader();
    reader.onload = function(e) {
      document.getElementById('restaurant_image').src = e.target.result;
    };
    reader.readAsDataURL(event.target.files[0]);
  });
</script>

):
1:    <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
2:    <%= form_with (model: [@restaurant, @dish], method: post, html: {multipart:true, remote: true}) do |form| %>
3:      <div class="categories_new_form_container">
4:          <div class="categories_new_name_container">
5:                    <div>
6:              <label class="my_account_form_label">Nombre del plato</label><br>
7:              <%= form.text_field :nombre, class: "my_account_form_text_field", placeholder: "Mi plato" %>
8:            </div>
9:    
10:            <div>
11:              <label class="my_account_form_label">DescripciÃ³n</label><br>
12:              <%= form.text_field :descripcion, class: "my_account_form_text_field", placeholder: "El mejor plato que vas a probar" %>
13:            </div>
14:    
15:            <div>
16:              <label class="my_account_form_label">Precio</label><br>
17:              <!-- El precio tiene que poder ser un numero decimal por lo que se usa el tipo number_field y para que pueda introducir un numero decimal se usa el atributo step -->
18:              <%= form.number_field :precio, class: "my_account_form_text_field", placeholder: "9.99", step: "0.01" %>
19:            </div>
20:          </div>
21:    
22:          <div class="my_account_profile_img_container">
23:            <div class="my_account_profile_img_title">AÃ±ade una imagen del plato</div>
24:            <% if @dish.ruta_img_plato.present? %>
25:              <%= image_tag @dish.ruta_img_plato, class: "categories_new_img", id: "restaurant_image" %>
26:            <% else %>
27:              <%= image_tag "Default-dish-img", class: "categories_new_img", id: "restaurant_image" %>
28:            <% end %>
29:            <label class="new_post_image_upload_button">
30:              <%= form.file_field :ruta_img_plato, id: "upload_image_input", style: "display:none;" %>
31:              <%= image_tag "image-icon", class: "new_post_image_upload_icon", onclick: "$('#upload_image_input').click();" %>
32:              <div class="new_post_image_upload_text">Modificar</div>
33:            </label>
34:          </div>
35:    
36:          <div class="categories_new_button_container">
37:            <%= form.button type: :submit, class: "new_post_submit" do %>
38:              <%= image_tag "send", class: "new_post_submit_icon" %>
39:              <div class="new_post_submit_text">Publicar</div>
40:            <% end %>
41:          </div>
42:      </div>
43:    <% end %>
44:    
45:    
46:    
47:    <script>
48:      document.getElementById('upload_image_input').addEventListener('change', function(event) {
49:        var reader = new FileReader();
50:        reader.onload = function(e) {
51:          document.getElementById('restaurant_image').src = e.target.result;
52:        };
53:        reader.readAsDataURL(event.target.files[0]);
54:      });
55:    </script>
  
app/views/dishes/_form.html.erb:2: syntax error, unexpected label
app/views/dishes/new.html.erb:6
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/show_exceptions.rb:36)
Processing by ErrorsController#internal_server_error as HTML
  Parameters: {"restaurant_id"=>"7"}
  Rendering layout layouts/application.html.erb
  Rendering errors/internal_server_error.html.erb within layouts/application
  Rendered errors/internal_server_error.html.erb within layouts/application (Duration: 2.0ms | Allocations: 91)
  Rendered layouts/_header.html.erb (Duration: 10.8ms | Allocations: 1392)
  [1m[36mUser Load (44.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (47.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 294.6ms | Allocations: 13297)
  Rendered layout layouts/application.html.erb (Duration: 358.6ms | Allocations: 33872)
Completed 500 Internal Server Error in 367ms (Views: 178.3ms | ActiveRecord: 187.8ms | Allocations: 34335)


Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:14:02 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (52.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 18.2ms | Allocations: 1569)
  Rendered dishes/new.html.erb within layouts/application (Duration: 21.3ms | Allocations: 1662)
  Rendered layout layouts/application.html.erb (Duration: 27.3ms | Allocations: 1762)
Completed 500 Internal Server Error in 106ms (ActiveRecord: 52.8ms | Allocations: 2665)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
<%= form_with (model: [@restaurant, @dish], method: post, html: {multipart:true, remote: true}) do |form| %>
  <div class="categories_new_form_container">
      <div class="categories_new_name_container">
                <div>
          <label class="my_account_form_label">Nombre del plato</label><br>
          <%= form.text_field :nombre, class: "my_account_form_text_field", placeholder: "Mi plato" %>
        </div>

        <div>
          <label class="my_account_form_label">DescripciÃ³n</label><br>
          <%= form.text_field :descripcion, class: "my_account_form_text_field", placeholder: "El mejor plato que vas a probar" %>
        </div>

        <div>
          <label class="my_account_form_label">Precio</label><br>
          <!-- El precio tiene que poder ser un numero decimal por lo que se usa el tipo number_field y para que pueda introducir un numero decimal se usa el atributo step -->
          <%= form.number_field :precio, class: "my_account_form_text_field", placeholder: "9.99", step: "0.01" %>
        </div>
      </div>

      <div class="my_account_profile_img_container">
        <div class="my_account_profile_img_title">AÃ±ade una imagen del plato</div>
        <% if @dish.ruta_img_plato.present? %>
          <%= image_tag @dish.ruta_img_plato, class: "categories_new_img", id: "restaurant_image" %>
        <% else %>
          <%= image_tag "Default-dish-img", class: "categories_new_img", id: "restaurant_image" %>
        <% end %>
        <label class="new_post_image_upload_button">
          <%= form.file_field :ruta_img_plato, id: "upload_image_input", style: "display:none;" %>
          <%= image_tag "image-icon", class: "new_post_image_upload_icon", onclick: "$('#upload_image_input').click();" %>
          <div class="new_post_image_upload_text">Modificar</div>
        </label>
      </div>

      <div class="categories_new_button_container">
        <%= form.button type: :submit, class: "new_post_submit" do %>
          <%= image_tag "send", class: "new_post_submit_icon" %>
          <div class="new_post_submit_text">Publicar</div>
        <% end %>
      </div>
  </div>
<% end %>



<script>
  document.getElementById('upload_image_input').addEventListener('change', function(event) {
    var reader = new FileReader();
    reader.onload = function(e) {
      document.getElementById('restaurant_image').src = e.target.result;
    };
    reader.readAsDataURL(event.target.files[0]);
  });
</script>

):
1:    <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
2:    <%= form_with (model: [@restaurant, @dish], method: post, html: {multipart:true, remote: true}) do |form| %>
3:      <div class="categories_new_form_container">
4:          <div class="categories_new_name_container">
5:                    <div>
6:              <label class="my_account_form_label">Nombre del plato</label><br>
7:              <%= form.text_field :nombre, class: "my_account_form_text_field", placeholder: "Mi plato" %>
8:            </div>
9:    
10:            <div>
11:              <label class="my_account_form_label">DescripciÃ³n</label><br>
12:              <%= form.text_field :descripcion, class: "my_account_form_text_field", placeholder: "El mejor plato que vas a probar" %>
13:            </div>
14:    
15:            <div>
16:              <label class="my_account_form_label">Precio</label><br>
17:              <!-- El precio tiene que poder ser un numero decimal por lo que se usa el tipo number_field y para que pueda introducir un numero decimal se usa el atributo step -->
18:              <%= form.number_field :precio, class: "my_account_form_text_field", placeholder: "9.99", step: "0.01" %>
19:            </div>
20:          </div>
21:    
22:          <div class="my_account_profile_img_container">
23:            <div class="my_account_profile_img_title">AÃ±ade una imagen del plato</div>
24:            <% if @dish.ruta_img_plato.present? %>
25:              <%= image_tag @dish.ruta_img_plato, class: "categories_new_img", id: "restaurant_image" %>
26:            <% else %>
27:              <%= image_tag "Default-dish-img", class: "categories_new_img", id: "restaurant_image" %>
28:            <% end %>
29:            <label class="new_post_image_upload_button">
30:              <%= form.file_field :ruta_img_plato, id: "upload_image_input", style: "display:none;" %>
31:              <%= image_tag "image-icon", class: "new_post_image_upload_icon", onclick: "$('#upload_image_input').click();" %>
32:              <div class="new_post_image_upload_text">Modificar</div>
33:            </label>
34:          </div>
35:    
36:          <div class="categories_new_button_container">
37:            <%= form.button type: :submit, class: "new_post_submit" do %>
38:              <%= image_tag "send", class: "new_post_submit_icon" %>
39:              <div class="new_post_submit_text">Publicar</div>
40:            <% end %>
41:          </div>
42:      </div>
43:    <% end %>
44:    
45:    
46:    
47:    <script>
48:      document.getElementById('upload_image_input').addEventListener('change', function(event) {
49:        var reader = new FileReader();
50:        reader.onload = function(e) {
51:          document.getElementById('restaurant_image').src = e.target.result;
52:        };
53:        reader.readAsDataURL(event.target.files[0]);
54:      });
55:    </script>
  
app/views/dishes/_form.html.erb:2: syntax error, unexpected label
app/views/dishes/new.html.erb:6
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/show_exceptions.rb:36)
Processing by ErrorsController#internal_server_error as HTML
  Parameters: {"restaurant_id"=>"7"}
  Rendering layout layouts/application.html.erb
  Rendering errors/internal_server_error.html.erb within layouts/application
  Rendered errors/internal_server_error.html.erb within layouts/application (Duration: 0.1ms | Allocations: 6)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1107)
  [1m[36mUser Load (45.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 127.9ms | Allocations: 4612)
  Rendered layout layouts/application.html.erb (Duration: 135.0ms | Allocations: 9670)
Completed 500 Internal Server Error in 136ms (Views: 45.5ms | ActiveRecord: 90.1ms | Allocations: 9907)


Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:15:46 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (46.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 1.6ms | Allocations: 1568)
  Rendered dishes/new.html.erb within layouts/application (Duration: 2.1ms | Allocations: 1661)
  Rendered layout layouts/application.html.erb (Duration: 2.6ms | Allocations: 1761)
Completed 500 Internal Server Error in 54ms (ActiveRecord: 46.3ms | Allocations: 2663)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
<%= form_with (model: [@restaurant, @dish], method: post, html: {multipart:true, remote: true}) do |form| %>
  <div class="categories_new_form_container">
      <div class="categories_new_name_container">
                <div>
          <label class="my_account_form_label">Nombre del plato</label><br>
          <%= form.text_field :nombre, class: "my_account_form_text_field", placeholder: "Mi plato" %>
        </div>

        <div>
          <label class="my_account_form_label">DescripciÃ³n</label><br>
          <%= form.text_field :descripcion, class: "my_account_form_text_field", placeholder: "El mejor plato que vas a probar" %>
        </div>

        <div>
          <label class="my_account_form_label">Precio</label><br>
          <!-- El precio tiene que poder ser un numero decimal por lo que se usa el tipo number_field y para que pueda introducir un numero decimal se usa el atributo step -->
          <%= form.number_field :precio, class: "my_account_form_text_field", placeholder: "9.99", step: "0.01" %>
        </div>
      </div>

      <div class="my_account_profile_img_container">
        <div class="my_account_profile_img_title">AÃ±ade una imagen del plato</div>
        <% if @dish.ruta_img_plato.present? %>
          <%= image_tag @dish.ruta_img_plato, class: "categories_new_img", id: "restaurant_image" %>
        <% else %>
          <%= image_tag "Default-dish-img", class: "categories_new_img", id: "restaurant_image" %>
        <% end %>
        <label class="new_post_image_upload_button">
          <%= form.file_field :ruta_img_plato, id: "upload_image_input", style: "display:none;" %>
          <%= image_tag "image-icon", class: "new_post_image_upload_icon", onclick: "$('#upload_image_input').click();" %>
          <div class="new_post_image_upload_text">Modificar</div>
        </label>
      </div>

      <div class="categories_new_button_container">
        <%= form.button type: :submit, class: "new_post_submit" do %>
          <%= image_tag "send", class: "new_post_submit_icon" %>
          <div class="new_post_submit_text">Publicar</div>
        <% end %>
      </div>
  </div>
<% end %>



<script>
  document.getElementById('upload_image_input').addEventListener('change', function(event) {
    var reader = new FileReader();
    reader.onload = function(e) {
      document.getElementById('restaurant_image').src = e.target.result;
    };
    reader.readAsDataURL(event.target.files[0]);
  });
</script>

):
1:    <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
2:    <%= form_with (model: [@restaurant, @dish], method: post, html: {multipart:true, remote: true}) do |form| %>
3:      <div class="categories_new_form_container">
4:          <div class="categories_new_name_container">
5:                    <div>
6:              <label class="my_account_form_label">Nombre del plato</label><br>
7:              <%= form.text_field :nombre, class: "my_account_form_text_field", placeholder: "Mi plato" %>
8:            </div>
9:    
10:            <div>
11:              <label class="my_account_form_label">DescripciÃ³n</label><br>
12:              <%= form.text_field :descripcion, class: "my_account_form_text_field", placeholder: "El mejor plato que vas a probar" %>
13:            </div>
14:    
15:            <div>
16:              <label class="my_account_form_label">Precio</label><br>
17:              <!-- El precio tiene que poder ser un numero decimal por lo que se usa el tipo number_field y para que pueda introducir un numero decimal se usa el atributo step -->
18:              <%= form.number_field :precio, class: "my_account_form_text_field", placeholder: "9.99", step: "0.01" %>
19:            </div>
20:          </div>
21:    
22:          <div class="my_account_profile_img_container">
23:            <div class="my_account_profile_img_title">AÃ±ade una imagen del plato</div>
24:            <% if @dish.ruta_img_plato.present? %>
25:              <%= image_tag @dish.ruta_img_plato, class: "categories_new_img", id: "restaurant_image" %>
26:            <% else %>
27:              <%= image_tag "Default-dish-img", class: "categories_new_img", id: "restaurant_image" %>
28:            <% end %>
29:            <label class="new_post_image_upload_button">
30:              <%= form.file_field :ruta_img_plato, id: "upload_image_input", style: "display:none;" %>
31:              <%= image_tag "image-icon", class: "new_post_image_upload_icon", onclick: "$('#upload_image_input').click();" %>
32:              <div class="new_post_image_upload_text">Modificar</div>
33:            </label>
34:          </div>
35:    
36:          <div class="categories_new_button_container">
37:            <%= form.button type: :submit, class: "new_post_submit" do %>
38:              <%= image_tag "send", class: "new_post_submit_icon" %>
39:              <div class="new_post_submit_text">Publicar</div>
40:            <% end %>
41:          </div>
42:      </div>
43:    <% end %>
44:    
45:    
46:    
47:    <script>
48:      document.getElementById('upload_image_input').addEventListener('change', function(event) {
49:        var reader = new FileReader();
50:        reader.onload = function(e) {
51:          document.getElementById('restaurant_image').src = e.target.result;
52:        };
53:        reader.readAsDataURL(event.target.files[0]);
54:      });
55:    </script>
  
app/views/dishes/_form.html.erb:2: syntax error, unexpected label
app/views/dishes/new.html.erb:6
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/show_exceptions.rb:36)
Processing by ErrorsController#internal_server_error as HTML
  Parameters: {"restaurant_id"=>"7"}
  Rendering layout layouts/application.html.erb
  Rendering errors/internal_server_error.html.erb within layouts/application
  Rendered errors/internal_server_error.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layouts/_header.html.erb (Duration: 2.9ms | Allocations: 1107)
  [1m[36mUser Load (44.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 102.4ms | Allocations: 4611)
  Rendered layout layouts/application.html.erb (Duration: 114.2ms | Allocations: 9669)
Completed 500 Internal Server Error in 115ms (Views: 24.6ms | ActiveRecord: 90.2ms | Allocations: 9906)


Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:16:03 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 1.0ms | Allocations: 1494)
  Rendered dishes/new.html.erb within layouts/application (Duration: 1.9ms | Allocations: 1810)
  Rendered layout layouts/application.html.erb (Duration: 2.3ms | Allocations: 1911)
Completed 500 Internal Server Error in 363ms (ActiveRecord: 277.9ms | Allocations: 15259)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
<%= form_with (model: [@restaurant, @dish], html: {multipart:true, remote: true}) do |form| %>
  <div class="categories_new_form_container">
      <div class="categories_new_name_container">
                <div>
          <label class="my_account_form_label">Nombre del plato</label><br>
          <%= form.text_field :nombre, class: "my_account_form_text_field", placeholder: "Mi plato" %>
        </div>

        <div>
          <label class="my_account_form_label">DescripciÃ³n</label><br>
          <%= form.text_field :descripcion, class: "my_account_form_text_field", placeholder: "El mejor plato que vas a probar" %>
        </div>

        <div>
          <label class="my_account_form_label">Precio</label><br>
          <!-- El precio tiene que poder ser un numero decimal por lo que se usa el tipo number_field y para que pueda introducir un numero decimal se usa el atributo step -->
          <%= form.number_field :precio, class: "my_account_form_text_field", placeholder: "9.99", step: "0.01" %>
        </div>
      </div>

      <div class="my_account_profile_img_container">
        <div class="my_account_profile_img_title">AÃ±ade una imagen del plato</div>
        <% if @dish.ruta_img_plato.present? %>
          <%= image_tag @dish.ruta_img_plato, class: "categories_new_img", id: "restaurant_image" %>
        <% else %>
          <%= image_tag "Default-dish-img", class: "categories_new_img", id: "restaurant_image" %>
        <% end %>
        <label class="new_post_image_upload_button">
          <%= form.file_field :ruta_img_plato, id: "upload_image_input", style: "display:none;" %>
          <%= image_tag "image-icon", class: "new_post_image_upload_icon", onclick: "$('#upload_image_input').click();" %>
          <div class="new_post_image_upload_text">Modificar</div>
        </label>
      </div>

      <div class="categories_new_button_container">
        <%= form.button type: :submit, class: "new_post_submit" do %>
          <%= image_tag "send", class: "new_post_submit_icon" %>
          <div class="new_post_submit_text">Publicar</div>
        <% end %>
      </div>
  </div>
<% end %>



<script>
  document.getElementById('upload_image_input').addEventListener('change', function(event) {
    var reader = new FileReader();
    reader.onload = function(e) {
      document.getElementById('restaurant_image').src = e.target.result;
    };
    reader.readAsDataURL(event.target.files[0]);
  });
</script>

):
1:    <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
2:    <%= form_with (model: [@restaurant, @dish], html: {multipart:true, remote: true}) do |form| %>
3:      <div class="categories_new_form_container">
4:          <div class="categories_new_name_container">
5:                    <div>
6:              <label class="my_account_form_label">Nombre del plato</label><br>
7:              <%= form.text_field :nombre, class: "my_account_form_text_field", placeholder: "Mi plato" %>
8:            </div>
9:    
10:            <div>
11:              <label class="my_account_form_label">DescripciÃ³n</label><br>
12:              <%= form.text_field :descripcion, class: "my_account_form_text_field", placeholder: "El mejor plato que vas a probar" %>
13:            </div>
14:    
15:            <div>
16:              <label class="my_account_form_label">Precio</label><br>
17:              <!-- El precio tiene que poder ser un numero decimal por lo que se usa el tipo number_field y para que pueda introducir un numero decimal se usa el atributo step -->
18:              <%= form.number_field :precio, class: "my_account_form_text_field", placeholder: "9.99", step: "0.01" %>
19:            </div>
20:          </div>
21:    
22:          <div class="my_account_profile_img_container">
23:            <div class="my_account_profile_img_title">AÃ±ade una imagen del plato</div>
24:            <% if @dish.ruta_img_plato.present? %>
25:              <%= image_tag @dish.ruta_img_plato, class: "categories_new_img", id: "restaurant_image" %>
26:            <% else %>
27:              <%= image_tag "Default-dish-img", class: "categories_new_img", id: "restaurant_image" %>
28:            <% end %>
29:            <label class="new_post_image_upload_button">
30:              <%= form.file_field :ruta_img_plato, id: "upload_image_input", style: "display:none;" %>
31:              <%= image_tag "image-icon", class: "new_post_image_upload_icon", onclick: "$('#upload_image_input').click();" %>
32:              <div class="new_post_image_upload_text">Modificar</div>
33:            </label>
34:          </div>
35:    
36:          <div class="categories_new_button_container">
37:            <%= form.button type: :submit, class: "new_post_submit" do %>
38:              <%= image_tag "send", class: "new_post_submit_icon" %>
39:              <div class="new_post_submit_text">Publicar</div>
40:            <% end %>
41:          </div>
42:      </div>
43:    <% end %>
44:    
45:    
46:    
47:    <script>
48:      document.getElementById('upload_image_input').addEventListener('change', function(event) {
49:        var reader = new FileReader();
50:        reader.onload = function(e) {
51:          document.getElementById('restaurant_image').src = e.target.result;
52:        };
53:        reader.readAsDataURL(event.target.files[0]);
54:      });
55:    </script>
  
app/views/dishes/_form.html.erb:2: syntax error, unexpected label
app/views/dishes/new.html.erb:6
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/show_exceptions.rb:36)
Processing by ErrorsController#internal_server_error as HTML
  Parameters: {"restaurant_id"=>"7"}
  Rendering layout layouts/application.html.erb
  Rendering errors/internal_server_error.html.erb within layouts/application
  Rendered errors/internal_server_error.html.erb within layouts/application (Duration: 0.8ms | Allocations: 89)
  Rendered layouts/_header.html.erb (Duration: 3.6ms | Allocations: 1392)
  [1m[36mUser Load (43.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 215.2ms | Allocations: 13295)
  Rendered layout layouts/application.html.erb (Duration: 278.9ms | Allocations: 33866)
Completed 500 Internal Server Error in 286ms (Views: 105.9ms | ActiveRecord: 177.3ms | Allocations: 34325)


Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:16:18 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 20.3ms | Allocations: 2732)
  Rendered dishes/new.html.erb within layouts/application (Duration: 24.4ms | Allocations: 3030)
  Rendered layouts/_header.html.erb (Duration: 3.3ms | Allocations: 1328)
  [1m[36mUser Load (44.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 215.8ms | Allocations: 13390)
  Rendered layout layouts/application.html.erb (Duration: 282.8ms | Allocations: 36500)
Completed 200 OK in 653ms (Views: 105.7ms | ActiveRecord: 453.6ms | Allocations: 49795)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:41 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.3ms | Allocations: 2102)
  Rendered dishes/new.html.erb within layouts/application (Duration: 5.1ms | Allocations: 2216)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1056)
  [1m[36mUser Load (44.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 99.3ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 113.0ms | Allocations: 11575)
Completed 200 OK in 166ms (Views: 26.0ms | ActiveRecord: 134.8ms | Allocations: 13698)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:41 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.4ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.7ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1056)
  [1m[36mUser Load (43.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (47.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 99.2ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 113.1ms | Allocations: 11500)
Completed 200 OK in 160ms (Views: 23.3ms | ActiveRecord: 134.1ms | Allocations: 12985)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:42 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.6ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.3ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1056)
  [1m[36mUser Load (45.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 95.1ms | Allocations: 4576)
  Rendered layout layouts/application.html.erb (Duration: 104.3ms | Allocations: 11501)
Completed 200 OK in 152ms (Views: 16.7ms | ActiveRecord: 131.8ms | Allocations: 12996)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:42 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.7ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.0ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1056)
  [1m[36mUser Load (43.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 97.2ms | Allocations: 4583)
  Rendered layout layouts/application.html.erb (Duration: 108.6ms | Allocations: 11508)
Completed 200 OK in 156ms (Views: 22.9ms | ActiveRecord: 130.0ms | Allocations: 13010)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:42 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.3ms | Allocations: 2094)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.6ms | Allocations: 2165)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1060)
  [1m[36mUser Load (44.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 95.9ms | Allocations: 4590)
  Rendered layout layouts/application.html.erb (Duration: 105.4ms | Allocations: 11547)
Completed 200 OK in 157ms (Views: 18.3ms | ActiveRecord: 131.8ms | Allocations: 13048)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:43 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.8ms | Allocations: 2094)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.1ms | Allocations: 2165)
  Rendered layouts/_header.html.erb (Duration: 2.7ms | Allocations: 1056)
  [1m[36mUser Load (43.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 96.4ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 108.2ms | Allocations: 11506)
Completed 200 OK in 165ms (Views: 21.6ms | ActiveRecord: 131.6ms | Allocations: 13005)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:43 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.1ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.4ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1056)
  [1m[36mUser Load (43.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 94.3ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 103.6ms | Allocations: 11500)
Completed 200 OK in 155ms (Views: 17.2ms | ActiveRecord: 131.9ms | Allocations: 12992)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:44 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (56.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.8ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.1ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1056)
  [1m[36mUser Load (43.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 103.9ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 114.8ms | Allocations: 11500)
Completed 200 OK in 176ms (Views: 27.8ms | ActiveRecord: 144.9ms | Allocations: 13000)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:44 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.2ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.5ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1056)
  [1m[36mUser Load (46.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 103.3ms | Allocations: 4594)
  Rendered layout layouts/application.html.erb (Duration: 113.1ms | Allocations: 11519)
Completed 200 OK in 162ms (Views: 23.8ms | ActiveRecord: 134.4ms | Allocations: 13018)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:44 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 5.3ms | Allocations: 2095)
  Rendered dishes/new.html.erb within layouts/application (Duration: 5.7ms | Allocations: 2166)
  Rendered layouts/_header.html.erb (Duration: 2.6ms | Allocations: 1060)
  [1m[36mUser Load (45.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 95.7ms | Allocations: 4599)
  Rendered layout layouts/application.html.erb (Duration: 109.8ms | Allocations: 11556)
Completed 200 OK in 156ms (Views: 21.7ms | ActiveRecord: 132.0ms | Allocations: 13060)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:44 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.8ms | Allocations: 2094)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.0ms | Allocations: 2165)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1056)
  [1m[36mUser Load (43.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 95.8ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 104.3ms | Allocations: 11506)
Completed 200 OK in 155ms (Views: 16.5ms | ActiveRecord: 133.7ms | Allocations: 12993)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:45 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.6ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 5.0ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1056)
  [1m[36mUser Load (42.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 94.0ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 105.4ms | Allocations: 11500)
Completed 200 OK in 159ms (Views: 19.1ms | ActiveRecord: 131.1ms | Allocations: 13005)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:45 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.7ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 2.9ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1056)
  [1m[36mUser Load (43.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 97.8ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 107.2ms | Allocations: 11500)
Completed 200 OK in 155ms (Views: 20.6ms | ActiveRecord: 130.4ms | Allocations: 12998)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:45 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.5ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.8ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 3.7ms | Allocations: 1056)
  [1m[36mUser Load (43.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 97.0ms | Allocations: 4594)
  Rendered layout layouts/application.html.erb (Duration: 110.1ms | Allocations: 11519)
Completed 200 OK in 158ms (Views: 23.6ms | ActiveRecord: 131.3ms | Allocations: 13021)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:45 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.0ms | Allocations: 2095)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.2ms | Allocations: 2166)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1060)
  [1m[36mUser Load (45.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 127.4ms | Allocations: 4599)
  Rendered layout layouts/application.html.erb (Duration: 137.9ms | Allocations: 11556)
Completed 200 OK in 185ms (Views: 48.4ms | ActiveRecord: 133.5ms | Allocations: 13048)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:46 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.6ms | Allocations: 2094)
  Rendered dishes/new.html.erb within layouts/application (Duration: 5.3ms | Allocations: 2165)
  Rendered layouts/_header.html.erb (Duration: 2.8ms | Allocations: 1057)
  [1m[36mUser Load (44.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 99.0ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 115.5ms | Allocations: 11507)
Completed 200 OK in 162ms (Views: 28.8ms | ActiveRecord: 130.3ms | Allocations: 12999)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:46 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.7ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.2ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1056)
  [1m[36mUser Load (44.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 95.5ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 106.9ms | Allocations: 11500)
Completed 200 OK in 160ms (Views: 20.3ms | ActiveRecord: 132.5ms | Allocations: 13010)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:47 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.0ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.3ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 3.9ms | Allocations: 1056)
  [1m[36mUser Load (43.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 94.7ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 109.0ms | Allocations: 11500)
Completed 200 OK in 156ms (Views: 23.0ms | ActiveRecord: 130.2ms | Allocations: 12998)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:47 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.2ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.5ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1056)
  [1m[36mUser Load (49.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 100.9ms | Allocations: 4595)
  Rendered layout layouts/application.html.erb (Duration: 110.2ms | Allocations: 11520)
Completed 200 OK in 160ms (Views: 18.8ms | ActiveRecord: 136.7ms | Allocations: 13031)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:47 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 5.9ms | Allocations: 2095)
  Rendered dishes/new.html.erb within layouts/application (Duration: 7.2ms | Allocations: 2166)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1060)
  [1m[36mUser Load (43.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 94.9ms | Allocations: 4602)
  Rendered layout layouts/application.html.erb (Duration: 109.2ms | Allocations: 11559)
Completed 200 OK in 156ms (Views: 22.9ms | ActiveRecord: 130.4ms | Allocations: 13069)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:51 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.1ms | Allocations: 2094)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.4ms | Allocations: 2165)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1056)
  [1m[36mUser Load (43.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 101.8ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 114.0ms | Allocations: 11506)
Completed 200 OK in 163ms (Views: 25.1ms | ActiveRecord: 133.5ms | Allocations: 12986)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:52 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.6ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.1ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1056)
  [1m[36mUser Load (43.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 95.6ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 107.6ms | Allocations: 11500)
Completed 200 OK in 155ms (Views: 21.6ms | ActiveRecord: 129.9ms | Allocations: 12980)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:53 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.2ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.5ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1056)
  [1m[36mUser Load (44.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 99.5ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 108.3ms | Allocations: 11500)
Completed 200 OK in 161ms (Views: 19.5ms | ActiveRecord: 132.5ms | Allocations: 13012)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:53 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.5ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.8ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1056)
  [1m[36mUser Load (43.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 100.8ms | Allocations: 4594)
  Rendered layout layouts/application.html.erb (Duration: 110.2ms | Allocations: 11519)
Completed 200 OK in 163ms (Views: 22.8ms | ActiveRecord: 132.1ms | Allocations: 13006)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:54 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.8ms | Allocations: 2095)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.1ms | Allocations: 2166)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1060)
  [1m[36mUser Load (43.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (69.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 121.1ms | Allocations: 4599)
  Rendered layout layouts/application.html.erb (Duration: 130.2ms | Allocations: 11556)
Completed 200 OK in 184ms (Views: 18.6ms | ActiveRecord: 158.3ms | Allocations: 13054)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:54 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.1ms | Allocations: 2094)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.7ms | Allocations: 2165)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1056)
  [1m[36mUser Load (48.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 105.6ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 126.2ms | Allocations: 11506)
Completed 200 OK in 175ms (Views: 32.2ms | ActiveRecord: 139.4ms | Allocations: 13004)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:16:55 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.0ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.3ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1056)
  [1m[36mUser Load (43.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 96.9ms | Allocations: 4576)
  Rendered layout layouts/application.html.erb (Duration: 113.2ms | Allocations: 11501)
Completed 200 OK in 160ms (Views: 24.9ms | ActiveRecord: 132.4ms | Allocations: 13008)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:17:11 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 11.3ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 13.4ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1056)
  [1m[36mUser Load (44.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 100.8ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 124.7ms | Allocations: 11500)
Completed 200 OK in 179ms (Views: 39.2ms | ActiveRecord: 132.5ms | Allocations: 12994)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:17:11 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (49.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 8.6ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 9.2ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1056)
  [1m[36mUser Load (43.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 104.6ms | Allocations: 4598)
  Rendered layout layouts/application.html.erb (Duration: 122.6ms | Allocations: 11523)
Completed 200 OK in 180ms (Views: 34.9ms | ActiveRecord: 138.1ms | Allocations: 13021)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:17:12 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 20.6ms | Allocations: 2095)
  Rendered dishes/new.html.erb within layouts/application (Duration: 21.1ms | Allocations: 2166)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1060)
  [1m[36mUser Load (57.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 116.2ms | Allocations: 4597)
  Rendered layout layouts/application.html.erb (Duration: 147.9ms | Allocations: 11554)
Completed 200 OK in 206ms (Views: 45.7ms | ActiveRecord: 148.8ms | Allocations: 13048)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:17:12 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 17.5ms | Allocations: 2092)
  Rendered dishes/new.html.erb within layouts/application (Duration: 18.3ms | Allocations: 2163)
  Rendered layouts/_header.html.erb (Duration: 13.3ms | Allocations: 1056)
  [1m[36mUser Load (43.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (53.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 124.7ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 186.1ms | Allocations: 11507)
Completed 200 OK in 252ms (Views: 91.8ms | ActiveRecord: 141.9ms | Allocations: 12982)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:17:13 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"21"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (49.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 5.5ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 6.2ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 11.7ms | Allocations: 1056)
  [1m[36mUser Load (45.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 122.1ms | Allocations: 4578)
  Rendered layout layouts/application.html.erb (Duration: 168.4ms | Allocations: 11503)
Completed 200 OK in 236ms (Views: 82.1ms | ActiveRecord: 139.2ms | Allocations: 13001)


Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:20:45 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (64.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 35.9ms | Allocations: 2092)
  Rendered dishes/new.html.erb within layouts/application (Duration: 37.0ms | Allocations: 2171)
  Rendered layouts/_header.html.erb (Duration: 9.6ms | Allocations: 1056)
  [1m[36mUser Load (45.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 126.6ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 201.8ms | Allocations: 11512)
Completed 200 OK in 289ms (Views: 111.4ms | ActiveRecord: 156.4ms | Allocations: 12400)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:20:55 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"12"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (47.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 6.4ms | Allocations: 2088)
  Rendered dishes/new.html.erb within layouts/application (Duration: 7.0ms | Allocations: 2159)
  Rendered layouts/_header.html.erb (Duration: 8.2ms | Allocations: 1059)
  [1m[36mUser Load (48.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (80.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 145.0ms | Allocations: 4599)
  Rendered layout layouts/application.html.erb (Duration: 169.0ms | Allocations: 11527)
Completed 200 OK in 228ms (Views: 40.5ms | ActiveRecord: 176.4ms | Allocations: 12991)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:20:57 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"12"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.3ms | Allocations: 2095)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.6ms | Allocations: 2166)
  Rendered layouts/_header.html.erb (Duration: 7.2ms | Allocations: 1058)
  [1m[36mUser Load (46.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 106.5ms | Allocations: 4599)
  Rendered layout layouts/application.html.erb (Duration: 124.0ms | Allocations: 11554)
Completed 200 OK in 173ms (Views: 32.4ms | ActiveRecord: 137.7ms | Allocations: 13054)


Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:26:13 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 47.7ms | Allocations: 2714)
  Rendered dishes/new.html.erb within layouts/application (Duration: 52.5ms | Allocations: 3016)
  Rendered layouts/_header.html.erb (Duration: 10.0ms | Allocations: 1318)
  [1m[36mUser Load (45.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 271.8ms | Allocations: 13408)
  Rendered layout layouts/application.html.erb (Duration: 558.9ms | Allocations: 36606)
Completed 200 OK in 1164ms (Views: 413.5ms | ActiveRecord: 480.7ms | Allocations: 49925)


Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:26:23 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (51.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 39.3ms | Allocations: 2099)
  Rendered dishes/new.html.erb within layouts/application (Duration: 40.7ms | Allocations: 2178)
  Rendered layouts/_header.html.erb (Duration: 11.8ms | Allocations: 1060)
  [1m[36mUser Load (43.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 155.5ms | Allocations: 4581)
  Rendered layout layouts/application.html.erb (Duration: 232.5ms | Allocations: 11550)
Completed 200 OK in 367ms (Views: 150.0ms | ActiveRecord: 138.9ms | Allocations: 12421)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:26:32 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"12"}, "button"=>"", "restaurant_id"=>"7"}
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 5.4ms | Allocations: 1060)
  Rendered dishes/new.html.erb within layouts/application (Duration: 9.2ms | Allocations: 1174)
  Rendered layout layouts/application.html.erb (Duration: 10.4ms | Allocations: 1266)
Completed 500 Internal Server Error in 46ms (ActiveRecord: 0.0ms | Allocations: 2998)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `dishes_path' for #<ActionView::Base:0x000000000ad9f8>):
    1: <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
    2: <%= form_with model: [@restaurant, @dish], html: {multipart:true, remote: true} do |form| %>
    3:   <div class="categories_new_form_container">
    4:       <div class="categories_new_name_container">
    5:                 <div>
  
app/views/dishes/_form.html.erb:2
app/views/dishes/new.html.erb:6
app/controllers/dishes_controller.rb:26:in `create'
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:27:26 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (56.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 36.6ms | Allocations: 2111)
  Rendered dishes/new.html.erb within layouts/application (Duration: 37.0ms | Allocations: 2186)
  Rendered layouts/_header.html.erb (Duration: 9.8ms | Allocations: 1068)
  [1m[36mUser Load (44.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (51.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 123.7ms | Allocations: 4612)
  Rendered layout layouts/application.html.erb (Duration: 205.1ms | Allocations: 11630)
Completed 200 OK in 271ms (Views: 110.2ms | ActiveRecord: 152.1ms | Allocations: 12509)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:27:35 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"12"}, "button"=>"", "restaurant_id"=>"7"}
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 0.5ms | Allocations: 1056)
  Rendered dishes/new.html.erb within layouts/application (Duration: 1.3ms | Allocations: 1127)
  Rendered layout layouts/application.html.erb (Duration: 1.5ms | Allocations: 1219)
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.0ms | Allocations: 2279)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `dishes_path' for #<ActionView::Base:0x000000000add68>):
    1: <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
    2: <%= form_with model: [@restaurant, @dish], html: {multipart:true, remote: true} do |form| %>
    3:   <div class="categories_new_form_container">
    4:       <div class="categories_new_name_container">
    5:                 <div>
  
app/views/dishes/_form.html.erb:2
app/views/dishes/new.html.erb:6
app/controllers/dishes_controller.rb:26:in `create'
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:28:08 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 16.2ms | Allocations: 2740)
  Rendered dishes/new.html.erb within layouts/application (Duration: 17.7ms | Allocations: 3038)
  Rendered layouts/_header.html.erb (Duration: 8.7ms | Allocations: 1324)
  [1m[36mUser Load (44.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 233.7ms | Allocations: 13378)
  Rendered layout layouts/application.html.erb (Duration: 312.4ms | Allocations: 36606)
Completed 200 OK in 685ms (Views: 132.7ms | ActiveRecord: 457.6ms | Allocations: 49921)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:28:39 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"100% real", "precio"=>"9.99"}, "button"=>"", "restaurant_id"=>"7"}
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.0ms | Allocations: 1105)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.4ms | Allocations: 1219)
  Rendered layout layouts/application.html.erb (Duration: 3.6ms | Allocations: 1311)
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms | Allocations: 3066)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (No route matches {:action=>"create", :controller=>"dishes", :restaurant_id=>nil}, missing required keys: [:restaurant_id]):
    1: <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
    2: <%= form_for @dish, url: restaurant_dishes_path(@restaurant), html: { multipart: true } do |form| %>
    3:   <div class="categories_new_form_container">
    4:       <div class="categories_new_name_container">
    5:                 <div>
  
app/views/dishes/_form.html.erb:2
app/views/dishes/new.html.erb:6
app/controllers/dishes_controller.rb:26:in `create'
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:29:13 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 11.2ms | Allocations: 2728)
  Rendered dishes/new.html.erb within layouts/application (Duration: 12.6ms | Allocations: 3026)
  Rendered layouts/_header.html.erb (Duration: 7.9ms | Allocations: 1324)
  [1m[36mUser Load (43.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 230.2ms | Allocations: 13377)
  Rendered layout layouts/application.html.erb (Duration: 300.5ms | Allocations: 36594)
Completed 200 OK in 664ms (Views: 117.2ms | ActiveRecord: 458.2ms | Allocations: 49945)


Started POST "/restaurants/7" for ::1 at 2023-11-19 16:29:19 +0100
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionController::RoutingError (No route matches [POST] "/restaurants/7"):
  
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:29:19 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (85.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 18.0ms | Allocations: 2112)
  Rendered dishes/new.html.erb within layouts/application (Duration: 18.4ms | Allocations: 2187)
  Rendered layouts/_header.html.erb (Duration: 9.7ms | Allocations: 1068)
  [1m[36mUser Load (46.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 106.6ms | Allocations: 4611)
  Rendered layout layouts/application.html.erb (Duration: 148.3ms | Allocations: 11629)
Completed 200 OK in 254ms (Views: 59.3ms | ActiveRecord: 175.5ms | Allocations: 12504)


Started POST "/restaurants/7" for ::1 at 2023-11-19 16:30:24 +0100
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionController::RoutingError (No route matches [POST] "/restaurants/7"):
  
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:30:25 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (46.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 26.0ms | Allocations: 2728)
  Rendered dishes/new.html.erb within layouts/application (Duration: 29.9ms | Allocations: 3022)
  Rendered layouts/_header.html.erb (Duration: 3.3ms | Allocations: 1324)
  [1m[36mUser Load (45.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 254.3ms | Allocations: 13377)
  Rendered layout layouts/application.html.erb (Duration: 353.1ms | Allocations: 36592)
Completed 200 OK in 778ms (Views: 173.8ms | ActiveRecord: 482.5ms | Allocations: 49876)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:30:30 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"", "descripcion"=>"", "precio"=>"123"}, "button"=>"", "restaurant_id"=>"7"}
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 0.6ms | Allocations: 1093)
  Rendered dishes/new.html.erb within layouts/application (Duration: 1.3ms | Allocations: 1207)
  Rendered layout layouts/application.html.erb (Duration: 1.6ms | Allocations: 1299)
Completed 500 Internal Server Error in 18ms (ActiveRecord: 0.0ms | Allocations: 3049)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (No route matches {:action=>"create", :controller=>"dishes", :restaurant_id=>nil}, missing required keys: [:restaurant_id]):
    1: <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
    2: <%= form_for @dish, url: restaurant_dishes_path(@restaurant), html: { multipart: true } do |form| %>
    3:   <div class="categories_new_form_container">
    4:       <div class="categories_new_name_container">
    5:                 <div>
  
app/views/dishes/_form.html.erb:2
app/views/dishes/new.html.erb:6
app/controllers/dishes_controller.rb:26:in `create'
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:31:07 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (44.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 23.6ms | Allocations: 2728)
  Rendered dishes/new.html.erb within layouts/application (Duration: 26.7ms | Allocations: 3022)
  Rendered layouts/_header.html.erb (Duration: 2.9ms | Allocations: 1324)
  [1m[36mUser Load (44.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 225.6ms | Allocations: 13377)
  Rendered layout layouts/application.html.erb (Duration: 291.8ms | Allocations: 36592)
Completed 200 OK in 664ms (Views: 111.3ms | ActiveRecord: 461.3ms | Allocations: 49933)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:31:14 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"12"}, "button"=>"", "restaurant_id"=>"7"}
Completed 404 Not Found in 11ms (ActiveRecord: 0.0ms | Allocations: 889)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::RecordNotFound (Couldn't find Restaurant without an ID):
  
app/controllers/dishes_controller.rb:21:in `create'
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:31:15 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (62.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 32.1ms | Allocations: 2112)
  Rendered dishes/new.html.erb within layouts/application (Duration: 32.4ms | Allocations: 2187)
  Rendered layouts/_header.html.erb (Duration: 9.1ms | Allocations: 1068)
  [1m[36mUser Load (43.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 115.2ms | Allocations: 4611)
  Rendered layout layouts/application.html.erb (Duration: 175.6ms | Allocations: 11629)
Completed 200 OK in 275ms (Views: 89.4ms | ActiveRecord: 149.4ms | Allocations: 12501)


Started GET "/search?search=El+mejor" for ::1 at 2023-11-19 16:31:29 +0100
Processing by RestaurantsController#search as HTML
  Parameters: {"search"=>"El mejor"}
  [1m[36mRestaurant Load (52.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE (lower(nombre) LIKE '%el mejor%')[0m
  â†³ app/controllers/restaurants_controller.rb:82:in `search'
Redirected to http://localhost:3000/restaurants/7
Completed 302 Found in 57ms (ActiveRecord: 52.1ms | Allocations: 833)


Started GET "/restaurants/7" for ::1 at 2023-11-19 16:31:29 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (46.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (43.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (45.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (53.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (50.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (47.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (60.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (62.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (57.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (47.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (50.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 77.0ms | Allocations: 2093)
  [1m[36mDish Load (57.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (66.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (46.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 110.0ms | Allocations: 1709)
  Rendered layouts/_add_comment.html.erb (Duration: 6.9ms | Allocations: 664)
  [1m[35m (49.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 447.1ms | Allocations: 7986)
  Rendered layouts/_header.html.erb (Duration: 11.4ms | Allocations: 1068)
  [1m[36mUser Load (45.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (48.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 131.5ms | Allocations: 4613)
  Rendered layout layouts/application.html.erb (Duration: 646.4ms | Allocations: 17444)
Completed 200 OK in 1744ms (Views: 312.6ms | ActiveRecord: 1221.2ms | Allocations: 29952)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:32:29 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"12"}, "button"=>"", "restaurant_id"=>"7"}
Completed 404 Not Found in 8ms (ActiveRecord: 0.0ms | Allocations: 829)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::RecordNotFound (Couldn't find Restaurant without an ID):
  
app/controllers/dishes_controller.rb:21:in `create'
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:32:30 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (51.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 20.0ms | Allocations: 2112)
  Rendered dishes/new.html.erb within layouts/application (Duration: 20.6ms | Allocations: 2187)
  Rendered layouts/_header.html.erb (Duration: 8.3ms | Allocations: 1068)
  [1m[36mUser Load (45.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 135.3ms | Allocations: 4612)
  Rendered layout layouts/application.html.erb (Duration: 199.3ms | Allocations: 11630)
Completed 200 OK in 263ms (Views: 110.7ms | ActiveRecord: 142.4ms | Allocations: 12495)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:32:43 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"123"}, "button"=>"", "restaurant_id"=>"7"}
Completed 404 Not Found in 5ms (ActiveRecord: 0.0ms | Allocations: 843)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::RecordNotFound (Couldn't find Restaurant without an ID):
  
app/controllers/dishes_controller.rb:21:in `create'
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:32:44 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (47.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 19.1ms | Allocations: 2112)
  Rendered dishes/new.html.erb within layouts/application (Duration: 19.4ms | Allocations: 2187)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1068)
  [1m[36mUser Load (46.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 111.4ms | Allocations: 4611)
  Rendered layout layouts/application.html.erb (Duration: 146.7ms | Allocations: 11629)
Completed 200 OK in 216ms (Views: 54.3ms | ActiveRecord: 140.9ms | Allocations: 12509)


Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:34:33 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (50.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 20.2ms | Allocations: 2728)
  Rendered dishes/new.html.erb within layouts/application (Duration: 23.0ms | Allocations: 3024)
  Rendered layouts/_header.html.erb (Duration: 3.3ms | Allocations: 1324)
  [1m[36mUser Load (53.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 345.8ms | Allocations: 13379)
  Rendered layout layouts/application.html.erb (Duration: 407.4ms | Allocations: 36594)
Completed 200 OK in 822ms (Views: 214.3ms | ActiveRecord: 478.8ms | Allocations: 49912)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:34:39 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"32"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (47.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:21:in `create'
  [1m[36mTRANSACTION (44.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mRestaurant Load (48.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mDish Create (44.2ms)[0m  [1m[32mINSERT INTO "dishes" ("restaurant_id", "nombre", "ruta_img_plato", "descripcion", "precio") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["restaurant_id", 7], ["nombre", "a"], ["ruta_img_plato", nil], ["descripcion", "a"], ["precio", 32.0]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mTRANSACTION (44.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:22:in `create'
Redirected to http://localhost:3000/restaurants/7/edit
Completed 302 Found in 263ms (ActiveRecord: 231.2ms | Allocations: 4748)


Started GET "/restaurants/7/edit" for ::1 at 2023-11-19 16:34:39 +0100
Processing by RestaurantsController#edit as TURBO_STREAM
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (47.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:56:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  [1m[36mCategory Load (43.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 169.2ms | Allocations: 6266)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 171.0ms | Allocations: 6548)
  Rendered layouts/_header.html.erb (Duration: 10.1ms | Allocations: 1060)
  [1m[36mUser Load (47.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (48.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 133.6ms | Allocations: 4592)
  Rendered layout layouts/application.html.erb (Duration: 352.2ms | Allocations: 15927)
Completed 200 OK in 405ms (Views: 163.4ms | ActiveRecord: 237.0ms | Allocations: 16893)


Started GET "/search?search=mejor" for ::1 at 2023-11-19 16:34:50 +0100
Processing by RestaurantsController#search as HTML
  Parameters: {"search"=>"mejor"}
  [1m[36mRestaurant Load (49.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE (lower(nombre) LIKE '%mejor%')[0m
  â†³ app/controllers/restaurants_controller.rb:82:in `search'
Redirected to http://localhost:3000/restaurants/7
Completed 302 Found in 54ms (ActiveRecord: 49.9ms | Allocations: 695)


Started GET "/restaurants/7" for ::1 at 2023-11-19 16:34:50 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (44.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (43.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (45.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (48.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (46.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (59.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (50.1ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (44.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 68.0ms | Allocations: 2079)
  [1m[36mDish Load (49.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (44.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (49.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 56.0ms | Allocations: 1706)
  Rendered layouts/_add_comment.html.erb (Duration: 2.8ms | Allocations: 664)
  [1m[35m (51.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.6ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 302.5ms | Allocations: 8521)
  Rendered layouts/_header.html.erb (Duration: 7.5ms | Allocations: 1056)
  [1m[36mUser Load (46.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (55.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 146.4ms | Allocations: 4578)
  Rendered layout layouts/application.html.erb (Duration: 505.6ms | Allocations: 17866)
Completed 200 OK in 1415ms (Views: 170.5ms | ActiveRecord: 1160.5ms | Allocations: 30151)


Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:35:28 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (49.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 19.1ms | Allocations: 2712)
  Rendered dishes/new.html.erb within layouts/application (Duration: 21.9ms | Allocations: 3006)
  Rendered layouts/_header.html.erb (Duration: 15.6ms | Allocations: 1312)
  [1m[36mUser Load (47.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 262.8ms | Allocations: 13304)
  Rendered layout layouts/application.html.erb (Duration: 355.7ms | Allocations: 36315)
Completed 200 OK in 792ms (Views: 172.6ms | ActiveRecord: 491.4ms | Allocations: 49580)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:35:47 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor plato del mundo", "descripcion"=>"100% verÃ­dico", "precio"=>"9.97"}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (46.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:21:in `create'
  [1m[36mTRANSACTION (43.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mRestaurant Load (43.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mDish Create (44.3ms)[0m  [1m[32mINSERT INTO "dishes" ("restaurant_id", "nombre", "ruta_img_plato", "descripcion", "precio") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["restaurant_id", 7], ["nombre", "El mejor plato del mundo"], ["ruta_img_plato", nil], ["descripcion", "100% verÃ­dico"], ["precio", 9.97]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mTRANSACTION (45.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:22:in `create'
Redirected to http://localhost:3000/restaurants/7
Completed 302 Found in 238ms (ActiveRecord: 222.8ms | Allocations: 4649)


Started GET "/restaurants/7" for ::1 at 2023-11-19 16:35:47 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (44.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (46.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (44.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (48.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (46.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (55.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (49.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (50.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (45.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (57.1ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (47.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 78.7ms | Allocations: 2084)
  [1m[36mDish Load (62.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (53.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (44.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 50.7ms | Allocations: 1706)
  Rendered layouts/_add_comment.html.erb (Duration: 2.5ms | Allocations: 658)
  [1m[35m (81.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.4ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 368.0ms | Allocations: 8952)
  Rendered layouts/_header.html.erb (Duration: 8.4ms | Allocations: 1056)
  [1m[36mUser Load (44.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 109.5ms | Allocations: 4578)
  Rendered layout layouts/application.html.erb (Duration: 520.0ms | Allocations: 18310)
Completed 200 OK in 1456ms (Views: 156.2ms | ActiveRecord: 1195.7ms | Allocations: 30787)


Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:36:08 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (54.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 17.4ms | Allocations: 2093)
  Rendered dishes/new.html.erb within layouts/application (Duration: 17.7ms | Allocations: 2168)
  Rendered layouts/_header.html.erb (Duration: 3.5ms | Allocations: 1056)
  [1m[36mUser Load (44.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 116.0ms | Allocations: 4575)
  Rendered layout layouts/application.html.erb (Duration: 154.1ms | Allocations: 11509)
Completed 200 OK in 225ms (Views: 64.1ms | ActiveRecord: 145.4ms | Allocations: 12387)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:36:41 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El segundo mejor plato del mundo", "descripcion"=>"99% cierto", "precio"=>"9.98", "ruta_img_plato"=>#<ActionDispatch::Http::UploadedFile:0x00007fcceccac720 @tempfile=#<Tempfile:/tmp/RackMultipart20231119-13191-jfwi37.jpg>, @content_type="image/jpeg", @original_filename="Default-dish-img.jpg", @headers="Content-Disposition: form-data; name=\"dish[ruta_img_plato]\"; filename=\"Default-dish-img.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (46.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:21:in `create'
  [1m[36mTRANSACTION (43.9ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mRestaurant Load (48.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mDish Create (44.0ms)[0m  [1m[32mINSERT INTO "dishes" ("restaurant_id", "nombre", "ruta_img_plato", "descripcion", "precio") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["restaurant_id", 7], ["nombre", "El segundo mejor plato del mundo"], ["ruta_img_plato", "#<ActionDispatch::Http::UploadedFile:0x00007fcceccac720>"], ["descripcion", "99% cierto"], ["precio", 9.98]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mTRANSACTION (55.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:22:in `create'
Redirected to http://localhost:3000/restaurants/7
Completed 302 Found in 253ms (ActiveRecord: 238.2ms | Allocations: 3192)


Started GET "/restaurants/7" for ::1 at 2023-11-19 16:36:41 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (44.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (45.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (48.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (50.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (51.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (50.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (47.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (46.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (45.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 82.1ms | Allocations: 1503)
  [1m[36mDish Load (49.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  Rendered restaurants/show.html.erb within layouts/application (Duration: 174.3ms | Allocations: 5164)
  Rendered layout layouts/application.html.erb (Duration: 175.7ms | Allocations: 5256)
Completed 500 Internal Server Error in 835ms (ActiveRecord: 657.1ms | Allocations: 10236)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (The asset "ruta_img_plato" is not present in the asset pipeline.
):
    11:         <%= link_to get_dish_path(dish), style: "text-decoration: none !important" do %>
    12:           <div class="restaurant_dish_container">
    13:             <% if dish.ruta_img_plato.present? %>
    14:               <%= image_tag "ruta_img_plato", class: "restaurant_dish_img" %>
    15:             <% else %>
    16:               <%= image_tag "default-dish-img", class: "restaurant_dish_img" %>
    17:             <% end %>
  
app/views/restaurants/show.html.erb:14
app/views/restaurants/show.html.erb:11
app/views/restaurants/show.html.erb:10
Started GET "/restaurants/7" for ::1 at 2023-11-19 16:37:02 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (61.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (45.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (47.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (61.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (46.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (62.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (48.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (53.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (47.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 69.8ms | Allocations: 1503)
  [1m[36mDish Load (45.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  Rendered restaurants/show.html.erb within layouts/application (Duration: 141.3ms | Allocations: 5133)
  Rendered layout layouts/application.html.erb (Duration: 141.7ms | Allocations: 5225)
Completed 500 Internal Server Error in 820ms (ActiveRecord: 701.3ms | Allocations: 10184)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (The asset "ruta_img_plato" is not present in the asset pipeline.
):
    11:         <%= link_to get_dish_path(dish), style: "text-decoration: none !important" do %>
    12:           <div class="restaurant_dish_container">
    13:             <% if dish.ruta_img_plato.present? %>
    14:               <%= image_tag "ruta_img_plato", class: "restaurant_dish_img" %>
    15:             <% else %>
    16:               <%= image_tag "default-dish-img", class: "restaurant_dish_img" %>
    17:             <% end %>
  
app/views/restaurants/show.html.erb:14
app/views/restaurants/show.html.erb:11
app/views/restaurants/show.html.erb:10
Started GET "/restaurants/7" for ::1 at 2023-11-19 16:37:09 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (60.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (43.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (50.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (43.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (48.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (44.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (46.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (46.1ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (44.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 66.7ms | Allocations: 1495)
  [1m[36mDish Load (85.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  Rendered restaurants/show.html.erb within layouts/application (Duration: 207.3ms | Allocations: 5112)
  Rendered layout layouts/application.html.erb (Duration: 207.6ms | Allocations: 5204)
Completed 500 Internal Server Error in 815ms (ActiveRecord: 691.0ms | Allocations: 10156)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (The asset "ruta_img_plato" is not present in the asset pipeline.
):
    11:         <%= link_to get_dish_path(dish), style: "text-decoration: none !important" do %>
    12:           <div class="restaurant_dish_container">
    13:             <% if dish.ruta_img_plato.present? %>
    14:               <%= image_tag "ruta_img_plato", class: "restaurant_dish_img" %>
    15:             <% else %>
    16:               <%= image_tag "default-dish-img", class: "restaurant_dish_img" %>
    17:             <% end %>
  
app/views/restaurants/show.html.erb:14
app/views/restaurants/show.html.erb:11
app/views/restaurants/show.html.erb:10
Started GET "/restaurants/7" for ::1 at 2023-11-19 16:37:22 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (63.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (46.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (46.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (59.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (47.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (51.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (43.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (48.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (48.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (43.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 82.9ms | Allocations: 1498)
  [1m[36mDish Load (45.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  Rendered restaurants/show.html.erb within layouts/application (Duration: 160.6ms | Allocations: 5116)
  Rendered layout layouts/application.html.erb (Duration: 161.5ms | Allocations: 5208)
Completed 500 Internal Server Error in 802ms (ActiveRecord: 677.3ms | Allocations: 10159)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (The asset "ruta_img_plato" is not present in the asset pipeline.
):
    11:         <%= link_to get_dish_path(dish), style: "text-decoration: none !important" do %>
    12:           <div class="restaurant_dish_container">
    13:             <% if dish.ruta_img_plato.present? %>
    14:               <%= image_tag "ruta_img_plato", class: "restaurant_dish_img" %>
    15:             <% else %>
    16:               <%= image_tag "default-dish-img", class: "restaurant_dish_img" %>
    17:             <% end %>
  
app/views/restaurants/show.html.erb:14
app/views/restaurants/show.html.erb:11
app/views/restaurants/show.html.erb:10
Started GET "/restaurants/7" for ::1 at 2023-11-19 16:37:46 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (69.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (45.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (46.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (48.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (51.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (46.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (47.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (52.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (59.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (47.1ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (47.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 83.1ms | Allocations: 1495)
  [1m[36mDish Load (46.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  Rendered restaurants/show.html.erb within layouts/application (Duration: 190.4ms | Allocations: 5112)
  Rendered layout layouts/application.html.erb (Duration: 190.8ms | Allocations: 5204)
Completed 500 Internal Server Error in 903ms (ActiveRecord: 695.9ms | Allocations: 10156)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (The asset "ruta_img_plato" is not present in the asset pipeline.
):
    11:         <%= link_to get_dish_path(dish), style: "text-decoration: none !important" do %>
    12:           <div class="restaurant_dish_container">
    13:             <% if dish.ruta_img_plato.present? %>
    14:               <%= image_tag "ruta_img_plato", class: "restaurant_dish_img" %>
    15:             <% else %>
    16:               <%= image_tag "default-dish-img", class: "restaurant_dish_img" %>
    17:             <% end %>
  
app/views/restaurants/show.html.erb:14
app/views/restaurants/show.html.erb:11
app/views/restaurants/show.html.erb:10
Started GET "/" for ::1 at 2023-11-19 16:52:15 +0100
  [1m[36mActiveRecord::SchemaMigration Load (44.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (44.4ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (45.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (43.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (53.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (45.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (44.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (50.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (46.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (44.8ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 514.6ms | Allocations: 51183)
  Rendered layouts/_header.html.erb (Duration: 3.3ms | Allocations: 1400)
  Rendered layouts/_sidenav.html.erb (Duration: 8.5ms | Allocations: 3435)
  Rendered layout layouts/application.html.erb (Duration: 573.1ms | Allocations: 75444)
Completed 200 OK in 1435ms (Views: 395.4ms | ActiveRecord: 779.5ms | Allocations: 117768)


Started GET "/restaurants/7" for ::1 at 2023-11-19 16:52:21 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (45.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (46.5ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (46.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (58.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (51.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (43.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (45.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (45.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.1ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 6.2ms | Allocations: 1805)
  [1m[36mDish Load (43.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  Rendered restaurants/show.html.erb within layouts/application (Duration: 264.2ms | Allocations: 15987)
  Rendered layout layouts/application.html.erb (Duration: 264.6ms | Allocations: 16079)
Completed 500 Internal Server Error in 1213ms (ActiveRecord: 909.3ms | Allocations: 29527)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (The asset "ruta_img_plato" is not present in the asset pipeline.
):
    11:         <%= link_to get_dish_path(dish), style: "text-decoration: none !important" do %>
    12:           <div class="restaurant_dish_container">
    13:             <% if dish.ruta_img_plato.present? %>
    14:               <%= image_tag "ruta_img_plato", class: "restaurant_dish_img" %>
    15:             <% else %>
    16:               <%= image_tag "default-dish-img", class: "restaurant_dish_img" %>
    17:             <% end %>
  
app/views/restaurants/show.html.erb:14
app/views/restaurants/show.html.erb:11
app/views/restaurants/show.html.erb:10
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:53:18 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (47.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 25.7ms | Allocations: 3315)
  Rendered dishes/new.html.erb within layouts/application (Duration: 29.1ms | Allocations: 3606)
  Rendered layouts/_header.html.erb (Duration: 4.1ms | Allocations: 1070)
  Rendered layouts/_sidenav.html.erb (Duration: 5.8ms | Allocations: 2615)
  Rendered layout layouts/application.html.erb (Duration: 49.4ms | Allocations: 11062)
Completed 200 OK in 106ms (Views: 51.1ms | ActiveRecord: 47.3ms | Allocations: 12217)


Started GET "/login" for ::1 at 2023-11-19 16:53:49 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 8.7ms | Allocations: 2997)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1057)
  Rendered layouts/_sidenav.html.erb (Duration: 3.5ms | Allocations: 2580)
  Rendered layout layouts/application.html.erb (Duration: 21.9ms | Allocations: 10352)
Completed 200 OK in 102ms (Views: 22.9ms | ActiveRecord: 49.3ms | Allocations: 17916)


Started POST "/login" for ::1 at 2023-11-19 16:53:56 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"Mr.Dani", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (45.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 286ms (ActiveRecord: 45.8ms | Allocations: 1250)


Started GET "/" for ::1 at 2023-11-19 16:53:57 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (90.5ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (52.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (69.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (106.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (81.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (78.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (96.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (46.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (108.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 276.5ms | Allocations: 12158)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1057)
  [1m[36mUser Load (130.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (137.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 475.4ms | Allocations: 8513)
  Rendered layout layouts/application.html.erb (Duration: 757.9ms | Allocations: 25644)
Completed 200 OK in 1248ms (Views: 174.2ms | ActiveRecord: 1063.0ms | Allocations: 28604)


Started GET "/restaurants/7" for ::1 at 2023-11-19 16:54:00 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (48.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (64.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (68.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (127.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (44.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (120.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (49.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (66.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (83.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (73.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (123.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (54.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 60.6ms | Allocations: 1505)
  [1m[36mDish Load (71.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (146.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (69.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 116.5ms | Allocations: 1866)
  Rendered layouts/_add_comment.html.erb (Duration: 2.0ms | Allocations: 687)
  [1m[35m (50.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.3ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 464.4ms | Allocations: 6926)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1070)
  [1m[36mUser Load (65.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (73.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 148.5ms | Allocations: 4618)
  Rendered layout layouts/application.html.erb (Duration: 621.8ms | Allocations: 16383)
Completed 200 OK in 1566ms (Views: 92.1ms | ActiveRecord: 1445.5ms | Allocations: 21364)


Started GET "/restaurants/7" for ::1 at 2023-11-19 16:56:03 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (49.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (46.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (52.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (50.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (48.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (52.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (51.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (47.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (47.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (51.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (44.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 48.6ms | Allocations: 1485)
  [1m[36mDish Load (44.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (47.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (43.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 45.3ms | Allocations: 485)
  Rendered layouts/_add_comment.html.erb (Duration: 1.1ms | Allocations: 515)
  [1m[35m (45.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 446.8ms | Allocations: 68670)
  Rendered layouts/_header.html.erb (Duration: 2.3ms | Allocations: 1061)
  [1m[36mUser Load (45.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (59.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 115.9ms | Allocations: 4588)
  Rendered layout layouts/application.html.erb (Duration: 575.3ms | Allocations: 78047)
Completed 200 OK in 1199ms (Views: 245.4ms | ActiveRecord: 918.1ms | Allocations: 82993)


Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:56:23 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (46.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.0ms | Allocations: 2394)
  Rendered dishes/new.html.erb within layouts/application (Duration: 2.2ms | Allocations: 2470)
  Rendered layout layouts/application.html.erb (Duration: 2.5ms | Allocations: 2562)
Completed 500 Internal Server Error in 51ms (ActiveRecord: 46.6ms | Allocations: 3404)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (The asset "Default-dish-img" is not present in the asset pipeline.
):
    24:         <% if @dish.ruta_img_plato.present? %>
    25:           <%= image_tag @dish.ruta_img_plato, class: "categories_new_img", id: "restaurant_image" %>
    26:         <% else %>
    27:           <%= image_tag "Default-dish-img", class: "categories_new_img", id: "restaurant_image" %>
    28:         <% end %>
    29:         <label class="new_post_image_upload_button">
    30:           <%= form.file_field :ruta_img_plato, id: "upload_image_input", style: "display:none;" %>
  
app/views/dishes/_form.html.erb:27
app/views/dishes/_form.html.erb:2
app/views/dishes/new.html.erb:6
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:57:10 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (47.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 7.4ms | Allocations: 2719)
  Rendered dishes/new.html.erb within layouts/application (Duration: 9.9ms | Allocations: 3013)
  Rendered layouts/_header.html.erb (Duration: 4.4ms | Allocations: 1320)
  [1m[36mUser Load (44.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 235.3ms | Allocations: 13385)
  Rendered layout layouts/application.html.erb (Duration: 273.1ms | Allocations: 36558)
Completed 200 OK in 654ms (Views: 95.0ms | ActiveRecord: 472.9ms | Allocations: 49861)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:57:29 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"b", "descripcion"=>"b", "precio"=>"12", "ruta_img_plato"=>#<ActionDispatch::Http::UploadedFile:0x00007f3ebe992f38 @tempfile=#<Tempfile:/tmp/RackMultipart20231119-4356-q70mm2.png>, @content_type="image/png", @original_filename="Captura desde 2023-11-03 13-23-39.png", @headers="Content-Disposition: form-data; name=\"dish[ruta_img_plato]\"; filename=\"Captura desde 2023-11-03 13-23-39.png\"\r\nContent-Type: image/png\r\n">}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (47.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:21:in `create'
  [1m[36mTRANSACTION (44.9ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mRestaurant Load (66.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mDish Create (45.5ms)[0m  [1m[32mINSERT INTO "dishes" ("restaurant_id", "nombre", "ruta_img_plato", "descripcion", "precio") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["restaurant_id", 7], ["nombre", "b"], ["ruta_img_plato", "#<ActionDispatch::Http::UploadedFile:0x00007f3ebe992f38>"], ["descripcion", "b"], ["precio", 12.0]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mTRANSACTION (44.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:22:in `create'
Redirected to http://localhost:3000/restaurants/7
Completed 302 Found in 275ms (ActiveRecord: 248.9ms | Allocations: 5561)


Started GET "/restaurants/7" for ::1 at 2023-11-19 16:57:29 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (62.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (51.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (45.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (49.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (45.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (48.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (45.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (61.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (46.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (44.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 51.6ms | Allocations: 2083)
  [1m[36mDish Load (43.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  Rendered restaurants/show.html.erb within layouts/application (Duration: 109.5ms | Allocations: 7992)
  Rendered layout layouts/application.html.erb (Duration: 110.0ms | Allocations: 8084)
Completed 500 Internal Server Error in 1008ms (ActiveRecord: 932.7ms | Allocations: 20593)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (The asset "ruta_img_plato" is not present in the asset pipeline.
):
    11:         <%= link_to get_dish_path(dish), style: "text-decoration: none !important" do %>
    12:           <div class="restaurant_dish_container">
    13:             <% if dish.ruta_img_plato.present? %>
    14:               <%= image_tag "ruta_img_plato", class: "restaurant_dish_img" %>
    15:             <% else %>
    16:               <%= image_tag "default-dish-img", class: "restaurant_dish_img" %>
    17:             <% end %>
  
app/views/restaurants/show.html.erb:14
app/views/restaurants/show.html.erb:11
app/views/restaurants/show.html.erb:10
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:59:13 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (70.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.2ms | Allocations: 2717)
  Rendered dishes/new.html.erb within layouts/application (Duration: 5.2ms | Allocations: 3013)
  Rendered layouts/_header.html.erb (Duration: 2.9ms | Allocations: 1320)
  [1m[36mUser Load (46.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 226.1ms | Allocations: 13411)
  Rendered layout layouts/application.html.erb (Duration: 277.2ms | Allocations: 36585)
Completed 200 OK in 666ms (Views: 97.0ms | ActiveRecord: 483.1ms | Allocations: 49957)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 16:59:22 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"c", "descripcion"=>"c", "precio"=>"3", "ruta_img_plato"=>#<ActionDispatch::Http::UploadedFile:0x00007f3ebe8f3f28 @tempfile=#<Tempfile:/tmp/RackMultipart20231119-4356-op7738.png>, @content_type="image/png", @original_filename="Captura desde 2023-11-03 13-23-39.png", @headers="Content-Disposition: form-data; name=\"dish[ruta_img_plato]\"; filename=\"Captura desde 2023-11-03 13-23-39.png\"\r\nContent-Type: image/png\r\n">}, "button"=>"", "restaurant_id"=>"7"}
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms | Allocations: 771)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionController::ParameterMissing (param is missing or the value is empty: restaurant):
  
app/controllers/dishes_controller.rb:20:in `create'
Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 16:59:23 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (43.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.1ms | Allocations: 2101)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.7ms | Allocations: 2176)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1064)
  [1m[36mUser Load (44.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 105.5ms | Allocations: 4599)
  Rendered layout layouts/application.html.erb (Duration: 119.4ms | Allocations: 11603)
Completed 200 OK in 166ms (Views: 28.8ms | ActiveRecord: 135.0ms | Allocations: 12497)


Started GET "/restaurants/7/dishes/new" for ::1 at 2023-11-19 17:00:04 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"7"}
  [1m[36mRestaurant Load (45.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 10.5ms | Allocations: 2717)
  Rendered dishes/new.html.erb within layouts/application (Duration: 12.4ms | Allocations: 3015)
  Rendered layouts/_header.html.erb (Duration: 2.9ms | Allocations: 1320)
  [1m[36mUser Load (44.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 272.8ms | Allocations: 13366)
  Rendered layout layouts/application.html.erb (Duration: 314.5ms | Allocations: 36545)
Completed 200 OK in 680ms (Views: 135.8ms | ActiveRecord: 460.6ms | Allocations: 49870)


Started POST "/restaurants/7/dishes" for ::1 at 2023-11-19 17:00:16 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"c", "descripcion"=>"c", "precio"=>"12", "ruta_img_plato"=>#<ActionDispatch::Http::UploadedFile:0x00007f3ebee56510 @tempfile=#<Tempfile:/tmp/RackMultipart20231119-4356-36nbwv.png>, @content_type="image/png", @original_filename="Captura desde 2023-11-03 13-23-39.png", @headers="Content-Disposition: form-data; name=\"dish[ruta_img_plato]\"; filename=\"Captura desde 2023-11-03 13-23-39.png\"\r\nContent-Type: image/png\r\n">}, "button"=>"", "restaurant_id"=>"7"}
  [1m[36mRestaurant Load (51.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 95.1ms | Allocations: 58359)
  Rendered dishes/new.html.erb within layouts/application (Duration: 95.5ms | Allocations: 58473)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1067)
  [1m[36mUser Load (49.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 102.6ms | Allocations: 4602)
  Rendered layout layouts/application.html.erb (Duration: 204.4ms | Allocations: 67849)
Completed 422 Unprocessable Entity in 260ms (Views: 111.3ms | ActiveRecord: 145.3ms | Allocations: 70067)


Started GET "/restaurants/new" for ::1 at 2023-11-19 17:02:59 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (89.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 156.5ms | Allocations: 6527)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 157.6ms | Allocations: 6844)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1056)
  [1m[36mUser Load (44.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 96.7ms | Allocations: 4584)
  Rendered layout layouts/application.html.erb (Duration: 260.3ms | Allocations: 16179)
Completed 200 OK in 263ms (Views: 38.4ms | ActiveRecord: 223.1ms | Allocations: 16684)


Started POST "/restaurants" for ::1 at 2023-11-19 17:03:23 +0100
Processing by RestaurantsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "restaurant"=>{"nombre"=>"prueba", "telefono"=>"a", "direccion"=>"a", "horario"=>"a", "categoria"=>"burger", "ruta_img_fondo"=>#<ActionDispatch::Http::UploadedFile:0x00007f3ee531d938 @tempfile=#<Tempfile:/tmp/RackMultipart20231119-4356-g4iofg.jpg>, @content_type="image/jpeg", @original_filename="21_bestrestaurantintheworld.jpg", @headers="Content-Disposition: form-data; name=\"restaurant[ruta_img_fondo]\"; filename=\"21_bestrestaurantintheworld.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "button"=>""}
  [1m[36mTRANSACTION (44.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/restaurants_controller.rb:43:in `create'
  [1m[36mRestaurant Create (91.8ms)[0m  [1m[32mINSERT INTO "restaurants" ("categoria", "nombre", "ruta_img_perfil", "ruta_img_fondo", "direccion", "telefono", "horario", "imported_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["categoria", "burger"], ["nombre", "prueba"], ["ruta_img_perfil", nil], ["ruta_img_fondo", "15ce3c0420cfdec1ff55.jpg"], ["direccion", "a"], ["telefono", "a"], ["horario", "a"], ["imported_id", nil]]
  â†³ app/controllers/restaurants_controller.rb:43:in `create'
  [1m[36mTRANSACTION (47.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/restaurants_controller.rb:43:in `create'
Redirected to http://localhost:3000/restaurants/12
  [1m[36mUser Load (45.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:48:in `create'
  [1m[36mTRANSACTION (43.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/restaurants_controller.rb:48:in `create'
  [1m[36mRestaurant::HABTM_Users Create (45.2ms)[0m  [1m[32mINSERT INTO "restaurants_users" ("restaurant_id", "user_id") VALUES ($1, $2)[0m  [["restaurant_id", 12], ["user_id", "Mr.Dani"]]
  â†³ app/controllers/restaurants_controller.rb:48:in `create'
  [1m[36mTRANSACTION (45.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/restaurants_controller.rb:48:in `create'
Completed 302 Found in 383ms (ActiveRecord: 452.3ms | Allocations: 7648)


Started GET "/restaurants/12" for ::1 at 2023-11-19 17:03:23 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (44.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (44.8ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (44.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (55.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (44.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (43.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (43.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (47.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 139.5ms | Allocations: 58441)
  [1m[36mDish Load (43.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (46.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (43.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 47.4ms | Allocations: 1706)
  Rendered layouts/_add_comment.html.erb (Duration: 1.3ms | Allocations: 664)
  [1m[35m (44.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=12 AND posts.autor=users.nombre AND posts.restaurant_id=12[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 330.1ms | Allocations: 64295)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1070)
  [1m[36mUser Load (43.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 98.5ms | Allocations: 4630)
  Rendered layout layouts/application.html.erb (Duration: 441.9ms | Allocations: 73734)
Completed 200 OK in 1286ms (Views: 129.4ms | ActiveRecord: 1101.4ms | Allocations: 86058)


Started GET "/restaurants/12/dishes/new" for ::1 at 2023-11-19 17:06:01 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"12"}
  [1m[36mRestaurant Load (47.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.8ms | Allocations: 2112)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.4ms | Allocations: 2187)
  Rendered layouts/_header.html.erb (Duration: 4.2ms | Allocations: 1063)
  [1m[36mUser Load (44.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 101.0ms | Allocations: 4604)
  Rendered layout layouts/application.html.erb (Duration: 114.6ms | Allocations: 11579)
Completed 200 OK in 167ms (Views: 25.3ms | ActiveRecord: 137.6ms | Allocations: 12448)


Started POST "/restaurants/12/dishes" for ::1 at 2023-11-19 17:06:12 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"12", "ruta_img_plato"=>#<ActionDispatch::Http::UploadedFile:0x00007f3ebe80a3c8 @tempfile=#<Tempfile:/tmp/RackMultipart20231119-4356-g086np.jpg>, @content_type="image/jpeg", @original_filename="21_bestrestaurantintheworld.jpg", @headers="Content-Disposition: form-data; name=\"dish[ruta_img_plato]\"; filename=\"21_bestrestaurantintheworld.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "button"=>"", "restaurant_id"=>"12"}
  [1m[36mRestaurant Load (44.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 138.0ms | Allocations: 58769)
  Rendered dishes/new.html.erb within layouts/application (Duration: 138.9ms | Allocations: 58840)
  Rendered layouts/_header.html.erb (Duration: 2.3ms | Allocations: 1074)
  [1m[36mUser Load (46.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 108.4ms | Allocations: 4641)
  Rendered layout layouts/application.html.erb (Duration: 259.2ms | Allocations: 68298)
Completed 422 Unprocessable Entity in 308ms (Views: 169.6ms | ActiveRecord: 134.7ms | Allocations: 69817)


Started POST "/restaurants/12/dishes" for ::1 at 2023-11-19 17:08:52 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"12"}, "button"=>"", "restaurant_id"=>"12"}
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (44.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mRestaurant Load (46.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mDish Create (44.8ms)[0m  [1m[32mINSERT INTO "dishes" ("restaurant_id", "nombre", "ruta_img_plato", "descripcion", "precio") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["restaurant_id", 12], ["nombre", "a"], ["ruta_img_plato", nil], ["descripcion", "a"], ["precio", 12.0]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mTRANSACTION (44.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:22:in `create'
Redirected to http://localhost:3000/restaurants/12/edit
Completed 302 Found in 493ms (ActiveRecord: 455.7ms | Allocations: 15843)


Started GET "/restaurants/12/edit" for ::1 at 2023-11-19 17:08:53 +0100
Processing by RestaurantsController#edit as TURBO_STREAM
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (44.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:56:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  [1m[36mCategory Load (44.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 107.3ms | Allocations: 6353)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 108.1ms | Allocations: 6642)
  Rendered layouts/_header.html.erb (Duration: 2.8ms | Allocations: 1330)
  [1m[36mUser Load (49.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 262.0ms | Allocations: 13321)
  Rendered layout layouts/application.html.erb (Duration: 390.9ms | Allocations: 40148)
Completed 200 OK in 442ms (Views: 118.3ms | ActiveRecord: 318.6ms | Allocations: 42166)


Started GET "/restaurants/12/dishes/new" for ::1 at 2023-11-19 17:09:18 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"12"}
  [1m[36mRestaurant Load (45.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 28.4ms | Allocations: 2624)
  Rendered dishes/new.html.erb within layouts/application (Duration: 30.2ms | Allocations: 2912)
  Rendered layouts/_header.html.erb (Duration: 11.0ms | Allocations: 1070)
  [1m[36mUser Load (52.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (52.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 136.9ms | Allocations: 4629)
  Rendered layout layouts/application.html.erb (Duration: 204.5ms | Allocations: 12351)
Completed 200 OK in 284ms (Views: 108.8ms | ActiveRecord: 150.6ms | Allocations: 13440)


Started POST "/restaurants/12/dishes" for ::1 at 2023-11-19 17:09:28 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"a", "descripcion"=>"a", "precio"=>"332", "ruta_img_plato"=>#<ActionDispatch::Http::UploadedFile:0x00007f3ebe7cb600 @tempfile=#<Tempfile:/tmp/RackMultipart20231119-4356-tmxzk4.jpg>, @content_type="image/jpeg", @original_filename="21_bestrestaurantintheworld.jpg", @headers="Content-Disposition: form-data; name=\"dish[ruta_img_plato]\"; filename=\"21_bestrestaurantintheworld.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "button"=>"", "restaurant_id"=>"12"}
  [1m[36mTRANSACTION (46.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mRestaurant Load (44.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mDish Create (44.6ms)[0m  [1m[32mINSERT INTO "dishes" ("restaurant_id", "nombre", "ruta_img_plato", "descripcion", "precio") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["restaurant_id", 12], ["nombre", "a"], ["ruta_img_plato", "d5a0e8de17ba84108594.jpg"], ["descripcion", "a"], ["precio", 332.0]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mTRANSACTION (44.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:22:in `create'
Redirected to http://localhost:3000/restaurants/12/edit
Completed 302 Found in 191ms (ActiveRecord: 179.0ms | Allocations: 2780)


Started GET "/restaurants/12/edit" for ::1 at 2023-11-19 17:09:28 +0100
Processing by RestaurantsController#edit as TURBO_STREAM
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (44.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:56:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  [1m[36mCategory Load (44.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 49.5ms | Allocations: 3074)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 49.8ms | Allocations: 3138)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1068)
  [1m[36mUser Load (43.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 94.6ms | Allocations: 4625)
  Rendered layout layouts/application.html.erb (Duration: 166.1ms | Allocations: 20556)
Completed 200 OK in 213ms (Views: 35.7ms | ActiveRecord: 174.9ms | Allocations: 21221)


Started GET "/restaurants/12/" for ::1 at 2023-11-19 17:09:38 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (49.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (45.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (46.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (47.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (44.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (53.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (45.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (47.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (46.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 50.3ms | Allocations: 2090)
  [1m[36mDish Load (44.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  Rendered restaurants/show.html.erb within layouts/application (Duration: 105.9ms | Allocations: 7194)
  Rendered layout layouts/application.html.erb (Duration: 106.8ms | Allocations: 7286)
Completed 500 Internal Server Error in 976ms (ActiveRecord: 881.9ms | Allocations: 27485)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (The asset "ruta_img_plato" is not present in the asset pipeline.
):
    11:         <%= link_to get_dish_path(dish), style: "text-decoration: none !important" do %>
    12:           <div class="restaurant_dish_container">
    13:             <% if dish.ruta_img_plato.present? %>
    14:               <%= image_tag "ruta_img_plato", class: "restaurant_dish_img" %>
    15:             <% else %>
    16:               <%= image_tag "default-dish-img", class: "restaurant_dish_img" %>
    17:             <% end %>
  
app/views/restaurants/show.html.erb:14
app/views/restaurants/show.html.erb:11
app/views/restaurants/show.html.erb:10
Started GET "/restaurants/12/" for ::1 at 2023-11-19 17:09:57 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (49.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (46.1ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (46.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (49.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (50.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (47.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (52.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (45.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (58.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (47.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 54.2ms | Allocations: 1512)
  [1m[36mDish Load (44.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  Rendered restaurants/show.html.erb within layouts/application (Duration: 106.5ms | Allocations: 4749)
  Rendered layout layouts/application.html.erb (Duration: 107.2ms | Allocations: 4841)
Completed 500 Internal Server Error in 726ms (ActiveRecord: 670.9ms | Allocations: 9778)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (The asset "ruta_img_plato" is not present in the asset pipeline.
):
    11:         <%= link_to get_dish_path(dish), style: "text-decoration: none !important" do %>
    12:           <div class="restaurant_dish_container">
    13:             <% if dish.ruta_img_plato.present? %>
    14:               <%= image_tag "ruta_img_plato", class: "restaurant_dish_img" %>
    15:             <% else %>
    16:               <%= image_tag "default-dish-img", class: "restaurant_dish_img" %>
    17:             <% end %>
  
app/views/restaurants/show.html.erb:14
app/views/restaurants/show.html.erb:11
app/views/restaurants/show.html.erb:10
Started GET "/restaurants/12/" for ::1 at 2023-11-19 17:10:01 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (45.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (45.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (46.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (55.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (47.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (45.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (47.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (43.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (49.0ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (47.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 53.3ms | Allocations: 1511)
  [1m[36mDish Load (49.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  Rendered restaurants/show.html.erb within layouts/application (Duration: 110.4ms | Allocations: 4748)
  Rendered layout layouts/application.html.erb (Duration: 111.1ms | Allocations: 4840)
Completed 500 Internal Server Error in 712ms (ActiveRecord: 658.6ms | Allocations: 9765)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (The asset "ruta_img_plato" is not present in the asset pipeline.
):
    11:         <%= link_to get_dish_path(dish), style: "text-decoration: none !important" do %>
    12:           <div class="restaurant_dish_container">
    13:             <% if dish.ruta_img_plato.present? %>
    14:               <%= image_tag "ruta_img_plato", class: "restaurant_dish_img" %>
    15:             <% else %>
    16:               <%= image_tag "default-dish-img", class: "restaurant_dish_img" %>
    17:             <% end %>
  
app/views/restaurants/show.html.erb:14
app/views/restaurants/show.html.erb:11
app/views/restaurants/show.html.erb:10
Started GET "/restaurants/12/edit" for ::1 at 2023-11-19 17:10:25 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (45.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:56:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  [1m[36mCategory Load (46.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 63.2ms | Allocations: 3078)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 64.3ms | Allocations: 3142)
  Rendered layouts/_header.html.erb (Duration: 6.0ms | Allocations: 1080)
  [1m[36mUser Load (47.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 121.2ms | Allocations: 4663)
  Rendered layout layouts/application.html.erb (Duration: 214.0ms | Allocations: 12717)
Completed 200 OK in 265ms (Views: 74.9ms | ActiveRecord: 186.1ms | Allocations: 13376)


Started GET "/restaurants/12/dishes/new" for ::1 at 2023-11-19 17:10:27 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"12"}
  [1m[36mRestaurant Load (45.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 12.5ms | Allocations: 2116)
  Rendered dishes/new.html.erb within layouts/application (Duration: 13.4ms | Allocations: 2191)
  Rendered layouts/_header.html.erb (Duration: 8.3ms | Allocations: 1080)
  [1m[36mUser Load (48.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 120.3ms | Allocations: 4661)
  Rendered layout layouts/application.html.erb (Duration: 164.7ms | Allocations: 11702)
Completed 200 OK in 215ms (Views: 71.8ms | ActiveRecord: 138.7ms | Allocations: 12600)


Started POST "/restaurants/12/dishes" for ::1 at 2023-11-19 17:10:37 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"adsfa", "descripcion"=>"adsfasdfsadf", "precio"=>"12", "ruta_img_plato"=>#<ActionDispatch::Http::UploadedFile:0x00007f3ebe840838 @tempfile=#<Tempfile:/tmp/RackMultipart20231119-4356-bapoxe.png>, @content_type="image/png", @original_filename="Captura desde 2023-11-03 13-23-39.png", @headers="Content-Disposition: form-data; name=\"dish[ruta_img_plato]\"; filename=\"Captura desde 2023-11-03 13-23-39.png\"\r\nContent-Type: image/png\r\n">}, "button"=>"", "restaurant_id"=>"12"}
  [1m[36mTRANSACTION (47.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mRestaurant Load (50.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mDish Create (44.1ms)[0m  [1m[32mINSERT INTO "dishes" ("restaurant_id", "nombre", "ruta_img_plato", "descripcion", "precio") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["restaurant_id", 12], ["nombre", "adsfa"], ["ruta_img_plato", "9cab17be2034fb975a9c.png"], ["descripcion", "adsfasdfsadf"], ["precio", 12.0]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mTRANSACTION (44.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:22:in `create'
Redirected to http://localhost:3000/restaurants/12/edit
Completed 302 Found in 198ms (ActiveRecord: 186.4ms | Allocations: 2778)


Started GET "/restaurants/12/edit" for ::1 at 2023-11-19 17:10:38 +0100
Processing by RestaurantsController#edit as TURBO_STREAM
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (47.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:56:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  [1m[36mCategory Load (46.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 62.0ms | Allocations: 3059)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 62.5ms | Allocations: 3123)
  Rendered layouts/_header.html.erb (Duration: 3.0ms | Allocations: 1072)
  [1m[36mUser Load (43.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 102.8ms | Allocations: 4643)
  Rendered layout layouts/application.html.erb (Duration: 213.9ms | Allocations: 20574)
Completed 200 OK in 267ms (Views: 78.7ms | ActiveRecord: 183.2ms | Allocations: 21239)


Started GET "/restaurants/12/" for ::1 at 2023-11-19 17:10:42 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (48.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (46.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (48.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (52.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (44.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (44.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (46.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (46.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 51.4ms | Allocations: 1513)
  [1m[36mDish Load (45.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  Rendered restaurants/show.html.erb within layouts/application (Duration: 104.4ms | Allocations: 4184)
  Rendered layout layouts/application.html.erb (Duration: 104.9ms | Allocations: 4276)
Completed 500 Internal Server Error in 690ms (ActiveRecord: 648.7ms | Allocations: 9196)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (The asset "ruta_img_plato" is not present in the asset pipeline.
):
    11:         <%= link_to get_dish_path(dish), style: "text-decoration: none !important" do %>
    12:           <div class="restaurant_dish_container">
    13:             <% if dish.ruta_img_plato.present? %>
    14:               <%= image_tag "ruta_img_plato", class: "restaurant_dish_img" %>
    15:             <% else %>
    16:               <%= image_tag "default-dish-img", class: "restaurant_dish_img" %>
    17:             <% end %>
  
app/views/restaurants/show.html.erb:14
app/views/restaurants/show.html.erb:11
app/views/restaurants/show.html.erb:10
Started GET "/restaurants/12/" for ::1 at 2023-11-19 17:11:41 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (45.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (46.1ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (46.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (47.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (51.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (47.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (51.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (47.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.1ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (52.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 59.9ms | Allocations: 2166)
  [1m[36mDish Load (43.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (44.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (44.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 46.7ms | Allocations: 1714)
  Rendered layouts/_add_comment.html.erb (Duration: 1.8ms | Allocations: 670)
  [1m[35m (47.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=12 AND posts.autor=users.nombre AND posts.restaurant_id=12[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 455.2ms | Allocations: 63723)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1338)
  [1m[36mUser Load (44.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 213.4ms | Allocations: 13471)
  Rendered layout layouts/application.html.erb (Duration: 692.4ms | Allocations: 97396)
Completed 200 OK in 1808ms (Views: 192.0ms | ActiveRecord: 1501.5ms | Allocations: 118365)


Started GET "/restaurants/12/dishes/new" for ::1 at 2023-11-19 17:11:55 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"12"}
  [1m[36mRestaurant Load (44.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 13.6ms | Allocations: 2672)
  Rendered dishes/new.html.erb within layouts/application (Duration: 14.9ms | Allocations: 2959)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1080)
  [1m[36mUser Load (44.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (47.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 104.2ms | Allocations: 4662)
  Rendered layout layouts/application.html.erb (Duration: 128.7ms | Allocations: 12459)
Completed 200 OK in 178ms (Views: 38.4ms | ActiveRecord: 135.6ms | Allocations: 13567)


Started POST "/restaurants/12/dishes" for ::1 at 2023-11-19 17:13:01 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"aafds", "descripcion"=>"adsfasdf", "precio"=>"12312"}, "button"=>"", "restaurant_id"=>"12"}
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (45.9ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mRestaurant Load (44.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mDish Create (46.0ms)[0m  [1m[32mINSERT INTO "dishes" ("restaurant_id", "nombre", "ruta_img_plato", "descripcion", "precio") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["restaurant_id", 12], ["nombre", "aafds"], ["ruta_img_plato", nil], ["descripcion", "adsfasdf"], ["precio", 12312.0]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mTRANSACTION (44.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:22:in `create'
Redirected to http://localhost:3000/restaurants/12
Completed 302 Found in 488ms (ActiveRecord: 455.0ms | Allocations: 15831)


Started GET "/restaurants/12" for ::1 at 2023-11-19 17:13:01 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (52.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (48.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (45.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (54.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (50.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (43.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (46.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (47.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (44.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (44.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 51.1ms | Allocations: 2165)
  [1m[36mDish Load (44.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (49.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (44.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 48.1ms | Allocations: 1706)
  Rendered layouts/_add_comment.html.erb (Duration: 5.3ms | Allocations: 670)
  [1m[35m (45.1ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=12 AND posts.autor=users.nombre AND posts.restaurant_id=12[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 263.3ms | Allocations: 9278)
  Rendered layouts/_header.html.erb (Duration: 3.8ms | Allocations: 1340)
  [1m[36mUser Load (44.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 226.9ms | Allocations: 13338)
  Rendered layout layouts/application.html.erb (Duration: 561.8ms | Allocations: 42855)
Completed 200 OK in 1457ms (Views: 152.9ms | ActiveRecord: 1231.7ms | Allocations: 56362)


Started GET "/restaurants/12" for ::1 at 2023-11-19 17:20:18 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (44.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (44.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (46.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (47.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (44.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (44.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (43.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (43.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/show.html.erb within layouts/application (Duration: 1.2ms | Allocations: 1574)
  Rendered layout layouts/application.html.erb (Duration: 1.5ms | Allocations: 1675)
Completed 500 Internal Server Error in 1624ms (ActiveRecord: 938.2ms | Allocations: 24532)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <div>
  <%= render "header", locals: {restaurant: @restaurant, order: true, ratings: @ratings} %>

  <% if flash[:dishes] %>
    <div class="notice" ><%= flash[:dishes] %></div>
  <% end %>
  <div id="restaurant_menu" class="restaurant_section_title">MenÃº</div>
  <div class="restaurant_section_content">
    <div>
      <% @restaurant.dishes.each do |dish| %>
        <%= link_to get_dish_path(dish), style: "text-decoration: none !important" do %>
          <div class="restaurant_dish_container">
            <% if dish.ruta_img_plato.present? %>
              <%= image_tag dish.ruta_img_plato, class: "restaurant_dish_img" %>
            <% else %>
              <%= image_tag "default-dish-img", class: "restaurant_dish_img" %>
            <% end %>
          
            <div class="restaurant_dish_content">
              <div class="restaurant_dish_name"><%= dish.nombre%></div>
              <div class="restaurant_dish_desc"><%= dish.descripcion %></div>
            </div>
            <div class="restaurant_dish_price"><%= dish.precio %> â‚¬</div>
            
            <!-- si dish no tiene un imported id mostraremos un botÃ³n de editar el plato que llevarÃ¡ a la pÃ¡gina de editar plato -->
            <% if dish.imported_id?.nil? %>
              <%= link_to edit_restaurant_dish_path(@restaurant, dish), style: "text-decoration: none" do %>
              <div class="restaurants_header_edit_button">
                <span class="restaurants_header_edit_button_text">Editar</span>
              </div> 
            <% end %>

          </div>
        <% end %>
      <% end %>
    </div>

    <div style="display: flex; flex-direction: column; justify-content: center;">
      <!--  Si el usuario es el propietario del restaurante mostar un botÃ³n con el enlace a la pagina de aÃ±adir plato -->
      <% if session[:username].present? and user_is_owner?(@restaurant.id) %>
        <div class="restaurants_new_dish_button">    
          <%= link_to "AÃ±adir plato", new_restaurant_dish_path(@restaurant.id), class: "restaurants_new_dish_button_text" %>
        </div>
      <% end %>
    </div>
  </div>

  <div id="restaurant_reviews" class="restaurant_section_title"> ReseÃ±as del restaurante </div>
  <div class="restaurant_section_content_comments">
    <div class="restaurant_section_content restaurant_section_content_comments">
      <div class="category_post_list">
        <%= render "layouts/comment", comments: @restaurant.reviews, locals: {reactions: @reviews_reactions, user_reactions: @reviews_user_reactions}%>
      </div>
      <%= render "layouts/add_comment", path_param: new_review_path(review_to: @restaurant.id, review_type: "Restaurant") %> 
    </div>
  </div>
  <div id="restaurant_posts" class="restaurant_section_title"> Posts del restaurante </div>
  <div class="restaurant_section_content restaurant_section_content_comments">
    <div class="category_post_list">
      <%= render "layouts/comment", comments: get_rest_managers_posts(@restaurant.id), locals: {reactions: @posts_reactions, user_reactions: @posts_user_reactions} %>
    </div>
  </div>

  <div id="restaurant_info" class="restaurant_section_title"> InformaciÃ³n del restaurante </div>
  <div class="restaurant_section_content restaurant_section_content_info">
  <div class="restaurant_dir_tlf_container">
    <div class="restaurant_info_item">
      <div class="restaurant_info_subtitle"> Direccion </div>
      <%= @restaurant.direccion %>
    </div>
    <div class="restaurant_info_item">
      <div class="restaurant_info_subtitle"> Telefono </div>
      <%= @restaurant.telefono %>
    </div>
  </div>
  <div class="restaurant_dir_tlf_container">
    <div class="restaurant_info_item">
      <div class="restaurant_info_subtitle"> Horario </div>
      <%= @restaurant.horario %>
    </div>
  </div>
</div>

):
1:    <div>
2:      <%= render "header", locals: {restaurant: @restaurant, order: true, ratings: @ratings} %>
3:    
4:      <% if flash[:dishes] %>
5:        <div class="notice" ><%= flash[:dishes] %></div>
6:      <% end %>
7:      <div id="restaurant_menu" class="restaurant_section_title">MenÃº</div>
8:      <div class="restaurant_section_content">
9:        <div>
10:          <% @restaurant.dishes.each do |dish| %>
11:            <%= link_to get_dish_path(dish), style: "text-decoration: none !important" do %>
12:              <div class="restaurant_dish_container">
13:                <% if dish.ruta_img_plato.present? %>
14:                  <%= image_tag dish.ruta_img_plato, class: "restaurant_dish_img" %>
15:                <% else %>
16:                  <%= image_tag "default-dish-img", class: "restaurant_dish_img" %>
17:                <% end %>
18:              
19:                <div class="restaurant_dish_content">
20:                  <div class="restaurant_dish_name"><%= dish.nombre%></div>
21:                  <div class="restaurant_dish_desc"><%= dish.descripcion %></div>
22:                </div>
23:                <div class="restaurant_dish_price"><%= dish.precio %> â‚¬</div>
24:                
25:                <!-- si dish no tiene un imported id mostraremos un botÃ³n de editar el plato que llevarÃ¡ a la pÃ¡gina de editar plato -->
26:                <% if dish.imported_id?.nil? %>
27:                  <%= link_to edit_restaurant_dish_path(@restaurant, dish), style: "text-decoration: none" do %>
28:                  <div class="restaurants_header_edit_button">
29:                    <span class="restaurants_header_edit_button_text">Editar</span>
30:                  </div> 
31:                <% end %>
32:    
33:              </div>
34:            <% end %>
35:          <% end %>
36:        </div>
37:    
38:        <div style="display: flex; flex-direction: column; justify-content: center;">
39:          <!--  Si el usuario es el propietario del restaurante mostar un botÃ³n con el enlace a la pagina de aÃ±adir plato -->
40:          <% if session[:username].present? and user_is_owner?(@restaurant.id) %>
41:            <div class="restaurants_new_dish_button">    
42:              <%= link_to "AÃ±adir plato", new_restaurant_dish_path(@restaurant.id), class: "restaurants_new_dish_button_text" %>
43:            </div>
44:          <% end %>
45:        </div>
46:      </div>
47:    
48:      <div id="restaurant_reviews" class="restaurant_section_title"> ReseÃ±as del restaurante </div>
49:      <div class="restaurant_section_content_comments">
50:        <div class="restaurant_section_content restaurant_section_content_comments">
51:          <div class="category_post_list">
52:            <%= render "layouts/comment", comments: @restaurant.reviews, locals: {reactions: @reviews_reactions, user_reactions: @reviews_user_reactions}%>
53:          </div>
54:          <%= render "layouts/add_comment", path_param: new_review_path(review_to: @restaurant.id, review_type: "Restaurant") %> 
55:        </div>
56:      </div>
57:      <div id="restaurant_posts" class="restaurant_section_title"> Posts del restaurante </div>
58:      <div class="restaurant_section_content restaurant_section_content_comments">
59:        <div class="category_post_list">
60:          <%= render "layouts/comment", comments: get_rest_managers_posts(@restaurant.id), locals: {reactions: @posts_reactions, user_reactions: @posts_user_reactions} %>
61:        </div>
62:      </div>
63:    
64:      <div id="restaurant_info" class="restaurant_section_title"> InformaciÃ³n del restaurante </div>
65:      <div class="restaurant_section_content restaurant_section_content_info">
66:      <div class="restaurant_dir_tlf_container">
67:        <div class="restaurant_info_item">
68:          <div class="restaurant_info_subtitle"> Direccion </div>
69:          <%= @restaurant.direccion %>
70:        </div>
71:        <div class="restaurant_info_item">
72:          <div class="restaurant_info_subtitle"> Telefono </div>
73:          <%= @restaurant.telefono %>
74:        </div>
75:      </div>
76:      <div class="restaurant_dir_tlf_container">
77:        <div class="restaurant_info_item">
78:          <div class="restaurant_info_subtitle"> Horario </div>
79:          <%= @restaurant.horario %>
80:        </div>
81:      </div>
82:    </div>
  
app/views/restaurants/show.html.erb:85: syntax error, unexpected end-of-input
Started GET "/restaurants/12" for ::1 at 2023-11-19 17:21:06 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (44.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (45.5ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (45.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (47.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (43.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (43.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (46.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (43.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (45.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 49.4ms | Allocations: 2166)
  [1m[36mDish Load (45.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  Rendered restaurants/show.html.erb within layouts/application (Duration: 241.6ms | Allocations: 10705)
  Rendered layout layouts/application.html.erb (Duration: 241.9ms | Allocations: 10798)
Completed 500 Internal Server Error in 1299ms (ActiveRecord: 1172.3ms | Allocations: 31766)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `imported_id?' for #<Dish id: 12, restaurant_id: 12, nombre: "adsfa", ruta_img_plato: "9cab17be2034fb975a9c.png", descripcion: "adsfasdfsadf", precio: 12.0>):
    23:             <div class="restaurant_dish_price"><%= dish.precio %> â‚¬</div>
    24:             
    25:             <!-- si dish no tiene un imported id mostraremos un botÃ³n de editar el plato que llevarÃ¡ a la pÃ¡gina de editar plato -->
    26:             <% if dish.imported_id?.nil? %>
    27:               <%= link_to edit_restaurant_dish_path(@restaurant, dish), style: "text-decoration: none" do %>
    28:                 <div class="restaurants_header_edit_button">
    29:                   <span class="restaurants_header_edit_button_text">Editar</span>
  
app/views/restaurants/show.html.erb:26
app/views/restaurants/show.html.erb:11
app/views/restaurants/show.html.erb:10
  [1m[35m (39.6ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1120147408448878005)[0m
  [1m[36mActiveRecord::SchemaMigration Load (40.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (41.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to AddImportedIdToDishes (20231119162249)
  [1m[36mTRANSACTION (44.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (39.9ms)[0m  [1m[35mALTER TABLE "dishes" ADD "imported_id" integer DEFAULT NULL[0m
  [1m[36mActiveRecord::SchemaMigration Create (38.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231119162249') RETURNING "version"[0m
  [1m[36mTRANSACTION (39.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (44.7ms)[0m  [1m[34mSELECT pg_advisory_unlock(1120147408448878005)[0m
  [1m[36mActiveRecord::SchemaMigration Load (38.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/restaurants/12" for ::1 at 2023-11-19 17:23:56 +0100
  [1m[36mActiveRecord::SchemaMigration Load (44.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (43.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (44.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (45.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (47.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (44.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (46.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (43.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (45.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 50.8ms | Allocations: 2166)
  [1m[36mDish Load (44.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[36mDish Load (45.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (46.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (44.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 93.1ms | Allocations: 1711)
  Rendered layouts/_add_comment.html.erb (Duration: 2.7ms | Allocations: 670)
  [1m[35m (46.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=12 AND posts.autor=users.nombre AND posts.restaurant_id=12[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 575.9ms | Allocations: 15325)
  Rendered layouts/_header.html.erb (Duration: 3.9ms | Allocations: 1338)
  [1m[36mUser Load (44.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 312.3ms | Allocations: 13413)
  Rendered layout layouts/application.html.erb (Duration: 914.4ms | Allocations: 48955)
Completed 200 OK in 1954ms (Views: 364.8ms | ActiveRecord: 1470.3ms | Allocations: 69918)


Started GET "/restaurants/12/dishes/12" for ::1 at 2023-11-19 17:25:12 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"12"}
  [1m[36mDish Load (49.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 12], ["restaurant_id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (44.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  Rendered dishes/show.html.erb within layouts/application (Duration: 161.5ms | Allocations: 10217)
  Rendered layout layouts/application.html.erb (Duration: 161.9ms | Allocations: 10310)
Completed 500 Internal Server Error in 447ms (ActiveRecord: 328.2ms | Allocations: 17220)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `locals' for #<ActionView::Base:0x00000000053bb0>):
    2:   <div class="title_container">
    3:     <div class="title">Restaurante <span class="title_key_word"><%= @dish.restaurant.nombre %></span></div>
    4:     <!-- Mostrar el botÃ³n de editar solo si el usuario es el propietario del restaurante -->
    5:     <% if session[:username].present? and user_is_owner?(locals[:restaurant].id) %>
    6:       <!-- Si el restaurante tiene su imported_id distinto de nil, significa que es un restaurante importado y no se puede editar -->
    7:       <% if locals[:restaurant].imported_id.nil? %>
    8:           <%= link_to edit_restaurant_dish_path(locals[:restaurant].id), style: "text-decoration: none" do %>
  
app/views/dishes/show.html.erb:5
Started GET "/restaurants/12" for ::1 at 2023-11-19 17:25:27 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (45.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (44.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (43.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (44.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (43.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (47.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (48.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (43.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 46.9ms | Allocations: 2162)
  [1m[36mDish Load (48.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (54.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (44.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 48.4ms | Allocations: 1706)
  Rendered layouts/_add_comment.html.erb (Duration: 2.5ms | Allocations: 672)
  [1m[35m (46.0ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=12 AND posts.autor=users.nombre AND posts.restaurant_id=12[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 256.0ms | Allocations: 9250)
  Rendered layouts/_header.html.erb (Duration: 2.6ms | Allocations: 1342)
  [1m[36mUser Load (43.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 206.6ms | Allocations: 13412)
  Rendered layout layouts/application.html.erb (Duration: 484.0ms | Allocations: 42948)
Completed 200 OK in 1320ms (Views: 70.4ms | ActiveRecord: 1210.1ms | Allocations: 55928)


Started GET "/restaurants/12/dishes/13" for ::1 at 2023-11-19 17:25:52 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"13"}
  [1m[36mDish Load (46.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 13], ["restaurant_id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (45.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  Rendered dishes/show.html.erb within layouts/application (Duration: 50.5ms | Allocations: 1542)
  Rendered layout layouts/application.html.erb (Duration: 51.2ms | Allocations: 1634)
Completed 500 Internal Server Error in 112ms (ActiveRecord: 92.4ms | Allocations: 2495)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `locals' for #<ActionView::Base:0x00000000054128>):
    2:   <div class="title_container">
    3:     <div class="title">Restaurante <span class="title_key_word"><%= @dish.restaurant.nombre %></span></div>
    4:     <!-- Mostrar el botÃ³n de editar solo si el usuario es el propietario del restaurante -->
    5:     <% if session[:username].present? and user_is_owner?(locals[:restaurant].id) %>
    6:       <!-- Si el restaurante tiene su imported_id distinto de nil, significa que es un restaurante importado y no se puede editar -->
    7:       <% if locals[:restaurant].imported_id.nil? %>
    8:           <%= link_to edit_restaurant_dish_path(locals[:restaurant].id), style: "text-decoration: none" do %>
  
app/views/dishes/show.html.erb:5
Started GET "/restaurants/12" for ::1 at 2023-11-19 17:25:55 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (44.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (46.1ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (45.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (44.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (46.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (47.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (47.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (44.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.1ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (43.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 54.0ms | Allocations: 1516)
  [1m[36mDish Load (43.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (43.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (49.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 53.6ms | Allocations: 485)
  Rendered layouts/_add_comment.html.erb (Duration: 1.0ms | Allocations: 526)
  [1m[35m (46.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=12 AND posts.autor=users.nombre AND posts.restaurant_id=12[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 255.6ms | Allocations: 5066)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1084)
  [1m[36mUser Load (44.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 96.2ms | Allocations: 4673)
  Rendered layout layouts/application.html.erb (Duration: 358.7ms | Allocations: 14581)
Completed 200 OK in 947ms (Views: 45.2ms | ActiveRecord: 858.9ms | Allocations: 19538)


Started GET "/restaurants/12" for ::1 at 2023-11-19 17:26:34 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (44.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (44.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (46.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (47.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (44.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (43.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (43.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (45.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 57.1ms | Allocations: 2161)
  [1m[36mDish Load (44.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (50.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (43.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 47.4ms | Allocations: 1709)
  Rendered layouts/_add_comment.html.erb (Duration: 1.5ms | Allocations: 666)
  [1m[35m (44.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=12 AND posts.autor=users.nombre AND posts.restaurant_id=12[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 383.1ms | Allocations: 13824)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1330)
  [1m[36mUser Load (46.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (48.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 278.4ms | Allocations: 13393)
  Rendered layout layouts/application.html.erb (Duration: 699.9ms | Allocations: 47450)
Completed 200 OK in 1763ms (Views: 179.4ms | ActiveRecord: 1486.9ms | Allocations: 68406)


Started GET "/restaurants/12" for ::1 at 2023-11-19 17:27:05 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (44.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (45.1ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (43.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (45.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (43.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (43.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (43.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (45.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 49.7ms | Allocations: 2165)
  [1m[36mDish Load (45.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (44.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (43.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 46.4ms | Allocations: 1709)
  Rendered layouts/_add_comment.html.erb (Duration: 1.2ms | Allocations: 668)
  [1m[35m (44.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=12 AND posts.autor=users.nombre AND posts.restaurant_id=12[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 336.4ms | Allocations: 13838)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1344)
  [1m[36mUser Load (43.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (48.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 213.8ms | Allocations: 13484)
  Rendered layout layouts/application.html.erb (Duration: 575.2ms | Allocations: 47504)
Completed 200 OK in 1604ms (Views: 85.7ms | ActiveRecord: 1436.2ms | Allocations: 77528)


Started GET "/restaurants/12" for ::1 at 2023-11-19 17:28:23 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (45.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (47.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (51.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (45.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (46.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (43.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (42.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (46.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 51.9ms | Allocations: 2165)
  [1m[36mDish Load (49.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  Rendered restaurants/show.html.erb within layouts/application (Duration: 251.9ms | Allocations: 10966)
  Rendered layout layouts/application.html.erb (Duration: 252.4ms | Allocations: 11059)
Completed 500 Internal Server Error in 1332ms (ActiveRecord: 1181.2ms | Allocations: 31867)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `edit_dish_path' for #<ActionView::Base:0x000000000686c8>):
    30:                 </div> 
    31:               <% end %>
    32:             <% else %>
    33:               <%= link_to edit_dish_path(dish), style: "text-decoration: none" do %>
    34:                 <div class="restaurants_header_edit_button">
    35:                   <span class="restaurants_header_edit_button_text">Editar plato</span>
    36:                 </div> 
  
app/views/restaurants/show.html.erb:33
app/views/restaurants/show.html.erb:11
app/views/restaurants/show.html.erb:10
Started GET "/restaurants/12" for ::1 at 2023-11-19 17:28:58 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (43.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (43.1ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (45.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (47.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (44.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (48.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (47.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (51.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (45.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (46.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (43.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 52.7ms | Allocations: 2166)
  [1m[36mDish Load (49.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (44.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (43.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 46.6ms | Allocations: 1709)
  Rendered layouts/_add_comment.html.erb (Duration: 2.0ms | Allocations: 672)
  [1m[35m (48.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=12 AND posts.autor=users.nombre AND posts.restaurant_id=12[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 383.0ms | Allocations: 14003)
  Rendered layouts/_header.html.erb (Duration: 8.0ms | Allocations: 1342)
  [1m[36mUser Load (44.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 249.4ms | Allocations: 13415)
  Rendered layout layouts/application.html.erb (Duration: 674.7ms | Allocations: 47712)
Completed 200 OK in 1749ms (Views: 162.3ms | ActiveRecord: 1476.2ms | Allocations: 68673)


Started GET "/restaurants/12" for ::1 at 2023-11-19 17:29:28 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (44.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (50.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (44.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (44.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (47.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (44.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (45.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (46.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (45.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 53.5ms | Allocations: 2166)
  [1m[36mDish Load (44.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  Rendered restaurants/show.html.erb within layouts/application (Duration: 220.0ms | Allocations: 22464)
  Rendered layout layouts/application.html.erb (Duration: 221.8ms | Allocations: 22557)
Completed 500 Internal Server Error in 1303ms (ActiveRecord: 1143.0ms | Allocations: 43527)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `nil' for false:FalseClass):
    23:             <div class="restaurant_dish_price"><%= dish.precio %> â‚¬</div>
    24:             
    25:             <!-- si dish no tiene un imported id mostraremos un botÃ³n de editar el plato que llevarÃ¡ a la pÃ¡gina de editar plato -->
    26:             <% if dish.imported_id?.nil %>
    27:               <%= link_to edit_restaurant_dish_path(@restaurant, dish), style: "text-decoration: none" do %>
    28:                 <div class="restaurants_header_edit_button">
    29:                   <span class="restaurants_header_edit_button_text">Editar plato</span>
  
app/views/restaurants/show.html.erb:26
app/views/restaurants/show.html.erb:11
app/views/restaurants/show.html.erb:10
Started GET "/restaurants/12" for ::1 at 2023-11-19 17:29:37 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (48.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (44.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (43.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (44.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (43.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (43.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.0ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (44.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 54.8ms | Allocations: 2169)
  [1m[36mDish Load (44.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (55.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (53.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 63.2ms | Allocations: 1709)
  Rendered layouts/_add_comment.html.erb (Duration: 2.0ms | Allocations: 672)
  [1m[35m (47.1ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=12 AND posts.autor=users.nombre AND posts.restaurant_id=12[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 398.5ms | Allocations: 13842)
  Rendered layouts/_header.html.erb (Duration: 2.7ms | Allocations: 1342)
  [1m[36mUser Load (47.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 239.0ms | Allocations: 13374)
  Rendered layout layouts/application.html.erb (Duration: 678.0ms | Allocations: 47510)
Completed 200 OK in 1735ms (Views: 163.4ms | ActiveRecord: 1469.2ms | Allocations: 68536)


Started GET "/restaurants/12" for ::1 at 2023-11-19 17:30:46 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (43.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (43.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (44.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (45.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (45.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (44.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (43.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (44.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 49.2ms | Allocations: 2166)
  [1m[36mDish Load (43.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  Rendered restaurants/show.html.erb within layouts/application (Duration: 204.4ms | Allocations: 10947)
  Rendered layout layouts/application.html.erb (Duration: 204.8ms | Allocations: 11040)
Completed 500 Internal Server Error in 1275ms (ActiveRecord: 1145.6ms | Allocations: 31966)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `nil' for false:FalseClass):
    23:             <div class="restaurant_dish_price"><%= dish.precio %> â‚¬</div>
    24:             
    25:             <!-- si dish no tiene un imported id mostraremos un botÃ³n de editar el plato que llevarÃ¡ a la pÃ¡gina de editar plato -->
    26:             <% if dish.imported_id?.nil %>
    27:               <%= link_to ENV['EINA_EATS_WEB'], style: "text-decoration: none" do %>
    28:                 <div class="restaurants_header_edit_button">
    29:                   <span class="restaurants_header_edit_button_text">Editar en EinaEats</span>
  
app/views/restaurants/show.html.erb:26
app/views/restaurants/show.html.erb:11
app/views/restaurants/show.html.erb:10
Started GET "/restaurants/12" for ::1 at 2023-11-19 17:30:56 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (44.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (44.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (44.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (47.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (55.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (48.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (47.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (45.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (47.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 53.7ms | Allocations: 2166)
  [1m[36mDish Load (43.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (46.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (46.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 53.6ms | Allocations: 1709)
  Rendered layouts/_add_comment.html.erb (Duration: 5.2ms | Allocations: 672)
  [1m[35m (54.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=12 AND posts.autor=users.nombre AND posts.restaurant_id=12[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 395.6ms | Allocations: 14003)
  Rendered layouts/_header.html.erb (Duration: 4.7ms | Allocations: 1342)
  [1m[36mUser Load (48.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 255.0ms | Allocations: 13388)
  Rendered layout layouts/application.html.erb (Duration: 711.0ms | Allocations: 47685)
Completed 200 OK in 1999ms (Views: 172.4ms | ActiveRecord: 1552.9ms | Allocations: 68701)


Started GET "/restaurants/12" for ::1 at 2023-11-19 17:32:21 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (44.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (43.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (44.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (49.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (43.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (43.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (47.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (45.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (46.1ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (53.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 65.9ms | Allocations: 2161)
  [1m[36mDish Load (44.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (45.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (45.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 49.9ms | Allocations: 1711)
  Rendered layouts/_add_comment.html.erb (Duration: 1.6ms | Allocations: 673)
  [1m[35m (43.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=12 AND posts.autor=users.nombre AND posts.restaurant_id=12[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 415.1ms | Allocations: 13994)
  Rendered layouts/_header.html.erb (Duration: 2.4ms | Allocations: 1342)
  [1m[36mUser Load (43.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 201.3ms | Allocations: 13402)
  Rendered layout layouts/application.html.erb (Duration: 650.4ms | Allocations: 47692)
Completed 200 OK in 1722ms (Views: 149.7ms | ActiveRecord: 1476.0ms | Allocations: 68478)


Started GET "/restaurants/12/dishes/12/edit" for ::1 at 2023-11-19 17:32:45 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"12"}
  [1m[36mDish Load (46.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:31:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 1.5ms | Allocations: 1576)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 3.2ms | Allocations: 2066)
  Rendered layout layouts/application.html.erb (Duration: 3.5ms | Allocations: 2158)
Completed 500 Internal Server Error in 96ms (ActiveRecord: 45.9ms | Allocations: 3620)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (No route matches {:action=>"create", :controller=>"dishes", :restaurant_id=>nil}, missing required keys: [:restaurant_id]):
    1: <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
    2: <%= form_for @dish, url: restaurant_dishes_path(@restaurant), html: { multipart: true } do |form| %>
    3:   <div class="categories_new_form_container">
    4:       <div class="categories_new_name_container">
    5:                 <div>
  
app/views/dishes/_form.html.erb:2
app/views/dishes/edit.html.erb:7
Started GET "/restaurants/12" for ::1 at 2023-11-19 17:34:03 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (44.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (44.5ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (44.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (43.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (43.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (44.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (43.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 46.0ms | Allocations: 1516)
  [1m[36mDish Load (43.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (44.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (46.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 48.3ms | Allocations: 485)
  Rendered layouts/_add_comment.html.erb (Duration: 1.5ms | Allocations: 526)
  [1m[35m (45.2ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=12 AND posts.autor=users.nombre AND posts.restaurant_id=12[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.2ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 243.0ms | Allocations: 5142)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1084)
  [1m[36mUser Load (44.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 98.3ms | Allocations: 4673)
  Rendered layout layouts/application.html.erb (Duration: 351.3ms | Allocations: 14657)
Completed 200 OK in 905ms (Views: 39.9ms | ActiveRecord: 847.1ms | Allocations: 19617)


Started GET "/restaurants/12/dishes/12" for ::1 at 2023-11-19 17:34:32 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"12"}
  [1m[36mDish Load (44.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 12], ["restaurant_id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (43.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  Rendered dishes/show.html.erb within layouts/application (Duration: 172.0ms | Allocations: 10213)
  Rendered layout layouts/application.html.erb (Duration: 173.5ms | Allocations: 10306)
Completed 500 Internal Server Error in 423ms (ActiveRecord: 314.6ms | Allocations: 17214)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `locals' for #<ActionView::Base:0x00000000098648>):
    2:   <div class="title_container">
    3:     <div class="title">Restaurante <span class="title_key_word"><%= @dish.restaurant.nombre %></span></div>
    4:     <!-- Mostrar el botÃ³n de editar solo si el usuario es el propietario del restaurante -->
    5:     <% if session[:username].present? and user_is_owner?(locals[:restaurant].id) %>
    6:       <!-- Si el restaurante tiene su imported_id distinto de nil, significa que es un restaurante importado y no se puede editar -->
    7:       <% if locals[:restaurant].imported_id.nil? %>
    8:           <%= link_to edit_restaurant_dish_path(locals[:restaurant].id), style: "text-decoration: none" do %>
  
app/views/dishes/show.html.erb:5
Started GET "/restaurants/12" for ::1 at 2023-11-19 17:34:35 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (45.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (56.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (44.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (44.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (47.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (44.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (45.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.0ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (44.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 47.6ms | Allocations: 2161)
  [1m[36mDish Load (43.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (43.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (43.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 46.3ms | Allocations: 1706)
  Rendered layouts/_add_comment.html.erb (Duration: 3.2ms | Allocations: 672)
  [1m[35m (43.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=12 AND posts.autor=users.nombre AND posts.restaurant_id=12[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 238.6ms | Allocations: 9416)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1342)
  [1m[36mUser Load (43.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 215.9ms | Allocations: 13411)
  Rendered layout layouts/application.html.erb (Duration: 475.1ms | Allocations: 43110)
Completed 200 OK in 1323ms (Views: 68.3ms | ActiveRecord: 1202.5ms | Allocations: 56087)


Started GET "/restaurants/12/dishes/12/edit" for ::1 at 2023-11-19 17:34:37 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"12"}
  [1m[36mDish Load (44.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:31:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 1.2ms | Allocations: 1564)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 2.3ms | Allocations: 2037)
  Rendered layout layouts/application.html.erb (Duration: 2.6ms | Allocations: 2129)
Completed 500 Internal Server Error in 50ms (ActiveRecord: 44.4ms | Allocations: 3380)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (No route matches {:action=>"create", :controller=>"dishes", :restaurant_id=>nil}, missing required keys: [:restaurant_id]):
    1: <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
    2: <%= form_for @dish, url: restaurant_dishes_path(@restaurant), html: { multipart: true } do |form| %>
    3:   <div class="categories_new_form_container">
    4:       <div class="categories_new_name_container">
    5:                 <div>
  
app/views/dishes/_form.html.erb:2
app/views/dishes/edit.html.erb:7
Started GET "/restaurants/12/dishes/12/edit" for ::1 at 2023-11-19 17:36:03 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"12"}
  [1m[36mDish Load (43.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:31:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 8.1ms | Allocations: 1770)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 12.6ms | Allocations: 2254)
  Rendered layout layouts/application.html.erb (Duration: 13.3ms | Allocations: 2347)
Completed 500 Internal Server Error in 266ms (ActiveRecord: 228.3ms | Allocations: 8633)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `dish_path' for #<ActionView::Base:0x0000000009f9e8>):
    1: <!-- Formulario para crear y editar un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
    2: <%= form_with model: [@restaurant, @dish], local: true do |form| %>
    3:   <div class="categories_new_form_container">
    4:       <div class="categories_new_name_container">
    5:                 <div>
  
app/views/dishes/_form.html.erb:2
app/views/dishes/edit.html.erb:7
Started GET "/restaurants/12/" for ::1 at 2023-11-19 17:37:45 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (45.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (48.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (45.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (47.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (43.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (46.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (44.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (43.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (44.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 48.7ms | Allocations: 2164)
  [1m[36mDish Load (43.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (44.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (44.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 46.9ms | Allocations: 1706)
  Rendered layouts/_add_comment.html.erb (Duration: 1.3ms | Allocations: 672)
  [1m[35m (48.2ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=12 AND posts.autor=users.nombre AND posts.restaurant_id=12[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 242.4ms | Allocations: 9954)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1342)
  [1m[36mUser Load (43.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 202.0ms | Allocations: 13374)
  Rendered layout layouts/application.html.erb (Duration: 465.3ms | Allocations: 43611)
Completed 200 OK in 1391ms (Views: 64.5ms | ActiveRecord: 1258.5ms | Allocations: 63776)


Started GET "/restaurants/12/dishes/new" for ::1 at 2023-11-19 17:37:49 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"12"}
  [1m[36mRestaurant Load (43.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.3ms | Allocations: 2212)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.1ms | Allocations: 2438)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1072)
  [1m[36mUser Load (43.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 94.4ms | Allocations: 4638)
  Rendered layout layouts/application.html.erb (Duration: 104.1ms | Allocations: 11887)
Completed 200 OK in 150ms (Views: 18.0ms | ActiveRecord: 130.1ms | Allocations: 12854)


Started POST "/restaurants/12/dishes" for ::1 at 2023-11-19 17:37:56 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"", "descripcion"=>"", "precio"=>""}, "button"=>"", "restaurant_id"=>"12"}
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (42.9ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mRestaurant Load (43.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mDish Create (49.9ms)[0m  [1m[32mINSERT INTO "dishes" ("restaurant_id", "nombre", "ruta_img_plato", "descripcion", "precio", "imported_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_id", 12], ["nombre", ""], ["ruta_img_plato", nil], ["descripcion", ""], ["precio", nil], ["imported_id", nil]]
  â†³ app/controllers/dishes_controller.rb:22:in `create'
  [1m[36mTRANSACTION (44.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:22:in `create'
Redirected to http://localhost:3000/restaurants/12
Completed 302 Found in 189ms (ActiveRecord: 181.3ms | Allocations: 4059)


Started GET "/restaurants/12" for ::1 at 2023-11-19 17:37:56 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (43.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (43.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (43.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (43.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (43.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (45.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (43.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (44.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 47.4ms | Allocations: 1511)
  [1m[36mDish Load (43.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (43.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (43.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 45.4ms | Allocations: 485)
  Rendered layouts/_add_comment.html.erb (Duration: 0.9ms | Allocations: 520)
  [1m[35m (43.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=12 AND posts.autor=users.nombre AND posts.restaurant_id=12[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 234.0ms | Allocations: 5664)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1072)
  [1m[36mUser Load (43.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 95.0ms | Allocations: 4637)
  Rendered layout layouts/application.html.erb (Duration: 336.0ms | Allocations: 15085)
Completed 200 OK in 882ms (Views: 30.2ms | ActiveRecord: 834.7ms | Allocations: 20061)


Started GET "/restaurants/12" for ::1 at 2023-11-19 17:38:56 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (45.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (45.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (50.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (50.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (54.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (45.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (47.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (48.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (49.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (45.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (47.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (46.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 58.6ms | Allocations: 2166)
  [1m[36mDish Load (43.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (46.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (43.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 48.6ms | Allocations: 1709)
  Rendered layouts/_add_comment.html.erb (Duration: 1.4ms | Allocations: 672)
  [1m[35m (52.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=12 AND posts.autor=users.nombre AND posts.restaurant_id=12[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 385.1ms | Allocations: 14538)
  Rendered layouts/_header.html.erb (Duration: 3.0ms | Allocations: 1342)
  [1m[36mUser Load (46.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 225.3ms | Allocations: 13366)
  Rendered layout layouts/application.html.erb (Duration: 639.1ms | Allocations: 48197)
Completed 200 OK in 2276ms (Views: 132.0ms | ActiveRecord: 2024.9ms | Allocations: 69056)


Started GET "/restaurants/12/dishes/12/edit" for ::1 at 2023-11-19 17:43:13 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"12"}
  [1m[36mDish Load (50.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:31:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 1.3ms | Allocations: 1526)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 2.4ms | Allocations: 1999)
  Rendered layout layouts/application.html.erb (Duration: 2.6ms | Allocations: 2091)
Completed 500 Internal Server Error in 56ms (ActiveRecord: 50.4ms | Allocations: 3486)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `dish_path' for #<ActionView::Base:0x000000000a6ec8>):
    1: <!-- Formulario para crear y editar un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
    2: <%= form_with model: [@restaurant, @dish], local: true do |form| %>
    3:   <div class="categories_new_form_container">
    4:       <div class="categories_new_name_container">
    5:                 <div>
  
app/views/dishes/_form.html.erb:2
app/views/dishes/edit.html.erb:7
Started GET "/restaurants/12" for ::1 at 2023-11-19 17:43:43 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (43.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (44.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (45.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (45.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (43.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (44.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (47.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (43.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (45.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 49.7ms | Allocations: 1516)
  [1m[36mDish Load (44.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (43.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (45.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 46.5ms | Allocations: 485)
  Rendered layouts/_add_comment.html.erb (Duration: 1.0ms | Allocations: 526)
  [1m[35m (45.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=12 AND posts.autor=users.nombre AND posts.restaurant_id=12[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 236.9ms | Allocations: 5182)
  Rendered layouts/_header.html.erb (Duration: 3.8ms | Allocations: 1085)
  [1m[36mUser Load (49.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 107.2ms | Allocations: 4673)
  Rendered layout layouts/application.html.erb (Duration: 357.0ms | Allocations: 14698)
Completed 200 OK in 908ms (Views: 39.1ms | ActiveRecord: 852.8ms | Allocations: 19631)


Started GET "/restaurants/12/dishes/12" for ::1 at 2023-11-19 17:43:46 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"12"}
  [1m[36mDish Load (44.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 12], ["restaurant_id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  Rendered dishes/show.html.erb within layouts/application (Duration: 47.2ms | Allocations: 2476)
  Rendered layout layouts/application.html.erb (Duration: 47.6ms | Allocations: 2568)
Completed 500 Internal Server Error in 96ms (ActiveRecord: 88.0ms | Allocations: 4450)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `locals' for #<ActionView::Base:0x000000000a7260>):
    2:   <div class="title_container">
    3:     <div class="title">Restaurante <span class="title_key_word"><%= @dish.restaurant.nombre %></span></div>
    4:     <!-- Mostrar el botÃ³n de editar solo si el usuario es el propietario del restaurante -->
    5:     <% if session[:username].present? and user_is_owner?(locals[:restaurant].id) %>
    6:       <!-- Si el restaurante tiene su imported_id distinto de nil, significa que es un restaurante importado y no se puede editar -->
    7:       <% if locals[:restaurant].imported_id.nil? %>
    8:           <%= link_to edit_restaurant_dish_path(locals[:restaurant].id), style: "text-decoration: none" do %>
  
app/views/dishes/show.html.erb:5
Started GET "/restaurants/12/dishes/12" for ::1 at 2023-11-19 17:44:45 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"12"}
  [1m[36mDish Load (44.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 12], ["restaurant_id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (44.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  Rendered dishes/show.html.erb within layouts/application (Duration: 159.2ms | Allocations: 10211)
  Rendered layout layouts/application.html.erb (Duration: 159.9ms | Allocations: 10304)
Completed 500 Internal Server Error in 397ms (ActiveRecord: 315.8ms | Allocations: 17262)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `locals' for #<ActionView::Base:0x000000000ae0b0>):
    2:   <div class="title_container">
    3:     <div class="title">Restaurante <span class="title_key_word"><%= @dish.restaurant.nombre %></span></div>
    4:     <!-- Mostrar el botÃ³n de editar solo si el usuario es el propietario del restaurante -->
    5:     <% if session[:username].present? and user_is_owner?(locals[:restaurant].id) %>
    6:       <!-- Si el restaurante tiene su imported_id distinto de nil, significa que es un restaurante importado y no se puede editar -->
    7:       <% if locals[:restaurant].imported_id.nil? %>
    8:           <%= link_to edit_restaurant_dish_path(locals[:restaurant].id), style: "text-decoration: none" do %>
  
app/views/dishes/show.html.erb:5
Started GET "/restaurants/12" for ::1 at 2023-11-19 17:44:49 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (43.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (43.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (44.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (44.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (44.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (48.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (44.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (44.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 47.5ms | Allocations: 2161)
  [1m[36mDish Load (44.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (52.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (46.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 49.1ms | Allocations: 1706)
  Rendered layouts/_add_comment.html.erb (Duration: 1.3ms | Allocations: 672)
  [1m[35m (44.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=12 AND posts.autor=users.nombre AND posts.restaurant_id=12[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 248.1ms | Allocations: 9416)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1342)
  [1m[36mUser Load (44.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 203.2ms | Allocations: 13412)
  Rendered layout layouts/application.html.erb (Duration: 470.1ms | Allocations: 43111)
Completed 200 OK in 1285ms (Views: 59.8ms | ActiveRecord: 1179.4ms | Allocations: 56094)


Started GET "/restaurants/12/dishes/12/edit" for ::1 at 2023-11-19 17:44:52 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"12"}
  [1m[36mDish Load (44.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:31:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 1.7ms | Allocations: 1565)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 3.1ms | Allocations: 2047)
  Rendered layout layouts/application.html.erb (Duration: 3.4ms | Allocations: 2139)
Completed 500 Internal Server Error in 51ms (ActiveRecord: 44.3ms | Allocations: 3390)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (No route matches {:action=>"create", :controller=>"dishes", :restaurant_id=>nil}, missing required keys: [:restaurant_id]):
    1: <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
    2: <%= form_for @dish, url: restaurant_dishes_path(@restaurant), html: { multipart: true } do |form| %>
    3:   <div class="categories_new_form_container">
    4:       <div class="categories_new_name_container">
    5:                 <div>
  
app/views/dishes/_form.html.erb:2
app/views/dishes/edit.html.erb:7
Started GET "/restaurants/12/dishes/12/edit" for ::1 at 2023-11-19 17:45:05 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"12"}
  [1m[36mDish Load (43.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:31:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.2ms | Allocations: 1485)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 3.5ms | Allocations: 1976)
  Rendered layout layouts/application.html.erb (Duration: 3.7ms | Allocations: 2069)
Completed 500 Internal Server Error in 258ms (ActiveRecord: 222.6ms | Allocations: 8463)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `edit_restaurant_dishes_path' for #<ActionView::Base:0x000000000b5478>):
    1: <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
    2: <%= form_for @dish, url: edit_restaurant_dishes_path(@restaurant), html: { multipart: true } do |form| %>
    3:   <div class="categories_new_form_container">
    4:       <div class="categories_new_name_container">
    5:                 <div>
  
app/views/dishes/_form.html.erb:2
app/views/dishes/edit.html.erb:7
Started GET "/restaurants/12/dishes/new" for ::1 at 2023-11-19 17:45:21 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"12"}
  [1m[36mRestaurant Load (46.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.4ms | Allocations: 2885)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.3ms | Allocations: 3182)
  Rendered layout layouts/application.html.erb (Duration: 4.6ms | Allocations: 3275)
Completed 500 Internal Server Error in 370ms (ActiveRecord: 287.3ms | Allocations: 16946)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (The asset "efault-dish-img" is not present in the asset pipeline.
):
    24:         <% if @dish.ruta_img_plato.present? %>
    25:           <%= image_tag @dish.ruta_img_plato, class: "categories_new_img", id: "restaurant_image" %>
    26:         <% else %>
    27:           <%= image_tag "efault-dish-img", class: "categories_new_img", id: "restaurant_image" %>
    28:         <% end %>
    29:         <label class="new_post_image_upload_button">
    30:           <%= form.file_field :ruta_img_plato, id: "upload_image_input", style: "display:none;" %>
  
app/views/dishes/_form.html.erb:27
app/views/dishes/_form.html.erb:2
app/views/dishes/new.html.erb:7
Started GET "/restaurants/12/dishes/new" for ::1 at 2023-11-19 17:45:31 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"12"}
  [1m[36mRestaurant Load (51.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:16:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.4ms | Allocations: 2752)
  Rendered dishes/new.html.erb within layouts/application (Duration: 5.5ms | Allocations: 3049)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1340)
  [1m[36mUser Load (44.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 206.2ms | Allocations: 13438)
  Rendered layout layouts/application.html.erb (Duration: 232.1ms | Allocations: 36786)
Completed 200 OK in 606ms (Views: 55.3ms | ActiveRecord: 464.3ms | Allocations: 50539)


Started GET "/restaurants/12" for ::1 at 2023-11-19 17:46:18 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (44.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (44.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (43.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (43.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (43.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (45.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (48.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (44.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (43.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 48.1ms | Allocations: 2109)
  [1m[36mDish Load (44.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (43.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (43.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 45.3ms | Allocations: 1706)
  Rendered layouts/_add_comment.html.erb (Duration: 1.5ms | Allocations: 672)
  [1m[35m (44.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=12 AND posts.autor=users.nombre AND posts.restaurant_id=12[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 237.9ms | Allocations: 9956)
  Rendered layouts/_header.html.erb (Duration: 2.3ms | Allocations: 1072)
  [1m[36mUser Load (43.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 97.3ms | Allocations: 4640)
  Rendered layout layouts/application.html.erb (Duration: 347.3ms | Allocations: 19393)
Completed 200 OK in 1150ms (Views: 42.7ms | ActiveRecord: 1065.9ms | Allocations: 31788)


Started GET "/restaurants/12/dishes/12" for ::1 at 2023-11-19 17:46:21 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"12"}
  [1m[36mDish Load (43.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 12], ["restaurant_id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (43.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  Rendered dishes/show.html.erb within layouts/application (Duration: 46.5ms | Allocations: 2474)
  Rendered layout layouts/application.html.erb (Duration: 46.8ms | Allocations: 2566)
Completed 500 Internal Server Error in 94ms (ActiveRecord: 86.7ms | Allocations: 4483)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `locals' for #<ActionView::Base:0x000000000c3528>):
    2:   <div class="title_container">
    3:     <div class="title">Restaurante <span class="title_key_word"><%= @dish.restaurant.nombre %></span></div>
    4:     <!-- Mostrar el botÃ³n de editar solo si el usuario es el propietario del restaurante -->
    5:     <% if session[:username].present? and user_is_owner?(locals[:restaurant].id) %>
    6:       <!-- Si el restaurante tiene su imported_id distinto de nil, significa que es un restaurante importado y no se puede editar -->
    7:       <% if locals[:restaurant].imported_id.nil? %>
    8:           <%= link_to edit_restaurant_dish_path(locals[:restaurant].id), style: "text-decoration: none" do %>
  
app/views/dishes/show.html.erb:5
Started GET "/restaurants/12/dishes/12" for ::1 at 2023-11-19 17:47:10 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"12"}
  [1m[36mDish Load (45.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 12], ["restaurant_id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (44.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  Rendered dishes/show.html.erb within layouts/application (Duration: 156.3ms | Allocations: 10208)
  Rendered layout layouts/application.html.erb (Duration: 156.6ms | Allocations: 10301)
Completed 500 Internal Server Error in 400ms (ActiveRecord: 317.2ms | Allocations: 17249)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `id' for nil:NilClass):
    2:   <div class="title_container">
    3:     <div class="title">Restaurante <span class="title_key_word"><%= @dish.restaurant.nombre %></span></div>
    4:     <!-- Mostrar el botÃ³n de editar solo si el usuario es el propietario del restaurante -->
    5:     <% if session[:username].present? and user_is_owner?(@restaurant.id) %>
    6:       <!-- Si el restaurante tiene su imported_id distinto de nil, significa que es un restaurante importado y no se puede editar -->
    7:       <% if @restaurant.imported_id.nil? %>
    8:           <%= link_to edit_restaurant_dish_path(@restaurant.id), style: "text-decoration: none" do %>
  
app/views/dishes/show.html.erb:5
Started GET "/restaurants/12/dishes/12" for ::1 at 2023-11-19 17:47:52 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"12"}
  [1m[36mRestaurant Load (45.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (43.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 12], ["restaurant_id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (45.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (43.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (43.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 97.9ms | Allocations: 2331)
  Rendered layouts/_add_comment.html.erb (Duration: 1.8ms | Allocations: 912)
  Rendered dishes/show.html.erb within layouts/application (Duration: 251.3ms | Allocations: 8223)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1347)
  [1m[36mUser Load (43.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (51.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 211.9ms | Allocations: 13308)
  Rendered layout layouts/application.html.erb (Duration: 485.4ms | Allocations: 41853)
Completed 200 OK in 885ms (Views: 81.0ms | ActiveRecord: 767.0ms | Allocations: 56930)


Started GET "/restaurants/12/dishes/12" for ::1 at 2023-11-19 17:48:54 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"12"}
  [1m[36mRestaurant Load (45.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (43.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 12], ["restaurant_id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (45.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (44.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (44.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 96.8ms | Allocations: 2329)
  Rendered layouts/_add_comment.html.erb (Duration: 1.4ms | Allocations: 912)
  Rendered dishes/show.html.erb within layouts/application (Duration: 253.9ms | Allocations: 8207)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1347)
  [1m[36mUser Load (46.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 202.1ms | Allocations: 13295)
  Rendered layout layouts/application.html.erb (Duration: 476.3ms | Allocations: 41824)
Completed 200 OK in 913ms (Views: 71.0ms | ActiveRecord: 789.6ms | Allocations: 56830)


Started GET "/restaurants/12/" for ::1 at 2023-11-19 17:48:57 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (45.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (43.5ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (45.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (48.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (43.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (43.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (44.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (44.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 48.0ms | Allocations: 2101)
  [1m[36mDish Load (44.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (52.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (44.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 46.8ms | Allocations: 1693)
  Rendered layouts/_add_comment.html.erb (Duration: 0.7ms | Allocations: 520)
  [1m[35m (44.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=12 AND posts.autor=users.nombre AND posts.restaurant_id=12[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.2ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 247.8ms | Allocations: 8822)
  Rendered layouts/_header.html.erb (Duration: 2.6ms | Allocations: 1072)
  [1m[36mUser Load (43.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 101.9ms | Allocations: 4639)
  Rendered layout layouts/application.html.erb (Duration: 365.9ms | Allocations: 18258)
Completed 200 OK in 1074ms (Views: 47.5ms | ActiveRecord: 995.6ms | Allocations: 28533)


Started GET "/restaurants/12/dishes/13" for ::1 at 2023-11-19 17:49:01 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"13"}
  [1m[36mRestaurant Load (43.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (42.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 13], ["restaurant_id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (44.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (43.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (43.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 13], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 44.6ms | Allocations: 566)
  Rendered layouts/_add_comment.html.erb (Duration: 0.9ms | Allocations: 726)
  Rendered dishes/show.html.erb within layouts/application (Duration: 136.9ms | Allocations: 2376)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1072)
  [1m[36mUser Load (42.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 93.0ms | Allocations: 4637)
  Rendered layout layouts/application.html.erb (Duration: 234.9ms | Allocations: 11822)
Completed 200 OK in 324ms (Views: 19.1ms | ActiveRecord: 302.0ms | Allocations: 13096)


Started GET "/restaurants/12/dishes/13" for ::1 at 2023-11-19 17:50:52 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"13"}
  [1m[36mRestaurant Load (43.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (51.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 13], ["restaurant_id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:2
  [1m[35m (45.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (43.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 13], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 95.3ms | Allocations: 2331)
  Rendered layouts/_add_comment.html.erb (Duration: 2.1ms | Allocations: 912)
  Rendered dishes/show.html.erb within layouts/application (Duration: 249.0ms | Allocations: 8230)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1347)
  [1m[36mUser Load (42.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 203.7ms | Allocations: 13309)
  Rendered layout layouts/application.html.erb (Duration: 474.6ms | Allocations: 41861)
Completed 200 OK in 880ms (Views: 77.8ms | ActiveRecord: 770.7ms | Allocations: 56952)


Started GET "/restaurants/12/dishes/13" for ::1 at 2023-11-19 17:51:21 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"13"}
  [1m[36mRestaurant Load (43.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (43.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 13], ["restaurant_id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (46.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (45.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (44.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 13], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 95.3ms | Allocations: 2329)
  Rendered layouts/_add_comment.html.erb (Duration: 1.8ms | Allocations: 912)
  Rendered dishes/show.html.erb within layouts/application (Duration: 249.1ms | Allocations: 8214)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1347)
  [1m[36mUser Load (47.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 204.0ms | Allocations: 13298)
  Rendered layout layouts/application.html.erb (Duration: 472.8ms | Allocations: 41834)
Completed 200 OK in 868ms (Views: 64.4ms | ActiveRecord: 769.3ms | Allocations: 56894)


Started GET "/restaurants/12/dishes/13" for ::1 at 2023-11-19 17:51:49 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"13"}
  [1m[36mRestaurant Load (43.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (42.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 13], ["restaurant_id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (45.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (43.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (44.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 13], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 96.4ms | Allocations: 2329)
  Rendered layouts/_add_comment.html.erb (Duration: 1.4ms | Allocations: 912)
  Rendered dishes/show.html.erb within layouts/application (Duration: 244.7ms | Allocations: 8213)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1347)
  [1m[36mUser Load (43.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 203.4ms | Allocations: 13295)
  Rendered layout layouts/application.html.erb (Duration: 471.2ms | Allocations: 41834)
Completed 200 OK in 883ms (Views: 73.1ms | ActiveRecord: 758.6ms | Allocations: 56897)


Started GET "/restaurants/12/" for ::1 at 2023-11-19 17:57:06 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (42.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (45.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (43.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (45.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (43.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (43.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (43.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (44.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 47.3ms | Allocations: 1614)
  [1m[36mDish Load (46.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (44.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (44.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 48.8ms | Allocations: 1709)
  Rendered layouts/_add_comment.html.erb (Duration: 4.0ms | Allocations: 691)
  [1m[35m (45.0ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=12 AND posts.autor=users.nombre AND posts.restaurant_id=12[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 345.5ms | Allocations: 13260)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1344)
  [1m[36mUser Load (43.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 221.2ms | Allocations: 13485)
  Rendered layout layouts/application.html.erb (Duration: 607.0ms | Allocations: 46965)
Completed 200 OK in 1619ms (Views: 115.1ms | ActiveRecord: 1450.5ms | Allocations: 67763)


Started GET "/restaurants/12/" for ::1 at 2023-11-19 17:57:20 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (46.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (50.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (49.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (52.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (43.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (44.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (43.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.1ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (44.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 46.3ms | Allocations: 999)
  [1m[36mDish Load (43.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (43.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (45.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 47.2ms | Allocations: 485)
  Rendered layouts/_add_comment.html.erb (Duration: 1.1ms | Allocations: 547)
  [1m[35m (44.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=12 AND posts.autor=users.nombre AND posts.restaurant_id=12[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 231.5ms | Allocations: 4573)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1084)
  [1m[36mUser Load (42.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 97.4ms | Allocations: 4655)
  Rendered layout layouts/application.html.erb (Duration: 334.8ms | Allocations: 14046)
Completed 200 OK in 901ms (Views: 26.9ms | ActiveRecord: 858.8ms | Allocations: 18992)


Started GET "/restaurants/12/" for ::1 at 2023-11-19 17:57:24 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (48.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (43.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (43.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (44.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (57.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (46.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (43.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (43.1ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (43.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 45.8ms | Allocations: 997)
  [1m[36mDish Load (43.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (44.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (43.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 44.4ms | Allocations: 486)
  Rendered layouts/_add_comment.html.erb (Duration: 0.8ms | Allocations: 545)
  [1m[35m (43.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=12 AND posts.autor=users.nombre AND posts.restaurant_id=12[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 233.0ms | Allocations: 4563)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1072)
  [1m[36mUser Load (49.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 100.1ms | Allocations: 4637)
  Rendered layout layouts/application.html.erb (Duration: 339.5ms | Allocations: 13984)
Completed 200 OK in 902ms (Views: 30.5ms | ActiveRecord: 855.8ms | Allocations: 18899)


Started GET "/restaurants/12/" for ::1 at 2023-11-19 17:57:47 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (44.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (47.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (43.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (47.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (43.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (44.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (45.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (47.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 54.8ms | Allocations: 1492)
  [1m[36mDish Load (46.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (48.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (45.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 48.4ms | Allocations: 485)
  Rendered layouts/_add_comment.html.erb (Duration: 2.3ms | Allocations: 520)
  [1m[35m (45.0ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=12 AND posts.autor=users.nombre AND posts.restaurant_id=12[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 262.9ms | Allocations: 5045)
  Rendered layouts/_header.html.erb (Duration: 7.2ms | Allocations: 1072)
  [1m[36mUser Load (44.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (53.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 110.6ms | Allocations: 4638)
  Rendered layout layouts/application.html.erb (Duration: 394.1ms | Allocations: 14467)
Completed 200 OK in 958ms (Views: 63.5ms | ActiveRecord: 871.1ms | Allocations: 19400)


Started GET "/restaurants/12/" for ::1 at 2023-11-19 18:01:20 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (43.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (43.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (43.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (49.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (42.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (43.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (43.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 46.7ms | Allocations: 2611)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 47.9ms | Allocations: 3326)
  Rendered layout layouts/application.html.erb (Duration: 48.1ms | Allocations: 3419)
Completed 500 Internal Server Error in 1067ms (ActiveRecord: 986.5ms | Allocations: 24269)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (no implicit conversion of Integer into String):
    33:             </div> 
    34:             <% end %>
    35:           <% else %>
    36:              <%= link_to ENV['EINA_EATS_WEB' + "/platosrestaurante/" + locals[:restaurant].imported_id] , style: "text-decoration: none" do %>
    37:               <div class="restaurants_header_edit_button">
    38:                 <span class="restaurants_header_edit_button_text">Editar en EinaEats</span>
    39:               </div> 
  
app/views/restaurants/_header.html.erb:36:in `+'
app/views/restaurants/_header.html.erb:36
app/views/restaurants/show.html.erb:2
Started GET "/restaurants/12/" for ::1 at 2023-11-19 18:03:23 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (42.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (44.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (50.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (63.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (51.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (42.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (43.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (43.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (42.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (42.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (43.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 46.6ms | Allocations: 2156)
  [1m[36mDish Load (44.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (44.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (44.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 47.0ms | Allocations: 1709)
  Rendered layouts/_add_comment.html.erb (Duration: 1.2ms | Allocations: 672)
  [1m[35m (42.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=12 AND posts.autor=users.nombre AND posts.restaurant_id=12[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 333.8ms | Allocations: 13810)
  Rendered layouts/_header.html.erb (Duration: 3.9ms | Allocations: 1344)
  [1m[36mUser Load (44.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (42.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 200.7ms | Allocations: 13423)
  Rendered layout layouts/application.html.erb (Duration: 563.1ms | Allocations: 47547)
Completed 200 OK in 1582ms (Views: 81.4ms | ActiveRecord: 1445.1ms | Allocations: 68499)


Started GET "/restaurants/12/" for ::1 at 2023-11-19 18:06:34 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (46.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (44.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (43.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (42.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (43.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (44.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (42.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (44.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 47.4ms | Allocations: 2155)
  [1m[36mDish Load (43.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (43.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (44.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 46.9ms | Allocations: 1709)
  Rendered layouts/_add_comment.html.erb (Duration: 1.6ms | Allocations: 668)
  [1m[35m (44.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=12 AND posts.autor=users.nombre AND posts.restaurant_id=12[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 337.1ms | Allocations: 13804)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1330)
  [1m[36mUser Load (43.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 201.3ms | Allocations: 13324)
  Rendered layout layouts/application.html.erb (Duration: 558.8ms | Allocations: 47158)
Completed 200 OK in 1582ms (Views: 70.0ms | ActiveRecord: 1447.3ms | Allocations: 67958)


Started GET "/restaurants/12/dishes/12" for ::1 at 2023-11-19 18:06:49 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"12"}
  [1m[36mRestaurant Load (44.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (44.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 12], ["restaurant_id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (42.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (44.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (43.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 47.1ms | Allocations: 1778)
  Rendered layouts/_add_comment.html.erb (Duration: 2.0ms | Allocations: 733)
  Rendered dishes/show.html.erb within layouts/application (Duration: 143.4ms | Allocations: 5116)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1086)
  [1m[36mUser Load (43.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (42.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 97.1ms | Allocations: 4673)
  Rendered layout layouts/application.html.erb (Duration: 249.7ms | Allocations: 14671)
Completed 200 OK in 345ms (Views: 34.4ms | ActiveRecord: 304.9ms | Allocations: 17174)


Started GET "/restaurants/12/dishes/13" for ::1 at 2023-11-19 18:06:59 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"13"}
  [1m[36mRestaurant Load (43.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (43.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 13], ["restaurant_id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (43.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (44.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (47.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 13], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 49.3ms | Allocations: 566)
  Rendered layouts/_add_comment.html.erb (Duration: 2.5ms | Allocations: 726)
  Rendered dishes/show.html.erb within layouts/application (Duration: 143.3ms | Allocations: 2338)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1072)
  [1m[36mUser Load (44.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (48.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 99.4ms | Allocations: 4643)
  Rendered layout layouts/application.html.erb (Duration: 250.6ms | Allocations: 11814)
Completed 200 OK in 342ms (Views: 23.5ms | ActiveRecord: 314.6ms | Allocations: 13083)


Started GET "/restaurants/12/dishes/13" for ::1 at 2023-11-19 18:07:44 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"13"}
  [1m[36mRestaurant Load (44.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (45.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 13], ["restaurant_id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (44.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (46.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (42.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 13], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 44.1ms | Allocations: 566)
  Rendered layouts/_add_comment.html.erb (Duration: 1.0ms | Allocations: 726)
  Rendered dishes/show.html.erb within layouts/application (Duration: 139.4ms | Allocations: 2337)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1072)
  [1m[36mUser Load (44.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 99.3ms | Allocations: 4637)
  Rendered layout layouts/application.html.erb (Duration: 248.6ms | Allocations: 11783)
Completed 200 OK in 344ms (Views: 28.4ms | ActiveRecord: 310.7ms | Allocations: 13064)


Started GET "/restaurants/12/" for ::1 at 2023-11-19 18:07:51 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (47.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (44.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (43.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (44.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (47.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (53.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (45.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 47.7ms | Allocations: 1512)
  [1m[36mDish Load (43.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (47.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (43.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 45.9ms | Allocations: 485)
  Rendered layouts/_add_comment.html.erb (Duration: 2.0ms | Allocations: 520)
  [1m[35m (44.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=12 AND posts.autor=users.nombre AND posts.restaurant_id=12[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 240.8ms | Allocations: 5070)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1072)
  [1m[36mUser Load (48.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 100.3ms | Allocations: 4637)
  Rendered layout layouts/application.html.erb (Duration: 350.8ms | Allocations: 14491)
Completed 200 OK in 913ms (Views: 34.3ms | ActiveRecord: 862.7ms | Allocations: 19434)


Started GET "/restaurants/12/dishes/12" for ::1 at 2023-11-19 18:07:54 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"12"}
  [1m[36mRestaurant Load (43.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (45.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 12], ["restaurant_id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (43.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (43.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (45.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 47.4ms | Allocations: 566)
  Rendered layouts/_add_comment.html.erb (Duration: 0.9ms | Allocations: 726)
  Rendered dishes/show.html.erb within layouts/application (Duration: 138.8ms | Allocations: 2337)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1072)
  [1m[36mUser Load (43.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 95.1ms | Allocations: 4637)
  Rendered layout layouts/application.html.erb (Duration: 241.8ms | Allocations: 11783)
Completed 200 OK in 335ms (Views: 22.6ms | ActiveRecord: 308.9ms | Allocations: 13061)


Started GET "/restaurants/12/dishes/12" for ::1 at 2023-11-19 18:08:46 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"12"}
  [1m[36mRestaurant Load (45.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (45.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 12], ["restaurant_id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (43.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (43.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (42.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 48.5ms | Allocations: 566)
  Rendered layouts/_add_comment.html.erb (Duration: 5.2ms | Allocations: 727)
  Rendered dishes/show.html.erb within layouts/application (Duration: 160.6ms | Allocations: 2338)
  Rendered layouts/_header.html.erb (Duration: 2.9ms | Allocations: 1084)
  [1m[36mUser Load (43.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 97.4ms | Allocations: 4673)
  Rendered layout layouts/application.html.erb (Duration: 360.8ms | Allocations: 11872)
Completed 200 OK in 475ms (Views: 145.1ms | ActiveRecord: 307.1ms | Allocations: 13150)


Started GET "/restaurants/12/dishes/12" for ::1 at 2023-11-19 18:09:07 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"12"}
  [1m[36mRestaurant Load (44.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (43.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 12], ["restaurant_id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (45.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (43.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (43.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 91.9ms | Allocations: 2331)
  Rendered layouts/_add_comment.html.erb (Duration: 1.6ms | Allocations: 906)
  Rendered dishes/show.html.erb within layouts/application (Duration: 241.5ms | Allocations: 8183)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1347)
  [1m[36mUser Load (43.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (50.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 206.4ms | Allocations: 13303)
  Rendered layout layouts/application.html.erb (Duration: 466.4ms | Allocations: 41804)
Completed 200 OK in 861ms (Views: 64.1ms | ActiveRecord: 760.0ms | Allocations: 56877)


Started GET "/restaurants/12/dishes/12" for ::1 at 2023-11-19 18:09:11 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"12"}
  [1m[36mRestaurant Load (115.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (44.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 12], ["restaurant_id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (113.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (46.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (45.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 48.1ms | Allocations: 567)
  Rendered layouts/_add_comment.html.erb (Duration: 2.0ms | Allocations: 726)
  Rendered dishes/show.html.erb within layouts/application (Duration: 218.4ms | Allocations: 2339)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1072)
  [1m[36mUser Load (74.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (157.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 256.5ms | Allocations: 4637)
  Rendered layout layouts/application.html.erb (Duration: 490.6ms | Allocations: 11785)
Completed 200 OK in 659ms (Views: 54.2ms | ActiveRecord: 596.8ms | Allocations: 13054)


Started GET "/restaurants/12/dishes/12" for ::1 at 2023-11-19 18:09:24 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"12"}
  [1m[36mRestaurant Load (44.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (44.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 12], ["restaurant_id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (44.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (48.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (46.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 49.2ms | Allocations: 566)
  Rendered layouts/_add_comment.html.erb (Duration: 1.2ms | Allocations: 726)
  Rendered dishes/show.html.erb within layouts/application (Duration: 147.8ms | Allocations: 2337)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1072)
  [1m[36mUser Load (43.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (57.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 110.4ms | Allocations: 4637)
  Rendered layout layouts/application.html.erb (Duration: 264.0ms | Allocations: 11783)
Completed 200 OK in 358ms (Views: 24.0ms | ActiveRecord: 329.0ms | Allocations: 13071)


Started GET "/restaurants/12/dishes/12" for ::1 at 2023-11-19 18:10:42 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"12"}
  [1m[36mRestaurant Load (45.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (44.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 12], ["restaurant_id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (58.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (43.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (42.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 93.2ms | Allocations: 2331)
  Rendered layouts/_add_comment.html.erb (Duration: 1.4ms | Allocations: 912)
  Rendered dishes/show.html.erb within layouts/application (Duration: 255.4ms | Allocations: 8188)
  Rendered layouts/_header.html.erb (Duration: 3.3ms | Allocations: 1347)
  [1m[36mUser Load (43.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 205.0ms | Allocations: 13304)
  Rendered layout layouts/application.html.erb (Duration: 480.3ms | Allocations: 41814)
Completed 200 OK in 877ms (Views: 68.6ms | ActiveRecord: 774.3ms | Allocations: 56831)


Started GET "/restaurants/12/dishes/12" for ::1 at 2023-11-19 18:10:52 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"12"}
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (43.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 12], ["restaurant_id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (44.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (43.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (43.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 92.5ms | Allocations: 2327)
  Rendered layouts/_add_comment.html.erb (Duration: 1.9ms | Allocations: 905)
  Rendered dishes/show.html.erb within layouts/application (Duration: 239.5ms | Allocations: 8147)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1350)
  [1m[36mUser Load (45.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 202.9ms | Allocations: 13344)
  Rendered layout layouts/application.html.erb (Duration: 474.8ms | Allocations: 41563)
Completed 200 OK in 872ms (Views: 77.2ms | ActiveRecord: 757.3ms | Allocations: 56576)


Started GET "/restaurants/12/dishes/12" for ::1 at 2023-11-19 18:12:32 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"12"}
  [1m[36mRestaurant Load (43.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (43.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 12], ["restaurant_id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (42.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (43.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered dishes/show.html.erb within layouts/application (Duration: 90.2ms | Allocations: 3279)
  Rendered layout layouts/application.html.erb (Duration: 90.5ms | Allocations: 3372)
Completed 500 Internal Server Error in 487ms (ActiveRecord: 448.4ms | Allocations: 18308)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `locals' for #<ActionView::Base:0x00000000124f08>):
    11:           </div> 
    12:         <% end %>
    13:       <% else %>
    14:             <%= link_to "#{ENV['EINA_EATS_WEB']}/platosrestaurante/#{locals[:restaurant].imported_id}", style: "text-decoration: none" do %>
    15:             <div class="restaurants_header_edit_button">
    16:               <span class="restaurants_header_edit_button_text">Editar en EinaEats</span>
    17:             </div> 
  
app/views/dishes/show.html.erb:14
Started GET "/restaurants/12/dishes/12" for ::1 at 2023-11-19 18:12:46 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"12"}
  [1m[36mRestaurant Load (44.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (45.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 12], ["restaurant_id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (44.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (56.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (44.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 101.9ms | Allocations: 2331)
  Rendered layouts/_add_comment.html.erb (Duration: 1.5ms | Allocations: 912)
  Rendered dishes/show.html.erb within layouts/application (Duration: 271.7ms | Allocations: 8199)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1347)
  [1m[36mUser Load (46.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (48.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 223.0ms | Allocations: 13316)
  Rendered layout layouts/application.html.erb (Duration: 519.8ms | Allocations: 41839)
Completed 200 OK in 978ms (Views: 84.2ms | ActiveRecord: 813.0ms | Allocations: 56988)


Started GET "/restaurants/12/dishes/12" for ::1 at 2023-11-19 18:13:44 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"12"}
  [1m[36mRestaurant Load (44.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (44.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 12], ["restaurant_id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (42.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (43.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (43.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 91.6ms | Allocations: 2327)
  Rendered layouts/_add_comment.html.erb (Duration: 1.6ms | Allocations: 905)
  Rendered dishes/show.html.erb within layouts/application (Duration: 244.9ms | Allocations: 8150)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1335)
  [1m[36mUser Load (43.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 209.3ms | Allocations: 13253)
  Rendered layout layouts/application.html.erb (Duration: 474.9ms | Allocations: 41457)
Completed 200 OK in 878ms (Views: 77.0ms | ActiveRecord: 759.3ms | Allocations: 56429)


Started GET "/restaurants/12/dishes/12" for ::1 at 2023-11-19 18:13:54 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"12"}
  [1m[36mRestaurant Load (43.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (45.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 12], ["restaurant_id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (43.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (45.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (44.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 47.3ms | Allocations: 567)
  Rendered layouts/_add_comment.html.erb (Duration: 1.6ms | Allocations: 733)
  Rendered dishes/show.html.erb within layouts/application (Duration: 144.3ms | Allocations: 2348)
  Rendered layouts/_header.html.erb (Duration: 3.6ms | Allocations: 1084)
  [1m[36mUser Load (43.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 102.4ms | Allocations: 4674)
  Rendered layout layouts/application.html.erb (Duration: 272.4ms | Allocations: 11889)
Completed 200 OK in 365ms (Views: 50.1ms | ActiveRecord: 310.9ms | Allocations: 13165)


Started GET "/restaurants/12/dishes/12" for ::1 at 2023-11-19 18:14:05 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"12"}
  [1m[36mRestaurant Load (141.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (73.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 12], ["restaurant_id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (126.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (147.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (98.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 150.5ms | Allocations: 2331)
  Rendered layouts/_add_comment.html.erb (Duration: 1.5ms | Allocations: 911)
  Rendered dishes/show.html.erb within layouts/application (Duration: 530.0ms | Allocations: 8194)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1347)
  [1m[36mUser Load (119.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (69.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 404.6ms | Allocations: 13286)
  Rendered layout layouts/application.html.erb (Duration: 951.3ms | Allocations: 41801)
Completed 200 OK in 2038ms (Views: 71.0ms | ActiveRecord: 1922.2ms | Allocations: 56942)


Started GET "/restaurants/12/dishes/12" for ::1 at 2023-11-19 18:14:28 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"12"}
  [1m[36mRestaurant Load (50.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (44.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 12], ["restaurant_id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (42.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (46.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (46.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 97.2ms | Allocations: 2329)
  Rendered layouts/_add_comment.html.erb (Duration: 1.9ms | Allocations: 912)
  Rendered dishes/show.html.erb within layouts/application (Duration: 247.2ms | Allocations: 8212)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1347)
  [1m[36mUser Load (43.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 206.1ms | Allocations: 13296)
  Rendered layout layouts/application.html.erb (Duration: 477.0ms | Allocations: 41830)
Completed 200 OK in 899ms (Views: 74.3ms | ActiveRecord: 779.3ms | Allocations: 56848)


Started GET "/restaurants/12/dishes/12/edit" for ::1 at 2023-11-19 18:14:35 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"12"}
  [1m[36mDish Load (43.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:32:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 1.3ms | Allocations: 1558)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 2.7ms | Allocations: 2068)
  Rendered layout layouts/application.html.erb (Duration: 2.9ms | Allocations: 2160)
Completed 500 Internal Server Error in 49ms (ActiveRecord: 43.2ms | Allocations: 3419)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (No route matches {:action=>"create", :controller=>"dishes", :restaurant_id=>nil}, missing required keys: [:restaurant_id]):
    1: <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
    2: <%= form_for @dish, url: restaurant_dishes_path(@restaurant), html: { multipart: true } do |form| %>
    3:   <div class="categories_new_form_container">
    4:       <div class="categories_new_name_container">
    5:                 <div>
  
app/views/dishes/_form.html.erb:2
app/views/dishes/edit.html.erb:7
Started GET "/restaurants/12/dishes/12" for ::1 at 2023-11-19 18:14:40 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"12", "id"=>"12"}
  [1m[36mRestaurant Load (56.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (43.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 12], ["restaurant_id", 12], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (51.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (44.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (46.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 47.9ms | Allocations: 568)
  Rendered layouts/_add_comment.html.erb (Duration: 1.0ms | Allocations: 733)
  Rendered dishes/show.html.erb within layouts/application (Duration: 149.7ms | Allocations: 2386)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1084)
  [1m[36mUser Load (44.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (61.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 116.7ms | Allocations: 4673)
  Rendered layout layouts/application.html.erb (Duration: 271.9ms | Allocations: 11926)
Completed 200 OK in 381ms (Views: 24.0ms | ActiveRecord: 348.8ms | Allocations: 13225)


Started GET "/reviews/new?review_to=12&review_type=Dish" for ::1 at 2023-11-19 19:04:53 +0100
Processing by ReviewsController#new as HTML
  Parameters: {"review_to"=>"12", "review_type"=>"Dish"}
  Rendering layout layouts/application.html.erb
  Rendering reviews/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 4.7ms | Allocations: 2432)
  Rendered reviews/new.html.erb within layouts/application (Duration: 5.5ms | Allocations: 2671)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1072)
  [1m[36mUser Load (49.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (40.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 986.9ms | Allocations: 7558)
  Rendered layout layouts/application.html.erb (Duration: 997.5ms | Allocations: 15040)
Completed 200 OK in 1015ms (Views: 536.1ms | ActiveRecord: 462.2ms | Allocations: 22466)


Started GET "/restaurants" for ::1 at 2023-11-19 19:12:20 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (45.5ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (44.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (45.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (45.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (48.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (44.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (50.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (45.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (43.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 215.2ms | Allocations: 15370)
  Rendered layouts/_header.html.erb (Duration: 2.4ms | Allocations: 1085)
  [1m[36mUser Load (44.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 191.0ms | Allocations: 4703)
  Rendered layout layouts/application.html.erb (Duration: 414.7ms | Allocations: 25148)
Completed 200 OK in 1728ms (Views: 142.9ms | ActiveRecord: 1053.4ms | Allocations: 35992)


Started GET "/restaurants/1" for ::1 at 2023-11-19 19:12:24 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (45.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (44.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (44.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (46.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (43.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (45.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (44.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.1ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (45.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 50.1ms | Allocations: 2420)
  [1m[36mDish Load (44.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (45.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (44.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 872)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 434)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 436)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 433)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 437)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 436)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 433)
  Rendered layouts/_comment.html.erb (Duration: 114.3ms | Allocations: 11392)
  Rendered layouts/_add_comment.html.erb (Duration: 0.8ms | Allocations: 526)
  [1m[35m (46.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 355.6ms | Allocations: 19102)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1072)
  [1m[36mUser Load (44.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 98.6ms | Allocations: 4641)
  Rendered layout layouts/application.html.erb (Duration: 460.4ms | Allocations: 28557)
Completed 200 OK in 1303ms (Views: 144.5ms | ActiveRecord: 1036.5ms | Allocations: 38318)


Started GET "/restaurants/1/edit" for ::1 at 2023-11-19 19:12:29 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (44.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:56:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  [1m[36mCategory Load (44.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 50.3ms | Allocations: 3635)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 51.1ms | Allocations: 3870)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1072)
  [1m[36mUser Load (43.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 94.5ms | Allocations: 4638)
  Rendered layout layouts/application.html.erb (Duration: 150.9ms | Allocations: 13291)
Completed 200 OK in 197ms (Views: 19.6ms | ActiveRecord: 175.7ms | Allocations: 14039)


Started PATCH "/restaurants/1" for ::1 at 2023-11-19 19:12:34 +0100
Processing by RestaurantsController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "restaurant"=>{"nombre"=>"Goiko", "telefono"=>"111111111", "direccion"=>"Calle 1233", "horario"=>"todos los dias", "categoria"=>"burger"}, "button"=>"", "id"=>"1"}
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:60:in `update'
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (43.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/restaurants_controller.rb:62:in `update'
  [1m[36mRestaurant Update (91.3ms)[0m  [1m[33mUPDATE "restaurants" SET "nombre" = $1 WHERE "restaurants"."id" = $2[0m  [["nombre", "Goiko"], ["id", 1]]
  â†³ app/controllers/restaurants_controller.rb:62:in `update'
  [1m[36mTRANSACTION (44.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/restaurants_controller.rb:62:in `update'
Redirected to http://localhost:3000/restaurants/1
Completed 302 Found in 185ms (ActiveRecord: 222.5ms | Allocations: 3243)


Started GET "/restaurants/1" for ::1 at 2023-11-19 19:12:34 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (43.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (43.8ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (44.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (44.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (43.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (44.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (44.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (46.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 49.2ms | Allocations: 1834)
  [1m[36mDish Load (44.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (48.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (43.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 609)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 433)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 436)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 433)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 437)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 436)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 433)
  Rendered layouts/_comment.html.erb (Duration: 57.9ms | Allocations: 8549)
  Rendered layouts/_add_comment.html.erb (Duration: 1.0ms | Allocations: 520)
  [1m[35m (44.1ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 253.9ms | Allocations: 13704)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1072)
  [1m[36mUser Load (44.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 104.2ms | Allocations: 4638)
  Rendered layout layouts/application.html.erb (Duration: 364.4ms | Allocations: 23126)
Completed 200 OK in 956ms (Views: 48.9ms | ActiveRecord: 892.6ms | Allocations: 28844)


Started GET "/categories" for ::1 at 2023-11-19 19:14:28 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (48.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (43.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 103.2ms | Allocations: 4904)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1110)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.1ms | Allocations: 4567)
  Rendered layout layouts/application.html.erb (Duration: 163.6ms | Allocations: 14356)
Completed 200 OK in 165ms (Views: 28.2ms | ActiveRecord: 136.2ms | Allocations: 14850)


Started GET "/categories" for ::1 at 2023-11-19 19:19:28 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (55.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (44.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 312.1ms | Allocations: 11892)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1357)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 212.7ms | Allocations: 15188)
  Rendered layout layouts/application.html.erb (Duration: 543.3ms | Allocations: 47372)
Completed 200 OK in 553ms (Views: 127.4ms | ActiveRecord: 418.5ms | Allocations: 49661)


Started GET "/categories" for ::1 at 2023-11-19 19:20:53 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (44.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (44.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 314.0ms | Allocations: 11843)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1369)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  Rendered layouts/_sidenav.html.erb (Duration: 221.1ms | Allocations: 14220)
  Rendered layout layouts/application.html.erb (Duration: 556.3ms | Allocations: 46383)
Completed 500 Internal Server Error in 570ms (ActiveRecord: 430.8ms | Allocations: 48633)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `mis_restaurantes_path' for #<ActionView::Base:0x0000000014fc58>):
    24:   <div>
    25:     <% if user_has_restaurants() %> 
    26:       <li>
    27:         <%= link_to mis_restaurantes_path, id: "mis_restaurantes", class: "sidenav_element" do %>
    28:           <%= image_tag "my-restaurant", class: "sidenav_element_icon" %>
    29:           <div id="mis_restaurantes_text", class="sidenav_element_text">Restaurantes</div>
    30:         <% end %>
  
app/views/layouts/_sidenav.html.erb:27
app/views/layouts/application.html.erb:21
Started GET "/restaurants/1" for ::1 at 2023-11-19 19:24:18 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (45.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (45.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (43.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (44.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (44.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (46.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (43.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (43.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (46.0ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (44.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 48.6ms | Allocations: 2974)
  [1m[36mDish Load (44.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (44.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (46.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 869)
  Rendered layouts/_reaction.html.erb (Duration: 11.3ms | Allocations: 435)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 436)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 433)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 437)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 436)
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 433)
  Rendered layouts/_comment.html.erb (Duration: 81.2ms | Allocations: 11271)
  Rendered layouts/_add_comment.html.erb (Duration: 1.1ms | Allocations: 674)
  [1m[35m (44.2ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 377.2ms | Allocations: 24436)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1334)
  [1m[36mUser Load (43.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (50.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 213.2ms | Allocations: 13401)
  Rendered layout layouts/application.html.erb (Duration: 614.0ms | Allocations: 57973)
Completed 200 OK in 1741ms (Views: 113.3ms | ActiveRecord: 1540.1ms | Allocations: 84075)


Started GET "/restaurants/1" for ::1 at 2023-11-19 19:24:52 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (50.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (47.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (45.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (55.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (44.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (45.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (46.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (45.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 55.8ms | Allocations: 2964)
  [1m[36mDish Load (47.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (44.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (47.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 864)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 434)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 436)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 433)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 437)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 436)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 433)
  Rendered layouts/_comment.html.erb (Duration: 65.2ms | Allocations: 11230)
  Rendered layouts/_add_comment.html.erb (Duration: 2.0ms | Allocations: 666)
  [1m[35m (45.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 374.5ms | Allocations: 24350)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1330)
  [1m[36mUser Load (45.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 209.9ms | Allocations: 13325)
  Rendered layout layouts/application.html.erb (Duration: 605.4ms | Allocations: 57699)
Completed 200 OK in 1819ms (Views: 105.4ms | ActiveRecord: 1595.2ms | Allocations: 83645)


Started GET "/restaurants/1" for ::1 at 2023-11-19 19:25:11 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (44.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (44.1ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (161.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (45.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (156.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (44.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (154.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (146.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (157.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (155.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (145.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 150.9ms | Allocations: 2958)
  [1m[36mDish Load (44.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (152.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (44.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 863)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 434)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 436)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 433)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 437)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 436)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 433)
  Rendered layouts/_comment.html.erb (Duration: 61.3ms | Allocations: 11228)
  Rendered layouts/_add_comment.html.erb (Duration: 1.1ms | Allocations: 666)
  [1m[35m (140.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 765.1ms | Allocations: 24343)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1338)
  [1m[36mUser Load (44.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 423.5ms | Allocations: 13401)
  Rendered layout layouts/application.html.erb (Duration: 1221.1ms | Allocations: 57871)
Completed 200 OK in 3511ms (Views: 103.5ms | ActiveRecord: 3331.7ms | Allocations: 83859)


Started GET "/users/mis_restaurantes" for ::1 at 2023-11-19 19:25:17 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"mis_restaurantes"}
  [1m[36mUser Load (44.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (51.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (43.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (43.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (45.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-19 18:25:17.259389')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (48.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-19 18:25:17.306232')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (43.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-19 18:25:17.355816')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (44.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (46.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (44.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:25:17.495188')[0m  [["reviewable_id", 8], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (44.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 8]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (43.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "8"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (43.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "8"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (52.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:25:17.729432')[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (44.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (43.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:25:17.829256')[0m  [["reviewable_id", 6], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (46.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:25:17.874976')[0m  [["reviewable_id", 7], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (44.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:25:17.924302')[0m  [["reviewable_id", 8], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (45.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (43.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (46.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:25:18.063154')[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (43.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (45.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:25:18.156658')[0m  [["reviewable_id", 1], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (44.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:25:18.203130')[0m  [["reviewable_id", 2], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (44.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:25:18.248700')[0m  [["reviewable_id", 3], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (46.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (43.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (46.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:25:18.387460')[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (44.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (48.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:25:18.482601')[0m  [["reviewable_id", 12], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (51.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:25:18.532894')[0m  [["reviewable_id", 13], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (48.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "12"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (49.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "12"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 6.6ms | Allocations: 3305)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1077)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 7.0ms | Allocations: 4413)
  Rendered layout layouts/application.html.erb (Duration: 21.4ms | Allocations: 12527)
Completed 200 OK in 1688ms (Views: 22.2ms | ActiveRecord: 1604.6ms | Allocations: 32430)


Started GET "/users/mis_restaurantes" for ::1 at 2023-11-19 19:27:04 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"mis_restaurantes"}
  [1m[36mUser Load (43.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (43.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (44.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (45.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (43.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-19 18:27:05.043758')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (44.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-19 18:27:05.089102')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (44.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-19 18:27:05.136464')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (44.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (44.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (44.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:27:05.438493')[0m  [["reviewable_id", 8], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (43.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 8]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (44.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "8"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (44.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "8"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (44.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:27:05.768984')[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (46.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (43.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:27:05.865141')[0m  [["reviewable_id", 6], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (43.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:27:05.909958')[0m  [["reviewable_id", 7], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (44.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:27:05.955222')[0m  [["reviewable_id", 8], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (43.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (43.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (44.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:27:06.092073')[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (44.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (43.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:27:06.183587')[0m  [["reviewable_id", 1], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (44.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:27:06.228854')[0m  [["reviewable_id", 2], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (45.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:27:06.274385')[0m  [["reviewable_id", 3], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (47.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (44.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (43.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:27:06.416060')[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (44.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (44.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:27:06.507400')[0m  [["reviewable_id", 12], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (44.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:27:06.553309')[0m  [["reviewable_id", 13], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (44.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "12"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (43.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "12"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 6.8ms | Allocations: 3179)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1325)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 6.4ms | Allocations: 5102)
  Rendered layout layouts/application.html.erb (Duration: 35.3ms | Allocations: 28375)
Completed 200 OK in 2192ms (Views: 38.1ms | ActiveRecord: 1959.8ms | Allocations: 74508)


Started GET "/users/mis_restaurantes" for ::1 at 2023-11-19 19:27:08 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"mis_restaurantes"}
  [1m[36mUser Load (43.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (45.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (44.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (43.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (44.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-19 18:27:08.978824')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (43.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-19 18:27:09.024462')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (43.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-19 18:27:09.069627')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (44.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (45.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (45.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:27:09.208588')[0m  [["reviewable_id", 8], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (47.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 8]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (44.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "8"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (44.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "8"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (44.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:27:09.395800')[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (44.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (44.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:27:09.487311')[0m  [["reviewable_id", 6], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (44.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:27:09.532889')[0m  [["reviewable_id", 7], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (46.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:27:09.578266')[0m  [["reviewable_id", 8], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (43.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (44.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (43.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:27:09.717227')[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (43.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (46.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:27:09.808622')[0m  [["reviewable_id", 1], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (44.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:27:09.856114')[0m  [["reviewable_id", 2], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (43.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:27:09.901761')[0m  [["reviewable_id", 3], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (43.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (48.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (43.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:27:10.041165')[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (44.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (44.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:27:10.132844')[0m  [["reviewable_id", 12], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (44.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:27:10.178271')[0m  [["reviewable_id", 13], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (44.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "12"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (43.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "12"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 3.1ms | Allocations: 2247)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1073)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 5.8ms | Allocations: 4384)
  Rendered layout layouts/application.html.erb (Duration: 17.8ms | Allocations: 11419)
Completed 200 OK in 1537ms (Views: 18.3ms | ActiveRecord: 1469.0ms | Allocations: 28679)


Started GET "/users/mis_restaurantes" for ::1 at 2023-11-19 19:32:05 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"mis_restaurantes"}
  [1m[36mUser Load (54.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (46.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (46.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (46.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (44.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-19 18:32:05.551734')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (45.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-19 18:32:05.600516')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (44.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-19 18:32:05.649783')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (51.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (45.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (48.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:05.800905')[0m  [["reviewable_id", 8], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (55.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 8]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (44.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "8"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (43.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "8"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (47.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:06.001929')[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (45.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (44.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:06.097751')[0m  [["reviewable_id", 6], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (45.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:06.146314')[0m  [["reviewable_id", 7], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (47.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:06.197534')[0m  [["reviewable_id", 8], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (52.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (48.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (49.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:06.364078')[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (49.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (46.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:06.484706')[0m  [["reviewable_id", 1], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (49.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:06.538303')[0m  [["reviewable_id", 2], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (47.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:06.595366')[0m  [["reviewable_id", 3], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (46.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (51.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (46.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:06.887022')[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (47.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (56.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:07.005723')[0m  [["reviewable_id", 12], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (48.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:07.070654')[0m  [["reviewable_id", 13], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (51.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "12"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (48.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "12"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 53.8ms | Allocations: 2266)
  Rendered layouts/_header.html.erb (Duration: 6.4ms | Allocations: 1077)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 76.1ms | Allocations: 4408)
  Rendered layout layouts/application.html.erb (Duration: 187.5ms | Allocations: 11479)
Completed 200 OK in 2112ms (Views: 191.8ms | ActiveRecord: 1585.3ms | Allocations: 28734)


Started GET "/users/Mr.Dani" for ::1 at 2023-11-19 19:32:10 +0100
Processing by UsersController#show as */*
  Parameters: {"id"=>"Mr"}
  [1m[36mUser Load (47.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (47.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (48.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (48.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (63.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-19 18:32:10.973246')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (50.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-19 18:32:11.043204')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (49.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-19 18:32:11.109281')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (49.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (50.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (49.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:11.289418')[0m  [["reviewable_id", 8], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (49.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 8]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (45.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "8"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (56.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "8"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (46.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:11.520544')[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (47.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (46.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:11.625873')[0m  [["reviewable_id", 6], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (46.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:11.675506')[0m  [["reviewable_id", 7], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (44.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:11.725832')[0m  [["reviewable_id", 8], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (59.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (47.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (47.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:11.893294')[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (43.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (44.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:11.995603')[0m  [["reviewable_id", 1], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (47.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:12.044897')[0m  [["reviewable_id", 2], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (61.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:12.095572')[0m  [["reviewable_id", 3], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (43.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (47.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (47.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:12.255685')[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (47.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (48.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:12.356875')[0m  [["reviewable_id", 12], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (44.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:12.408853')[0m  [["reviewable_id", 13], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (44.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "12"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (45.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "12"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 5.9ms | Allocations: 2265)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1077)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 7.2ms | Allocations: 4408)
  Rendered layout layouts/application.html.erb (Duration: 21.1ms | Allocations: 11475)
Completed 200 OK in 1832ms (Views: 21.7ms | ActiveRecord: 1602.1ms | Allocations: 28782)


Started GET "/users/mis_restaurantes" for ::1 at 2023-11-19 19:32:16 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"mis_restaurantes"}
  [1m[36mUser Load (43.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (44.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (43.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (43.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (45.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-19 18:32:16.202284')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (44.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-19 18:32:16.249089')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (44.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-19 18:32:16.295836')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (45.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (43.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (44.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:16.435720')[0m  [["reviewable_id", 8], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (43.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 8]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (43.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "8"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (45.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "8"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (52.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:16.621781')[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (47.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (45.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:16.740962')[0m  [["reviewable_id", 6], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (49.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:16.794367')[0m  [["reviewable_id", 7], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (46.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:16.869546')[0m  [["reviewable_id", 8], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (50.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (48.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (47.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:17.044400')[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (46.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (69.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:17.153007')[0m  [["reviewable_id", 1], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (56.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:17.235925')[0m  [["reviewable_id", 2], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (52.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:17.300944')[0m  [["reviewable_id", 3], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (52.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (54.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (44.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:17.487720')[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (47.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (43.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:17.593678')[0m  [["reviewable_id", 12], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (46.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:17.639475')[0m  [["reviewable_id", 13], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (46.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "12"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (47.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "12"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 25.4ms | Allocations: 2247)
  Rendered layouts/_header.html.erb (Duration: 7.0ms | Allocations: 1073)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 56.3ms | Allocations: 4384)
  Rendered layout layouts/application.html.erb (Duration: 130.0ms | Allocations: 11419)
Completed 200 OK in 1912ms (Views: 132.3ms | ActiveRecord: 1562.1ms | Allocations: 28668)


Started GET "/users/mis_restaurantes" for ::1 at 2023-11-19 19:32:46 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"mis_restaurantes"}
  [1m[36mUser Load (44.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (45.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (47.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (43.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (44.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-19 18:32:47.491578')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (45.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-19 18:32:47.537241')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (44.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-19 18:32:47.584602')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (45.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (43.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (44.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:47.905550')[0m  [["reviewable_id", 8], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (43.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 8]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (44.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "8"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (45.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "8"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (43.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:48.252157')[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (49.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (48.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:48.355387')[0m  [["reviewable_id", 6], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (47.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:48.406324')[0m  [["reviewable_id", 7], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (51.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:48.456010')[0m  [["reviewable_id", 8], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (47.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (44.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (43.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:48.612058')[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (48.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (47.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:48.707565')[0m  [["reviewable_id", 1], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (46.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:48.757096')[0m  [["reviewable_id", 2], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (46.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:48.805201')[0m  [["reviewable_id", 3], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (45.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (46.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (44.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:48.949002')[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (43.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (48.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:49.043618')[0m  [["reviewable_id", 12], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (44.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:32:49.095550')[0m  [["reviewable_id", 13], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (45.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "12"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (45.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "12"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 10.5ms | Allocations: 3184)
  Rendered layouts/_header.html.erb (Duration: 5.4ms | Allocations: 1325)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 9.5ms | Allocations: 5102)
  Rendered layout layouts/application.html.erb (Duration: 44.6ms | Allocations: 28390)
Completed 200 OK in 2332ms (Views: 47.1ms | ActiveRecord: 2022.7ms | Allocations: 74678)


Started GET "/users/mis_restaurantes" for ::1 at 2023-11-19 19:33:18 +0100
Processing by UsersController#mis_restaurantes as HTML
  [1m[36mUser Load (43.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:77:in `mis_restaurantes'
  Rendering layout layouts/application.html.erb
  Rendering users/mis_restaurantes.html.erb within layouts/application
  Rendered users/mis_restaurantes.html.erb within layouts/application (Duration: 3.6ms | Allocations: 1121)
  Rendered layout layouts/application.html.erb (Duration: 5.5ms | Allocations: 1214)
Completed 500 Internal Server Error in 311ms (ActiveRecord: 142.3ms | Allocations: 12541)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `nombre' for nil:NilClass):
    1: <div class="posts_container">
    2:   <div class="title_container categories_title_container">
    3:     <h1 class="title"><span class="title_key_word"><%= @category.nombre %></span> en Zaragoza</h1>
    4:     <% if session[:username].present? and getCurrentUser.esAdmin %>
    5:     <%= link_to restaurant_path, class: "categories_new_button" do %>
    6:       <div>Editar</div>
  
app/views/users/mis_restaurantes.html.erb:3
app/controllers/users_controller.rb:80:in `mis_restaurantes'
Started GET "/users/Mr.Dani" for ::1 at 2023-11-19 19:34:59 +0100
Processing by UsersController#show as */*
  Parameters: {"id"=>"Mr"}
  [1m[36mUser Load (83.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (69.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (120.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (67.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (61.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-19 18:35:02.084184')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (80.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-19 18:35:02.151837')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (48.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-19 18:35:02.234259')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (80.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (109.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (63.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:35:02.763386')[0m  [["reviewable_id", 8], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (78.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 8]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (66.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "8"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (43.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "8"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (86.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:35:03.294444')[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (80.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (44.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:35:03.472113')[0m  [["reviewable_id", 6], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (47.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:35:03.518739')[0m  [["reviewable_id", 7], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (60.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:35:03.568562')[0m  [["reviewable_id", 8], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (82.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (79.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (124.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:35:03.795357')[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (66.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (67.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:35:03.988983')[0m  [["reviewable_id", 1], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (72.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:35:04.057378')[0m  [["reviewable_id", 2], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (74.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:35:04.131308')[0m  [["reviewable_id", 3], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (120.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (69.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (67.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:35:04.402635')[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (44.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (95.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:35:04.523123')[0m  [["reviewable_id", 12], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (79.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:35:04.620965')[0m  [["reviewable_id", 13], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (46.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "12"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (106.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "12"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 31.2ms | Allocations: 3198)
  Rendered layouts/_header.html.erb (Duration: 6.8ms | Allocations: 1329)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 45.1ms | Allocations: 5127)
  Rendered layout layouts/application.html.erb (Duration: 180.6ms | Allocations: 28445)
Completed 200 OK in 4330ms (Views: 187.9ms | ActiveRecord: 3796.7ms | Allocations: 74836)


Started GET "/users/Mr.Dani" for ::1 at 2023-11-19 19:40:03 +0100
Processing by UsersController#show as */*
  Parameters: {"id"=>"Mr"}
  [1m[36mUser Load (50.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (45.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (43.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (44.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
Started GET "/users/mis_restaurantes" for ::1 at 2023-11-19 19:40:05 +0100
  [1m[36mPost Count (50.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-19 18:40:05.888353')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (46.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-19 18:40:05.942644')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (46.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-19 18:40:05.995344')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (44.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (44.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (43.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:06.342555')[0m  [["reviewable_id", 8], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (45.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 8]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (45.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "8"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (49.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "8"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (59.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:06.724027')[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (46.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (48.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:06.874336')[0m  [["reviewable_id", 6], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (47.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:06.928958')[0m  [["reviewable_id", 7], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (48.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:06.978585')[0m  [["reviewable_id", 8], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (47.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (48.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (46.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:07.148474')[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (44.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (44.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:07.253621')[0m  [["reviewable_id", 1], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (49.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:07.301732')[0m  [["reviewable_id", 2], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (53.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:07.359527')[0m  [["reviewable_id", 3], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (53.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (44.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (51.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:07.538566')[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (49.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (44.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:07.652972')[0m  [["reviewable_id", 12], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (50.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:07.700012')[0m  [["reviewable_id", 13], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (48.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "12"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (48.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "12"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 33.8ms | Allocations: 3202)
  Rendered layouts/_header.html.erb (Duration: 9.5ms | Allocations: 1329)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 74.9ms | Allocations: 5126)
  Rendered layout layouts/application.html.erb (Duration: 211.9ms | Allocations: 28449)
Completed 200 OK in 3127ms (Views: 223.6ms | ActiveRecord: 2110.2ms | Allocations: 75150)


Processing by UsersController#mis_restaurantes as HTML
  [1m[36mUser Load (44.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:77:in `mis_restaurantes'
  Rendering layout layouts/application.html.erb
  Rendering users/mis_restaurantes.html.erb within layouts/application
  Rendered users/mis_restaurantes.html.erb within layouts/application (Duration: 8.1ms | Allocations: 1296)
  Rendered layout layouts/application.html.erb (Duration: 8.9ms | Allocations: 1389)
Completed 500 Internal Server Error in 322ms (ActiveRecord: 139.9ms | Allocations: 12681)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `each' for nil:NilClass):
     5:   <% end %>
     6: </div>
     7: <ul class="categories_list">
     8:   <% @restauants.each do |restaurant| %>
     9:     <li>
    10:       <%= link_to restaurant_path(restaurant) do %>
    11:         <div class="restaurant_box">
  
app/views/users/mis_restaurantes.html.erb:8
app/controllers/users_controller.rb:80:in `mis_restaurantes'
Started GET "/users/mis_restaurantes" for ::1 at 2023-11-19 19:40:11 +0100
Processing by UsersController#mis_restaurantes as HTML
  [1m[36mUser Load (43.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:77:in `mis_restaurantes'
  Rendering layout layouts/application.html.erb
  Rendering users/mis_restaurantes.html.erb within layouts/application
  Rendered users/mis_restaurantes.html.erb within layouts/application (Duration: 0.5ms | Allocations: 1015)
  Rendered layout layouts/application.html.erb (Duration: 0.7ms | Allocations: 1107)
Completed 500 Internal Server Error in 46ms (ActiveRecord: 43.4ms | Allocations: 1959)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `each' for nil:NilClass):
     5:   <% end %>
     6: </div>
     7: <ul class="categories_list">
     8:   <% @restauants.each do |restaurant| %>
     9:     <li>
    10:       <%= link_to restaurant_path(restaurant) do %>
    11:         <div class="restaurant_box">
  
app/views/users/mis_restaurantes.html.erb:8
app/controllers/users_controller.rb:80:in `mis_restaurantes'
Started GET "/users/Mr.Dani" for ::1 at 2023-11-19 19:40:30 +0100
Processing by UsersController#show as */*
  Parameters: {"id"=>"Mr"}
  [1m[36mUser Load (45.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (47.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (46.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (48.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (50.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-19 18:40:30.527756')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (46.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-19 18:40:30.583214')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (44.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-19 18:40:30.632856')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (47.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (50.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (47.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:30.934269')[0m  [["reviewable_id", 8], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (47.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 8]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (44.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "8"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (47.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "8"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (46.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:31.304488')[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (43.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (50.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:31.412898')[0m  [["reviewable_id", 6], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (53.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:31.473562')[0m  [["reviewable_id", 7], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (44.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:31.529871')[0m  [["reviewable_id", 8], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (44.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (43.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (48.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:31.669733')[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (45.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (43.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:31.774305')[0m  [["reviewable_id", 1], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (45.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:31.819511')[0m  [["reviewable_id", 2], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (45.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:31.872945')[0m  [["reviewable_id", 3], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (52.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (43.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (43.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:32.020390')[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (44.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (45.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:32.112525')[0m  [["reviewable_id", 12], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (45.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:32.160419')[0m  [["reviewable_id", 13], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (47.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "12"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (45.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "12"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 11.1ms | Allocations: 3168)
  Rendered layouts/_header.html.erb (Duration: 4.2ms | Allocations: 1329)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 22.2ms | Allocations: 5127)
  Rendered layout layouts/application.html.erb (Duration: 71.3ms | Allocations: 28407)
Completed 200 OK in 2301ms (Views: 71.8ms | ActiveRecord: 1974.3ms | Allocations: 64384)


Started GET "/users/Mr.Dani" for ::1 at 2023-11-19 19:40:34 +0100
Processing by UsersController#show as */*
  Parameters: {"id"=>"Mr"}
  [1m[36mUser Load (47.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (47.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (47.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (48.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (47.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-19 18:40:34.824968')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (46.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-19 18:40:34.878884')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (48.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-19 18:40:34.942240')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (47.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (44.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (43.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:35.097425')[0m  [["reviewable_id", 8], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (44.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 8]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (43.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "8"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (47.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "8"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (50.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:35.288298')[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (48.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (48.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:35.392029')[0m  [["reviewable_id", 6], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (43.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:35.446799')[0m  [["reviewable_id", 7], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (45.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:35.510130')[0m  [["reviewable_id", 8], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (44.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (45.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (45.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:35.661043')[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (44.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (44.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:35.756176')[0m  [["reviewable_id", 1], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (44.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:35.807816')[0m  [["reviewable_id", 2], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (46.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:35.857488')[0m  [["reviewable_id", 3], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (44.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (44.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (44.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:36.003208')[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (44.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (46.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:36.098614')[0m  [["reviewable_id", 12], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (46.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 18:40:36.155746')[0m  [["reviewable_id", 13], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (46.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "12"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (48.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "12"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 8.5ms | Allocations: 2253)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1077)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 36.9ms | Allocations: 4392)
  Rendered layout layouts/application.html.erb (Duration: 54.1ms | Allocations: 11450)
Completed 200 OK in 1753ms (Views: 54.5ms | ActiveRecord: 1518.8ms | Allocations: 28685)


Started GET "/users/mis_restaurantes" for ::1 at 2023-11-19 19:49:21 +0100
Processing by UsersController#mis_restaurantes as HTML
Started GET "/users/mis_restaurantes" for ::1 at 2023-11-19 19:49:21 +0100
Processing by UsersController#mis_restaurantes as HTML
  [1m[36mUser Load (47.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:77:in `mis_restaurantes'
  Rendering layout layouts/application.html.erb
  Rendering users/mis_restaurantes.html.erb within layouts/application
  Rendered users/mis_restaurantes.html.erb within layouts/application (Duration: 8.0ms | Allocations: 1016)
  Rendered layout layouts/application.html.erb (Duration: 10.6ms | Allocations: 1117)
Completed 500 Internal Server Error in 1117ms (ActiveRecord: 534.6ms | Allocations: 7863)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `each' for nil:NilClass):
     5:   <% end %>
     6: </div>
     7: <ul class="categories_list">
     8:   <% @restauants.each do |restaurant| %>
     9:     <li>
    10:       <%= link_to restaurant_path(restaurant) do %>
    11:         <div class="restaurant_box">
  
app/views/users/mis_restaurantes.html.erb:8
app/controllers/users_controller.rb:80:in `mis_restaurantes'
  [1m[36mUser Load (53.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:77:in `mis_restaurantes'
  Rendering layout layouts/application.html.erb
  Rendering users/mis_restaurantes.html.erb within layouts/application
  Rendered users/mis_restaurantes.html.erb within layouts/application (Duration: 11.7ms | Allocations: 1015)
  Rendered layout layouts/application.html.erb (Duration: 29.6ms | Allocations: 2804)
Completed 500 Internal Server Error in 3036ms (ActiveRecord: 2193.3ms | Allocations: 347393)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `each' for nil:NilClass):
     5:   <% end %>
     6: </div>
     7: <ul class="categories_list">
     8:   <% @restauants.each do |restaurant| %>
     9:     <li>
    10:       <%= link_to restaurant_path(restaurant) do %>
    11:         <div class="restaurant_box">
  
app/views/users/mis_restaurantes.html.erb:8
app/controllers/users_controller.rb:80:in `mis_restaurantes'
Started GET "/users/mis_restaurantes" for ::1 at 2023-11-19 19:57:36 +0100
Processing by UsersController#mis_restaurantes as HTML
  [1m[36mUser Load (46.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:77:in `mis_restaurantes'
  Rendering layout layouts/application.html.erb
  Rendering users/mis_restaurantes.html.erb within layouts/application
  Rendered users/mis_restaurantes.html.erb within layouts/application (Duration: 48.9ms | Allocations: 2480)
  Rendered layout layouts/application.html.erb (Duration: 49.7ms | Allocations: 2573)
Completed 500 Internal Server Error in 1101ms (ActiveRecord: 456.2ms | Allocations: 16931)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (PG::UndefinedColumn: ERROR:  column restaurants.user_id does not exist
LINE 1: SELECT "restaurants".* FROM "restaurants" WHERE "restaurants...
                                                        ^
):
     5:   <% end %>
     6: </div>
     7: <ul class="categories_list">
     8:   <% @restaurants.each do |restaurant| %>
     9:     <li>
    10:       <%= link_to restaurant_path(restaurant) do %>
    11:         <div class="restaurant_box">
  
Started GET "/users/mis_restaurantes" for ::1 at 2023-11-19 19:59:21 +0100
Processing by UsersController#mis_restaurantes as HTML
  [1m[36mUser Load (49.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:77:in `mis_restaurantes'
  Rendering layout layouts/application.html.erb
  Rendering users/mis_restaurantes.html.erb within layouts/application
  Rendered users/mis_restaurantes.html.erb within layouts/application (Duration: 150.7ms | Allocations: 2774)
  Rendered layout layouts/application.html.erb (Duration: 151.1ms | Allocations: 2867)
Completed 500 Internal Server Error in 493ms (ActiveRecord: 279.0ms | Allocations: 14208)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (PG::UndefinedColumn: ERROR:  column restaurants.restaurant_id does not exist
LINE 1: SELECT "restaurants".* FROM "restaurants" WHERE "restaurants...
                                                        ^
):
     5:   <% end %>
     6: </div>
     7: <ul class="categories_list">
     8:   <% @restaurants.each do |restaurant| %>
     9:     <li>
    10:       <%= link_to restaurant_path(restaurant) do %>
    11:         <div class="restaurant_box">
  
Started GET "/users/mis_restaurantes" for ::1 at 2023-11-19 19:59:38 +0100
Processing by UsersController#mis_restaurantes as HTML
  [1m[36mUser Load (43.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:77:in `mis_restaurantes'
  Rendering layout layouts/application.html.erb
  Rendering users/mis_restaurantes.html.erb within layouts/application
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1[0m  [["id", nil]]
  â†³ app/views/users/mis_restaurantes.html.erb:8
  Rendered users/mis_restaurantes.html.erb within layouts/application (Duration: 148.9ms | Allocations: 2280)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1367)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1[0m  [["id", nil]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 22.4ms | Allocations: 4392)
  Rendered layout layouts/application.html.erb (Duration: 228.1ms | Allocations: 27082)
Completed 200 OK in 570ms (Views: 136.9ms | ActiveRecord: 289.7ms | Allocations: 38442)


Started GET "/users/mis_restaurantes" for ::1 at 2023-11-19 20:04:29 +0100
Processing by UsersController#mis_restaurantes as HTML
  [1m[36mUser Load (43.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:77:in `mis_restaurantes'
Completed 500 Internal Server Error in 263ms (ActiveRecord: 136.0ms | Allocations: 7371)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
NoMethodError (undefined method `>' for nil:NilClass):
  
app/controllers/users_controller.rb:79:in `mis_restaurantes'
Started GET "/users/mis_restaurantes" for ::1 at 2023-11-19 20:06:48 +0100
Processing by UsersController#mis_restaurantes as HTML
  [1m[36mUser Load (48.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:77:in `mis_restaurantes'
Completed 500 Internal Server Error in 265ms (ActiveRecord: 142.1ms | Allocations: 7448)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
NoMethodError (undefined method `>' for nil:NilClass):
  
app/controllers/users_controller.rb:78:in `mis_restaurantes'
Started GET "/restaurants/new" for ::1 at 2023-11-19 20:08:47 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (44.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 113.4ms | Allocations: 6355)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 114.4ms | Allocations: 6676)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1327)
  [1m[36mUser Load (43.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  Rendered layouts/_sidenav.html.erb (Duration: 48.1ms | Allocations: 3734)
  Rendered layout layouts/application.html.erb (Duration: 194.1ms | Allocations: 30525)
Completed 500 Internal Server Error in 348ms (ActiveRecord: 248.6ms | Allocations: 39236)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `>' for nil:NilClass):
    22:     </li>
    23:   </div>
    24:   <div>
    25:     <% if user_has_restaurants() %> 
    26:       <li>
    27:         <%= link_to "/users/mis_restaurantes", id: "mis_restaurantes", class: "sidenav_element" do %>
    28:           <%= image_tag "my-restaurant", class: "sidenav_element_icon" %>
  
app/helpers/application_helper.rb:64:in `user_has_restaurants'
app/views/layouts/_sidenav.html.erb:25
app/views/layouts/application.html.erb:21
Started GET "/restaurants/1" for ::1 at 2023-11-19 20:08:48 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (56.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (47.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (47.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (44.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (43.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (45.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (63.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (42.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.0ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (47.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 52.6ms | Allocations: 2914)
  [1m[36mDish Load (46.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (51.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (44.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 11.5ms | Allocations: 869)
  Rendered layouts/_reaction.html.erb (Duration: 5.9ms | Allocations: 434)
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 436)
  Rendered layouts/_reaction.html.erb (Duration: 2.7ms | Allocations: 433)
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 437)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 436)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 433)
  Rendered layouts/_comment.html.erb (Duration: 192.1ms | Allocations: 11264)
  Rendered layouts/_add_comment.html.erb (Duration: 7.7ms | Allocations: 672)
  [1m[35m (43.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 605.6ms | Allocations: 24395)
  Rendered layouts/_header.html.erb (Duration: 4.2ms | Allocations: 1076)
  [1m[36mUser Load (42.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  Rendered layouts/_sidenav.html.erb (Duration: 52.0ms | Allocations: 2979)
  Rendered layout layouts/application.html.erb (Duration: 671.0ms | Allocations: 32172)
Completed 500 Internal Server Error in 1811ms (ActiveRecord: 1274.4ms | Allocations: 50281)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `>' for nil:NilClass):
    22:     </li>
    23:   </div>
    24:   <div>
    25:     <% if user_has_restaurants() %> 
    26:       <li>
    27:         <%= link_to "/users/mis_restaurantes", id: "mis_restaurantes", class: "sidenav_element" do %>
    28:           <%= image_tag "my-restaurant", class: "sidenav_element_icon" %>
  
app/helpers/application_helper.rb:64:in `user_has_restaurants'
app/views/layouts/_sidenav.html.erb:25
app/views/layouts/application.html.erb:21
Started GET "/restaurants/1" for ::1 at 2023-11-19 20:08:51 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (45.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (44.1ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (44.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (44.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (47.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (44.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (43.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (45.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (45.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (47.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (58.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 79.7ms | Allocations: 2325)
  [1m[36mDish Load (45.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (44.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (43.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 611)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 433)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 436)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 433)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 437)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 436)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 433)
  Rendered layouts/_comment.html.erb (Duration: 57.1ms | Allocations: 8557)
  Rendered layouts/_add_comment.html.erb (Duration: 0.7ms | Allocations: 522)
  [1m[35m (45.0ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.6ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 300.3ms | Allocations: 14177)
  Rendered layouts/_header.html.erb (Duration: 3.1ms | Allocations: 1076)
  [1m[36mUser Load (43.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  Rendered layouts/_sidenav.html.erb (Duration: 50.7ms | Allocations: 3090)
  Rendered layout layouts/application.html.erb (Duration: 362.6ms | Allocations: 22065)
Completed 500 Internal Server Error in 995ms (ActiveRecord: 867.6ms | Allocations: 27704)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `>' for nil:NilClass):
    22:     </li>
    23:   </div>
    24:   <div>
    25:     <% if user_has_restaurants() %> 
    26:       <li>
    27:         <%= link_to "/users/mis_restaurantes", id: "mis_restaurantes", class: "sidenav_element" do %>
    28:           <%= image_tag "my-restaurant", class: "sidenav_element_icon" %>
  
app/helpers/application_helper.rb:64:in `user_has_restaurants'
app/views/layouts/_sidenav.html.erb:25
app/views/layouts/application.html.erb:21
Started GET "/restaurants/1" for ::1 at 2023-11-19 20:09:32 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (44.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (45.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (44.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (45.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (45.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (45.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (49.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (47.1ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (46.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 50.9ms | Allocations: 2965)
  [1m[36mDish Load (42.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (42.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (43.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 865)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 434)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 436)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 433)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 437)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 436)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 433)
  Rendered layouts/_comment.html.erb (Duration: 63.6ms | Allocations: 11238)
  Rendered layouts/_add_comment.html.erb (Duration: 1.1ms | Allocations: 668)
  [1m[35m (43.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 353.3ms | Allocations: 24366)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1334)
  [1m[36mUser Load (43.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  Rendered layouts/_sidenav.html.erb (Duration: 112.5ms | Allocations: 11900)
  Rendered layout layouts/application.html.erb (Duration: 500.1ms | Allocations: 56396)
Completed 500 Internal Server Error in 1716ms (ActiveRecord: 1446.5ms | Allocations: 83182)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (Missing model class RestaurantsUser for the Restaurant#restaurants_users association. You can specify a different model class with the :class_name option.):
    22:     </li>
    23:   </div>
    24:   <div>
    25:     <% if user_has_restaurants() %> 
    26:       <li>
    27:         <%= link_to "/users/mis_restaurantes", id: "mis_restaurantes", class: "sidenav_element" do %>
    28:           <%= image_tag "my-restaurant", class: "sidenav_element_icon" %>
  
app/helpers/application_helper.rb:64:in `user_has_restaurants'
app/views/layouts/_sidenav.html.erb:25
app/views/layouts/application.html.erb:21
Started GET "/restaurants/1" for ::1 at 2023-11-19 20:12:05 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (45.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (44.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (42.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (45.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (52.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (47.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (47.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (43.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (48.0ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (44.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 48.8ms | Allocations: 2965)
  [1m[36mDish Load (46.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (43.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (43.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 865)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 434)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 436)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 433)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 437)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 436)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 433)
  Rendered layouts/_comment.html.erb (Duration: 64.8ms | Allocations: 11238)
  Rendered layouts/_add_comment.html.erb (Duration: 1.2ms | Allocations: 668)
  [1m[35m (44.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 389.1ms | Allocations: 24365)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1334)
  [1m[36mUser Load (45.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 302.2ms | Allocations: 13406)
  Rendered layout layouts/application.html.erb (Duration: 713.2ms | Allocations: 57906)
Completed 200 OK in 1910ms (Views: 210.1ms | ActiveRecord: 1565.6ms | Allocations: 84029)


Started GET "/users/mis_restaurantes" for ::1 at 2023-11-19 20:12:46 +0100
Processing by UsersController#mis_restaurantes as HTML
  [1m[36mUser Load (43.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:77:in `mis_restaurantes'
  Rendering layout layouts/application.html.erb
  Rendering users/mis_restaurantes.html.erb within layouts/application
  [1m[36mRestaurant Load (44.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/views/users/mis_restaurantes.html.erb:8
  Rendered users/mis_restaurantes.html.erb within layouts/application (Duration: 50.2ms | Allocations: 2202)
  Rendered layout layouts/application.html.erb (Duration: 50.5ms | Allocations: 2294)
Completed 500 Internal Server Error in 97ms (ActiveRecord: 87.9ms | Allocations: 3388)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `ruta_img' for #<Restaurant id: 8, categoria: "Turca", nombre: "a", ruta_img_perfil: nil, ruta_img_fondo: "d06329fde0f994d1691b.jpg", direccion: "a", telefono: "a", horario: "a", imported_id: nil>):
    10:       <%= link_to restaurant_path(restaurant) do %>
    11:         <div class="restaurant_box">
    12:           <% if restaurant.ruta_img_fondo.present? %>
    13:             <%= image_tag restaurant.ruta_img, class: "restaurant_image" %>
    14:           <% else %>
    15:             <%= image_tag "Default-restaurant-image", class: "restaurant_image" %>
    16:           <% end %>
  
app/views/users/mis_restaurantes.html.erb:13
app/views/users/mis_restaurantes.html.erb:10
app/views/users/mis_restaurantes.html.erb:8
app/controllers/users_controller.rb:80:in `mis_restaurantes'
Started GET "/users/mis_restaurantes" for ::1 at 2023-11-19 20:13:46 +0100
Processing by UsersController#mis_restaurantes as HTML
  [1m[36mUser Load (54.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:77:in `mis_restaurantes'
  Rendering layout layouts/application.html.erb
  Rendering users/mis_restaurantes.html.erb within layouts/application
  [1m[36mRestaurant Load (44.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/views/users/mis_restaurantes.html.erb:8
  Rendered users/mis_restaurantes.html.erb within layouts/application (Duration: 227.7ms | Allocations: 9752)
  Rendered layout layouts/application.html.erb (Duration: 228.7ms | Allocations: 9845)
Completed 500 Internal Server Error in 549ms (ActiveRecord: 334.1ms | Allocations: 21257)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (The asset "Default-restaurant-image" is not present in the asset pipeline.
):
    12:           <% if restaurant.ruta_img_fondo.present? %>
    13:             <%= image_tag restaurant.ruta_img_fondo, class: "restaurant_image" %>
    14:           <% else %>
    15:             <%= image_tag "Default-restaurant-image", class: "restaurant_image" %>
    16:           <% end %>
    17:           <div class="restaurant_name"><%= restaurant.nombre %></div>
    18:         </div>
  
app/views/users/mis_restaurantes.html.erb:15
app/views/users/mis_restaurantes.html.erb:10
app/views/users/mis_restaurantes.html.erb:8
app/controllers/users_controller.rb:80:in `mis_restaurantes'
Started GET "/users/mis_restaurantes" for ::1 at 2023-11-19 20:14:35 +0100
Processing by UsersController#mis_restaurantes as HTML
  [1m[36mUser Load (43.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:77:in `mis_restaurantes'
  Rendering layout layouts/application.html.erb
  Rendering users/mis_restaurantes.html.erb within layouts/application
  [1m[36mRestaurant Load (44.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/views/users/mis_restaurantes.html.erb:8
  Rendered users/mis_restaurantes.html.erb within layouts/application (Duration: 213.2ms | Allocations: 8936)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1361)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 7.9ms | Allocations: 5125)
  Rendered layout layouts/application.html.erb (Duration: 253.9ms | Allocations: 34232)
Completed 200 OK in 531ms (Views: 76.5ms | ActiveRecord: 315.6ms | Allocations: 45669)


Started GET "/categories" for ::1 at 2023-11-19 20:14:55 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (43.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (46.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 157.6ms | Allocations: 6374)
  Rendered layouts/_header.html.erb (Duration: 2.8ms | Allocations: 1098)
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 61.1ms | Allocations: 4525)
  Rendered layout layouts/application.html.erb (Duration: 228.5ms | Allocations: 15727)
Completed 200 OK in 235ms (Views: 46.2ms | ActiveRecord: 183.4ms | Allocations: 17316)


Started GET "/users/mis_restaurantes" for ::1 at 2023-11-19 20:14:58 +0100
Processing by UsersController#mis_restaurantes as HTML
  [1m[36mUser Load (84.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:77:in `mis_restaurantes'
  Rendering layout layouts/application.html.erb
  Rendering users/mis_restaurantes.html.erb within layouts/application
  [1m[36mRestaurant Load (70.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/views/users/mis_restaurantes.html.erb:8
  Rendered users/mis_restaurantes.html.erb within layouts/application (Duration: 79.2ms | Allocations: 3110)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1098)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 10.7ms | Allocations: 4384)
  Rendered layout layouts/application.html.erb (Duration: 96.0ms | Allocations: 12308)
Completed 200 OK in 184ms (Views: 25.7ms | ActiveRecord: 155.4ms | Allocations: 13213)


Started GET "/restaurants/new" for ::1 at 2023-11-19 20:15:03 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (87.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 96.2ms | Allocations: 3641)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 97.7ms | Allocations: 3949)
  Rendered layouts/_header.html.erb (Duration: 3.3ms | Allocations: 1072)
  [1m[36mUser Load (46.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 101.8ms | Allocations: 4630)
  Rendered layout layouts/application.html.erb (Duration: 211.2ms | Allocations: 13369)
Completed 200 OK in 214ms (Views: 34.8ms | ActiveRecord: 178.1ms | Allocations: 13873)


Started GET "/restaurants/new" for ::1 at 2023-11-19 20:15:08 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (94.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 110.1ms | Allocations: 3040)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 111.4ms | Allocations: 3127)
  Rendered layouts/_header.html.erb (Duration: 7.5ms | Allocations: 1072)
  [1m[36mUser Load (44.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (48.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 118.7ms | Allocations: 4629)
  Rendered layout layouts/application.html.erb (Duration: 259.0ms | Allocations: 12543)
Completed 200 OK in 263ms (Views: 74.7ms | ActiveRecord: 187.1ms | Allocations: 12808)


Started GET "/users/mis_restaurantes" for ::1 at 2023-11-19 20:15:10 +0100
Processing by UsersController#mis_restaurantes as HTML
  [1m[36mUser Load (43.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:77:in `mis_restaurantes'
  Rendering layout layouts/application.html.erb
  Rendering users/mis_restaurantes.html.erb within layouts/application
  [1m[36mRestaurant Load (48.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/views/users/mis_restaurantes.html.erb:8
  Rendered users/mis_restaurantes.html.erb within layouts/application (Duration: 74.9ms | Allocations: 3110)
  Rendered layouts/_header.html.erb (Duration: 9.8ms | Allocations: 1098)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 37.7ms | Allocations: 4384)
  Rendered layout layouts/application.html.erb (Duration: 150.3ms | Allocations: 12308)
Completed 200 OK in 203ms (Views: 104.2ms | ActiveRecord: 92.3ms | Allocations: 13213)


Started GET "/users/mis_restaurantes" for ::1 at 2023-11-19 20:15:36 +0100
Processing by UsersController#mis_restaurantes as HTML
  [1m[36mUser Load (61.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:77:in `mis_restaurantes'
  Rendering layout layouts/application.html.erb
  Rendering users/mis_restaurantes.html.erb within layouts/application
  [1m[36mRestaurant Load (43.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/views/users/mis_restaurantes.html.erb:8
  Rendered users/mis_restaurantes.html.erb within layouts/application (Duration: 233.2ms | Allocations: 8956)
  Rendered layouts/_header.html.erb (Duration: 4.8ms | Allocations: 1361)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 13.5ms | Allocations: 5125)
  Rendered layout layouts/application.html.erb (Duration: 288.7ms | Allocations: 34254)
Completed 200 OK in 633ms (Views: 107.7ms | ActiveRecord: 357.2ms | Allocations: 45631)


Started GET "/users/mis_restaurantes" for ::1 at 2023-11-19 20:16:06 +0100
Processing by UsersController#mis_restaurantes as HTML
  [1m[36mUser Load (45.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:77:in `mis_restaurantes'
  Rendering layout layouts/application.html.erb
  Rendering users/mis_restaurantes.html.erb within layouts/application
  [1m[36mRestaurant Load (43.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/views/users/mis_restaurantes.html.erb:8
  Rendered users/mis_restaurantes.html.erb within layouts/application (Duration: 197.4ms | Allocations: 8927)
  Rendered layouts/_header.html.erb (Duration: 4.2ms | Allocations: 1357)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 14.9ms | Allocations: 5101)
  Rendered layout layouts/application.html.erb (Duration: 234.6ms | Allocations: 34084)
Completed 200 OK in 527ms (Views: 56.5ms | ActiveRecord: 322.3ms | Allocations: 45505)


Started GET "/users/mis_restaurantes" for ::1 at 2023-11-19 20:18:25 +0100
Processing by UsersController#mis_restaurantes as HTML
  [1m[36mUser Load (46.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:77:in `mis_restaurantes'
  Rendering layout layouts/application.html.erb
  Rendering users/mis_restaurantes.html.erb within layouts/application
  [1m[36mRestaurant Load (47.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/views/users/mis_restaurantes.html.erb:8
  Rendered users/mis_restaurantes.html.erb within layouts/application (Duration: 812.2ms | Allocations: 60895)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1102)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 6.4ms | Allocations: 4406)
  Rendered layout layouts/application.html.erb (Duration: 828.3ms | Allocations: 70157)
Completed 200 OK in 888ms (Views: 784.8ms | ActiveRecord: 92.9ms | Allocations: 71040)


Started GET "/restaurants/1" for ::1 at 2023-11-19 20:18:30 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (45.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (44.5ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (43.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (45.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (44.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (46.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (43.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (46.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (45.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 54.6ms | Allocations: 2908)
  [1m[36mDish Load (44.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (44.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (46.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 4.6ms | Allocations: 865)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 434)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 436)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 433)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 437)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 436)
  Rendered layouts/_reaction.html.erb (Duration: 2.2ms | Allocations: 433)
  Rendered layouts/_comment.html.erb (Duration: 96.6ms | Allocations: 11270)
  Rendered layouts/_add_comment.html.erb (Duration: 3.8ms | Allocations: 668)
  [1m[35m (49.2ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 427.4ms | Allocations: 24308)
  Rendered layouts/_header.html.erb (Duration: 5.8ms | Allocations: 1072)
  [1m[36mUser Load (46.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 116.8ms | Allocations: 4633)
  Rendered layout layouts/application.html.erb (Duration: 558.5ms | Allocations: 33738)
Completed 200 OK in 1473ms (Views: 146.5ms | ActiveRecord: 1267.8ms | Allocations: 51835)


Started GET "/restaurants/12" for ::1 at 2023-11-19 20:18:43 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mRestaurant Load (43.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (45.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 12], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (43.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (73.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=12 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (42.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 12], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (43.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=12 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (46.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (43.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (42.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=12 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (42.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 46.9ms | Allocations: 1509)
  [1m[36mDish Load (43.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 12]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (43.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (43.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 12], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 44.5ms | Allocations: 485)
  Rendered layouts/_add_comment.html.erb (Duration: 0.9ms | Allocations: 520)
  [1m[35m (43.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=12 AND posts.autor=users.nombre AND posts.restaurant_id=12[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 229.9ms | Allocations: 5068)
  Rendered layouts/_header.html.erb (Duration: 4.1ms | Allocations: 1072)
  [1m[36mUser Load (46.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 115.7ms | Allocations: 4629)
  Rendered layout layouts/application.html.erb (Duration: 356.5ms | Allocations: 14481)
Completed 200 OK in 932ms (Views: 49.6ms | ActiveRecord: 863.8ms | Allocations: 19422)


Started GET "/restaurants/new" for ::1 at 2023-11-19 20:19:46 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (100.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 211.1ms | Allocations: 18079)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 212.9ms | Allocations: 18382)
  Rendered layouts/_header.html.erb (Duration: 10.1ms | Allocations: 1072)
  [1m[36mUser Load (45.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (59.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 151.2ms | Allocations: 4633)
  Rendered layout layouts/application.html.erb (Duration: 398.7ms | Allocations: 27828)
Completed 200 OK in 402ms (Views: 148.2ms | ActiveRecord: 253.0ms | Allocations: 28164)


Started POST "/restaurants" for ::1 at 2023-11-19 20:20:49 +0100
Processing by RestaurantsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "restaurant"=>{"nombre"=>"Kebab de la esquina", "telefono"=>"121321 2132133", "direccion"=>"La esquina", "horario"=>"Todos los dÃ­as amigo", "categoria"=>"Turca", "ruta_img_fondo"=>#<ActionDispatch::Http::UploadedFile:0x00007f3ebc607cd0 @tempfile=#<Tempfile:/tmp/RackMultipart20231119-4356-lvgf9y.jpg>, @content_type="image/jpeg", @original_filename="le-chalet-a-kebab.jpg", @headers="Content-Disposition: form-data; name=\"restaurant[ruta_img_fondo]\"; filename=\"le-chalet-a-kebab.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "button"=>""}
  [1m[36mTRANSACTION (45.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/restaurants_controller.rb:43:in `create'
  [1m[36mRestaurant Create (92.0ms)[0m  [1m[32mINSERT INTO "restaurants" ("categoria", "nombre", "ruta_img_perfil", "ruta_img_fondo", "direccion", "telefono", "horario", "imported_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["categoria", "Turca"], ["nombre", "Kebab de la esquina"], ["ruta_img_perfil", nil], ["ruta_img_fondo", "4ea8cbd6844011a5a22b.jpg"], ["direccion", "La esquina"], ["telefono", "121321 2132133"], ["horario", "Todos los dÃ­as amigo"], ["imported_id", nil]]
  â†³ app/controllers/restaurants_controller.rb:43:in `create'
  [1m[36mTRANSACTION (43.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/restaurants_controller.rb:43:in `create'
Redirected to http://localhost:3000/restaurants/13
  [1m[36mUser Load (43.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:48:in `create'
  [1m[36mTRANSACTION (42.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/restaurants_controller.rb:48:in `create'
  [1m[36mRestaurant::HABTM_Users Create (43.5ms)[0m  [1m[32mINSERT INTO "restaurants_users" ("restaurant_id", "user_id") VALUES ($1, $2)[0m  [["restaurant_id", 13], ["user_id", "Mr.Dani"]]
  â†³ app/controllers/restaurants_controller.rb:48:in `create'
  [1m[36mTRANSACTION (44.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/restaurants_controller.rb:48:in `create'
Completed 302 Found in 370ms (ActiveRecord: 442.0ms | Allocations: 5967)


Started GET "/restaurants/13" for ::1 at 2023-11-19 20:20:50 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"13"}
  [1m[36mRestaurant Load (45.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (42.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (44.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=13 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=13 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=13 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (43.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 13], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=13 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (45.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (49.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (44.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 13], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (47.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (46.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 350.3ms | Allocations: 59082)
  [1m[36mDish Load (84.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 13]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (44.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (44.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 13], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 46.4ms | Allocations: 485)
  Rendered layouts/_add_comment.html.erb (Duration: 5.5ms | Allocations: 549)
  [1m[35m (44.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=13 AND posts.autor=users.nombre AND posts.restaurant_id=13[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 589.9ms | Allocations: 61530)
  Rendered layouts/_header.html.erb (Duration: 5.6ms | Allocations: 1080)
  [1m[36mUser Load (45.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 111.7ms | Allocations: 4678)
  Rendered layout layouts/application.html.erb (Duration: 726.6ms | Allocations: 71044)
Completed 200 OK in 1306ms (Views: 371.4ms | ActiveRecord: 897.8ms | Allocations: 76033)


Started GET "/users/mis_restaurantes" for ::1 at 2023-11-19 20:20:57 +0100
Processing by UsersController#mis_restaurantes as HTML
  [1m[36mUser Load (43.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:77:in `mis_restaurantes'
  Rendering layout layouts/application.html.erb
  Rendering users/mis_restaurantes.html.erb within layouts/application
  [1m[36mRestaurant Load (43.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/views/users/mis_restaurantes.html.erb:8
  Rendered users/mis_restaurantes.html.erb within layouts/application (Duration: 53.2ms | Allocations: 3640)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1102)
  [1m[36mCACHE User Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 10.6ms | Allocations: 4403)
  Rendered layout layouts/application.html.erb (Duration: 70.6ms | Allocations: 12892)
Completed 200 OK in 116ms (Views: 27.6ms | ActiveRecord: 86.5ms | Allocations: 13779)


Started GET "/restaurants/13" for ::1 at 2023-11-19 20:21:01 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"13"}
  [1m[36mRestaurant Load (48.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (42.8ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (43.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=13 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (42.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=13 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=13 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (43.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 13], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=13 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (44.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (63.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (48.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (45.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 13], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (46.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (46.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 54.4ms | Allocations: 1003)
  [1m[36mDish Load (45.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 13]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (48.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (51.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 13], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 55.2ms | Allocations: 485)
  Rendered layouts/_add_comment.html.erb (Duration: 8.1ms | Allocations: 547)
  [1m[35m (49.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=13 AND posts.autor=users.nombre AND posts.restaurant_id=13[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 282.3ms | Allocations: 3404)
  Rendered layouts/_header.html.erb (Duration: 7.9ms | Allocations: 1076)
  [1m[36mUser Load (45.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 133.1ms | Allocations: 4656)
  Rendered layout layouts/application.html.erb (Duration: 455.5ms | Allocations: 12879)
Completed 200 OK in 1048ms (Views: 124.6ms | ActiveRecord: 889.1ms | Allocations: 17830)


Started GET "/restaurants/13/edit" for ::1 at 2023-11-19 20:21:03 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"13"}
  [1m[36mRestaurant Load (43.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:56:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  [1m[36mCategory Load (44.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:27
  Rendered restaurants/_form.html.erb (Duration: 50.7ms | Allocations: 3060)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 52.7ms | Allocations: 3236)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1076)
  [1m[36mUser Load (43.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (42.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 93.7ms | Allocations: 4655)
  Rendered layout layouts/application.html.erb (Duration: 154.5ms | Allocations: 12709)
Completed 200 OK in 200ms (Views: 24.5ms | ActiveRecord: 173.7ms | Allocations: 13458)


Started GET "/restaurants/13/dishes/new" for ::1 at 2023-11-19 20:21:10 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"13"}
  [1m[36mRestaurant Load (43.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:17:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 6.4ms | Allocations: 2644)
  Rendered dishes/new.html.erb within layouts/application (Duration: 8.8ms | Allocations: 2932)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1076)
  [1m[36mUser Load (44.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (42.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 94.7ms | Allocations: 4656)
  Rendered layout layouts/application.html.erb (Duration: 110.7ms | Allocations: 12409)
Completed 200 OK in 159ms (Views: 25.0ms | ActiveRecord: 129.8ms | Allocations: 13505)


Started POST "/restaurants/13/dishes" for ::1 at 2023-11-19 20:22:38 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"El mejor kebab", "descripcion"=>"Carne de rata amigo", "precio"=>"4.50", "ruta_img_plato"=>#<ActionDispatch::Http::UploadedFile:0x00007f3ebdea6db8 @tempfile=#<Tempfile:/tmp/RackMultipart20231119-4356-yjktp7.jpg>, @content_type="image/jpeg", @original_filename="kebab.jpg", @headers="Content-Disposition: form-data; name=\"dish[ruta_img_plato]\"; filename=\"kebab.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "button"=>"", "restaurant_id"=>"13"}
  [1m[36mTRANSACTION (44.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:23:in `create'
  [1m[36mRestaurant Load (43.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:23:in `create'
  [1m[36mDish Create (43.6ms)[0m  [1m[32mINSERT INTO "dishes" ("restaurant_id", "nombre", "ruta_img_plato", "descripcion", "precio", "imported_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_id", 13], ["nombre", "El mejor kebab"], ["ruta_img_plato", "e88582bc1458cc1e4515.jpg"], ["descripcion", "Carne de rata amigo"], ["precio", 4.5], ["imported_id", nil]]
  â†³ app/controllers/dishes_controller.rb:23:in `create'
  [1m[36mTRANSACTION (43.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:23:in `create'
Redirected to http://localhost:3000/restaurants/13
Completed 302 Found in 185ms (ActiveRecord: 175.8ms | Allocations: 3853)


Started GET "/restaurants/13" for ::1 at 2023-11-19 20:22:39 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"13"}
  [1m[36mRestaurant Load (43.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (43.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (46.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=13 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=13 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=13 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (43.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 13], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (43.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=13 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (48.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (48.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (65.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (45.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 13], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (44.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 46.9ms | Allocations: 1007)
  [1m[36mDish Load (43.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 13]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (44.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (45.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 13], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 48.0ms | Allocations: 485)
  Rendered layouts/_add_comment.html.erb (Duration: 4.7ms | Allocations: 551)
  [1m[35m (46.0ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=13 AND posts.autor=users.nombre AND posts.restaurant_id=13[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 576.5ms | Allocations: 62719)
  Rendered layouts/_header.html.erb (Duration: 5.4ms | Allocations: 1084)
  [1m[36mUser Load (45.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 123.4ms | Allocations: 4689)
  Rendered layout layouts/application.html.erb (Duration: 725.7ms | Allocations: 72247)
Completed 200 OK in 1307ms (Views: 413.5ms | ActiveRecord: 869.9ms | Allocations: 77201)


Started GET "/restaurants/13/dishes/15" for ::1 at 2023-11-19 20:22:44 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"13", "id"=>"15"}
  [1m[36mRestaurant Load (42.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (43.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 15], ["restaurant_id", 13], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (44.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (43.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (49.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 15], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 55.5ms | Allocations: 1776)
  Rendered layouts/_add_comment.html.erb (Duration: 1.0ms | Allocations: 732)
  Rendered dishes/show.html.erb within layouts/application (Duration: 148.9ms | Allocations: 4470)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1080)
  [1m[36mUser Load (42.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (42.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 92.6ms | Allocations: 4667)
  Rendered layout layouts/application.html.erb (Duration: 249.7ms | Allocations: 13966)
Completed 200 OK in 385ms (Views: 28.1ms | ActiveRecord: 309.1ms | Allocations: 16307)


Started GET "/reviews/new?review_to=15&review_type=Dish" for ::1 at 2023-11-19 20:22:47 +0100
Processing by ReviewsController#new as HTML
  Parameters: {"review_to"=>"15", "review_type"=>"Dish"}
  Rendering layout layouts/application.html.erb
  Rendering reviews/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 3.3ms | Allocations: 2176)
  Rendered reviews/new.html.erb within layouts/application (Duration: 4.5ms | Allocations: 2412)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1080)
  [1m[36mUser Load (44.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (42.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 94.4ms | Allocations: 4672)
  Rendered layout layouts/application.html.erb (Duration: 104.7ms | Allocations: 11915)
Completed 200 OK in 107ms (Views: 18.5ms | ActiveRecord: 87.1ms | Allocations: 12621)


Started POST "/reviews" for ::1 at 2023-11-19 20:23:24 +0100
Processing by ReviewsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "review"=>{"reviewable_id"=>"15", "reviewable_type"=>"Dish", "autor"=>"Mr.Dani", "contenido"=>"El mejor kebab de Zaragoza. El pakistanÃ­ me llamÃ³ amigo :)", "ruta_img"=>#<ActionDispatch::Http::UploadedFile:0x00007f3ebd3dd850 @tempfile=#<Tempfile:/tmp/RackMultipart20231119-4356-3f1ulo.jpg>, @content_type="image/jpeg", @original_filename="le-chalet-a-kebab.jpg", @headers="Content-Disposition: form-data; name=\"review[ruta_img]\"; filename=\"le-chalet-a-kebab.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "button"=>""}
  [1m[36mDish Load (45.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:32:in `get_original_reviewed'
  [1m[36mTRANSACTION (46.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/reviews_controller.rb:24:in `create'
  [1m[36mDish Load (83.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:24:in `create'
  [1m[36mReview Create (43.4ms)[0m  [1m[32mINSERT INTO "reviews" ("autor", "reviewable_type", "reviewable_id", "contenido", "ruta_img", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["autor", "Mr.Dani"], ["reviewable_type", "Dish"], ["reviewable_id", 15], ["contenido", "El mejor kebab de Zaragoza. El pakistanÃ­ me llamÃ³ amigo :)"], ["ruta_img", "64e1ac97a1750f3dc6bd.jpg"], ["created_at", "2023-11-19 19:23:24.446897"], ["updated_at", "2023-11-19 19:23:24.446920"]]
  â†³ app/controllers/reviews_controller.rb:24:in `create'
  [1m[36mTRANSACTION (44.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/reviews_controller.rb:24:in `create'
Redirected to http://localhost:3000/restaurants/13/dishes/15
Completed 302 Found in 321ms (ActiveRecord: 263.7ms | Allocations: 4889)


Started GET "/restaurants/13/dishes/15" for ::1 at 2023-11-19 20:23:24 +0100
Processing by DishesController#show as TURBO_STREAM
  Parameters: {"restaurant_id"=>"13", "id"=>"15"}
  [1m[36mRestaurant Load (42.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (44.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 15], ["restaurant_id", 13], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (42.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (46.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (54.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 15], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 431.4ms | Allocations: 61988)
  Rendered dishes/show.html.erb within layouts/application (Duration: 527.7ms | Allocations: 62971)
  Rendered layout layouts/application.html.erb (Duration: 530.2ms | Allocations: 63063)
Completed 500 Internal Server Error in 626ms (ActiveRecord: 231.4ms | Allocations: 64364)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `locals' for #<ActionView::Base:0x000000001e30e8>):
    17:       <% end %>
    18:       <div class="comment_actions_row">
    19:         <div class="comment_action_item">
    20:           <%= render "layouts/reaction", locals: {comment: comment, button: "Like", rcts_no: locals[:reactions][comment.id][:likes], user_reaction_id: locals[:user_reactions][comment.id][:reaction_id]} %>
    21:         </div>
    22:         <div class="comment_action_item">
    23:           <%= render "layouts/reaction", locals: {comment: comment, button: "Dislike", rcts_no: locals[:reactions][comment.id][:dislikes], user_reaction_id: locals[:user_reactions][comment.id][:reaction_id]} %>
  
app/views/layouts/_comment.html.erb:20
app/views/layouts/_comment.html.erb:2
app/views/dishes/show.html.erb:28
Started GET "/" for 127.0.0.1 at 2023-11-19 21:44:02 +0100
  [1m[36mActiveRecord::SchemaMigration Load (78.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (95.5ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (58.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (49.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (108.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (129.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (240.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (261.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  Rendered restaurants/index.html.erb within layouts/application (Duration: 1854.8ms | Allocations: 137809)
  Rendered layout layouts/application.html.erb (Duration: 1856.4ms | Allocations: 137936)
Completed 500 Internal Server Error in 3994ms (ActiveRecord: 1809.7ms | Allocations: 181097)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (The asset "Default-restaurant-img.png" is not present in the asset pipeline.
):
    54:                       <% if restaurant.ruta_img_fondo %>
    55:                         <%= image_tag restaurant.ruta_img_fondo, class: "explore_restaurants_box_image" %>
    56:                       <% else %>
    57:                         <%= image_tag "Default-restaurant-img.png", class: "explore_restaurants_box_image" %>
    58:                       <% end %>
    59:                         <div class="explore_restaurant_box_name"><%= restaurant.nombre %></div>
    60:                         <div class="explore_restaurant_box_category"><%= restaurant.categoria %></div>
  
app/views/restaurants/index.html.erb:57
app/views/restaurants/index.html.erb:52
app/views/restaurants/index.html.erb:51
Started GET "/" for 127.0.0.1 at 2023-11-19 21:46:56 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (94.9ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (304.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (294.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (34.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (234.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (110.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (248.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (66.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (226.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 933.3ms | Allocations: 16176)
  Rendered layouts/_header.html.erb (Duration: 3.8ms | Allocations: 1384)
  Rendered layouts/_sidenav.html.erb (Duration: 13.9ms | Allocations: 3415)
  Rendered layout layouts/application.html.erb (Duration: 1023.2ms | Allocations: 40275)
Completed 200 OK in 2788ms (Views: 185.6ms | ActiveRecord: 2469.6ms | Allocations: 56504)


Started GET "/" for 127.0.0.1 at 2023-11-19 21:47:56 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (323.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (302.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (303.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (304.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (301.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (303.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (262.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (65.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (265.9ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 684.6ms | Allocations: 13666)
  Rendered layouts/_header.html.erb (Duration: 3.5ms | Allocations: 1097)
  Rendered layouts/_sidenav.html.erb (Duration: 5.1ms | Allocations: 2679)
  Rendered layout layouts/application.html.erb (Duration: 829.2ms | Allocations: 41843)
Completed 200 OK in 2701ms (Views: 236.9ms | ActiveRecord: 2431.8ms | Allocations: 44771)


Started GET "/restaurants/7" for 127.0.0.1 at 2023-11-19 21:57:55 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (97.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (32.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (29.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (30.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (62.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (49.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (300.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (32.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (31.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (229.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
Started GET "/restaurants/7" for 127.0.0.1 at 2023-11-19 21:58:02 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mReview Load (236.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (71.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 11.2ms | Allocations: 1315)
  [1m[36mDish Load (116.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[36mReview Load (113.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 299.3ms | Allocations: 1783)
  Rendered layouts/_add_comment.html.erb (Duration: 10.2ms | Allocations: 708)
  [1m[35m (269.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.4ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 1525.7ms | Allocations: 17487)
  Rendered layouts/_header.html.erb (Duration: 5.0ms | Allocations: 1084)
  Rendered layouts/_sidenav.html.erb (Duration: 14.0ms | Allocations: 2705)
  Rendered layout layouts/application.html.erb (Duration: 1586.2ms | Allocations: 25027)
Completed 200 OK in 9232ms (Views: 872.8ms | ActiveRecord: 4752.8ms | Allocations: 51043)


  [1m[36mRestaurant Load (287.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (109.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (293.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (107.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (291.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (59.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (312.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (334.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (31.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (30.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (51.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (309.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 3.4ms | Allocations: 722)
  [1m[36mDish Load (307.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[36mReview Load (25.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 167.9ms | Allocations: 488)
  Rendered layouts/_add_comment.html.erb (Duration: 2.3ms | Allocations: 551)
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.2ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 816.4ms | Allocations: 4302)
  Rendered layouts/_header.html.erb (Duration: 4.1ms | Allocations: 1084)
  Rendered layouts/_sidenav.html.erb (Duration: 12.9ms | Allocations: 2649)
  Rendered layout layouts/application.html.erb (Duration: 852.9ms | Allocations: 11786)
Completed 200 OK in 6373ms (Views: 498.8ms | ActiveRecord: 3981.2ms | Allocations: 45820)


Started GET "/" for 127.0.0.1 at 2023-11-19 21:58:15 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (355.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (91.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (109.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (100.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (30.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (26.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (115.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (95.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (97.9ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 361.0ms | Allocations: 13692)
  Rendered layouts/_header.html.erb (Duration: 8.1ms | Allocations: 1085)
  Rendered layouts/_sidenav.html.erb (Duration: 15.6ms | Allocations: 2649)
  Rendered layout layouts/application.html.erb (Duration: 417.0ms | Allocations: 21374)
Completed 200 OK in 1162ms (Views: 111.4ms | ActiveRecord: 1022.0ms | Allocations: 24322)


Started GET "/restaurants/7" for 127.0.0.1 at 2023-11-19 21:58:38 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (257.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (317.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (281.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (308.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (305.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (215.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (91.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (100.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (72.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (33.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (89.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (95.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 9.9ms | Allocations: 721)
  [1m[36mDish Load (68.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[36mReview Load (60.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 72.3ms | Allocations: 486)
  Rendered layouts/_add_comment.html.erb (Duration: 80.7ms | Allocations: 554)
  [1m[35m (116.2ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.3ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 410.7ms | Allocations: 4265)
  Rendered layouts/_header.html.erb (Duration: 10.1ms | Allocations: 1096)
  Rendered layouts/_sidenav.html.erb (Duration: 27.8ms | Allocations: 2679)
  Rendered layout layouts/application.html.erb (Duration: 514.0ms | Allocations: 11838)
Completed 200 OK in 2745ms (Views: 272.6ms | ActiveRecord: 2413.7ms | Allocations: 16770)


Started GET "/restaurants/7" for 127.0.0.1 at 2023-11-19 22:02:28 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (231.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (26.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[35m (273.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (202.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (202.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (63.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (303.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (202.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (221.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (150.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 8.0ms | Allocations: 723)
  [1m[36mDish Load (203.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[36mReview Load (276.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 280.6ms | Allocations: 489)
  Rendered layouts/_add_comment.html.erb (Duration: 4.0ms | Allocations: 551)
  [1m[35m (298.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 813.0ms | Allocations: 4264)
  Rendered layouts/_header.html.erb (Duration: 5.5ms | Allocations: 1096)
  Rendered layouts/_sidenav.html.erb (Duration: 9.7ms | Allocations: 2679)
  Rendered layout layouts/application.html.erb (Duration: 925.0ms | Allocations: 18464)
Completed 200 OK in 2908ms (Views: 151.0ms | ActiveRecord: 2704.9ms | Allocations: 23376)


Started GET "/restaurants/7/dishes/6" for 127.0.0.1 at 2023-11-19 22:02:41 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"7", "id"=>"6"}
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (259.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 6], ["restaurant_id", 7], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (100.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[36mReview Load (278.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 6], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 292.6ms | Allocations: 1778)
  Rendered layouts/_add_comment.html.erb (Duration: 5.4ms | Allocations: 739)
  Rendered dishes/show.html.erb within layouts/application (Duration: 415.9ms | Allocations: 4994)
  Rendered layouts/_header.html.erb (Duration: 9.6ms | Allocations: 1086)
  Rendered layouts/_sidenav.html.erb (Duration: 37.4ms | Allocations: 2649)
  Rendered layout layouts/application.html.erb (Duration: 500.4ms | Allocations: 12493)
Completed 200 OK in 836ms (Views: 127.2ms | ActiveRecord: 663.2ms | Allocations: 14933)


Started GET "/login" for 127.0.0.1 at 2023-11-19 22:03:06 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 22.8ms | Allocations: 3238)
  Rendered layouts/_header.html.erb (Duration: 2.7ms | Allocations: 1085)
  Rendered layouts/_sidenav.html.erb (Duration: 7.6ms | Allocations: 2650)
  Rendered layout layouts/application.html.erb (Duration: 45.9ms | Allocations: 10731)
Completed 200 OK in 489ms (Views: 48.2ms | ActiveRecord: 321.7ms | Allocations: 18339)


Started POST "/login" for 127.0.0.1 at 2023-11-19 22:03:16 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"Atreides", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (113.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 566ms (ActiveRecord: 113.5ms | Allocations: 1233)


Started GET "/" for 127.0.0.1 at 2023-11-19 22:03:17 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (328.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (28.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (237.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (132.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (217.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (23.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (27.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (115.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (30.1ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 313.8ms | Allocations: 13685)
  Rendered layouts/_header.html.erb (Duration: 14.0ms | Allocations: 1085)
  [1m[36mUser Load (214.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (32.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 547.9ms | Allocations: 8482)
  Rendered layout layouts/application.html.erb (Duration: 950.4ms | Allocations: 27254)
Completed 200 OK in 1954ms (Views: 458.3ms | ActiveRecord: 1462.4ms | Allocations: 30213)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-19 22:03:22 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (242.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.8ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (269.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (171.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (34.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (259.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (306.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (301.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (310.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (295.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (69.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (163.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 197.7ms | Allocations: 2190)
  [1m[36mDish Load (41.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (32.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (28.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 22.1ms | Allocations: 887)
  Rendered layouts/_reaction.html.erb (Duration: 6.6ms | Allocations: 444)
  Rendered layouts/_comment.html.erb (Duration: 189.9ms | Allocations: 4560)
  Rendered layouts/_add_comment.html.erb (Duration: 9.8ms | Allocations: 532)
  [1m[35m (284.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 446)
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 3.0ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 4.5ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 31.4ms | Allocations: 5340)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 844.2ms | Allocations: 14797)
  Rendered layouts/_header.html.erb (Duration: 8.5ms | Allocations: 1096)
  [1m[36mUser Load (316.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (281.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 694.5ms | Allocations: 4676)
  Rendered layout layouts/application.html.erb (Duration: 1578.7ms | Allocations: 24369)
Completed 200 OK in 4132ms (Views: 433.6ms | ActiveRecord: 3481.2ms | Allocations: 39586)


Started GET "/users/mis_restaurantes" for 127.0.0.1 at 2023-11-19 22:03:28 +0100
Processing by UsersController#mis_restaurantes as HTML
  [1m[36mUser Load (55.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:77:in `mis_restaurantes'
  Rendering layout layouts/application.html.erb
  Rendering users/mis_restaurantes.html.erb within layouts/application
  [1m[36mRestaurant Load (200.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/views/users/mis_restaurantes.html.erb:8
  Rendered users/mis_restaurantes.html.erb within layouts/application (Duration: 214.5ms | Allocations: 2207)
  Rendered layouts/_header.html.erb (Duration: 5.2ms | Allocations: 1122)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 18.2ms | Allocations: 4437)
  Rendered layout layouts/application.html.erb (Duration: 250.6ms | Allocations: 11576)
Completed 200 OK in 321ms (Views: 54.8ms | ActiveRecord: 255.3ms | Allocations: 12688)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-19 22:03:32 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (70.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (95.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (35.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (62.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (102.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (100.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (95.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (90.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (298.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (105.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (286.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (304.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (307.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (228.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 261.0ms | Allocations: 2181)
  [1m[36mDish Load (109.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (280.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (258.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 8.9ms | Allocations: 618)
  Rendered layouts/_reaction.html.erb (Duration: 7.3ms | Allocations: 443)
  Rendered layouts/_comment.html.erb (Duration: 315.2ms | Allocations: 2801)
  Rendered layouts/_add_comment.html.erb (Duration: 6.5ms | Allocations: 532)
  [1m[35m (36.1ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 2.4ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 4.3ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 30.8ms | Allocations: 5297)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 1070.5ms | Allocations: 12895)
  Rendered layouts/_header.html.erb (Duration: 9.4ms | Allocations: 1084)
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (36.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 94.1ms | Allocations: 4635)
  Rendered layout layouts/application.html.erb (Duration: 1216.5ms | Allocations: 22365)
Completed 200 OK in 3261ms (Views: 258.0ms | ActiveRecord: 2929.3ms | Allocations: 28155)


Started GET "/restaurants/3/dishes/new" for 127.0.0.1 at 2023-11-19 22:06:35 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"3"}
  [1m[36mRestaurant Load (141.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:17:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 76.3ms | Allocations: 15173)
  Rendered dishes/new.html.erb within layouts/application (Duration: 80.0ms | Allocations: 15465)
  Rendered layouts/_header.html.erb (Duration: 5.6ms | Allocations: 1084)
  [1m[36mUser Load (190.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (215.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 432.6ms | Allocations: 4637)
  Rendered layout layouts/application.html.erb (Duration: 535.7ms | Allocations: 24936)
Completed 200 OK in 687ms (Views: 132.4ms | ActiveRecord: 545.7ms | Allocations: 25872)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-19 22:08:32 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (309.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (218.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (109.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (37.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (103.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (278.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (293.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (39.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (263.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (284.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (36.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (61.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 79.8ms | Allocations: 2833)
  [1m[36mDish Load (289.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (286.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (26.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 5.8ms | Allocations: 878)
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 444)
  Rendered layouts/_comment.html.erb (Duration: 83.2ms | Allocations: 5495)
  Rendered layouts/_add_comment.html.erb (Duration: 4.4ms | Allocations: 678)
  [1m[35m (314.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 446)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 2.4ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 3.0ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 33.6ms | Allocations: 5674)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 1404.8ms | Allocations: 23557)
  Rendered layouts/_header.html.erb (Duration: 6.8ms | Allocations: 1355)
  [1m[36mUser Load (101.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (112.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 699.7ms | Allocations: 13376)
  Rendered layout layouts/application.html.erb (Duration: 2210.4ms | Allocations: 57339)
Completed 200 OK in 5418ms (Views: 400.8ms | ActiveRecord: 4775.6ms | Allocations: 86436)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-19 22:08:52 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (54.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (128.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (23.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (247.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (36.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (80.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (27.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (147.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (86.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (207.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (110.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (288.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (103.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 112.6ms | Allocations: 2176)
  [1m[36mDish Load (289.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (109.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (290.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 618)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 443)
  Rendered layouts/_comment.html.erb (Duration: 298.2ms | Allocations: 2803)
  Rendered layouts/_add_comment.html.erb (Duration: 1.3ms | Allocations: 526)
  [1m[35m (299.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 2.1ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 23.7ms | Allocations: 5297)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 1149.6ms | Allocations: 12887)
  Rendered layouts/_header.html.erb (Duration: 7.7ms | Allocations: 1084)
  [1m[36mUser Load (141.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (112.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 315.9ms | Allocations: 4664)
  Rendered layout layouts/application.html.erb (Duration: 1569.0ms | Allocations: 29023)
Completed 200 OK in 3093ms (Views: 227.1ms | ActiveRecord: 2808.1ms | Allocations: 34816)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-19 22:10:18 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (46.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (236.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (108.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (289.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (111.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (86.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (211.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (53.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (306.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (301.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (109.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (292.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (94.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 108.5ms | Allocations: 2180)
  [1m[36mDish Load (291.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (105.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (290.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 4.9ms | Allocations: 620)
  Rendered layouts/_reaction.html.erb (Duration: 2.7ms | Allocations: 443)
  Rendered layouts/_comment.html.erb (Duration: 315.2ms | Allocations: 2810)
  Rendered layouts/_add_comment.html.erb (Duration: 7.0ms | Allocations: 528)
  [1m[35m (62.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 2.8ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 2.6ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 8.9ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 38.2ms | Allocations: 5303)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 954.2ms | Allocations: 12905)
  Rendered layouts/_header.html.erb (Duration: 4.4ms | Allocations: 1088)
  [1m[36mUser Load (161.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (295.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 491.1ms | Allocations: 4665)
  Rendered layout layouts/application.html.erb (Duration: 1541.6ms | Allocations: 29049)
Completed 200 OK in 3781ms (Views: 242.4ms | ActiveRecord: 3477.9ms | Allocations: 34812)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-19 22:11:03 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (33.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (23.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (264.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (248.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (269.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (95.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (131.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (57.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (106.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (185.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (267.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 287.1ms | Allocations: 2833)
  [1m[36mDish Load (305.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (287.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (205.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 4.7ms | Allocations: 878)
  Rendered layouts/_reaction.html.erb (Duration: 2.5ms | Allocations: 444)
  Rendered layouts/_comment.html.erb (Duration: 255.1ms | Allocations: 5496)
  Rendered layouts/_add_comment.html.erb (Duration: 6.0ms | Allocations: 678)
  [1m[35m (244.2ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 2.2ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 2.5ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 29.4ms | Allocations: 5315)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 1858.5ms | Allocations: 23539)
  Rendered layouts/_header.html.erb (Duration: 6.2ms | Allocations: 1354)
  [1m[36mUser Load (75.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (303.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 1059.0ms | Allocations: 13414)
  Rendered layout layouts/application.html.erb (Duration: 2966.7ms | Allocations: 57359)
Completed 200 OK in 6089ms (Views: 311.5ms | ActiveRecord: 5517.2ms | Allocations: 86430)


Started GET "/restaurants/3/dishes/new" for 127.0.0.1 at 2023-11-19 22:12:32 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"3"}
  [1m[36mRestaurant Load (33.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:17:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 15.1ms | Allocations: 2693)
  Rendered dishes/new.html.erb within layouts/application (Duration: 18.3ms | Allocations: 2981)
  Rendered layouts/_header.html.erb (Duration: 7.8ms | Allocations: 1084)
  [1m[36mUser Load (216.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 277.9ms | Allocations: 4636)
  Rendered layout layouts/application.html.erb (Duration: 323.1ms | Allocations: 12454)
Completed 200 OK in 370ms (Views: 84.8ms | ActiveRecord: 275.1ms | Allocations: 13558)


Started POST "/restaurants/3/dishes" for 127.0.0.1 at 2023-11-19 22:12:48 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"tumadre", "descripcion"=>"sisi la tuya", "precio"=>"10.85"}, "button"=>"", "restaurant_id"=>"3"}
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (322.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:23:in `create'
  [1m[36mRestaurant Load (299.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:23:in `create'
  [1m[36mDish Create (274.5ms)[0m  [1m[32mINSERT INTO "dishes" ("restaurant_id", "nombre", "ruta_img_plato", "descripcion", "precio", "imported_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_id", 3], ["nombre", "tumadre"], ["ruta_img_plato", nil], ["descripcion", "sisi la tuya"], ["precio", 10.85], ["imported_id", nil]]
  â†³ app/controllers/dishes_controller.rb:23:in `create'
  [1m[36mTRANSACTION (227.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:23:in `create'
Redirected to http://localhost:3000/restaurants/3
Completed 302 Found in 1165ms (ActiveRecord: 1122.5ms | Allocations: 5363)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-19 22:12:49 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (33.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (27.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (32.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (277.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (306.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (111.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (280.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (43.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (191.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (57.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (254.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (336.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (281.0ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (295.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 307.4ms | Allocations: 2182)
  [1m[36mDish Load (301.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (181.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (30.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 8.5ms | Allocations: 624)
  Rendered layouts/_reaction.html.erb (Duration: 7.4ms | Allocations: 443)
  Rendered layouts/_comment.html.erb (Duration: 89.1ms | Allocations: 2818)
  Rendered layouts/_add_comment.html.erb (Duration: 7.9ms | Allocations: 532)
  [1m[35m (32.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 4.9ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 6.5ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 2.5ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 37.7ms | Allocations: 5297)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 997.8ms | Allocations: 13364)
  Rendered layouts/_header.html.erb (Duration: 4.5ms | Allocations: 1097)
  [1m[36mUser Load (86.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (108.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 223.4ms | Allocations: 4671)
  Rendered layout layouts/application.html.erb (Duration: 1250.8ms | Allocations: 22929)
Completed 200 OK in 3604ms (Views: 215.4ms | ActiveRecord: 3270.3ms | Allocations: 28766)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-19 22:13:26 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (274.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (303.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (27.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (268.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (303.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (57.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (233.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (246.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (55.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (40.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (257.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (300.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 40.2ms | Allocations: 2180)
  [1m[36mDish Load (39.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (24.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (23.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 4.4ms | Allocations: 624)
  Rendered layouts/_reaction.html.erb (Duration: 2.9ms | Allocations: 443)
  Rendered layouts/_comment.html.erb (Duration: 48.3ms | Allocations: 2818)
  Rendered layouts/_add_comment.html.erb (Duration: 3.1ms | Allocations: 532)
  [1m[35m (34.1ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 2.6ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 2.8ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 2.1ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 4.3ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 5.9ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 3.2ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 46.7ms | Allocations: 5298)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 258.2ms | Allocations: 13323)
  Rendered layouts/_header.html.erb (Duration: 6.6ms | Allocations: 1096)
  [1m[36mUser Load (24.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (272.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 339.0ms | Allocations: 4649)
  Rendered layout layouts/application.html.erb (Duration: 620.3ms | Allocations: 22861)
Completed 200 OK in 3084ms (Views: 181.5ms | ActiveRecord: 2835.4ms | Allocations: 28616)


Started GET "/categories" for 127.0.0.1 at 2023-11-19 22:13:36 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (92.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (26.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 426.2ms | Allocations: 6442)
  Rendered layouts/_header.html.erb (Duration: 9.8ms | Allocations: 1110)
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (30.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 91.6ms | Allocations: 4532)
  Rendered layout layouts/application.html.erb (Duration: 574.5ms | Allocations: 15828)
Completed 200 OK in 590ms (Views: 179.0ms | ActiveRecord: 399.9ms | Allocations: 17423)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-19 22:13:38 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (153.2ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (100.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (93.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (96.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (53.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (41.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (47.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (134.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (99.2ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 360.7ms | Allocations: 14547)
  Rendered layouts/_header.html.erb (Duration: 7.9ms | Allocations: 1085)
  [1m[36mUser Load (73.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (114.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 274.4ms | Allocations: 4667)
  Rendered layout layouts/application.html.erb (Duration: 664.0ms | Allocations: 24243)
Completed 200 OK in 1242ms (Views: 205.6ms | ActiveRecord: 1006.7ms | Allocations: 27814)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-19 22:13:45 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (293.9ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (61.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (110.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (289.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (50.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (145.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (46.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (76.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 364.5ms | Allocations: 13672)
  Rendered layouts/_header.html.erb (Duration: 23.5ms | Allocations: 1097)
  [1m[36mUser Load (32.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (315.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 400.3ms | Allocations: 4671)
  Rendered layout layouts/application.html.erb (Duration: 841.6ms | Allocations: 23435)
Completed 200 OK in 1705ms (Views: 229.1ms | ActiveRecord: 1445.3ms | Allocations: 26345)


Started GET "/users/mis_restaurantes" for 127.0.0.1 at 2023-11-19 22:13:49 +0100
Processing by UsersController#mis_restaurantes as HTML
  [1m[36mUser Load (270.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:77:in `mis_restaurantes'
  Rendering layout layouts/application.html.erb
  Rendering users/mis_restaurantes.html.erb within layouts/application
  [1m[36mRestaurant Load (104.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/views/users/mis_restaurantes.html.erb:8
  Rendered users/mis_restaurantes.html.erb within layouts/application (Duration: 123.0ms | Allocations: 2196)
  Rendered layouts/_header.html.erb (Duration: 10.0ms | Allocations: 1110)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 46.5ms | Allocations: 4407)
  Rendered layout layouts/application.html.erb (Duration: 206.5ms | Allocations: 11484)
Completed 200 OK in 487ms (Views: 106.5ms | ActiveRecord: 375.0ms | Allocations: 12606)


Started GET "/categories" for 127.0.0.1 at 2023-11-19 22:13:55 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (131.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (26.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 202.5ms | Allocations: 4538)
  Rendered layouts/_header.html.erb (Duration: 3.6ms | Allocations: 1110)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (318.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 347.2ms | Allocations: 4530)
  Rendered layout layouts/application.html.erb (Duration: 567.8ms | Allocations: 13908)
Completed 200 OK in 579ms (Views: 97.9ms | ActiveRecord: 477.0ms | Allocations: 14169)


Started GET "/users/mis_restaurantes" for 127.0.0.1 at 2023-11-19 22:14:48 +0100
Processing by UsersController#mis_restaurantes as HTML
  [1m[36mUser Load (48.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:77:in `mis_restaurantes'
  Rendering layout layouts/application.html.erb
  Rendering users/mis_restaurantes.html.erb within layouts/application
  [1m[36mRestaurant Load (185.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/views/users/mis_restaurantes.html.erb:8
  Rendered users/mis_restaurantes.html.erb within layouts/application (Duration: 194.5ms | Allocations: 1856)
  Rendered layouts/_header.html.erb (Duration: 4.2ms | Allocations: 1110)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 17.7ms | Allocations: 4406)
  Rendered layout layouts/application.html.erb (Duration: 233.2ms | Allocations: 11127)
Completed 200 OK in 288ms (Views: 49.1ms | ActiveRecord: 234.6ms | Allocations: 12039)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-19 22:14:50 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (82.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (247.1ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (34.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (122.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (302.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (304.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (303.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (287.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (112.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (293.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (250.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (146.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (293.1ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (56.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 63.2ms | Allocations: 2178)
  [1m[36mDish Load (31.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (38.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (157.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 2.6ms | Allocations: 624)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 443)
  Rendered layouts/_comment.html.erb (Duration: 172.4ms | Allocations: 2822)
  Rendered layouts/_add_comment.html.erb (Duration: 1.3ms | Allocations: 532)
  [1m[35m (100.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 2.6ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 3.8ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 3.3ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 3.1ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 76.1ms | Allocations: 5297)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 507.1ms | Allocations: 13322)
  Rendered layouts/_header.html.erb (Duration: 17.8ms | Allocations: 1084)
  [1m[36mUser Load (83.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (110.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 270.5ms | Allocations: 4667)
  Rendered layout layouts/application.html.erb (Duration: 855.6ms | Allocations: 22824)
Completed 200 OK in 3710ms (Views: 279.3ms | ActiveRecord: 3356.3ms | Allocations: 28597)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-19 22:16:30 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (292.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (25.8ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (271.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (109.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (294.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (181.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (308.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (306.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (111.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (294.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (61.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 78.6ms | Allocations: 2833)
  [1m[36mDish Load (287.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (90.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (273.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 6.6ms | Allocations: 878)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 444)
  Rendered layouts/_comment.html.erb (Duration: 339.6ms | Allocations: 5501)
  Rendered layouts/_add_comment.html.erb (Duration: 4.0ms | Allocations: 678)
  [1m[35m (60.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 446)
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 3.3ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 2.4ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 35.3ms | Allocations: 5314)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 1356.0ms | Allocations: 23622)
  Rendered layouts/_header.html.erb (Duration: 5.9ms | Allocations: 1354)
  [1m[36mUser Load (45.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (239.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 554.9ms | Allocations: 13402)
  Rendered layout layouts/application.html.erb (Duration: 1956.6ms | Allocations: 57429)
Completed 200 OK in 6132ms (Views: 322.0ms | ActiveRecord: 5493.8ms | Allocations: 86490)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-19 22:18:32 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (107.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (96.8ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (96.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (101.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (99.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (100.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (96.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (23.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (25.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 50.0ms | Allocations: 2833)
  [1m[36mDish Load (23.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (26.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 4.6ms | Allocations: 878)
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 444)
  Rendered layouts/_comment.html.erb (Duration: 72.5ms | Allocations: 5502)
  Rendered layouts/_add_comment.html.erb (Duration: 4.3ms | Allocations: 678)
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 446)
  Rendered layouts/_reaction.html.erb (Duration: 2.9ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 2.8ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 2.1ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 28.6ms | Allocations: 5314)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 401.7ms | Allocations: 24278)
  Rendered layouts/_header.html.erb (Duration: 6.2ms | Allocations: 1354)
  [1m[36mUser Load (24.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 209.1ms | Allocations: 13379)
  Rendered layout layouts/application.html.erb (Duration: 678.9ms | Allocations: 58064)
Completed 200 OK in 2353ms (Views: 362.0ms | ActiveRecord: 1740.9ms | Allocations: 87091)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-19 22:19:10 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (43.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (105.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (291.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (294.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (113.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (112.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (26.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (30.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (113.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (291.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (307.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (260.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (284.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (184.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 199.8ms | Allocations: 2833)
  [1m[36mDish Load (44.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (49.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (107.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (199.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (280.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 6.9ms | Allocations: 878)
  Rendered layouts/_reaction.html.erb (Duration: 4.2ms | Allocations: 444)
  Rendered layouts/_comment.html.erb (Duration: 342.0ms | Allocations: 5505)
  Rendered layouts/_add_comment.html.erb (Duration: 3.6ms | Allocations: 678)
  [1m[35m (57.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 446)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 12.3ms | Allocations: 5314)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 1249.2ms | Allocations: 24636)
  Rendered layouts/_header.html.erb (Duration: 5.5ms | Allocations: 1354)
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (303.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 661.2ms | Allocations: 13419)
  Rendered layout layouts/application.html.erb (Duration: 1958.4ms | Allocations: 58460)
Completed 200 OK in 5988ms (Views: 279.3ms | ActiveRecord: 5489.6ms | Allocations: 87500)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-19 22:19:57 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (108.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (302.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (301.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (287.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (338.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (240.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (84.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (101.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (32.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (78.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (111.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 128.7ms | Allocations: 2833)
  [1m[36mDish Load (25.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (48.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (100.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (28.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (54.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 6.1ms | Allocations: 878)
  Rendered layouts/_reaction.html.erb (Duration: 2.4ms | Allocations: 444)
  Rendered layouts/_comment.html.erb (Duration: 102.3ms | Allocations: 5503)
  Rendered layouts/_add_comment.html.erb (Duration: 5.4ms | Allocations: 678)
  [1m[35m (54.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 446)
  Rendered layouts/_reaction.html.erb (Duration: 2.6ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 2.1ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 2.9ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 40.5ms | Allocations: 5314)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 788.5ms | Allocations: 24293)
  Rendered layouts/_header.html.erb (Duration: 6.3ms | Allocations: 1356)
  [1m[36mUser Load (282.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (250.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 804.6ms | Allocations: 13422)
  Rendered layout layouts/application.html.erb (Duration: 1875.8ms | Allocations: 58140)
Completed 200 OK in 5717ms (Views: 605.7ms | ActiveRecord: 4828.0ms | Allocations: 87102)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-19 22:20:25 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (187.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (86.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (110.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (242.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (104.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (32.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (237.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (251.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (335.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (261.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 280.2ms | Allocations: 2834)
  [1m[36mDish Load (303.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (284.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (28.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (26.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (234.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 5.3ms | Allocations: 878)
  Rendered layouts/_reaction.html.erb (Duration: 2.5ms | Allocations: 444)
  Rendered layouts/_comment.html.erb (Duration: 278.2ms | Allocations: 5495)
  Rendered layouts/_add_comment.html.erb (Duration: 5.1ms | Allocations: 678)
  [1m[35m (65.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 446)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 24.5ms | Allocations: 5314)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 1654.8ms | Allocations: 35859)
  Rendered layouts/_header.html.erb (Duration: 5.3ms | Allocations: 1354)
  [1m[36mUser Load (54.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (109.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 620.3ms | Allocations: 13414)
  Rendered layout layouts/application.html.erb (Duration: 2363.8ms | Allocations: 70042)
Completed 200 OK in 5549ms (Views: 378.5ms | ActiveRecord: 4884.0ms | Allocations: 99018)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-19 22:21:26 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (72.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (293.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (109.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (109.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (279.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-19 21:21:27.077318')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (105.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-19 21:21:27.378529')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (270.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-19 21:21:27.506354')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (94.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (280.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (257.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 21:21:28.180888')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (40.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (266.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 21:21:28.503323')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (32.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 21:21:28.783234')[0m  [["reviewable_id", 16], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (112.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (61.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (26.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 21:21:29.292899')[0m  [["reviewable_id", 4], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (29.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 4]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 21:21:29.363513')[0m  [["reviewable_id", 5], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (26.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "4"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (96.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "4"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 90.2ms | Allocations: 3355)
  Rendered layouts/_header.html.erb (Duration: 21.4ms | Allocations: 1086)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 140.8ms | Allocations: 4431)
  Rendered layout layouts/application.html.erb (Duration: 312.9ms | Allocations: 12605)
Completed 200 OK in 3698ms (Views: 321.5ms | ActiveRecord: 3138.9ms | Allocations: 25804)


Started GET "/logout" for 127.0.0.1 at 2023-11-19 22:21:35 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 4ms (ActiveRecord: 0.0ms | Allocations: 447)


Started GET "/" for 127.0.0.1 at 2023-11-19 22:21:35 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (248.0ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (99.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (95.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (96.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (77.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (30.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (51.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (70.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (97.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 496.5ms | Allocations: 16116)
  Rendered layouts/_header.html.erb (Duration: 5.1ms | Allocations: 1089)
  Rendered layouts/_sidenav.html.erb (Duration: 13.8ms | Allocations: 2668)
  Rendered layout layouts/application.html.erb (Duration: 544.7ms | Allocations: 23826)
Completed 200 OK in 1269ms (Views: 249.6ms | ActiveRecord: 945.5ms | Allocations: 28471)


Started GET "/restaurants/4" for 127.0.0.1 at 2023-11-19 22:21:41 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mRestaurant Load (32.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (312.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 4], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (292.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 4]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (299.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=4 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (114.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=4 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (296.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=4 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (102.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 4], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (274.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=4 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (107.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=4 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-19 22:21:44 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[35m (258.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=4 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (133.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=4 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (305.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (30.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 34.2ms | Allocations: 2544)
  [1m[36mDish Load (277.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 4]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[36mReview Load (30.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 6.5ms | Allocations: 621)
  Rendered layouts/_reaction.html.erb (Duration: 2.4ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 59.8ms | Allocations: 2809)
  Rendered layouts/_add_comment.html.erb (Duration: 4.3ms | Allocations: 532)
  [1m[35m (167.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=4 AND posts.autor=users.nombre AND posts.restaurant_id=4[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 7.5ms | Allocations: 1768)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 579.8ms | Allocations: 9402)
  Rendered layouts/_header.html.erb (Duration: 6.2ms | Allocations: 1084)
  Rendered layouts/_sidenav.html.erb (Duration: 26.5ms | Allocations: 2649)
  Rendered layout layouts/application.html.erb (Duration: 637.8ms | Allocations: 16895)
Completed 200 OK in 3288ms (Views: 168.3ms | ActiveRecord: 3036.5ms | Allocations: 24992)


  [1m[36mRestaurant Load (57.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (27.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (46.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (139.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (306.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (198.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (306.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (302.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (51.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (255.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (298.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (114.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (107.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 46.9ms | Allocations: 1894)
  [1m[36mDish Load (94.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[36mReview Load (100.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 3.1ms | Allocations: 614)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 203.9ms | Allocations: 2795)
  Rendered layouts/_add_comment.html.erb (Duration: 4.2ms | Allocations: 526)
  [1m[35m (79.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 2.5ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 19.9ms | Allocations: 5297)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 617.4ms | Allocations: 12788)
  Rendered layouts/_header.html.erb (Duration: 4.4ms | Allocations: 1084)
  Rendered layouts/_sidenav.html.erb (Duration: 16.6ms | Allocations: 2649)
  Rendered layout layouts/application.html.erb (Duration: 654.0ms | Allocations: 20272)
Completed 200 OK in 5961ms (Views: 382.8ms | ActiveRecord: 3472.6ms | Allocations: 48295)


Started GET "/login" for 127.0.0.1 at 2023-11-19 22:24:09 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 18.5ms | Allocations: 2921)
  Rendered layouts/_header.html.erb (Duration: 5.9ms | Allocations: 1085)
  Rendered layouts/_sidenav.html.erb (Duration: 14.2ms | Allocations: 2649)
  Rendered layout layouts/application.html.erb (Duration: 58.6ms | Allocations: 10412)
Completed 200 OK in 64ms (Views: 62.0ms | ActiveRecord: 0.0ms | Allocations: 10862)


Started POST "/login" for 127.0.0.1 at 2023-11-19 22:24:16 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"Atreides", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 466ms (ActiveRecord: 25.3ms | Allocations: 891)


Started GET "/" for 127.0.0.1 at 2023-11-19 22:24:17 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (430.1ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (259.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (109.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (98.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (135.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (99.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (88.0ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 549.9ms | Allocations: 13703)
  Rendered layouts/_header.html.erb (Duration: 23.0ms | Allocations: 1098)
  [1m[36mUser Load (56.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 168.9ms | Allocations: 4674)
  Rendered layout layouts/application.html.erb (Duration: 831.9ms | Allocations: 23528)
Completed 200 OK in 1811ms (Views: 409.7ms | ActiveRecord: 1373.7ms | Allocations: 26488)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-19 22:24:22 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (39.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (59.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (305.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (306.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (31.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (265.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (301.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (307.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (181.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (113.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (263.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (34.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (52.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (68.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 87.1ms | Allocations: 2200)
  [1m[36mDish Load (35.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (210.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (36.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (89.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (28.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 4.7ms | Allocations: 624)
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 443)
  Rendered layouts/_comment.html.erb (Duration: 50.3ms | Allocations: 2818)
  Rendered layouts/_add_comment.html.erb (Duration: 2.9ms | Allocations: 532)
  [1m[35m (69.0ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 2.2ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 2.7ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 25.2ms | Allocations: 5297)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 699.1ms | Allocations: 13938)
  Rendered layouts/_header.html.erb (Duration: 5.8ms | Allocations: 1096)
  [1m[36mUser Load (138.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (91.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 263.1ms | Allocations: 4665)
  Rendered layout layouts/application.html.erb (Duration: 991.1ms | Allocations: 23496)
Completed 200 OK in 3309ms (Views: 226.0ms | ActiveRecord: 3028.8ms | Allocations: 29269)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-19 22:25:00 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (47.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (25.5ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (284.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (280.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (30.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (260.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (236.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (62.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (70.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (203.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (255.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 270.2ms | Allocations: 2176)
  [1m[36mDish Load (300.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (300.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (302.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (302.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (302.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 6.7ms | Allocations: 618)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 443)
  Rendered layouts/_comment.html.erb (Duration: 327.1ms | Allocations: 2801)
  Rendered layouts/_add_comment.html.erb (Duration: 2.3ms | Allocations: 526)
  [1m[35m (86.1ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 2.1ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 24.2ms | Allocations: 5297)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 1948.3ms | Allocations: 13885)
  Rendered layouts/_header.html.erb (Duration: 6.6ms | Allocations: 1084)
  [1m[36mUser Load (325.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (299.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 659.3ms | Allocations: 4636)
  Rendered layout layouts/application.html.erb (Duration: 2641.7ms | Allocations: 23356)
Completed 200 OK in 4284ms (Views: 170.0ms | ActiveRecord: 4050.7ms | Allocations: 29123)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-19 22:25:11 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (149.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (109.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (291.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (110.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (291.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-19 21:25:12.670285')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (110.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-19 21:25:12.965564')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (289.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-19 21:25:13.080620')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (35.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (30.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (42.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 21:25:13.470310')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (25.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (31.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 21:25:13.562939')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (266.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 21:25:13.611467')[0m  [["reviewable_id", 16], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (59.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (29.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (310.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 21:25:13.983927')[0m  [["reviewable_id", 4], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (53.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 4]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (233.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-19 21:25:14.361256')[0m  [["reviewable_id", 5], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (27.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "4"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (269.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "4"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 11.5ms | Allocations: 2283)
  Rendered layouts/_header.html.erb (Duration: 4.3ms | Allocations: 1086)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.8ms | Allocations: 4406)
  Rendered layout layouts/application.html.erb (Duration: 58.2ms | Allocations: 11504)
Completed 200 OK in 2980ms (Views: 60.1ms | ActiveRecord: 2762.6ms | Allocations: 22074)


Started GET "/logout" for 127.0.0.1 at 2023-11-19 22:25:18 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.0ms | Allocations: 356)


Started GET "/" for 127.0.0.1 at 2023-11-19 22:25:18 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (310.0ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (291.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (300.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (302.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (307.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (299.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (296.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (23.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (280.0ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 736.0ms | Allocations: 13683)
  Rendered layouts/_header.html.erb (Duration: 26.7ms | Allocations: 1086)
  Rendered layouts/_sidenav.html.erb (Duration: 30.3ms | Allocations: 2680)
  Rendered layout layouts/application.html.erb (Duration: 866.9ms | Allocations: 21407)
Completed 200 OK in 2713ms (Views: 275.3ms | ActiveRecord: 2409.6ms | Allocations: 24391)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-19 22:25:23 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (38.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (51.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (96.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (99.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (63.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (137.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (97.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (97.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (100.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (296.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (111.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (180.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 6.0ms | Allocations: 1899)
  [1m[36mDish Load (273.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[36mReview Load (272.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 12.1ms | Allocations: 620)
  Rendered layouts/_reaction.html.erb (Duration: 6.4ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 322.0ms | Allocations: 2813)
  Rendered layouts/_add_comment.html.erb (Duration: 2.7ms | Allocations: 532)
  [1m[35m (277.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 2.6ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 24.6ms | Allocations: 5297)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 934.7ms | Allocations: 12785)
  Rendered layouts/_header.html.erb (Duration: 4.6ms | Allocations: 1096)
  Rendered layouts/_sidenav.html.erb (Duration: 14.1ms | Allocations: 2679)
  Rendered layout layouts/application.html.erb (Duration: 974.1ms | Allocations: 20357)
Completed 200 OK in 2416ms (Views: 153.4ms | ActiveRecord: 2216.0ms | Allocations: 26143)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-19 22:25:30 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (250.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (293.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (296.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[36mReview Load (289.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 303.4ms | Allocations: 3587)
  Rendered dishes/show.html.erb within layouts/application (Duration: 616.1ms | Allocations: 5814)
  Rendered layout layouts/application.html.erb (Duration: 617.0ms | Allocations: 5906)
Completed 500 Internal Server Error in 1278ms (ActiveRecord: 1128.4ms | Allocations: 8340)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `locals' for #<ActionView::Base:0x00000000046e10>):
    17:       <% end %>
    18:       <div class="comment_actions_row">
    19:         <div class="comment_action_item">
    20:           <%= render "layouts/reaction", locals: {comment: comment, button: "Like", rcts_no: locals[:reactions][comment.id][:likes], user_reaction_id: locals[:user_reactions][comment.id][:reaction_id]} %>
    21:         </div>
    22:         <div class="comment_action_item">
    23:           <%= render "layouts/reaction", locals: {comment: comment, button: "Dislike", rcts_no: locals[:reactions][comment.id][:dislikes], user_reaction_id: locals[:user_reactions][comment.id][:reaction_id]} %>
  
app/views/layouts/_comment.html.erb:20
app/views/layouts/_comment.html.erb:2
app/views/dishes/show.html.erb:28
Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-19 22:25:34 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (31.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (234.1ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (337.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (291.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (110.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (294.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (105.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (142.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (143.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (110.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (293.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (251.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (50.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 9.9ms | Allocations: 1899)
  [1m[36mDish Load (93.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[36mReview Load (24.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 3.7ms | Allocations: 620)
  Rendered layouts/_reaction.html.erb (Duration: 2.2ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 48.3ms | Allocations: 2810)
  Rendered layouts/_add_comment.html.erb (Duration: 3.4ms | Allocations: 532)
Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-19 22:25:37 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[35m (217.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 2.1ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 442)
  [1m[36mRestaurant Load (35.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 29.6ms | Allocations: 5798)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 423.6ms | Allocations: 14737)
  Rendered layouts/_header.html.erb (Duration: 3.3ms | Allocations: 1096)
  Rendered layouts/_sidenav.html.erb (Duration: 10.6ms | Allocations: 2679)
  Rendered layout layouts/application.html.erb (Duration: 451.0ms | Allocations: 22309)
Completed 200 OK in 2900ms (Views: 117.8ms | ActiveRecord: 2731.0ms | Allocations: 28075)


  [1m[36mRank Exists? (290.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (22.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (280.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (94.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (68.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (231.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (304.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (290.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (288.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (308.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (104.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 11.9ms | Allocations: 1894)
  [1m[36mDish Load (272.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[36mReview Load (297.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 621)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 319.9ms | Allocations: 2809)
  Rendered layouts/_add_comment.html.erb (Duration: 2.6ms | Allocations: 532)
  [1m[35m (88.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 3.1ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 31.1ms | Allocations: 5297)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 749.8ms | Allocations: 12769)
  Rendered layouts/_header.html.erb (Duration: 6.8ms | Allocations: 1096)
  Rendered layouts/_sidenav.html.erb (Duration: 16.8ms | Allocations: 2679)
  Rendered layout layouts/application.html.erb (Duration: 803.7ms | Allocations: 20341)
Completed 200 OK in 3201ms (Views: 147.7ms | ActiveRecord: 3003.3ms | Allocations: 39688)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-19 22:25:43 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (308.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (300.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (108.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[36mReview Load (291.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 313.2ms | Allocations: 2519)
  Rendered dishes/show.html.erb within layouts/application (Duration: 427.6ms | Allocations: 3182)
  Rendered layout layouts/application.html.erb (Duration: 428.4ms | Allocations: 3274)
Completed 500 Internal Server Error in 1056ms (ActiveRecord: 1008.8ms | Allocations: 4545)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `locals' for #<ActionView::Base:0x00000000047158>):
    17:       <% end %>
    18:       <div class="comment_actions_row">
    19:         <div class="comment_action_item">
    20:           <%= render "layouts/reaction", locals: {comment: comment, button: "Like", rcts_no: locals[:reactions][comment.id][:likes], user_reaction_id: locals[:user_reactions][comment.id][:reaction_id]} %>
    21:         </div>
    22:         <div class="comment_action_item">
    23:           <%= render "layouts/reaction", locals: {comment: comment, button: "Dislike", rcts_no: locals[:reactions][comment.id][:dislikes], user_reaction_id: locals[:user_reactions][comment.id][:reaction_id]} %>
  
app/views/layouts/_comment.html.erb:20
app/views/layouts/_comment.html.erb:2
app/views/dishes/show.html.erb:28
Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-19 22:25:45 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (322.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (114.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (221.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[36mReview Load (47.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 76.1ms | Allocations: 2521)
  Rendered dishes/show.html.erb within layouts/application (Duration: 312.8ms | Allocations: 4659)
  Rendered layout layouts/application.html.erb (Duration: 319.7ms | Allocations: 4841)
Completed 500 Internal Server Error in 823ms (ActiveRecord: 704.9ms | Allocations: 126058)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `locals' for #<ActionView::Base:0x00000000047428>):
    17:       <% end %>
    18:       <div class="comment_actions_row">
    19:         <div class="comment_action_item">
    20:           <%= render "layouts/reaction", locals: {comment: comment, button: "Like", rcts_no: locals[:reactions][comment.id][:likes], user_reaction_id: locals[:user_reactions][comment.id][:reaction_id]} %>
    21:         </div>
    22:         <div class="comment_action_item">
    23:           <%= render "layouts/reaction", locals: {comment: comment, button: "Dislike", rcts_no: locals[:reactions][comment.id][:dislikes], user_reaction_id: locals[:user_reactions][comment.id][:reaction_id]} %>
  
app/views/layouts/_comment.html.erb:20
app/views/layouts/_comment.html.erb:2
app/views/dishes/show.html.erb:28
Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-19 22:26:00 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (35.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (27.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (217.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (302.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (80.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (223.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (275.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (28.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (293.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (156.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (141.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (268.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 9.4ms | Allocations: 1899)
  [1m[36mDish Load (292.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[36mReview Load (79.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 3.8ms | Allocations: 620)
  Rendered layouts/_reaction.html.erb (Duration: 3.1ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 102.1ms | Allocations: 2806)
  Rendered layouts/_add_comment.html.erb (Duration: 2.9ms | Allocations: 532)
  [1m[35m (193.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 2.5ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 4.2ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 2.1ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 5.5ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 5.7ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 48.4ms | Allocations: 5297)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 666.5ms | Allocations: 12778)
  Rendered layouts/_header.html.erb (Duration: 5.9ms | Allocations: 1096)
  Rendered layouts/_sidenav.html.erb (Duration: 24.3ms | Allocations: 2679)
  Rendered layout layouts/application.html.erb (Duration: 729.6ms | Allocations: 20350)
Completed 200 OK in 2870ms (Views: 166.4ms | ActiveRecord: 2641.0ms | Allocations: 26135)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-19 22:26:47 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (271.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (194.8ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (24.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (23.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (296.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (299.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (55.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (307.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (298.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (304.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (255.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (27.0ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 14.6ms | Allocations: 2524)
  [1m[36mDish Load (25.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[36mReview Load (270.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 6.0ms | Allocations: 874)
  Rendered layouts/_reaction.html.erb (Duration: 2.5ms | Allocations: 440)
  Rendered layouts/_comment.html.erb (Duration: 323.5ms | Allocations: 5483)
  Rendered layouts/_add_comment.html.erb (Duration: 5.1ms | Allocations: 678)
  [1m[35m (350.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 2.5ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 4.3ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 32.1ms | Allocations: 5311)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 916.0ms | Allocations: 23119)
  Rendered layouts/_header.html.erb (Duration: 11.6ms | Allocations: 1359)
  Rendered layouts/_sidenav.html.erb (Duration: 18.2ms | Allocations: 3384)
  Rendered layout layouts/application.html.erb (Duration: 1039.6ms | Allocations: 46914)
Completed 200 OK in 5688ms (Views: 302.8ms | ActiveRecord: 5109.0ms | Allocations: 76069)


Started GET "/login" for 127.0.0.1 at 2023-11-19 22:26:58 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 53.2ms | Allocations: 2960)
  Rendered layouts/_header.html.erb (Duration: 2.4ms | Allocations: 1098)
  Rendered layouts/_sidenav.html.erb (Duration: 5.0ms | Allocations: 2680)
  Rendered layout layouts/application.html.erb (Duration: 185.3ms | Allocations: 10504)
Completed 200 OK in 351ms (Views: 187.4ms | ActiveRecord: 61.5ms | Allocations: 16069)


Started POST "/login" for 127.0.0.1 at 2023-11-19 22:27:16 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"Atreides", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (282.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 771ms (ActiveRecord: 282.8ms | Allocations: 1076)


Started GET "/" for 127.0.0.1 at 2023-11-19 22:27:17 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (431.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (306.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (107.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (287.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (112.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (290.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (236.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (285.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (110.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 863.2ms | Allocations: 16118)
  Rendered layouts/_header.html.erb (Duration: 23.6ms | Allocations: 1097)
  [1m[36mUser Load (181.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (31.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 391.0ms | Allocations: 7446)
  Rendered layout layouts/application.html.erb (Duration: 1310.1ms | Allocations: 28683)
Completed 200 OK in 2901ms (Views: 269.0ms | ActiveRecord: 2583.3ms | Allocations: 33371)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-19 22:27:24 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (38.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (294.8ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (112.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (288.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (311.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (187.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (299.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (420.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (291.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (299.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (109.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (292.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (98.1ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (245.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 286.2ms | Allocations: 2182)
  [1m[36mDish Load (298.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:10
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (264.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (33.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (218.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 3.7ms | Allocations: 627)
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 443)
  Rendered layouts/_comment.html.erb (Duration: 240.9ms | Allocations: 2817)
  Rendered layouts/_add_comment.html.erb (Duration: 3.4ms | Allocations: 532)
  [1m[35m (38.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 2.5ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 26.7ms | Allocations: 5297)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 1256.2ms | Allocations: 13928)
  Rendered layouts/_header.html.erb (Duration: 4.3ms | Allocations: 1085)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 94.7ms | Allocations: 4635)
  Rendered layout layouts/application.html.erb (Duration: 1377.0ms | Allocations: 23399)
Completed 200 OK in 4506ms (Views: 210.8ms | ActiveRecord: 4215.9ms | Allocations: 29183)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-19 22:31:10 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (306.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (291.8ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (303.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (27.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (27.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (206.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (42.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (250.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (253.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 278.0ms | Allocations: 2828)
  [1m[36mDish Load (392.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (55.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (283.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (308.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (294.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 7.8ms | Allocations: 872)
  Rendered layouts/_reaction.html.erb (Duration: 2.4ms | Allocations: 444)
  Rendered layouts/_comment.html.erb (Duration: 354.3ms | Allocations: 5477)
  Rendered layouts/_add_comment.html.erb (Duration: 7.6ms | Allocations: 672)
  [1m[35m (116.2ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 3.2ms | Allocations: 446)
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 2.6ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 2.9ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 2.6ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 44.0ms | Allocations: 5314)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 2367.3ms | Allocations: 24226)
  Rendered layouts/_header.html.erb (Duration: 28.5ms | Allocations: 1343)
  [1m[36mUser Load (113.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (108.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 747.3ms | Allocations: 13417)
  Rendered layout layouts/application.html.erb (Duration: 3202.4ms | Allocations: 57990)
Completed 200 OK in 6332ms (Views: 449.0ms | ActiveRecord: 5658.5ms | Allocations: 86982)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-19 22:41:29 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (128.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (102.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (108.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (251.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (113.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (291.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (292.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (62.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (159.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (244.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (28.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (45.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (173.1ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (30.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 49.9ms | Allocations: 2831)
  [1m[36mDish Load (179.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (284.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (115.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (184.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (299.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 6.2ms | Allocations: 874)
  Rendered layouts/_reaction.html.erb (Duration: 2.5ms | Allocations: 444)
  Rendered layouts/_comment.html.erb (Duration: 470.9ms | Allocations: 5489)
  Rendered layouts/_add_comment.html.erb (Duration: 3.6ms | Allocations: 674)
  [1m[35m (334.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 446)
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 21.2ms | Allocations: 5314)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 1750.3ms | Allocations: 23995)
  Rendered layouts/_header.html.erb (Duration: 3.1ms | Allocations: 1354)
  [1m[36mUser Load (306.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (29.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 939.6ms | Allocations: 13133)
  Rendered layout layouts/application.html.erb (Duration: 2737.2ms | Allocations: 57390)
Completed 200 OK in 8452ms (Views: 982.2ms | ActiveRecord: 6118.7ms | Allocations: 88644)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-19 22:44:02 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (116.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (94.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (105.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (130.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (100.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (99.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (94.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (87.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (132.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (96.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (64.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (96.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (83.0ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/show.html.erb within layouts/application (Duration: 21.8ms | Allocations: 1581)
  Rendered layout layouts/application.html.erb (Duration: 24.1ms | Allocations: 1682)
Completed 500 Internal Server Error in 3303ms (ActiveRecord: 3035.7ms | Allocations: 30707)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <div>
  <%= render "header", locals: {restaurant: @restaurant, order: true, ratings: @ratings} %>

  <% if flash[:dishes] %>
    <div class="notice" ><%= flash[:dishes] %></div>
  <% end %>
  <div id="restaurant_menu" class="restaurant_section_title">MenÃº</div>
  <div class="restaurant_section_content">
    <% @restaurant.dishes.each do |dish| %>
      <%= link_to get_dish_path(dish), style: "text-decoration: none !important" do %>
        <div class="restaurant_dish_container">
          <% if dish.ruta_img_plato.present? %>
            <%= image_tag dish.ruta_img_plato, class: "restaurant_dish_img" %>
          <% else %>
            <%= image_tag "default-dish-img", class: "restaurant_dish_img" %>
          <% end %>
        
          <div class="restaurant_dish_content">
            <div class="restaurant_dish_name"><%= dish.nombre%></div>
            <div class="restaurant_dish_desc"><%= dish.descripcion %></div>
          </div>
          <div style="display: flex; gap: 20px; align-items: center;">
            <% if session[:username].present? and user_is_owner?(@restaurant.id) %>
                <%= link_to edit_restaurant_dish_path(@restaurant.id), class: "restaurants_new_dish_button" do %>
                  <div class="restaurants_new_dish_button_text">Editar plato</div>
                <% end %>
            <% end %>
            <div class="restaurant_dish_price"><%= dish.precio %> â‚¬</div>
          </div>
        </div>
      <% end %>
    <% end %>

      <!--  Si el usuario es el propietario del restaurante mostar un botÃ³n con el enlace a la pagina de aÃ±adir plato -->
    <% if session[:username].present? and user_is_owner?(@restaurant.id) %>
      <div style="display: flex; flex-direction: column; align-items: center;">
        <%= link_to "AÃ±adir plato" new_restaurant_dish_path(@restaurant.id), class: "restaurants_new_dish_button" %>
      </div>
    <% end %>
  </div>

  <div id="restaurant_reviews" class="restaurant_section_title"> ReseÃ±as del restaurante </div>
  <div class="restaurant_section_content_comments">
    <div class="restaurant_section_content restaurant_section_content_comments">
      <div class="category_post_list">
        <%= render "layouts/comment", comments: @restaurant.reviews, locals: {reactions: @reviews_reactions, user_reactions: @reviews_user_reactions}%>
      </div>
      <%= render "layouts/add_comment", path_param: new_review_path(review_to: @restaurant.id, review_type: "Restaurant") %> 
    </div>
  </div>
  <div id="restaurant_posts" class="restaurant_section_title"> Posts del restaurante </div>
  <div class="restaurant_section_content restaurant_section_content_comments">
    <div class="category_post_list">
      <%= render "layouts/comment", comments: get_rest_managers_posts(@restaurant.id), locals: {reactions: @posts_reactions, user_reactions: @posts_user_reactions} %>
    </div>
  </div>

  <div id="restaurant_info" class="restaurant_section_title"> InformaciÃ³n del restaurante </div>
  <div class="restaurant_section_content restaurant_section_content_info">
  <div class="restaurant_dir_tlf_container">
    <div class="restaurant_info_item">
      <div class="restaurant_info_subtitle"> Direccion </div>
      <%= @restaurant.direccion %>
    </div>
    <div class="restaurant_info_item">
      <div class="restaurant_info_subtitle"> Telefono </div>
      <%= @restaurant.telefono %>
    </div>
  </div>
  <div class="restaurant_dir_tlf_container">
    <div class="restaurant_info_item">
      <div class="restaurant_info_subtitle"> Horario </div>
      <%= @restaurant.horario %>
    </div>
  </div>
</div>

):
1:    <div>
2:      <%= render "header", locals: {restaurant: @restaurant, order: true, ratings: @ratings} %>
3:    
4:      <% if flash[:dishes] %>
5:        <div class="notice" ><%= flash[:dishes] %></div>
6:      <% end %>
7:      <div id="restaurant_menu" class="restaurant_section_title">MenÃº</div>
8:      <div class="restaurant_section_content">
9:        <% @restaurant.dishes.each do |dish| %>
10:          <%= link_to get_dish_path(dish), style: "text-decoration: none !important" do %>
11:            <div class="restaurant_dish_container">
12:              <% if dish.ruta_img_plato.present? %>
13:                <%= image_tag dish.ruta_img_plato, class: "restaurant_dish_img" %>
14:              <% else %>
15:                <%= image_tag "default-dish-img", class: "restaurant_dish_img" %>
16:              <% end %>
17:            
18:              <div class="restaurant_dish_content">
19:                <div class="restaurant_dish_name"><%= dish.nombre%></div>
20:                <div class="restaurant_dish_desc"><%= dish.descripcion %></div>
21:              </div>
22:              <div style="display: flex; gap: 20px; align-items: center;">
23:                <% if session[:username].present? and user_is_owner?(@restaurant.id) %>
24:                    <%= link_to edit_restaurant_dish_path(@restaurant.id), class: "restaurants_new_dish_button" do %>
25:                      <div class="restaurants_new_dish_button_text">Editar plato</div>
26:                    <% end %>
27:                <% end %>
28:                <div class="restaurant_dish_price"><%= dish.precio %> â‚¬</div>
29:              </div>
30:            </div>
31:          <% end %>
32:        <% end %>
33:    
34:          <!--  Si el usuario es el propietario del restaurante mostar un botÃ³n con el enlace a la pagina de aÃ±adir plato -->
35:        <% if session[:username].present? and user_is_owner?(@restaurant.id) %>
36:          <div style="display: flex; flex-direction: column; align-items: center;">
37:            <%= link_to "AÃ±adir plato" new_restaurant_dish_path(@restaurant.id), class: "restaurants_new_dish_button" %>
38:          </div>
39:        <% end %>
40:      </div>
41:    
42:      <div id="restaurant_reviews" class="restaurant_section_title"> ReseÃ±as del restaurante </div>
43:      <div class="restaurant_section_content_comments">
44:        <div class="restaurant_section_content restaurant_section_content_comments">
45:          <div class="category_post_list">
46:            <%= render "layouts/comment", comments: @restaurant.reviews, locals: {reactions: @reviews_reactions, user_reactions: @reviews_user_reactions}%>
47:          </div>
48:          <%= render "layouts/add_comment", path_param: new_review_path(review_to: @restaurant.id, review_type: "Restaurant") %> 
49:        </div>
50:      </div>
51:      <div id="restaurant_posts" class="restaurant_section_title"> Posts del restaurante </div>
52:      <div class="restaurant_section_content restaurant_section_content_comments">
53:        <div class="category_post_list">
54:          <%= render "layouts/comment", comments: get_rest_managers_posts(@restaurant.id), locals: {reactions: @posts_reactions, user_reactions: @posts_user_reactions} %>
55:        </div>
56:      </div>
57:    
58:      <div id="restaurant_info" class="restaurant_section_title"> InformaciÃ³n del restaurante </div>
59:      <div class="restaurant_section_content restaurant_section_content_info">
60:      <div class="restaurant_dir_tlf_container">
61:        <div class="restaurant_info_item">
62:          <div class="restaurant_info_subtitle"> Direccion </div>
63:          <%= @restaurant.direccion %>
64:        </div>
65:        <div class="restaurant_info_item">
66:          <div class="restaurant_info_subtitle"> Telefono </div>
67:          <%= @restaurant.telefono %>
68:        </div>
69:      </div>
70:      <div class="restaurant_dir_tlf_container">
71:        <div class="restaurant_info_item">
72:          <div class="restaurant_info_subtitle"> Horario </div>
73:          <%= @restaurant.horario %>
74:        </div>
75:      </div>
76:    </div>
  
app/views/restaurants/show.html.erb:37: syntax error, unexpected local variable or method, expecting ')'
Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-19 22:45:03 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (27.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (26.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Load (26.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:28:in `show'
  [1m[35m (291.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (293.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (271.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (286.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (80.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (297.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (29.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (42.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (27.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 57.0ms | Allocations: 2836)
  [1m[36mDish Load (27.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (26.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (27.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (26.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 3.7ms | Allocations: 878)
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 444)
  Rendered layouts/_comment.html.erb (Duration: 69.7ms | Allocations: 5491)
  Rendered layouts/_add_comment.html.erb (Duration: 3.6ms | Allocations: 678)
  [1m[35m (28.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 446)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 26.5ms | Allocations: 5314)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 432.6ms | Allocations: 24220)
  Rendered layouts/_header.html.erb (Duration: 6.0ms | Allocations: 1354)
  [1m[36mUser Load (27.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (27.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 194.3ms | Allocations: 13385)
  Rendered layout layouts/application.html.erb (Duration: 733.2ms | Allocations: 64657)
Completed 200 OK in 3347ms (Views: 377.6ms | ActiveRecord: 2730.1ms | Allocations: 93659)


Started GET "/restaurants/3/dishes/3/edit" for 127.0.0.1 at 2023-11-19 22:46:45 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"3"}
  [1m[36mDish Load (77.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:32:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 5.1ms | Allocations: 1576)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 9.8ms | Allocations: 2051)
  Rendered layout layouts/application.html.erb (Duration: 10.3ms | Allocations: 2143)
Completed 500 Internal Server Error in 281ms (ActiveRecord: 77.1ms | Allocations: 3545)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (No route matches {:action=>"create", :controller=>"dishes", :restaurant_id=>nil}, missing required keys: [:restaurant_id]):
    1: <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
    2: <%= form_for @dish, url: restaurant_dishes_path(@restaurant), html: { multipart: true } do |form| %>
    3:   <div class="categories_new_form_container">
    4:       <div class="categories_new_name_container">
    5:                 <div>
  
app/views/dishes/_form.html.erb:2
app/views/dishes/edit.html.erb:7
Started GET "/restaurants/3/dishes/3/edit" for 127.0.0.1 at 2023-11-19 22:46:47 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"3"}
  [1m[36mDish Load (45.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:32:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 1.2ms | Allocations: 1184)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 2.8ms | Allocations: 1443)
  Rendered layout layouts/application.html.erb (Duration: 3.3ms | Allocations: 1535)
Completed 500 Internal Server Error in 2627ms (ActiveRecord: 1048.1ms | Allocations: 145078)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (No route matches {:action=>"create", :controller=>"dishes", :restaurant_id=>nil}, missing required keys: [:restaurant_id]):
    1: <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
    2: <%= form_for @dish, url: restaurant_dishes_path(@restaurant), html: { multipart: true } do |form| %>
    3:   <div class="categories_new_form_container">
    4:       <div class="categories_new_name_container">
    5:                 <div>
  
app/views/dishes/_form.html.erb:2
app/views/dishes/edit.html.erb:7
Started GET "/restaurants/3/dishes/3/edit" for 127.0.0.1 at 2023-11-19 22:48:34 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"3"}
  [1m[36mDish Load (288.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:32:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.9ms | Allocations: 1566)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 10.8ms | Allocations: 2046)
  Rendered layout layouts/application.html.erb (Duration: 11.7ms | Allocations: 2139)
Completed 500 Internal Server Error in 866ms (ActiveRecord: 809.3ms | Allocations: 8588)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `dish_path' for #<ActionView::Base:0x00000000070ff8>):
    1: <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
    2: <%= form_for @dish, html: { multipart: true } do |form| %>
    3:   <div class="categories_new_form_container">
    4:       <div class="categories_new_name_container">
    5:         <div>
  
app/views/dishes/_form.html.erb:2
app/views/dishes/edit.html.erb:7
