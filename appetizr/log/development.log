Started GET "/" for 127.0.0.1 at 2023-12-02 19:09:17 +0100
  [1m[36mActiveRecord::SchemaMigration Load (31.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (31.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (32.4ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (30.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC LIMIT $1[0m  [["LIMIT", 5]]
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (29.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (30.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (30.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (31.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (32.4ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:28
  [1m[36mCategory Load (30.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:60
  [1m[36mRestaurant Load (31.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:73
  Rendered restaurants/index.html.erb within layouts/application (Duration: 1698.8ms | Allocations: 168443)
  Rendered layouts/_header.html.erb (Duration: 2.7ms | Allocations: 1382)
  Rendered layouts/_sidenav.html.erb (Duration: 5.1ms | Allocations: 3383)
  Rendered layout layouts/application.html.erb (Duration: 1861.3ms | Allocations: 192550)
Completed 200 OK in 3289ms (Views: 1737.4ms | ActiveRecord: 874.3ms | Allocations: 240775)


Started GET "/restaurants/43" for 127.0.0.1 at 2023-12-02 19:09:32 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"43"}
  [1m[36mRestaurant Load (101.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:27:in `show'
  [1m[36mRank Exists? (88.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:35:in `show'
  [1m[36mRank Load (294.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 43]]
  â†³ app/controllers/restaurants_controller.rb:38:in `show'
  [1m[35m (33.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=43 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (33.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=43 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (31.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=43 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (29.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 43], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (31.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=43 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (31.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=43 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (30.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=43 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (30.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=43 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (29.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (31.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=43 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 4.7ms | Allocations: 3231)
  [1m[36mDish Load (30.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 43]]
  â†³ app/views/restaurants/show.html.erb:9
  Rendered restaurants/show.html.erb within layouts/application (Duration: 266.2ms | Allocations: 16966)
  Rendered layout layouts/application.html.erb (Duration: 268.8ms | Allocations: 17057)
Completed 500 Internal Server Error in 1697ms (ActiveRecord: 1034.8ms | Allocations: 47123)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (The asset "e7e6760ef0ea313b05ce.jpg" is not present in the asset pipeline.
):
     9:     <% @restaurant.dishes.each do |dish| %>
    10:       <div class="restaurant_dish_container" onclick="window.location='<%= get_dish_path(dish) %>'" style="cursor: pointer;">
    11:         <% if dish.ruta_img_plato.present? %>
    12:           <%= image_tag dish.ruta_img_plato, class: "restaurant_dish_img" %>
    13:         <% else %>
    14:           <%= image_tag "default-dish-img", class: "restaurant_dish_img" %>
    15:         <% end %>
  
app/views/restaurants/show.html.erb:12
app/views/restaurants/show.html.erb:9
Started GET "/restaurants/43" for 127.0.0.1 at 2023-12-02 19:13:19 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"43"}
  [1m[36mRestaurant Load (29.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:27:in `show'
  [1m[36mRank Exists? (30.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:35:in `show'
  [1m[36mRank Load (30.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 43]]
  â†³ app/controllers/restaurants_controller.rb:38:in `show'
  [1m[35m (69.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=43 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (31.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=43 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (30.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=43 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (30.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 43], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (30.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=43 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (33.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=43 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (31.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=43 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (42.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=43 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (31.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (30.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=43 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 2.7ms | Allocations: 2542)
  [1m[36mDish Load (31.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 43]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (31.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (29.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "albertoperez19"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "albertoperez19"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (30.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 879)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 310.8ms | Allocations: 21545)
  Rendered layouts/_add_comment.html.erb (Duration: 1.6ms | Allocations: 682)
  [1m[35m (31.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=43 AND posts.autor=users.nombre AND posts.restaurant_id=43[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mRestaurant Load (31.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mUser Load (28.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 440)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 438)
  Rendered layouts/_comment.html.erb (Duration: 68.4ms | Allocations: 3638)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 527.9ms | Allocations: 31518)
  Rendered layouts/_header.html.erb (Duration: 3.2ms | Allocations: 1077)
  Rendered layouts/_sidenav.html.erb (Duration: 4.1ms | Allocations: 2630)
  Rendered layout layouts/application.html.erb (Duration: 540.5ms | Allocations: 38975)
Completed 200 OK in 1259ms (Views: 293.7ms | ActiveRecord: 698.8ms | Allocations: 44518)


Started GET "/login" for 127.0.0.1 at 2023-12-02 19:13:25 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 6.7ms | Allocations: 3225)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1079)
  Rendered layouts/_sidenav.html.erb (Duration: 5.8ms | Allocations: 2631)
  Rendered layout layouts/application.html.erb (Duration: 32.4ms | Allocations: 10689)
Completed 200 OK in 63ms (Views: 33.4ms | ActiveRecord: 0.0ms | Allocations: 11186)


Started POST "/login" for 127.0.0.1 at 2023-12-02 19:13:34 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"str1ien", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (253.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 763ms (ActiveRecord: 253.8ms | Allocations: 976)


Started GET "/" for 127.0.0.1 at 2023-12-02 19:13:35 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Load (396.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (30.0ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (31.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC LIMIT $1[0m  [["LIMIT", 5]]
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (32.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (30.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (29.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (30.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (30.9ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:28
  [1m[36mCategory Load (33.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:60
  [1m[36mRestaurant Load (30.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:73
  Rendered restaurants/index.html.erb within layouts/application (Duration: 154.2ms | Allocations: 25412)
  Rendered layouts/_header.html.erb (Duration: 2.9ms | Allocations: 1078)
  [1m[36mUser Load (31.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (29.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 144.4ms | Allocations: 8519)
  Rendered layout layouts/application.html.erb (Duration: 309.3ms | Allocations: 38799)
Completed 200 OK in 945ms (Views: 124.0ms | ActiveRecord: 767.4ms | Allocations: 42685)


Started GET "/restaurants/43" for 127.0.0.1 at 2023-12-02 19:13:44 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"43"}
  [1m[36mRestaurant Load (85.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:27:in `show'
  [1m[36mRank Exists? (29.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:35:in `show'
  [1m[36mRank Load (30.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 43]]
  â†³ app/controllers/restaurants_controller.rb:38:in `show'
  [1m[35m (30.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=43 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (29.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=43 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (30.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=43 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (30.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 43], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (32.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='str1ien' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=43 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (30.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=43 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (30.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=43 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (30.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=43 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (29.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (31.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='str1ien' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=43 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (30.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='str1ien' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 34.5ms | Allocations: 2826)
  [1m[36mDish Load (30.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 43]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (33.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='str1ien' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (29.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='str1ien' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (37.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='str1ien' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (29.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='str1ien' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (29.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (29.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "albertoperez19"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "albertoperez19"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (30.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 618)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 438)
  Rendered layouts/_comment.html.erb (Duration: 100.1ms | Allocations: 4447)
  Rendered layouts/_add_comment.html.erb (Duration: 1.5ms | Allocations: 531)
  [1m[35m (29.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=43 AND posts.autor=users.nombre AND posts.restaurant_id=43[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mRestaurant Load (30.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 440)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 438)
  Rendered layouts/_comment.html.erb (Duration: 35.7ms | Allocations: 2789)
  [1m[35m (30.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='str1ien' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered layouts/_add_comment.html.erb (Duration: 1.6ms | Allocations: 354)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 414.4ms | Allocations: 15256)
  Rendered layouts/_header.html.erb (Duration: 3.4ms | Allocations: 1077)
  [1m[36mUser Load (30.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (39.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 91.9ms | Allocations: 4625)
  Rendered layout layouts/application.html.erb (Duration: 523.9ms | Allocations: 24708)
Completed 200 OK in 1234ms (Views: 83.7ms | ActiveRecord: 893.2ms | Allocations: 30268)


Started GET "/restaurants/43/dishes/new" for 127.0.0.1 at 2023-12-02 19:13:49 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"43"}
  [1m[36mRestaurant Load (101.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:19:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 8.8ms | Allocations: 3033)
  Rendered dishes/new.html.erb within layouts/application (Duration: 29.1ms | Allocations: 3328)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1073)
  [1m[36mUser Load (29.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (30.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 70.4ms | Allocations: 4608)
  Rendered layout layouts/application.html.erb (Duration: 105.9ms | Allocations: 12747)
Completed 200 OK in 465ms (Views: 46.9ms | ActiveRecord: 161.1ms | Allocations: 13865)


Started POST "/restaurants/43/dishes" for 127.0.0.1 at 2023-12-02 19:14:22 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"codornices", "descripcion"=>"espectaculares", "precio"=>"12", "ruta_img_plato"=>#<ActionDispatch::Http::UploadedFile:0x00007f6f4a9c8a40 @tempfile=#<Tempfile:/tmp/RackMultipart20231202-1280136-m01mqx.jpg>, @content_type="image/jpeg", @original_filename="codorniz.jpg", @headers="Content-Disposition: form-data; name=\"dish[ruta_img_plato]\"; filename=\"codorniz.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "button"=>"", "restaurant_id"=>"43"}
  [1m[36mTRANSACTION (284.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:25:in `create'
  [1m[36mRestaurant Load (43.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:25:in `create'
  [1m[36mDish Create (39.8ms)[0m  [1m[32mINSERT INTO "dishes" ("restaurant_id", "nombre", "ruta_img_plato", "descripcion", "precio", "imported_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_id", 43], ["nombre", "codornices"], ["ruta_img_plato", "d0ab867d07c5aa5daeaa.jpg"], ["descripcion", "espectaculares"], ["precio", 12.0], ["imported_id", nil]]
  â†³ app/controllers/dishes_controller.rb:25:in `create'
  [1m[36mTRANSACTION (40.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:25:in `create'
Redirected to http://localhost:3000/restaurants/43
Completed 302 Found in 420ms (ActiveRecord: 407.9ms | Allocations: 5055)


Started GET "/restaurants/43" for 127.0.0.1 at 2023-12-02 19:14:22 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"43"}
  [1m[36mRestaurant Load (29.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:27:in `show'
  [1m[36mRank Exists? (29.8ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:35:in `show'
  [1m[36mRank Load (30.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 43]]
  â†³ app/controllers/restaurants_controller.rb:38:in `show'
  [1m[35m (30.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=43 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (36.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=43 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (30.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=43 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (29.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 43], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (30.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='str1ien' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=43 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (29.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=43 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (31.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=43 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (34.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=43 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (29.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (30.0ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='str1ien' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=43 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (31.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='str1ien' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 43.4ms | Allocations: 2836)
  [1m[36mDish Load (29.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 43]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (32.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='str1ien' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (30.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='str1ien' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (32.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='str1ien' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (31.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='str1ien' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (29.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='str1ien' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (29.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (30.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "albertoperez19"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "albertoperez19"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (35.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 618)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 440)
  Rendered layouts/_comment.html.erb (Duration: 108.2ms | Allocations: 4372)
  Rendered layouts/_add_comment.html.erb (Duration: 0.9ms | Allocations: 531)
  [1m[35m (30.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=43 AND posts.autor=users.nombre AND posts.restaurant_id=43[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mRestaurant Load (31.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 440)
  Rendered layouts/_comment.html.erb (Duration: 37.6ms | Allocations: 2792)
  [1m[35m (33.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='str1ien' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 356)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 577.8ms | Allocations: 72903)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1081)
  [1m[36mUser Load (29.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (29.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 72.0ms | Allocations: 4634)
  Rendered layout layouts/application.html.erb (Duration: 658.4ms | Allocations: 82371)
Completed 200 OK in 1115ms (Views: 194.1ms | ActiveRecord: 866.8ms | Allocations: 87895)


Started GET "/" for 127.0.0.1 at 2023-12-15 12:27:32 +0100
  [1m[36mActiveRecord::SchemaMigration Load (33.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (32.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (31.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (31.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC LIMIT $1[0m  [["LIMIT", 5]]
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (31.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (30.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (31.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (35.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (54.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:28
  [1m[36mCategory Load (31.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:60
  [1m[36mRestaurant Load (32.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:73
  Rendered restaurants/index.html.erb within layouts/application (Duration: 179.2ms | Allocations: 10183)
  Rendered layout layouts/application.html.erb (Duration: 1068.5ms | Allocations: 188978)
Completed 500 Internal Server Error in 3272ms (ActiveRecord: 1819.6ms | Allocations: 237243)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (Asset `controllers/application.js` was not declared to be precompiled in production.
Declare links to your assets in `app/assets/config/manifest.js`.

  //= link controllers/application.js

and restart your server):
     8: 
     9:     <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    10:     <%= stylesheet_link_tag "styles" %>
    11:     <%= javascript_importmap_tags %>
    12: 
    13:     <style>
    14:       @import url('https://fonts.cdnfonts.com/css/chillax');
  
app/views/layouts/application.html.erb:11
Started GET "/" for 127.0.0.1 at 2023-12-15 12:28:43 +0100
  [1m[36mActiveRecord::SchemaMigration Load (86.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (32.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (47.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (31.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC LIMIT $1[0m  [["LIMIT", 5]]
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (47.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (40.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (69.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (53.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (34.9ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:28
  [1m[36mCategory Load (43.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:60
  [1m[36mRestaurant Load (101.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:73
  Rendered restaurants/index.html.erb within layouts/application (Duration: 246.1ms | Allocations: 10184)
  Rendered layout layouts/application.html.erb (Duration: 409.6ms | Allocations: 113354)
Completed 500 Internal Server Error in 2621ms (ActiveRecord: 1554.7ms | Allocations: 161529)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (Asset `controllers/hello_controller.js` was not declared to be precompiled in production.
Declare links to your assets in `app/assets/config/manifest.js`.

  //= link controllers/hello_controller.js

and restart your server):
     8: 
     9:     <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    10:     <%= stylesheet_link_tag "styles" %>
    11:     <%= javascript_importmap_tags %>
    12: 
    13:     <style>
    14:       @import url('https://fonts.cdnfonts.com/css/chillax');
  
app/views/layouts/application.html.erb:11
Started GET "/" for 127.0.0.1 at 2023-12-15 12:29:44 +0100
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::NoDatabaseError (We could not find your database: brm33sftclngywwhayzb. Available database configurations can be found in config/database.yml file.

To resolve this error:

- Did you create the database for this app, or delete it? You may need to create your database.
- Has the database name changed? Check your database.yml config has the correct database name.

To create your database, run:

        bin/rails db:create
):
  
activerecord (7.1.2) lib/active_record/connection_adapters/postgresql_adapter.rb:74:in `rescue in new_client'
activerecord (7.1.2) lib/active_record/connection_adapters/postgresql_adapter.rb:68:in `new_client'
activerecord (7.1.2) lib/active_record/connection_adapters/postgresql_adapter.rb:980:in `connect'
activerecord (7.1.2) lib/active_record/connection_adapters/postgresql_adapter.rb:992:in `reconnect'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract_adapter.rb:685:in `block in reconnect!'
activesupport (7.1.2) lib/active_support/concurrency/null_lock.rb:9:in `synchronize'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract_adapter.rb:684:in `reconnect!'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract_adapter.rb:788:in `verify!'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract_adapter.rb:795:in `connect!'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract_adapter.rb:1001:in `block in with_raw_connection'
activesupport (7.1.2) lib/active_support/concurrency/null_lock.rb:9:in `synchronize'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract_adapter.rb:1000:in `with_raw_connection'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract_adapter.rb:1113:in `valid_raw_connection'
activerecord (7.1.2) lib/active_record/connection_adapters/postgresql_adapter.rb:616:in `get_database_version'
activerecord (7.1.2) lib/active_record/connection_adapters/schema_cache.rb:374:in `database_version'
activerecord (7.1.2) lib/active_record/connection_adapters/schema_cache.rb:70:in `database_version'
activerecord (7.1.2) lib/active_record/connection_adapters/schema_cache.rb:200:in `database_version'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract_adapter.rb:871:in `database_version'
activerecord (7.1.2) lib/active_record/connection_adapters/postgresql_adapter.rb:644:in `check_version'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:675:in `new_connection'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:720:in `checkout_new_connection'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:699:in `try_to_checkout_new_connection'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:657:in `acquire_connection'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:355:in `checkout'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:184:in `connection'
activerecord (7.1.2) lib/active_record/migration/pending_migration_connection.rb:8:in `establish_temporary_connection'
activerecord (7.1.2) lib/active_record/migration.rb:773:in `block in pending_migrations'
activerecord (7.1.2) lib/active_record/migration.rb:772:in `each'
activerecord (7.1.2) lib/active_record/migration.rb:772:in `pending_migrations'
activerecord (7.1.2) lib/active_record/migration.rb:751:in `check_pending_migrations'
activerecord (7.1.2) lib/active_record/migration.rb:643:in `block (2 levels) in call'
activesupport (7.1.2) lib/active_support/file_update_checker.rb:85:in `execute'
activerecord (7.1.2) lib/active_record/migration.rb:648:in `block in call'
activerecord (7.1.2) lib/active_record/migration.rb:640:in `synchronize'
activerecord (7.1.2) lib/active_record/migration.rb:640:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
activesupport (7.1.2) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.1.2) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/actionable_exceptions.rb:16:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (7.1.2) lib/rails/rack/logger.rb:37:in `call_app'
railties (7.1.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:135:in `block in tagged'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:39:in `tagged'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:135:in `tagged'
activesupport (7.1.2) lib/active_support/broadcast_logger.rb:240:in `method_missing'
railties (7.1.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/remote_ip.rb:92:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/request_id.rb:28:in `call'
rack (3.0.8) lib/rack/method_override.rb:28:in `call'
rack (3.0.8) lib/rack/runtime.rb:24:in `call'
activesupport (7.1.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:59:in `block in call'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:24:in `collect_events'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:58:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.8) lib/rack/sendfile.rb:114:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/host_authorization.rb:141:in `call'
railties (7.1.2) lib/rails/engine.rb:529:in `call'
puma (6.4.0) lib/puma/configuration.rb:272:in `call'
puma (6.4.0) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.0) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.0) lib/puma/request.rb:99:in `handle_request'
puma (6.4.0) lib/puma/server.rb:443:in `process_client'
puma (6.4.0) lib/puma/server.rb:241:in `block in run'
puma (6.4.0) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
Started GET "/" for 127.0.0.1 at 2023-12-15 12:30:34 +0100
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::NoDatabaseError (We could not find your database: brm33sftclngywwhayzb. Available database configurations can be found in config/database.yml file.

To resolve this error:

- Did you create the database for this app, or delete it? You may need to create your database.
- Has the database name changed? Check your database.yml config has the correct database name.

To create your database, run:

        bin/rails db:create
):
  
activerecord (7.1.2) lib/active_record/connection_adapters/postgresql_adapter.rb:74:in `rescue in new_client'
activerecord (7.1.2) lib/active_record/connection_adapters/postgresql_adapter.rb:68:in `new_client'
activerecord (7.1.2) lib/active_record/connection_adapters/postgresql_adapter.rb:980:in `connect'
activerecord (7.1.2) lib/active_record/connection_adapters/postgresql_adapter.rb:992:in `reconnect'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract_adapter.rb:685:in `block in reconnect!'
activesupport (7.1.2) lib/active_support/concurrency/null_lock.rb:9:in `synchronize'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract_adapter.rb:684:in `reconnect!'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract_adapter.rb:788:in `verify!'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract_adapter.rb:795:in `connect!'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract_adapter.rb:1001:in `block in with_raw_connection'
activesupport (7.1.2) lib/active_support/concurrency/null_lock.rb:9:in `synchronize'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract_adapter.rb:1000:in `with_raw_connection'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract_adapter.rb:1113:in `valid_raw_connection'
activerecord (7.1.2) lib/active_record/connection_adapters/postgresql_adapter.rb:616:in `get_database_version'
activerecord (7.1.2) lib/active_record/connection_adapters/schema_cache.rb:374:in `database_version'
activerecord (7.1.2) lib/active_record/connection_adapters/schema_cache.rb:70:in `database_version'
activerecord (7.1.2) lib/active_record/connection_adapters/schema_cache.rb:200:in `database_version'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract_adapter.rb:871:in `database_version'
activerecord (7.1.2) lib/active_record/connection_adapters/postgresql_adapter.rb:644:in `check_version'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:675:in `new_connection'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:720:in `checkout_new_connection'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:699:in `try_to_checkout_new_connection'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:657:in `acquire_connection'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:355:in `checkout'
activerecord (7.1.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:184:in `connection'
activerecord (7.1.2) lib/active_record/migration/pending_migration_connection.rb:8:in `establish_temporary_connection'
activerecord (7.1.2) lib/active_record/migration.rb:773:in `block in pending_migrations'
activerecord (7.1.2) lib/active_record/migration.rb:772:in `each'
activerecord (7.1.2) lib/active_record/migration.rb:772:in `pending_migrations'
activerecord (7.1.2) lib/active_record/migration.rb:751:in `check_pending_migrations'
activerecord (7.1.2) lib/active_record/migration.rb:643:in `block (2 levels) in call'
activesupport (7.1.2) lib/active_support/file_update_checker.rb:85:in `execute'
activerecord (7.1.2) lib/active_record/migration.rb:648:in `block in call'
activerecord (7.1.2) lib/active_record/migration.rb:640:in `synchronize'
activerecord (7.1.2) lib/active_record/migration.rb:640:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
activesupport (7.1.2) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.1.2) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/actionable_exceptions.rb:16:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (7.1.2) lib/rails/rack/logger.rb:37:in `call_app'
railties (7.1.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:135:in `block in tagged'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:39:in `tagged'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:135:in `tagged'
activesupport (7.1.2) lib/active_support/broadcast_logger.rb:240:in `method_missing'
railties (7.1.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/remote_ip.rb:92:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/request_id.rb:28:in `call'
rack (3.0.8) lib/rack/method_override.rb:28:in `call'
rack (3.0.8) lib/rack/runtime.rb:24:in `call'
activesupport (7.1.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:59:in `block in call'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:24:in `collect_events'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:58:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.8) lib/rack/sendfile.rb:114:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/host_authorization.rb:141:in `call'
railties (7.1.2) lib/rails/engine.rb:529:in `call'
puma (6.4.0) lib/puma/configuration.rb:272:in `call'
puma (6.4.0) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.0) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.0) lib/puma/request.rb:99:in `handle_request'
puma (6.4.0) lib/puma/server.rb:443:in `process_client'
puma (6.4.0) lib/puma/server.rb:241:in `block in run'
puma (6.4.0) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
Started GET "/" for 127.0.0.1 at 2023-12-15 12:32:53 +0100
  [1m[36mActiveRecord::SchemaMigration Load (59.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (277.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (306.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (37.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC LIMIT $1[0m  [["LIMIT", 5]]
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (51.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (58.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (33.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (62.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (33.2ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:28
  [1m[36mCategory Load (39.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:60
  [1m[36mRestaurant Load (57.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:73
  Rendered restaurants/index.html.erb within layouts/application (Duration: 200.3ms | Allocations: 10189)
  Rendered layout layouts/application.html.erb (Duration: 259.4ms | Allocations: 44618)
Completed 500 Internal Server Error in 2505ms (ActiveRecord: 1616.6ms | Allocations: 92796)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (link_tree argument must be a relative path):
  
sprockets (4.2.1) lib/sprockets/directive_processor.rb:411:in `expand_relative_dirname'
sprockets (4.2.1) lib/sprockets/directive_processor.rb:359:in `process_link_tree_directive'
sprockets (4.2.1) lib/sprockets/directive_processor.rb:189:in `block in process_directives'
sprockets (4.2.1) lib/sprockets/directive_processor.rb:187:in `each'
sprockets (4.2.1) lib/sprockets/directive_processor.rb:187:in `process_directives'
sprockets (4.2.1) lib/sprockets/directive_processor.rb:84:in `_call'
sprockets (4.2.1) lib/sprockets/directive_processor.rb:65:in `call'
sprockets (4.2.1) lib/sprockets/processor_utils.rb:84:in `call_processor'
sprockets (4.2.1) lib/sprockets/processor_utils.rb:66:in `block in call_processors'
sprockets (4.2.1) lib/sprockets/processor_utils.rb:65:in `reverse_each'
sprockets (4.2.1) lib/sprockets/processor_utils.rb:65:in `call_processors'
sprockets (4.2.1) lib/sprockets/loader.rb:184:in `load_from_unloaded'
sprockets (4.2.1) lib/sprockets/loader.rb:59:in `block in load'
sprockets (4.2.1) lib/sprockets/loader.rb:339:in `fetch_asset_from_dependency_cache'
sprockets (4.2.1) lib/sprockets/loader.rb:43:in `load'
sprockets (4.2.1) lib/sprockets/cached_environment.rb:44:in `block in load'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/map.rb:207:in `block in fetch_or_store'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/map.rb:187:in `fetch'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/map.rb:206:in `fetch_or_store'
sprockets (4.2.1) lib/sprockets/cached_environment.rb:44:in `load'
sprockets (4.2.1) lib/sprockets/bundle.rb:27:in `call'
sprockets (4.2.1) lib/sprockets/processor_utils.rb:84:in `call_processor'
sprockets (4.2.1) lib/sprockets/processor_utils.rb:66:in `block in call_processors'
sprockets (4.2.1) lib/sprockets/processor_utils.rb:65:in `reverse_each'
sprockets (4.2.1) lib/sprockets/processor_utils.rb:65:in `call_processors'
sprockets (4.2.1) lib/sprockets/loader.rb:184:in `load_from_unloaded'
sprockets (4.2.1) lib/sprockets/loader.rb:59:in `block in load'
sprockets (4.2.1) lib/sprockets/loader.rb:339:in `fetch_asset_from_dependency_cache'
sprockets (4.2.1) lib/sprockets/loader.rb:43:in `load'
sprockets (4.2.1) lib/sprockets/cached_environment.rb:44:in `block in load'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/map.rb:207:in `block in fetch_or_store'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/map.rb:187:in `fetch'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/map.rb:206:in `fetch_or_store'
sprockets (4.2.1) lib/sprockets/cached_environment.rb:44:in `load'
sprockets (4.2.1) lib/sprockets/base.rb:81:in `find_asset'
sprockets (4.2.1) lib/sprockets/base.rb:88:in `find_all_linked_assets'
sprockets (4.2.1) lib/sprockets/manifest.rb:125:in `each'
sprockets (4.2.1) lib/sprockets/manifest.rb:125:in `to_a'
sprockets (4.2.1) lib/sprockets/manifest.rb:125:in `block (2 levels) in find'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/executor/safe_task_executor.rb:24:in `block in execute'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/synchronization/mutex_lockable_object.rb:48:in `block in synchronize'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/synchronization/mutex_lockable_object.rb:48:in `synchronize'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/synchronization/mutex_lockable_object.rb:48:in `synchronize'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/executor/safe_task_executor.rb:22:in `execute'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/promise.rb:564:in `block in realize'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:352:in `run_task'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:343:in `block (3 levels) in create_worker'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `loop'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `block (2 levels) in create_worker'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:333:in `catch'
concurrent-ruby (1.2.2) lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:333:in `block in create_worker'
Started GET "/" for 127.0.0.1 at 2023-12-15 12:35:24 +0100
  [1m[36mActiveRecord::SchemaMigration Load (34.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (32.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (31.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (34.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC LIMIT $1[0m  [["LIMIT", 5]]
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (39.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (31.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (36.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (31.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (39.3ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:28
  [1m[36mCategory Load (32.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:60
  [1m[36mRestaurant Load (33.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:73
  Rendered restaurants/index.html.erb within layouts/application (Duration: 165.7ms | Allocations: 10184)
  Rendered layout layouts/application.html.erb (Duration: 324.3ms | Allocations: 108965)
Completed 500 Internal Server Error in 4415ms (ActiveRecord: 1691.8ms | Allocations: 157147)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (Asset `controllers/application.js` was not declared to be precompiled in production.
Declare links to your assets in `app/assets/config/manifest.js`.

  //= link controllers/application.js

and restart your server):
     8: 
     9:     <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    10:     <%= stylesheet_link_tag "styles" %>
    11:     <%= javascript_importmap_tags %>
    12: 
    13:     <style>
    14:       @import url('https://fonts.cdnfonts.com/css/chillax');
  
app/views/layouts/application.html.erb:11
Started GET "/" for 127.0.0.1 at 2023-12-15 12:36:17 +0100
  [1m[36mActiveRecord::SchemaMigration Load (31.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (30.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (32.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (35.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC LIMIT $1[0m  [["LIMIT", 5]]
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (45.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (36.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (29.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (31.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (31.0ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:28
  [1m[36mCategory Load (36.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:60
  [1m[36mRestaurant Load (30.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:73
  Rendered restaurants/index.html.erb within layouts/application (Duration: 157.2ms | Allocations: 10189)
  Rendered layout layouts/application.html.erb (Duration: 301.1ms | Allocations: 87805)
Completed 500 Internal Server Error in 1860ms (ActiveRecord: 1154.3ms | Allocations: 135977)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (Asset `controllers/hello_controller.js` was not declared to be precompiled in production.
Declare links to your assets in `app/assets/config/manifest.js`.

  //= link controllers/hello_controller.js

and restart your server):
     8: 
     9:     <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    10:     <%= stylesheet_link_tag "styles" %>
    11:     <%= javascript_importmap_tags %>
    12: 
    13:     <style>
    14:       @import url('https://fonts.cdnfonts.com/css/chillax');
  
app/views/layouts/application.html.erb:11
Started GET "/" for 127.0.0.1 at 2023-12-15 12:36:44 +0100
  [1m[36mActiveRecord::SchemaMigration Load (51.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (56.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (37.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (37.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC LIMIT $1[0m  [["LIMIT", 5]]
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (31.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (41.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (33.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (33.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (40.0ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:28
  [1m[36mCategory Load (38.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:60
  [1m[36mRestaurant Load (33.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:73
  Rendered restaurants/index.html.erb within layouts/application (Duration: 169.2ms | Allocations: 10184)
  Rendered layout layouts/application.html.erb (Duration: 398.1ms | Allocations: 117314)
Completed 500 Internal Server Error in 3014ms (ActiveRecord: 961.2ms | Allocations: 165493)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (Asset `controllers/index.js` was not declared to be precompiled in production.
Declare links to your assets in `app/assets/config/manifest.js`.

  //= link controllers/index.js

and restart your server):
     8: 
     9:     <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    10:     <%= stylesheet_link_tag "styles" %>
    11:     <%= javascript_importmap_tags %>
    12: 
    13:     <style>
    14:       @import url('https://fonts.cdnfonts.com/css/chillax');
  
app/views/layouts/application.html.erb:11
Started GET "/" for 127.0.0.1 at 2023-12-15 12:37:11 +0100
  [1m[36mActiveRecord::SchemaMigration Load (32.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (31.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (32.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (31.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC LIMIT $1[0m  [["LIMIT", 5]]
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (278.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (35.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (36.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (38.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (43.2ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:28
  [1m[36mCategory Load (32.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:60
  [1m[36mRestaurant Load (33.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:73
  Rendered restaurants/index.html.erb within layouts/application (Duration: 419.2ms | Allocations: 10181)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 415)
  Rendered layouts/_sidenav.html.erb (Duration: 3.0ms | Allocations: 963)
  Rendered layout layouts/application.html.erb (Duration: 542.2ms | Allocations: 89503)
Completed 200 OK in 2613ms (Views: 157.3ms | ActiveRecord: 1485.7ms | Allocations: 137728)


Started GET "/categories" for 127.0.0.1 at 2023-12-15 12:37:25 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (307.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 316.3ms | Allocations: 2356)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 118)
  Rendered layouts/_sidenav.html.erb (Duration: 1.4ms | Allocations: 230)
  Rendered layout layouts/application.html.erb (Duration: 324.2ms | Allocations: 3328)
Completed 200 OK in 326ms (Views: 17.8ms | ActiveRecord: 307.3ms | Allocations: 3828)


Started GET "/categories/Burger" for 127.0.0.1 at 2023-12-15 12:37:28 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"Burger"}
  [1m[36mCategory Load (204.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (34.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='Burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (41.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='Burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (51.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='Burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (31.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (36.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='Burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mPost Load (31.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mRestaurant Load (33.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mUser Load (36.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 132)
  [1m[36mUser Load (67.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "albertoperez19"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "albertoperez19"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 134)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 131)
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 134)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 131)
  Rendered layouts/_comment.html.erb (Duration: 373.6ms | Allocations: 17767)
  Rendered layouts/_add_comment.html.erb (Duration: 1.1ms | Allocations: 197)
  Rendered categories/show.html.erb within layouts/application (Duration: 377.1ms | Allocations: 18481)
  Rendered layouts/_header.html.erb (Duration: 0.4ms | Allocations: 117)
  Rendered layouts/_sidenav.html.erb (Duration: 1.0ms | Allocations: 230)
  Rendered layout layouts/application.html.erb (Duration: 381.5ms | Allocations: 19435)
Completed 200 OK in 1269ms (Views: 154.8ms | ActiveRecord: 718.8ms | Allocations: 32591)


Started POST "/reactions" for 127.0.0.1 at 2023-12-15 12:37:31 +0100
Processing by ReactionsController#create as TURBO_STREAM
  Parameters: {"reaction"=>{"reaccion"=>"Like", "reactionable_id"=>"57", "reactionable_type"=>"Post"}}
Redirected to http://localhost:3000/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 514)


Started GET "/login" for 127.0.0.1 at 2023-12-15 12:37:31 +0100
Processing by LoginsController#new as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 2.6ms | Allocations: 2058)
  Rendered layouts/_header.html.erb (Duration: 0.2ms | Allocations: 118)
  Rendered layouts/_sidenav.html.erb (Duration: 0.4ms | Allocations: 231)
  Rendered layout layouts/application.html.erb (Duration: 4.4ms | Allocations: 3063)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms | Allocations: 3630)


Started GET "/categories/Burger" for 127.0.0.1 at 2023-12-15 12:37:50 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"Burger"}
  [1m[36mCategory Load (100.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (100.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='Burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (53.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='Burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (49.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='Burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (32.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (317.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='Burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mPost Load (45.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mRestaurant Load (32.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mUser Load (32.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 148)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 131)
  [1m[36mUser Load (32.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "albertoperez19"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "albertoperez19"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 134)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 131)
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 134)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 131)
  Rendered layouts/_comment.html.erb (Duration: 187.6ms | Allocations: 6229)
  Rendered layouts/_add_comment.html.erb (Duration: 0.4ms | Allocations: 46)
  Rendered categories/show.html.erb within layouts/application (Duration: 188.9ms | Allocations: 6416)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 117)
  Rendered layouts/_sidenav.html.erb (Duration: 1.5ms | Allocations: 230)
  Rendered layout layouts/application.html.erb (Duration: 196.4ms | Allocations: 7370)
Completed 200 OK in 930ms (Views: 55.4ms | ActiveRecord: 794.4ms | Allocations: 10193)


Started GET "/categories/chino" for 127.0.0.1 at 2023-12-15 12:39:50 +0100
  [1m[36mActiveRecord::SchemaMigration Load (32.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"chino"}
  [1m[36mCategory Load (41.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "chino"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
Completed 404 Not Found in 783ms (ActiveRecord: 395.2ms | Allocations: 14378)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::RecordNotFound (Couldn't find Category with 'nombre'=chino):
  
app/controllers/categories_controller.rb:8:in `show'
Started GET "/categories/Burger" for 127.0.0.1 at 2023-12-15 12:39:59 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"Burger"}
  [1m[36mCategory Load (307.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (31.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='Burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (42.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='Burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (50.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='Burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (30.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (29.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='Burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mPost Load (40.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mRestaurant Load (30.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mUser Load (272.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.5ms | Allocations: 552)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 132)
  [1m[36mUser Load (30.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "albertoperez19"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "albertoperez19"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 134)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 131)
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/helpers/posts_helper.rb:4:in `get_restaurant_of_post'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 134)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 131)
  Rendered layouts/_comment.html.erb (Duration: 755.2ms | Allocations: 31680)
  Rendered layouts/_add_comment.html.erb (Duration: 0.9ms | Allocations: 201)
  Rendered categories/show.html.erb within layouts/application (Duration: 758.2ms | Allocations: 32426)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 409)
  Rendered layouts/_sidenav.html.erb (Duration: 1.5ms | Allocations: 965)
  Rendered layout layouts/application.html.erb (Duration: 868.5ms | Allocations: 80280)
Completed 200 OK in 2070ms (Views: 379.1ms | ActiveRecord: 1454.0ms | Allocations: 103644)


Started POST "/reactions" for 127.0.0.1 at 2023-12-15 12:40:09 +0100
Processing by ReactionsController#create as TURBO_STREAM
  Parameters: {"reaction"=>{"reaccion"=>"Like", "reactionable_id"=>"57", "reactionable_type"=>"Post"}}
Redirected to http://localhost:3000/login
Completed 302 Found in 4ms (ActiveRecord: 0.0ms | Allocations: 1527)


Started GET "/login" for 127.0.0.1 at 2023-12-15 12:40:09 +0100
Processing by LoginsController#new as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 3.6ms | Allocations: 2040)
  Rendered layouts/_header.html.erb (Duration: 0.2ms | Allocations: 118)
  Rendered layouts/_sidenav.html.erb (Duration: 0.4ms | Allocations: 231)
  Rendered layout layouts/application.html.erb (Duration: 5.7ms | Allocations: 3045)
Completed 200 OK in 7ms (Views: 6.3ms | ActiveRecord: 0.0ms | Allocations: 3612)


Started GET "/" for 127.0.0.1 at 2023-12-15 18:08:35 +0100
  [1m[36mActiveRecord::SchemaMigration Load (27.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (26.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (26.4ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (26.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC LIMIT $1[0m  [["LIMIT", 5]]
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (26.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (26.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (26.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (25.8ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:28
  [1m[36mCategory Load (26.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:60
  [1m[36mRestaurant Load (26.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:73
  Rendered restaurants/index.html.erb within layouts/application (Duration: 113.8ms | Allocations: 10392)
  Rendered layouts/_header.html.erb (Duration: 0.5ms | Allocations: 413)
  Rendered layouts/_sidenav.html.erb (Duration: 0.6ms | Allocations: 963)
  Rendered layout layouts/application.html.erb (Duration: 116.4ms | Allocations: 13281)
Completed 200 OK in 1127ms (Views: 15.3ms | ActiveRecord: 716.4ms | Allocations: 59888)


Started GET "/images/7f450b373a002abe90c4.jpg" for 127.0.0.1 at 2023-12-15 18:08:37 +0100
Processing by ErrorsController#not_found as JPEG
  Parameters: {"unmatched"=>"images/7f450b373a002abe90c4"}
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms | Allocations: 1647)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::MissingTemplate (Missing template errors/not_found, application/not_found with {:locale=>[:en], :formats=>[:jpeg], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}.

Searched in:
  * "/home/alain/repos/appetizr/appetizr/app/views"
  * "/home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/view_component-3.7.0/app/views"
  * "/home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/turbo-rails-1.5.0/app/views"
  * "/home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actiontext-7.1.2/app/views"
  * "/home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionmailbox-7.1.2/app/views"
):
  
app/controllers/errors_controller.rb:3:in `not_found'
Started GET "/login" for 127.0.0.1 at 2023-12-15 18:08:39 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 3.1ms | Allocations: 2071)
  Rendered layouts/_header.html.erb (Duration: 0.1ms | Allocations: 118)
  Rendered layouts/_sidenav.html.erb (Duration: 0.2ms | Allocations: 231)
  Rendered layout layouts/application.html.erb (Duration: 4.1ms | Allocations: 3034)
Completed 200 OK in 73ms (Views: 4.6ms | ActiveRecord: 53.5ms | Allocations: 10778)


Started GET "/images/7f450b373a002abe90c4.jpg" for 127.0.0.1 at 2023-12-15 18:08:39 +0100
Processing by ErrorsController#not_found as JPEG
  Parameters: {"unmatched"=>"images/7f450b373a002abe90c4"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 684)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::MissingTemplate (Missing template errors/not_found, application/not_found with {:locale=>[:en], :formats=>[:jpeg], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}.

Searched in:
  * "/home/alain/repos/appetizr/appetizr/app/views"
  * "/home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/view_component-3.7.0/app/views"
  * "/home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/turbo-rails-1.5.0/app/views"
  * "/home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actiontext-7.1.2/app/views"
  * "/home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionmailbox-7.1.2/app/views"
):
  
app/controllers/errors_controller.rb:3:in `not_found'
Started POST "/login" for 127.0.0.1 at 2023-12-15 18:09:02 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"str1ien", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (28.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 258ms (ActiveRecord: 28.0ms | Allocations: 1275)


Started GET "/" for 127.0.0.1 at 2023-12-15 18:09:02 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Load (27.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (26.6ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (27.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC LIMIT $1[0m  [["LIMIT", 5]]
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (26.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (26.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (26.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (26.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (26.4ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:28
  [1m[36mCategory Load (26.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:60
  [1m[36mRestaurant Load (26.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:73
  Rendered restaurants/index.html.erb within layouts/application (Duration: 84.2ms | Allocations: 6204)
  Rendered layouts/_header.html.erb (Duration: 0.2ms | Allocations: 118)
  [1m[36mUser Load (25.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (26.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 126.1ms | Allocations: 6858)
  Rendered layout layouts/application.html.erb (Duration: 211.3ms | Allocations: 13830)
Completed 200 OK in 431ms (Views: 51.6ms | ActiveRecord: 347.0ms | Allocations: 17827)


Started GET "/images/7f450b373a002abe90c4.jpg" for 127.0.0.1 at 2023-12-15 18:09:02 +0100
Processing by ErrorsController#not_found as JPEG
  Parameters: {"unmatched"=>"images/7f450b373a002abe90c4"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 683)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::MissingTemplate (Missing template errors/not_found, application/not_found with {:locale=>[:en], :formats=>[:jpeg], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}.

Searched in:
  * "/home/alain/repos/appetizr/appetizr/app/views"
  * "/home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/view_component-3.7.0/app/views"
  * "/home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/turbo-rails-1.5.0/app/views"
  * "/home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actiontext-7.1.2/app/views"
  * "/home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionmailbox-7.1.2/app/views"
):
  
app/controllers/errors_controller.rb:3:in `not_found'
Started GET "/users/str1ien" for 127.0.0.1 at 2023-12-15 18:09:04 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"str1ien"}
  [1m[36mUser Load (27.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (27.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (27.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (27.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (26.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-11-15 17:09:04.603851')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (26.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-11-15 17:09:04.630781')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (26.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-11-15 17:09:04.657740')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (26.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (26.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:09:04.740426')[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (26.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 43]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:09:04.892281')[0m  [["reviewable_id", 65], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (26.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:09:04.919563')[0m  [["reviewable_id", 67], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (26.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:09:04.947175')[0m  [["reviewable_id", 68], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (26.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (26.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:09:05.058681')[0m  [["reviewable_id", 44], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (26.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 44]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (26.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (26.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:09:05.168554')[0m  [["reviewable_id", 45], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (26.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 45]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:09:05.223341')[0m  [["reviewable_id", 71], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (26.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 3.3ms | Allocations: 1913)
  Rendered layouts/_header.html.erb (Duration: 0.1ms | Allocations: 118)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 2.2ms | Allocations: 1558)
  Rendered layout layouts/application.html.erb (Duration: 6.2ms | Allocations: 4203)
Completed 200 OK in 938ms (Views: 7.1ms | ActiveRecord: 823.1ms | Allocations: 35926)


Started GET "/images/7f450b373a002abe90c4.jpg" for 127.0.0.1 at 2023-12-15 18:09:05 +0100
Processing by ErrorsController#not_found as JPEG
  Parameters: {"unmatched"=>"images/7f450b373a002abe90c4"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 689)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::MissingTemplate (Missing template errors/not_found, application/not_found with {:locale=>[:en], :formats=>[:jpeg], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}.

Searched in:
  * "/home/alain/repos/appetizr/appetizr/app/views"
  * "/home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/view_component-3.7.0/app/views"
  * "/home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/turbo-rails-1.5.0/app/views"
  * "/home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actiontext-7.1.2/app/views"
  * "/home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionmailbox-7.1.2/app/views"
):
  
app/controllers/errors_controller.rb:3:in `not_found'
Started PATCH "/users/str1ien" for 127.0.0.1 at 2023-12-15 18:09:08 +0100
Processing by UsersController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"nombre"=>"str1ien2", "password"=>"[FILTERED]"}, "button"=>"", "nombre"=>"str1ien"}
  [1m[36mUser Load (27.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:66:in `update'
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (27.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:69:in `update'
  [1m[36mUser Update (58.1ms)[0m  [1m[33mUPDATE "users" SET "nombre" = $1 WHERE "users"."nombre" = $2[0m  [["nombre", "str1ien2"], ["nombre", "str1ien"]]
  â†³ app/controllers/users_controller.rb:69:in `update'
  [1m[36mTRANSACTION (25.9ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/users_controller.rb:69:in `update'
Completed 500 Internal Server Error in 142ms (ActiveRecord: 138.0ms | Allocations: 4962)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  insert or update on table "posts" violates foreign key constraint "fk_rails_b3f6eb0ecb"
DETAIL:  Key (autor)=(str1ien2) is not present in table "users".
CONTEXT:  SQL statement "UPDATE posts SET autor = NEW.nombre WHERE autor = OLD.nombre"
PL/pgSQL function username_function() line 4 at SQL statement
):
  
Started GET "/users/str1ien" for 127.0.0.1 at 2023-12-15 18:13:50 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"str1ien"}
  [1m[36mUser Load (26.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (27.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (25.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-11-15 17:13:50.203323')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-11-15 17:13:50.230271')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (26.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-11-15 17:13:50.256781')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (26.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:13:50.338938')[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (26.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 43]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:13:50.393881')[0m  [["reviewable_id", 65], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (26.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:13:50.421467')[0m  [["reviewable_id", 67], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (26.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:13:50.448717')[0m  [["reviewable_id", 68], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (26.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:13:50.531165')[0m  [["reviewable_id", 44], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (26.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 44]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (26.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (26.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:13:50.641312')[0m  [["reviewable_id", 45], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (24.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 45]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (25.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:13:50.693722')[0m  [["reviewable_id", 71], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (26.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 0.8ms | Allocations: 570)
  Rendered layouts/_header.html.erb (Duration: 0.1ms | Allocations: 118)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 2.1ms | Allocations: 1553)
  Rendered layout layouts/application.html.erb (Duration: 3.8ms | Allocations: 2851)
Completed 200 OK in 716ms (Views: 4.1ms | ActiveRecord: 654.3ms | Allocations: 16275)


Started PATCH "/users/str1ien" for 127.0.0.1 at 2023-12-15 18:13:55 +0100
Processing by UsersController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"nombre"=>"str1ien3", "password"=>"[FILTERED]"}, "button"=>"", "nombre"=>"str1ien"}
  [1m[36mUser Load (26.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:66:in `update'
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (27.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:69:in `update'
  [1m[36mUser Update (56.4ms)[0m  [1m[33mUPDATE "users" SET "nombre" = $1 WHERE "users"."nombre" = $2[0m  [["nombre", "str1ien3"], ["nombre", "str1ien"]]
  â†³ app/controllers/users_controller.rb:69:in `update'
  [1m[36mTRANSACTION (25.8ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/users_controller.rb:69:in `update'
Completed 500 Internal Server Error in 140ms (ActiveRecord: 136.4ms | Allocations: 3715)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  update or delete on table "users" violates foreign key constraint "fk_rails_b3f6eb0ecb" on table "posts"
DETAIL:  Key (nombre)=(str1ien) is still referenced from table "posts".
):
  
Started GET "/users/str1ien" for 127.0.0.1 at 2023-12-15 18:25:33 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"str1ien"}
  [1m[36mUser Load (27.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (27.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (26.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (26.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-11-15 17:25:34.735515')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-11-15 17:25:34.762384')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (26.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-11-15 17:25:34.789238')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (27.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (26.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (26.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:25:34.898613')[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (26.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 43]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:25:34.979133')[0m  [["reviewable_id", 65], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:25:35.005764')[0m  [["reviewable_id", 67], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:25:35.032569')[0m  [["reviewable_id", 68], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (26.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (25.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:25:35.111991')[0m  [["reviewable_id", 44], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (26.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 44]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (26.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:25:35.219074')[0m  [["reviewable_id", 45], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (26.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 45]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:25:35.272837')[0m  [["reviewable_id", 71], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 0.8ms | Allocations: 570)
  Rendered layouts/_header.html.erb (Duration: 0.1ms | Allocations: 118)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 1.5ms | Allocations: 1553)
  Rendered layout layouts/application.html.erb (Duration: 3.1ms | Allocations: 2851)
Completed 200 OK in 1428ms (Views: 3.5ms | ActiveRecord: 900.1ms | Allocations: 19519)


Started PATCH "/users/str1ien" for 127.0.0.1 at 2023-12-15 18:25:45 +0100
Processing by UsersController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"nombre"=>"str1ien3", "password"=>"[FILTERED]"}, "button"=>"", "nombre"=>"str1ien"}
  [1m[36mUser Load (27.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:66:in `update'
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (26.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:69:in `update'
  [1m[36mUser Update (59.8ms)[0m  [1m[33mUPDATE "users" SET "nombre" = $1 WHERE "users"."nombre" = $2[0m  [["nombre", "str1ien3"], ["nombre", "str1ien"]]
  â†³ app/controllers/users_controller.rb:69:in `update'
  [1m[36mTRANSACTION (24.9ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/users_controller.rb:69:in `update'
Completed 500 Internal Server Error in 143ms (ActiveRecord: 138.9ms | Allocations: 3711)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  insert or update on table "posts" violates foreign key constraint "fk_rails_b3f6eb0ecb"
DETAIL:  Key (autor)=(str1ien3) is not present in table "users".
CONTEXT:  SQL statement "UPDATE posts SET autor = NEW.nombre WHERE autor = OLD.nombre"
PL/pgSQL function username_function() line 4 at SQL statement
):
  
Started GET "/users/str1ien" for 127.0.0.1 at 2023-12-15 18:44:46 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"str1ien"}
  [1m[36mUser Load (29.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (29.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (28.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (28.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (27.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-11-15 17:44:47.134059')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-11-15 17:44:47.162629')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-11-15 17:44:47.190860')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (28.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (28.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (27.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:44:47.304638')[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (28.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 43]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (27.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:44:47.389193')[0m  [["reviewable_id", 65], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:44:47.417383')[0m  [["reviewable_id", 67], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:44:47.445404')[0m  [["reviewable_id", 68], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (28.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (27.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:44:47.530069')[0m  [["reviewable_id", 44], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (27.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 44]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:44:47.642926')[0m  [["reviewable_id", 45], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (27.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 45]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:44:47.699444')[0m  [["reviewable_id", 71], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 0.8ms | Allocations: 570)
  Rendered layouts/_header.html.erb (Duration: 0.1ms | Allocations: 118)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 1.8ms | Allocations: 1553)
  Rendered layout layouts/application.html.erb (Duration: 3.4ms | Allocations: 2851)
Completed 200 OK in 1454ms (Views: 3.7ms | ActiveRecord: 948.9ms | Allocations: 19503)


Started PATCH "/users/str1ien" for 127.0.0.1 at 2023-12-15 18:44:49 +0100
Processing by UsersController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"nombre"=>"str1ien3", "password"=>"[FILTERED]"}, "button"=>"", "nombre"=>"str1ien"}
  [1m[36mUser Load (28.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:66:in `update'
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (28.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:69:in `update'
  [1m[36mUser Update (63.3ms)[0m  [1m[33mUPDATE "users" SET "nombre" = $1 WHERE "users"."nombre" = $2[0m  [["nombre", "str1ien3"], ["nombre", "str1ien"]]
  â†³ app/controllers/users_controller.rb:69:in `update'
  [1m[36mTRANSACTION (27.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/users_controller.rb:69:in `update'
Completed 500 Internal Server Error in 148ms (ActiveRecord: 146.7ms | Allocations: 3720)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  insert or update on table "posts" violates foreign key constraint "fk_rails_b3f6eb0ecb"
DETAIL:  Key (autor)=(str1ien3) is not present in table "users".
CONTEXT:  SQL statement "UPDATE posts SET autor = NEW.nombre WHERE autor = OLD.nombre"
PL/pgSQL function username_function() line 5 at SQL statement
):
  
Started GET "/users/str1ien" for 127.0.0.1 at 2023-12-15 18:53:51 +0100
  [1m[36mActiveRecord::SchemaMigration Load (28.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"str1ien"}
  [1m[36mUser Load (28.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (28.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (26.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-11-15 17:53:53.614015')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-11-15 17:53:53.641302')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (26.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-11-15 17:53:53.668094')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (27.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (26.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (26.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:53:53.889501')[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (24.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 43]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (26.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:53:54.036557')[0m  [["reviewable_id", 65], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:53:54.063752')[0m  [["reviewable_id", 67], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:53:54.090362')[0m  [["reviewable_id", 68], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (26.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:53:54.200577')[0m  [["reviewable_id", 44], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (26.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 44]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:53:54.307624')[0m  [["reviewable_id", 45], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (26.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 45]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:53:54.361750')[0m  [["reviewable_id", 71], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 3.0ms | Allocations: 2561)
  Rendered layouts/_header.html.erb (Duration: 0.5ms | Allocations: 390)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 2.3ms | Allocations: 2314)
  Rendered layout layouts/application.html.erb (Duration: 7.4ms | Allocations: 6736)
Completed 200 OK in 1730ms (Views: 9.8ms | ActiveRecord: 1250.6ms | Allocations: 83528)


Started PATCH "/users/str1ien" for 127.0.0.1 at 2023-12-15 18:53:56 +0100
Processing by UsersController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"nombre"=>"str1ien3", "password"=>"[FILTERED]"}, "button"=>"", "nombre"=>"str1ien"}
  [1m[36mUser Load (25.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:66:in `update'
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (26.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:24:in `block in update_related_records'
  [1m[36mPost Update All (26.3ms)[0m  [1m[33mUPDATE "posts" SET "autor" = $1 WHERE "posts"."autor" = $2[0m  [["autor", "str1ien3"], ["autor", "str1ien3"]]
  â†³ app/models/user.rb:24:in `block in update_related_records'
  [1m[36mResponse Update All (26.3ms)[0m  [1m[33mUPDATE "responses" SET "autor" = $1 WHERE "responses"."autor" = $2[0m  [["autor", "str1ien3"], ["autor", "str1ien3"]]
  â†³ app/models/user.rb:25:in `block in update_related_records'
  [1m[36mReview Update All (25.8ms)[0m  [1m[33mUPDATE "reviews" SET "autor" = $1 WHERE "reviews"."autor" = $2[0m  [["autor", "str1ien3"], ["autor", "str1ien3"]]
  â†³ app/models/user.rb:26:in `block in update_related_records'
  [1m[36mRank Update All (27.9ms)[0m  [1m[33mUPDATE "ranks" SET "who" = $1 WHERE "ranks"."who" = $2[0m  [["who", "str1ien3"], ["who", "str1ien3"]]
  â†³ app/models/user.rb:27:in `block in update_related_records'
  [1m[36mReaction Update All (26.3ms)[0m  [1m[33mUPDATE "reactions" SET "who" = $1 WHERE "reactions"."who" = $2[0m  [["who", "str1ien3"], ["who", "str1ien3"]]
  â†³ app/models/user.rb:28:in `block in update_related_records'
  [1m[36mTRANSACTION (25.9ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/users_controller.rb:69:in `update'
Completed 500 Internal Server Error in 414ms (ActiveRecord: 402.8ms | Allocations: 6798)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
NameError (undefined local variable or method `connection' for #<User nombre: "str1ien", ruta_img_perfil: nil, esAdmin: false, password_digest: [FILTERED]>):
  
app/models/user.rb:29:in `block in update_related_records'
app/models/user.rb:23:in `update_related_records'
app/controllers/users_controller.rb:69:in `update'
Started GET "/users/str1ien" for 127.0.0.1 at 2023-12-15 18:54:57 +0100
  [1m[36mActiveRecord::SchemaMigration Load (27.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"str1ien"}
  [1m[36mUser Load (27.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (28.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (28.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (29.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-11-15 17:54:59.246985')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (27.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-11-15 17:54:59.275320')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-11-15 17:54:59.303653')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (28.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (29.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (27.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:54:59.534759')[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (28.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 43]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (27.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:54:59.693289')[0m  [["reviewable_id", 65], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:54:59.722014')[0m  [["reviewable_id", 67], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (27.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:54:59.750255')[0m  [["reviewable_id", 68], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (27.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:54:59.865168')[0m  [["reviewable_id", 44], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (27.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 44]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:54:59.977190')[0m  [["reviewable_id", 45], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (27.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 45]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:55:00.033069')[0m  [["reviewable_id", 71], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 3.9ms | Allocations: 2562)
  Rendered layouts/_header.html.erb (Duration: 0.4ms | Allocations: 390)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 2.4ms | Allocations: 2314)
  Rendered layout layouts/application.html.erb (Duration: 8.2ms | Allocations: 6737)
Completed 200 OK in 1797ms (Views: 11.0ms | ActiveRecord: 1319.7ms | Allocations: 83523)


Started PATCH "/users/str1ien" for 127.0.0.1 at 2023-12-15 18:55:01 +0100
Processing by UsersController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"nombre"=>"str1ien3", "password"=>"[FILTERED]"}, "button"=>"", "nombre"=>"str1ien"}
  [1m[36mUser Load (27.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:66:in `update'
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (26.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/user.rb:24:in `block in update_related_records'
  [1m[36mPost Update All (27.4ms)[0m  [1m[33mUPDATE "posts" SET "autor" = $1 WHERE "posts"."autor" = $2[0m  [["autor", "str1ien3"], ["autor", "str1ien3"]]
  â†³ app/models/user.rb:24:in `block in update_related_records'
  [1m[36mResponse Update All (27.4ms)[0m  [1m[33mUPDATE "responses" SET "autor" = $1 WHERE "responses"."autor" = $2[0m  [["autor", "str1ien3"], ["autor", "str1ien3"]]
  â†³ app/models/user.rb:25:in `block in update_related_records'
  [1m[36mReview Update All (27.5ms)[0m  [1m[33mUPDATE "reviews" SET "autor" = $1 WHERE "reviews"."autor" = $2[0m  [["autor", "str1ien3"], ["autor", "str1ien3"]]
  â†³ app/models/user.rb:26:in `block in update_related_records'
  [1m[36mRank Update All (29.3ms)[0m  [1m[33mUPDATE "ranks" SET "who" = $1 WHERE "ranks"."who" = $2[0m  [["who", "str1ien3"], ["who", "str1ien3"]]
  â†³ app/models/user.rb:27:in `block in update_related_records'
  [1m[36mReaction Update All (27.4ms)[0m  [1m[33mUPDATE "reactions" SET "who" = $1 WHERE "reactions"."who" = $2[0m  [["who", "str1ien3"], ["who", "str1ien3"]]
  â†³ app/models/user.rb:28:in `block in update_related_records'
  [1m[35m (28.6ms)[0m  [1m[33mUPDATE restaurants_users SET user_id = 'str1ien3' WHERE user_id = 'str1ien'[0m
  â†³ app/models/user.rb:29:in `block in update_related_records'
  [1m[36mTRANSACTION (27.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/users_controller.rb:69:in `update'
Completed 500 Internal Server Error in 464ms (ActiveRecord: 451.8ms | Allocations: 7485)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  insert or update on table "restaurants_users" violates foreign key constraint "fk_rails_bf55a1e534"
DETAIL:  Key (user_id)=(str1ien3) is not present in table "users".
):
  
Started GET "/users/str1ien" for 127.0.0.1 at 2023-12-15 18:59:14 +0100
  [1m[36mActiveRecord::SchemaMigration Load (26.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"str1ien"}
  [1m[36mUser Load (28.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (29.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (27.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-11-15 17:59:16.558601')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-11-15 17:59:16.587294')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-11-15 17:59:16.615336')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (28.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (27.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (27.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:59:16.843619')[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (28.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 43]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (27.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:59:17.000187')[0m  [["reviewable_id", 65], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (27.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:59:17.028677')[0m  [["reviewable_id", 67], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (27.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:59:17.056930')[0m  [["reviewable_id", 68], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (27.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:59:17.172335')[0m  [["reviewable_id", 44], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (27.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 44]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (27.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (27.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:59:17.284914')[0m  [["reviewable_id", 45], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (27.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 45]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 17:59:17.342423')[0m  [["reviewable_id", 71], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 3.0ms | Allocations: 2561)
  Rendered layouts/_header.html.erb (Duration: 0.5ms | Allocations: 390)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 2.2ms | Allocations: 2314)
  Rendered layout layouts/application.html.erb (Duration: 7.2ms | Allocations: 6736)
Completed 200 OK in 1869ms (Views: 9.8ms | ActiveRecord: 1311.6ms | Allocations: 83407)


Started PATCH "/users/str1ien" for 127.0.0.1 at 2023-12-15 18:59:19 +0100
Processing by UsersController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"nombre"=>"str1ien3", "password"=>"[FILTERED]"}, "button"=>"", "nombre"=>"str1ien"}
  [1m[36mUser Load (27.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:66:in `update'
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
Completed 500 Internal Server Error in 56ms (ActiveRecord: 27.3ms | Allocations: 1638)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
NoMethodError (undefined method `nombre' for #<UsersController:0x0000000000f000>):
  
app/controllers/users_controller.rb:71:in `block in update'
app/controllers/users_controller.rb:70:in `update'
Started GET "/users/str1ien" for 127.0.0.1 at 2023-12-15 19:00:16 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"str1ien"}
  [1m[36mUser Load (28.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (31.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (27.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (26.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-11-15 18:00:17.378440')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-11-15 18:00:17.406536')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-11-15 18:00:17.434855')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (28.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:00:17.617709')[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (28.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 43]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:00:17.738007')[0m  [["reviewable_id", 65], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:00:17.766303')[0m  [["reviewable_id", 67], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:00:17.794322')[0m  [["reviewable_id", 68], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (27.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:00:17.909858')[0m  [["reviewable_id", 44], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (25.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 44]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (27.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:00:18.022384')[0m  [["reviewable_id", 45], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (28.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 45]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (27.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:00:18.079775')[0m  [["reviewable_id", 71], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 1.5ms | Allocations: 1481)
  Rendered layouts/_header.html.erb (Duration: 0.4ms | Allocations: 371)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 2.4ms | Allocations: 2269)
  Rendered layout layouts/application.html.erb (Duration: 5.6ms | Allocations: 5371)
Completed 200 OK in 1102ms (Views: 6.8ms | ActiveRecord: 1003.2ms | Allocations: 48252)


Started GET "/users/str1ien" for 127.0.0.1 at 2023-12-15 19:00:26 +0100
  [1m[36mActiveRecord::SchemaMigration Load (27.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"str1ien"}
  [1m[36mUser Load (27.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (27.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (27.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (34.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-11-15 18:00:28.613505')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (27.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-11-15 18:00:28.649287')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-11-15 18:00:28.677899')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (28.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (27.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (27.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:00:28.906762')[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (28.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 43]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (27.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:00:29.064219')[0m  [["reviewable_id", 65], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:00:29.092716')[0m  [["reviewable_id", 67], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:00:29.120998')[0m  [["reviewable_id", 68], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (28.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:00:29.236510')[0m  [["reviewable_id", 44], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (27.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 44]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (28.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:00:29.348567')[0m  [["reviewable_id", 45], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (28.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 45]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (27.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:00:29.406651')[0m  [["reviewable_id", 71], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 2.9ms | Allocations: 2561)
  Rendered layouts/_header.html.erb (Duration: 0.4ms | Allocations: 390)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 2.3ms | Allocations: 2314)
  Rendered layout layouts/application.html.erb (Duration: 7.2ms | Allocations: 6736)
Completed 200 OK in 1815ms (Views: 9.6ms | ActiveRecord: 1323.1ms | Allocations: 83318)


Started PATCH "/users/str1ien" for 127.0.0.1 at 2023-12-15 19:00:30 +0100
Processing by UsersController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"nombre"=>"str1ien3", "password"=>"[FILTERED]"}, "button"=>"", "nombre"=>"str1ien"}
  [1m[36mUser Load (27.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:66:in `update'
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
Completed 500 Internal Server Error in 56ms (ActiveRecord: 27.1ms | Allocations: 1618)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
NoMethodError (undefined method `nombre' for #<UsersController:0x0000000000ef88>):
  
app/controllers/users_controller.rb:71:in `block in update'
app/controllers/users_controller.rb:70:in `update'
Started GET "/users/str1ien" for 127.0.0.1 at 2023-12-15 19:03:50 +0100
  [1m[36mActiveRecord::SchemaMigration Load (28.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"str1ien"}
  [1m[36mUser Load (28.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (27.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (28.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (29.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (27.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-11-15 18:03:51.917801')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-11-15 18:03:51.946556')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-11-15 18:03:51.975063')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (28.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (28.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:03:52.209281')[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (26.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 43]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (27.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:03:52.366362')[0m  [["reviewable_id", 65], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:03:52.395310')[0m  [["reviewable_id", 67], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (27.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:03:52.423600')[0m  [["reviewable_id", 68], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (27.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (27.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:03:52.539404')[0m  [["reviewable_id", 44], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (27.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 44]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (27.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:03:52.653554')[0m  [["reviewable_id", 45], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (27.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 45]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:03:52.710749')[0m  [["reviewable_id", 71], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (27.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 4.9ms | Allocations: 2561)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 390)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 3.0ms | Allocations: 2314)
  Rendered layout layouts/application.html.erb (Duration: 10.5ms | Allocations: 6736)
Completed 200 OK in 1806ms (Views: 13.5ms | ActiveRecord: 1312.6ms | Allocations: 83358)


Started PATCH "/users/str1ien" for 127.0.0.1 at 2023-12-15 19:03:59 +0100
Processing by UsersController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"nombre"=>"str1ien3", "password"=>"[FILTERED]"}, "button"=>"", "nombre"=>"str1ien"}
  [1m[36mUser Load (28.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:66:in `update'
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (28.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:71:in `block in update'
  [1m[36mPost Update All (29.1ms)[0m  [1m[33mUPDATE "posts" SET "autor" = $1 WHERE "posts"."autor" = $2[0m  [["autor", "str1ien"], ["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:71:in `block in update'
  [1m[36mResponse Update All (27.5ms)[0m  [1m[33mUPDATE "responses" SET "autor" = $1 WHERE "responses"."autor" = $2[0m  [["autor", "str1ien"], ["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:72:in `block in update'
  [1m[36mReview Update All (27.2ms)[0m  [1m[33mUPDATE "reviews" SET "autor" = $1 WHERE "reviews"."autor" = $2[0m  [["autor", "str1ien"], ["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:73:in `block in update'
  [1m[36mRank Update All (28.9ms)[0m  [1m[33mUPDATE "ranks" SET "who" = $1 WHERE "ranks"."who" = $2[0m  [["who", "str1ien"], ["who", "str1ien"]]
  â†³ app/controllers/users_controller.rb:74:in `block in update'
  [1m[36mReaction Update All (27.5ms)[0m  [1m[33mUPDATE "reactions" SET "who" = $1 WHERE "reactions"."who" = $2[0m  [["who", "str1ien"], ["who", "str1ien"]]
  â†³ app/controllers/users_controller.rb:75:in `block in update'
  [1m[35m (27.7ms)[0m  [1m[33mUPDATE restaurants_users SET user_id = 'str1ien' WHERE user_id = 'str1ien'[0m
  â†³ app/controllers/users_controller.rb:76:in `block in update'
  [1m[36mUser Update (30.5ms)[0m  [1m[33mUPDATE "users" SET "nombre" = $1 WHERE "users"."nombre" = $2[0m  [["nombre", "str1ien3"], ["nombre", "str1ien"]]
  â†³ app/controllers/users_controller.rb:77:in `block in update'
  [1m[36mTRANSACTION (27.0ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/users_controller.rb:70:in `update'
Completed 500 Internal Server Error in 497ms (ActiveRecord: 486.1ms | Allocations: 8532)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  insert or update on table "posts" violates foreign key constraint "fk_rails_b3f6eb0ecb"
DETAIL:  Key (autor)=(str1ien3) is not present in table "users".
CONTEXT:  SQL statement "UPDATE posts SET autor = NEW.nombre WHERE autor = OLD.nombre"
PL/pgSQL function username_function() line 5 at SQL statement
):
  
Started GET "/users/str1ien" for 127.0.0.1 at 2023-12-15 19:05:47 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"str1ien"}
  [1m[36mUser Load (28.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (28.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (29.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (28.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-11-15 18:05:47.663310')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (26.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-11-15 18:05:47.691393')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-11-15 18:05:47.718376')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (28.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:05:47.803683')[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (27.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 43]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:05:47.860625')[0m  [["reviewable_id", 65], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (27.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:05:47.889032')[0m  [["reviewable_id", 67], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:05:47.916939')[0m  [["reviewable_id", 68], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (27.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:05:48.000753')[0m  [["reviewable_id", 44], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (27.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 44]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (27.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:05:48.112848')[0m  [["reviewable_id", 45], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (41.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 45]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (27.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:05:48.183978')[0m  [["reviewable_id", 71], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 0.8ms | Allocations: 570)
  Rendered layouts/_header.html.erb (Duration: 0.1ms | Allocations: 118)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 2.1ms | Allocations: 1553)
  Rendered layout layouts/application.html.erb (Duration: 3.8ms | Allocations: 2851)
Completed 200 OK in 758ms (Views: 4.2ms | ActiveRecord: 703.8ms | Allocations: 16309)


Started PATCH "/users/str1ien" for 127.0.0.1 at 2023-12-15 19:06:08 +0100
Processing by UsersController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"nombre"=>"str1ien3", "password"=>"[FILTERED]"}, "button"=>"", "nombre"=>"str1ien"}
  [1m[36mUser Load (28.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:66:in `update'
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (27.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:71:in `block in update'
  [1m[36mPost Update All (57.7ms)[0m  [1m[33mUPDATE "posts" SET "autor" = $1 WHERE "posts"."autor" = $2[0m  [["autor", "str1ien"], ["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:71:in `block in update'
  [1m[36mResponse Update All (27.6ms)[0m  [1m[33mUPDATE "responses" SET "autor" = $1 WHERE "responses"."autor" = $2[0m  [["autor", "str1ien"], ["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:72:in `block in update'
  [1m[36mReview Update All (28.8ms)[0m  [1m[33mUPDATE "reviews" SET "autor" = $1 WHERE "reviews"."autor" = $2[0m  [["autor", "str1ien"], ["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:73:in `block in update'
  [1m[36mRank Update All (26.9ms)[0m  [1m[33mUPDATE "ranks" SET "who" = $1 WHERE "ranks"."who" = $2[0m  [["who", "str1ien"], ["who", "str1ien"]]
  â†³ app/controllers/users_controller.rb:74:in `block in update'
  [1m[36mReaction Update All (27.5ms)[0m  [1m[33mUPDATE "reactions" SET "who" = $1 WHERE "reactions"."who" = $2[0m  [["who", "str1ien"], ["who", "str1ien"]]
  â†³ app/controllers/users_controller.rb:75:in `block in update'
  [1m[35m (27.1ms)[0m  [1m[33mUPDATE restaurants_users SET user_id = 'str1ien' WHERE user_id = 'str1ien'[0m
  â†³ app/controllers/users_controller.rb:76:in `block in update'
  [1m[36mUser Update (27.9ms)[0m  [1m[33mUPDATE "users" SET "nombre" = $1 WHERE "users"."nombre" = $2[0m  [["nombre", "str1ien3"], ["nombre", "str1ien"]]
  â†³ app/controllers/users_controller.rb:77:in `block in update'
  [1m[36mTRANSACTION (26.8ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/users_controller.rb:70:in `update'
Completed 500 Internal Server Error in 314ms (ActiveRecord: 306.4ms | Allocations: 5499)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  update or delete on table "users" violates foreign key constraint "fk_rails_b3f6eb0ecb" on table "posts"
DETAIL:  Key (nombre)=(str1ien) is still referenced from table "posts".
):
  
Started GET "/users/str1ien" for 127.0.0.1 at 2023-12-15 19:08:22 +0100
  [1m[36mActiveRecord::SchemaMigration Load (26.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"str1ien"}
  [1m[36mUser Load (28.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (28.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (28.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (29.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (27.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-11-15 18:08:24.201421')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (27.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-11-15 18:08:24.229754')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-11-15 18:08:24.258152')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (28.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (28.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (27.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:08:24.485658')[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (25.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 43]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (27.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:08:24.638743')[0m  [["reviewable_id", 65], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (27.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:08:24.667333')[0m  [["reviewable_id", 67], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (27.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:08:24.695703')[0m  [["reviewable_id", 68], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (27.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (27.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:08:24.813988')[0m  [["reviewable_id", 44], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (28.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 44]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:08:24.927208')[0m  [["reviewable_id", 45], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (28.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 45]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (27.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:08:24.984254')[0m  [["reviewable_id", 71], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 3.2ms | Allocations: 2562)
  Rendered layouts/_header.html.erb (Duration: 0.4ms | Allocations: 390)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 2.2ms | Allocations: 2314)
  Rendered layout layouts/application.html.erb (Duration: 7.3ms | Allocations: 6737)
Completed 200 OK in 1818ms (Views: 9.6ms | ActiveRecord: 1320.6ms | Allocations: 83312)


Started PATCH "/users/str1ien" for 127.0.0.1 at 2023-12-15 19:08:27 +0100
Processing by UsersController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"nombre"=>"str1ien3", "password"=>"[FILTERED]"}, "button"=>"", "nombre"=>"str1ien"}
  [1m[36mUser Load (28.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:66:in `update'
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (27.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:71:in `block in update'
  [1m[36mPost Update All (28.3ms)[0m  [1m[33mUPDATE "posts" SET "autor" = $1 WHERE "posts"."autor" = $2[0m  [["autor", "str1ien3"], ["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:71:in `block in update'
  [1m[36mTRANSACTION (27.5ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/users_controller.rb:70:in `update'
Completed 500 Internal Server Error in 173ms (ActiveRecord: 168.7ms | Allocations: 3304)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  insert or update on table "posts" violates foreign key constraint "fk_rails_b3f6eb0ecb"
DETAIL:  Key (autor)=(str1ien3) is not present in table "users".
):
  
Started GET "/users/str1ien" for 127.0.0.1 at 2023-12-15 19:43:39 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"str1ien"}
  [1m[36mUser Load (29.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (28.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (28.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (29.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (27.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-11-15 18:43:40.682661')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (27.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-11-15 18:43:40.710989')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-11-15 18:43:40.738878')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (28.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (28.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:43:40.861389')[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (28.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 43]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (27.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:43:40.949575')[0m  [["reviewable_id", 65], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:43:40.977774')[0m  [["reviewable_id", 67], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:43:41.005882')[0m  [["reviewable_id", 68], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (27.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:43:41.091802')[0m  [["reviewable_id", 44], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (26.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 44]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:43:41.207435')[0m  [["reviewable_id", 45], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (27.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 45]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:43:41.263974')[0m  [["reviewable_id", 71], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 1.5ms | Allocations: 1479)
  Rendered layouts/_header.html.erb (Duration: 0.5ms | Allocations: 371)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 2.5ms | Allocations: 2269)
  Rendered layout layouts/application.html.erb (Duration: 6.3ms | Allocations: 5369)
Completed 200 OK in 1492ms (Views: 7.2ms | ActiveRecord: 945.6ms | Allocations: 49533)


Started GET "/users/str1ien" for 127.0.0.1 at 2023-12-15 19:47:55 +0100
  [1m[36mActiveRecord::SchemaMigration Load (28.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"str1ien"}
  [1m[36mUser Load (28.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (29.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (28.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (29.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (27.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-11-15 18:47:57.266878')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (27.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-11-15 18:47:57.295325')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-11-15 18:47:57.323008')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (28.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (27.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (27.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:47:57.550370')[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (27.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 43]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:47:57.705834')[0m  [["reviewable_id", 65], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:47:57.734263')[0m  [["reviewable_id", 67], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:47:57.762441')[0m  [["reviewable_id", 68], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (27.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (27.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:47:57.876372')[0m  [["reviewable_id", 44], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (27.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 44]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:47:57.988437')[0m  [["reviewable_id", 45], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (28.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 45]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:47:58.045240')[0m  [["reviewable_id", 71], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 1.5ms | Allocations: 2136)
  Rendered layout layouts/application.html.erb (Duration: 1.7ms | Allocations: 2270)
Completed 500 Internal Server Error in 1793ms (ActiveRecord: 1316.4ms | Allocations: 78869)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <div class="title_container" style="flex-direction: row !important">
    <h1 class="title">Mi <span class="title_key_word">Cuenta</span></h1>
    <% if @user.esAdmin %>
        <%= link_to "/admin", class: "admin_view_button", style: "text-decoration: none" do %>
            <div>AdministraciÃ³n</div>
        <% end %>
    <% end %>
    <%= link_to logout_path, class: "logout_button", method: :delete do %>
        <div>Cerrar sesiÃ³n</div>
    <% end %>
</div>

<%= form_with model: @user  do |form| %>
    <div class="my_account_form_container">
        <div class="my_account_user_passwd">
            <div style="padding-bottom: 10px;">
                <%= form.label :nombre, "Nombre de usuario", class: "my_account_form_label" %>
            <br>
                <%= :nombre, class: "my_account_form_text_field" %>
            </div>
            <div>
                <%= form.label :password, "ContraseÃ±a", class: "my_account_form_label" %>
            <br>
                <%= form.password_field :password, class: "my_account_form_text_field" %>
            </div>
            <% @user.errors.full_messages.each do |msg| %>
                <div><%= msg %></div>
            <% end %>
        </div>
        
        <div class="my_account_stats_container_wrapper">
            <div class="my_account_stats_container">
                <p class="my_account_stats_title">EstadÃ­sticas de tu cuenta</p>
                <div>
                    <div class="my_account_stats_line"><p>Posts</p><span class="my_account_metrics"><%= @num_posts %></span></div>
                    <div class="my_account_stats_line"><p>Reviews</p><span class="my_account_metrics"><%= @num_reviews %></span></div>
                    <div class="my_account_stats_line"><p>Respuestas</p><span class="my_account_metrics"><%= @num_responses %></span></div>
                    <div class="my_account_stats_line"><p id="my_account_month_comments">Comentarios del Ãºltimo mes</p><span class="my_account_metrics"><%= @num_comments_last_month %></span></div>
                </div>
            </div>
            <% if @num_restaurants_user > 0 %>
                <div class="my_account_stats_container">
                    <p class="my_account_stats_title">EstadÃ­sticas de tus restaurantes en el Ãºltimo mes</p>
                    <div>
                        <div class="my_account_stats_line"><p>Reviews en tus restaurantes</p><span class="my_account_metrics"><%= @num_reviews_restaurant_last_month %></span></div>
                        <div class="my_account_stats_line"><p>Reviews en tus platos</p><span class="my_account_metrics"><%= @num_reviews_dishes_last_month %></span></div>
                        <div class="my_account_stats_line"><p>Respuestas recibidas</p><span class="my_account_metrics"><%= @num_responses_restaurant_last_month %></span></div>
                        <div class="my_account_stats_line"><p>Likes recibidos</p><span class="my_account_metrics"><%= @num_likes_restaurant_last_month %></span></div>
                        <div class="my_account_stats_line"><p id="my_account_month_comments">Dislikes recibidos</p><span class="my_account_metrics"><%= @num_dislikes_restaurant_last_month %></span></div>
                    </div>
                </div>
            <% end %>
        </div>
        <div class="my_account_profile_img_container">
            <div class="my_account_profile_img_title">Imagen de Perfil</div>
            <% if @user.ruta_img_perfil.present? %>
                <%= image_tag @user.ruta_img_perfil, class: "my_account_profile_img" %>
            <% else %>
                <%= image_tag "/images/default_profile_img.jpg", class: "my_account_profile_img" %>
            <% end %>
            <label class="new_post_image_upload_button">
                <%= form.file_field :ruta_img_perfil %>
                <%= image_tag "/images/image-icon.svg", class: "new_post_image_upload_icon" %>
                <div class="new_post_image_upload_text">Modificar</div>
            </label>
        </div>
        <%= form.button type: :submit, class: "new_post_submit", style: "grid-column: span 3;" do %>
            <%= image_tag "/images/save.png", class: "new_post_submit_icon" %>
            <div class="new_post_submit_text">Guardar</div>
        <% end %>
    </div>
<% end %>

):
1:    <div class="title_container" style="flex-direction: row !important">
2:        <h1 class="title">Mi <span class="title_key_word">Cuenta</span></h1>
3:        <% if @user.esAdmin %>
4:            <%= link_to "/admin", class: "admin_view_button", style: "text-decoration: none" do %>
5:                <div>AdministraciÃ³n</div>
6:            <% end %>
7:        <% end %>
8:        <%= link_to logout_path, class: "logout_button", method: :delete do %>
9:            <div>Cerrar sesiÃ³n</div>
10:        <% end %>
11:    </div>
12:    
13:    <%= form_with model: @user  do |form| %>
14:        <div class="my_account_form_container">
15:            <div class="my_account_user_passwd">
16:                <div style="padding-bottom: 10px;">
17:                    <%= form.label :nombre, "Nombre de usuario", class: "my_account_form_label" %>
18:                <br>
19:                    <%= :nombre, class: "my_account_form_text_field" %>
20:                </div>
21:                <div>
22:                    <%= form.label :password, "ContraseÃ±a", class: "my_account_form_label" %>
23:                <br>
24:                    <%= form.password_field :password, class: "my_account_form_text_field" %>
25:                </div>
26:                <% @user.errors.full_messages.each do |msg| %>
27:                    <div><%= msg %></div>
28:                <% end %>
29:            </div>
30:            
31:            <div class="my_account_stats_container_wrapper">
32:                <div class="my_account_stats_container">
33:                    <p class="my_account_stats_title">EstadÃ­sticas de tu cuenta</p>
34:                    <div>
35:                        <div class="my_account_stats_line"><p>Posts</p><span class="my_account_metrics"><%= @num_posts %></span></div>
36:                        <div class="my_account_stats_line"><p>Reviews</p><span class="my_account_metrics"><%= @num_reviews %></span></div>
37:                        <div class="my_account_stats_line"><p>Respuestas</p><span class="my_account_metrics"><%= @num_responses %></span></div>
38:                        <div class="my_account_stats_line"><p id="my_account_month_comments">Comentarios del Ãºltimo mes</p><span class="my_account_metrics"><%= @num_comments_last_month %></span></div>
39:                    </div>
40:                </div>
41:                <% if @num_restaurants_user > 0 %>
42:                    <div class="my_account_stats_container">
43:                        <p class="my_account_stats_title">EstadÃ­sticas de tus restaurantes en el Ãºltimo mes</p>
44:                        <div>
45:                            <div class="my_account_stats_line"><p>Reviews en tus restaurantes</p><span class="my_account_metrics"><%= @num_reviews_restaurant_last_month %></span></div>
46:                            <div class="my_account_stats_line"><p>Reviews en tus platos</p><span class="my_account_metrics"><%= @num_reviews_dishes_last_month %></span></div>
47:                            <div class="my_account_stats_line"><p>Respuestas recibidas</p><span class="my_account_metrics"><%= @num_responses_restaurant_last_month %></span></div>
48:                            <div class="my_account_stats_line"><p>Likes recibidos</p><span class="my_account_metrics"><%= @num_likes_restaurant_last_month %></span></div>
49:                            <div class="my_account_stats_line"><p id="my_account_month_comments">Dislikes recibidos</p><span class="my_account_metrics"><%= @num_dislikes_restaurant_last_month %></span></div>
50:                        </div>
51:                    </div>
52:                <% end %>
53:            </div>
54:            <div class="my_account_profile_img_container">
55:                <div class="my_account_profile_img_title">Imagen de Perfil</div>
56:                <% if @user.ruta_img_perfil.present? %>
57:                    <%= image_tag @user.ruta_img_perfil, class: "my_account_profile_img" %>
58:                <% else %>
59:                    <%= image_tag "/images/default_profile_img.jpg", class: "my_account_profile_img" %>
60:                <% end %>
61:                <label class="new_post_image_upload_button">
62:                    <%= form.file_field :ruta_img_perfil %>
63:                    <%= image_tag "/images/image-icon.svg", class: "new_post_image_upload_icon" %>
64:                    <div class="new_post_image_upload_text">Modificar</div>
65:                </label>
66:            </div>
67:            <%= form.button type: :submit, class: "new_post_submit", style: "grid-column: span 3;" do %>
68:                <%= image_tag "/images/save.png", class: "new_post_submit_icon" %>
69:                <div class="new_post_submit_text">Guardar</div>
70:            <% end %>
71:        </div>
72:    <% end %>
  
app/views/users/show.html.erb:19: syntax error, unexpected ',', expecting ')'
Started GET "/users/str1ien" for 127.0.0.1 at 2023-12-15 19:48:09 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"str1ien"}
  [1m[36mUser Load (29.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (28.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (28.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (28.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (28.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-11-15 18:48:09.949472')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (27.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-11-15 18:48:09.978354')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-11-15 18:48:10.006843')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (28.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (27.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:48:10.188828')[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (27.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 43]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:48:10.308288')[0m  [["reviewable_id", 65], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:48:10.336280')[0m  [["reviewable_id", 67], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:48:10.364364')[0m  [["reviewable_id", 68], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (27.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:48:10.479028')[0m  [["reviewable_id", 44], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (27.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 44]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (27.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:48:10.591529')[0m  [["reviewable_id", 45], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (27.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 45]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:48:10.647978')[0m  [["reviewable_id", 71], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 0.7ms | Allocations: 1658)
  Rendered layout layouts/application.html.erb (Duration: 0.9ms | Allocations: 1758)
Completed 500 Internal Server Error in 1094ms (ActiveRecord: 1006.0ms | Allocations: 44688)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <div class="title_container" style="flex-direction: row !important">
    <h1 class="title">Mi <span class="title_key_word">Cuenta</span></h1>
    <% if @user.esAdmin %>
        <%= link_to "/admin", class: "admin_view_button", style: "text-decoration: none" do %>
            <div>AdministraciÃ³n</div>
        <% end %>
    <% end %>
    <%= link_to logout_path, class: "logout_button", method: :delete do %>
        <div>Cerrar sesiÃ³n</div>
    <% end %>
</div>

<%= form_with model: @user  do |form| %>
    <div class="my_account_form_container">
        <div class="my_account_user_passwd">
            <div style="padding-bottom: 10px;">
                <%= form.label :nombre, "Nombre de usuario", class: "my_account_form_label" %>
            <br>
                <%= @user.nombre, class: "my_account_form_text_field" %>
            </div>
            <div>
                <%= form.label :password, "ContraseÃ±a", class: "my_account_form_label" %>
            <br>
                <%= form.password_field :password, class: "my_account_form_text_field" %>
            </div>
            <% @user.errors.full_messages.each do |msg| %>
                <div><%= msg %></div>
            <% end %>
        </div>
        
        <div class="my_account_stats_container_wrapper">
            <div class="my_account_stats_container">
                <p class="my_account_stats_title">EstadÃ­sticas de tu cuenta</p>
                <div>
                    <div class="my_account_stats_line"><p>Posts</p><span class="my_account_metrics"><%= @num_posts %></span></div>
                    <div class="my_account_stats_line"><p>Reviews</p><span class="my_account_metrics"><%= @num_reviews %></span></div>
                    <div class="my_account_stats_line"><p>Respuestas</p><span class="my_account_metrics"><%= @num_responses %></span></div>
                    <div class="my_account_stats_line"><p id="my_account_month_comments">Comentarios del Ãºltimo mes</p><span class="my_account_metrics"><%= @num_comments_last_month %></span></div>
                </div>
            </div>
            <% if @num_restaurants_user > 0 %>
                <div class="my_account_stats_container">
                    <p class="my_account_stats_title">EstadÃ­sticas de tus restaurantes en el Ãºltimo mes</p>
                    <div>
                        <div class="my_account_stats_line"><p>Reviews en tus restaurantes</p><span class="my_account_metrics"><%= @num_reviews_restaurant_last_month %></span></div>
                        <div class="my_account_stats_line"><p>Reviews en tus platos</p><span class="my_account_metrics"><%= @num_reviews_dishes_last_month %></span></div>
                        <div class="my_account_stats_line"><p>Respuestas recibidas</p><span class="my_account_metrics"><%= @num_responses_restaurant_last_month %></span></div>
                        <div class="my_account_stats_line"><p>Likes recibidos</p><span class="my_account_metrics"><%= @num_likes_restaurant_last_month %></span></div>
                        <div class="my_account_stats_line"><p id="my_account_month_comments">Dislikes recibidos</p><span class="my_account_metrics"><%= @num_dislikes_restaurant_last_month %></span></div>
                    </div>
                </div>
            <% end %>
        </div>
        <div class="my_account_profile_img_container">
            <div class="my_account_profile_img_title">Imagen de Perfil</div>
            <% if @user.ruta_img_perfil.present? %>
                <%= image_tag @user.ruta_img_perfil, class: "my_account_profile_img" %>
            <% else %>
                <%= image_tag "/images/default_profile_img.jpg", class: "my_account_profile_img" %>
            <% end %>
            <label class="new_post_image_upload_button">
                <%= form.file_field :ruta_img_perfil %>
                <%= image_tag "/images/image-icon.svg", class: "new_post_image_upload_icon" %>
                <div class="new_post_image_upload_text">Modificar</div>
            </label>
        </div>
        <%= form.button type: :submit, class: "new_post_submit", style: "grid-column: span 3;" do %>
            <%= image_tag "/images/save.png", class: "new_post_submit_icon" %>
            <div class="new_post_submit_text">Guardar</div>
        <% end %>
    </div>
<% end %>

):
1:    <div class="title_container" style="flex-direction: row !important">
2:        <h1 class="title">Mi <span class="title_key_word">Cuenta</span></h1>
3:        <% if @user.esAdmin %>
4:            <%= link_to "/admin", class: "admin_view_button", style: "text-decoration: none" do %>
5:                <div>AdministraciÃ³n</div>
6:            <% end %>
7:        <% end %>
8:        <%= link_to logout_path, class: "logout_button", method: :delete do %>
9:            <div>Cerrar sesiÃ³n</div>
10:        <% end %>
11:    </div>
12:    
13:    <%= form_with model: @user  do |form| %>
14:        <div class="my_account_form_container">
15:            <div class="my_account_user_passwd">
16:                <div style="padding-bottom: 10px;">
17:                    <%= form.label :nombre, "Nombre de usuario", class: "my_account_form_label" %>
18:                <br>
19:                    <%= @user.nombre, class: "my_account_form_text_field" %>
20:                </div>
21:                <div>
22:                    <%= form.label :password, "ContraseÃ±a", class: "my_account_form_label" %>
23:                <br>
24:                    <%= form.password_field :password, class: "my_account_form_text_field" %>
25:                </div>
26:                <% @user.errors.full_messages.each do |msg| %>
27:                    <div><%= msg %></div>
28:                <% end %>
29:            </div>
30:            
31:            <div class="my_account_stats_container_wrapper">
32:                <div class="my_account_stats_container">
33:                    <p class="my_account_stats_title">EstadÃ­sticas de tu cuenta</p>
34:                    <div>
35:                        <div class="my_account_stats_line"><p>Posts</p><span class="my_account_metrics"><%= @num_posts %></span></div>
36:                        <div class="my_account_stats_line"><p>Reviews</p><span class="my_account_metrics"><%= @num_reviews %></span></div>
37:                        <div class="my_account_stats_line"><p>Respuestas</p><span class="my_account_metrics"><%= @num_responses %></span></div>
38:                        <div class="my_account_stats_line"><p id="my_account_month_comments">Comentarios del Ãºltimo mes</p><span class="my_account_metrics"><%= @num_comments_last_month %></span></div>
39:                    </div>
40:                </div>
41:                <% if @num_restaurants_user > 0 %>
42:                    <div class="my_account_stats_container">
43:                        <p class="my_account_stats_title">EstadÃ­sticas de tus restaurantes en el Ãºltimo mes</p>
44:                        <div>
45:                            <div class="my_account_stats_line"><p>Reviews en tus restaurantes</p><span class="my_account_metrics"><%= @num_reviews_restaurant_last_month %></span></div>
46:                            <div class="my_account_stats_line"><p>Reviews en tus platos</p><span class="my_account_metrics"><%= @num_reviews_dishes_last_month %></span></div>
47:                            <div class="my_account_stats_line"><p>Respuestas recibidas</p><span class="my_account_metrics"><%= @num_responses_restaurant_last_month %></span></div>
48:                            <div class="my_account_stats_line"><p>Likes recibidos</p><span class="my_account_metrics"><%= @num_likes_restaurant_last_month %></span></div>
49:                            <div class="my_account_stats_line"><p id="my_account_month_comments">Dislikes recibidos</p><span class="my_account_metrics"><%= @num_dislikes_restaurant_last_month %></span></div>
50:                        </div>
51:                    </div>
52:                <% end %>
53:            </div>
54:            <div class="my_account_profile_img_container">
55:                <div class="my_account_profile_img_title">Imagen de Perfil</div>
56:                <% if @user.ruta_img_perfil.present? %>
57:                    <%= image_tag @user.ruta_img_perfil, class: "my_account_profile_img" %>
58:                <% else %>
59:                    <%= image_tag "/images/default_profile_img.jpg", class: "my_account_profile_img" %>
60:                <% end %>
61:                <label class="new_post_image_upload_button">
62:                    <%= form.file_field :ruta_img_perfil %>
63:                    <%= image_tag "/images/image-icon.svg", class: "new_post_image_upload_icon" %>
64:                    <div class="new_post_image_upload_text">Modificar</div>
65:                </label>
66:            </div>
67:            <%= form.button type: :submit, class: "new_post_submit", style: "grid-column: span 3;" do %>
68:                <%= image_tag "/images/save.png", class: "new_post_submit_icon" %>
69:                <div class="new_post_submit_text">Guardar</div>
70:            <% end %>
71:        </div>
72:    <% end %>
  
app/views/users/show.html.erb:19: syntax error, unexpected label, expecting '='
Started GET "/users/str1ien" for 127.0.0.1 at 2023-12-15 19:48:18 +0100
  [1m[36mActiveRecord::SchemaMigration Load (28.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"str1ien"}
  [1m[36mUser Load (27.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (27.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (27.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (26.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-11-15 18:48:20.243576')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-11-15 18:48:20.270575')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-11-15 18:48:20.296913')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (26.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (26.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (25.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:48:20.515085')[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (26.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 43]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:48:20.661906')[0m  [["reviewable_id", 65], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (25.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:48:20.688571')[0m  [["reviewable_id", 67], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:48:20.715009')[0m  [["reviewable_id", 68], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (26.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:48:20.824484')[0m  [["reviewable_id", 44], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (26.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 44]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:48:20.931009')[0m  [["reviewable_id", 45], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (26.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 45]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (26.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:48:20.984747')[0m  [["reviewable_id", 71], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (25.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 1.4ms | Allocations: 2136)
  Rendered layout layouts/application.html.erb (Duration: 1.5ms | Allocations: 2270)
Completed 500 Internal Server Error in 1694ms (ActiveRecord: 1246.7ms | Allocations: 78875)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <div class="title_container" style="flex-direction: row !important">
    <h1 class="title">Mi <span class="title_key_word">Cuenta</span></h1>
    <% if @user.esAdmin %>
        <%= link_to "/admin", class: "admin_view_button", style: "text-decoration: none" do %>
            <div>AdministraciÃ³n</div>
        <% end %>
    <% end %>
    <%= link_to logout_path, class: "logout_button", method: :delete do %>
        <div>Cerrar sesiÃ³n</div>
    <% end %>
</div>

<%= form_with model: @user  do |form| %>
    <div class="my_account_form_container">
        <div class="my_account_user_passwd">
            <div style="padding-bottom: 10px;">
                <%= form.label :nombre, "Nombre de usuario", class: "my_account_form_label" %>
            <br>
                <%= @user.nombre, class: "my_account_form_text_field" %>
            </div>
            <div>
                <%= form.label :password, "ContraseÃ±a", class: "my_account_form_label" %>
            <br>
                <%= form.password_field :password, class: "my_account_form_text_field" %>
            </div>
            <% @user.errors.full_messages.each do |msg| %>
                <div><%= msg %></div>
            <% end %>
        </div>
        
        <div class="my_account_stats_container_wrapper">
            <div class="my_account_stats_container">
                <p class="my_account_stats_title">EstadÃ­sticas de tu cuenta</p>
                <div>
                    <div class="my_account_stats_line"><p>Posts</p><span class="my_account_metrics"><%= @num_posts %></span></div>
                    <div class="my_account_stats_line"><p>Reviews</p><span class="my_account_metrics"><%= @num_reviews %></span></div>
                    <div class="my_account_stats_line"><p>Respuestas</p><span class="my_account_metrics"><%= @num_responses %></span></div>
                    <div class="my_account_stats_line"><p id="my_account_month_comments">Comentarios del Ãºltimo mes</p><span class="my_account_metrics"><%= @num_comments_last_month %></span></div>
                </div>
            </div>
            <% if @num_restaurants_user > 0 %>
                <div class="my_account_stats_container">
                    <p class="my_account_stats_title">EstadÃ­sticas de tus restaurantes en el Ãºltimo mes</p>
                    <div>
                        <div class="my_account_stats_line"><p>Reviews en tus restaurantes</p><span class="my_account_metrics"><%= @num_reviews_restaurant_last_month %></span></div>
                        <div class="my_account_stats_line"><p>Reviews en tus platos</p><span class="my_account_metrics"><%= @num_reviews_dishes_last_month %></span></div>
                        <div class="my_account_stats_line"><p>Respuestas recibidas</p><span class="my_account_metrics"><%= @num_responses_restaurant_last_month %></span></div>
                        <div class="my_account_stats_line"><p>Likes recibidos</p><span class="my_account_metrics"><%= @num_likes_restaurant_last_month %></span></div>
                        <div class="my_account_stats_line"><p id="my_account_month_comments">Dislikes recibidos</p><span class="my_account_metrics"><%= @num_dislikes_restaurant_last_month %></span></div>
                    </div>
                </div>
            <% end %>
        </div>
        <div class="my_account_profile_img_container">
            <div class="my_account_profile_img_title">Imagen de Perfil</div>
            <% if @user.ruta_img_perfil.present? %>
                <%= image_tag @user.ruta_img_perfil, class: "my_account_profile_img" %>
            <% else %>
                <%= image_tag "/images/default_profile_img.jpg", class: "my_account_profile_img" %>
            <% end %>
            <label class="new_post_image_upload_button">
                <%= form.file_field :ruta_img_perfil %>
                <%= image_tag "/images/image-icon.svg", class: "new_post_image_upload_icon" %>
                <div class="new_post_image_upload_text">Modificar</div>
            </label>
        </div>
        <%= form.button type: :submit, class: "new_post_submit", style: "grid-column: span 3;" do %>
            <%= image_tag "/images/save.png", class: "new_post_submit_icon" %>
            <div class="new_post_submit_text">Guardar</div>
        <% end %>
    </div>
<% end %>

):
1:    <div class="title_container" style="flex-direction: row !important">
2:        <h1 class="title">Mi <span class="title_key_word">Cuenta</span></h1>
3:        <% if @user.esAdmin %>
4:            <%= link_to "/admin", class: "admin_view_button", style: "text-decoration: none" do %>
5:                <div>AdministraciÃ³n</div>
6:            <% end %>
7:        <% end %>
8:        <%= link_to logout_path, class: "logout_button", method: :delete do %>
9:            <div>Cerrar sesiÃ³n</div>
10:        <% end %>
11:    </div>
12:    
13:    <%= form_with model: @user  do |form| %>
14:        <div class="my_account_form_container">
15:            <div class="my_account_user_passwd">
16:                <div style="padding-bottom: 10px;">
17:                    <%= form.label :nombre, "Nombre de usuario", class: "my_account_form_label" %>
18:                <br>
19:                    <%= @user.nombre, class: "my_account_form_text_field" %>
20:                </div>
21:                <div>
22:                    <%= form.label :password, "ContraseÃ±a", class: "my_account_form_label" %>
23:                <br>
24:                    <%= form.password_field :password, class: "my_account_form_text_field" %>
25:                </div>
26:                <% @user.errors.full_messages.each do |msg| %>
27:                    <div><%= msg %></div>
28:                <% end %>
29:            </div>
30:            
31:            <div class="my_account_stats_container_wrapper">
32:                <div class="my_account_stats_container">
33:                    <p class="my_account_stats_title">EstadÃ­sticas de tu cuenta</p>
34:                    <div>
35:                        <div class="my_account_stats_line"><p>Posts</p><span class="my_account_metrics"><%= @num_posts %></span></div>
36:                        <div class="my_account_stats_line"><p>Reviews</p><span class="my_account_metrics"><%= @num_reviews %></span></div>
37:                        <div class="my_account_stats_line"><p>Respuestas</p><span class="my_account_metrics"><%= @num_responses %></span></div>
38:                        <div class="my_account_stats_line"><p id="my_account_month_comments">Comentarios del Ãºltimo mes</p><span class="my_account_metrics"><%= @num_comments_last_month %></span></div>
39:                    </div>
40:                </div>
41:                <% if @num_restaurants_user > 0 %>
42:                    <div class="my_account_stats_container">
43:                        <p class="my_account_stats_title">EstadÃ­sticas de tus restaurantes en el Ãºltimo mes</p>
44:                        <div>
45:                            <div class="my_account_stats_line"><p>Reviews en tus restaurantes</p><span class="my_account_metrics"><%= @num_reviews_restaurant_last_month %></span></div>
46:                            <div class="my_account_stats_line"><p>Reviews en tus platos</p><span class="my_account_metrics"><%= @num_reviews_dishes_last_month %></span></div>
47:                            <div class="my_account_stats_line"><p>Respuestas recibidas</p><span class="my_account_metrics"><%= @num_responses_restaurant_last_month %></span></div>
48:                            <div class="my_account_stats_line"><p>Likes recibidos</p><span class="my_account_metrics"><%= @num_likes_restaurant_last_month %></span></div>
49:                            <div class="my_account_stats_line"><p id="my_account_month_comments">Dislikes recibidos</p><span class="my_account_metrics"><%= @num_dislikes_restaurant_last_month %></span></div>
50:                        </div>
51:                    </div>
52:                <% end %>
53:            </div>
54:            <div class="my_account_profile_img_container">
55:                <div class="my_account_profile_img_title">Imagen de Perfil</div>
56:                <% if @user.ruta_img_perfil.present? %>
57:                    <%= image_tag @user.ruta_img_perfil, class: "my_account_profile_img" %>
58:                <% else %>
59:                    <%= image_tag "/images/default_profile_img.jpg", class: "my_account_profile_img" %>
60:                <% end %>
61:                <label class="new_post_image_upload_button">
62:                    <%= form.file_field :ruta_img_perfil %>
63:                    <%= image_tag "/images/image-icon.svg", class: "new_post_image_upload_icon" %>
64:                    <div class="new_post_image_upload_text">Modificar</div>
65:                </label>
66:            </div>
67:            <%= form.button type: :submit, class: "new_post_submit", style: "grid-column: span 3;" do %>
68:                <%= image_tag "/images/save.png", class: "new_post_submit_icon" %>
69:                <div class="new_post_submit_text">Guardar</div>
70:            <% end %>
71:        </div>
72:    <% end %>
  
app/views/users/show.html.erb:19: syntax error, unexpected label, expecting '='
Started GET "/users/str1ien" for 127.0.0.1 at 2023-12-15 19:48:23 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"str1ien"}
  [1m[36mUser Load (27.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (27.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (26.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-11-15 18:48:23.916455')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-11-15 18:48:23.943106')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-11-15 18:48:23.969633')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (26.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:48:24.050281')[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (26.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 43]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (26.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:48:24.104241')[0m  [["reviewable_id", 65], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:48:24.131136')[0m  [["reviewable_id", 67], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:48:24.157515')[0m  [["reviewable_id", 68], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (25.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (25.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:48:24.236996')[0m  [["reviewable_id", 44], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (26.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 44]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (26.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:48:24.343753')[0m  [["reviewable_id", 45], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (26.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 45]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:48:24.397552')[0m  [["reviewable_id", 71], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 0.9ms | Allocations: 1725)
  Rendered layout layouts/application.html.erb (Duration: 1.1ms | Allocations: 1824)
Completed 500 Internal Server Error in 701ms (ActiveRecord: 654.6ms | Allocations: 15280)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <div class="title_container" style="flex-direction: row !important">
    <h1 class="title">Mi <span class="title_key_word">Cuenta</span></h1>
    <% if @user.esAdmin %>
        <%= link_to "/admin", class: "admin_view_button", style: "text-decoration: none" do %>
            <div>AdministraciÃ³n</div>
        <% end %>
    <% end %>
    <%= link_to logout_path, class: "logout_button", method: :delete do %>
        <div>Cerrar sesiÃ³n</div>
    <% end %>
</div>

<%= form_with model: @user  do |form| %>
    <div class="my_account_form_container">
        <div class="my_account_user_passwd">
            <div style="padding-bottom: 10px;">
                <%= form.label :nombre, "Nombre de usuario", class: "my_account_form_label" %>
            <br>
                <%= @user.nombre, class: "my_account_form_text_field" %>
            </div>
            <div>
                <%= form.label :password, "ContraseÃ±a", class: "my_account_form_label" %>
            <br>
                <%= form.password_field :password, class: "my_account_form_text_field" %>
            </div>
            <% @user.errors.full_messages.each do |msg| %>
                <div><%= msg %></div>
            <% end %>
        </div>
        
        <div class="my_account_stats_container_wrapper">
            <div class="my_account_stats_container">
                <p class="my_account_stats_title">EstadÃ­sticas de tu cuenta</p>
                <div>
                    <div class="my_account_stats_line"><p>Posts</p><span class="my_account_metrics"><%= @num_posts %></span></div>
                    <div class="my_account_stats_line"><p>Reviews</p><span class="my_account_metrics"><%= @num_reviews %></span></div>
                    <div class="my_account_stats_line"><p>Respuestas</p><span class="my_account_metrics"><%= @num_responses %></span></div>
                    <div class="my_account_stats_line"><p id="my_account_month_comments">Comentarios del Ãºltimo mes</p><span class="my_account_metrics"><%= @num_comments_last_month %></span></div>
                </div>
            </div>
            <% if @num_restaurants_user > 0 %>
                <div class="my_account_stats_container">
                    <p class="my_account_stats_title">EstadÃ­sticas de tus restaurantes en el Ãºltimo mes</p>
                    <div>
                        <div class="my_account_stats_line"><p>Reviews en tus restaurantes</p><span class="my_account_metrics"><%= @num_reviews_restaurant_last_month %></span></div>
                        <div class="my_account_stats_line"><p>Reviews en tus platos</p><span class="my_account_metrics"><%= @num_reviews_dishes_last_month %></span></div>
                        <div class="my_account_stats_line"><p>Respuestas recibidas</p><span class="my_account_metrics"><%= @num_responses_restaurant_last_month %></span></div>
                        <div class="my_account_stats_line"><p>Likes recibidos</p><span class="my_account_metrics"><%= @num_likes_restaurant_last_month %></span></div>
                        <div class="my_account_stats_line"><p id="my_account_month_comments">Dislikes recibidos</p><span class="my_account_metrics"><%= @num_dislikes_restaurant_last_month %></span></div>
                    </div>
                </div>
            <% end %>
        </div>
        <div class="my_account_profile_img_container">
            <div class="my_account_profile_img_title">Imagen de Perfil</div>
            <% if @user.ruta_img_perfil.present? %>
                <%= image_tag @user.ruta_img_perfil, class: "my_account_profile_img" %>
            <% else %>
                <%= image_tag "/images/default_profile_img.jpg", class: "my_account_profile_img" %>
            <% end %>
            <label class="new_post_image_upload_button">
                <%= form.file_field :ruta_img_perfil %>
                <%= image_tag "/images/image-icon.svg", class: "new_post_image_upload_icon" %>
                <div class="new_post_image_upload_text">Modificar</div>
            </label>
        </div>
        <%= form.button type: :submit, class: "new_post_submit", style: "grid-column: span 3;" do %>
            <%= image_tag "/images/save.png", class: "new_post_submit_icon" %>
            <div class="new_post_submit_text">Guardar</div>
        <% end %>
    </div>
<% end %>

):
1:    <div class="title_container" style="flex-direction: row !important">
2:        <h1 class="title">Mi <span class="title_key_word">Cuenta</span></h1>
3:        <% if @user.esAdmin %>
4:            <%= link_to "/admin", class: "admin_view_button", style: "text-decoration: none" do %>
5:                <div>AdministraciÃ³n</div>
6:            <% end %>
7:        <% end %>
8:        <%= link_to logout_path, class: "logout_button", method: :delete do %>
9:            <div>Cerrar sesiÃ³n</div>
10:        <% end %>
11:    </div>
12:    
13:    <%= form_with model: @user  do |form| %>
14:        <div class="my_account_form_container">
15:            <div class="my_account_user_passwd">
16:                <div style="padding-bottom: 10px;">
17:                    <%= form.label :nombre, "Nombre de usuario", class: "my_account_form_label" %>
18:                <br>
19:                    <%= @user.nombre, class: "my_account_form_text_field" %>
20:                </div>
21:                <div>
22:                    <%= form.label :password, "ContraseÃ±a", class: "my_account_form_label" %>
23:                <br>
24:                    <%= form.password_field :password, class: "my_account_form_text_field" %>
25:                </div>
26:                <% @user.errors.full_messages.each do |msg| %>
27:                    <div><%= msg %></div>
28:                <% end %>
29:            </div>
30:            
31:            <div class="my_account_stats_container_wrapper">
32:                <div class="my_account_stats_container">
33:                    <p class="my_account_stats_title">EstadÃ­sticas de tu cuenta</p>
34:                    <div>
35:                        <div class="my_account_stats_line"><p>Posts</p><span class="my_account_metrics"><%= @num_posts %></span></div>
36:                        <div class="my_account_stats_line"><p>Reviews</p><span class="my_account_metrics"><%= @num_reviews %></span></div>
37:                        <div class="my_account_stats_line"><p>Respuestas</p><span class="my_account_metrics"><%= @num_responses %></span></div>
38:                        <div class="my_account_stats_line"><p id="my_account_month_comments">Comentarios del Ãºltimo mes</p><span class="my_account_metrics"><%= @num_comments_last_month %></span></div>
39:                    </div>
40:                </div>
41:                <% if @num_restaurants_user > 0 %>
42:                    <div class="my_account_stats_container">
43:                        <p class="my_account_stats_title">EstadÃ­sticas de tus restaurantes en el Ãºltimo mes</p>
44:                        <div>
45:                            <div class="my_account_stats_line"><p>Reviews en tus restaurantes</p><span class="my_account_metrics"><%= @num_reviews_restaurant_last_month %></span></div>
46:                            <div class="my_account_stats_line"><p>Reviews en tus platos</p><span class="my_account_metrics"><%= @num_reviews_dishes_last_month %></span></div>
47:                            <div class="my_account_stats_line"><p>Respuestas recibidas</p><span class="my_account_metrics"><%= @num_responses_restaurant_last_month %></span></div>
48:                            <div class="my_account_stats_line"><p>Likes recibidos</p><span class="my_account_metrics"><%= @num_likes_restaurant_last_month %></span></div>
49:                            <div class="my_account_stats_line"><p id="my_account_month_comments">Dislikes recibidos</p><span class="my_account_metrics"><%= @num_dislikes_restaurant_last_month %></span></div>
50:                        </div>
51:                    </div>
52:                <% end %>
53:            </div>
54:            <div class="my_account_profile_img_container">
55:                <div class="my_account_profile_img_title">Imagen de Perfil</div>
56:                <% if @user.ruta_img_perfil.present? %>
57:                    <%= image_tag @user.ruta_img_perfil, class: "my_account_profile_img" %>
58:                <% else %>
59:                    <%= image_tag "/images/default_profile_img.jpg", class: "my_account_profile_img" %>
60:                <% end %>
61:                <label class="new_post_image_upload_button">
62:                    <%= form.file_field :ruta_img_perfil %>
63:                    <%= image_tag "/images/image-icon.svg", class: "new_post_image_upload_icon" %>
64:                    <div class="new_post_image_upload_text">Modificar</div>
65:                </label>
66:            </div>
67:            <%= form.button type: :submit, class: "new_post_submit", style: "grid-column: span 3;" do %>
68:                <%= image_tag "/images/save.png", class: "new_post_submit_icon" %>
69:                <div class="new_post_submit_text">Guardar</div>
70:            <% end %>
71:        </div>
72:    <% end %>
  
app/views/users/show.html.erb:19: syntax error, unexpected label, expecting '='
Started GET "/users/str1ien" for 127.0.0.1 at 2023-12-15 19:49:00 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"str1ien"}
  [1m[36mUser Load (27.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (27.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (26.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-11-15 18:49:00.515967')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (26.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-11-15 18:49:00.542951')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (26.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-11-15 18:49:00.569970')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (26.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:49:00.743265')[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (25.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 43]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:49:00.855755')[0m  [["reviewable_id", 65], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:49:00.882161')[0m  [["reviewable_id", 67], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:49:00.908735')[0m  [["reviewable_id", 68], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:49:01.016888')[0m  [["reviewable_id", 44], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (26.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 44]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (26.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:49:01.123136')[0m  [["reviewable_id", 45], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (26.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 45]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:49:01.176691')[0m  [["reviewable_id", 71], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 0.8ms | Allocations: 1666)
  Rendered layout layouts/application.html.erb (Duration: 1.0ms | Allocations: 1769)
Completed 500 Internal Server Error in 1038ms (ActiveRecord: 952.3ms | Allocations: 44642)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <div class="title_container" style="flex-direction: row !important">
    <h1 class="title">Mi <span class="title_key_word">Cuenta</span></h1>
    <% if @user.esAdmin %>
        <%= link_to "/admin", class: "admin_view_button", style: "text-decoration: none" do %>
            <div>AdministraciÃ³n</div>
        <% end %>
    <% end %>
    <%= link_to logout_path, class: "logout_button", method: :delete do %>
        <div>Cerrar sesiÃ³n</div>
    <% end %>
</div>

<%= form_with model: @user  do |form| %>
    <div class="my_account_form_container">
        <div class="my_account_user_passwd">
            <div style="padding-bottom: 10px;">
                <%= "Nombre de usuario", class: "my_account_form_label" %>
            <br>
                <%= @user.nombre, class: "my_account_form_text_field" %>
            </div>
            <div>
                <%= form.label :password, "ContraseÃ±a", class: "my_account_form_label" %>
            <br>
                <%= form.password_field :password, class: "my_account_form_text_field" %>
            </div>
            <% @user.errors.full_messages.each do |msg| %>
                <div><%= msg %></div>
            <% end %>
        </div>
        
        <div class="my_account_stats_container_wrapper">
            <div class="my_account_stats_container">
                <p class="my_account_stats_title">EstadÃ­sticas de tu cuenta</p>
                <div>
                    <div class="my_account_stats_line"><p>Posts</p><span class="my_account_metrics"><%= @num_posts %></span></div>
                    <div class="my_account_stats_line"><p>Reviews</p><span class="my_account_metrics"><%= @num_reviews %></span></div>
                    <div class="my_account_stats_line"><p>Respuestas</p><span class="my_account_metrics"><%= @num_responses %></span></div>
                    <div class="my_account_stats_line"><p id="my_account_month_comments">Comentarios del Ãºltimo mes</p><span class="my_account_metrics"><%= @num_comments_last_month %></span></div>
                </div>
            </div>
            <% if @num_restaurants_user > 0 %>
                <div class="my_account_stats_container">
                    <p class="my_account_stats_title">EstadÃ­sticas de tus restaurantes en el Ãºltimo mes</p>
                    <div>
                        <div class="my_account_stats_line"><p>Reviews en tus restaurantes</p><span class="my_account_metrics"><%= @num_reviews_restaurant_last_month %></span></div>
                        <div class="my_account_stats_line"><p>Reviews en tus platos</p><span class="my_account_metrics"><%= @num_reviews_dishes_last_month %></span></div>
                        <div class="my_account_stats_line"><p>Respuestas recibidas</p><span class="my_account_metrics"><%= @num_responses_restaurant_last_month %></span></div>
                        <div class="my_account_stats_line"><p>Likes recibidos</p><span class="my_account_metrics"><%= @num_likes_restaurant_last_month %></span></div>
                        <div class="my_account_stats_line"><p id="my_account_month_comments">Dislikes recibidos</p><span class="my_account_metrics"><%= @num_dislikes_restaurant_last_month %></span></div>
                    </div>
                </div>
            <% end %>
        </div>
        <div class="my_account_profile_img_container">
            <div class="my_account_profile_img_title">Imagen de Perfil</div>
            <% if @user.ruta_img_perfil.present? %>
                <%= image_tag @user.ruta_img_perfil, class: "my_account_profile_img" %>
            <% else %>
                <%= image_tag "/images/default_profile_img.jpg", class: "my_account_profile_img" %>
            <% end %>
            <label class="new_post_image_upload_button">
                <%= form.file_field :ruta_img_perfil %>
                <%= image_tag "/images/image-icon.svg", class: "new_post_image_upload_icon" %>
                <div class="new_post_image_upload_text">Modificar</div>
            </label>
        </div>
        <%= form.button type: :submit, class: "new_post_submit", style: "grid-column: span 3;" do %>
            <%= image_tag "/images/save.png", class: "new_post_submit_icon" %>
            <div class="new_post_submit_text">Guardar</div>
        <% end %>
    </div>
<% end %>

):
1:    <div class="title_container" style="flex-direction: row !important">
2:        <h1 class="title">Mi <span class="title_key_word">Cuenta</span></h1>
3:        <% if @user.esAdmin %>
4:            <%= link_to "/admin", class: "admin_view_button", style: "text-decoration: none" do %>
5:                <div>AdministraciÃ³n</div>
6:            <% end %>
7:        <% end %>
8:        <%= link_to logout_path, class: "logout_button", method: :delete do %>
9:            <div>Cerrar sesiÃ³n</div>
10:        <% end %>
11:    </div>
12:    
13:    <%= form_with model: @user  do |form| %>
14:        <div class="my_account_form_container">
15:            <div class="my_account_user_passwd">
16:                <div style="padding-bottom: 10px;">
17:                    <%= "Nombre de usuario", class: "my_account_form_label" %>
18:                <br>
19:                    <%= @user.nombre, class: "my_account_form_text_field" %>
20:                </div>
21:                <div>
22:                    <%= form.label :password, "ContraseÃ±a", class: "my_account_form_label" %>
23:                <br>
24:                    <%= form.password_field :password, class: "my_account_form_text_field" %>
25:                </div>
26:                <% @user.errors.full_messages.each do |msg| %>
27:                    <div><%= msg %></div>
28:                <% end %>
29:            </div>
30:            
31:            <div class="my_account_stats_container_wrapper">
32:                <div class="my_account_stats_container">
33:                    <p class="my_account_stats_title">EstadÃ­sticas de tu cuenta</p>
34:                    <div>
35:                        <div class="my_account_stats_line"><p>Posts</p><span class="my_account_metrics"><%= @num_posts %></span></div>
36:                        <div class="my_account_stats_line"><p>Reviews</p><span class="my_account_metrics"><%= @num_reviews %></span></div>
37:                        <div class="my_account_stats_line"><p>Respuestas</p><span class="my_account_metrics"><%= @num_responses %></span></div>
38:                        <div class="my_account_stats_line"><p id="my_account_month_comments">Comentarios del Ãºltimo mes</p><span class="my_account_metrics"><%= @num_comments_last_month %></span></div>
39:                    </div>
40:                </div>
41:                <% if @num_restaurants_user > 0 %>
42:                    <div class="my_account_stats_container">
43:                        <p class="my_account_stats_title">EstadÃ­sticas de tus restaurantes en el Ãºltimo mes</p>
44:                        <div>
45:                            <div class="my_account_stats_line"><p>Reviews en tus restaurantes</p><span class="my_account_metrics"><%= @num_reviews_restaurant_last_month %></span></div>
46:                            <div class="my_account_stats_line"><p>Reviews en tus platos</p><span class="my_account_metrics"><%= @num_reviews_dishes_last_month %></span></div>
47:                            <div class="my_account_stats_line"><p>Respuestas recibidas</p><span class="my_account_metrics"><%= @num_responses_restaurant_last_month %></span></div>
48:                            <div class="my_account_stats_line"><p>Likes recibidos</p><span class="my_account_metrics"><%= @num_likes_restaurant_last_month %></span></div>
49:                            <div class="my_account_stats_line"><p id="my_account_month_comments">Dislikes recibidos</p><span class="my_account_metrics"><%= @num_dislikes_restaurant_last_month %></span></div>
50:                        </div>
51:                    </div>
52:                <% end %>
53:            </div>
54:            <div class="my_account_profile_img_container">
55:                <div class="my_account_profile_img_title">Imagen de Perfil</div>
56:                <% if @user.ruta_img_perfil.present? %>
57:                    <%= image_tag @user.ruta_img_perfil, class: "my_account_profile_img" %>
58:                <% else %>
59:                    <%= image_tag "/images/default_profile_img.jpg", class: "my_account_profile_img" %>
60:                <% end %>
61:                <label class="new_post_image_upload_button">
62:                    <%= form.file_field :ruta_img_perfil %>
63:                    <%= image_tag "/images/image-icon.svg", class: "new_post_image_upload_icon" %>
64:                    <div class="new_post_image_upload_text">Modificar</div>
65:                </label>
66:            </div>
67:            <%= form.button type: :submit, class: "new_post_submit", style: "grid-column: span 3;" do %>
68:                <%= image_tag "/images/save.png", class: "new_post_submit_icon" %>
69:                <div class="new_post_submit_text">Guardar</div>
70:            <% end %>
71:        </div>
72:    <% end %>
  
app/views/users/show.html.erb:17: syntax error, unexpected ',', expecting ')'
app/views/users/show.html.erb:19: syntax error, unexpected label, expecting '='
Started GET "/users/str1ien" for 127.0.0.1 at 2023-12-15 19:50:06 +0100
  [1m[36mActiveRecord::SchemaMigration Load (26.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"str1ien"}
  [1m[36mUser Load (28.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (29.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (28.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (29.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-11-15 18:50:07.902894')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-11-15 18:50:07.931167')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-11-15 18:50:07.959033')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (28.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (28.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:50:08.187560')[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (28.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 43]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (27.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:50:08.345282')[0m  [["reviewable_id", 65], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (27.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:50:08.373857')[0m  [["reviewable_id", 67], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (27.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:50:08.402238')[0m  [["reviewable_id", 68], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (27.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:50:08.518160')[0m  [["reviewable_id", 44], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (27.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 44]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:50:08.630531')[0m  [["reviewable_id", 45], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (27.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 45]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (27.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:50:08.687094')[0m  [["reviewable_id", 71], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 1.4ms | Allocations: 2118)
  Rendered layout layouts/application.html.erb (Duration: 1.5ms | Allocations: 2252)
Completed 500 Internal Server Error in 1896ms (ActiveRecord: 1322.3ms | Allocations: 78855)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <div class="title_container" style="flex-direction: row !important">
    <h1 class="title">Mi <span class="title_key_word">Cuenta</span></h1>
    <% if @user.esAdmin %>
        <%= link_to "/admin", class: "admin_view_button", style: "text-decoration: none" do %>
            <div>AdministraciÃ³n</div>
        <% end %>
    <% end %>
    <%= link_to logout_path, class: "logout_button", method: :delete do %>
        <div>Cerrar sesiÃ³n</div>
    <% end %>
</div>

<%= form_with model: @user  do |form| %>
    <div class="my_account_form_container">
        <div class="my_account_user_passwd">
            <div style="padding-bottom: 10px;">
                <span class="my_account_form_label">Nombre de usuario</span>
            <br>
                <%= @user.nombre, class: "my_account_form_text_field" %>
            </div>
            <div>
                <%= form.label :password, "ContraseÃ±a", class: "my_account_form_label" %>
            <br>
                <%= form.password_field :password, class: "my_account_form_text_field" %>
            </div>
            <% @user.errors.full_messages.each do |msg| %>
                <div><%= msg %></div>
            <% end %>
        </div>
        
        <div class="my_account_stats_container_wrapper">
            <div class="my_account_stats_container">
                <p class="my_account_stats_title">EstadÃ­sticas de tu cuenta</p>
                <div>
                    <div class="my_account_stats_line"><p>Posts</p><span class="my_account_metrics"><%= @num_posts %></span></div>
                    <div class="my_account_stats_line"><p>Reviews</p><span class="my_account_metrics"><%= @num_reviews %></span></div>
                    <div class="my_account_stats_line"><p>Respuestas</p><span class="my_account_metrics"><%= @num_responses %></span></div>
                    <div class="my_account_stats_line"><p id="my_account_month_comments">Comentarios del Ãºltimo mes</p><span class="my_account_metrics"><%= @num_comments_last_month %></span></div>
                </div>
            </div>
            <% if @num_restaurants_user > 0 %>
                <div class="my_account_stats_container">
                    <p class="my_account_stats_title">EstadÃ­sticas de tus restaurantes en el Ãºltimo mes</p>
                    <div>
                        <div class="my_account_stats_line"><p>Reviews en tus restaurantes</p><span class="my_account_metrics"><%= @num_reviews_restaurant_last_month %></span></div>
                        <div class="my_account_stats_line"><p>Reviews en tus platos</p><span class="my_account_metrics"><%= @num_reviews_dishes_last_month %></span></div>
                        <div class="my_account_stats_line"><p>Respuestas recibidas</p><span class="my_account_metrics"><%= @num_responses_restaurant_last_month %></span></div>
                        <div class="my_account_stats_line"><p>Likes recibidos</p><span class="my_account_metrics"><%= @num_likes_restaurant_last_month %></span></div>
                        <div class="my_account_stats_line"><p id="my_account_month_comments">Dislikes recibidos</p><span class="my_account_metrics"><%= @num_dislikes_restaurant_last_month %></span></div>
                    </div>
                </div>
            <% end %>
        </div>
        <div class="my_account_profile_img_container">
            <div class="my_account_profile_img_title">Imagen de Perfil</div>
            <% if @user.ruta_img_perfil.present? %>
                <%= image_tag @user.ruta_img_perfil, class: "my_account_profile_img" %>
            <% else %>
                <%= image_tag "/images/default_profile_img.jpg", class: "my_account_profile_img" %>
            <% end %>
            <label class="new_post_image_upload_button">
                <%= form.file_field :ruta_img_perfil %>
                <%= image_tag "/images/image-icon.svg", class: "new_post_image_upload_icon" %>
                <div class="new_post_image_upload_text">Modificar</div>
            </label>
        </div>
        <%= form.button type: :submit, class: "new_post_submit", style: "grid-column: span 3;" do %>
            <%= image_tag "/images/save.png", class: "new_post_submit_icon" %>
            <div class="new_post_submit_text">Guardar</div>
        <% end %>
    </div>
<% end %>

):
1:    <div class="title_container" style="flex-direction: row !important">
2:        <h1 class="title">Mi <span class="title_key_word">Cuenta</span></h1>
3:        <% if @user.esAdmin %>
4:            <%= link_to "/admin", class: "admin_view_button", style: "text-decoration: none" do %>
5:                <div>AdministraciÃ³n</div>
6:            <% end %>
7:        <% end %>
8:        <%= link_to logout_path, class: "logout_button", method: :delete do %>
9:            <div>Cerrar sesiÃ³n</div>
10:        <% end %>
11:    </div>
12:    
13:    <%= form_with model: @user  do |form| %>
14:        <div class="my_account_form_container">
15:            <div class="my_account_user_passwd">
16:                <div style="padding-bottom: 10px;">
17:                    <span class="my_account_form_label">Nombre de usuario</span>
18:                <br>
19:                    <%= @user.nombre, class: "my_account_form_text_field" %>
20:                </div>
21:                <div>
22:                    <%= form.label :password, "ContraseÃ±a", class: "my_account_form_label" %>
23:                <br>
24:                    <%= form.password_field :password, class: "my_account_form_text_field" %>
25:                </div>
26:                <% @user.errors.full_messages.each do |msg| %>
27:                    <div><%= msg %></div>
28:                <% end %>
29:            </div>
30:            
31:            <div class="my_account_stats_container_wrapper">
32:                <div class="my_account_stats_container">
33:                    <p class="my_account_stats_title">EstadÃ­sticas de tu cuenta</p>
34:                    <div>
35:                        <div class="my_account_stats_line"><p>Posts</p><span class="my_account_metrics"><%= @num_posts %></span></div>
36:                        <div class="my_account_stats_line"><p>Reviews</p><span class="my_account_metrics"><%= @num_reviews %></span></div>
37:                        <div class="my_account_stats_line"><p>Respuestas</p><span class="my_account_metrics"><%= @num_responses %></span></div>
38:                        <div class="my_account_stats_line"><p id="my_account_month_comments">Comentarios del Ãºltimo mes</p><span class="my_account_metrics"><%= @num_comments_last_month %></span></div>
39:                    </div>
40:                </div>
41:                <% if @num_restaurants_user > 0 %>
42:                    <div class="my_account_stats_container">
43:                        <p class="my_account_stats_title">EstadÃ­sticas de tus restaurantes en el Ãºltimo mes</p>
44:                        <div>
45:                            <div class="my_account_stats_line"><p>Reviews en tus restaurantes</p><span class="my_account_metrics"><%= @num_reviews_restaurant_last_month %></span></div>
46:                            <div class="my_account_stats_line"><p>Reviews en tus platos</p><span class="my_account_metrics"><%= @num_reviews_dishes_last_month %></span></div>
47:                            <div class="my_account_stats_line"><p>Respuestas recibidas</p><span class="my_account_metrics"><%= @num_responses_restaurant_last_month %></span></div>
48:                            <div class="my_account_stats_line"><p>Likes recibidos</p><span class="my_account_metrics"><%= @num_likes_restaurant_last_month %></span></div>
49:                            <div class="my_account_stats_line"><p id="my_account_month_comments">Dislikes recibidos</p><span class="my_account_metrics"><%= @num_dislikes_restaurant_last_month %></span></div>
50:                        </div>
51:                    </div>
52:                <% end %>
53:            </div>
54:            <div class="my_account_profile_img_container">
55:                <div class="my_account_profile_img_title">Imagen de Perfil</div>
56:                <% if @user.ruta_img_perfil.present? %>
57:                    <%= image_tag @user.ruta_img_perfil, class: "my_account_profile_img" %>
58:                <% else %>
59:                    <%= image_tag "/images/default_profile_img.jpg", class: "my_account_profile_img" %>
60:                <% end %>
61:                <label class="new_post_image_upload_button">
62:                    <%= form.file_field :ruta_img_perfil %>
63:                    <%= image_tag "/images/image-icon.svg", class: "new_post_image_upload_icon" %>
64:                    <div class="new_post_image_upload_text">Modificar</div>
65:                </label>
66:            </div>
67:            <%= form.button type: :submit, class: "new_post_submit", style: "grid-column: span 3;" do %>
68:                <%= image_tag "/images/save.png", class: "new_post_submit_icon" %>
69:                <div class="new_post_submit_text">Guardar</div>
70:            <% end %>
71:        </div>
72:    <% end %>
  
app/views/users/show.html.erb:19: syntax error, unexpected label, expecting '='
Started GET "/users/str1ien" for 127.0.0.1 at 2023-12-15 19:52:24 +0100
  [1m[36mActiveRecord::SchemaMigration Load (26.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"str1ien"}
  [1m[36mUser Load (28.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (28.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (28.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (29.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (27.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-11-15 18:52:26.522148')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-11-15 18:52:26.550647')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-11-15 18:52:26.578509')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (28.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (27.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (27.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:52:26.805203')[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (27.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 43]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:52:26.959913')[0m  [["reviewable_id", 65], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (27.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:52:26.988129')[0m  [["reviewable_id", 67], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:52:27.015957')[0m  [["reviewable_id", 68], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (27.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:52:27.130099')[0m  [["reviewable_id", 44], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (27.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 44]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (27.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (27.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:52:27.242606')[0m  [["reviewable_id", 45], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (27.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 45]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:52:27.299113')[0m  [["reviewable_id", 71], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 2.8ms | Allocations: 2406)
  Rendered layouts/_header.html.erb (Duration: 0.4ms | Allocations: 390)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 2.3ms | Allocations: 2314)
  Rendered layout layouts/application.html.erb (Duration: 7.1ms | Allocations: 6581)
Completed 200 OK in 1793ms (Views: 9.5ms | ActiveRecord: 1312.9ms | Allocations: 83198)


Started GET "/users/str1ien" for 127.0.0.1 at 2023-12-15 19:53:01 +0100
Processing by UsersController#show as */*
  Parameters: {"nombre"=>"str1ien"}
  [1m[36mUser Load (28.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
Completed 500 Internal Server Error in 88ms (ActiveRecord: 28.6ms | Allocations: 1160)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
NoMethodError (undefined method `id' for nil:NilClass):
  
app/controllers/users_controller.rb:29:in `show'
Started GET "/users/str1ien" for 127.0.0.1 at 2023-12-15 19:58:15 +0100
  [1m[36mActiveRecord::SchemaMigration Load (26.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"str1ien"}
  [1m[36mUser Load (27.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (27.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (28.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (26.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-11-15 18:58:17.719838')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (26.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-11-15 18:58:17.747036')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-11-15 18:58:17.774005')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (27.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (26.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:58:17.992087')[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (26.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 43]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:58:18.139800')[0m  [["reviewable_id", 65], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:58:18.166321')[0m  [["reviewable_id", 67], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:58:18.192651')[0m  [["reviewable_id", 68], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (26.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (26.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:58:18.301252')[0m  [["reviewable_id", 44], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (26.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 44]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:58:18.407721')[0m  [["reviewable_id", 45], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (25.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 45]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:58:18.460740')[0m  [["reviewable_id", 71], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 3.1ms | Allocations: 2383)
  Rendered layouts/_header.html.erb (Duration: 0.4ms | Allocations: 390)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 2.3ms | Allocations: 2314)
  Rendered layout layouts/application.html.erb (Duration: 7.3ms | Allocations: 6558)
Completed 200 OK in 1773ms (Views: 10.0ms | ActiveRecord: 1251.6ms | Allocations: 83160)


Started GET "/users/str1ien" for 127.0.0.1 at 2023-12-15 19:59:15 +0100
  [1m[36mActiveRecord::SchemaMigration Load (26.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"str1ien"}
  [1m[36mUser Load (27.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (27.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (27.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-11-15 18:59:17.406593')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-11-15 18:59:17.433342')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-11-15 18:59:17.459733')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (27.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (26.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (26.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:59:17.678778')[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (26.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 43]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:59:17.827680')[0m  [["reviewable_id", 65], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (25.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:59:17.854367')[0m  [["reviewable_id", 67], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:59:17.880720')[0m  [["reviewable_id", 68], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:59:17.988687')[0m  [["reviewable_id", 44], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (26.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 44]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (25.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:59:18.095409')[0m  [["reviewable_id", 45], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (26.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 45]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:59:18.148704')[0m  [["reviewable_id", 71], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 3.4ms | Allocations: 2383)
  Rendered layouts/_header.html.erb (Duration: 0.4ms | Allocations: 390)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 2.3ms | Allocations: 2314)
  Rendered layout layouts/application.html.erb (Duration: 7.7ms | Allocations: 6558)
Completed 200 OK in 1698ms (Views: 10.1ms | ActiveRecord: 1248.2ms | Allocations: 83166)


Started GET "/users/str1ien" for 127.0.0.1 at 2023-12-15 19:59:53 +0100
  [1m[36mActiveRecord::SchemaMigration Load (26.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"str1ien"}
  [1m[36mUser Load (27.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (28.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (28.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (28.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-11-15 18:59:54.707080')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-11-15 18:59:54.735392')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-11-15 18:59:54.763292')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (28.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (27.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:59:54.990254')[0m  [["reviewable_id", 43], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (27.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 43]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:59:55.146938')[0m  [["reviewable_id", 65], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:59:55.175266')[0m  [["reviewable_id", 67], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:59:55.203124')[0m  [["reviewable_id", 68], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "43"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:59:55.317569')[0m  [["reviewable_id", 44], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (28.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 44]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReaction Count (27.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "44"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (27.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:59:55.430685')[0m  [["reviewable_id", 45], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (27.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 45]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-11-15 18:59:55.487084')[0m  [["reviewable_id", 71], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (27.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "45"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 2.9ms | Allocations: 2390)
  Rendered layouts/_header.html.erb (Duration: 0.4ms | Allocations: 390)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 2.2ms | Allocations: 2314)
  Rendered layout layouts/application.html.erb (Duration: 7.0ms | Allocations: 6565)
Completed 200 OK in 1802ms (Views: 9.8ms | ActiveRecord: 1316.9ms | Allocations: 83169)


Started GET "/categories" for 127.0.0.1 at 2023-12-15 20:00:30 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (28.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (28.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 123.1ms | Allocations: 6028)
  Rendered layouts/_header.html.erb (Duration: 0.1ms | Allocations: 118)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (27.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 29.4ms | Allocations: 1688)
  Rendered layout layouts/application.html.erb (Duration: 153.6ms | Allocations: 8459)
Completed 200 OK in 156ms (Views: 42.1ms | ActiveRecord: 112.0ms | Allocations: 10090)


