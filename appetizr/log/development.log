Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 11:51:49 +0100
  [1m[36mActiveRecord::SchemaMigration Load (23.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (29.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (23.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (23.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (23.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (22.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 302.1ms | Allocations: 39293)
  [1m[36mDish Load (24.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (24.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (23.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 3.0ms | Allocations: 914)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 440)
  Rendered layouts/_comment.html.erb (Duration: 171.2ms | Allocations: 10643)
  Rendered layouts/_add_comment.html.erb (Duration: 2.8ms | Allocations: 699)
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (23.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 31.2ms | Allocations: 2345)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 696.1ms | Allocations: 65256)
  Rendered layouts/_header.html.erb (Duration: 6.1ms | Allocations: 1425)
  Rendered layouts/_sidenav.html.erb (Duration: 23.7ms | Allocations: 3496)
  Rendered layout layouts/application.html.erb (Duration: 766.7ms | Allocations: 89471)
Completed 200 OK in 1853ms (Views: 582.3ms | ActiveRecord: 785.6ms | Allocations: 152132)


Started GET "/login" for 127.0.0.1 at 2023-11-20 11:51:56 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 16.0ms | Allocations: 3299)
  Rendered layouts/_header.html.erb (Duration: 5.3ms | Allocations: 1092)
  Rendered layouts/_sidenav.html.erb (Duration: 10.2ms | Allocations: 2665)
  Rendered layout layouts/application.html.erb (Duration: 48.2ms | Allocations: 10841)
Completed 200 OK in 88ms (Views: 51.2ms | ActiveRecord: 0.0ms | Allocations: 14354)


Started POST "/login" for 127.0.0.1 at 2023-11-20 11:52:01 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"gari", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 348ms (ActiveRecord: 24.4ms | Allocations: 1137)


Started GET "/" for 127.0.0.1 at 2023-11-20 11:52:01 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (47.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (23.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (23.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (23.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (25.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (26.1ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 144.6ms | Allocations: 13990)
  Rendered layouts/_header.html.erb (Duration: 4.1ms | Allocations: 1085)
  [1m[36mUser Load (23.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 125.1ms | Allocations: 7932)
  Rendered layout layouts/application.html.erb (Duration: 287.3ms | Allocations: 26993)
Completed 200 OK in 458ms (Views: 116.6ms | ActiveRecord: 314.4ms | Allocations: 32236)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 11:52:03 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (22.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (23.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (23.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (23.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (23.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (23.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 29.6ms | Allocations: 2131)
  [1m[36mDish Load (26.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (22.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (23.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (23.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 617)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 60.2ms | Allocations: 2745)
  Rendered layouts/_add_comment.html.erb (Duration: 1.9ms | Allocations: 529)
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (24.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 32.3ms | Allocations: 1890)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 259.6ms | Allocations: 10145)
  Rendered layouts/_header.html.erb (Duration: 4.7ms | Allocations: 1084)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 39.3ms | Allocations: 3988)
  Rendered layout layouts/application.html.erb (Duration: 313.9ms | Allocations: 18968)
Completed 200 OK in 659ms (Views: 76.9ms | ActiveRecord: 548.5ms | Allocations: 24558)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-20 11:52:11 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"gari"}
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (23.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (23.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (23.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (25.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-20 10:52:11.387550')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (24.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-20 10:52:11.416898')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (23.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-20 10:52:11.445954')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (23.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 17.4ms | Allocations: 3570)
  Rendered layouts/_header.html.erb (Duration: 7.0ms | Allocations: 1099)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 49.3ms | Allocations: 4049)
  Rendered layout layouts/application.html.erb (Duration: 96.9ms | Allocations: 12476)
Completed 200 OK in 347ms (Views: 74.8ms | ActiveRecord: 239.6ms | Allocations: 18077)


Started GET "/logout" for 127.0.0.1 at 2023-11-20 11:52:13 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.0ms | Allocations: 349)


Started GET "/" for 127.0.0.1 at 2023-11-20 11:52:13 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (47.4ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (23.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (23.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (23.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (23.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (23.9ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 107.9ms | Allocations: 11504)
  Rendered layouts/_header.html.erb (Duration: 2.6ms | Allocations: 1099)
  Rendered layouts/_sidenav.html.erb (Duration: 8.9ms | Allocations: 2661)
  Rendered layout layouts/application.html.erb (Duration: 131.8ms | Allocations: 19228)
Completed 200 OK in 288ms (Views: 61.4ms | ActiveRecord: 214.2ms | Allocations: 21727)


Started GET "/admin" for 127.0.0.1 at 2023-11-20 11:52:21 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (48.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-20 10:52:21.477000')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (24.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-20 10:52:21.529184')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-20 10:52:21.556855')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (24.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 2.8ms | Allocations: 351)
  Rendered layouts/_header.html.erb (Duration: 4.9ms | Allocations: 1110)
  Rendered layouts/_sidenav.html.erb (Duration: 10.8ms | Allocations: 2650)
  Rendered layout layouts/application.html.erb (Duration: 36.9ms | Allocations: 8245)
Completed 200 OK in 179ms (Views: 40.8ms | ActiveRecord: 121.9ms | Allocations: 10517)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-20 11:52:28 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"gari"}
  [1m[36mUser Load (26.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
Completed 500 Internal Server Error in 33ms (ActiveRecord: 26.3ms | Allocations: 1229)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
NoMethodError (undefined method `id' for nil:NilClass):
  
app/controllers/users_controller.rb:29:in `show'
Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 11:52:32 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (23.5ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (32.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (24.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (23.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 4.8ms | Allocations: 1909)
  [1m[36mDish Load (23.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (23.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (23.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 621)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 59.8ms | Allocations: 3342)
  Rendered layouts/_add_comment.html.erb (Duration: 1.0ms | Allocations: 533)
  [1m[35m (24.2ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (23.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 31.8ms | Allocations: 2304)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 155.0ms | Allocations: 10238)
  Rendered layouts/_header.html.erb (Duration: 2.3ms | Allocations: 1098)
  Rendered layouts/_sidenav.html.erb (Duration: 8.7ms | Allocations: 2684)
  Rendered layout layouts/application.html.erb (Duration: 175.1ms | Allocations: 17818)
Completed 200 OK in 536ms (Views: 58.8ms | ActiveRecord: 437.5ms | Allocations: 23431)


Started GET "/login" for 127.0.0.1 at 2023-11-20 11:52:40 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 5.5ms | Allocations: 2624)
  Rendered layouts/_header.html.erb (Duration: 4.5ms | Allocations: 1085)
  Rendered layouts/_sidenav.html.erb (Duration: 7.0ms | Allocations: 2649)
  Rendered layout layouts/application.html.erb (Duration: 28.0ms | Allocations: 10112)
Completed 200 OK in 31ms (Views: 29.5ms | ActiveRecord: 0.0ms | Allocations: 10373)


Started POST "/login" for 127.0.0.1 at 2023-11-20 11:52:49 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"Atreides", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (24.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 309ms (ActiveRecord: 24.3ms | Allocations: 856)


Started GET "/" for 127.0.0.1 at 2023-11-20 11:52:49 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (48.8ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (23.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (27.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (23.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (26.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (22.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (23.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (23.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 94.9ms | Allocations: 11488)
  Rendered layouts/_header.html.erb (Duration: 2.9ms | Allocations: 1085)
  [1m[36mUser Load (22.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 60.7ms | Allocations: 4655)
  Rendered layout layouts/application.html.erb (Duration: 166.3ms | Allocations: 21191)
Completed 200 OK in 329ms (Views: 51.6ms | ActiveRecord: 265.8ms | Allocations: 23684)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 11:52:54 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (23.5ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (23.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (23.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (23.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.0ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (23.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 31.0ms | Allocations: 2177)
  [1m[36mDish Load (24.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (23.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (22.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (23.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 629)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 443)
  Rendered layouts/_comment.html.erb (Duration: 41.4ms | Allocations: 2359)
  Rendered layouts/_add_comment.html.erb (Duration: 2.5ms | Allocations: 533)
  [1m[35m (23.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 4.5ms | Allocations: 1487)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 215.5ms | Allocations: 9538)
  Rendered layouts/_header.html.erb (Duration: 4.2ms | Allocations: 1098)
  [1m[36mUser Load (23.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 61.4ms | Allocations: 4665)
  Rendered layout layouts/application.html.erb (Duration: 289.9ms | Allocations: 19099)
Completed 200 OK in 632ms (Views: 79.7ms | ActiveRecord: 520.3ms | Allocations: 24674)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 11:53:58 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (24.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (26.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (23.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (24.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (23.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (23.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 623)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 439)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 70.7ms | Allocations: 7793)
  Rendered layouts/_add_comment.html.erb (Duration: 2.0ms | Allocations: 533)
  Rendered dishes/show.html.erb within layouts/application (Duration: 130.1ms | Allocations: 10502)
  Rendered layouts/_header.html.erb (Duration: 3.1ms | Allocations: 1086)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 38.8ms | Allocations: 4519)
  Rendered layout layouts/application.html.erb (Duration: 186.3ms | Allocations: 19890)
Completed 200 OK in 405ms (Views: 69.1ms | ActiveRecord: 291.9ms | Allocations: 24755)


Started GET "/restaurants/3/dishes/3/edit" for 127.0.0.1 at 2023-11-20 11:54:24 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"3"}
  [1m[36mDish Load (23.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.9ms | Allocations: 1642)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 5.8ms | Allocations: 2141)
  Rendered layout layouts/application.html.erb (Duration: 6.2ms | Allocations: 2233)
Completed 500 Internal Server Error in 60ms (ActiveRecord: 23.1ms | Allocations: 3497)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (No route matches {:action=>"create", :controller=>"dishes", :restaurant_id=>nil}, missing required keys: [:restaurant_id]):
    1: <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
    2: <%= form_for @dish, url: restaurant_dishes_path(@restaurant), html: { multipart: true } do |form| %>
    3:   <div class="categories_new_form_container">
    4:       <div class="categories_new_name_container">
    5:         <% if !@dish.imported_id %>
  
app/views/dishes/_form.html.erb:2
app/views/dishes/edit.html.erb:7
Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 11:54:35 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (26.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (23.1ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (27.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (26.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (29.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (22.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (25.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 32.4ms | Allocations: 2189)
  [1m[36mDish Load (29.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (35.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (23.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (27.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (23.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 2.1ms | Allocations: 625)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 443)
  Rendered layouts/_comment.html.erb (Duration: 34.3ms | Allocations: 2355)
  Rendered layouts/_add_comment.html.erb (Duration: 1.4ms | Allocations: 533)
  [1m[35m (25.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 5.1ms | Allocations: 1487)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 233.7ms | Allocations: 9546)
  Rendered layouts/_header.html.erb (Duration: 3.9ms | Allocations: 1098)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 63.4ms | Allocations: 4664)
  Rendered layout layouts/application.html.erb (Duration: 308.5ms | Allocations: 19106)
Completed 200 OK in 677ms (Views: 70.8ms | ActiveRecord: 569.2ms | Allocations: 24666)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 12:04:07 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (26.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (27.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (28.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (29.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (26.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (27.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (27.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.0ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (27.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 35.2ms | Allocations: 2841)
  [1m[36mDish Load (25.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (26.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (29.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (26.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 3.8ms | Allocations: 875)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 444)
  Rendered layouts/_comment.html.erb (Duration: 76.8ms | Allocations: 5138)
  Rendered layouts/_add_comment.html.erb (Duration: 1.8ms | Allocations: 679)
  [1m[35m (26.2ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 445)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 4.8ms | Allocations: 1506)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 318.0ms | Allocations: 19671)
  Rendered layouts/_header.html.erb (Duration: 3.1ms | Allocations: 1356)
  [1m[36mUser Load (26.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (29.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 148.3ms | Allocations: 13198)
  Rendered layout layouts/application.html.erb (Duration: 502.7ms | Allocations: 53284)
Completed 200 OK in 1645ms (Views: 266.3ms | ActiveRecord: 835.7ms | Allocations: 84355)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 12:04:17 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (25.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (26.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (25.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (26.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (27.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 616)
  Rendered layouts/_reaction.html.erb (Duration: 2.5ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 3.7ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 7.8ms | Allocations: 439)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 9.1ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 7.3ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 122.1ms | Allocations: 7787)
  Rendered layouts/_add_comment.html.erb (Duration: 6.3ms | Allocations: 526)
  Rendered dishes/show.html.erb within layouts/application (Duration: 197.1ms | Allocations: 10442)
  Rendered layouts/_header.html.erb (Duration: 13.8ms | Allocations: 1084)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (27.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 56.0ms | Allocations: 4541)
  Rendered layout layouts/application.html.erb (Duration: 309.9ms | Allocations: 19831)
Completed 200 OK in 545ms (Views: 179.9ms | ActiveRecord: 315.6ms | Allocations: 24735)


Started GET "/restaurants/3/dishes/16" for 127.0.0.1 at 2023-11-20 12:04:20 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"16"}
  [1m[36mRestaurant Load (28.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (26.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 16], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (26.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=16 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=16 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=16 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 16], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=16 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (25.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 16], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 29.9ms | Allocations: 487)
  Rendered layouts/_add_comment.html.erb (Duration: 4.7ms | Allocations: 739)
  Rendered dishes/show.html.erb within layouts/application (Duration: 94.4ms | Allocations: 2276)
  Rendered layouts/_header.html.erb (Duration: 3.6ms | Allocations: 1090)
  [1m[36mUser Load (27.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (26.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 69.6ms | Allocations: 4651)
  Rendered layout layouts/application.html.erb (Duration: 180.3ms | Allocations: 11790)
Completed 200 OK in 382ms (Views: 51.6ms | ActiveRecord: 313.7ms | Allocations: 14918)


Started GET "/restaurants/3/dishes/4/edit" for 127.0.0.1 at 2023-11-20 12:04:24 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mDish Load (26.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.7ms | Allocations: 1594)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 7.7ms | Allocations: 2085)
  Rendered layout layouts/application.html.erb (Duration: 8.3ms | Allocations: 2177)
Completed 500 Internal Server Error in 69ms (ActiveRecord: 26.4ms | Allocations: 3435)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (No route matches {:action=>"create", :controller=>"dishes", :restaurant_id=>nil}, missing required keys: [:restaurant_id]):
    1: <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
    2: <%= form_for @dish, url: restaurant_dishes_path(@restaurant), html: { multipart: true } do |form| %>
    3:   <div class="categories_new_form_container">
    4:       <div class="categories_new_name_container">
    5:         <% if !@dish.imported_id %>
  
app/views/dishes/_form.html.erb:2
app/views/dishes/edit.html.erb:7
Started GET "/restaurants/3/dishes/4/edit" for 127.0.0.1 at 2023-11-20 12:04:49 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mDish Load (26.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 0.8ms | Allocations: 1184)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 1.7ms | Allocations: 1457)
  Rendered layout layouts/application.html.erb (Duration: 2.0ms | Allocations: 1549)
Completed 500 Internal Server Error in 33ms (ActiveRecord: 26.7ms | Allocations: 2181)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (No route matches {:action=>"create", :controller=>"dishes", :restaurant_id=>nil}, missing required keys: [:restaurant_id]):
    1: <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
    2: <%= form_for @dish, url: restaurant_dishes_path(@restaurant), html: { multipart: true } do |form| %>
    3:   <div class="categories_new_form_container">
    4:       <div class="categories_new_name_container">
    5:         <% if !@dish.imported_id %>
  
app/views/dishes/_form.html.erb:2
app/views/dishes/edit.html.erb:7
Started GET "/restaurants/3/dishes/4/edit" for 127.0.0.1 at 2023-11-20 12:15:00 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mDish Load (25.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 26.2ms | Allocations: 2984)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 29.2ms | Allocations: 3482)
  Rendered layouts/_header.html.erb (Duration: 5.8ms | Allocations: 1354)
  [1m[36mUser Load (27.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (26.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 181.9ms | Allocations: 20138)
  Rendered layout layouts/application.html.erb (Duration: 249.8ms | Allocations: 44033)
Completed 200 OK in 904ms (Views: 199.0ms | ActiveRecord: 319.8ms | Allocations: 53342)


Started PATCH "/restaurants/3/dishes" for 127.0.0.1 at 2023-11-20 12:16:37 +0100
Processing by ErrorsController#not_found as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"patodonald", "descripcion"=>"patodonald", "precio"=>"40", "ruta_img_plato"=>#<ActionDispatch::Http::UploadedFile:0x00007f46c821e560 @tempfile=#<Tempfile:/tmp/RackMultipart20231120-6300-k195qb.jpg>, @content_type="image/jpeg", @original_filename="photo.jpg", @headers="Content-Disposition: form-data; name=\"dish[ruta_img_plato]\"; filename=\"photo.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "button"=>"", "unmatched"=>"restaurants/3/dishes"}
  Rendering layout layouts/application.html.erb
  Rendering errors/not_found.html.erb within layouts/application
  Rendered errors/not_found.html.erb within layouts/application (Duration: 0.9ms | Allocations: 91)
  Rendered layouts/_header.html.erb (Duration: 2.2ms | Allocations: 1121)
  [1m[36mUser Load (26.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 65.9ms | Allocations: 4624)
  Rendered layout layouts/application.html.erb (Duration: 77.0ms | Allocations: 9821)
Completed 404 Not Found in 81ms (Views: 28.4ms | ActiveRecord: 51.1ms | Allocations: 10581)


Started GET "/restaurants/3/dishes/16/edit" for 127.0.0.1 at 2023-11-20 12:17:45 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"16"}
  [1m[36mDish Load (26.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 10.6ms | Allocations: 2842)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 13.2ms | Allocations: 3343)
  Rendered layouts/_header.html.erb (Duration: 4.7ms | Allocations: 1354)
  [1m[36mUser Load (26.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (26.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 267.0ms | Allocations: 20712)
  Rendered layout layouts/application.html.erb (Duration: 357.6ms | Allocations: 44467)
Completed 200 OK in 551ms (Views: 201.5ms | ActiveRecord: 322.7ms | Allocations: 50870)


Started PATCH "/restaurants/3/dishes" for 127.0.0.1 at 2023-11-20 12:18:31 +0100
Processing by ErrorsController#not_found as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"tumadre", "descripcion"=>"sisi la tuya", "precio"=>"10.85", "ruta_img_plato"=>#<ActionDispatch::Http::UploadedFile:0x00007f46c8219600 @tempfile=#<Tempfile:/tmp/RackMultipart20231120-6300-m9i5fb.jpg>, @content_type="image/jpeg", @original_filename="photo.jpg", @headers="Content-Disposition: form-data; name=\"dish[ruta_img_plato]\"; filename=\"photo.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "button"=>"", "unmatched"=>"restaurants/3/dishes"}
  Rendering layout layouts/application.html.erb
  Rendering errors/not_found.html.erb within layouts/application
  Rendered errors/not_found.html.erb within layouts/application (Duration: 0.7ms | Allocations: 89)
  Rendered layouts/_header.html.erb (Duration: 3.6ms | Allocations: 1121)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 65.7ms | Allocations: 4624)
  Rendered layout layouts/application.html.erb (Duration: 80.2ms | Allocations: 9819)
Completed 404 Not Found in 84ms (Views: 31.9ms | ActiveRecord: 49.9ms | Allocations: 10584)


Started GET "/restaurants/3/dishes/16/edit" for 127.0.0.1 at 2023-11-20 12:19:34 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"16"}
  [1m[36mDish Load (26.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 6.2ms | Allocations: 2842)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 8.9ms | Allocations: 3316)
  Rendered layouts/_header.html.erb (Duration: 3.1ms | Allocations: 1354)
  [1m[36mUser Load (28.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (27.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 276.1ms | Allocations: 20712)
  Rendered layout layouts/application.html.erb (Duration: 321.5ms | Allocations: 44441)
Completed 200 OK in 481ms (Views: 159.7ms | ActiveRecord: 302.2ms | Allocations: 50820)


Started PATCH "/restaurants/3/dishes" for 127.0.0.1 at 2023-11-20 12:20:03 +0100
Processing by ErrorsController#not_found as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Borsch", "descripcion"=>"best borsch you will eat in your life", "precio"=>"10.85", "ruta_img_plato"=>#<ActionDispatch::Http::UploadedFile:0x00007f46ccba0d78 @tempfile=#<Tempfile:/tmp/RackMultipart20231120-6300-ew75dk.jpg>, @content_type="image/jpeg", @original_filename="photo.jpg", @headers="Content-Disposition: form-data; name=\"dish[ruta_img_plato]\"; filename=\"photo.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "button"=>"", "unmatched"=>"restaurants/3/dishes"}
  Rendering layout layouts/application.html.erb
  Rendering errors/not_found.html.erb within layouts/application
  Rendered errors/not_found.html.erb within layouts/application (Duration: 0.9ms | Allocations: 89)
  Rendered layouts/_header.html.erb (Duration: 3.0ms | Allocations: 1121)
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 67.1ms | Allocations: 4624)
  Rendered layout layouts/application.html.erb (Duration: 81.4ms | Allocations: 9819)
Completed 404 Not Found in 85ms (Views: 32.5ms | ActiveRecord: 50.5ms | Allocations: 10581)


Started GET "/restaurants/3/dishes/16/edit" for 127.0.0.1 at 2023-11-20 12:20:52 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"16"}
  [1m[36mDish Load (27.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 8.1ms | Allocations: 2169)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 9.4ms | Allocations: 2427)
  Rendered layouts/_header.html.erb (Duration: 4.6ms | Allocations: 1084)
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 73.2ms | Allocations: 4630)
  Rendered layout layouts/application.html.erb (Duration: 96.8ms | Allocations: 11891)
Completed 200 OK in 129ms (Views: 48.2ms | ActiveRecord: 77.4ms | Allocations: 12546)


Started GET "/categories" for 127.0.0.1 at 2023-11-20 12:23:48 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (25.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (25.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 123.7ms | Allocations: 6573)
  Rendered layouts/_header.html.erb (Duration: 3.1ms | Allocations: 1116)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 38.1ms | Allocations: 4540)
  Rendered layout layouts/application.html.erb (Duration: 175.2ms | Allocations: 15998)
Completed 200 OK in 190ms (Views: 75.3ms | ActiveRecord: 102.2ms | Allocations: 17629)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-20 12:23:51 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (27.1ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (25.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (27.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (26.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (26.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (26.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (26.8ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 133.2ms | Allocations: 11221)
  Rendered layouts/_header.html.erb (Duration: 4.6ms | Allocations: 1085)
  [1m[36mUser Load (27.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (26.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 74.7ms | Allocations: 4643)
  Rendered layout layouts/application.html.erb (Duration: 230.4ms | Allocations: 20922)
Completed 200 OK in 478ms (Views: 100.9ms | ActiveRecord: 315.9ms | Allocations: 27633)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 12:23:52 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (27.8ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (25.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (27.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (28.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (25.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 34.1ms | Allocations: 2757)
  [1m[36mDish Load (26.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (25.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (26.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (28.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 3.9ms | Allocations: 875)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 444)
  Rendered layouts/_comment.html.erb (Duration: 86.8ms | Allocations: 5128)
  Rendered layouts/_add_comment.html.erb (Duration: 2.4ms | Allocations: 679)
  [1m[35m (28.2ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 445)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 4.5ms | Allocations: 1506)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 314.6ms | Allocations: 15673)
  Rendered layouts/_header.html.erb (Duration: 3.7ms | Allocations: 1084)
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 91.9ms | Allocations: 4664)
  Rendered layout layouts/application.html.erb (Duration: 427.3ms | Allocations: 25172)
Completed 200 OK in 1014ms (Views: 192.3ms | ActiveRecord: 682.2ms | Allocations: 42598)


Started GET "/restaurants/3/edit" for 127.0.0.1 at 2023-11-20 12:23:56 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:56:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  [1m[36mCategory Load (25.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 44.5ms | Allocations: 3914)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 47.1ms | Allocations: 4154)
  Rendered layouts/_header.html.erb (Duration: 3.7ms | Allocations: 1090)
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 65.0ms | Allocations: 4654)
  Rendered layout layouts/application.html.erb (Duration: 126.0ms | Allocations: 13679)
Completed 200 OK in 157ms (Views: 52.1ms | ActiveRecord: 100.2ms | Allocations: 14428)


Started PATCH "/restaurants/3" for 127.0.0.1 at 2023-11-20 12:24:13 +0100
Processing by RestaurantsController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "restaurant"=>{"nombre"=>"Fumanchu", "telefono"=>"333333333", "direccion"=>"c/123", "horario"=>"soleado", "categoria"=>"chino", "ruta_img_fondo"=>#<ActionDispatch::Http::UploadedFile:0x00007f46abd89070 @tempfile=#<Tempfile:/tmp/RackMultipart20231120-6300-e6l4bm.jpg>, @content_type="image/jpeg", @original_filename="photo.jpg", @headers="Content-Disposition: form-data; name=\"restaurant[ruta_img_fondo]\"; filename=\"photo.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "button"=>"", "id"=>"3"}
  [1m[36mRestaurant Load (25.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:60:in `update'
  [1m[36mTRANSACTION (25.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/restaurants_controller.rb:62:in `update'
  [1m[36mRestaurant Update (53.7ms)[0m  [1m[33mUPDATE "restaurants" SET "ruta_img_fondo" = $1 WHERE "restaurants"."id" = $2[0m  [["ruta_img_fondo", "b9631b3a9d522f4f3f00.jpg"], ["id", 3]]
  â†³ app/controllers/restaurants_controller.rb:62:in `update'
  [1m[36mTRANSACTION (27.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/restaurants_controller.rb:62:in `update'
Redirected to http://localhost:3000/restaurants/3
Completed 302 Found in 129ms (ActiveRecord: 132.4ms | Allocations: 3794)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 12:24:13 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (25.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (25.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (26.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (26.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (26.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (26.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 6527.0ms | Allocations: 118105)
  [1m[36mDish Load (25.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (26.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (26.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (26.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (27.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 3.4ms | Allocations: 624)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 445)
  Rendered layouts/_comment.html.erb (Duration: 40.8ms | Allocations: 2359)
  Rendered layouts/_add_comment.html.erb (Duration: 1.8ms | Allocations: 532)
  [1m[35m (29.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 5.4ms | Allocations: 1493)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 6731.0ms | Allocations: 125394)
  Rendered layouts/_header.html.erb (Duration: 2.6ms | Allocations: 1096)
  [1m[36mUser Load (27.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 76.7ms | Allocations: 4660)
  Rendered layout layouts/application.html.erb (Duration: 6823.0ms | Allocations: 134928)
Completed 200 OK in 7190ms (Views: 6581.9ms | ActiveRecord: 580.4ms | Allocations: 140483)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 12:25:46 +0100
  [1m[36mActiveRecord::SchemaMigration Load (27.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (26.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (26.1ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (26.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (26.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (26.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (26.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (28.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 326.9ms | Allocations: 40196)
  [1m[36mDish Load (28.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (28.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (26.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 3.6ms | Allocations: 911)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 446)
  Rendered layouts/_comment.html.erb (Duration: 74.6ms | Allocations: 5501)
  Rendered layouts/_add_comment.html.erb (Duration: 2.7ms | Allocations: 701)
  [1m[35m (26.1ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 5.9ms | Allocations: 1538)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 682.2ms | Allocations: 60861)
  Rendered layouts/_header.html.erb (Duration: 6.7ms | Allocations: 1417)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 277.8ms | Allocations: 16942)
  Rendered layout layouts/application.html.erb (Duration: 1004.4ms | Allocations: 98534)
Completed 200 OK in 2155ms (Views: 675.6ms | ActiveRecord: 984.0ms | Allocations: 161217)


Started GET "/restaurants/3/dishes/new" for 127.0.0.1 at 2023-11-20 12:26:04 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"3"}
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:19:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 9.3ms | Allocations: 3260)
  Rendered dishes/new.html.erb within layouts/application (Duration: 11.0ms | Allocations: 3554)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1094)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 63.7ms | Allocations: 4655)
  Rendered layout layouts/application.html.erb (Duration: 84.0ms | Allocations: 13091)
Completed 200 OK in 115ms (Views: 34.7ms | ActiveRecord: 76.0ms | Allocations: 14237)


Started GET "/restaurants/3/dishes/16/edit" for 127.0.0.1 at 2023-11-20 12:29:05 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"16"}
  [1m[36mDish Load (26.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 6.5ms | Allocations: 2204)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 8.7ms | Allocations: 2617)
  Rendered layouts/_header.html.erb (Duration: 3.9ms | Allocations: 1089)
  [1m[36mUser Load (26.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 70.3ms | Allocations: 4635)
  Rendered layout layouts/application.html.erb (Duration: 96.9ms | Allocations: 12099)
Completed 200 OK in 155ms (Views: 46.2ms | ActiveRecord: 77.8ms | Allocations: 13429)


Started PATCH "/restaurants/3/dishes" for 127.0.0.1 at 2023-11-20 12:29:13 +0100
Processing by ErrorsController#not_found as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"tumadre", "descripcion"=>"nono la tuya no", "precio"=>"10.85"}, "button"=>"", "unmatched"=>"restaurants/3/dishes"}
  Rendering layout layouts/application.html.erb
  Rendering errors/not_found.html.erb within layouts/application
  Rendered errors/not_found.html.erb within layouts/application (Duration: 0.8ms | Allocations: 91)
  Rendered layouts/_header.html.erb (Duration: 2.6ms | Allocations: 1125)
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 63.7ms | Allocations: 4647)
  Rendered layout layouts/application.html.erb (Duration: 75.1ms | Allocations: 9858)
Completed 404 Not Found in 78ms (Views: 25.6ms | ActiveRecord: 51.1ms | Allocations: 10656)


Started GET "/restaurants/3/dishes/4/edit" for 127.0.0.1 at 2023-11-20 12:31:33 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mDish Load (35.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 8.1ms | Allocations: 2849)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 11.6ms | Allocations: 3339)
  Rendered layouts/_header.html.erb (Duration: 6.0ms | Allocations: 1358)
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (51.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 289.2ms | Allocations: 20729)
  Rendered layout layouts/application.html.erb (Duration: 354.1ms | Allocations: 44513)
Completed 200 OK in 537ms (Views: 159.5ms | ActiveRecord: 355.0ms | Allocations: 50903)


Started PATCH "/restaurants/3/dishes" for 127.0.0.1 at 2023-11-20 12:31:52 +0100
Processing by ErrorsController#not_found as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"patodonald", "descripcion"=>"en realidad es pollo", "precio"=>"40.0"}, "button"=>"", "unmatched"=>"restaurants/3/dishes"}
  Rendering layout layouts/application.html.erb
  Rendering errors/not_found.html.erb within layouts/application
  Rendered errors/not_found.html.erb within layouts/application (Duration: 1.2ms | Allocations: 89)
  Rendered layouts/_header.html.erb (Duration: 2.9ms | Allocations: 1125)
  [1m[36mUser Load (26.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 65.5ms | Allocations: 4648)
  Rendered layout layouts/application.html.erb (Duration: 81.5ms | Allocations: 9856)
Completed 404 Not Found in 86ms (Views: 32.8ms | ActiveRecord: 51.0ms | Allocations: 10600)


Started GET "/restaurants/3/dishes/4/edit" for 127.0.0.1 at 2023-11-20 12:33:27 +0100
Processing by DishesController#edit as */*
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mDish Load (25.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 7.3ms | Allocations: 2186)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 8.4ms | Allocations: 2334)
  Rendered layouts/_header.html.erb (Duration: 3.0ms | Allocations: 1088)
  Rendered layouts/_sidenav.html.erb (Duration: 7.4ms | Allocations: 2667)
  Rendered layout layouts/application.html.erb (Duration: 29.1ms | Allocations: 9847)
Completed 200 OK in 60ms (Views: 30.5ms | ActiveRecord: 25.5ms | Allocations: 10586)


Started GET "/restaurants/3/dishes/16/edit" for 127.0.0.1 at 2023-11-20 12:33:42 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"16"}
  [1m[36mDish Load (26.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 6.6ms | Allocations: 2197)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 7.7ms | Allocations: 2487)
  Rendered layouts/_header.html.erb (Duration: 4.9ms | Allocations: 1102)
  [1m[36mUser Load (49.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (29.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 98.6ms | Allocations: 4681)
  Rendered layout layouts/application.html.erb (Duration: 122.1ms | Allocations: 12090)
Completed 200 OK in 156ms (Views: 46.2ms | ActiveRecord: 104.8ms | Allocations: 12744)


Started PATCH "/restaurants/3/dishes" for 127.0.0.1 at 2023-11-20 12:33:59 +0100
Processing by ErrorsController#not_found as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"tumadre", "descripcion"=>"nono la tuya no", "precio"=>"10.85"}, "button"=>"", "unmatched"=>"restaurants/3/dishes"}
  Rendering layout layouts/application.html.erb
  Rendering errors/not_found.html.erb within layouts/application
  Rendered errors/not_found.html.erb within layouts/application (Duration: 0.2ms | Allocations: 6)
  Rendered layouts/_header.html.erb (Duration: 5.9ms | Allocations: 1119)
  [1m[36mUser Load (25.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (26.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 72.1ms | Allocations: 4636)
  Rendered layout layouts/application.html.erb (Duration: 95.0ms | Allocations: 9703)
Completed 404 Not Found in 98ms (Views: 44.6ms | ActiveRecord: 51.8ms | Allocations: 10183)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 12:38:09 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (25.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (26.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (26.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (28.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (27.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (26.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 32.1ms | Allocations: 2798)
  [1m[36mDish Load (26.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (25.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (27.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 2.8ms | Allocations: 877)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 446)
  Rendered layouts/_comment.html.erb (Duration: 52.2ms | Allocations: 5132)
  Rendered layouts/_add_comment.html.erb (Duration: 2.3ms | Allocations: 681)
  [1m[35m (26.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 4.2ms | Allocations: 1515)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 244.2ms | Allocations: 15743)
  Rendered layouts/_header.html.erb (Duration: 3.5ms | Allocations: 1102)
  [1m[36mUser Load (26.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (26.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 72.2ms | Allocations: 4681)
  Rendered layout layouts/application.html.erb (Duration: 686.3ms | Allocations: 88146)
Completed 200 OK in 1305ms (Views: 454.7ms | ActiveRecord: 739.3ms | Allocations: 109160)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 12:40:13 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (28.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (25.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (25.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (27.0ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (25.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 36.7ms | Allocations: 2197)
  [1m[36mDish Load (24.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (25.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (26.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (26.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (27.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 627)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 445)
  Rendered layouts/_comment.html.erb (Duration: 37.9ms | Allocations: 2361)
  Rendered layouts/_add_comment.html.erb (Duration: 1.9ms | Allocations: 535)
  [1m[35m (26.0ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 4.2ms | Allocations: 1493)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 224.4ms | Allocations: 9494)
  Rendered layouts/_header.html.erb (Duration: 3.6ms | Allocations: 1102)
  [1m[36mUser Load (25.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (27.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 73.2ms | Allocations: 4697)
  Rendered layout layouts/application.html.erb (Duration: 343.6ms | Allocations: 25772)
Completed 200 OK in 711ms (Views: 110.0ms | ActiveRecord: 570.3ms | Allocations: 31346)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 12:41:25 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (28.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (26.8ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (27.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (26.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (28.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (25.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 30.5ms | Allocations: 2190)
  [1m[36mDish Load (27.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (28.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (26.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 624)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 445)
  Rendered layouts/_comment.html.erb (Duration: 34.2ms | Allocations: 2355)
  Rendered layouts/_add_comment.html.erb (Duration: 1.5ms | Allocations: 532)
  [1m[35m (25.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 4.0ms | Allocations: 1494)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 221.4ms | Allocations: 9474)
  Rendered layouts/_header.html.erb (Duration: 4.9ms | Allocations: 1088)
  [1m[36mUser Load (29.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (27.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 77.1ms | Allocations: 4638)
  Rendered layout layouts/application.html.erb (Duration: 340.7ms | Allocations: 25628)
Completed 200 OK in 715ms (Views: 100.0ms | ActiveRecord: 587.1ms | Allocations: 31189)


Started GET "/restaurants/3/dishes/new" for 127.0.0.1 at 2023-11-20 12:41:28 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"3"}
  [1m[36mRestaurant Load (27.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:19:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 10.1ms | Allocations: 2162)
  Rendered dishes/new.html.erb within layouts/application (Duration: 12.5ms | Allocations: 2391)
  Rendered layouts/_header.html.erb (Duration: 2.9ms | Allocations: 1088)
  [1m[36mUser Load (26.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (31.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 85.3ms | Allocations: 4659)
  Rendered layout layouts/application.html.erb (Duration: 111.8ms | Allocations: 11894)
Completed 200 OK in 147ms (Views: 55.6ms | ActiveRecord: 85.7ms | Allocations: 12842)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-20 12:42:08 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (51.5ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (28.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (27.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (26.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (26.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (25.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (26.2ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 141.5ms | Allocations: 13095)
  Rendered layouts/_header.html.erb (Duration: 5.3ms | Allocations: 1095)
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 63.8ms | Allocations: 4684)
  Rendered layout layouts/application.html.erb (Duration: 243.5ms | Allocations: 29538)
Completed 200 OK in 473ms (Views: 88.9ms | ActiveRecord: 314.1ms | Allocations: 42258)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-20 12:42:09 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (53.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (26.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (26.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (27.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (26.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (26.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (27.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (26.0ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 104.6ms | Allocations: 10522)
  Rendered layouts/_header.html.erb (Duration: 3.3ms | Allocations: 1089)
  [1m[36mUser Load (25.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 66.0ms | Allocations: 4635)
  Rendered layout layouts/application.html.erb (Duration: 183.0ms | Allocations: 20252)
Completed 200 OK in 364ms (Views: 55.0ms | ActiveRecord: 290.4ms | Allocations: 22746)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-20 12:43:33 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (50.4ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (25.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (26.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (29.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 117.6ms | Allocations: 10540)
  Rendered layouts/_header.html.erb (Duration: 4.9ms | Allocations: 1103)
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 69.1ms | Allocations: 4677)
  Rendered layout layouts/application.html.erb (Duration: 234.4ms | Allocations: 27023)
Completed 200 OK in 398ms (Views: 104.1ms | ActiveRecord: 282.4ms | Allocations: 29514)


Started GET "/restaurants?filter=burger" for 127.0.0.1 at 2023-11-20 12:43:43 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"filter"=>"burger"}
  [1m[36mRestaurant Exists? (50.9ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (25.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (26.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (25.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."categoria" = $1[0m  [["categoria", "burger"]]
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (26.0ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 121.9ms | Allocations: 6675)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1101)
  [1m[36mUser Load (27.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 64.6ms | Allocations: 4671)
  Rendered layout layouts/application.html.erb (Duration: 195.4ms | Allocations: 16418)
Completed 200 OK in 363ms (Views: 66.5ms | ActiveRecord: 283.8ms | Allocations: 18941)


Started GET "/restaurants?filter=chino" for 127.0.0.1 at 2023-11-20 12:43:45 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"filter"=>"chino"}
  [1m[36mRestaurant Exists? (51.8ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (25.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (29.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (25.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."categoria" = $1[0m  [["categoria", "chino"]]
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 88.9ms | Allocations: 6587)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1089)
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 62.0ms | Allocations: 4635)
  Rendered layout layouts/application.html.erb (Duration: 159.8ms | Allocations: 16289)
Completed 200 OK in 331ms (Views: 33.7ms | ActiveRecord: 285.0ms | Allocations: 18809)


Started GET "/restaurants?filter=Turca" for 127.0.0.1 at 2023-11-20 12:43:47 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"filter"=>"Turca"}
  [1m[36mRestaurant Exists? (51.1ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (26.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (28.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (25.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."categoria" = $1[0m  [["categoria", "Turca"]]
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 91.6ms | Allocations: 5577)
  Rendered layouts/_header.html.erb (Duration: 2.3ms | Allocations: 1089)
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 64.7ms | Allocations: 4635)
  Rendered layout layouts/application.html.erb (Duration: 166.8ms | Allocations: 15254)
Completed 200 OK in 336ms (Views: 40.1ms | ActiveRecord: 284.3ms | Allocations: 17776)


Started GET "/restaurants?filter=Gourmet" for 127.0.0.1 at 2023-11-20 12:43:48 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"filter"=>"Gourmet"}
  [1m[36mRestaurant Exists? (50.5ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (28.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (26.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (25.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."categoria" = $1[0m  [["categoria", "Gourmet"]]
  â†³ app/views/restaurants/index.html.erb:51
  Rendered restaurants/index.html.erb within layouts/application (Duration: 60.2ms | Allocations: 4441)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1103)
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (26.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 64.1ms | Allocations: 4677)
  Rendered layout layouts/application.html.erb (Duration: 134.0ms | Allocations: 14227)
Completed 200 OK in 302ms (Views: 32.8ms | ActiveRecord: 257.6ms | Allocations: 16748)


Started GET "/restaurants?filter=pizza" for 127.0.0.1 at 2023-11-20 12:43:51 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"filter"=>"pizza"}
  [1m[36mRestaurant Exists? (50.1ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (25.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (25.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (27.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."categoria" = $1[0m  [["categoria", "pizza"]]
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 92.7ms | Allocations: 6750)
  Rendered layouts/_header.html.erb (Duration: 2.2ms | Allocations: 1103)
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 65.8ms | Allocations: 4674)
  Rendered layout layouts/application.html.erb (Duration: 167.9ms | Allocations: 16510)
Completed 200 OK in 330ms (Views: 39.3ms | ActiveRecord: 280.9ms | Allocations: 19031)


Started GET "/restaurants?filter=Tapas" for 127.0.0.1 at 2023-11-20 12:43:52 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"filter"=>"Tapas"}
  [1m[36mRestaurant Exists? (51.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (25.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (26.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (29.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (25.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (25.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."categoria" = $1[0m  [["categoria", "Tapas"]]
  â†³ app/views/restaurants/index.html.erb:51
  Rendered restaurants/index.html.erb within layouts/application (Duration: 61.5ms | Allocations: 4426)
  Rendered layouts/_header.html.erb (Duration: 2.8ms | Allocations: 1089)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 63.7ms | Allocations: 4638)
  Rendered layout layouts/application.html.erb (Duration: 137.0ms | Allocations: 14097)
Completed 200 OK in 309ms (Views: 37.0ms | ActiveRecord: 259.5ms | Allocations: 16618)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-20 12:43:54 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (50.8ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (26.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (25.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (25.8ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 99.8ms | Allocations: 10543)
  Rendered layouts/_header.html.erb (Duration: 2.2ms | Allocations: 1089)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 62.3ms | Allocations: 4636)
  Rendered layout layouts/application.html.erb (Duration: 172.2ms | Allocations: 20239)
Completed 200 OK in 339ms (Views: 47.3ms | ActiveRecord: 278.8ms | Allocations: 22731)


Started GET "/categories" for 127.0.0.1 at 2023-11-20 12:43:57 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (25.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (25.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 71.9ms | Allocations: 5033)
  Rendered layouts/_header.html.erb (Duration: 2.8ms | Allocations: 1128)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 36.9ms | Allocations: 4572)
  Rendered layout layouts/application.html.erb (Duration: 118.8ms | Allocations: 14541)
Completed 200 OK in 125ms (Views: 44.7ms | ActiveRecord: 75.8ms | Allocations: 15035)


Started GET "/categories" for 127.0.0.1 at 2023-11-20 12:44:29 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (27.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (29.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 80.3ms | Allocations: 4495)
  Rendered layouts/_header.html.erb (Duration: 3.9ms | Allocations: 1127)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 39.0ms | Allocations: 4566)
  Rendered layout layouts/application.html.erb (Duration: 170.9ms | Allocations: 20653)
Completed 200 OK in 173ms (Views: 89.2ms | ActiveRecord: 82.8ms | Allocations: 20913)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 12:44:36 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (25.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (26.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (27.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (25.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 641)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 445)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 445)
  Rendered layouts/_comment.html.erb (Duration: 46.2ms | Allocations: 5037)
  Rendered layouts/_add_comment.html.erb (Duration: 1.0ms | Allocations: 534)
  Rendered categories/show.html.erb within layouts/application (Duration: 77.2ms | Allocations: 6337)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1088)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 38.6ms | Allocations: 4530)
  Rendered layout layouts/application.html.erb (Duration: 127.0ms | Allocations: 15712)
Completed 200 OK in 361ms (Views: 51.7ms | ActiveRecord: 233.3ms | Allocations: 19153)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 12:48:30 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (25.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (27.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (26.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (26.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 634)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 445)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 445)
  Rendered layouts/_comment.html.erb (Duration: 45.8ms | Allocations: 4994)
  Rendered layouts/_add_comment.html.erb (Duration: 1.9ms | Allocations: 527)
  Rendered categories/show.html.erb within layouts/application (Duration: 78.5ms | Allocations: 6060)
  Rendered layouts/_header.html.erb (Duration: 8.5ms | Allocations: 1093)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 38.4ms | Allocations: 4573)
  Rendered layout layouts/application.html.erb (Duration: 154.4ms | Allocations: 22160)
Completed 200 OK in 328ms (Views: 76.7ms | ActiveRecord: 234.9ms | Allocations: 24976)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 12:48:40 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (25.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (26.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (27.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 637)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 445)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 449)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 445)
  Rendered layouts/_comment.html.erb (Duration: 44.4ms | Allocations: 5007)
  Rendered layouts/_add_comment.html.erb (Duration: 1.1ms | Allocations: 530)
  Rendered categories/show.html.erb within layouts/application (Duration: 74.4ms | Allocations: 6076)
  Rendered layouts/_header.html.erb (Duration: 2.6ms | Allocations: 1102)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 39.7ms | Allocations: 4572)
  Rendered layout layouts/application.html.erb (Duration: 150.0ms | Allocations: 22213)
Completed 200 OK in 324ms (Views: 75.8ms | ActiveRecord: 232.6ms | Allocations: 25025)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 12:49:04 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (26.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (26.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (26.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (26.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (28.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 3.7ms | Allocations: 634)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 445)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 445)
  Rendered layouts/_comment.html.erb (Duration: 51.8ms | Allocations: 4997)
  Rendered layouts/_add_comment.html.erb (Duration: 1.8ms | Allocations: 527)
  Rendered categories/show.html.erb within layouts/application (Duration: 82.9ms | Allocations: 6063)
  Rendered layouts/_header.html.erb (Duration: 2.7ms | Allocations: 1088)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 44.1ms | Allocations: 4531)
  Rendered layout layouts/application.html.erb (Duration: 161.9ms | Allocations: 22127)
Completed 200 OK in 335ms (Views: 82.6ms | ActiveRecord: 237.1ms | Allocations: 24930)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 12:49:30 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (26.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (28.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (27.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 634)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 445)
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 445)
  Rendered layouts/_comment.html.erb (Duration: 51.2ms | Allocations: 4994)
  Rendered layouts/_add_comment.html.erb (Duration: 1.6ms | Allocations: 527)
  Rendered categories/show.html.erb within layouts/application (Duration: 81.9ms | Allocations: 6060)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1102)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (26.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 43.8ms | Allocations: 4572)
  Rendered layout layouts/application.html.erb (Duration: 165.5ms | Allocations: 22211)
Completed 200 OK in 339ms (Views: 88.1ms | ActiveRecord: 235.2ms | Allocations: 25037)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 12:50:05 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (25.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (27.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (27.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (26.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (26.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 637)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 445)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 445)
  Rendered layouts/_comment.html.erb (Duration: 48.1ms | Allocations: 5003)
  Rendered layouts/_add_comment.html.erb (Duration: 1.8ms | Allocations: 530)
  Rendered categories/show.html.erb within layouts/application (Duration: 79.7ms | Allocations: 6072)
  Rendered layouts/_header.html.erb (Duration: 2.3ms | Allocations: 1102)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 39.2ms | Allocations: 4568)
  Rendered layout layouts/application.html.erb (Duration: 152.3ms | Allocations: 22233)
Completed 200 OK in 327ms (Views: 76.5ms | ActiveRecord: 234.6ms | Allocations: 25055)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 12:50:15 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (25.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (26.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (26.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 6.3ms | Allocations: 634)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 445)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 445)
  Rendered layouts/_comment.html.erb (Duration: 57.6ms | Allocations: 4994)
  Rendered layouts/_add_comment.html.erb (Duration: 2.7ms | Allocations: 527)
  Rendered categories/show.html.erb within layouts/application (Duration: 91.2ms | Allocations: 6060)
  Rendered layouts/_header.html.erb (Duration: 2.2ms | Allocations: 1088)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 40.7ms | Allocations: 4530)
  Rendered layout layouts/application.html.erb (Duration: 162.8ms | Allocations: 22132)
Completed 200 OK in 333ms (Views: 87.1ms | ActiveRecord: 230.3ms | Allocations: 24940)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 12:50:28 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (26.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (27.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (27.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (26.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.6ms | Allocations: 641)
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 445)
  Rendered layouts/_reaction.html.erb (Duration: 2.6ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 445)
  Rendered layouts/_comment.html.erb (Duration: 54.1ms | Allocations: 5016)
  Rendered layouts/_add_comment.html.erb (Duration: 1.8ms | Allocations: 534)
  Rendered categories/show.html.erb within layouts/application (Duration: 84.6ms | Allocations: 6089)
  Rendered layouts/_header.html.erb (Duration: 3.0ms | Allocations: 1102)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (26.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 40.9ms | Allocations: 4572)
  Rendered layout layouts/application.html.erb (Duration: 162.2ms | Allocations: 22273)
Completed 200 OK in 338ms (Views: 86.5ms | ActiveRecord: 237.5ms | Allocations: 25085)


Started GET "/users/mis_restaurantes" for 127.0.0.1 at 2023-11-20 12:50:49 +0100
Processing by UsersController#mis_restaurantes as HTML
  [1m[36mUser Load (25.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:77:in `mis_restaurantes'
  Rendering layout layouts/application.html.erb
  Rendering users/mis_restaurantes.html.erb within layouts/application
  [1m[36mRestaurant Load (26.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/views/users/mis_restaurantes.html.erb:8
  Rendered users/mis_restaurantes.html.erb within layouts/application (Duration: 35.4ms | Allocations: 1842)
  Rendered layouts/_header.html.erb (Duration: 4.3ms | Allocations: 1126)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 23.5ms | Allocations: 4448)
  Rendered layout layouts/application.html.erb (Duration: 116.6ms | Allocations: 17903)
Completed 200 OK in 151ms (Views: 93.3ms | ActiveRecord: 52.4ms | Allocations: 19043)


Started GET "/users/mis_restaurantes" for 127.0.0.1 at 2023-11-20 12:50:50 +0100
Processing by UsersController#mis_restaurantes as HTML
  [1m[36mUser Load (28.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:77:in `mis_restaurantes'
  Rendering layout layouts/application.html.erb
  Rendering users/mis_restaurantes.html.erb within layouts/application
  [1m[36mRestaurant Load (26.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/views/users/mis_restaurantes.html.erb:8
  Rendered users/mis_restaurantes.html.erb within layouts/application (Duration: 35.0ms | Allocations: 1495)
  Rendered layouts/_header.html.erb (Duration: 4.2ms | Allocations: 1114)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 20.8ms | Allocations: 4411)
  Rendered layout layouts/application.html.erb (Duration: 71.7ms | Allocations: 10837)
Completed 200 OK in 106ms (Views: 46.8ms | ActiveRecord: 55.2ms | Allocations: 11729)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 12:50:52 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (27.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (25.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (28.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (27.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (30.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (26.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.0ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (25.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 30.4ms | Allocations: 2192)
  [1m[36mDish Load (24.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (25.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (26.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (29.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 3.3ms | Allocations: 627)
  Rendered layouts/_reaction.html.erb (Duration: 9.6ms | Allocations: 447)
  Rendered layouts/_comment.html.erb (Duration: 47.4ms | Allocations: 2364)
  Rendered layouts/_add_comment.html.erb (Duration: 1.5ms | Allocations: 535)
  [1m[35m (29.0ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 4.8ms | Allocations: 1493)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 232.0ms | Allocations: 9492)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1102)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 63.3ms | Allocations: 4677)
  Rendered layout layouts/application.html.erb (Duration: 305.1ms | Allocations: 19084)
Completed 200 OK in 679ms (Views: 72.1ms | ActiveRecord: 577.4ms | Allocations: 24655)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 12:51:00 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (26.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (25.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (28.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (27.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (27.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (26.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (25.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 31.4ms | Allocations: 2191)
  [1m[36mDish Load (24.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (26.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (26.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (27.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 627)
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 445)
  Rendered layouts/_comment.html.erb (Duration: 35.2ms | Allocations: 2354)
  Rendered layouts/_add_comment.html.erb (Duration: 1.5ms | Allocations: 529)
  [1m[35m (26.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 4.9ms | Allocations: 1493)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 218.8ms | Allocations: 9469)
  Rendered layouts/_header.html.erb (Duration: 3.0ms | Allocations: 1102)
  [1m[36mUser Load (25.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (26.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 71.2ms | Allocations: 4678)
  Rendered layout layouts/application.html.erb (Duration: 303.4ms | Allocations: 19054)
Completed 200 OK in 677ms (Views: 69.6ms | ActiveRecord: 577.3ms | Allocations: 24620)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 12:51:58 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (26.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (25.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (25.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (29.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (29.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (28.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (29.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (27.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 33.0ms | Allocations: 2185)
  [1m[36mDish Load (26.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (25.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (26.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 620)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 445)
  Rendered layouts/_comment.html.erb (Duration: 34.5ms | Allocations: 2347)
  Rendered layouts/_add_comment.html.erb (Duration: 1.4ms | Allocations: 528)
  [1m[35m (25.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 7.3ms | Allocations: 1493)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 221.0ms | Allocations: 9452)
  Rendered layouts/_header.html.erb (Duration: 4.7ms | Allocations: 1088)
  [1m[36mUser Load (29.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 73.8ms | Allocations: 4635)
  Rendered layout layouts/application.html.erb (Duration: 359.3ms | Allocations: 25649)
Completed 200 OK in 740ms (Views: 124.4ms | ActiveRecord: 580.2ms | Allocations: 31193)


Started GET "/categories" for 127.0.0.1 at 2023-11-20 12:52:20 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (28.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (25.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 72.5ms | Allocations: 4524)
  Rendered layouts/_header.html.erb (Duration: 2.7ms | Allocations: 1128)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 40.7ms | Allocations: 4572)
  Rendered layout layouts/application.html.erb (Duration: 124.9ms | Allocations: 14020)
Completed 200 OK in 127ms (Views: 46.8ms | ActiveRecord: 79.4ms | Allocations: 14282)


Started GET "/categories/pizza" for 127.0.0.1 at 2023-11-20 12:52:22 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"pizza"}
  [1m[36mCategory Load (25.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "pizza"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='pizza' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='pizza' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='pizza' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "pizza"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='pizza' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (26.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "pizza"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 638)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 36.3ms | Allocations: 3515)
  Rendered layouts/_add_comment.html.erb (Duration: 0.8ms | Allocations: 534)
  Rendered categories/show.html.erb within layouts/application (Duration: 64.8ms | Allocations: 4588)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1102)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 36.9ms | Allocations: 4569)
  Rendered layout layouts/application.html.erb (Duration: 110.2ms | Allocations: 14047)
Completed 200 OK in 276ms (Views: 34.2ms | ActiveRecord: 230.4ms | Allocations: 16795)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-20 12:52:25 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (56.9ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (27.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (26.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (27.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (28.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (28.9ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 118.9ms | Allocations: 10562)
  Rendered layouts/_header.html.erb (Duration: 5.1ms | Allocations: 1089)
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (27.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 76.7ms | Allocations: 4655)
  Rendered layout layouts/application.html.erb (Duration: 213.3ms | Allocations: 20278)
Completed 200 OK in 394ms (Views: 78.4ms | ActiveRecord: 299.0ms | Allocations: 22772)


Started GET "/restaurants/1" for 127.0.0.1 at 2023-11-20 12:52:30 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (27.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (25.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (25.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (27.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (27.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (26.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 34.4ms | Allocations: 3260)
  [1m[36mDish Load (25.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (25.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (28.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (26.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (29.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (26.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (26.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 623)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 79.6ms | Allocations: 10031)
  Rendered layouts/_add_comment.html.erb (Duration: 1.1ms | Allocations: 528)
  [1m[35m (25.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 292.1ms | Allocations: 17213)
  Rendered layouts/_header.html.erb (Duration: 2.2ms | Allocations: 1103)
  [1m[36mUser Load (27.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 67.0ms | Allocations: 4677)
  Rendered layout layouts/application.html.erb (Duration: 371.9ms | Allocations: 26733)
Completed 200 OK in 743ms (Views: 80.5ms | ActiveRecord: 632.8ms | Allocations: 32385)


Started GET "/search?search=Taglietella" for 127.0.0.1 at 2023-11-20 12:52:48 +0100
Processing by RestaurantsController#search as HTML
  Parameters: {"search"=>"Taglietella"}
  [1m[36mRestaurant Load (26.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE (lower(nombre) LIKE '%taglietella%')[0m
  â†³ app/controllers/restaurants_controller.rb:82:in `search'
Redirected to 
Completed 500 Internal Server Error in 30ms (ActiveRecord: 26.5ms | Allocations: 1059)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionController::ActionControllerError (Cannot redirect to nil!):
  
app/controllers/restaurants_controller.rb:82:in `search'
Started GET "/" for 127.0.0.1 at 2023-11-20 15:07:14 +0100
  [1m[36mActiveRecord::SchemaMigration Load (24.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (25.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (23.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (22.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (22.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (22.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (23.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (23.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 1298.8ms | Allocations: 132199)
  Rendered layouts/_header.html.erb (Duration: 6.8ms | Allocations: 1394)
  [1m[36mUser Load (52.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 280.6ms | Allocations: 17695)
  Rendered layout layouts/application.html.erb (Duration: 1662.1ms | Allocations: 171997)
Completed 200 OK in 2245ms (Views: 1459.0ms | ActiveRecord: 503.5ms | Allocations: 214051)


Started GET "/" for 127.0.0.1 at 2023-11-20 15:08:05 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (54.4ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (23.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (22.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (23.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (23.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (22.8ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 103.5ms | Allocations: 10531)
  Rendered layouts/_header.html.erb (Duration: 3.7ms | Allocations: 1089)
  [1m[36mUser Load (24.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 66.4ms | Allocations: 4635)
  Rendered layout layouts/application.html.erb (Duration: 188.4ms | Allocations: 20199)
Completed 200 OK in 355ms (Views: 71.6ms | ActiveRecord: 267.7ms | Allocations: 22700)


Started GET "/" for 127.0.0.1 at 2023-11-20 15:08:07 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (47.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (23.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (23.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (23.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (22.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (23.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 99.6ms | Allocations: 10522)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1089)
  [1m[36mUser Load (22.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 57.0ms | Allocations: 4635)
  Rendered layout layouts/application.html.erb (Duration: 167.9ms | Allocations: 20209)
Completed 200 OK in 322ms (Views: 50.4ms | ActiveRecord: 258.5ms | Allocations: 22739)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-20 15:08:14 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (79.5ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (25.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (23.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (23.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (22.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (23.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 114.8ms | Allocations: 10528)
  Rendered layouts/_header.html.erb (Duration: 3.8ms | Allocations: 1089)
  [1m[36mUser Load (23.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 66.8ms | Allocations: 4635)
  Rendered layout layouts/application.html.erb (Duration: 203.3ms | Allocations: 20233)
Completed 200 OK in 392ms (Views: 84.3ms | ActiveRecord: 294.8ms | Allocations: 22760)


Started GET "/categories" for 127.0.0.1 at 2023-11-20 15:08:15 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (22.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 67.5ms | Allocations: 4910)
  Rendered layouts/_header.html.erb (Duration: 3.6ms | Allocations: 1118)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 34.8ms | Allocations: 4542)
  Rendered layout layouts/application.html.erb (Duration: 114.2ms | Allocations: 14332)
Completed 200 OK in 117ms (Views: 47.0ms | ActiveRecord: 68.7ms | Allocations: 14826)


Started GET "/users/mis_restaurantes" for 127.0.0.1 at 2023-11-20 15:08:17 +0100
Processing by UsersController#mis_restaurantes as HTML
  [1m[36mUser Load (30.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:77:in `mis_restaurantes'
  Rendering layout layouts/application.html.erb
  Rendering users/mis_restaurantes.html.erb within layouts/application
  [1m[36mRestaurant Load (42.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/views/users/mis_restaurantes.html.erb:8
  Rendered users/mis_restaurantes.html.erb within layouts/application (Duration: 50.1ms | Allocations: 1840)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1117)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 26.0ms | Allocations: 4412)
  Rendered layout layouts/application.html.erb (Duration: 88.1ms | Allocations: 11146)
Completed 200 OK in 126ms (Views: 49.0ms | ActiveRecord: 72.8ms | Allocations: 12277)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:08:19 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (33.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (26.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (29.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (30.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (31.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (33.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (34.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (24.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (25.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 34.8ms | Allocations: 2793)
  [1m[36mDish Load (23.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (35.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (291.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (118.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (32.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 3.4ms | Allocations: 883)
  Rendered layouts/_reaction.html.erb (Duration: 2.7ms | Allocations: 446)
  Rendered layouts/_comment.html.erb (Duration: 158.8ms | Allocations: 5444)
  Rendered layouts/_add_comment.html.erb (Duration: 2.7ms | Allocations: 685)
  [1m[35m (26.2ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 4.2ms | Allocations: 1538)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 875.7ms | Allocations: 23119)
  Rendered layouts/_header.html.erb (Duration: 3.9ms | Allocations: 1089)
  [1m[36mUser Load (26.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 76.0ms | Allocations: 4651)
  Rendered layout layouts/application.html.erb (Duration: 974.3ms | Allocations: 32620)
Completed 200 OK in 1647ms (Views: 321.9ms | ActiveRecord: 1125.7ms | Allocations: 55299)


Started GET "/reviews/new?review_to=3&review_type=Restaurant" for 127.0.0.1 at 2023-11-20 15:08:26 +0100
Processing by ReviewsController#new as HTML
  Parameters: {"review_to"=>"3", "review_type"=>"Restaurant"}
  Rendering layout layouts/application.html.erb
  Rendering reviews/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 12.0ms | Allocations: 2773)
  Rendered reviews/new.html.erb within layouts/application (Duration: 14.4ms | Allocations: 3012)
  Rendered layouts/_header.html.erb (Duration: 3.3ms | Allocations: 1088)
  [1m[36mUser Load (23.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 58.8ms | Allocations: 4643)
  Rendered layout layouts/application.html.erb (Duration: 84.5ms | Allocations: 12502)
Completed 200 OK in 88ms (Views: 39.7ms | ActiveRecord: 46.2ms | Allocations: 13246)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-20 15:10:14 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (22.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (23.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (47.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (24.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-20 14:10:14.501366')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-20 14:10:14.528747')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (22.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-20 14:10:14.554998')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (22.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (23.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (22.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-20 14:10:14.630786')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (22.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (22.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-20 14:10:14.680902')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (22.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-20 14:10:14.705500')[0m  [["reviewable_id", 16], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (26.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 17.9ms | Allocations: 3433)
  Rendered layouts/_header.html.erb (Duration: 2.7ms | Allocations: 1093)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 13.9ms | Allocations: 4427)
  Rendered layout layouts/application.html.erb (Duration: 44.0ms | Allocations: 12702)
Completed 200 OK in 541ms (Views: 45.5ms | ActiveRecord: 421.8ms | Allocations: 31376)


Started GET "/logout" for 127.0.0.1 at 2023-11-20 15:10:23 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.0ms | Allocations: 502)


Started GET "/" for 127.0.0.1 at 2023-11-20 15:10:23 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (55.4ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (23.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (23.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (23.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (23.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (22.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (23.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (22.9ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 88.1ms | Allocations: 10540)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1093)
  Rendered layouts/_sidenav.html.erb (Duration: 4.9ms | Allocations: 2671)
  Rendered layout layouts/application.html.erb (Duration: 104.2ms | Allocations: 18271)
Completed 200 OK in 265ms (Views: 36.6ms | ActiveRecord: 217.9ms | Allocations: 20767)


Started GET "/login" for 127.0.0.1 at 2023-11-20 15:10:28 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 7.9ms | Allocations: 3007)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1089)
  Rendered layouts/_sidenav.html.erb (Duration: 6.9ms | Allocations: 2659)
  Rendered layout layouts/application.html.erb (Duration: 24.2ms | Allocations: 10518)
Completed 200 OK in 28ms (Views: 26.5ms | ActiveRecord: 0.0ms | Allocations: 10968)


Started POST "/login" for 127.0.0.1 at 2023-11-20 15:10:32 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"juan", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (23.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 4.7ms | Allocations: 2398)
  Rendered layouts/_header.html.erb (Duration: 2.4ms | Allocations: 1089)
  Rendered layouts/_sidenav.html.erb (Duration: 4.6ms | Allocations: 2660)
  Rendered layout layouts/application.html.erb (Duration: 18.5ms | Allocations: 9946)
Completed 200 OK in 321ms (Views: 19.3ms | ActiveRecord: 23.1ms | Allocations: 11000)


Started POST "/login" for 127.0.0.1 at 2023-11-20 15:10:43 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"juan", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (25.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 286ms (ActiveRecord: 25.9ms | Allocations: 860)


Started GET "/" for 127.0.0.1 at 2023-11-20 15:10:43 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (48.4ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (23.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (22.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (22.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (23.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (23.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (22.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (32.3ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 104.5ms | Allocations: 10524)
  Rendered layouts/_header.html.erb (Duration: 3.3ms | Allocations: 1089)
  [1m[36mUser Load (22.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 57.3ms | Allocations: 4103)
  Rendered layout layouts/application.html.erb (Duration: 177.4ms | Allocations: 19706)
Completed 200 OK in 330ms (Views: 54.9ms | ActiveRecord: 263.7ms | Allocations: 22205)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:10:46 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (23.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (23.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (22.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (22.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (22.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (23.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.0ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (22.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.6ms | Allocations: 2138)
  [1m[36mDish Load (23.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (22.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (23.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (23.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (22.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (22.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 622)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 54.6ms | Allocations: 3226)
  Rendered layouts/_add_comment.html.erb (Duration: 1.0ms | Allocations: 534)
  [1m[35m (22.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 35.3ms | Allocations: 2185)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 245.1ms | Allocations: 10900)
  Rendered layouts/_header.html.erb (Duration: 16.1ms | Allocations: 1095)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (26.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 48.8ms | Allocations: 4008)
  Rendered layout layouts/application.html.erb (Duration: 327.3ms | Allocations: 19760)
Completed 200 OK in 662ms (Views: 94.3ms | ActiveRecord: 542.7ms | Allocations: 25351)


Started GET "/reviews/new?review_to=3&review_type=Restaurant" for 127.0.0.1 at 2023-11-20 15:10:57 +0100
Processing by ReviewsController#new as HTML
  Parameters: {"review_to"=>"3", "review_type"=>"Restaurant"}
  Rendering layout layouts/application.html.erb
  Rendering reviews/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 7.5ms | Allocations: 1653)
  Rendered reviews/new.html.erb within layouts/application (Duration: 8.2ms | Allocations: 1723)
  Rendered layouts/_header.html.erb (Duration: 8.6ms | Allocations: 1092)
  [1m[36mUser Load (31.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (27.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 105.5ms | Allocations: 4114)
  Rendered layout layouts/application.html.erb (Duration: 141.7ms | Allocations: 10698)
Completed 200 OK in 146ms (Views: 83.8ms | ActiveRecord: 59.6ms | Allocations: 11185)


Started POST "/reviews" for 127.0.0.1 at 2023-11-20 15:11:04 +0100
Processing by ReviewsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "review"=>{"reviewable_id"=>"3", "reviewable_type"=>"Restaurant", "autor"=>"juan", "contenido"=>"Espectacular"}, "button"=>""}
  [1m[36mRestaurant Load (33.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:34:in `get_original_reviewed'
  [1m[36mTRANSACTION (36.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/reviews_controller.rb:24:in `create'
  [1m[36mRestaurant Load (27.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:24:in `create'
  [1m[36mReview Create (24.5ms)[0m  [1m[32mINSERT INTO "reviews" ("autor", "reviewable_type", "reviewable_id", "contenido", "ruta_img", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["autor", "juan"], ["reviewable_type", "Restaurant"], ["reviewable_id", 3], ["contenido", "Espectacular"], ["ruta_img", nil], ["created_at", "2023-11-20 14:11:04.419685"], ["updated_at", "2023-11-20 14:11:04.419889"]]
  â†³ app/controllers/reviews_controller.rb:24:in `create'
  [1m[36mTRANSACTION (30.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/reviews_controller.rb:24:in `create'
Redirected to http://localhost:3000/restaurants/3
Completed 302 Found in 170ms (ActiveRecord: 151.7ms | Allocations: 5222)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:11:04 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (23.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (23.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (23.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (22.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (23.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (23.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (22.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (22.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 27.4ms | Allocations: 2142)
  [1m[36mDish Load (22.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (23.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (23.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (26.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (22.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 618)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 2.6ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 76.4ms | Allocations: 4713)
  Rendered layouts/_add_comment.html.erb (Duration: 2.1ms | Allocations: 530)
  [1m[35m (22.1ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (24.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 2.2ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 34.8ms | Allocations: 2185)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 276.2ms | Allocations: 12379)
  Rendered layouts/_header.html.erb (Duration: 3.1ms | Allocations: 1091)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 45.6ms | Allocations: 4008)
  Rendered layout layouts/application.html.erb (Duration: 337.1ms | Allocations: 21242)
Completed 200 OK in 671ms (Views: 103.7ms | ActiveRecord: 541.6ms | Allocations: 26907)


Started GET "/reviews/new?review_to=3&review_type=Restaurant" for 127.0.0.1 at 2023-11-20 15:11:42 +0100
Processing by ReviewsController#new as HTML
  Parameters: {"review_to"=>"3", "review_type"=>"Restaurant"}
  Rendering layout layouts/application.html.erb
  Rendering reviews/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 3.7ms | Allocations: 1641)
  Rendered reviews/new.html.erb within layouts/application (Duration: 4.2ms | Allocations: 1711)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1088)
  [1m[36mUser Load (24.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 61.8ms | Allocations: 4105)
  Rendered layout layouts/application.html.erb (Duration: 81.0ms | Allocations: 10660)
Completed 200 OK in 83ms (Views: 33.5ms | ActiveRecord: 48.4ms | Allocations: 11156)


Started GET "/reviews/new?review_to=3&review_type=Restaurant" for 127.0.0.1 at 2023-11-20 15:13:57 +0100
Processing by ReviewsController#new as HTML
  Parameters: {"review_to"=>"3", "review_type"=>"Restaurant"}
  Rendering layout layouts/application.html.erb
  Rendering reviews/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 8.6ms | Allocations: 1641)
  Rendered reviews/new.html.erb within layouts/application (Duration: 9.3ms | Allocations: 1711)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1088)
  [1m[36mUser Load (22.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 64.6ms | Allocations: 4104)
  Rendered layout layouts/application.html.erb (Duration: 196.1ms | Allocations: 17649)
Completed 200 OK in 199ms (Views: 150.3ms | ActiveRecord: 46.9ms | Allocations: 18133)


Started GET "/reviews/new?review_to=3&review_type=Restaurant" for 127.0.0.1 at 2023-11-20 15:14:11 +0100
Processing by ReviewsController#new as HTML
  Parameters: {"review_to"=>"3", "review_type"=>"Restaurant"}
  Rendering layout layouts/application.html.erb
  Rendering reviews/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 5.2ms | Allocations: 1641)
  Rendered reviews/new.html.erb within layouts/application (Duration: 5.8ms | Allocations: 1711)
  Rendered layouts/_header.html.erb (Duration: 3.0ms | Allocations: 1088)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (28.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 88.7ms | Allocations: 4109)
  Rendered layout layouts/application.html.erb (Duration: 167.9ms | Allocations: 17366)
Completed 200 OK in 171ms (Views: 115.5ms | ActiveRecord: 53.6ms | Allocations: 17839)


Started GET "/categories" for 127.0.0.1 at 2023-11-20 15:14:41 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (23.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (22.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 72.7ms | Allocations: 4529)
  Rendered layouts/_header.html.erb (Duration: 2.2ms | Allocations: 1118)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 38.4ms | Allocations: 4008)
  Rendered layout layouts/application.html.erb (Duration: 122.7ms | Allocations: 13404)
Completed 200 OK in 125ms (Views: 55.8ms | ActiveRecord: 68.4ms | Allocations: 13666)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 15:14:42 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (22.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (23.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (23.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (23.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.6ms | Allocations: 636)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 48.5ms | Allocations: 5583)
  Rendered layouts/_add_comment.html.erb (Duration: 1.9ms | Allocations: 533)
  Rendered categories/show.html.erb within layouts/application (Duration: 81.1ms | Allocations: 6886)
  Rendered layouts/_header.html.erb (Duration: 4.0ms | Allocations: 1092)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (26.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 46.3ms | Allocations: 4006)
  Rendered layout layouts/application.html.erb (Duration: 143.0ms | Allocations: 15748)
Completed 200 OK in 355ms (Views: 72.4ms | ActiveRecord: 214.5ms | Allocations: 19178)


Started GET "/" for 127.0.0.1 at 2023-11-20 15:15:22 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (46.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (23.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (23.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (23.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (22.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (22.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 108.5ms | Allocations: 10538)
  Rendered layouts/_header.html.erb (Duration: 2.7ms | Allocations: 1090)
  [1m[36mUser Load (23.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 68.0ms | Allocations: 4103)
  Rendered layout layouts/application.html.erb (Duration: 200.0ms | Allocations: 19703)
Completed 200 OK in 358ms (Views: 84.3ms | ActiveRecord: 257.1ms | Allocations: 22196)


Started GET "/categories" for 127.0.0.1 at 2023-11-20 15:17:31 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (24.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 73.5ms | Allocations: 4519)
  Rendered layouts/_header.html.erb (Duration: 3.5ms | Allocations: 1114)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (30.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 56.0ms | Allocations: 3998)
  Rendered layout layouts/application.html.erb (Duration: 147.5ms | Allocations: 13367)
Completed 200 OK in 151ms (Views: 71.0ms | ActiveRecord: 78.5ms | Allocations: 13628)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 15:17:34 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (23.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (23.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (30.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (23.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 630)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 40.2ms | Allocations: 5565)
  Rendered layouts/_add_comment.html.erb (Duration: 1.0ms | Allocations: 527)
  Rendered categories/show.html.erb within layouts/application (Duration: 70.5ms | Allocations: 6631)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1088)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 35.4ms | Allocations: 3998)
  Rendered layout layouts/application.html.erb (Duration: 118.0ms | Allocations: 15474)
Completed 200 OK in 294ms (Views: 49.9ms | ActiveRecord: 216.6ms | Allocations: 18291)


Started GET "/" for 127.0.0.1 at 2023-11-20 15:20:10 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (22.9ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (23.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (22.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (22.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (22.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (22.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (23.9ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 139.9ms | Allocations: 12983)
  Rendered layouts/_header.html.erb (Duration: 3.8ms | Allocations: 1354)
  [1m[36mUser Load (22.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 141.8ms | Allocations: 12898)
  Rendered layout layouts/application.html.erb (Duration: 394.4ms | Allocations: 53096)
Completed 200 OK in 745ms (Views: 216.4ms | ActiveRecord: 441.0ms | Allocations: 69001)


Started GET "/users/juan" for 127.0.0.1 at 2023-11-20 15:20:14 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"juan"}
  [1m[36mUser Load (23.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (379.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (22.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (21.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (22.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-20 14:20:15.390271')[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (22.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-20 14:20:15.414937')[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (22.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-20 14:20:15.439379')[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (22.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 11.3ms | Allocations: 3136)
  Rendered layouts/_header.html.erb (Duration: 2.3ms | Allocations: 1089)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 33.4ms | Allocations: 4002)
  Rendered layout layouts/application.html.erb (Duration: 54.3ms | Allocations: 11966)
Completed 200 OK in 738ms (Views: 33.7ms | ActiveRecord: 627.6ms | Allocations: 23142)


Started GET "/posts/new" for 127.0.0.1 at 2023-11-20 15:22:47 +0100
Processing by PostsController#new as HTML
  [1m[35m (22.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre FROM restaurants, users, restaurants_users as ru WHERE users.nombre='juan' AND users.nombre=ru.user_id AND ru.restaurant_id=restaurants.id [0m
  â†³ app/controllers/posts_controller.rb:7:in `new'
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 13.2ms | Allocations: 2386)
  Rendered posts/new.html.erb within layouts/application (Duration: 15.0ms | Allocations: 2652)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1088)
  [1m[36mUser Load (22.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (21.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 55.2ms | Allocations: 4104)
  Rendered layout layouts/application.html.erb (Duration: 100.4ms | Allocations: 18336)
Completed 200 OK in 158ms (Views: 57.8ms | ActiveRecord: 91.6ms | Allocations: 22125)


Started GET "/posts/new" for 127.0.0.1 at 2023-11-20 15:22:48 +0100
Processing by PostsController#new as HTML
  [1m[35m (52.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre FROM restaurants, users, restaurants_users as ru WHERE users.nombre='juan' AND users.nombre=ru.user_id AND ru.restaurant_id=restaurants.id [0m
  â†³ app/controllers/posts_controller.rb:7:in `new'
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 16.2ms | Allocations: 1602)
  Rendered posts/new.html.erb within layouts/application (Duration: 17.1ms | Allocations: 1694)
  Rendered layouts/_header.html.erb (Duration: 4.2ms | Allocations: 1092)
  [1m[36mUser Load (22.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 60.1ms | Allocations: 4113)
  Rendered layout layouts/application.html.erb (Duration: 93.2ms | Allocations: 10729)
Completed 200 OK in 150ms (Views: 50.1ms | ActiveRecord: 96.4ms | Allocations: 11420)


Started POST "/posts" for 127.0.0.1 at 2023-11-20 15:23:01 +0100
Processing by PostsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"asOwnerOf"=>"", "contenido"=>"me gusta el pito gordo"}, "button"=>""}
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mUser Load (23.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/controllers/posts_controller.rb:17:in `create'
  [1m[36mTRANSACTION (23.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/posts_controller.rb:23:in `create'
  [1m[36mPost Create (48.3ms)[0m  [1m[32mINSERT INTO "posts" ("categoria", "autor", "contenido", "ruta_img", "created_at", "updated_at", "restaurant_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["categoria", "burger"], ["autor", "juan"], ["contenido", "me gusta el pito gordo"], ["ruta_img", nil], ["created_at", "2023-11-20 14:23:01.114303"], ["updated_at", "2023-11-20 14:23:01.114306"], ["restaurant_id", nil]]
  â†³ app/controllers/posts_controller.rb:23:in `create'
  [1m[36mTRANSACTION (23.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/posts_controller.rb:23:in `create'
Redirected to http://localhost:3000/categories/burger
Completed 302 Found in 107ms (ActiveRecord: 117.6ms | Allocations: 3058)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 15:23:01 +0100
Processing by CategoriesController#show as TURBO_STREAM
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (24.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (22.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (22.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (22.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (23.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (22.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (22.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (22.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.8ms | Allocations: 890)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 442)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 3.6ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 62.0ms | Allocations: 7921)
  Rendered layouts/_add_comment.html.erb (Duration: 4.3ms | Allocations: 679)
  Rendered categories/show.html.erb within layouts/application (Duration: 95.0ms | Allocations: 9540)
  Rendered layouts/_header.html.erb (Duration: 3.1ms | Allocations: 1092)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 38.0ms | Allocations: 4008)
  Rendered layout layouts/application.html.erb (Duration: 147.3ms | Allocations: 18420)
Completed 200 OK in 308ms (Views: 79.9ms | ActiveRecord: 205.9ms | Allocations: 22447)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 15:23:40 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (28.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (23.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (22.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (23.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (22.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 3.3ms | Allocations: 630)
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 52.5ms | Allocations: 7058)
  Rendered layouts/_add_comment.html.erb (Duration: 2.2ms | Allocations: 527)
  Rendered categories/show.html.erb within layouts/application (Duration: 83.0ms | Allocations: 8124)
  Rendered layouts/_header.html.erb (Duration: 2.4ms | Allocations: 1088)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 42.9ms | Allocations: 3998)
  Rendered layout layouts/application.html.erb (Duration: 181.6ms | Allocations: 23687)
Completed 200 OK in 344ms (Views: 113.9ms | ActiveRecord: 213.4ms | Allocations: 26585)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 15:24:17 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (22.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (26.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (22.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (23.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.1ms | Allocations: 630)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 8.3ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 444)
  Rendered layouts/_comment.html.erb (Duration: 62.6ms | Allocations: 7059)
  Rendered layouts/_add_comment.html.erb (Duration: 1.6ms | Allocations: 533)
  Rendered categories/show.html.erb within layouts/application (Duration: 92.4ms | Allocations: 8131)
  Rendered layouts/_header.html.erb (Duration: 3.4ms | Allocations: 1092)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 40.2ms | Allocations: 4008)
  Rendered layout layouts/application.html.erb (Duration: 191.8ms | Allocations: 23718)
Completed 200 OK in 356ms (Views: 122.1ms | ActiveRecord: 215.4ms | Allocations: 26616)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 15:24:34 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (22.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (23.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (22.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (22.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (22.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 4.0ms | Allocations: 632)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 56.6ms | Allocations: 7064)
  Rendered layouts/_add_comment.html.erb (Duration: 1.2ms | Allocations: 533)
  Rendered categories/show.html.erb within layouts/application (Duration: 86.9ms | Allocations: 8136)
  Rendered layouts/_header.html.erb (Duration: 4.1ms | Allocations: 1092)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 37.8ms | Allocations: 4008)
  Rendered layout layouts/application.html.erb (Duration: 164.8ms | Allocations: 23717)
Completed 200 OK in 322ms (Views: 97.4ms | ActiveRecord: 205.7ms | Allocations: 26630)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 15:24:58 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (24.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (26.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (28.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (23.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.1ms | Allocations: 630)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 441)
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 61.4ms | Allocations: 7059)
  Rendered layouts/_add_comment.html.erb (Duration: 2.5ms | Allocations: 527)
  Rendered categories/show.html.erb within layouts/application (Duration: 92.1ms | Allocations: 8125)
  Rendered layouts/_header.html.erb (Duration: 4.2ms | Allocations: 1088)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (28.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 47.7ms | Allocations: 3998)
  Rendered layout layouts/application.html.erb (Duration: 194.2ms | Allocations: 23696)
Completed 200 OK in 374ms (Views: 119.0ms | ActiveRecord: 232.6ms | Allocations: 26603)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 15:25:26 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (24.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (23.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (23.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (23.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (23.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 4.7ms | Allocations: 636)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 441)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 63.6ms | Allocations: 7078)
  Rendered layouts/_add_comment.html.erb (Duration: 2.7ms | Allocations: 533)
  Rendered categories/show.html.erb within layouts/application (Duration: 97.3ms | Allocations: 8150)
  Rendered layouts/_header.html.erb (Duration: 4.8ms | Allocations: 1092)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 39.3ms | Allocations: 4008)
  Rendered layout layouts/application.html.erb (Duration: 154.9ms | Allocations: 17020)
Completed 200 OK in 323ms (Views: 87.9ms | ActiveRecord: 211.9ms | Allocations: 19936)


Started DELETE "/posts/46" for 127.0.0.1 at 2023-11-20 15:25:29 +0100
Processing by PostsController#destroy as TURBO_STREAM
  Parameters: {"id"=>"46"}
  [1m[36mPost Load (36.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  â†³ app/controllers/posts_controller.rb:31:in `destroy'
  [1m[36mTRANSACTION (29.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/posts_controller.rb:32:in `destroy'
  [1m[36mReaction Delete All (33.7ms)[0m  [1m[31mDELETE FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2[0m  [["reactionable_id", 46], ["reactionable_type", "Post"]]
  â†³ app/controllers/posts_controller.rb:32:in `destroy'
  [1m[36mResponse Load (26.6ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2[0m  [["respondable_id", 46], ["respondable_type", "Post"]]
  â†³ app/controllers/posts_controller.rb:32:in `destroy'
  [1m[36mPost Destroy (30.7ms)[0m  [1m[31mDELETE FROM "posts" WHERE "posts"."id" = $1[0m  [["id", 46]]
  â†³ app/controllers/posts_controller.rb:32:in `destroy'
  [1m[36mTRANSACTION (36.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/posts_controller.rb:32:in `destroy'
Redirected to http://localhost:3000/categories/burger
Completed 302 Found in 424ms (ActiveRecord: 325.9ms | Allocations: 17727)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 15:25:30 +0100
Processing by CategoriesController#show as TURBO_STREAM
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (30.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (53.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (34.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (26.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (30.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (23.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 636)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 43.9ms | Allocations: 5583)
  Rendered layouts/_add_comment.html.erb (Duration: 2.2ms | Allocations: 533)
  Rendered categories/show.html.erb within layouts/application (Duration: 74.5ms | Allocations: 6657)
  Rendered layouts/_header.html.erb (Duration: 4.6ms | Allocations: 1092)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 40.4ms | Allocations: 4011)
  Rendered layout layouts/application.html.erb (Duration: 131.6ms | Allocations: 15527)
Completed 200 OK in 349ms (Views: 61.9ms | ActiveRecord: 271.9ms | Allocations: 18358)


Started GET "/" for 127.0.0.1 at 2023-11-20 15:25:33 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (46.4ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (22.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (22.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (22.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (23.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (23.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (34.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 148.3ms | Allocations: 10558)
  Rendered layouts/_header.html.erb (Duration: 4.4ms | Allocations: 1089)
  [1m[36mUser Load (23.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 62.9ms | Allocations: 4103)
  Rendered layout layouts/application.html.erb (Duration: 233.0ms | Allocations: 19726)
Completed 200 OK in 386ms (Views: 106.1ms | ActiveRecord: 264.9ms | Allocations: 22223)


Started GET "/categories" for 127.0.0.1 at 2023-11-20 15:25:41 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (22.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (22.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 61.5ms | Allocations: 4888)
  Rendered layouts/_header.html.erb (Duration: 3.5ms | Allocations: 1118)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 37.0ms | Allocations: 4008)
  Rendered layout layouts/application.html.erb (Duration: 113.6ms | Allocations: 13764)
Completed 200 OK in 118ms (Views: 45.7ms | ActiveRecord: 70.1ms | Allocations: 14088)


Started GET "/users/juan" for 127.0.0.1 at 2023-11-20 15:25:43 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"juan"}
  [1m[36mUser Load (39.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (24.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (24.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (23.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-20 14:25:44.032083')[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-20 14:25:44.058603')[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-20 14:25:44.090935')[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (34.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 8.7ms | Allocations: 2282)
  Rendered layouts/_header.html.erb (Duration: 5.9ms | Allocations: 1093)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (26.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 48.4ms | Allocations: 4008)
  Rendered layout layouts/application.html.erb (Duration: 77.1ms | Allocations: 11143)
Completed 200 OK in 337ms (Views: 52.0ms | ActiveRecord: 249.5ms | Allocations: 15521)


Started GET "/logout" for 127.0.0.1 at 2023-11-20 15:25:45 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.0ms | Allocations: 425)


Started GET "/" for 127.0.0.1 at 2023-11-20 15:25:45 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (46.8ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (22.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (23.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (22.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (23.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (22.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (22.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (22.8ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 103.0ms | Allocations: 10537)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1089)
  Rendered layouts/_sidenav.html.erb (Duration: 8.7ms | Allocations: 2662)
  Rendered layout layouts/application.html.erb (Duration: 123.7ms | Allocations: 18275)
Completed 200 OK in 275ms (Views: 57.0ms | ActiveRecord: 205.5ms | Allocations: 20770)


Started GET "/login" for 127.0.0.1 at 2023-11-20 15:25:47 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 12.0ms | Allocations: 2975)
  Rendered layouts/_header.html.erb (Duration: 3.5ms | Allocations: 1089)
  Rendered layouts/_sidenav.html.erb (Duration: 14.5ms | Allocations: 2659)
  Rendered layout layouts/application.html.erb (Duration: 42.7ms | Allocations: 10486)
Completed 200 OK in 49ms (Views: 46.8ms | ActiveRecord: 0.0ms | Allocations: 10935)


Started POST "/login" for 127.0.0.1 at 2023-11-20 15:25:51 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"gari", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (23.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 324ms (ActiveRecord: 23.3ms | Allocations: 881)


Started GET "/" for 127.0.0.1 at 2023-11-20 15:25:52 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (47.1ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (22.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (22.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (28.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (31.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (45.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (22.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 124.7ms | Allocations: 10531)
  Rendered layouts/_header.html.erb (Duration: 4.3ms | Allocations: 1095)
  [1m[36mUser Load (23.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 60.9ms | Allocations: 4114)
  Rendered layout layouts/application.html.erb (Duration: 199.5ms | Allocations: 19729)
Completed 200 OK in 358ms (Views: 55.5ms | ActiveRecord: 290.2ms | Allocations: 22225)


Started GET "/categories" for 127.0.0.1 at 2023-11-20 15:25:56 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (28.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (27.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 80.7ms | Allocations: 4576)
  Rendered layouts/_header.html.erb (Duration: 2.8ms | Allocations: 1114)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 42.8ms | Allocations: 3998)
  Rendered layout layouts/application.html.erb (Duration: 138.4ms | Allocations: 13427)
Completed 200 OK in 141ms (Views: 62.0ms | ActiveRecord: 77.9ms | Allocations: 13688)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 15:25:57 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (31.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (26.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (22.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (22.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (22.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (31.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (27.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 833)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 41.4ms | Allocations: 4806)
  Rendered layouts/_add_comment.html.erb (Duration: 1.0ms | Allocations: 533)
  Rendered categories/show.html.erb within layouts/application (Duration: 77.0ms | Allocations: 5948)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1092)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 34.8ms | Allocations: 4008)
  Rendered layout layouts/application.html.erb (Duration: 122.7ms | Allocations: 14815)
Completed 200 OK in 287ms (Views: 41.6ms | ActiveRecord: 230.2ms | Allocations: 17659)


Started GET "/posts/10/responses" for 127.0.0.1 at 2023-11-20 15:26:59 +0100
Processing by PostResponsesController#index as HTML
  Parameters: {"post_id"=>"10"}
  [1m[36mPost Load (71.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/post_responses_controller.rb:22:in `index'
  [1m[35m (32.1ms)[0m  [1m[34mSELECT responses.id, COUNT(reaccion) as react FROM responses LEFT JOIN reactions ON reactionable_id=responses.id AND reactionable_type='Response' AND reaccion='Like' AND respondable_id=10 AND respondable_type='Post' GROUP BY responses.id ORDER BY responses.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (40.3ms)[0m  [1m[34mSELECT responses.id, COUNT(reaccion) as react FROM responses LEFT JOIN reactions ON reactionable_id=responses.id AND reactionable_type='Response' AND reaccion='Dislike' AND respondable_id=10 AND respondable_type='Post' GROUP BY responses.id ORDER BY responses.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[36mResponse Load (26.6ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2 ORDER BY "responses"."id" ASC LIMIT $3[0m  [["respondable_id", 10], ["respondable_type", "Post"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:27:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT responses.id, reactions.id as reaction_id FROM responses LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=responses.id AND reactions.reactionable_type='Response' AND respondable_id=10 AND respondable_type='Post' GROUP BY responses.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[36mReaction Load (42.5ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."reaccion" = $3[0m  [["reactionable_id", 10], ["reactionable_type", "Post"], ["reaccion", "Like"]]
  â†³ app/controllers/post_responses_controller.rb:26:in `index'
  [1m[36mReaction Load (26.4ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."reaccion" = $3[0m  [["reactionable_id", 10], ["reactionable_type", "Post"], ["reaccion", "Dislike"]]
  â†³ app/controllers/post_responses_controller.rb:26:in `index'
  [1m[36mResponse Count (23.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2[0m  [["respondable_id", 10], ["respondable_type", "Post"]]
  â†³ app/controllers/post_responses_controller.rb:26:in `size'
  [1m[36mReaction Load (23.3ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."who" = $3 LIMIT $4[0m  [["reactionable_id", 10], ["reactionable_type", "Post"], ["who", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/post_responses_controller.rb:27:in `index'
  Rendering layout layouts/application.html.erb
  Rendering post_responses/index.html.erb within layouts/application
  [1m[36mUser Load (23.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 4.3ms | Allocations: 828)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 40.9ms | Allocations: 2466)
  [1m[36mResponse Load (22.8ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2 ORDER BY "responses"."id" ASC LIMIT $3[0m  [["respondable_id", 10], ["respondable_type", "Post"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 440)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 441)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 441)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 441)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 15.3ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 442)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 2.7ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 98.9ms | Allocations: 10813)
  Rendered layouts/_add_comment.html.erb (Duration: 3.8ms | Allocations: 534)
  Rendered post_responses/index.html.erb within layouts/application (Duration: 150.1ms | Allocations: 14242)
  Rendered layouts/_header.html.erb (Duration: 3.1ms | Allocations: 1093)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (26.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 49.2ms | Allocations: 4008)
  Rendered layout layouts/application.html.erb (Duration: 219.0ms | Allocations: 23129)
Completed 200 OK in 691ms (Views: 150.0ms | ActiveRecord: 382.4ms | Allocations: 38134)


Started GET "/posts/10/responses" for 127.0.0.1 at 2023-11-20 15:28:28 +0100
Processing by PostResponsesController#index as HTML
  Parameters: {"post_id"=>"10"}
  [1m[36mPost Load (24.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/post_responses_controller.rb:22:in `index'
  [1m[35m (26.5ms)[0m  [1m[34mSELECT responses.id, COUNT(reaccion) as react FROM responses LEFT JOIN reactions ON reactionable_id=responses.id AND reactionable_type='Response' AND reaccion='Like' AND respondable_id=10 AND respondable_type='Post' GROUP BY responses.id ORDER BY responses.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.5ms)[0m  [1m[34mSELECT responses.id, COUNT(reaccion) as react FROM responses LEFT JOIN reactions ON reactionable_id=responses.id AND reactionable_type='Response' AND reaccion='Dislike' AND respondable_id=10 AND respondable_type='Post' GROUP BY responses.id ORDER BY responses.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[36mResponse Load (25.7ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2 ORDER BY "responses"."id" ASC LIMIT $3[0m  [["respondable_id", 10], ["respondable_type", "Post"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:27:in `each'
  [1m[35m (29.0ms)[0m  [1m[34mSELECT responses.id, reactions.id as reaction_id FROM responses LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=responses.id AND reactions.reactionable_type='Response' AND respondable_id=10 AND respondable_type='Post' GROUP BY responses.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[36mReaction Load (22.5ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."reaccion" = $3[0m  [["reactionable_id", 10], ["reactionable_type", "Post"], ["reaccion", "Like"]]
  â†³ app/controllers/post_responses_controller.rb:26:in `index'
  [1m[36mReaction Load (28.4ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."reaccion" = $3[0m  [["reactionable_id", 10], ["reactionable_type", "Post"], ["reaccion", "Dislike"]]
  â†³ app/controllers/post_responses_controller.rb:26:in `index'
  [1m[36mResponse Count (25.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2[0m  [["respondable_id", 10], ["respondable_type", "Post"]]
  â†³ app/controllers/post_responses_controller.rb:26:in `size'
  [1m[36mReaction Load (24.6ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."who" = $3 LIMIT $4[0m  [["reactionable_id", 10], ["reactionable_type", "Post"], ["who", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/post_responses_controller.rb:27:in `index'
  Rendering layout layouts/application.html.erb
  Rendering post_responses/index.html.erb within layouts/application
  [1m[36mUser Load (23.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 4.1ms | Allocations: 1121)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 442)
  Rendered layouts/_comment.html.erb (Duration: 100.2ms | Allocations: 10196)
  [1m[36mResponse Load (23.3ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2 ORDER BY "responses"."id" ASC LIMIT $3[0m  [["respondable_id", 10], ["respondable_type", "Post"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 440)
  [1m[36mCACHE User Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 441)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 62.9ms | Allocations: 10019)
  Rendered layouts/_add_comment.html.erb (Duration: 2.0ms | Allocations: 680)
  Rendered post_responses/index.html.erb within layouts/application (Duration: 169.7ms | Allocations: 21453)
  Rendered layouts/_header.html.erb (Duration: 3.6ms | Allocations: 1359)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 147.6ms | Allocations: 11628)
  Rendered layout layouts/application.html.erb (Duration: 356.6ms | Allocations: 53531)
Completed 200 OK in 929ms (Views: 183.3ms | ActiveRecord: 635.1ms | Allocations: 74719)


Started GET "/categories" for 127.0.0.1 at 2023-11-20 15:29:04 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (70.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (88.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 298.0ms | Allocations: 6484)
  Rendered layouts/_header.html.erb (Duration: 2.6ms | Allocations: 1126)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (53.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 64.9ms | Allocations: 4030)
  Rendered layout layouts/application.html.erb (Duration: 372.9ms | Allocations: 15443)
Completed 200 OK in 386ms (Views: 59.0ms | ActiveRecord: 316.1ms | Allocations: 17066)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 15:29:09 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (30.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (27.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (42.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (29.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (30.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (23.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (27.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 835)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 41.2ms | Allocations: 4807)
  Rendered layouts/_add_comment.html.erb (Duration: 1.0ms | Allocations: 533)
  Rendered categories/show.html.erb within layouts/application (Duration: 70.6ms | Allocations: 6171)
  Rendered layouts/_header.html.erb (Duration: 2.7ms | Allocations: 1101)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (35.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 47.7ms | Allocations: 4028)
  Rendered layout layouts/application.html.erb (Duration: 128.1ms | Allocations: 15099)
Completed 200 OK in 332ms (Views: 42.6ms | ActiveRecord: 273.0ms | Allocations: 18834)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 15:33:30 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (30.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (26.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (31.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (79.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  Rendered categories/show.html.erb within layouts/application (Duration: 169.9ms | Allocations: 7304)
  Rendered layout layouts/application.html.erb (Duration: 171.6ms | Allocations: 7397)
Completed 500 Internal Server Error in 551ms (ActiveRecord: 398.0ms | Allocations: 20029)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `comment' for #<ActionView::Base:0x00000000024c48>):
     6:         <%= link_to edit_category_path, class: "categories_new_button" do %>
     7:           <div>Editar</div>
     8:         <% end %>
     9:         <%= link_to "Eliminar", get_delete_comment_path(comment), class: "categories_new_button", data: {turbo_method: :delete} %>
    10:       </div>
    11:     <% end %>
    12:   </div>
  
app/views/categories/show.html.erb:9
Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 15:33:49 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (28.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (22.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (22.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  Rendered categories/show.html.erb within layouts/application (Duration: 107.1ms | Allocations: 6941)
  Rendered layout layouts/application.html.erb (Duration: 108.2ms | Allocations: 7034)
Completed 500 Internal Server Error in 444ms (ActiveRecord: 297.4ms | Allocations: 19706)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `cagories_path' for #<ActionView::Base:0x0000000002bae8>):
     6:         <%= link_to edit_category_path, class: "categories_new_button" do %>
     7:           <div>Editar</div>
     8:         <% end %>
     9:         <%= link_to "Eliminar", cagories_path, class: "categories_new_button", data: {turbo_method: :delete} %>
    10:       </div>
    11:     <% end %>
    12:   </div>
  
app/views/categories/show.html.erb:9
Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 15:33:58 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (22.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (22.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (22.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (32.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (24.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 3.9ms | Allocations: 1120)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 442)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 100.8ms | Allocations: 8335)
  Rendered layouts/_add_comment.html.erb (Duration: 4.0ms | Allocations: 679)
  Rendered categories/show.html.erb within layouts/application (Duration: 199.8ms | Allocations: 15367)
  Rendered layouts/_header.html.erb (Duration: 6.8ms | Allocations: 1359)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (30.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 189.8ms | Allocations: 11625)
  Rendered layout layouts/application.html.erb (Duration: 497.7ms | Allocations: 54163)
Completed 200 OK in 839ms (Views: 313.4ms | ActiveRecord: 443.2ms | Allocations: 66855)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 15:34:37 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (39.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (38.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (31.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (32.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (28.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (37.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (30.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (31.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 827)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 47.3ms | Allocations: 4790)
  Rendered layouts/_add_comment.html.erb (Duration: 1.4ms | Allocations: 527)
  Rendered categories/show.html.erb within layouts/application (Duration: 84.5ms | Allocations: 5950)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1088)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (32.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 42.6ms | Allocations: 3998)
  Rendered layout layouts/application.html.erb (Duration: 140.4ms | Allocations: 14840)
Completed 200 OK in 367ms (Views: 47.5ms | ActiveRecord: 301.3ms | Allocations: 17677)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 15:34:48 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (41.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (32.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (35.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (48.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (47.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (56.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (33.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 3.1ms | Allocations: 827)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 54.9ms | Allocations: 4790)
  Rendered layouts/_add_comment.html.erb (Duration: 1.2ms | Allocations: 527)
  Rendered categories/show.html.erb within layouts/application (Duration: 116.4ms | Allocations: 5950)
  Rendered layouts/_header.html.erb (Duration: 4.6ms | Allocations: 1088)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (70.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 83.2ms | Allocations: 3998)
  Rendered layout layouts/application.html.erb (Duration: 252.3ms | Allocations: 21526)
Completed 200 OK in 521ms (Views: 94.0ms | ActiveRecord: 408.7ms | Allocations: 24335)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-20 15:38:04 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"gari"}
  [1m[36mUser Load (26.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (27.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (22.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (27.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (27.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-20 14:38:04.930102')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-20 14:38:04.964394')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (36.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-20 14:38:04.994677')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (27.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 29.7ms | Allocations: 3240)
  Rendered layouts/_header.html.erb (Duration: 5.6ms | Allocations: 1353)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (26.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.4ms | Allocations: 5058)
  Rendered layout layouts/application.html.erb (Duration: 143.4ms | Allocations: 28704)
Completed 200 OK in 800ms (Views: 124.6ms | ActiveRecord: 482.9ms | Allocations: 52003)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-20 15:38:09 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (30.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (33.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (33.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (74.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (74.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (71.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (38.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (38.4ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 232.9ms | Allocations: 12962)
  Rendered layouts/_header.html.erb (Duration: 6.4ms | Allocations: 1089)
  [1m[36mUser Load (65.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (58.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 152.3ms | Allocations: 4107)
  Rendered layout layouts/application.html.erb (Duration: 410.8ms | Allocations: 22153)
Completed 200 OK in 762ms (Views: 103.4ms | ActiveRecord: 617.3ms | Allocations: 33082)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:38:11 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (39.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (38.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (55.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (29.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (31.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (64.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (79.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (36.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (30.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (27.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (73.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (59.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (37.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 44.0ms | Allocations: 2732)
  [1m[36mDish Load (27.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (26.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (26.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (28.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 3.8ms | Allocations: 872)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 442)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 78.3ms | Allocations: 6190)
  Rendered layouts/_add_comment.html.erb (Duration: 3.1ms | Allocations: 680)
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.1ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 35.2ms | Allocations: 1908)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 406.0ms | Allocations: 21166)
  Rendered layouts/_header.html.erb (Duration: 4.6ms | Allocations: 1100)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 45.2ms | Allocations: 4029)
  Rendered layout layouts/application.html.erb (Duration: 473.7ms | Allocations: 30107)
Completed 200 OK in 1195ms (Views: 136.6ms | ActiveRecord: 999.2ms | Allocations: 43000)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:38:18 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (25.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (25.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (23.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (23.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (26.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (28.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (23.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 28.8ms | Allocations: 2150)
  [1m[36mDish Load (23.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (35.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (22.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (22.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (29.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 4.1ms | Allocations: 616)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 4.2ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 3.7ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 98.0ms | Allocations: 4555)
  Rendered layouts/_add_comment.html.erb (Duration: 8.1ms | Allocations: 528)
  [1m[35m (33.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 5.2ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 44.3ms | Allocations: 1892)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 336.5ms | Allocations: 11932)
  Rendered layouts/_header.html.erb (Duration: 5.4ms | Allocations: 1088)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (34.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 65.7ms | Allocations: 3998)
  Rendered layout layouts/application.html.erb (Duration: 438.5ms | Allocations: 20775)
Completed 200 OK in 798ms (Views: 166.7ms | ActiveRecord: 595.6ms | Allocations: 26388)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-20 15:38:21 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (27.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.1ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (23.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (26.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (23.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (27.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 29.2ms | Allocations: 2469)
  [1m[36mDish Load (23.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (22.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (28.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 616)
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 37.7ms | Allocations: 2350)
  Rendered layouts/_add_comment.html.erb (Duration: 1.4ms | Allocations: 528)
  [1m[35m (26.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.3ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 150.3ms | Allocations: 6680)
  Rendered layouts/_header.html.erb (Duration: 3.7ms | Allocations: 1088)
  [1m[36mUser Load (24.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 62.2ms | Allocations: 4104)
  Rendered layout layouts/application.html.erb (Duration: 226.6ms | Allocations: 15629)
Completed 200 OK in 586ms (Views: 54.0ms | ActiveRecord: 498.2ms | Allocations: 21114)


Started GET "/search?search=Goiko" for 127.0.0.1 at 2023-11-20 15:38:34 +0100
Processing by RestaurantsController#search as HTML
  Parameters: {"search"=>"Goiko"}
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE (lower(nombre) LIKE '%goiko%')[0m
  â†³ app/controllers/restaurants_controller.rb:82:in `search'
Redirected to http://localhost:3000/restaurants/1
Completed 302 Found in 28ms (ActiveRecord: 25.0ms | Allocations: 703)


Started GET "/restaurants/1" for 127.0.0.1 at 2023-11-20 15:38:34 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (22.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (23.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (26.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (23.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (22.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (22.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (22.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 29.5ms | Allocations: 3268)
  [1m[36mDish Load (25.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (22.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (23.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (22.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (23.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (22.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 2.2ms | Allocations: 617)
  Rendered layouts/_reaction.html.erb (Duration: 2.9ms | Allocations: 441)
  [1m[36mUser Load (22.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 75.7ms | Allocations: 7779)
  Rendered layouts/_add_comment.html.erb (Duration: 1.1ms | Allocations: 528)
  [1m[35m (30.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 270.0ms | Allocations: 14951)
  Rendered layouts/_header.html.erb (Duration: 2.3ms | Allocations: 1088)
  [1m[36mUser Load (37.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (28.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 77.1ms | Allocations: 4104)
  Rendered layout layouts/application.html.erb (Duration: 358.0ms | Allocations: 23875)
Completed 200 OK in 696ms (Views: 77.6ms | ActiveRecord: 591.6ms | Allocations: 29533)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-20 15:38:38 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"gari"}
  [1m[36mUser Load (23.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (44.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (44.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (35.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (28.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-20 14:38:38.218490')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (28.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-20 14:38:38.249218')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (27.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-20 14:38:38.280737')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (55.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 5.4ms | Allocations: 2301)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1089)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (37.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.1ms | Allocations: 3998)
  Rendered layout layouts/application.html.erb (Duration: 69.3ms | Allocations: 11123)
Completed 200 OK in 385ms (Views: 33.4ms | ActiveRecord: 324.3ms | Allocations: 15490)


Started GET "/logout" for 127.0.0.1 at 2023-11-20 15:38:39 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.0ms | Allocations: 430)


Started GET "/" for 127.0.0.1 at 2023-11-20 15:38:39 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (59.1ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (26.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (26.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (23.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (25.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (33.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 111.7ms | Allocations: 10566)
  Rendered layouts/_header.html.erb (Duration: 2.9ms | Allocations: 1101)
  Rendered layouts/_sidenav.html.erb (Duration: 6.2ms | Allocations: 2691)
  Rendered layout layouts/application.html.erb (Duration: 132.5ms | Allocations: 18370)
Completed 200 OK in 310ms (Views: 50.5ms | ActiveRecord: 244.3ms | Allocations: 20866)


Started GET "/search?search=Goiko" for 127.0.0.1 at 2023-11-20 15:38:42 +0100
Processing by RestaurantsController#search as HTML
  Parameters: {"search"=>"Goiko"}
  [1m[36mRestaurant Load (37.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE (lower(nombre) LIKE '%goiko%')[0m
  â†³ app/controllers/restaurants_controller.rb:82:in `search'
Redirected to http://localhost:3000/restaurants/1
Completed 302 Found in 41ms (ActiveRecord: 37.8ms | Allocations: 614)


Started GET "/restaurants/1" for 127.0.0.1 at 2023-11-20 15:38:42 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (32.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (40.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (40.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (27.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (33.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (35.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (36.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (26.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (22.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (22.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 11.1ms | Allocations: 2176)
  [1m[36mDish Load (34.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (44.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (26.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 623)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 124.6ms | Allocations: 10578)
  Rendered layouts/_add_comment.html.erb (Duration: 1.5ms | Allocations: 534)
  [1m[35m (26.1ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 207.7ms | Allocations: 15738)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1088)
  Rendered layouts/_sidenav.html.erb (Duration: 6.3ms | Allocations: 2659)
  Rendered layout layouts/application.html.erb (Duration: 224.1ms | Allocations: 23225)
Completed 200 OK in 664ms (Views: 95.3ms | ActiveRecord: 543.1ms | Allocations: 28857)


Started GET "/search?search=Tagliatella" for 127.0.0.1 at 2023-11-20 15:38:48 +0100
Processing by RestaurantsController#search as HTML
  Parameters: {"search"=>"Tagliatella"}
  [1m[36mRestaurant Load (43.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE (lower(nombre) LIKE '%tagliatella%')[0m
  â†³ app/controllers/restaurants_controller.rb:82:in `search'
Redirected to http://localhost:3000/restaurants/2
Completed 302 Found in 47ms (ActiveRecord: 43.4ms | Allocations: 614)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-20 15:38:48 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (27.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (43.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (37.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (32.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (28.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (27.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (28.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (27.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 4.4ms | Allocations: 2230)
  [1m[36mDish Load (32.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (27.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (28.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 629)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 66.8ms | Allocations: 3342)
  Rendered layouts/_add_comment.html.erb (Duration: 1.3ms | Allocations: 528)
  [1m[35m (31.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 145.1ms | Allocations: 7200)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1088)
  Rendered layouts/_sidenav.html.erb (Duration: 6.2ms | Allocations: 2659)
  Rendered layout layouts/application.html.erb (Duration: 162.7ms | Allocations: 14704)
Completed 200 OK in 568ms (Views: 43.8ms | ActiveRecord: 499.0ms | Allocations: 20146)


Started GET "/login" for 127.0.0.1 at 2023-11-20 15:38:52 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 14.5ms | Allocations: 2958)
  Rendered layouts/_header.html.erb (Duration: 4.1ms | Allocations: 1089)
  Rendered layouts/_sidenav.html.erb (Duration: 12.5ms | Allocations: 2659)
  Rendered layout layouts/application.html.erb (Duration: 51.0ms | Allocations: 10470)
Completed 200 OK in 56ms (Views: 53.0ms | ActiveRecord: 0.0ms | Allocations: 10919)


Started POST "/login" for 127.0.0.1 at 2023-11-20 15:38:58 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"Atreides", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (30.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 311ms (ActiveRecord: 30.3ms | Allocations: 855)


Started GET "/" for 127.0.0.1 at 2023-11-20 15:38:58 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (59.9ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (23.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (26.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (30.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (30.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (32.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 109.8ms | Allocations: 10522)
  Rendered layouts/_header.html.erb (Duration: 6.8ms | Allocations: 1093)
  [1m[36mUser Load (23.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 61.1ms | Allocations: 4677)
  Rendered layout layouts/application.html.erb (Duration: 185.5ms | Allocations: 20299)
Completed 200 OK in 365ms (Views: 52.1ms | ActiveRecord: 301.0ms | Allocations: 22838)


Started GET "/search?search=Tagliatella" for 127.0.0.1 at 2023-11-20 15:39:03 +0100
Processing by RestaurantsController#search as HTML
  Parameters: {"search"=>"Tagliatella"}
  [1m[36mRestaurant Load (70.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE (lower(nombre) LIKE '%tagliatella%')[0m
  â†³ app/controllers/restaurants_controller.rb:82:in `search'
Redirected to http://localhost:3000/restaurants/2
Completed 302 Found in 73ms (ActiveRecord: 70.1ms | Allocations: 614)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-20 15:39:03 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (68.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (26.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (22.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (23.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (22.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (22.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (23.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (22.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (22.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (31.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 39.1ms | Allocations: 2481)
  [1m[36mDish Load (31.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (22.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (22.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 642)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 445)
  Rendered layouts/_comment.html.erb (Duration: 56.5ms | Allocations: 3245)
  Rendered layouts/_add_comment.html.erb (Duration: 1.4ms | Allocations: 534)
  [1m[35m (23.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 183.9ms | Allocations: 7595)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1094)
  [1m[36mUser Load (27.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 67.5ms | Allocations: 4665)
  Rendered layout layouts/application.html.erb (Duration: 262.5ms | Allocations: 17136)
Completed 200 OK in 641ms (Views: 56.1ms | ActiveRecord: 560.0ms | Allocations: 22610)


Started GET "/search?search=Fumanchu" for 127.0.0.1 at 2023-11-20 15:39:10 +0100
Processing by RestaurantsController#search as HTML
  Parameters: {"search"=>"Fumanchu"}
  [1m[36mRestaurant Load (23.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE (lower(nombre) LIKE '%fumanchu%')[0m
  â†³ app/controllers/restaurants_controller.rb:82:in `search'
Redirected to http://localhost:3000/restaurants/3
Completed 302 Found in 27ms (ActiveRecord: 23.2ms | Allocations: 615)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:39:10 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (28.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (27.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (25.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (31.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (42.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (31.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (28.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (35.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (62.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (43.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (26.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 33.7ms | Allocations: 2190)
  [1m[36mDish Load (24.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (22.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (23.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (26.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 621)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 445)
  [1m[36mUser Load (23.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 65.2ms | Allocations: 4714)
  Rendered layouts/_add_comment.html.erb (Duration: 1.2ms | Allocations: 528)
  [1m[35m (25.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 3.1ms | Allocations: 1491)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 239.0ms | Allocations: 11834)
  Rendered layouts/_header.html.erb (Duration: 3.5ms | Allocations: 1088)
  [1m[36mUser Load (22.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 70.1ms | Allocations: 4635)
  Rendered layout layouts/application.html.erb (Duration: 321.7ms | Allocations: 21314)
Completed 200 OK in 797ms (Views: 82.4ms | ActiveRecord: 688.2ms | Allocations: 26935)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:43:23 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (76.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (43.8ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (84.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (33.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (30.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (55.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (57.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (50.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (37.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (52.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (34.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (85.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 1.5ms | Allocations: 1655)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 5.0ms | Allocations: 2443)
  Rendered layout layouts/application.html.erb (Duration: 5.3ms | Allocations: 2544)
Completed 500 Internal Server Error in 1457ms (ActiveRecord: 1261.0ms | Allocations: 31715)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <div class="restaurants_header">
  <div class="restaurants_img">
    <% if locals[:restaurant].ruta_img_fondo.present? %>
      <%= image_tag locals[:restaurant].ruta_img_fondo %>
    <% else %>
      <%= image_tag "Default-restaurant-img" %>
    <% end %>
  </div>
  <div class="restaurants_header_content">
    <div>
      <div class="title">
        <%= locals[:restaurant].nombre %> - <span class="title_key_word"><%= locals[:restaurant].categoria %></span>
      </div>
      <div class="restaurant_rating_container">
        
        <% if locals[:ratings] %>
          <% locals[:ratings].floor.times do %>
            <%= image_tag "Star", style: "width: 40px; height: 40px" %>
          <% end %>
        <% end %>
        <div class="restaurant_rating_text"> - <span><%= locals[:ratings] %></span></div>
      </div>
    </div>
    
    <div class="restaurants_header_buttons_container">
      <div>
        <% if session[:username].present? and user_is_owner?(locals[:restaurant].id) %>
          <!-- Si el restaurante tiene su imported_id distinto de nil, significa que es un restaurante importado y no se puede editar -->
          <% if locals[:restaurant].imported_id.nil? %>
            <%= link_to edit_restaurant_path(locals[:restaurant].id), style: "text-decoration: none" do %>
              <div class="restaurants_header_edit_button">
                <span class="restaurants_header_edit_button_text">Editar</span>
              </div>
            <% end %>
            <%= link_to "Eliminar", categories_path class: "restaurants_header_edit_button", data: {turbo_method: :delete} %>
          <% else %>
             <%= link_to ENV['EINA_EATS_WEB'] , style: "text-decoration: none" do %>
              <div class="restaurants_header_edit_button">
                <span class="restaurants_header_edit_button_text">Editar en EinaEats</span>
              </div> 
            <% end %>
          <% end %>
        <% end %>
      </div>
    
      <% if locals[:restaurant].imported_id %>
        <%= link_to ENV['EINA_EATS_WEB'] , style: "text-decoration: none" do %>
          <div class="restaurants_einaeats_button">
            <%= image_tag "Bolsa-einaeats" %>
            <span class="restaurant_einaeats_button_text">Pedir en EinaEats</span>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
<div class="restaurants_header_botones">
    <a href="#restaurant_menu" class="restaurants_header_page_button">
      <div>MenÃº</div>
    </a>
    <a href="#restaurant_reviews" class="restaurants_header_page_button">
      <div>ReseÃ±as</div>
    </a>
    <a href="#restaurant_posts" class="restaurants_header_page_button">
      <div>Posts del restaurante</div> 
    </a>
    <a href="#restaurant_info" class="restaurants_header_page_button">
      <div>InformaciÃ³n</div>
    </a>
  </div>

):
1:    <div class="restaurants_header">
2:      <div class="restaurants_img">
3:        <% if locals[:restaurant].ruta_img_fondo.present? %>
4:          <%= image_tag locals[:restaurant].ruta_img_fondo %>
5:        <% else %>
6:          <%= image_tag "Default-restaurant-img" %>
7:        <% end %>
8:      </div>
9:      <div class="restaurants_header_content">
10:        <div>
11:          <div class="title">
12:            <%= locals[:restaurant].nombre %> - <span class="title_key_word"><%= locals[:restaurant].categoria %></span>
13:          </div>
14:          <div class="restaurant_rating_container">
15:            
16:            <% if locals[:ratings] %>
17:              <% locals[:ratings].floor.times do %>
18:                <%= image_tag "Star", style: "width: 40px; height: 40px" %>
19:              <% end %>
20:            <% end %>
21:            <div class="restaurant_rating_text"> - <span><%= locals[:ratings] %></span></div>
22:          </div>
23:        </div>
24:        
25:        <div class="restaurants_header_buttons_container">
26:          <div>
27:            <% if session[:username].present? and user_is_owner?(locals[:restaurant].id) %>
28:              <!-- Si el restaurante tiene su imported_id distinto de nil, significa que es un restaurante importado y no se puede editar -->
29:              <% if locals[:restaurant].imported_id.nil? %>
30:                <%= link_to edit_restaurant_path(locals[:restaurant].id), style: "text-decoration: none" do %>
31:                  <div class="restaurants_header_edit_button">
32:                    <span class="restaurants_header_edit_button_text">Editar</span>
33:                  </div>
34:                <% end %>
35:                <%= link_to "Eliminar", categories_path class: "restaurants_header_edit_button", data: {turbo_method: :delete} %>
36:              <% else %>
37:                 <%= link_to ENV['EINA_EATS_WEB'] , style: "text-decoration: none" do %>
38:                  <div class="restaurants_header_edit_button">
39:                    <span class="restaurants_header_edit_button_text">Editar en EinaEats</span>
40:                  </div> 
41:                <% end %>
42:              <% end %>
43:            <% end %>
44:          </div>
45:        
46:          <% if locals[:restaurant].imported_id %>
47:            <%= link_to ENV['EINA_EATS_WEB'] , style: "text-decoration: none" do %>
48:              <div class="restaurants_einaeats_button">
49:                <%= image_tag "Bolsa-einaeats" %>
50:                <span class="restaurant_einaeats_button_text">Pedir en EinaEats</span>
51:              </div>
52:            <% end %>
53:          <% end %>
54:        </div>
55:      </div>
56:    </div>
57:    <div class="restaurants_header_botones">
58:        <a href="#restaurant_menu" class="restaurants_header_page_button">
59:          <div>MenÃº</div>
60:        </a>
61:        <a href="#restaurant_reviews" class="restaurants_header_page_button">
62:          <div>ReseÃ±as</div>
63:        </a>
64:        <a href="#restaurant_posts" class="restaurants_header_page_button">
65:          <div>Posts del restaurante</div> 
66:        </a>
67:        <a href="#restaurant_info" class="restaurants_header_page_button">
68:          <div>InformaciÃ³n</div>
69:        </a>
70:      </div>
  
app/views/restaurants/_header.html.erb:35: syntax error, unexpected label, expecting `do' or '{' or '('
app/views/restaurants/show.html.erb:2
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/show_exceptions.rb:36)
Processing by ErrorsController#internal_server_error as HTML
  Parameters: {"id"=>"3"}
  Rendering layout layouts/application.html.erb
  Rendering errors/internal_server_error.html.erb within layouts/application
  Rendered errors/internal_server_error.html.erb within layouts/application (Duration: 0.9ms | Allocations: 91)
  Rendered layouts/_header.html.erb (Duration: 4.4ms | Allocations: 1424)
  [1m[36mUser Load (48.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (51.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 251.0ms | Allocations: 13356)
  Rendered layout layouts/application.html.erb (Duration: 314.8ms | Allocations: 40903)
Completed 500 Internal Server Error in 318ms (Views: 111.2ms | ActiveRecord: 206.1ms | Allocations: 41365)


Started GET "/categories" for 127.0.0.1 at 2023-11-20 15:43:33 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (40.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (44.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 143.1ms | Allocations: 6418)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1114)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (33.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 48.3ms | Allocations: 4532)
  Rendered layout layouts/application.html.erb (Duration: 201.6ms | Allocations: 15814)
Completed 200 OK in 217ms (Views: 45.3ms | ActiveRecord: 158.9ms | Allocations: 17435)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-20 15:43:33 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (411.1ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (51.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (45.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (57.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (63.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (51.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (66.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 255.2ms | Allocations: 11439)
  Rendered layouts/_header.html.erb (Duration: 9.8ms | Allocations: 1101)
  [1m[36mUser Load (41.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (37.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 109.7ms | Allocations: 4672)
  Rendered layout layouts/application.html.erb (Duration: 408.7ms | Allocations: 21214)
Completed 200 OK in 1020ms (Views: 150.6ms | ActiveRecord: 851.0ms | Allocations: 24364)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-20 15:43:36 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (154.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (82.5ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (273.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (93.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (54.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (59.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (45.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (68.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (81.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (55.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (52.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (64.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (51.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 5.7ms | Allocations: 1705)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 6.6ms | Allocations: 1784)
  Rendered layout layouts/application.html.erb (Duration: 7.4ms | Allocations: 1884)
Completed 500 Internal Server Error in 1179ms (ActiveRecord: 1135.6ms | Allocations: 7352)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <div class="restaurants_header">
  <div class="restaurants_img">
    <% if locals[:restaurant].ruta_img_fondo.present? %>
      <%= image_tag locals[:restaurant].ruta_img_fondo %>
    <% else %>
      <%= image_tag "Default-restaurant-img" %>
    <% end %>
  </div>
  <div class="restaurants_header_content">
    <div>
      <div class="title">
        <%= locals[:restaurant].nombre %> - <span class="title_key_word"><%= locals[:restaurant].categoria %></span>
      </div>
      <div class="restaurant_rating_container">
        
        <% if locals[:ratings] %>
          <% locals[:ratings].floor.times do %>
            <%= image_tag "Star", style: "width: 40px; height: 40px" %>
          <% end %>
        <% end %>
        <div class="restaurant_rating_text"> - <span><%= locals[:ratings] %></span></div>
      </div>
    </div>
    
    <div class="restaurants_header_buttons_container">
      <div>
        <% if session[:username].present? and user_is_owner?(locals[:restaurant].id) %>
          <!-- Si el restaurante tiene su imported_id distinto de nil, significa que es un restaurante importado y no se puede editar -->
          <% if locals[:restaurant].imported_id.nil? %>
            <%= link_to edit_restaurant_path(locals[:restaurant].id), style: "text-decoration: none" do %>
              <div class="restaurants_header_edit_button">
                <span class="restaurants_header_edit_button_text">Editar</span>
              </div>
            <% end %>
            <%= link_to "Eliminar", categories_path class: "restaurants_header_edit_button", data: {turbo_method: :delete} %>
          <% else %>
             <%= link_to ENV['EINA_EATS_WEB'] , style: "text-decoration: none" do %>
              <div class="restaurants_header_edit_button">
                <span class="restaurants_header_edit_button_text">Editar en EinaEats</span>
              </div> 
            <% end %>
          <% end %>
        <% end %>
      </div>
    
      <% if locals[:restaurant].imported_id %>
        <%= link_to ENV['EINA_EATS_WEB'] , style: "text-decoration: none" do %>
          <div class="restaurants_einaeats_button">
            <%= image_tag "Bolsa-einaeats" %>
            <span class="restaurant_einaeats_button_text">Pedir en EinaEats</span>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
<div class="restaurants_header_botones">
    <a href="#restaurant_menu" class="restaurants_header_page_button">
      <div>MenÃº</div>
    </a>
    <a href="#restaurant_reviews" class="restaurants_header_page_button">
      <div>ReseÃ±as</div>
    </a>
    <a href="#restaurant_posts" class="restaurants_header_page_button">
      <div>Posts del restaurante</div> 
    </a>
    <a href="#restaurant_info" class="restaurants_header_page_button">
      <div>InformaciÃ³n</div>
    </a>
  </div>

):
1:    <div class="restaurants_header">
2:      <div class="restaurants_img">
3:        <% if locals[:restaurant].ruta_img_fondo.present? %>
4:          <%= image_tag locals[:restaurant].ruta_img_fondo %>
5:        <% else %>
6:          <%= image_tag "Default-restaurant-img" %>
7:        <% end %>
8:      </div>
9:      <div class="restaurants_header_content">
10:        <div>
11:          <div class="title">
12:            <%= locals[:restaurant].nombre %> - <span class="title_key_word"><%= locals[:restaurant].categoria %></span>
13:          </div>
14:          <div class="restaurant_rating_container">
15:            
16:            <% if locals[:ratings] %>
17:              <% locals[:ratings].floor.times do %>
18:                <%= image_tag "Star", style: "width: 40px; height: 40px" %>
19:              <% end %>
20:            <% end %>
21:            <div class="restaurant_rating_text"> - <span><%= locals[:ratings] %></span></div>
22:          </div>
23:        </div>
24:        
25:        <div class="restaurants_header_buttons_container">
26:          <div>
27:            <% if session[:username].present? and user_is_owner?(locals[:restaurant].id) %>
28:              <!-- Si el restaurante tiene su imported_id distinto de nil, significa que es un restaurante importado y no se puede editar -->
29:              <% if locals[:restaurant].imported_id.nil? %>
30:                <%= link_to edit_restaurant_path(locals[:restaurant].id), style: "text-decoration: none" do %>
31:                  <div class="restaurants_header_edit_button">
32:                    <span class="restaurants_header_edit_button_text">Editar</span>
33:                  </div>
34:                <% end %>
35:                <%= link_to "Eliminar", categories_path class: "restaurants_header_edit_button", data: {turbo_method: :delete} %>
36:              <% else %>
37:                 <%= link_to ENV['EINA_EATS_WEB'] , style: "text-decoration: none" do %>
38:                  <div class="restaurants_header_edit_button">
39:                    <span class="restaurants_header_edit_button_text">Editar en EinaEats</span>
40:                  </div> 
41:                <% end %>
42:              <% end %>
43:            <% end %>
44:          </div>
45:        
46:          <% if locals[:restaurant].imported_id %>
47:            <%= link_to ENV['EINA_EATS_WEB'] , style: "text-decoration: none" do %>
48:              <div class="restaurants_einaeats_button">
49:                <%= image_tag "Bolsa-einaeats" %>
50:                <span class="restaurant_einaeats_button_text">Pedir en EinaEats</span>
51:              </div>
52:            <% end %>
53:          <% end %>
54:        </div>
55:      </div>
56:    </div>
57:    <div class="restaurants_header_botones">
58:        <a href="#restaurant_menu" class="restaurants_header_page_button">
59:          <div>MenÃº</div>
60:        </a>
61:        <a href="#restaurant_reviews" class="restaurants_header_page_button">
62:          <div>ReseÃ±as</div>
63:        </a>
64:        <a href="#restaurant_posts" class="restaurants_header_page_button">
65:          <div>Posts del restaurante</div> 
66:        </a>
67:        <a href="#restaurant_info" class="restaurants_header_page_button">
68:          <div>InformaciÃ³n</div>
69:        </a>
70:      </div>
  
app/views/restaurants/_header.html.erb:35: syntax error, unexpected label, expecting `do' or '{' or '('
app/views/restaurants/show.html.erb:2
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/show_exceptions.rb:36)
Processing by ErrorsController#internal_server_error as HTML
  Parameters: {"id"=>"2"}
  Rendering layout layouts/application.html.erb
  Rendering errors/internal_server_error.html.erb within layouts/application
  Rendered errors/internal_server_error.html.erb within layouts/application (Duration: 0.1ms | Allocations: 6)
  Rendered layouts/_header.html.erb (Duration: 6.0ms | Allocations: 1139)
  [1m[36mUser Load (97.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (66.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 198.2ms | Allocations: 4671)
  Rendered layout layouts/application.html.erb (Duration: 219.3ms | Allocations: 9817)
Completed 500 Internal Server Error in 222ms (Views: 57.9ms | ActiveRecord: 163.6ms | Allocations: 10056)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-20 15:44:01 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (106.6ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (51.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (97.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (33.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (110.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (57.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (74.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (42.9ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 279.7ms | Allocations: 13024)
  Rendered layouts/_header.html.erb (Duration: 4.1ms | Allocations: 1360)
  [1m[36mUser Load (39.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (53.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 250.8ms | Allocations: 13418)
  Rendered layout layouts/application.html.erb (Duration: 589.3ms | Allocations: 47083)
Completed 200 OK in 1375ms (Views: 178.4ms | ActiveRecord: 1126.9ms | Allocations: 62991)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:44:04 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (41.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (71.8ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (72.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (41.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (42.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (34.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (42.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (91.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (48.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (81.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (61.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (62.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (52.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (31.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 44.7ms | Allocations: 2825)
  [1m[36mDish Load (42.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (42.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (36.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (35.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (31.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 5.1ms | Allocations: 876)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 446)
  [1m[36mUser Load (50.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 449)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 147.9ms | Allocations: 7523)
  Rendered layouts/_add_comment.html.erb (Duration: 2.9ms | Allocations: 682)
  [1m[35m (63.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 5.5ms | Allocations: 1507)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 629.8ms | Allocations: 22262)
  Rendered layouts/_header.html.erb (Duration: 2.9ms | Allocations: 1100)
  [1m[36mUser Load (120.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (38.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 179.2ms | Allocations: 4673)
  Rendered layout layouts/application.html.erb (Duration: 822.8ms | Allocations: 31845)
Completed 200 OK in 1897ms (Views: 175.7ms | ActiveRecord: 1635.8ms | Allocations: 49314)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:44:31 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (31.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (33.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (48.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (39.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (32.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (36.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (22.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (28.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (32.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (45.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (32.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (42.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 53.2ms | Allocations: 2905)
  [1m[36mDish Load (23.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (27.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (23.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (29.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 4.2ms | Allocations: 872)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 446)
  [1m[36mUser Load (31.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 149.8ms | Allocations: 12758)
  Rendered layouts/_add_comment.html.erb (Duration: 2.1ms | Allocations: 674)
  [1m[35m (22.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 4.4ms | Allocations: 1507)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 461.1ms | Allocations: 27570)
  Rendered layouts/_header.html.erb (Duration: 4.9ms | Allocations: 1362)
  [1m[36mUser Load (78.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (52.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 174.0ms | Allocations: 8115)
  Rendered layout layouts/application.html.erb (Duration: 680.5ms | Allocations: 56139)
Completed 200 OK in 1911ms (Views: 177.1ms | ActiveRecord: 1346.8ms | Allocations: 93220)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:44:57 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (49.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (75.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (66.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (68.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (41.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (31.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (48.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (54.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (38.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (56.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (63.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (73.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (39.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (70.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 75.6ms | Allocations: 2220)
  [1m[36mDish Load (36.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (32.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (83.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (104.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (217.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 622)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 445)
  [1m[36mUser Load (62.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 293.1ms | Allocations: 4719)
  Rendered layouts/_add_comment.html.erb (Duration: 1.8ms | Allocations: 530)
  [1m[35m (243.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 4.0ms | Allocations: 1491)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 887.3ms | Allocations: 11864)
  Rendered layouts/_header.html.erb (Duration: 6.8ms | Allocations: 1088)
  [1m[36mUser Load (57.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (50.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 135.3ms | Allocations: 4635)
  Rendered layout layouts/application.html.erb (Duration: 1067.4ms | Allocations: 28116)
Completed 200 OK in 1804ms (Views: 110.4ms | ActiveRecord: 1664.3ms | Allocations: 33765)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:45:47 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (38.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (73.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (44.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (32.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (53.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (27.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (23.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (34.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (28.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (27.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (57.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (28.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (23.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 31.3ms | Allocations: 2916)
  [1m[36mDish Load (52.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (31.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (58.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (22.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 4.2ms | Allocations: 876)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 446)
  [1m[36mUser Load (67.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 185.4ms | Allocations: 12774)
  Rendered layouts/_add_comment.html.erb (Duration: 2.3ms | Allocations: 680)
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 3.5ms | Allocations: 1507)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 501.1ms | Allocations: 27610)
  Rendered layouts/_header.html.erb (Duration: 5.2ms | Allocations: 1358)
  [1m[36mUser Load (22.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (30.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 100.9ms | Allocations: 8114)
  Rendered layout layouts/application.html.erb (Duration: 635.0ms | Allocations: 56171)
Completed 200 OK in 1738ms (Views: 157.4ms | ActiveRecord: 1382.0ms | Allocations: 85299)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:46:58 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (23.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (46.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (27.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (23.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (22.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (23.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (22.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (32.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (22.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 37.3ms | Allocations: 2928)
  [1m[36mDish Load (22.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (25.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (22.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 2.1ms | Allocations: 876)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 446)
  [1m[36mUser Load (24.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 123.5ms | Allocations: 12774)
  Rendered layouts/_add_comment.html.erb (Duration: 2.1ms | Allocations: 680)
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 4.2ms | Allocations: 1507)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 374.6ms | Allocations: 27622)
  Rendered layouts/_header.html.erb (Duration: 3.8ms | Allocations: 1360)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 89.4ms | Allocations: 8115)
  Rendered layout layouts/application.html.erb (Duration: 505.8ms | Allocations: 56221)
Completed 200 OK in 1284ms (Views: 172.2ms | ActiveRecord: 919.2ms | Allocations: 85361)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 15:49:12 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (22.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (29.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (22.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (29.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (22.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (23.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (28.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (22.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (22.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 3.7ms | Allocations: 879)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 147.7ms | Allocations: 15107)
  Rendered layouts/_add_comment.html.erb (Duration: 3.6ms | Allocations: 680)
  Rendered dishes/show.html.erb within layouts/application (Duration: 216.7ms | Allocations: 18656)
  Rendered layouts/_header.html.erb (Duration: 6.1ms | Allocations: 1359)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 74.7ms | Allocations: 7942)
  Rendered layout layouts/application.html.erb (Duration: 339.8ms | Allocations: 47049)
Completed 200 OK in 833ms (Views: 170.9ms | ActiveRecord: 544.0ms | Allocations: 70047)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:52:11 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (23.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (23.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (22.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (22.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (22.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (22.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (22.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (22.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (23.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (22.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (22.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 31.3ms | Allocations: 2928)
  [1m[36mDish Load (22.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (23.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/show.html.erb within layouts/application (Duration: 153.4ms | Allocations: 12051)
  Rendered layout layouts/application.html.erb (Duration: 154.0ms | Allocations: 12144)
Completed 500 Internal Server Error in 826ms (ActiveRecord: 637.5ms | Allocations: 41241)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `imported_id' for nil:NilClass):
    25:               <div class="restaurants_new_dish_button_text">Editar plato</div>
    26:             <% end %>
    27:           <% end %> -->
    28:            <% if @dish.imported_id %>
    29:             <%= link_to "#{ENV['EINA_EATS_WEB']}/platosrestaurante/#{@restaurant.imported_id}", style: "text-decoration: none" do %>
    30:               <div class="restaurants_header_edit_button">
    31:                 <span class="restaurants_header_edit_button_text">Editar en EinaEats</span>
  
app/views/restaurants/show.html.erb:28
app/views/restaurants/show.html.erb:9
Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:53:37 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (60.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (47.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (29.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (36.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (34.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (32.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (40.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (37.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (28.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (30.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (30.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 32.8ms | Allocations: 2917)
  [1m[36mDish Load (63.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (25.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (49.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (33.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (23.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 876)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 446)
  [1m[36mUser Load (33.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 154.9ms | Allocations: 12775)
  Rendered layouts/_add_comment.html.erb (Duration: 2.5ms | Allocations: 680)
  [1m[35m (45.1ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 4.3ms | Allocations: 1507)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 564.4ms | Allocations: 27866)
  Rendered layouts/_header.html.erb (Duration: 4.8ms | Allocations: 1358)
  [1m[36mUser Load (31.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 100.2ms | Allocations: 8114)
  Rendered layout layouts/application.html.erb (Duration: 710.2ms | Allocations: 56429)
Completed 200 OK in 1783ms (Views: 178.9ms | ActiveRecord: 1339.9ms | Allocations: 85554)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:54:58 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (22.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (22.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (26.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (23.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (30.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (23.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (32.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 38.7ms | Allocations: 2917)
  [1m[36mDish Load (22.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (27.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (27.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (23.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 3.2ms | Allocations: 876)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 446)
  [1m[36mUser Load (22.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 449)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 139.0ms | Allocations: 12820)
  Rendered layouts/_add_comment.html.erb (Duration: 3.4ms | Allocations: 682)
  [1m[35m (22.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 446)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 4.9ms | Allocations: 1511)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 401.1ms | Allocations: 27919)
  Rendered layouts/_header.html.erb (Duration: 4.5ms | Allocations: 1358)
  [1m[36mUser Load (22.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 88.4ms | Allocations: 8115)
  Rendered layout layouts/application.html.erb (Duration: 526.8ms | Allocations: 56483)
Completed 200 OK in 1289ms (Views: 193.0ms | ActiveRecord: 920.1ms | Allocations: 85618)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:55:27 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (26.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (22.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (23.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (22.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (27.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (22.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (23.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (22.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (23.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 29.2ms | Allocations: 2220)
  [1m[36mDish Load (22.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (37.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (22.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (41.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (42.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 620)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 445)
  [1m[36mUser Load (24.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 81.7ms | Allocations: 4713)
  Rendered layouts/_add_comment.html.erb (Duration: 1.3ms | Allocations: 528)
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 6.2ms | Allocations: 1491)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 283.1ms | Allocations: 11969)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1088)
  [1m[36mUser Load (22.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 63.1ms | Allocations: 4635)
  Rendered layout layouts/application.html.erb (Duration: 392.6ms | Allocations: 28178)
Completed 200 OK in 749ms (Views: 109.7ms | ActiveRecord: 601.9ms | Allocations: 33839)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 15:55:34 +0100
Started GET "/restaurants/3/dishes/3/edit" for 127.0.0.1 at 2023-11-20 15:55:34 +0100
Processing by DishesController#show as HTML
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  Parameters: {"restaurant_id"=>"3", "id"=>"3"}
  [1m[36mRestaurant Load (26.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (23.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (23.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (22.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.0ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (23.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (23.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (23.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.6ms | Allocations: 618)
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 75.5ms | Allocations: 8108)
  Rendered layouts/_add_comment.html.erb (Duration: 3.5ms | Allocations: 528)
  Rendered dishes/show.html.erb within layouts/application (Duration: 137.3ms | Allocations: 10762)
  Rendered layouts/_header.html.erb (Duration: 3.3ms | Allocations: 1089)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 37.0ms | Allocations: 4531)
  Rendered layout layouts/application.html.erb (Duration: 191.5ms | Allocations: 20152)
Completed 200 OK in 389ms (Views: 78.1ms | ActiveRecord: 282.2ms | Allocations: 26391)


  [1m[36mDish Load (25.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 20.6ms | Allocations: 2890)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 25.1ms | Allocations: 3389)
  Rendered layouts/_header.html.erb (Duration: 5.9ms | Allocations: 1088)
  [1m[36mUser Load (26.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 139.3ms | Allocations: 4662)
  Rendered layout layouts/application.html.erb (Duration: 197.8ms | Allocations: 12895)
Completed 200 OK in 988ms (Views: 148.5ms | ActiveRecord: 272.8ms | Allocations: 42415)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:55:39 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (20.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (22.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (25.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (26.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (1654.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (133.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (23.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (105.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (47.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (33.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (34.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (43.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 29.8ms | Allocations: 2221)
  [1m[36mDish Load (105.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (33.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (28.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 626)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 445)
  [1m[36mUser Load (119.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 196.1ms | Allocations: 4732)
  Rendered layouts/_add_comment.html.erb (Duration: 5.5ms | Allocations: 534)
  [1m[35m (76.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 8.9ms | Allocations: 1491)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 581.7ms | Allocations: 11995)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1100)
  [1m[36mUser Load (71.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (32.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 122.8ms | Allocations: 4674)
  Rendered layout layouts/application.html.erb (Duration: 722.1ms | Allocations: 21579)
Completed 200 OK in 3022ms (Views: 182.2ms | ActiveRecord: 2735.1ms | Allocations: 27286)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:56:41 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (26.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (32.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (42.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (31.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (31.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (38.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (35.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (31.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (52.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (34.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (30.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (33.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (133.0ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (88.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 96.3ms | Allocations: 2917)
  [1m[36mDish Load (42.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (21.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (30.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (26.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 4.7ms | Allocations: 870)
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 446)
  [1m[36mUser Load (43.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 186.5ms | Allocations: 12766)
  Rendered layouts/_add_comment.html.erb (Duration: 4.9ms | Allocations: 674)
  [1m[35m (82.2ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 4.2ms | Allocations: 1507)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 644.1ms | Allocations: 27882)
  Rendered layouts/_header.html.erb (Duration: 27.4ms | Allocations: 1353)
  [1m[36mUser Load (46.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (36.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 155.2ms | Allocations: 8118)
  Rendered layout layouts/application.html.erb (Duration: 864.5ms | Allocations: 56388)
Completed 200 OK in 2020ms (Views: 252.8ms | ActiveRecord: 1578.1ms | Allocations: 85611)


Started GET "/restaurants/3/dishes/3/edit" for 127.0.0.1 at 2023-11-20 15:56:46 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"3"}
  [1m[36mDish Load (20.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 8.8ms | Allocations: 2765)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 14.7ms | Allocations: 3278)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1096)
  [1m[36mUser Load (21.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (20.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 62.9ms | Allocations: 4672)
  Rendered layout layouts/application.html.erb (Duration: 89.5ms | Allocations: 12817)
Completed 200 OK in 122ms (Views: 50.3ms | ActiveRecord: 63.5ms | Allocations: 14293)


Started GET "/restaurants/3/dishes/3/edit" for 127.0.0.1 at 2023-11-20 15:56:52 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"3"}
  [1m[36mDish Load (23.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 8.2ms | Allocations: 2176)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 9.2ms | Allocations: 2454)
  Rendered layouts/_header.html.erb (Duration: 4.0ms | Allocations: 1088)
  [1m[36mUser Load (22.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (21.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 61.7ms | Allocations: 4635)
  Rendered layout layouts/application.html.erb (Duration: 84.1ms | Allocations: 11933)
Completed 200 OK in 112ms (Views: 41.0ms | ActiveRecord: 67.5ms | Allocations: 12585)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:57:49 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (20.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (21.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (22.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (23.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (22.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (22.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (20.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (21.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (19.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (19.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (19.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (20.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 28.8ms | Allocations: 2917)
  [1m[36mDish Load (23.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (20.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (22.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (21.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 2.4ms | Allocations: 872)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 446)
  [1m[36mUser Load (23.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 449)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 133.1ms | Allocations: 12791)
  Rendered layouts/_add_comment.html.erb (Duration: 2.7ms | Allocations: 685)
  [1m[35m (20.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 4.0ms | Allocations: 1507)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 362.3ms | Allocations: 27887)
  Rendered layouts/_header.html.erb (Duration: 3.9ms | Allocations: 1358)
  [1m[36mUser Load (19.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (19.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 81.9ms | Allocations: 8115)
  Rendered layout layouts/application.html.erb (Duration: 485.5ms | Allocations: 56458)
Completed 200 OK in 1117ms (Views: 185.0ms | ActiveRecord: 789.4ms | Allocations: 85589)


Started GET "/restaurants/3/dishes/4/edit" for 127.0.0.1 at 2023-11-20 15:57:53 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mDish Load (21.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 7.8ms | Allocations: 2765)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 10.9ms | Allocations: 3260)
  Rendered layouts/_header.html.erb (Duration: 2.4ms | Allocations: 1088)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 63.4ms | Allocations: 4636)
  Rendered layout layouts/application.html.erb (Duration: 85.6ms | Allocations: 12770)
Completed 200 OK in 114ms (Views: 40.0ms | ActiveRecord: 69.0ms | Allocations: 14245)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:58:09 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (34.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (39.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (20.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (29.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (34.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (35.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (38.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (29.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (28.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (21.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (20.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (20.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (20.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (21.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 38.4ms | Allocations: 2917)
  [1m[36mDish Load (31.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (20.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (20.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (20.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (19.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 2.8ms | Allocations: 876)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 446)
  [1m[36mUser Load (19.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 111.6ms | Allocations: 12800)
  Rendered layouts/_add_comment.html.erb (Duration: 2.2ms | Allocations: 680)
  [1m[35m (20.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 5.0ms | Allocations: 1507)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 372.7ms | Allocations: 27907)
  Rendered layouts/_header.html.erb (Duration: 4.0ms | Allocations: 1358)
  [1m[36mUser Load (19.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (19.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 80.6ms | Allocations: 8115)
  Rendered layout layouts/application.html.erb (Duration: 492.6ms | Allocations: 56469)
Completed 200 OK in 1344ms (Views: 190.4ms | ActiveRecord: 965.8ms | Allocations: 85585)


Started GET "/restaurants/3/dishes/4/edit" for 127.0.0.1 at 2023-11-20 15:58:14 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mDish Load (20.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 12.1ms | Allocations: 2763)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 15.6ms | Allocations: 3258)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1088)
  [1m[36mUser Load (21.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 63.8ms | Allocations: 4636)
  Rendered layout layouts/application.html.erb (Duration: 92.9ms | Allocations: 12740)
Completed 200 OK in 123ms (Views: 50.8ms | ActiveRecord: 64.1ms | Allocations: 14215)


Started GET "/restaurants/3/dishes/16/edit" for 127.0.0.1 at 2023-11-20 15:58:18 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"16"}
  [1m[36mDish Load (25.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 14.2ms | Allocations: 2176)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 17.4ms | Allocations: 2454)
  Rendered layouts/_header.html.erb (Duration: 5.8ms | Allocations: 1088)
  [1m[36mUser Load (23.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (21.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 74.0ms | Allocations: 4635)
  Rendered layout layouts/application.html.erb (Duration: 113.6ms | Allocations: 11933)
Completed 200 OK in 145ms (Views: 70.2ms | ActiveRecord: 70.2ms | Allocations: 12585)


Started GET "/restaurants/3/dishes/16/edit" for 127.0.0.1 at 2023-11-20 15:58:32 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"16"}
  [1m[36mDish Load (24.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 9.0ms | Allocations: 2176)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 10.7ms | Allocations: 2472)
  Rendered layouts/_header.html.erb (Duration: 4.2ms | Allocations: 1088)
  [1m[36mUser Load (26.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (21.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 77.7ms | Allocations: 4642)
  Rendered layout layouts/application.html.erb (Duration: 104.8ms | Allocations: 11958)
Completed 200 OK in 134ms (Views: 58.1ms | ActiveRecord: 72.4ms | Allocations: 12611)


Started PATCH "/restaurants/3/dishes" for 127.0.0.1 at 2023-11-20 15:58:42 +0100
Processing by ErrorsController#not_found as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"bing", "descripcion"=>"chillin", "precio"=>"10.85"}, "button"=>"", "unmatched"=>"restaurants/3/dishes"}
  Rendering layout layouts/application.html.erb
  Rendering errors/not_found.html.erb within layouts/application
  Rendered errors/not_found.html.erb within layouts/application (Duration: 0.8ms | Allocations: 95)
  Rendered layouts/_header.html.erb (Duration: 2.8ms | Allocations: 1129)
  [1m[36mUser Load (22.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (19.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.9ms | Allocations: 4653)
  Rendered layout layouts/application.html.erb (Duration: 68.4ms | Allocations: 9883)
Completed 404 Not Found in 72ms (Views: 28.3ms | ActiveRecord: 42.0ms | Allocations: 10673)


Started GET "/" for 127.0.0.1 at 2023-11-20 15:58:43 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (46.6ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (22.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (20.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (20.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (19.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (21.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (26.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (21.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 117.8ms | Allocations: 12973)
  Rendered layouts/_header.html.erb (Duration: 3.5ms | Allocations: 1089)
  [1m[36mUser Load (21.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (19.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 56.6ms | Allocations: 4655)
  Rendered layout layouts/application.html.erb (Duration: 187.9ms | Allocations: 22683)
Completed 200 OK in 345ms (Views: 57.3ms | ActiveRecord: 261.3ms | Allocations: 26956)


Started GET "/categories" for 127.0.0.1 at 2023-11-20 15:58:49 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (21.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (21.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 71.9ms | Allocations: 4909)
  Rendered layouts/_header.html.erb (Duration: 5.7ms | Allocations: 1114)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 42.9ms | Allocations: 4530)
  Rendered layout layouts/application.html.erb (Duration: 138.1ms | Allocations: 14302)
Completed 200 OK in 142ms (Views: 74.4ms | ActiveRecord: 65.9ms | Allocations: 14795)


Started GET "/" for 127.0.0.1 at 2023-11-20 19:54:45 +0100
  [1m[36mActiveRecord::SchemaMigration Load (132.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (97.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (97.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (102.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (102.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (299.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (194.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (80.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (92.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 1627.4ms | Allocations: 132838)
  Rendered layouts/_header.html.erb (Duration: 6.2ms | Allocations: 1394)
  Rendered layouts/_sidenav.html.erb (Duration: 19.8ms | Allocations: 3427)
  Rendered layout layouts/application.html.erb (Duration: 1723.0ms | Allocations: 157210)
Completed 200 OK in 3912ms (Views: 1268.5ms | ActiveRecord: 2044.2ms | Allocations: 199629)


Started GET "/restaurants/1" for 127.0.0.1 at 2023-11-20 19:57:29 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (126.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (98.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (139.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (201.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (97.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (101.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (620.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (163.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (102.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (101.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (96.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (93.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (129.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 11.3ms | Allocations: 3666)
  [1m[36mDish Load (300.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (101.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (198.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 6.3ms | Allocations: 888)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 442)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 938.5ms | Allocations: 17790)
  Rendered layouts/_add_comment.html.erb (Duration: 5.7ms | Allocations: 685)
  [1m[35m (151.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 2093.2ms | Allocations: 35339)
  Rendered layouts/_header.html.erb (Duration: 3.9ms | Allocations: 1088)
  Rendered layouts/_sidenav.html.erb (Duration: 10.4ms | Allocations: 2659)
  Rendered layout layouts/application.html.erb (Duration: 2119.3ms | Allocations: 42818)
Completed 200 OK in 5338ms (Views: 818.7ms | ActiveRecord: 3895.7ms | Allocations: 72111)


Started GET "/restaurants/1/dishes/1" for 127.0.0.1 at 2023-11-20 19:57:38 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"1", "id"=>"1"}
  [1m[36mRestaurant Load (123.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (70.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 1], ["restaurant_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (126.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=1 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (98.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=1 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (99.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=1 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (96.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (97.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (97.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[36mReview Load (91.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (102.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 3.5ms | Allocations: 641)
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 440)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 3.1ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 236.3ms | Allocations: 6581)
  Rendered layouts/_add_comment.html.erb (Duration: 3.7ms | Allocations: 534)
  Rendered dishes/show.html.erb within layouts/application (Duration: 346.4ms | Allocations: 9055)
  Rendered layouts/_header.html.erb (Duration: 7.5ms | Allocations: 1094)
  Rendered layouts/_sidenav.html.erb (Duration: 14.1ms | Allocations: 2669)
  Rendered layout layouts/application.html.erb (Duration: 391.4ms | Allocations: 16601)
Completed 200 OK in 1234ms (Views: 102.6ms | ActiveRecord: 1003.5ms | Allocations: 21475)


Started GET "/login" for 127.0.0.1 at 2023-11-20 19:57:42 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 15.8ms | Allocations: 3236)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1093)
  Rendered layouts/_sidenav.html.erb (Duration: 12.4ms | Allocations: 2670)
  Rendered layout layouts/application.html.erb (Duration: 45.2ms | Allocations: 10766)
Completed 200 OK in 104ms (Views: 47.0ms | ActiveRecord: 0.0ms | Allocations: 14295)


Started POST "/login" for 127.0.0.1 at 2023-11-20 19:57:49 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"Atreides", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (100.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 528ms (ActiveRecord: 100.1ms | Allocations: 1144)


Started GET "/" for 127.0.0.1 at 2023-11-20 19:57:50 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (322.9ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (207.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (91.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (101.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (92.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (189.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (101.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (91.0ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 465.8ms | Allocations: 10542)
  Rendered layouts/_header.html.erb (Duration: 36.6ms | Allocations: 1089)
  [1m[36mUser Load (231.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (105.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 806.0ms | Allocations: 8469)
  Rendered layout layouts/application.html.erb (Duration: 1367.1ms | Allocations: 24123)
Completed 200 OK in 2209ms (Views: 476.3ms | ActiveRecord: 1708.7ms | Allocations: 26670)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 19:57:55 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (851.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (196.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (197.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (196.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (100.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (99.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (204.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (177.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (201.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (197.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (106.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (194.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (99.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (179.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 199.0ms | Allocations: 2223)
  [1m[36mDish Load (197.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (1325.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (101.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 3.3ms | Allocations: 629)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 445)
  [1m[36mUser Load (83.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 3.7ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 3.7ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 226.5ms | Allocations: 4744)
  Rendered layouts/_add_comment.html.erb (Duration: 7.6ms | Allocations: 534)
  [1m[35m (266.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 4.9ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 5.4ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 24.3ms | Allocations: 1533)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 2282.4ms | Allocations: 11536)
  Rendered layouts/_header.html.erb (Duration: 19.8ms | Allocations: 1088)
  [1m[36mUser Load (86.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (92.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 219.6ms | Allocations: 4635)
  Rendered layout layouts/application.html.erb (Duration: 2568.7ms | Allocations: 21016)
Completed 200 OK in 5475ms (Views: 238.0ms | ActiveRecord: 5152.8ms | Allocations: 29513)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 19:58:52 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (98.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (94.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (99.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (76.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (194.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (286.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (90.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (99.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (101.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (102.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (98.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (202.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (181.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (179.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 195.8ms | Allocations: 2919)
  [1m[36mDish Load (91.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (85.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (179.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 5.2ms | Allocations: 879)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 446)
  [1m[36mUser Load (98.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 633.6ms | Allocations: 12827)
  Rendered layouts/_add_comment.html.erb (Duration: 4.5ms | Allocations: 680)
  [1m[35m (175.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 2.4ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 7.8ms | Allocations: 1507)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 1540.4ms | Allocations: 27255)
  Rendered layouts/_header.html.erb (Duration: 6.1ms | Allocations: 1351)
  [1m[36mUser Load (182.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (303.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 824.2ms | Allocations: 8096)
  Rendered layout layouts/application.html.erb (Duration: 2464.7ms | Allocations: 55631)
Completed 200 OK in 5958ms (Views: 389.3ms | ActiveRecord: 5186.0ms | Allocations: 84777)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 19:59:29 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (95.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (122.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (96.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (103.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (98.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (100.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (54.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (132.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (102.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (96.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (99.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (211.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (174.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (178.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 194.2ms | Allocations: 2921)
  [1m[36mDish Load (101.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (79.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (88.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 6.8ms | Allocations: 876)
  Rendered layouts/_reaction.html.erb (Duration: 2.7ms | Allocations: 446)
  [1m[36mUser Load (94.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 2.6ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 442.8ms | Allocations: 12774)
  Rendered layouts/_add_comment.html.erb (Duration: 5.3ms | Allocations: 683)
  [1m[35m (161.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 446)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 8.9ms | Allocations: 1509)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 1334.5ms | Allocations: 27211)
  Rendered layouts/_header.html.erb (Duration: 17.8ms | Allocations: 1350)
  [1m[36mUser Load (177.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (101.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 506.7ms | Allocations: 8457)
  Rendered layout layouts/application.html.erb (Duration: 1956.1ms | Allocations: 55947)
Completed 200 OK in 5061ms (Views: 393.6ms | ActiveRecord: 4247.8ms | Allocations: 85072)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 20:02:22 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (70.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (135.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (199.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (98.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (100.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (210.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (88.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (93.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (101.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (101.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (97.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (201.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (204.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (184.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 196.7ms | Allocations: 2220)
  [1m[36mDish Load (94.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (194.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (99.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 2.7ms | Allocations: 622)
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 445)
  [1m[36mUser Load (190.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.7ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 2.1ms | Allocations: 442)
  Rendered layouts/_comment.html.erb (Duration: 320.4ms | Allocations: 4718)
  Rendered layouts/_add_comment.html.erb (Duration: 3.3ms | Allocations: 528)
  [1m[35m (286.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 2.4ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 8.0ms | Allocations: 1491)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 1129.1ms | Allocations: 11388)
  Rendered layouts/_header.html.erb (Duration: 24.7ms | Allocations: 1088)
  [1m[36mUser Load (121.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (95.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 258.8ms | Allocations: 4659)
  Rendered layout layouts/application.html.erb (Duration: 1643.3ms | Allocations: 27919)
Completed 200 OK in 3402ms (Views: 379.3ms | ActiveRecord: 2967.4ms | Allocations: 33549)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 20:02:48 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (934.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (209.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (91.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (61.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (136.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (104.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (106.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (181.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (202.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (305.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (100.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (103.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (94.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (89.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 98.8ms | Allocations: 2223)
  [1m[36mDish Load (94.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (92.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (98.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 3.0ms | Allocations: 622)
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 445)
  [1m[36mUser Load (88.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 217.2ms | Allocations: 4722)
  Rendered layouts/_add_comment.html.erb (Duration: 3.4ms | Allocations: 530)
  [1m[35m (83.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 446)
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 8.0ms | Allocations: 1493)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 618.5ms | Allocations: 11393)
  Rendered layouts/_header.html.erb (Duration: 5.4ms | Allocations: 1092)
  [1m[36mUser Load (106.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (96.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 240.8ms | Allocations: 4662)
  Rendered layout layouts/application.html.erb (Duration: 937.9ms | Allocations: 27643)
Completed 200 OK in 3623ms (Views: 192.2ms | ActiveRecord: 3379.2ms | Allocations: 33282)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 20:03:06 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (117.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (100.5ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (97.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (98.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (101.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (101.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (100.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (60.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (235.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (98.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (205.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (196.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (300.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (84.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 100.7ms | Allocations: 2220)
  [1m[36mDish Load (200.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (105.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (84.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 3.2ms | Allocations: 620)
  Rendered layouts/_reaction.html.erb (Duration: 2.4ms | Allocations: 445)
  [1m[36mUser Load (188.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 445)
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 306.2ms | Allocations: 4716)
  Rendered layouts/_add_comment.html.erb (Duration: 3.0ms | Allocations: 528)
  [1m[35m (82.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 2.1ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 7.7ms | Allocations: 1491)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 827.3ms | Allocations: 11380)
  Rendered layouts/_header.html.erb (Duration: 3.1ms | Allocations: 1088)
  [1m[36mUser Load (238.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (98.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 362.3ms | Allocations: 4636)
  Rendered layout layouts/application.html.erb (Duration: 1245.4ms | Allocations: 27594)
Completed 200 OK in 3111ms (Views: 164.1ms | ActiveRecord: 2895.0ms | Allocations: 33227)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 20:03:40 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (115.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (91.5ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (94.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (205.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (99.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (98.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (94.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (94.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (175.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (231.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (98.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (198.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (298.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (92.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 107.6ms | Allocations: 2221)
  [1m[36mDish Load (89.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (91.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (105.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 3.5ms | Allocations: 626)
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 445)
  [1m[36mUser Load (183.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 2.2ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 322.0ms | Allocations: 4732)
  Rendered layouts/_add_comment.html.erb (Duration: 3.7ms | Allocations: 534)
  [1m[35m (182.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 7.1ms | Allocations: 1491)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 830.4ms | Allocations: 11407)
  Rendered layouts/_header.html.erb (Duration: 7.4ms | Allocations: 1092)
  [1m[36mUser Load (104.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (190.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 328.0ms | Allocations: 4665)
  Rendered layout layouts/application.html.erb (Duration: 1246.7ms | Allocations: 27665)
Completed 200 OK in 3207ms (Views: 207.8ms | ActiveRecord: 2934.9ms | Allocations: 33294)


Started GET "/" for 127.0.0.1 at 2023-11-20 20:03:59 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (189.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (95.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (105.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (108.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (86.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (179.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (99.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (90.3ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 515.7ms | Allocations: 12978)
  Rendered layouts/_header.html.erb (Duration: 3.7ms | Allocations: 1091)
  [1m[36mUser Load (72.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (102.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 189.6ms | Allocations: 4637)
  Rendered layout layouts/application.html.erb (Duration: 719.0ms | Allocations: 22665)
Completed 200 OK in 1382ms (Views: 79.5ms | ActiveRecord: 1226.4ms | Allocations: 34861)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-20 20:04:04 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (87.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (195.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (210.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (105.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (87.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-20 19:04:05.619602')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (197.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-20 19:04:05.718247')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (96.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-20 19:04:05.920337')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (103.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (95.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (99.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-20 19:04:06.228590')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (93.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (91.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-20 19:04:06.437316')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (199.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-20 19:04:06.536959')[0m  [["reviewable_id", 16], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (100.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (99.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 28.7ms | Allocations: 3534)
  Rendered layouts/_header.html.erb (Duration: 6.1ms | Allocations: 1093)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 20.2ms | Allocations: 4443)
  Rendered layout layouts/application.html.erb (Duration: 69.5ms | Allocations: 12822)
Completed 200 OK in 2434ms (Views: 82.4ms | ActiveRecord: 2212.9ms | Allocations: 23473)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 20:06:04 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (89.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (198.8ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (97.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (106.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (93.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (308.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (93.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (83.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (96.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (103.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (201.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (90.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (318.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (320.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 337.5ms | Allocations: 2918)
  [1m[36mDish Load (101.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (181.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (93.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 7.6ms | Allocations: 876)
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 446)
  [1m[36mUser Load (101.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.8ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 3.5ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 430.0ms | Allocations: 12798)
  Rendered layouts/_add_comment.html.erb (Duration: 3.7ms | Allocations: 680)
  [1m[35m (170.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 2.7ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 12.1ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 28.1ms | Allocations: 1507)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 1627.7ms | Allocations: 27229)
  Rendered layouts/_header.html.erb (Duration: 2.4ms | Allocations: 1360)
  [1m[36mUser Load (118.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (94.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 339.5ms | Allocations: 8115)
  Rendered layout layouts/application.html.erb (Duration: 2125.3ms | Allocations: 55780)
Completed 200 OK in 5570ms (Views: 447.4ms | ActiveRecord: 4683.2ms | Allocations: 84898)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 20:07:13 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (197.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (189.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (102.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (96.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (100.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (102.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (92.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (99.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (97.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (101.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (107.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (189.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (107.1ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (181.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 193.2ms | Allocations: 2221)
  [1m[36mDish Load (98.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (104.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (85.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 2.9ms | Allocations: 620)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 445)
  [1m[36mUser Load (87.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 203.5ms | Allocations: 4718)
  Rendered layouts/_add_comment.html.erb (Duration: 2.7ms | Allocations: 530)
  [1m[35m (333.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 8.7ms | Allocations: 1491)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 963.1ms | Allocations: 11390)
  Rendered layouts/_header.html.erb (Duration: 6.9ms | Allocations: 1096)
  [1m[36mUser Load (262.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (196.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 494.5ms | Allocations: 4645)
  Rendered layout layouts/application.html.erb (Duration: 1541.0ms | Allocations: 27635)
Completed 200 OK in 3188ms (Views: 196.6ms | ActiveRecord: 2930.7ms | Allocations: 33245)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 20:07:53 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (125.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (104.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (200.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (94.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (1095.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (128.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (99.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (97.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (94.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (104.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (98.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (101.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (89.1ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (90.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 101.9ms | Allocations: 2216)
  [1m[36mDish Load (200.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (92.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (98.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 3.0ms | Allocations: 620)
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 445)
  [1m[36mUser Load (84.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.2ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 210.8ms | Allocations: 4714)
  Rendered layouts/_add_comment.html.erb (Duration: 3.6ms | Allocations: 528)
  [1m[35m (189.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 8.6ms | Allocations: 1491)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 830.6ms | Allocations: 11375)
  Rendered layouts/_header.html.erb (Duration: 5.4ms | Allocations: 1088)
  [1m[36mUser Load (84.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (199.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 314.9ms | Allocations: 4635)
  Rendered layout layouts/application.html.erb (Duration: 1242.3ms | Allocations: 27580)
Completed 200 OK in 3731ms (Views: 206.4ms | ActiveRecord: 3471.3ms | Allocations: 33205)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 20:08:09 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (202.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (102.1ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (89.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (203.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (101.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (200.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (89.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (81.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (102.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (99.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (104.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (93.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (84.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (75.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 89.7ms | Allocations: 2913)
  [1m[36mDish Load (100.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (251.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (91.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 4.6ms | Allocations: 876)
  Rendered layouts/_reaction.html.erb (Duration: 2.2ms | Allocations: 446)
  [1m[36mUser Load (97.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 426.2ms | Allocations: 12805)
  Rendered layouts/_add_comment.html.erb (Duration: 5.4ms | Allocations: 680)
  [1m[35m (72.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 8.7ms | Allocations: 1507)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 1233.1ms | Allocations: 27244)
  Rendered layouts/_header.html.erb (Duration: 11.5ms | Allocations: 1358)
  [1m[36mUser Load (82.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (236.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 427.6ms | Allocations: 8118)
  Rendered layout layouts/application.html.erb (Duration: 1758.3ms | Allocations: 55784)
Completed 200 OK in 5849ms (Views: 405.6ms | ActiveRecord: 4221.3ms | Allocations: 84910)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:08:44 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (954.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (100.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (201.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (99.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (209.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (286.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (97.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (202.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (95.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (84.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (94.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 7.5ms | Allocations: 624)
  Rendered layouts/_reaction.html.erb (Duration: 2.9ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 4.0ms | Allocations: 441)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 265.0ms | Allocations: 7811)
  Rendered layouts/_add_comment.html.erb (Duration: 3.6ms | Allocations: 534)
  Rendered dishes/show.html.erb within layouts/application (Duration: 583.5ms | Allocations: 10473)
  Rendered layouts/_header.html.erb (Duration: 5.3ms | Allocations: 1088)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (92.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 115.3ms | Allocations: 4530)
  Rendered layout layouts/application.html.erb (Duration: 722.4ms | Allocations: 19864)
Completed 200 OK in 2710ms (Views: 155.4ms | ActiveRecord: 2518.1ms | Allocations: 24760)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:09:46 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (97.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (203.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (98.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (101.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (98.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (96.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (183.0ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (86.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (98.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (95.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (103.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 8.7ms | Allocations: 873)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 441)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 514.9ms | Allocations: 15071)
  Rendered layouts/_add_comment.html.erb (Duration: 3.8ms | Allocations: 683)
  Rendered dishes/show.html.erb within layouts/application (Duration: 720.0ms | Allocations: 18581)
  Rendered layouts/_header.html.erb (Duration: 7.1ms | Allocations: 1359)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (98.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 244.6ms | Allocations: 7945)
  Rendered layout layouts/application.html.erb (Duration: 1030.1ms | Allocations: 46945)
Completed 200 OK in 3152ms (Views: 322.6ms | ActiveRecord: 2666.5ms | Allocations: 69758)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:10:30 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (193.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (94.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (101.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (174.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (129.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (91.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (83.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (86.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (92.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (90.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (99.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 5.3ms | Allocations: 879)
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 2.4ms | Allocations: 441)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 477.4ms | Allocations: 15106)
  Rendered layouts/_add_comment.html.erb (Duration: 6.4ms | Allocations: 680)
  Rendered dishes/show.html.erb within layouts/application (Duration: 682.1ms | Allocations: 18612)
  Rendered layouts/_header.html.erb (Duration: 9.3ms | Allocations: 1360)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (103.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 370.6ms | Allocations: 7915)
  Rendered layout layouts/application.html.erb (Duration: 1130.8ms | Allocations: 46910)
Completed 200 OK in 3628ms (Views: 299.6ms | ActiveRecord: 3120.0ms | Allocations: 69886)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:19:41 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (30.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
Completed 500 Internal Server Error in 61ms (ActiveRecord: 30.5ms | Allocations: 1838)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::ConnectionFailed (PQconsumeInput() SSL SYSCALL error: EOF detected
):
  
Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:19:53 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.4ms | Allocations: 1469)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::ConnectionNotEstablished (PQsocket() can't get socket descriptor):
  
Started GET "/" for 127.0.0.1 at 2023-11-20 20:19:58 +0100
Processing by RestaurantsController#index as HTML
Completed 500 Internal Server Error in 37ms (ActiveRecord: 1.6ms | Allocations: 3647)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::ConnectionNotEstablished (PQsocket() can't get socket descriptor):
  
Started GET "/" for 127.0.0.1 at 2023-11-20 20:20:38 +0100
  [1m[36mActiveRecord::SchemaMigration Load (88.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (89.0ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (107.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (112.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (104.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (100.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (109.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (66.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (78.3ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 1980.4ms | Allocations: 133444)
  Rendered layouts/_header.html.erb (Duration: 3.4ms | Allocations: 1394)
  [1m[36mUser Load (81.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (82.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 904.9ms | Allocations: 17672)
  Rendered layout layouts/application.html.erb (Duration: 2935.3ms | Allocations: 173212)
Completed 200 OK in 4587ms (Views: 1940.4ms | ActiveRecord: 2286.0ms | Allocations: 215265)


Started GET "/users/mis_restaurantes" for 127.0.0.1 at 2023-11-20 20:20:51 +0100
Processing by UsersController#mis_restaurantes as HTML
  [1m[36mUser Load (80.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:77:in `mis_restaurantes'
  Rendering layout layouts/application.html.erb
  Rendering users/mis_restaurantes.html.erb within layouts/application
  [1m[36mRestaurant Load (63.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/views/users/mis_restaurantes.html.erb:8
  Rendered users/mis_restaurantes.html.erb within layouts/application (Duration: 68.8ms | Allocations: 1842)
  Rendered layouts/_header.html.erb (Duration: 3.3ms | Allocations: 1114)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 15.5ms | Allocations: 4412)
  Rendered layout layouts/application.html.erb (Duration: 96.6ms | Allocations: 11143)
Completed 200 OK in 184ms (Views: 36.1ms | ActiveRecord: 143.8ms | Allocations: 12272)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 20:20:53 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (136.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (96.1ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (89.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (93.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (98.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (115.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (85.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (70.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (80.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (457.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (64.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (976.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (1304.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (3600.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 3618.4ms | Allocations: 2882)
  [1m[36mDish Load (80.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (111.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (60.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 6.9ms | Allocations: 883)
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 446)
  [1m[36mUser Load (652.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.7ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 866.2ms | Allocations: 7834)
  Rendered layouts/_add_comment.html.erb (Duration: 4.5ms | Allocations: 685)
  [1m[35m (90.2ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 2.1ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 30.1ms | Allocations: 1538)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 5200.4ms | Allocations: 25177)
  Rendered layouts/_header.html.erb (Duration: 7.0ms | Allocations: 1092)
  [1m[36mUser Load (73.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (110.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 207.7ms | Allocations: 4649)
  Rendered layout layouts/application.html.erb (Duration: 5430.9ms | Allocations: 34688)
Completed 200 OK in 9925ms (Views: 430.8ms | ActiveRecord: 9125.0ms | Allocations: 67524)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:21:10 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (95.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (76.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (94.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (86.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (81.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (1941.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (96.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (77.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (88.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (64.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (92.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 620)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 2.9ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 184.4ms | Allocations: 7799)
  Rendered layouts/_add_comment.html.erb (Duration: 1.8ms | Allocations: 530)
  Rendered dishes/show.html.erb within layouts/application (Duration: 361.9ms | Allocations: 10505)
  Rendered layouts/_header.html.erb (Duration: 3.4ms | Allocations: 1092)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (88.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 100.5ms | Allocations: 4542)
  Rendered layout layouts/application.html.erb (Duration: 475.3ms | Allocations: 19919)
Completed 200 OK in 3039ms (Views: 65.5ms | ActiveRecord: 2883.9ms | Allocations: 24863)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:24:31 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (389.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (116.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (108.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (114.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (98.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (79.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (89.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (87.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (138.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (122.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (98.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 3.3ms | Allocations: 879)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 416.3ms | Allocations: 15147)
  Rendered layouts/_add_comment.html.erb (Duration: 2.1ms | Allocations: 680)
  Rendered dishes/show.html.erb within layouts/application (Duration: 656.2ms | Allocations: 19026)
  Rendered layouts/_header.html.erb (Duration: 4.8ms | Allocations: 1351)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (69.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 240.1ms | Allocations: 7918)
  Rendered layout layouts/application.html.erb (Duration: 939.9ms | Allocations: 47224)
Completed 200 OK in 5653ms (Views: 139.1ms | ActiveRecord: 5401.3ms | Allocations: 70196)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:25:45 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (80.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (78.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (78.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (79.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (80.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (94.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (79.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (70.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (92.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (85.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (276.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.4ms | Allocations: 618)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 391.6ms | Allocations: 7013)
  Rendered layouts/_add_comment.html.erb (Duration: 1.5ms | Allocations: 528)
  Rendered dishes/show.html.erb within layouts/application (Duration: 561.7ms | Allocations: 8592)
  Rendered layouts/_header.html.erb (Duration: 3.9ms | Allocations: 1088)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (117.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 133.6ms | Allocations: 4530)
  Rendered layout layouts/application.html.erb (Duration: 752.6ms | Allocations: 24982)
Completed 200 OK in 1343ms (Views: 111.8ms | ActiveRecord: 1214.0ms | Allocations: 28291)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:27:37 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (76.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (108.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (72.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (66.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (80.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (67.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (106.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (75.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (77.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered dishes/show.html.erb within layouts/application (Duration: 163.8ms | Allocations: 4040)
  Rendered layout layouts/application.html.erb (Duration: 164.5ms | Allocations: 4133)
Completed 500 Internal Server Error in 1494ms (ActiveRecord: 1378.1ms | Allocations: 27110)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `dish' for #<ActionView::Base:0x0000000001cea8>):
    25: 
    26:   
    27:   <div class="category_post_list">
    28:     <div class="restaurant_dish_container" onclick="window.location='<%= get_dish_path(dish) %>'" style="cursor: pointer;">
    29:       <% if dish.ruta_img_plato.present? %>
    30:         <%= image_tag dish.ruta_img_plato, class: "restaurant_dish_img" %>
    31:       <% else %>
  
app/views/dishes/show.html.erb:28
Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:28:54 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (83.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (267.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (64.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (88.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (69.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (92.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (63.1ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (66.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (70.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (70.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (61.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 879)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 269.4ms | Allocations: 14897)
  Rendered layouts/_add_comment.html.erb (Duration: 2.1ms | Allocations: 680)
  Rendered dishes/show.html.erb within layouts/application (Duration: 421.7ms | Allocations: 19374)
  Rendered layouts/_header.html.erb (Duration: 5.2ms | Allocations: 1361)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (82.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 176.3ms | Allocations: 7946)
  Rendered layout layouts/application.html.erb (Duration: 639.3ms | Allocations: 47807)
Completed 200 OK in 2219ms (Views: 142.0ms | ActiveRecord: 1983.1ms | Allocations: 70772)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:30:09 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (186.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (64.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (78.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (96.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (114.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (68.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (93.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (97.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (76.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (51.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (63.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 3.1ms | Allocations: 879)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 265.3ms | Allocations: 14886)
  Rendered layouts/_add_comment.html.erb (Duration: 2.0ms | Allocations: 680)
  Rendered dishes/show.html.erb within layouts/application (Duration: 457.8ms | Allocations: 19300)
  Rendered layouts/_header.html.erb (Duration: 5.1ms | Allocations: 1359)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (67.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 187.4ms | Allocations: 7943)
  Rendered layout layouts/application.html.erb (Duration: 678.3ms | Allocations: 47693)
Completed 200 OK in 2316ms (Views: 141.2ms | ActiveRecord: 2089.6ms | Allocations: 70669)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:30:55 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (69.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (62.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (149.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (69.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (72.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (67.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (68.1ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (52.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (105.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (77.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (82.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.6ms | Allocations: 875)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 299.4ms | Allocations: 14878)
  Rendered layouts/_add_comment.html.erb (Duration: 3.1ms | Allocations: 676)
  Rendered dishes/show.html.erb within layouts/application (Duration: 471.1ms | Allocations: 19277)
  Rendered layouts/_header.html.erb (Duration: 4.2ms | Allocations: 1351)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (70.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 160.6ms | Allocations: 7914)
  Rendered layout layouts/application.html.erb (Duration: 664.5ms | Allocations: 47471)
Completed 200 OK in 2257ms (Views: 126.9ms | ActiveRecord: 2026.3ms | Allocations: 70430)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:31:40 +0100
Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:31:41 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (115.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (74.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (93.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (63.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (77.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (86.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (68.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (59.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (65.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (54.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (67.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.5ms | Allocations: 879)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 288.0ms | Allocations: 14878)
  Rendered layouts/_add_comment.html.erb (Duration: 3.4ms | Allocations: 680)
  Rendered dishes/show.html.erb within layouts/application (Duration: 427.3ms | Allocations: 19284)
  Rendered layouts/_header.html.erb (Duration: 4.0ms | Allocations: 1359)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (69.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 167.7ms | Allocations: 7943)
  Rendered layout layouts/application.html.erb (Duration: 631.7ms | Allocations: 47675)
Completed 200 OK in 3521ms (Views: 129.4ms | ActiveRecord: 3306.3ms | Allocations: 70574)


Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (52.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (85.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (82.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (77.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (60.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (71.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (104.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (61.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (68.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (65.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (67.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 873)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 272.4ms | Allocations: 14855)
  Rendered layouts/_add_comment.html.erb (Duration: 2.6ms | Allocations: 674)
  Rendered dishes/show.html.erb within layouts/application (Duration: 414.6ms | Allocations: 19533)
  Rendered layouts/_header.html.erb (Duration: 5.7ms | Allocations: 1361)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (82.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 181.5ms | Allocations: 7942)
  Rendered layout layouts/application.html.erb (Duration: 648.2ms | Allocations: 47707)
Completed 200 OK in 1795ms (Views: 136.7ms | ActiveRecord: 1583.3ms | Allocations: 70570)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:34:19 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (98.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (126.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (201.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (101.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (101.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (93.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (94.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (128.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (143.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (162.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (108.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.4ms | Allocations: 875)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 434.0ms | Allocations: 14874)
  Rendered layouts/_add_comment.html.erb (Duration: 3.4ms | Allocations: 676)
  Rendered dishes/show.html.erb within layouts/application (Duration: 719.4ms | Allocations: 19631)
  Rendered layouts/_header.html.erb (Duration: 3.6ms | Allocations: 1359)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (120.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 263.8ms | Allocations: 7940)
  Rendered layout layouts/application.html.erb (Duration: 1015.5ms | Allocations: 47839)
Completed 200 OK in 5596ms (Views: 125.5ms | ActiveRecord: 5390.4ms | Allocations: 70805)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:36:28 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (65.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (197.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (71.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (133.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (115.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (150.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (66.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (83.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (91.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (61.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (73.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.7ms | Allocations: 879)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 297.5ms | Allocations: 14877)
  Rendered layouts/_add_comment.html.erb (Duration: 3.5ms | Allocations: 680)
  Rendered dishes/show.html.erb within layouts/application (Duration: 485.8ms | Allocations: 19290)
  Rendered layouts/_header.html.erb (Duration: 4.3ms | Allocations: 1359)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (60.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 236.1ms | Allocations: 7943)
  Rendered layout layouts/application.html.erb (Duration: 755.4ms | Allocations: 47682)
Completed 200 OK in 2670ms (Views: 127.1ms | ActiveRecord: 2450.0ms | Allocations: 70538)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:38:15 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (83.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (96.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (115.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (297.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (142.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (122.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (97.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (87.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (60.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (87.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (78.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.8ms | Allocations: 879)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 442)
  Rendered layouts/_comment.html.erb (Duration: 320.9ms | Allocations: 14881)
  Rendered layouts/_add_comment.html.erb (Duration: 3.0ms | Allocations: 680)
  Rendered dishes/show.html.erb within layouts/application (Duration: 484.9ms | Allocations: 19278)
  Rendered layouts/_header.html.erb (Duration: 4.6ms | Allocations: 1359)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (67.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 230.4ms | Allocations: 7944)
  Rendered layout layouts/application.html.erb (Duration: 752.3ms | Allocations: 47670)
Completed 200 OK in 4710ms (Views: 154.0ms | ActiveRecord: 4462.3ms | Allocations: 70541)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:38:35 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (229.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (64.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (71.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (68.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (77.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (56.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (64.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (77.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (136.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (59.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (72.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.4ms | Allocations: 879)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 322.8ms | Allocations: 14880)
  Rendered layouts/_add_comment.html.erb (Duration: 2.3ms | Allocations: 680)
  Rendered dishes/show.html.erb within layouts/application (Duration: 554.7ms | Allocations: 19273)
  Rendered layouts/_header.html.erb (Duration: 5.7ms | Allocations: 1359)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (75.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 212.8ms | Allocations: 7946)
  Rendered layout layouts/application.html.erb (Duration: 807.5ms | Allocations: 47669)
Completed 200 OK in 2363ms (Views: 150.9ms | ActiveRecord: 2117.3ms | Allocations: 70572)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:39:15 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (78.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (141.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (100.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (102.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (98.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (541.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (146.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (90.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (132.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (69.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (80.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 879)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 350.1ms | Allocations: 14887)
  Rendered layouts/_add_comment.html.erb (Duration: 1.8ms | Allocations: 680)
  Rendered dishes/show.html.erb within layouts/application (Duration: 588.2ms | Allocations: 19285)
  Rendered layouts/_header.html.erb (Duration: 4.6ms | Allocations: 1359)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (80.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 258.9ms | Allocations: 7944)
  Rendered layout layouts/application.html.erb (Duration: 884.4ms | Allocations: 47678)
Completed 200 OK in 3490ms (Views: 147.0ms | ActiveRecord: 3250.6ms | Allocations: 70634)


Started GET "/" for 127.0.0.1 at 2023-11-20 20:41:33 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (106.4ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (84.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (73.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (65.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (66.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (65.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (75.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (66.0ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 345.9ms | Allocations: 12958)
  Rendered layouts/_header.html.erb (Duration: 7.5ms | Allocations: 1101)
  [1m[36mUser Load (72.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (67.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 162.1ms | Allocations: 4677)
  Rendered layout layouts/application.html.erb (Duration: 526.9ms | Allocations: 22756)
Completed 200 OK in 1185ms (Views: 88.1ms | ActiveRecord: 1050.2ms | Allocations: 29978)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-20 20:41:40 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (19263.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
Completed 500 Internal Server Error in 19269ms (ActiveRecord: 19263.5ms | Allocations: 1978)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::ConnectionFailed (PQconsumeInput() server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.
server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.
):
  
Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-20 20:42:58 +0100
  [1m[36mActiveRecord::SchemaMigration Load (100.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (74.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (79.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (75.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (97.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (182.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-20 19:43:06.304710')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (92.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-20 19:43:06.490119')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (89.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-20 19:43:06.584848')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (93.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (64.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (88.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-20 19:43:07.491793')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (72.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (118.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-20 19:43:07.944070')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (73.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-20 19:43:08.064981')[0m  [["reviewable_id", 16], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (83.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (64.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 435.5ms | Allocations: 123041)
  Rendered layouts/_header.html.erb (Duration: 4.6ms | Allocations: 1368)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 16.2ms | Allocations: 5198)
  Rendered layout layouts/application.html.erb (Duration: 482.7ms | Allocations: 148808)
Completed 200 OK in 4085ms (Views: 491.4ms | ActiveRecord: 3003.5ms | Allocations: 216751)


Started GET "/logout" for 127.0.0.1 at 2023-11-20 20:43:11 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.0ms | Allocations: 495)


Started GET "/" for 127.0.0.1 at 2023-11-20 20:43:11 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (58.6ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (67.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (58.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (67.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (51.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (62.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (62.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (81.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 327.1ms | Allocations: 13994)
  Rendered layouts/_header.html.erb (Duration: 2.3ms | Allocations: 1089)
  Rendered layouts/_sidenav.html.erb (Duration: 9.0ms | Allocations: 2662)
  Rendered layout layouts/application.html.erb (Duration: 352.9ms | Allocations: 21697)
Completed 200 OK in 971ms (Views: 72.6ms | ActiveRecord: 743.5ms | Allocations: 34714)


Started GET "/login" for 127.0.0.1 at 2023-11-20 20:43:14 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 11.0ms | Allocations: 2964)
  Rendered layouts/_header.html.erb (Duration: 4.1ms | Allocations: 1089)
  Rendered layouts/_sidenav.html.erb (Duration: 7.8ms | Allocations: 2659)
  Rendered layout layouts/application.html.erb (Duration: 34.4ms | Allocations: 10475)
Completed 200 OK in 38ms (Views: 36.1ms | ActiveRecord: 0.0ms | Allocations: 10951)


Started GET "/users/new" for 127.0.0.1 at 2023-11-20 20:43:16 +0100
Processing by UsersController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 5.9ms | Allocations: 2314)
  Rendered layouts/_header.html.erb (Duration: 2.9ms | Allocations: 1089)
  Rendered layouts/_sidenav.html.erb (Duration: 6.8ms | Allocations: 2659)
  Rendered layout layouts/application.html.erb (Duration: 23.6ms | Allocations: 9822)
Completed 200 OK in 36ms (Views: 25.0ms | ActiveRecord: 0.0ms | Allocations: 10152)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-20 20:43:35 +0100
Processing by UsersController#show as */*
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (185.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
Completed 500 Internal Server Error in 1607ms (ActiveRecord: 185.7ms | Allocations: 1244)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
NoMethodError (undefined method `id' for nil:NilClass):
  
app/controllers/users_controller.rb:29:in `show'
Started GET "/users/new" for 127.0.0.1 at 2023-11-20 20:43:49 +0100
Processing by UsersController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 11.2ms | Allocations: 2023)
  Rendered layouts/_header.html.erb (Duration: 7.9ms | Allocations: 1093)
  Rendered layouts/_sidenav.html.erb (Duration: 13.0ms | Allocations: 2669)
  Rendered layout layouts/application.html.erb (Duration: 48.3ms | Allocations: 9558)
Completed 200 OK in 52ms (Views: 50.8ms | ActiveRecord: 0.0ms | Allocations: 9820)


Started POST "/users/new" for 127.0.0.1 at 2023-11-20 20:44:00 +0100
Processing by UsersController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"nombre"=>"str1ien", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"CREAR CUENTA"}
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (15087.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Create (18464.6ms)[0m  [1m[32mINSERT INTO "users" ("nombre", "ruta_img_perfil", "esAdmin", "password_digest") VALUES ($1, $2, $3, $4)[0m  [["nombre", "str1ien"], ["ruta_img_perfil", nil], ["esAdmin", false], ["password_digest", "[FILTERED]"]]
  â†³ app/controllers/users_controller.rb:18:in `create'
  [1m[36mTRANSACTION (399.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:18:in `create'
Redirected to http://localhost:3000/is_rest_owner
Completed 302 Found in 19139ms (ActiveRecord: 33950.7ms | Allocations: 3597)


Started GET "/is_rest_owner" for 127.0.0.1 at 2023-11-20 20:44:19 +0100
Processing by UsersController#is_restaurant_owner as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering users/is_restaurant_owner.html.erb within layouts/application
  Rendered users/is_restaurant_owner.html.erb within layouts/application (Duration: 1.7ms | Allocations: 199)
  Rendered layouts/_header.html.erb (Duration: 4.7ms | Allocations: 1114)
  [1m[36mUser Load (3129.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (81.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 3231.0ms | Allocations: 4110)
  Rendered layout layouts/application.html.erb (Duration: 3250.5ms | Allocations: 9618)
Completed 200 OK in 3263ms (Views: 42.5ms | ActiveRecord: 3210.1ms | Allocations: 9974)


Started GET "/restaurants/new" for 127.0.0.1 at 2023-11-20 20:44:26 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (606.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 635.2ms | Allocations: 15933)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 639.4ms | Allocations: 17148)
  Rendered layouts/_header.html.erb (Duration: 4.4ms | Allocations: 1088)
  [1m[36mUser Load (107.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
Started GET "/restaurants/new" for 127.0.0.1 at 2023-11-20 20:44:27 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mRestaurant Load (146.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 275.2ms | Allocations: 6796)
  Rendered layout layouts/application.html.erb (Duration: 929.5ms | Allocations: 28795)
Completed 200 OK in 940ms (Views: 69.8ms | ActiveRecord: 860.8ms | Allocations: 29131)


  [1m[36mCategory Load (1895.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 1907.2ms | Allocations: 8316)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 1908.2ms | Allocations: 8458)
  Rendered layouts/_header.html.erb (Duration: 4.7ms | Allocations: 1088)
  [1m[36mUser Load (82.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (135.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 505.5ms | Allocations: 4195)
  Rendered layout layouts/application.html.erb (Duration: 2429.6ms | Allocations: 17501)
Completed 200 OK in 2432ms (Views: -545.4ms | ActiveRecord: 2976.4ms | Allocations: 17767)


Started GET "/" for 127.0.0.1 at 2023-11-20 20:44:43 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (137.0ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (74.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (66.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (64.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (114.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (91.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (79.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (71.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 269.4ms | Allocations: 10542)
  Rendered layouts/_header.html.erb (Duration: 3.2ms | Allocations: 1089)
  [1m[36mUser Load (75.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (77.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 168.8ms | Allocations: 4121)
  Rendered layout layouts/application.html.erb (Duration: 454.0ms | Allocations: 19702)
Completed 200 OK in 984ms (Views: 60.9ms | ActiveRecord: 851.4ms | Allocations: 22226)


Started GET "/users/str1ien" for 127.0.0.1 at 2023-11-20 20:44:47 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"str1ien"}
  [1m[36mUser Load (88.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (58.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (75.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (69.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (74.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-20 19:44:47.363352')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (74.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-20 19:44:47.441498')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (157.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-20 19:44:47.519535')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (67.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 5.7ms | Allocations: 2270)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1093)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (63.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 74.7ms | Allocations: 4009)
  Rendered layout layouts/application.html.erb (Duration: 91.2ms | Allocations: 11120)
Completed 200 OK in 796ms (Views: 29.3ms | ActiveRecord: 728.3ms | Allocations: 15489)


Started GET "/users/new" for 127.0.0.1 at 2023-11-20 20:44:57 +0100
Processing by UsersController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 7.8ms | Allocations: 2024)
  Rendered layouts/_header.html.erb (Duration: 4.9ms | Allocations: 1093)
  [1m[36mUser Load (98.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (49.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 161.5ms | Allocations: 4114)
  Rendered layout layouts/application.html.erb (Duration: 185.5ms | Allocations: 11004)
Completed 200 OK in 188ms (Views: 38.5ms | ActiveRecord: 148.3ms | Allocations: 11266)


Started GET "/users/str1ien" for 127.0.0.1 at 2023-11-20 20:45:00 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"str1ien"}
  [1m[36mUser Load (66.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (67.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (73.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (82.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (57.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-20 19:45:00.899623')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (64.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-20 19:45:00.959431')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (74.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-20 19:45:01.025835')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (112.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 9.0ms | Allocations: 2265)
  Rendered layouts/_header.html.erb (Duration: 2.8ms | Allocations: 1089)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (75.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 100.5ms | Allocations: 3998)
  Rendered layout layouts/application.html.erb (Duration: 125.1ms | Allocations: 11087)
Completed 200 OK in 748ms (Views: 51.1ms | ActiveRecord: 672.6ms | Allocations: 15463)


Started GET "/logout" for 127.0.0.1 at 2023-11-20 20:45:02 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.0ms | Allocations: 362)


Started GET "/" for 127.0.0.1 at 2023-11-20 20:45:02 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (148.1ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (89.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (76.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (68.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (69.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (77.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (71.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (63.0ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 242.8ms | Allocations: 10550)
  Rendered layouts/_header.html.erb (Duration: 3.2ms | Allocations: 1089)
  Rendered layouts/_sidenav.html.erb (Duration: 11.9ms | Allocations: 2659)
  Rendered layout layouts/application.html.erb (Duration: 275.1ms | Allocations: 18256)
Completed 200 OK in 740ms (Views: 65.3ms | ActiveRecord: 662.2ms | Allocations: 20749)


Started GET "/login" for 127.0.0.1 at 2023-11-20 20:45:04 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 5.7ms | Allocations: 2607)
  Rendered layouts/_header.html.erb (Duration: 2.6ms | Allocations: 1089)
  Rendered layouts/_sidenav.html.erb (Duration: 4.7ms | Allocations: 2659)
  Rendered layout layouts/application.html.erb (Duration: 21.3ms | Allocations: 10115)
Completed 200 OK in 24ms (Views: 22.6ms | ActiveRecord: 0.0ms | Allocations: 10377)


Started GET "/users/new" for 127.0.0.1 at 2023-11-20 20:45:05 +0100
Processing by UsersController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 7.6ms | Allocations: 2015)
  Rendered layouts/_header.html.erb (Duration: 7.6ms | Allocations: 1089)
  Rendered layouts/_sidenav.html.erb (Duration: 12.1ms | Allocations: 2659)
  Rendered layout layouts/application.html.erb (Duration: 49.9ms | Allocations: 9523)
Completed 200 OK in 53ms (Views: 51.8ms | ActiveRecord: 0.0ms | Allocations: 9785)


Started POST "/users/new" for 127.0.0.1 at 2023-11-20 20:45:25 +0100
Processing by UsersController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"nombre"=>"carlos", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"CREAR CUENTA"}
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (551.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Create (708.6ms)[0m  [1m[32mINSERT INTO "users" ("nombre", "ruta_img_perfil", "esAdmin", "password_digest") VALUES ($1, $2, $3, $4)[0m  [["nombre", "carlos"], ["ruta_img_perfil", nil], ["esAdmin", false], ["password_digest", "[FILTERED]"]]
  â†³ app/controllers/users_controller.rb:18:in `create'
  [1m[36mTRANSACTION (144.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:18:in `create'
Redirected to http://localhost:3000/is_rest_owner
Completed 302 Found in 1134ms (ActiveRecord: 1404.3ms | Allocations: 2297)


Started GET "/is_rest_owner" for 127.0.0.1 at 2023-11-20 20:45:26 +0100
Processing by UsersController#is_restaurant_owner as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering users/is_restaurant_owner.html.erb within layouts/application
  Rendered users/is_restaurant_owner.html.erb within layouts/application (Duration: 0.6ms | Allocations: 59)
  Rendered layouts/_header.html.erb (Duration: 4.5ms | Allocations: 1114)
  [1m[36mUser Load (63.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (68.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "carlos"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 154.4ms | Allocations: 4104)
  Rendered layout layouts/application.html.erb (Duration: 177.3ms | Allocations: 9428)
Completed 200 OK in 183ms (Views: 50.8ms | ActiveRecord: 132.2ms | Allocations: 9681)


Started GET "/restaurants/new" for 127.0.0.1 at 2023-11-20 20:45:31 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (3776.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 3787.8ms | Allocations: 3088)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 3789.9ms | Allocations: 3230)
  Rendered layouts/_header.html.erb (Duration: 4.1ms | Allocations: 1092)
  [1m[36mUser Load (398.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (83.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "carlos"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 502.2ms | Allocations: 4117)
  Rendered layout layouts/application.html.erb (Duration: 4314.5ms | Allocations: 12212)
Completed 200 OK in 4316ms (Views: 57.5ms | ActiveRecord: 4257.9ms | Allocations: 12480)


Started GET "/restaurants/new" for 127.0.0.1 at 2023-11-20 20:47:13 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (75.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 204.2ms | Allocations: 6438)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 209.9ms | Allocations: 7644)
  Rendered layouts/_header.html.erb (Duration: 3.8ms | Allocations: 1345)
  [1m[36mUser Load (45.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (59.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "carlos"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 300.3ms | Allocations: 13005)
  Rendered layout layouts/application.html.erb (Duration: 570.4ms | Allocations: 40930)
Completed 200 OK in 1043ms (Views: 159.1ms | ActiveRecord: 750.2ms | Allocations: 49568)


Started GET "/restaurants/new" for 127.0.0.1 at 2023-11-20 20:48:44 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (148.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 303.1ms | Allocations: 6405)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 309.7ms | Allocations: 7629)
  Rendered layouts/_header.html.erb (Duration: 8.9ms | Allocations: 1343)
  [1m[36mUser Load (200.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (98.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "carlos"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 833.0ms | Allocations: 12947)
  Rendered layout layouts/application.html.erb (Duration: 1213.8ms | Allocations: 40835)
Completed 200 OK in 1779ms (Views: 235.3ms | ActiveRecord: 1294.6ms | Allocations: 49326)


Started GET "/restaurants/new" for 127.0.0.1 at 2023-11-20 20:49:37 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (65.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 162.6ms | Allocations: 6403)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 168.3ms | Allocations: 7631)
  Rendered layouts/_header.html.erb (Duration: 3.1ms | Allocations: 1353)
  [1m[36mUser Load (49.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (67.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "carlos"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 318.6ms | Allocations: 13010)
  Rendered layout layouts/application.html.erb (Duration: 599.9ms | Allocations: 41003)
Completed 200 OK in 1656ms (Views: 190.6ms | ActiveRecord: 619.4ms | Allocations: 49566)


Started GET "/restaurants/new" for 127.0.0.1 at 2023-11-20 20:50:22 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (126.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 857.3ms | Allocations: 6389)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 862.0ms | Allocations: 7620)
  Rendered layouts/_header.html.erb (Duration: 5.3ms | Allocations: 1351)
  [1m[36mUser Load (58.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (64.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "carlos"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 361.3ms | Allocations: 12993)
  Rendered layout layouts/application.html.erb (Duration: 1258.6ms | Allocations: 40978)
Completed 200 OK in 1848ms (Views: 120.9ms | ActiveRecord: 1574.3ms | Allocations: 49457)


Started GET "/restaurants/new" for 127.0.0.1 at 2023-11-20 20:50:32 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (74.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 165.7ms | Allocations: 6400)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 169.9ms | Allocations: 7638)
  Rendered layouts/_header.html.erb (Duration: 4.4ms | Allocations: 1351)
  [1m[36mUser Load (57.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (88.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "carlos"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 318.0ms | Allocations: 13029)
  Rendered layout layouts/application.html.erb (Duration: 526.6ms | Allocations: 41011)
Completed 200 OK in 940ms (Views: 116.0ms | ActiveRecord: 718.7ms | Allocations: 49557)


Started GET "/restaurants/new" for 127.0.0.1 at 2023-11-20 20:51:17 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (56.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 153.5ms | Allocations: 6377)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 157.6ms | Allocations: 7618)
  Rendered layouts/_header.html.erb (Duration: 9.0ms | Allocations: 1339)
  [1m[36mUser Load (58.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (50.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "carlos"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 297.9ms | Allocations: 12905)
  Rendered layout layouts/application.html.erb (Duration: 510.0ms | Allocations: 40669)
Completed 200 OK in 840ms (Views: 156.0ms | ActiveRecord: 559.6ms | Allocations: 49090)


Started GET "/restaurants/new" for 127.0.0.1 at 2023-11-20 20:51:44 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (106.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 211.3ms | Allocations: 6394)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 214.2ms | Allocations: 7644)
  Rendered layouts/_header.html.erb (Duration: 10.4ms | Allocations: 1351)
  [1m[36mUser Load (121.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (58.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "carlos"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 493.5ms | Allocations: 13029)
  Rendered layout layouts/application.html.erb (Duration: 761.4ms | Allocations: 41016)
Completed 200 OK in 2968ms (Views: 156.5ms | ActiveRecord: 838.9ms | Allocations: 49584)


Started GET "/restaurants/new" for 127.0.0.1 at 2023-11-20 20:52:03 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (60.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 206.3ms | Allocations: 6391)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 211.0ms | Allocations: 7644)
  Rendered layouts/_header.html.erb (Duration: 8.0ms | Allocations: 1353)
  [1m[36mUser Load (78.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (67.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "carlos"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 366.0ms | Allocations: 12989)
  Rendered layout layouts/application.html.erb (Duration: 649.3ms | Allocations: 40840)
Completed 200 OK in 1029ms (Views: 183.3ms | ActiveRecord: 734.7ms | Allocations: 49265)


Started GET "/restaurants/new" for 127.0.0.1 at 2023-11-20 20:53:19 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (82.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 190.4ms | Allocations: 6402)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 198.5ms | Allocations: 7666)
  Rendered layouts/_header.html.erb (Duration: 4.7ms | Allocations: 1351)
  [1m[36mUser Load (67.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (65.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "carlos"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 359.2ms | Allocations: 12926)
  Rendered layout layouts/application.html.erb (Duration: 615.9ms | Allocations: 40867)
Completed 200 OK in 2563ms (Views: 174.7ms | ActiveRecord: 1161.4ms | Allocations: 49328)


Started GET "/users/carlos" for 127.0.0.1 at 2023-11-20 20:54:38 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"carlos"}
  [1m[36mUser Load (109.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (97.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "carlos"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (101.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "carlos"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (101.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "carlos"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (96.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-20 19:54:39.136406')[0m  [["autor", "carlos"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (102.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-20 19:54:39.236484')[0m  [["autor", "carlos"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (106.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-20 19:54:39.342422')[0m  [["autor", "carlos"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (84.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "carlos"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 14.1ms | Allocations: 3106)
  Rendered layouts/_header.html.erb (Duration: 3.9ms | Allocations: 1089)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (74.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "carlos"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 92.6ms | Allocations: 4002)
  Rendered layout layouts/application.html.erb (Duration: 126.3ms | Allocations: 11936)
Completed 200 OK in 1264ms (Views: 53.7ms | ActiveRecord: 1138.7ms | Allocations: 23173)


Started GET "/logout" for 127.0.0.1 at 2023-11-20 20:54:40 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.0ms | Allocations: 447)


Started GET "/" for 127.0.0.1 at 2023-11-20 20:54:40 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (84.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (60.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (67.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (58.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (49.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (78.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (61.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (59.2ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 236.1ms | Allocations: 11433)
  Rendered layouts/_header.html.erb (Duration: 3.8ms | Allocations: 1101)
  Rendered layouts/_sidenav.html.erb (Duration: 13.2ms | Allocations: 2691)
  Rendered layout layouts/application.html.erb (Duration: 267.8ms | Allocations: 19193)
Completed 200 OK in 843ms (Views: 71.2ms | ActiveRecord: 741.1ms | Allocations: 25733)


Started GET "/login" for 127.0.0.1 at 2023-11-20 20:54:42 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 7.5ms | Allocations: 2946)
  Rendered layouts/_header.html.erb (Duration: 2.3ms | Allocations: 1089)
  Rendered layouts/_sidenav.html.erb (Duration: 5.8ms | Allocations: 2659)
  Rendered layout layouts/application.html.erb (Duration: 25.9ms | Allocations: 10460)
Completed 200 OK in 28ms (Views: 27.1ms | ActiveRecord: 0.0ms | Allocations: 10910)


Started POST "/login" for 127.0.0.1 at 2023-11-20 20:54:47 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"gari", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (61.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 336ms (ActiveRecord: 60.9ms | Allocations: 876)


Started GET "/" for 127.0.0.1 at 2023-11-20 20:54:48 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (138.2ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (60.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (59.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (55.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (72.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (91.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (99.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (75.1ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 312.5ms | Allocations: 10526)
  Rendered layouts/_header.html.erb (Duration: 4.0ms | Allocations: 1089)
  [1m[36mUser Load (63.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (70.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 159.8ms | Allocations: 4104)
  Rendered layout layouts/application.html.erb (Duration: 494.8ms | Allocations: 19739)
Completed 200 OK in 894ms (Views: 96.1ms | ActiveRecord: 785.2ms | Allocations: 22282)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-20 20:54:55 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"gari"}
  [1m[36mUser Load (102.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (66.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (76.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (76.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (90.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-20 19:54:55.772545')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (97.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-20 19:54:55.865261')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (74.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-20 19:54:55.964778')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (119.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 5.8ms | Allocations: 2299)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1089)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (60.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 72.7ms | Allocations: 3998)
  Rendered layout layouts/application.html.erb (Duration: 88.9ms | Allocations: 11121)
Completed 200 OK in 816ms (Views: 29.4ms | ActiveRecord: 764.7ms | Allocations: 15510)


Started GET "/admin" for 127.0.0.1 at 2023-11-20 20:55:04 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (164.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-20 19:55:04.065548')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (91.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-20 19:55:04.232971')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (63.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-20 19:55:04.325950')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (62.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 1.5ms | Allocations: 347)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1114)
  [1m[36mUser Load (61.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (56.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 129.9ms | Allocations: 4126)
  Rendered layout layouts/application.html.erb (Duration: 142.0ms | Allocations: 9736)
Completed 200 OK in 536ms (Views: 26.7ms | ActiveRecord: 498.8ms | Allocations: 12011)


Started GET "/admin" for 127.0.0.1 at 2023-11-20 21:06:58 +0100
  [1m[36mActiveRecord::SchemaMigration Load (69.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (58.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-20 20:07:00.728099')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (67.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-20 20:07:00.967071')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (76.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-20 20:07:01.118368')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (69.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (113.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:15
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 219.1ms | Allocations: 7251)
  Rendered layouts/_header.html.erb (Duration: 54.0ms | Allocations: 1438)
  [1m[36mUser Load (121.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (78.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 3340.3ms | Allocations: 16737)
  Rendered layout layouts/application.html.erb (Duration: 4077.1ms | Allocations: 171727)
Completed 200 OK in 4900ms (Views: 873.1ms | ActiveRecord: 3908.7ms | Allocations: 195800)


Started GET "/admin" for 127.0.0.1 at 2023-11-20 21:07:26 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (66.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-20 20:07:27.111311')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (57.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-20 20:07:32.676101')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (1194.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-20 20:07:32.812623')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (64.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (70.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:15
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 145.0ms | Allocations: 3076)
  Rendered layouts/_header.html.erb (Duration: 4.8ms | Allocations: 1391)
  [1m[36mUser Load (80.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (48.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 406.7ms | Allocations: 11926)
  Rendered layout layouts/application.html.erb (Duration: 594.9ms | Allocations: 35754)
Completed 200 OK in 7758ms (Views: 94.7ms | ActiveRecord: 2896.9ms | Allocations: 49556)


Started GET "/admin" for 127.0.0.1 at 2023-11-20 21:08:00 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (59.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-20 20:08:01.073001')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (59.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-20 20:08:01.313724')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (56.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-20 20:08:01.460252')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (58.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (72.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:15
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 152.9ms | Allocations: 2730)
  Rendered layouts/_header.html.erb (Duration: 5.4ms | Allocations: 1391)
  [1m[36mUser Load (62.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (66.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 357.5ms | Allocations: 11924)
  Rendered layout layouts/application.html.erb (Duration: 550.3ms | Allocations: 35443)
Completed 200 OK in 1262ms (Views: 92.3ms | ActiveRecord: 990.4ms | Allocations: 48860)


Started GET "/admin" for 127.0.0.1 at 2023-11-20 21:08:25 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (135.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-20 20:08:25.431025')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (122.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-20 20:08:25.570381')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (87.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-20 20:08:25.695472')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (86.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (115.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:15
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 119.8ms | Allocations: 994)
  Rendered layouts/_header.html.erb (Duration: 3.6ms | Allocations: 1114)
  [1m[36mUser Load (58.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (288.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 363.3ms | Allocations: 4105)
  Rendered layout layouts/application.html.erb (Duration: 542.6ms | Allocations: 17094)
Completed 200 OK in 987ms (Views: 81.8ms | ActiveRecord: 893.4ms | Allocations: 19136)


Started GET "/admin" for 127.0.0.1 at 2023-11-20 21:09:09 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (144.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-20 20:09:09.122128')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (64.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-20 20:09:09.269513')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (82.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-20 20:09:09.337404')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (71.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (69.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:15
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 73.1ms | Allocations: 994)
  Rendered layouts/_header.html.erb (Duration: 3.2ms | Allocations: 1114)
  [1m[36mUser Load (63.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (63.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 143.2ms | Allocations: 4107)
  Rendered layout layouts/application.html.erb (Duration: 258.3ms | Allocations: 17109)
Completed 200 OK in 636ms (Views: 64.1ms | ActiveRecord: 558.8ms | Allocations: 19124)


Started GET "/admin" for 127.0.0.1 at 2023-11-20 21:09:52 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (178.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-20 20:09:52.778068')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (98.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-20 20:09:52.959563')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (89.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-20 20:09:53.060826')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (76.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (73.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:15
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 77.4ms | Allocations: 994)
  Rendered layouts/_header.html.erb (Duration: 5.9ms | Allocations: 1114)
  [1m[36mUser Load (243.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (128.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 403.7ms | Allocations: 4117)
  Rendered layout layouts/application.html.erb (Duration: 538.5ms | Allocations: 17108)
Completed 200 OK in 992ms (Views: 95.4ms | ActiveRecord: 886.0ms | Allocations: 19124)


Started GET "/admin" for 127.0.0.1 at 2023-11-20 21:10:19 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (174.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-20 20:10:19.436015')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (155.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-20 20:10:19.613232')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (104.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-20 20:10:19.771190')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (61.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (83.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:15
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 87.6ms | Allocations: 994)
  Rendered layouts/_header.html.erb (Duration: 4.5ms | Allocations: 1118)
  [1m[36mUser Load (57.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (57.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 134.8ms | Allocations: 4114)
  Rendered layout layouts/application.html.erb (Duration: 282.4ms | Allocations: 17136)
Completed 200 OK in 790ms (Views: 86.4ms | ActiveRecord: 692.5ms | Allocations: 19156)


Started GET "/admin" for 127.0.0.1 at 2023-11-20 21:10:56 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (161.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-20 20:10:56.285538')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (58.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-20 20:10:56.449464')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (78.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-20 20:10:56.510518')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (48.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (63.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:15
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 67.3ms | Allocations: 995)
  Rendered layouts/_header.html.erb (Duration: 2.7ms | Allocations: 1114)
  [1m[36mUser Load (70.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (79.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 165.2ms | Allocations: 4104)
  Rendered layout layouts/application.html.erb (Duration: 286.4ms | Allocations: 17082)
Completed 200 OK in 647ms (Views: 74.6ms | ActiveRecord: 559.8ms | Allocations: 19097)


Started GET "/admin" for 127.0.0.1 at 2023-11-20 21:11:06 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (149.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-20 20:11:06.461250')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (69.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-20 20:11:06.613797')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (100.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-20 20:11:06.685999')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (355.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (69.8ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:15
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 73.5ms | Allocations: 994)
  Rendered layouts/_header.html.erb (Duration: 3.8ms | Allocations: 1114)
  [1m[36mUser Load (70.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (65.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 152.2ms | Allocations: 4104)
  Rendered layout layouts/application.html.erb (Duration: 283.9ms | Allocations: 17099)
Completed 200 OK in 972ms (Views: 79.9ms | ActiveRecord: 879.5ms | Allocations: 19115)


Started GET "/admin" for 127.0.0.1 at 2023-11-20 21:11:18 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (170.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-20 20:11:18.119539')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (66.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-20 20:11:18.293658')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (58.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-20 20:11:18.362293')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (56.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (87.9ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:15
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 92.3ms | Allocations: 994)
  Rendered layouts/_header.html.erb (Duration: 2.7ms | Allocations: 1122)
  [1m[36mUser Load (67.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (65.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 147.7ms | Allocations: 4120)
  Rendered layout layouts/application.html.erb (Duration: 292.4ms | Allocations: 17145)
Completed 200 OK in 660ms (Views: 73.1ms | ActiveRecord: 574.0ms | Allocations: 19161)


Started GET "/admin" for 127.0.0.1 at 2023-11-20 21:11:37 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (137.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-20 20:11:37.937270')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (62.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-20 20:11:38.081291')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (66.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-20 20:11:38.146805')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (54.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (61.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:15
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 64.9ms | Allocations: 994)
  Rendered layouts/_header.html.erb (Duration: 2.8ms | Allocations: 1122)
  [1m[36mUser Load (56.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (81.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 154.5ms | Allocations: 4120)
  Rendered layout layouts/application.html.erb (Duration: 256.7ms | Allocations: 17130)
Completed 200 OK in 595ms (Views: 59.4ms | ActiveRecord: 519.8ms | Allocations: 19146)


Started GET "/admin" for 127.0.0.1 at 2023-11-20 21:11:56 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (149.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-20 20:11:56.187015')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (65.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-20 20:11:56.337889')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (58.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-20 20:11:56.405317')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (60.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (58.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:15
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 61.8ms | Allocations: 994)
  Rendered layouts/_header.html.erb (Duration: 2.2ms | Allocations: 1114)
  [1m[36mUser Load (74.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (60.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 152.5ms | Allocations: 4105)
  Rendered layout layouts/application.html.erb (Duration: 258.0ms | Allocations: 17093)
Completed 200 OK in 602ms (Views: 66.4ms | ActiveRecord: 526.6ms | Allocations: 19108)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-20 21:13:30 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"gari"}
  [1m[36mUser Load (2180.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (138.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (202.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (98.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (305.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-20 20:13:33.321310')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (97.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-20 20:13:33.630525')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (98.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-20 20:13:33.732767')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (84.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 21.0ms | Allocations: 3923)
  Rendered layouts/_header.html.erb (Duration: 7.0ms | Allocations: 1089)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (78.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 101.2ms | Allocations: 4019)
  Rendered layout layouts/application.html.erb (Duration: 145.1ms | Allocations: 12769)
Completed 200 OK in 3384ms (Views: 68.7ms | ActiveRecord: 3284.6ms | Allocations: 17506)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-20 21:14:15 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"gari"}
  [1m[36mUser Load (2542.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (145.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (125.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (140.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (111.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-20 20:14:18.410924')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (108.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-20 20:14:18.524974')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (112.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-20 20:14:18.635831')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (131.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 6.6ms | Allocations: 2302)
  Rendered layouts/_header.html.erb (Duration: 2.8ms | Allocations: 1097)
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (92.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 103.8ms | Allocations: 4013)
  Rendered layout layouts/application.html.erb (Duration: 146.1ms | Allocations: 17913)
Completed 200 OK in 3584ms (Views: 54.3ms | ActiveRecord: 3510.4ms | Allocations: 22278)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-20 21:15:11 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"gari"}
  [1m[36mUser Load (99.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (64.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (57.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (143.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (77.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-20 20:15:11.571380')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (73.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-20 20:15:11.651655')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (70.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-20 20:15:11.727376')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (67.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 9.7ms | Allocations: 2285)
  Rendered layouts/_header.html.erb (Duration: 4.0ms | Allocations: 1089)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (65.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 83.7ms | Allocations: 3998)
  Rendered layout layouts/application.html.erb (Duration: 137.4ms | Allocations: 17851)
Completed 200 OK in 819ms (Views: 73.5ms | ActiveRecord: 720.5ms | Allocations: 22209)


Started GET "/admin" for 127.0.0.1 at 2023-11-20 21:15:17 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (152.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-20 20:15:17.151893')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (67.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-20 20:15:17.306754')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (65.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-20 20:15:17.375468')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (67.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (349.8ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:15
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 354.8ms | Allocations: 994)
  Rendered layouts/_header.html.erb (Duration: 2.6ms | Allocations: 1114)
  [1m[36mUser Load (465.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (274.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 764.2ms | Allocations: 4107)
  Rendered layout layouts/application.html.erb (Duration: 1137.5ms | Allocations: 10358)
Completed 200 OK in 1498ms (Views: 48.7ms | ActiveRecord: 1441.6ms | Allocations: 12448)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-20 21:15:53 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"gari"}
  [1m[36mUser Load (15464.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
Completed 500 Internal Server Error in 15469ms (ActiveRecord: 15464.1ms | Allocations: 2018)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::ConnectionFailed (PQconsumeInput() server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.
server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.
):
  
Started GET "/admin" for 127.0.0.1 at 2023-11-20 21:16:10 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (2176.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-20 20:16:10.348214')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
Completed 500 Internal Server Error in 2180ms (ActiveRecord: 2176.2ms | Allocations: 3313)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::NoDatabaseError (We could not find your database: brm33sftclngywwhayzb. Available database configurations can be found in config/database.yml file.

To resolve this error:

- Did you create the database for this app, or delete it? You may need to create your database.
- Has the database name changed? Check your database.yml config has the correct database name.

To create your database, run:

        bin/rails db:create
):
  
app/controllers/admin_controller.rb:5:in `dashboard'
Started GET "/" for 127.0.0.1 at 2023-11-20 21:16:26 +0100
Processing by RestaurantsController#index as HTML
Completed 500 Internal Server Error in 20062ms (ActiveRecord: 0.0ms | Allocations: 5113)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::NoDatabaseError (We could not find your database: brm33sftclngywwhayzb. Available database configurations can be found in config/database.yml file.

To resolve this error:

- Did you create the database for this app, or delete it? You may need to create your database.
- Has the database name changed? Check your database.yml config has the correct database name.

To create your database, run:

        bin/rails db:create
):
  
app/controllers/restaurants_controller.rb:12:in `index'
Started GET "/" for 127.0.0.1 at 2023-11-20 21:16:59 +0100
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::NoDatabaseError (We could not find your database: brm33sftclngywwhayzb. Available database configurations can be found in config/database.yml file.

To resolve this error:

- Did you create the database for this app, or delete it? You may need to create your database.
- Has the database name changed? Check your database.yml config has the correct database name.

To create your database, run:

        bin/rails db:create
):
  
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:74:in `rescue in new_client'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:68:in `new_client'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:981:in `connect'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:993:in `reconnect'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:685:in `block in reconnect!'
activesupport (7.1.1) lib/active_support/concurrency/null_lock.rb:9:in `synchronize'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:684:in `reconnect!'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:788:in `verify!'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:795:in `connect!'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:997:in `block in with_raw_connection'
activesupport (7.1.1) lib/active_support/concurrency/null_lock.rb:9:in `synchronize'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:996:in `with_raw_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:1104:in `valid_raw_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:619:in `get_database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/schema_cache.rb:374:in `database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/schema_cache.rb:70:in `database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/schema_cache.rb:200:in `database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:871:in `database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:647:in `check_version'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:675:in `new_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:720:in `checkout_new_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:699:in `try_to_checkout_new_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:657:in `acquire_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:355:in `checkout'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:184:in `connection'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:501:in `block in with_temporary_connection'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:518:in `with_temporary_pool'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:500:in `with_temporary_connection'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:494:in `block in with_temporary_connection_for_each'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:493:in `each'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:493:in `with_temporary_connection_for_each'
activerecord (7.1.1) lib/active_record/migration.rb:771:in `pending_migrations'
activerecord (7.1.1) lib/active_record/migration.rb:750:in `check_pending_migrations'
activerecord (7.1.1) lib/active_record/migration.rb:642:in `block (2 levels) in call'
activesupport (7.1.1) lib/active_support/file_update_checker.rb:85:in `execute'
activerecord (7.1.1) lib/active_record/migration.rb:647:in `block in call'
activerecord (7.1.1) lib/active_record/migration.rb:639:in `synchronize'
activerecord (7.1.1) lib/active_record/migration.rb:639:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
activesupport (7.1.1) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.1.1) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/actionable_exceptions.rb:16:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (7.1.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (7.1.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (7.1.1) lib/active_support/tagged_logging.rb:135:in `block in tagged'
activesupport (7.1.1) lib/active_support/tagged_logging.rb:39:in `tagged'
activesupport (7.1.1) lib/active_support/tagged_logging.rb:135:in `tagged'
activesupport (7.1.1) lib/active_support/broadcast_logger.rb:232:in `method_missing'
railties (7.1.1) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/remote_ip.rb:92:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/request_id.rb:28:in `call'
rack (3.0.8) lib/rack/method_override.rb:28:in `call'
rack (3.0.8) lib/rack/runtime.rb:24:in `call'
activesupport (7.1.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/server_timing.rb:59:in `block in call'
actionpack (7.1.1) lib/action_dispatch/middleware/server_timing.rb:24:in `collect_events'
actionpack (7.1.1) lib/action_dispatch/middleware/server_timing.rb:58:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.8) lib/rack/sendfile.rb:114:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/host_authorization.rb:141:in `call'
railties (7.1.1) lib/rails/engine.rb:529:in `call'
puma (6.4.0) lib/puma/configuration.rb:272:in `call'
puma (6.4.0) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.0) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.0) lib/puma/request.rb:99:in `handle_request'
puma (6.4.0) lib/puma/server.rb:443:in `process_client'
puma (6.4.0) lib/puma/server.rb:241:in `block in run'
puma (6.4.0) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
Started GET "/" for 127.0.0.1 at 2023-11-20 21:21:53 +0100
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::DatabaseConnectionError (There is an issue connecting to your database with your username/password, username: ufmtugbort5e5ro1nkzn.

Please check your database configuration to ensure the username/password are valid.
):
  
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:76:in `rescue in new_client'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:68:in `new_client'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:981:in `connect'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:993:in `reconnect'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:685:in `block in reconnect!'
activesupport (7.1.1) lib/active_support/concurrency/null_lock.rb:9:in `synchronize'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:684:in `reconnect!'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:788:in `verify!'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:795:in `connect!'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:997:in `block in with_raw_connection'
activesupport (7.1.1) lib/active_support/concurrency/null_lock.rb:9:in `synchronize'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:996:in `with_raw_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:1104:in `valid_raw_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:619:in `get_database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/schema_cache.rb:374:in `database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/schema_cache.rb:70:in `database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/schema_cache.rb:200:in `database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:871:in `database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:647:in `check_version'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:675:in `new_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:720:in `checkout_new_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:699:in `try_to_checkout_new_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:657:in `acquire_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:355:in `checkout'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:184:in `connection'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:501:in `block in with_temporary_connection'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:518:in `with_temporary_pool'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:500:in `with_temporary_connection'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:494:in `block in with_temporary_connection_for_each'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:493:in `each'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:493:in `with_temporary_connection_for_each'
activerecord (7.1.1) lib/active_record/migration.rb:771:in `pending_migrations'
activerecord (7.1.1) lib/active_record/migration.rb:750:in `check_pending_migrations'
activerecord (7.1.1) lib/active_record/migration.rb:642:in `block (2 levels) in call'
activesupport (7.1.1) lib/active_support/file_update_checker.rb:85:in `execute'
activerecord (7.1.1) lib/active_record/migration.rb:647:in `block in call'
activerecord (7.1.1) lib/active_record/migration.rb:639:in `synchronize'
activerecord (7.1.1) lib/active_record/migration.rb:639:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
activesupport (7.1.1) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.1.1) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/actionable_exceptions.rb:16:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (7.1.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (7.1.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (7.1.1) lib/active_support/tagged_logging.rb:135:in `block in tagged'
activesupport (7.1.1) lib/active_support/tagged_logging.rb:39:in `tagged'
activesupport (7.1.1) lib/active_support/tagged_logging.rb:135:in `tagged'
activesupport (7.1.1) lib/active_support/broadcast_logger.rb:232:in `method_missing'
railties (7.1.1) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/remote_ip.rb:92:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/request_id.rb:28:in `call'
rack (3.0.8) lib/rack/method_override.rb:28:in `call'
rack (3.0.8) lib/rack/runtime.rb:24:in `call'
activesupport (7.1.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/server_timing.rb:59:in `block in call'
actionpack (7.1.1) lib/action_dispatch/middleware/server_timing.rb:24:in `collect_events'
actionpack (7.1.1) lib/action_dispatch/middleware/server_timing.rb:58:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.8) lib/rack/sendfile.rb:114:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/host_authorization.rb:141:in `call'
railties (7.1.1) lib/rails/engine.rb:529:in `call'
puma (6.4.0) lib/puma/configuration.rb:272:in `call'
puma (6.4.0) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.0) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.0) lib/puma/request.rb:99:in `handle_request'
puma (6.4.0) lib/puma/server.rb:443:in `process_client'
puma (6.4.0) lib/puma/server.rb:241:in `block in run'
puma (6.4.0) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
