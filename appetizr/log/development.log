Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 11:51:49 +0100
  [1m[36mActiveRecord::SchemaMigration Load (23.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (29.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (23.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (23.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (23.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (22.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 302.1ms | Allocations: 39293)
  [1m[36mDish Load (24.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (24.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (23.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 3.0ms | Allocations: 914)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 440)
  Rendered layouts/_comment.html.erb (Duration: 171.2ms | Allocations: 10643)
  Rendered layouts/_add_comment.html.erb (Duration: 2.8ms | Allocations: 699)
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (23.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 31.2ms | Allocations: 2345)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 696.1ms | Allocations: 65256)
  Rendered layouts/_header.html.erb (Duration: 6.1ms | Allocations: 1425)
  Rendered layouts/_sidenav.html.erb (Duration: 23.7ms | Allocations: 3496)
  Rendered layout layouts/application.html.erb (Duration: 766.7ms | Allocations: 89471)
Completed 200 OK in 1853ms (Views: 582.3ms | ActiveRecord: 785.6ms | Allocations: 152132)


Started GET "/login" for 127.0.0.1 at 2023-11-20 11:51:56 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 16.0ms | Allocations: 3299)
  Rendered layouts/_header.html.erb (Duration: 5.3ms | Allocations: 1092)
  Rendered layouts/_sidenav.html.erb (Duration: 10.2ms | Allocations: 2665)
  Rendered layout layouts/application.html.erb (Duration: 48.2ms | Allocations: 10841)
Completed 200 OK in 88ms (Views: 51.2ms | ActiveRecord: 0.0ms | Allocations: 14354)


Started POST "/login" for 127.0.0.1 at 2023-11-20 11:52:01 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"gari", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 348ms (ActiveRecord: 24.4ms | Allocations: 1137)


Started GET "/" for 127.0.0.1 at 2023-11-20 11:52:01 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (47.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (23.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (23.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (23.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (25.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (26.1ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 144.6ms | Allocations: 13990)
  Rendered layouts/_header.html.erb (Duration: 4.1ms | Allocations: 1085)
  [1m[36mUser Load (23.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 125.1ms | Allocations: 7932)
  Rendered layout layouts/application.html.erb (Duration: 287.3ms | Allocations: 26993)
Completed 200 OK in 458ms (Views: 116.6ms | ActiveRecord: 314.4ms | Allocations: 32236)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 11:52:03 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (22.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (23.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (23.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (23.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (23.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (23.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 29.6ms | Allocations: 2131)
  [1m[36mDish Load (26.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (22.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (23.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (23.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 617)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 60.2ms | Allocations: 2745)
  Rendered layouts/_add_comment.html.erb (Duration: 1.9ms | Allocations: 529)
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (24.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 32.3ms | Allocations: 1890)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 259.6ms | Allocations: 10145)
  Rendered layouts/_header.html.erb (Duration: 4.7ms | Allocations: 1084)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 39.3ms | Allocations: 3988)
  Rendered layout layouts/application.html.erb (Duration: 313.9ms | Allocations: 18968)
Completed 200 OK in 659ms (Views: 76.9ms | ActiveRecord: 548.5ms | Allocations: 24558)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-20 11:52:11 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"gari"}
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (23.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (23.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (23.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (25.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-20 10:52:11.387550')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (24.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-20 10:52:11.416898')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (23.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-20 10:52:11.445954')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (23.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 17.4ms | Allocations: 3570)
  Rendered layouts/_header.html.erb (Duration: 7.0ms | Allocations: 1099)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 49.3ms | Allocations: 4049)
  Rendered layout layouts/application.html.erb (Duration: 96.9ms | Allocations: 12476)
Completed 200 OK in 347ms (Views: 74.8ms | ActiveRecord: 239.6ms | Allocations: 18077)


Started GET "/logout" for 127.0.0.1 at 2023-11-20 11:52:13 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.0ms | Allocations: 349)


Started GET "/" for 127.0.0.1 at 2023-11-20 11:52:13 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (47.4ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (23.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (23.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (23.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (23.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (23.9ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 107.9ms | Allocations: 11504)
  Rendered layouts/_header.html.erb (Duration: 2.6ms | Allocations: 1099)
  Rendered layouts/_sidenav.html.erb (Duration: 8.9ms | Allocations: 2661)
  Rendered layout layouts/application.html.erb (Duration: 131.8ms | Allocations: 19228)
Completed 200 OK in 288ms (Views: 61.4ms | ActiveRecord: 214.2ms | Allocations: 21727)


Started GET "/admin" for 127.0.0.1 at 2023-11-20 11:52:21 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (48.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-20 10:52:21.477000')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (24.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-20 10:52:21.529184')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-20 10:52:21.556855')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (24.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 2.8ms | Allocations: 351)
  Rendered layouts/_header.html.erb (Duration: 4.9ms | Allocations: 1110)
  Rendered layouts/_sidenav.html.erb (Duration: 10.8ms | Allocations: 2650)
  Rendered layout layouts/application.html.erb (Duration: 36.9ms | Allocations: 8245)
Completed 200 OK in 179ms (Views: 40.8ms | ActiveRecord: 121.9ms | Allocations: 10517)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-20 11:52:28 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"gari"}
  [1m[36mUser Load (26.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
Completed 500 Internal Server Error in 33ms (ActiveRecord: 26.3ms | Allocations: 1229)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
NoMethodError (undefined method `id' for nil:NilClass):
  
app/controllers/users_controller.rb:29:in `show'
Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 11:52:32 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (23.5ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (32.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (24.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (23.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 4.8ms | Allocations: 1909)
  [1m[36mDish Load (23.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (23.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (23.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 621)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 59.8ms | Allocations: 3342)
  Rendered layouts/_add_comment.html.erb (Duration: 1.0ms | Allocations: 533)
  [1m[35m (24.2ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (23.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 31.8ms | Allocations: 2304)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 155.0ms | Allocations: 10238)
  Rendered layouts/_header.html.erb (Duration: 2.3ms | Allocations: 1098)
  Rendered layouts/_sidenav.html.erb (Duration: 8.7ms | Allocations: 2684)
  Rendered layout layouts/application.html.erb (Duration: 175.1ms | Allocations: 17818)
Completed 200 OK in 536ms (Views: 58.8ms | ActiveRecord: 437.5ms | Allocations: 23431)


Started GET "/login" for 127.0.0.1 at 2023-11-20 11:52:40 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 5.5ms | Allocations: 2624)
  Rendered layouts/_header.html.erb (Duration: 4.5ms | Allocations: 1085)
  Rendered layouts/_sidenav.html.erb (Duration: 7.0ms | Allocations: 2649)
  Rendered layout layouts/application.html.erb (Duration: 28.0ms | Allocations: 10112)
Completed 200 OK in 31ms (Views: 29.5ms | ActiveRecord: 0.0ms | Allocations: 10373)


Started POST "/login" for 127.0.0.1 at 2023-11-20 11:52:49 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"Atreides", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (24.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 309ms (ActiveRecord: 24.3ms | Allocations: 856)


Started GET "/" for 127.0.0.1 at 2023-11-20 11:52:49 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (48.8ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (23.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (27.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (23.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (26.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (22.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (23.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (23.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 94.9ms | Allocations: 11488)
  Rendered layouts/_header.html.erb (Duration: 2.9ms | Allocations: 1085)
  [1m[36mUser Load (22.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 60.7ms | Allocations: 4655)
  Rendered layout layouts/application.html.erb (Duration: 166.3ms | Allocations: 21191)
Completed 200 OK in 329ms (Views: 51.6ms | ActiveRecord: 265.8ms | Allocations: 23684)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 11:52:54 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (23.5ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (23.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (23.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (23.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.0ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (23.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 31.0ms | Allocations: 2177)
  [1m[36mDish Load (24.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (23.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (22.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (23.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 629)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 443)
  Rendered layouts/_comment.html.erb (Duration: 41.4ms | Allocations: 2359)
  Rendered layouts/_add_comment.html.erb (Duration: 2.5ms | Allocations: 533)
  [1m[35m (23.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 4.5ms | Allocations: 1487)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 215.5ms | Allocations: 9538)
  Rendered layouts/_header.html.erb (Duration: 4.2ms | Allocations: 1098)
  [1m[36mUser Load (23.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 61.4ms | Allocations: 4665)
  Rendered layout layouts/application.html.erb (Duration: 289.9ms | Allocations: 19099)
Completed 200 OK in 632ms (Views: 79.7ms | ActiveRecord: 520.3ms | Allocations: 24674)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 11:53:58 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (24.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (26.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (23.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (24.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (23.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (23.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 623)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 439)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 70.7ms | Allocations: 7793)
  Rendered layouts/_add_comment.html.erb (Duration: 2.0ms | Allocations: 533)
  Rendered dishes/show.html.erb within layouts/application (Duration: 130.1ms | Allocations: 10502)
  Rendered layouts/_header.html.erb (Duration: 3.1ms | Allocations: 1086)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 38.8ms | Allocations: 4519)
  Rendered layout layouts/application.html.erb (Duration: 186.3ms | Allocations: 19890)
Completed 200 OK in 405ms (Views: 69.1ms | ActiveRecord: 291.9ms | Allocations: 24755)


Started GET "/restaurants/3/dishes/3/edit" for 127.0.0.1 at 2023-11-20 11:54:24 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"3"}
  [1m[36mDish Load (23.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.9ms | Allocations: 1642)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 5.8ms | Allocations: 2141)
  Rendered layout layouts/application.html.erb (Duration: 6.2ms | Allocations: 2233)
Completed 500 Internal Server Error in 60ms (ActiveRecord: 23.1ms | Allocations: 3497)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (No route matches {:action=>"create", :controller=>"dishes", :restaurant_id=>nil}, missing required keys: [:restaurant_id]):
    1: <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
    2: <%= form_for @dish, url: restaurant_dishes_path(@restaurant), html: { multipart: true } do |form| %>
    3:   <div class="categories_new_form_container">
    4:       <div class="categories_new_name_container">
    5:         <% if !@dish.imported_id %>
  
app/views/dishes/_form.html.erb:2
app/views/dishes/edit.html.erb:7
Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 11:54:35 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (26.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (23.1ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (27.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (26.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (29.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (22.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (25.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 32.4ms | Allocations: 2189)
  [1m[36mDish Load (29.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (35.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (23.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (27.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (23.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 2.1ms | Allocations: 625)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 443)
  Rendered layouts/_comment.html.erb (Duration: 34.3ms | Allocations: 2355)
  Rendered layouts/_add_comment.html.erb (Duration: 1.4ms | Allocations: 533)
  [1m[35m (25.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 5.1ms | Allocations: 1487)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 233.7ms | Allocations: 9546)
  Rendered layouts/_header.html.erb (Duration: 3.9ms | Allocations: 1098)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 63.4ms | Allocations: 4664)
  Rendered layout layouts/application.html.erb (Duration: 308.5ms | Allocations: 19106)
Completed 200 OK in 677ms (Views: 70.8ms | ActiveRecord: 569.2ms | Allocations: 24666)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 12:04:07 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (26.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (27.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (28.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (29.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (26.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (27.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (27.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.0ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (27.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 35.2ms | Allocations: 2841)
  [1m[36mDish Load (25.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (26.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (29.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (26.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 3.8ms | Allocations: 875)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 444)
  Rendered layouts/_comment.html.erb (Duration: 76.8ms | Allocations: 5138)
  Rendered layouts/_add_comment.html.erb (Duration: 1.8ms | Allocations: 679)
  [1m[35m (26.2ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 445)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 4.8ms | Allocations: 1506)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 318.0ms | Allocations: 19671)
  Rendered layouts/_header.html.erb (Duration: 3.1ms | Allocations: 1356)
  [1m[36mUser Load (26.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (29.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 148.3ms | Allocations: 13198)
  Rendered layout layouts/application.html.erb (Duration: 502.7ms | Allocations: 53284)
Completed 200 OK in 1645ms (Views: 266.3ms | ActiveRecord: 835.7ms | Allocations: 84355)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 12:04:17 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (25.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (26.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (25.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (26.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (27.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 616)
  Rendered layouts/_reaction.html.erb (Duration: 2.5ms | Allocations: 439)
  Rendered layouts/_reaction.html.erb (Duration: 3.7ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 7.8ms | Allocations: 439)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 9.1ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 7.3ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 122.1ms | Allocations: 7787)
  Rendered layouts/_add_comment.html.erb (Duration: 6.3ms | Allocations: 526)
  Rendered dishes/show.html.erb within layouts/application (Duration: 197.1ms | Allocations: 10442)
  Rendered layouts/_header.html.erb (Duration: 13.8ms | Allocations: 1084)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (27.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 56.0ms | Allocations: 4541)
  Rendered layout layouts/application.html.erb (Duration: 309.9ms | Allocations: 19831)
Completed 200 OK in 545ms (Views: 179.9ms | ActiveRecord: 315.6ms | Allocations: 24735)


Started GET "/restaurants/3/dishes/16" for 127.0.0.1 at 2023-11-20 12:04:20 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"16"}
  [1m[36mRestaurant Load (28.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (26.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 16], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (26.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=16 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=16 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=16 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 16], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=16 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (25.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 16], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 29.9ms | Allocations: 487)
  Rendered layouts/_add_comment.html.erb (Duration: 4.7ms | Allocations: 739)
  Rendered dishes/show.html.erb within layouts/application (Duration: 94.4ms | Allocations: 2276)
  Rendered layouts/_header.html.erb (Duration: 3.6ms | Allocations: 1090)
  [1m[36mUser Load (27.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (26.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 69.6ms | Allocations: 4651)
  Rendered layout layouts/application.html.erb (Duration: 180.3ms | Allocations: 11790)
Completed 200 OK in 382ms (Views: 51.6ms | ActiveRecord: 313.7ms | Allocations: 14918)


Started GET "/restaurants/3/dishes/4/edit" for 127.0.0.1 at 2023-11-20 12:04:24 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mDish Load (26.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.7ms | Allocations: 1594)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 7.7ms | Allocations: 2085)
  Rendered layout layouts/application.html.erb (Duration: 8.3ms | Allocations: 2177)
Completed 500 Internal Server Error in 69ms (ActiveRecord: 26.4ms | Allocations: 3435)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (No route matches {:action=>"create", :controller=>"dishes", :restaurant_id=>nil}, missing required keys: [:restaurant_id]):
    1: <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
    2: <%= form_for @dish, url: restaurant_dishes_path(@restaurant), html: { multipart: true } do |form| %>
    3:   <div class="categories_new_form_container">
    4:       <div class="categories_new_name_container">
    5:         <% if !@dish.imported_id %>
  
app/views/dishes/_form.html.erb:2
app/views/dishes/edit.html.erb:7
Started GET "/restaurants/3/dishes/4/edit" for 127.0.0.1 at 2023-11-20 12:04:49 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mDish Load (26.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 0.8ms | Allocations: 1184)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 1.7ms | Allocations: 1457)
  Rendered layout layouts/application.html.erb (Duration: 2.0ms | Allocations: 1549)
Completed 500 Internal Server Error in 33ms (ActiveRecord: 26.7ms | Allocations: 2181)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (No route matches {:action=>"create", :controller=>"dishes", :restaurant_id=>nil}, missing required keys: [:restaurant_id]):
    1: <!-- Formulario para crear un nuevo plato: tiene que usar el modelo Dish y el modelo Restaurant -->
    2: <%= form_for @dish, url: restaurant_dishes_path(@restaurant), html: { multipart: true } do |form| %>
    3:   <div class="categories_new_form_container">
    4:       <div class="categories_new_name_container">
    5:         <% if !@dish.imported_id %>
  
app/views/dishes/_form.html.erb:2
app/views/dishes/edit.html.erb:7
Started GET "/restaurants/3/dishes/4/edit" for 127.0.0.1 at 2023-11-20 12:15:00 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mDish Load (25.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 26.2ms | Allocations: 2984)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 29.2ms | Allocations: 3482)
  Rendered layouts/_header.html.erb (Duration: 5.8ms | Allocations: 1354)
  [1m[36mUser Load (27.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (26.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 181.9ms | Allocations: 20138)
  Rendered layout layouts/application.html.erb (Duration: 249.8ms | Allocations: 44033)
Completed 200 OK in 904ms (Views: 199.0ms | ActiveRecord: 319.8ms | Allocations: 53342)


Started PATCH "/restaurants/3/dishes" for 127.0.0.1 at 2023-11-20 12:16:37 +0100
Processing by ErrorsController#not_found as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"patodonald", "descripcion"=>"patodonald", "precio"=>"40", "ruta_img_plato"=>#<ActionDispatch::Http::UploadedFile:0x00007f46c821e560 @tempfile=#<Tempfile:/tmp/RackMultipart20231120-6300-k195qb.jpg>, @content_type="image/jpeg", @original_filename="photo.jpg", @headers="Content-Disposition: form-data; name=\"dish[ruta_img_plato]\"; filename=\"photo.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "button"=>"", "unmatched"=>"restaurants/3/dishes"}
  Rendering layout layouts/application.html.erb
  Rendering errors/not_found.html.erb within layouts/application
  Rendered errors/not_found.html.erb within layouts/application (Duration: 0.9ms | Allocations: 91)
  Rendered layouts/_header.html.erb (Duration: 2.2ms | Allocations: 1121)
  [1m[36mUser Load (26.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 65.9ms | Allocations: 4624)
  Rendered layout layouts/application.html.erb (Duration: 77.0ms | Allocations: 9821)
Completed 404 Not Found in 81ms (Views: 28.4ms | ActiveRecord: 51.1ms | Allocations: 10581)


Started GET "/restaurants/3/dishes/16/edit" for 127.0.0.1 at 2023-11-20 12:17:45 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"16"}
  [1m[36mDish Load (26.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 10.6ms | Allocations: 2842)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 13.2ms | Allocations: 3343)
  Rendered layouts/_header.html.erb (Duration: 4.7ms | Allocations: 1354)
  [1m[36mUser Load (26.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (26.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 267.0ms | Allocations: 20712)
  Rendered layout layouts/application.html.erb (Duration: 357.6ms | Allocations: 44467)
Completed 200 OK in 551ms (Views: 201.5ms | ActiveRecord: 322.7ms | Allocations: 50870)


Started PATCH "/restaurants/3/dishes" for 127.0.0.1 at 2023-11-20 12:18:31 +0100
Processing by ErrorsController#not_found as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"tumadre", "descripcion"=>"sisi la tuya", "precio"=>"10.85", "ruta_img_plato"=>#<ActionDispatch::Http::UploadedFile:0x00007f46c8219600 @tempfile=#<Tempfile:/tmp/RackMultipart20231120-6300-m9i5fb.jpg>, @content_type="image/jpeg", @original_filename="photo.jpg", @headers="Content-Disposition: form-data; name=\"dish[ruta_img_plato]\"; filename=\"photo.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "button"=>"", "unmatched"=>"restaurants/3/dishes"}
  Rendering layout layouts/application.html.erb
  Rendering errors/not_found.html.erb within layouts/application
  Rendered errors/not_found.html.erb within layouts/application (Duration: 0.7ms | Allocations: 89)
  Rendered layouts/_header.html.erb (Duration: 3.6ms | Allocations: 1121)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 65.7ms | Allocations: 4624)
  Rendered layout layouts/application.html.erb (Duration: 80.2ms | Allocations: 9819)
Completed 404 Not Found in 84ms (Views: 31.9ms | ActiveRecord: 49.9ms | Allocations: 10584)


Started GET "/restaurants/3/dishes/16/edit" for 127.0.0.1 at 2023-11-20 12:19:34 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"16"}
  [1m[36mDish Load (26.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 6.2ms | Allocations: 2842)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 8.9ms | Allocations: 3316)
  Rendered layouts/_header.html.erb (Duration: 3.1ms | Allocations: 1354)
  [1m[36mUser Load (28.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (27.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 276.1ms | Allocations: 20712)
  Rendered layout layouts/application.html.erb (Duration: 321.5ms | Allocations: 44441)
Completed 200 OK in 481ms (Views: 159.7ms | ActiveRecord: 302.2ms | Allocations: 50820)


Started PATCH "/restaurants/3/dishes" for 127.0.0.1 at 2023-11-20 12:20:03 +0100
Processing by ErrorsController#not_found as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"Borsch", "descripcion"=>"best borsch you will eat in your life", "precio"=>"10.85", "ruta_img_plato"=>#<ActionDispatch::Http::UploadedFile:0x00007f46ccba0d78 @tempfile=#<Tempfile:/tmp/RackMultipart20231120-6300-ew75dk.jpg>, @content_type="image/jpeg", @original_filename="photo.jpg", @headers="Content-Disposition: form-data; name=\"dish[ruta_img_plato]\"; filename=\"photo.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "button"=>"", "unmatched"=>"restaurants/3/dishes"}
  Rendering layout layouts/application.html.erb
  Rendering errors/not_found.html.erb within layouts/application
  Rendered errors/not_found.html.erb within layouts/application (Duration: 0.9ms | Allocations: 89)
  Rendered layouts/_header.html.erb (Duration: 3.0ms | Allocations: 1121)
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 67.1ms | Allocations: 4624)
  Rendered layout layouts/application.html.erb (Duration: 81.4ms | Allocations: 9819)
Completed 404 Not Found in 85ms (Views: 32.5ms | ActiveRecord: 50.5ms | Allocations: 10581)


Started GET "/restaurants/3/dishes/16/edit" for 127.0.0.1 at 2023-11-20 12:20:52 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"16"}
  [1m[36mDish Load (27.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 8.1ms | Allocations: 2169)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 9.4ms | Allocations: 2427)
  Rendered layouts/_header.html.erb (Duration: 4.6ms | Allocations: 1084)
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 73.2ms | Allocations: 4630)
  Rendered layout layouts/application.html.erb (Duration: 96.8ms | Allocations: 11891)
Completed 200 OK in 129ms (Views: 48.2ms | ActiveRecord: 77.4ms | Allocations: 12546)


Started GET "/categories" for 127.0.0.1 at 2023-11-20 12:23:48 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (25.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (25.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 123.7ms | Allocations: 6573)
  Rendered layouts/_header.html.erb (Duration: 3.1ms | Allocations: 1116)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 38.1ms | Allocations: 4540)
  Rendered layout layouts/application.html.erb (Duration: 175.2ms | Allocations: 15998)
Completed 200 OK in 190ms (Views: 75.3ms | ActiveRecord: 102.2ms | Allocations: 17629)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-20 12:23:51 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (27.1ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (25.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (27.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (26.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (26.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (26.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (26.8ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 133.2ms | Allocations: 11221)
  Rendered layouts/_header.html.erb (Duration: 4.6ms | Allocations: 1085)
  [1m[36mUser Load (27.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (26.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 74.7ms | Allocations: 4643)
  Rendered layout layouts/application.html.erb (Duration: 230.4ms | Allocations: 20922)
Completed 200 OK in 478ms (Views: 100.9ms | ActiveRecord: 315.9ms | Allocations: 27633)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 12:23:52 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (27.8ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (25.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (27.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (28.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (25.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 34.1ms | Allocations: 2757)
  [1m[36mDish Load (26.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (25.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (26.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (28.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 3.9ms | Allocations: 875)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 444)
  Rendered layouts/_comment.html.erb (Duration: 86.8ms | Allocations: 5128)
  Rendered layouts/_add_comment.html.erb (Duration: 2.4ms | Allocations: 679)
  [1m[35m (28.2ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 445)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 439)
  Rendered layouts/_comment.html.erb (Duration: 4.5ms | Allocations: 1506)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 314.6ms | Allocations: 15673)
  Rendered layouts/_header.html.erb (Duration: 3.7ms | Allocations: 1084)
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 91.9ms | Allocations: 4664)
  Rendered layout layouts/application.html.erb (Duration: 427.3ms | Allocations: 25172)
Completed 200 OK in 1014ms (Views: 192.3ms | ActiveRecord: 682.2ms | Allocations: 42598)


Started GET "/restaurants/3/edit" for 127.0.0.1 at 2023-11-20 12:23:56 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:56:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  [1m[36mCategory Load (25.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 44.5ms | Allocations: 3914)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 47.1ms | Allocations: 4154)
  Rendered layouts/_header.html.erb (Duration: 3.7ms | Allocations: 1090)
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 65.0ms | Allocations: 4654)
  Rendered layout layouts/application.html.erb (Duration: 126.0ms | Allocations: 13679)
Completed 200 OK in 157ms (Views: 52.1ms | ActiveRecord: 100.2ms | Allocations: 14428)


Started PATCH "/restaurants/3" for 127.0.0.1 at 2023-11-20 12:24:13 +0100
Processing by RestaurantsController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "restaurant"=>{"nombre"=>"Fumanchu", "telefono"=>"333333333", "direccion"=>"c/123", "horario"=>"soleado", "categoria"=>"chino", "ruta_img_fondo"=>#<ActionDispatch::Http::UploadedFile:0x00007f46abd89070 @tempfile=#<Tempfile:/tmp/RackMultipart20231120-6300-e6l4bm.jpg>, @content_type="image/jpeg", @original_filename="photo.jpg", @headers="Content-Disposition: form-data; name=\"restaurant[ruta_img_fondo]\"; filename=\"photo.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "button"=>"", "id"=>"3"}
  [1m[36mRestaurant Load (25.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:60:in `update'
  [1m[36mTRANSACTION (25.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/restaurants_controller.rb:62:in `update'
  [1m[36mRestaurant Update (53.7ms)[0m  [1m[33mUPDATE "restaurants" SET "ruta_img_fondo" = $1 WHERE "restaurants"."id" = $2[0m  [["ruta_img_fondo", "b9631b3a9d522f4f3f00.jpg"], ["id", 3]]
  â†³ app/controllers/restaurants_controller.rb:62:in `update'
  [1m[36mTRANSACTION (27.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/restaurants_controller.rb:62:in `update'
Redirected to http://localhost:3000/restaurants/3
Completed 302 Found in 129ms (ActiveRecord: 132.4ms | Allocations: 3794)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 12:24:13 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (25.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (25.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (26.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (26.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (26.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (26.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 6527.0ms | Allocations: 118105)
  [1m[36mDish Load (25.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (26.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (26.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (26.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (27.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 3.4ms | Allocations: 624)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 445)
  Rendered layouts/_comment.html.erb (Duration: 40.8ms | Allocations: 2359)
  Rendered layouts/_add_comment.html.erb (Duration: 1.8ms | Allocations: 532)
  [1m[35m (29.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 5.4ms | Allocations: 1493)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 6731.0ms | Allocations: 125394)
  Rendered layouts/_header.html.erb (Duration: 2.6ms | Allocations: 1096)
  [1m[36mUser Load (27.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 76.7ms | Allocations: 4660)
  Rendered layout layouts/application.html.erb (Duration: 6823.0ms | Allocations: 134928)
Completed 200 OK in 7190ms (Views: 6581.9ms | ActiveRecord: 580.4ms | Allocations: 140483)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 12:25:46 +0100
  [1m[36mActiveRecord::SchemaMigration Load (27.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (26.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (26.1ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (26.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (26.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (26.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (26.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (28.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 326.9ms | Allocations: 40196)
  [1m[36mDish Load (28.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (28.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (26.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 3.6ms | Allocations: 911)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 446)
  Rendered layouts/_comment.html.erb (Duration: 74.6ms | Allocations: 5501)
  Rendered layouts/_add_comment.html.erb (Duration: 2.7ms | Allocations: 701)
  [1m[35m (26.1ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 5.9ms | Allocations: 1538)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 682.2ms | Allocations: 60861)
  Rendered layouts/_header.html.erb (Duration: 6.7ms | Allocations: 1417)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 277.8ms | Allocations: 16942)
  Rendered layout layouts/application.html.erb (Duration: 1004.4ms | Allocations: 98534)
Completed 200 OK in 2155ms (Views: 675.6ms | ActiveRecord: 984.0ms | Allocations: 161217)


Started GET "/restaurants/3/dishes/new" for 127.0.0.1 at 2023-11-20 12:26:04 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"3"}
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:19:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 9.3ms | Allocations: 3260)
  Rendered dishes/new.html.erb within layouts/application (Duration: 11.0ms | Allocations: 3554)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1094)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 63.7ms | Allocations: 4655)
  Rendered layout layouts/application.html.erb (Duration: 84.0ms | Allocations: 13091)
Completed 200 OK in 115ms (Views: 34.7ms | ActiveRecord: 76.0ms | Allocations: 14237)


Started GET "/restaurants/3/dishes/16/edit" for 127.0.0.1 at 2023-11-20 12:29:05 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"16"}
  [1m[36mDish Load (26.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 6.5ms | Allocations: 2204)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 8.7ms | Allocations: 2617)
  Rendered layouts/_header.html.erb (Duration: 3.9ms | Allocations: 1089)
  [1m[36mUser Load (26.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 70.3ms | Allocations: 4635)
  Rendered layout layouts/application.html.erb (Duration: 96.9ms | Allocations: 12099)
Completed 200 OK in 155ms (Views: 46.2ms | ActiveRecord: 77.8ms | Allocations: 13429)


Started PATCH "/restaurants/3/dishes" for 127.0.0.1 at 2023-11-20 12:29:13 +0100
Processing by ErrorsController#not_found as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"tumadre", "descripcion"=>"nono la tuya no", "precio"=>"10.85"}, "button"=>"", "unmatched"=>"restaurants/3/dishes"}
  Rendering layout layouts/application.html.erb
  Rendering errors/not_found.html.erb within layouts/application
  Rendered errors/not_found.html.erb within layouts/application (Duration: 0.8ms | Allocations: 91)
  Rendered layouts/_header.html.erb (Duration: 2.6ms | Allocations: 1125)
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 63.7ms | Allocations: 4647)
  Rendered layout layouts/application.html.erb (Duration: 75.1ms | Allocations: 9858)
Completed 404 Not Found in 78ms (Views: 25.6ms | ActiveRecord: 51.1ms | Allocations: 10656)


Started GET "/restaurants/3/dishes/4/edit" for 127.0.0.1 at 2023-11-20 12:31:33 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mDish Load (35.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 8.1ms | Allocations: 2849)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 11.6ms | Allocations: 3339)
  Rendered layouts/_header.html.erb (Duration: 6.0ms | Allocations: 1358)
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (51.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 289.2ms | Allocations: 20729)
  Rendered layout layouts/application.html.erb (Duration: 354.1ms | Allocations: 44513)
Completed 200 OK in 537ms (Views: 159.5ms | ActiveRecord: 355.0ms | Allocations: 50903)


Started PATCH "/restaurants/3/dishes" for 127.0.0.1 at 2023-11-20 12:31:52 +0100
Processing by ErrorsController#not_found as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"patodonald", "descripcion"=>"en realidad es pollo", "precio"=>"40.0"}, "button"=>"", "unmatched"=>"restaurants/3/dishes"}
  Rendering layout layouts/application.html.erb
  Rendering errors/not_found.html.erb within layouts/application
  Rendered errors/not_found.html.erb within layouts/application (Duration: 1.2ms | Allocations: 89)
  Rendered layouts/_header.html.erb (Duration: 2.9ms | Allocations: 1125)
  [1m[36mUser Load (26.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 65.5ms | Allocations: 4648)
  Rendered layout layouts/application.html.erb (Duration: 81.5ms | Allocations: 9856)
Completed 404 Not Found in 86ms (Views: 32.8ms | ActiveRecord: 51.0ms | Allocations: 10600)


Started GET "/restaurants/3/dishes/4/edit" for 127.0.0.1 at 2023-11-20 12:33:27 +0100
Processing by DishesController#edit as */*
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mDish Load (25.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 7.3ms | Allocations: 2186)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 8.4ms | Allocations: 2334)
  Rendered layouts/_header.html.erb (Duration: 3.0ms | Allocations: 1088)
  Rendered layouts/_sidenav.html.erb (Duration: 7.4ms | Allocations: 2667)
  Rendered layout layouts/application.html.erb (Duration: 29.1ms | Allocations: 9847)
Completed 200 OK in 60ms (Views: 30.5ms | ActiveRecord: 25.5ms | Allocations: 10586)


Started GET "/restaurants/3/dishes/16/edit" for 127.0.0.1 at 2023-11-20 12:33:42 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"16"}
  [1m[36mDish Load (26.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 6.6ms | Allocations: 2197)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 7.7ms | Allocations: 2487)
  Rendered layouts/_header.html.erb (Duration: 4.9ms | Allocations: 1102)
  [1m[36mUser Load (49.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (29.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 98.6ms | Allocations: 4681)
  Rendered layout layouts/application.html.erb (Duration: 122.1ms | Allocations: 12090)
Completed 200 OK in 156ms (Views: 46.2ms | ActiveRecord: 104.8ms | Allocations: 12744)


Started PATCH "/restaurants/3/dishes" for 127.0.0.1 at 2023-11-20 12:33:59 +0100
Processing by ErrorsController#not_found as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"tumadre", "descripcion"=>"nono la tuya no", "precio"=>"10.85"}, "button"=>"", "unmatched"=>"restaurants/3/dishes"}
  Rendering layout layouts/application.html.erb
  Rendering errors/not_found.html.erb within layouts/application
  Rendered errors/not_found.html.erb within layouts/application (Duration: 0.2ms | Allocations: 6)
  Rendered layouts/_header.html.erb (Duration: 5.9ms | Allocations: 1119)
  [1m[36mUser Load (25.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (26.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 72.1ms | Allocations: 4636)
  Rendered layout layouts/application.html.erb (Duration: 95.0ms | Allocations: 9703)
Completed 404 Not Found in 98ms (Views: 44.6ms | ActiveRecord: 51.8ms | Allocations: 10183)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 12:38:09 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (25.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (26.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (26.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (28.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (27.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (26.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 32.1ms | Allocations: 2798)
  [1m[36mDish Load (26.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (25.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (27.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 2.8ms | Allocations: 877)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 446)
  Rendered layouts/_comment.html.erb (Duration: 52.2ms | Allocations: 5132)
  Rendered layouts/_add_comment.html.erb (Duration: 2.3ms | Allocations: 681)
  [1m[35m (26.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 4.2ms | Allocations: 1515)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 244.2ms | Allocations: 15743)
  Rendered layouts/_header.html.erb (Duration: 3.5ms | Allocations: 1102)
  [1m[36mUser Load (26.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (26.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 72.2ms | Allocations: 4681)
  Rendered layout layouts/application.html.erb (Duration: 686.3ms | Allocations: 88146)
Completed 200 OK in 1305ms (Views: 454.7ms | ActiveRecord: 739.3ms | Allocations: 109160)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 12:40:13 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (28.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (25.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (25.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (27.0ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (25.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 36.7ms | Allocations: 2197)
  [1m[36mDish Load (24.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (25.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (26.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (26.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (27.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 627)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 445)
  Rendered layouts/_comment.html.erb (Duration: 37.9ms | Allocations: 2361)
  Rendered layouts/_add_comment.html.erb (Duration: 1.9ms | Allocations: 535)
  [1m[35m (26.0ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 4.2ms | Allocations: 1493)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 224.4ms | Allocations: 9494)
  Rendered layouts/_header.html.erb (Duration: 3.6ms | Allocations: 1102)
  [1m[36mUser Load (25.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (27.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 73.2ms | Allocations: 4697)
  Rendered layout layouts/application.html.erb (Duration: 343.6ms | Allocations: 25772)
Completed 200 OK in 711ms (Views: 110.0ms | ActiveRecord: 570.3ms | Allocations: 31346)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 12:41:25 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (28.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (26.8ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (27.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (26.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (28.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (25.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 30.5ms | Allocations: 2190)
  [1m[36mDish Load (27.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (28.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (26.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 624)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 445)
  Rendered layouts/_comment.html.erb (Duration: 34.2ms | Allocations: 2355)
  Rendered layouts/_add_comment.html.erb (Duration: 1.5ms | Allocations: 532)
  [1m[35m (25.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 4.0ms | Allocations: 1494)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 221.4ms | Allocations: 9474)
  Rendered layouts/_header.html.erb (Duration: 4.9ms | Allocations: 1088)
  [1m[36mUser Load (29.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (27.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 77.1ms | Allocations: 4638)
  Rendered layout layouts/application.html.erb (Duration: 340.7ms | Allocations: 25628)
Completed 200 OK in 715ms (Views: 100.0ms | ActiveRecord: 587.1ms | Allocations: 31189)


Started GET "/restaurants/3/dishes/new" for 127.0.0.1 at 2023-11-20 12:41:28 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"3"}
  [1m[36mRestaurant Load (27.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:19:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 10.1ms | Allocations: 2162)
  Rendered dishes/new.html.erb within layouts/application (Duration: 12.5ms | Allocations: 2391)
  Rendered layouts/_header.html.erb (Duration: 2.9ms | Allocations: 1088)
  [1m[36mUser Load (26.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (31.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 85.3ms | Allocations: 4659)
  Rendered layout layouts/application.html.erb (Duration: 111.8ms | Allocations: 11894)
Completed 200 OK in 147ms (Views: 55.6ms | ActiveRecord: 85.7ms | Allocations: 12842)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-20 12:42:08 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (51.5ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (28.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (27.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (26.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (26.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (25.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (26.2ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 141.5ms | Allocations: 13095)
  Rendered layouts/_header.html.erb (Duration: 5.3ms | Allocations: 1095)
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 63.8ms | Allocations: 4684)
  Rendered layout layouts/application.html.erb (Duration: 243.5ms | Allocations: 29538)
Completed 200 OK in 473ms (Views: 88.9ms | ActiveRecord: 314.1ms | Allocations: 42258)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-20 12:42:09 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (53.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (26.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (26.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (27.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (26.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (26.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (27.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (26.0ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 104.6ms | Allocations: 10522)
  Rendered layouts/_header.html.erb (Duration: 3.3ms | Allocations: 1089)
  [1m[36mUser Load (25.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 66.0ms | Allocations: 4635)
  Rendered layout layouts/application.html.erb (Duration: 183.0ms | Allocations: 20252)
Completed 200 OK in 364ms (Views: 55.0ms | ActiveRecord: 290.4ms | Allocations: 22746)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-20 12:43:33 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (50.4ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (25.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (26.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (29.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 117.6ms | Allocations: 10540)
  Rendered layouts/_header.html.erb (Duration: 4.9ms | Allocations: 1103)
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 69.1ms | Allocations: 4677)
  Rendered layout layouts/application.html.erb (Duration: 234.4ms | Allocations: 27023)
Completed 200 OK in 398ms (Views: 104.1ms | ActiveRecord: 282.4ms | Allocations: 29514)


Started GET "/restaurants?filter=burger" for 127.0.0.1 at 2023-11-20 12:43:43 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"filter"=>"burger"}
  [1m[36mRestaurant Exists? (50.9ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (25.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (26.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (25.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."categoria" = $1[0m  [["categoria", "burger"]]
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (26.0ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 121.9ms | Allocations: 6675)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1101)
  [1m[36mUser Load (27.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 64.6ms | Allocations: 4671)
  Rendered layout layouts/application.html.erb (Duration: 195.4ms | Allocations: 16418)
Completed 200 OK in 363ms (Views: 66.5ms | ActiveRecord: 283.8ms | Allocations: 18941)


Started GET "/restaurants?filter=chino" for 127.0.0.1 at 2023-11-20 12:43:45 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"filter"=>"chino"}
  [1m[36mRestaurant Exists? (51.8ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (25.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (29.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (25.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."categoria" = $1[0m  [["categoria", "chino"]]
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 88.9ms | Allocations: 6587)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1089)
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 62.0ms | Allocations: 4635)
  Rendered layout layouts/application.html.erb (Duration: 159.8ms | Allocations: 16289)
Completed 200 OK in 331ms (Views: 33.7ms | ActiveRecord: 285.0ms | Allocations: 18809)


Started GET "/restaurants?filter=Turca" for 127.0.0.1 at 2023-11-20 12:43:47 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"filter"=>"Turca"}
  [1m[36mRestaurant Exists? (51.1ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (26.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (28.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (25.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."categoria" = $1[0m  [["categoria", "Turca"]]
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 91.6ms | Allocations: 5577)
  Rendered layouts/_header.html.erb (Duration: 2.3ms | Allocations: 1089)
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 64.7ms | Allocations: 4635)
  Rendered layout layouts/application.html.erb (Duration: 166.8ms | Allocations: 15254)
Completed 200 OK in 336ms (Views: 40.1ms | ActiveRecord: 284.3ms | Allocations: 17776)


Started GET "/restaurants?filter=Gourmet" for 127.0.0.1 at 2023-11-20 12:43:48 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"filter"=>"Gourmet"}
  [1m[36mRestaurant Exists? (50.5ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (28.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (26.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (25.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."categoria" = $1[0m  [["categoria", "Gourmet"]]
  â†³ app/views/restaurants/index.html.erb:51
  Rendered restaurants/index.html.erb within layouts/application (Duration: 60.2ms | Allocations: 4441)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1103)
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (26.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 64.1ms | Allocations: 4677)
  Rendered layout layouts/application.html.erb (Duration: 134.0ms | Allocations: 14227)
Completed 200 OK in 302ms (Views: 32.8ms | ActiveRecord: 257.6ms | Allocations: 16748)


Started GET "/restaurants?filter=pizza" for 127.0.0.1 at 2023-11-20 12:43:51 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"filter"=>"pizza"}
  [1m[36mRestaurant Exists? (50.1ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (25.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (25.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (27.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."categoria" = $1[0m  [["categoria", "pizza"]]
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 92.7ms | Allocations: 6750)
  Rendered layouts/_header.html.erb (Duration: 2.2ms | Allocations: 1103)
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 65.8ms | Allocations: 4674)
  Rendered layout layouts/application.html.erb (Duration: 167.9ms | Allocations: 16510)
Completed 200 OK in 330ms (Views: 39.3ms | ActiveRecord: 280.9ms | Allocations: 19031)


Started GET "/restaurants?filter=Tapas" for 127.0.0.1 at 2023-11-20 12:43:52 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"filter"=>"Tapas"}
  [1m[36mRestaurant Exists? (51.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (25.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (26.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (29.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (25.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (25.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."categoria" = $1[0m  [["categoria", "Tapas"]]
  â†³ app/views/restaurants/index.html.erb:51
  Rendered restaurants/index.html.erb within layouts/application (Duration: 61.5ms | Allocations: 4426)
  Rendered layouts/_header.html.erb (Duration: 2.8ms | Allocations: 1089)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 63.7ms | Allocations: 4638)
  Rendered layout layouts/application.html.erb (Duration: 137.0ms | Allocations: 14097)
Completed 200 OK in 309ms (Views: 37.0ms | ActiveRecord: 259.5ms | Allocations: 16618)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-20 12:43:54 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (50.8ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (26.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (25.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (25.8ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 99.8ms | Allocations: 10543)
  Rendered layouts/_header.html.erb (Duration: 2.2ms | Allocations: 1089)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 62.3ms | Allocations: 4636)
  Rendered layout layouts/application.html.erb (Duration: 172.2ms | Allocations: 20239)
Completed 200 OK in 339ms (Views: 47.3ms | ActiveRecord: 278.8ms | Allocations: 22731)


Started GET "/categories" for 127.0.0.1 at 2023-11-20 12:43:57 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (25.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (25.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 71.9ms | Allocations: 5033)
  Rendered layouts/_header.html.erb (Duration: 2.8ms | Allocations: 1128)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 36.9ms | Allocations: 4572)
  Rendered layout layouts/application.html.erb (Duration: 118.8ms | Allocations: 14541)
Completed 200 OK in 125ms (Views: 44.7ms | ActiveRecord: 75.8ms | Allocations: 15035)


Started GET "/categories" for 127.0.0.1 at 2023-11-20 12:44:29 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (27.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (29.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 80.3ms | Allocations: 4495)
  Rendered layouts/_header.html.erb (Duration: 3.9ms | Allocations: 1127)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 39.0ms | Allocations: 4566)
  Rendered layout layouts/application.html.erb (Duration: 170.9ms | Allocations: 20653)
Completed 200 OK in 173ms (Views: 89.2ms | ActiveRecord: 82.8ms | Allocations: 20913)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 12:44:36 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (25.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (26.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (27.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (25.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 641)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 445)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 445)
  Rendered layouts/_comment.html.erb (Duration: 46.2ms | Allocations: 5037)
  Rendered layouts/_add_comment.html.erb (Duration: 1.0ms | Allocations: 534)
  Rendered categories/show.html.erb within layouts/application (Duration: 77.2ms | Allocations: 6337)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1088)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 38.6ms | Allocations: 4530)
  Rendered layout layouts/application.html.erb (Duration: 127.0ms | Allocations: 15712)
Completed 200 OK in 361ms (Views: 51.7ms | ActiveRecord: 233.3ms | Allocations: 19153)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 12:48:30 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (25.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (27.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (26.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (26.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 634)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 445)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 445)
  Rendered layouts/_comment.html.erb (Duration: 45.8ms | Allocations: 4994)
  Rendered layouts/_add_comment.html.erb (Duration: 1.9ms | Allocations: 527)
  Rendered categories/show.html.erb within layouts/application (Duration: 78.5ms | Allocations: 6060)
  Rendered layouts/_header.html.erb (Duration: 8.5ms | Allocations: 1093)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 38.4ms | Allocations: 4573)
  Rendered layout layouts/application.html.erb (Duration: 154.4ms | Allocations: 22160)
Completed 200 OK in 328ms (Views: 76.7ms | ActiveRecord: 234.9ms | Allocations: 24976)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 12:48:40 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (25.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (26.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (27.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 637)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 445)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 449)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 445)
  Rendered layouts/_comment.html.erb (Duration: 44.4ms | Allocations: 5007)
  Rendered layouts/_add_comment.html.erb (Duration: 1.1ms | Allocations: 530)
  Rendered categories/show.html.erb within layouts/application (Duration: 74.4ms | Allocations: 6076)
  Rendered layouts/_header.html.erb (Duration: 2.6ms | Allocations: 1102)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 39.7ms | Allocations: 4572)
  Rendered layout layouts/application.html.erb (Duration: 150.0ms | Allocations: 22213)
Completed 200 OK in 324ms (Views: 75.8ms | ActiveRecord: 232.6ms | Allocations: 25025)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 12:49:04 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (26.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (26.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (26.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (26.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (28.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 3.7ms | Allocations: 634)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 445)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 445)
  Rendered layouts/_comment.html.erb (Duration: 51.8ms | Allocations: 4997)
  Rendered layouts/_add_comment.html.erb (Duration: 1.8ms | Allocations: 527)
  Rendered categories/show.html.erb within layouts/application (Duration: 82.9ms | Allocations: 6063)
  Rendered layouts/_header.html.erb (Duration: 2.7ms | Allocations: 1088)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 44.1ms | Allocations: 4531)
  Rendered layout layouts/application.html.erb (Duration: 161.9ms | Allocations: 22127)
Completed 200 OK in 335ms (Views: 82.6ms | ActiveRecord: 237.1ms | Allocations: 24930)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 12:49:30 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (26.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (28.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (27.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 634)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 445)
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 445)
  Rendered layouts/_comment.html.erb (Duration: 51.2ms | Allocations: 4994)
  Rendered layouts/_add_comment.html.erb (Duration: 1.6ms | Allocations: 527)
  Rendered categories/show.html.erb within layouts/application (Duration: 81.9ms | Allocations: 6060)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1102)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (26.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 43.8ms | Allocations: 4572)
  Rendered layout layouts/application.html.erb (Duration: 165.5ms | Allocations: 22211)
Completed 200 OK in 339ms (Views: 88.1ms | ActiveRecord: 235.2ms | Allocations: 25037)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 12:50:05 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (25.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (27.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (27.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (26.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (26.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 637)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 445)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 445)
  Rendered layouts/_comment.html.erb (Duration: 48.1ms | Allocations: 5003)
  Rendered layouts/_add_comment.html.erb (Duration: 1.8ms | Allocations: 530)
  Rendered categories/show.html.erb within layouts/application (Duration: 79.7ms | Allocations: 6072)
  Rendered layouts/_header.html.erb (Duration: 2.3ms | Allocations: 1102)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 39.2ms | Allocations: 4568)
  Rendered layout layouts/application.html.erb (Duration: 152.3ms | Allocations: 22233)
Completed 200 OK in 327ms (Views: 76.5ms | ActiveRecord: 234.6ms | Allocations: 25055)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 12:50:15 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (25.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (26.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (26.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 6.3ms | Allocations: 634)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 445)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 445)
  Rendered layouts/_comment.html.erb (Duration: 57.6ms | Allocations: 4994)
  Rendered layouts/_add_comment.html.erb (Duration: 2.7ms | Allocations: 527)
  Rendered categories/show.html.erb within layouts/application (Duration: 91.2ms | Allocations: 6060)
  Rendered layouts/_header.html.erb (Duration: 2.2ms | Allocations: 1088)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 40.7ms | Allocations: 4530)
  Rendered layout layouts/application.html.erb (Duration: 162.8ms | Allocations: 22132)
Completed 200 OK in 333ms (Views: 87.1ms | ActiveRecord: 230.3ms | Allocations: 24940)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 12:50:28 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (26.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (27.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (27.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (26.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.6ms | Allocations: 641)
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 445)
  Rendered layouts/_reaction.html.erb (Duration: 2.6ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 445)
  Rendered layouts/_comment.html.erb (Duration: 54.1ms | Allocations: 5016)
  Rendered layouts/_add_comment.html.erb (Duration: 1.8ms | Allocations: 534)
  Rendered categories/show.html.erb within layouts/application (Duration: 84.6ms | Allocations: 6089)
  Rendered layouts/_header.html.erb (Duration: 3.0ms | Allocations: 1102)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (26.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 40.9ms | Allocations: 4572)
  Rendered layout layouts/application.html.erb (Duration: 162.2ms | Allocations: 22273)
Completed 200 OK in 338ms (Views: 86.5ms | ActiveRecord: 237.5ms | Allocations: 25085)


Started GET "/users/mis_restaurantes" for 127.0.0.1 at 2023-11-20 12:50:49 +0100
Processing by UsersController#mis_restaurantes as HTML
  [1m[36mUser Load (25.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:77:in `mis_restaurantes'
  Rendering layout layouts/application.html.erb
  Rendering users/mis_restaurantes.html.erb within layouts/application
  [1m[36mRestaurant Load (26.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/views/users/mis_restaurantes.html.erb:8
  Rendered users/mis_restaurantes.html.erb within layouts/application (Duration: 35.4ms | Allocations: 1842)
  Rendered layouts/_header.html.erb (Duration: 4.3ms | Allocations: 1126)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 23.5ms | Allocations: 4448)
  Rendered layout layouts/application.html.erb (Duration: 116.6ms | Allocations: 17903)
Completed 200 OK in 151ms (Views: 93.3ms | ActiveRecord: 52.4ms | Allocations: 19043)


Started GET "/users/mis_restaurantes" for 127.0.0.1 at 2023-11-20 12:50:50 +0100
Processing by UsersController#mis_restaurantes as HTML
  [1m[36mUser Load (28.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:77:in `mis_restaurantes'
  Rendering layout layouts/application.html.erb
  Rendering users/mis_restaurantes.html.erb within layouts/application
  [1m[36mRestaurant Load (26.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/views/users/mis_restaurantes.html.erb:8
  Rendered users/mis_restaurantes.html.erb within layouts/application (Duration: 35.0ms | Allocations: 1495)
  Rendered layouts/_header.html.erb (Duration: 4.2ms | Allocations: 1114)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 20.8ms | Allocations: 4411)
  Rendered layout layouts/application.html.erb (Duration: 71.7ms | Allocations: 10837)
Completed 200 OK in 106ms (Views: 46.8ms | ActiveRecord: 55.2ms | Allocations: 11729)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 12:50:52 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (27.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (25.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (28.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (27.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (30.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (26.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.0ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (25.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 30.4ms | Allocations: 2192)
  [1m[36mDish Load (24.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (25.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (26.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (29.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 3.3ms | Allocations: 627)
  Rendered layouts/_reaction.html.erb (Duration: 9.6ms | Allocations: 447)
  Rendered layouts/_comment.html.erb (Duration: 47.4ms | Allocations: 2364)
  Rendered layouts/_add_comment.html.erb (Duration: 1.5ms | Allocations: 535)
  [1m[35m (29.0ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 4.8ms | Allocations: 1493)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 232.0ms | Allocations: 9492)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1102)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 63.3ms | Allocations: 4677)
  Rendered layout layouts/application.html.erb (Duration: 305.1ms | Allocations: 19084)
Completed 200 OK in 679ms (Views: 72.1ms | ActiveRecord: 577.4ms | Allocations: 24655)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 12:51:00 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (26.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (25.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (28.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (27.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (27.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (26.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (25.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 31.4ms | Allocations: 2191)
  [1m[36mDish Load (24.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (26.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (26.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (27.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 627)
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 445)
  Rendered layouts/_comment.html.erb (Duration: 35.2ms | Allocations: 2354)
  Rendered layouts/_add_comment.html.erb (Duration: 1.5ms | Allocations: 529)
  [1m[35m (26.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 4.9ms | Allocations: 1493)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 218.8ms | Allocations: 9469)
  Rendered layouts/_header.html.erb (Duration: 3.0ms | Allocations: 1102)
  [1m[36mUser Load (25.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (26.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 71.2ms | Allocations: 4678)
  Rendered layout layouts/application.html.erb (Duration: 303.4ms | Allocations: 19054)
Completed 200 OK in 677ms (Views: 69.6ms | ActiveRecord: 577.3ms | Allocations: 24620)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 12:51:58 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (26.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (25.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (25.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (29.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (29.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (28.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (29.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (27.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 33.0ms | Allocations: 2185)
  [1m[36mDish Load (26.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (25.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (26.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 620)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 445)
  Rendered layouts/_comment.html.erb (Duration: 34.5ms | Allocations: 2347)
  Rendered layouts/_add_comment.html.erb (Duration: 1.4ms | Allocations: 528)
  [1m[35m (25.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 7.3ms | Allocations: 1493)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 221.0ms | Allocations: 9452)
  Rendered layouts/_header.html.erb (Duration: 4.7ms | Allocations: 1088)
  [1m[36mUser Load (29.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 73.8ms | Allocations: 4635)
  Rendered layout layouts/application.html.erb (Duration: 359.3ms | Allocations: 25649)
Completed 200 OK in 740ms (Views: 124.4ms | ActiveRecord: 580.2ms | Allocations: 31193)


Started GET "/categories" for 127.0.0.1 at 2023-11-20 12:52:20 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (28.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (25.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 72.5ms | Allocations: 4524)
  Rendered layouts/_header.html.erb (Duration: 2.7ms | Allocations: 1128)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 40.7ms | Allocations: 4572)
  Rendered layout layouts/application.html.erb (Duration: 124.9ms | Allocations: 14020)
Completed 200 OK in 127ms (Views: 46.8ms | ActiveRecord: 79.4ms | Allocations: 14282)


Started GET "/categories/pizza" for 127.0.0.1 at 2023-11-20 12:52:22 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"pizza"}
  [1m[36mCategory Load (25.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "pizza"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='pizza' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='pizza' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='pizza' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "pizza"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='pizza' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (26.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "pizza"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 638)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 36.3ms | Allocations: 3515)
  Rendered layouts/_add_comment.html.erb (Duration: 0.8ms | Allocations: 534)
  Rendered categories/show.html.erb within layouts/application (Duration: 64.8ms | Allocations: 4588)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1102)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 36.9ms | Allocations: 4569)
  Rendered layout layouts/application.html.erb (Duration: 110.2ms | Allocations: 14047)
Completed 200 OK in 276ms (Views: 34.2ms | ActiveRecord: 230.4ms | Allocations: 16795)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-20 12:52:25 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (56.9ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (27.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (26.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (27.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (28.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (28.9ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 118.9ms | Allocations: 10562)
  Rendered layouts/_header.html.erb (Duration: 5.1ms | Allocations: 1089)
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (27.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 76.7ms | Allocations: 4655)
  Rendered layout layouts/application.html.erb (Duration: 213.3ms | Allocations: 20278)
Completed 200 OK in 394ms (Views: 78.4ms | ActiveRecord: 299.0ms | Allocations: 22772)


Started GET "/restaurants/1" for 127.0.0.1 at 2023-11-20 12:52:30 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (27.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (25.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (25.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (27.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (27.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (26.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 34.4ms | Allocations: 3260)
  [1m[36mDish Load (25.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (25.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (28.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (26.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (29.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (26.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (26.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 623)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 79.6ms | Allocations: 10031)
  Rendered layouts/_add_comment.html.erb (Duration: 1.1ms | Allocations: 528)
  [1m[35m (25.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 292.1ms | Allocations: 17213)
  Rendered layouts/_header.html.erb (Duration: 2.2ms | Allocations: 1103)
  [1m[36mUser Load (27.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 67.0ms | Allocations: 4677)
  Rendered layout layouts/application.html.erb (Duration: 371.9ms | Allocations: 26733)
Completed 200 OK in 743ms (Views: 80.5ms | ActiveRecord: 632.8ms | Allocations: 32385)


Started GET "/search?search=Taglietella" for 127.0.0.1 at 2023-11-20 12:52:48 +0100
Processing by RestaurantsController#search as HTML
  Parameters: {"search"=>"Taglietella"}
  [1m[36mRestaurant Load (26.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE (lower(nombre) LIKE '%taglietella%')[0m
  â†³ app/controllers/restaurants_controller.rb:82:in `search'
Redirected to 
Completed 500 Internal Server Error in 30ms (ActiveRecord: 26.5ms | Allocations: 1059)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionController::ActionControllerError (Cannot redirect to nil!):
  
app/controllers/restaurants_controller.rb:82:in `search'
Started GET "/" for 127.0.0.1 at 2023-11-20 15:07:14 +0100
  [1m[36mActiveRecord::SchemaMigration Load (24.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (25.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (23.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (22.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (22.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (22.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (23.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (23.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 1298.8ms | Allocations: 132199)
  Rendered layouts/_header.html.erb (Duration: 6.8ms | Allocations: 1394)
  [1m[36mUser Load (52.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 280.6ms | Allocations: 17695)
  Rendered layout layouts/application.html.erb (Duration: 1662.1ms | Allocations: 171997)
Completed 200 OK in 2245ms (Views: 1459.0ms | ActiveRecord: 503.5ms | Allocations: 214051)


Started GET "/" for 127.0.0.1 at 2023-11-20 15:08:05 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (54.4ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (23.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (22.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (23.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (23.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (22.8ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 103.5ms | Allocations: 10531)
  Rendered layouts/_header.html.erb (Duration: 3.7ms | Allocations: 1089)
  [1m[36mUser Load (24.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 66.4ms | Allocations: 4635)
  Rendered layout layouts/application.html.erb (Duration: 188.4ms | Allocations: 20199)
Completed 200 OK in 355ms (Views: 71.6ms | ActiveRecord: 267.7ms | Allocations: 22700)


Started GET "/" for 127.0.0.1 at 2023-11-20 15:08:07 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (47.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (23.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (23.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (23.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (22.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (23.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 99.6ms | Allocations: 10522)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1089)
  [1m[36mUser Load (22.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 57.0ms | Allocations: 4635)
  Rendered layout layouts/application.html.erb (Duration: 167.9ms | Allocations: 20209)
Completed 200 OK in 322ms (Views: 50.4ms | ActiveRecord: 258.5ms | Allocations: 22739)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-20 15:08:14 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (79.5ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (25.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (23.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (23.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (22.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (23.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 114.8ms | Allocations: 10528)
  Rendered layouts/_header.html.erb (Duration: 3.8ms | Allocations: 1089)
  [1m[36mUser Load (23.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 66.8ms | Allocations: 4635)
  Rendered layout layouts/application.html.erb (Duration: 203.3ms | Allocations: 20233)
Completed 200 OK in 392ms (Views: 84.3ms | ActiveRecord: 294.8ms | Allocations: 22760)


Started GET "/categories" for 127.0.0.1 at 2023-11-20 15:08:15 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (22.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 67.5ms | Allocations: 4910)
  Rendered layouts/_header.html.erb (Duration: 3.6ms | Allocations: 1118)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 34.8ms | Allocations: 4542)
  Rendered layout layouts/application.html.erb (Duration: 114.2ms | Allocations: 14332)
Completed 200 OK in 117ms (Views: 47.0ms | ActiveRecord: 68.7ms | Allocations: 14826)


Started GET "/users/mis_restaurantes" for 127.0.0.1 at 2023-11-20 15:08:17 +0100
Processing by UsersController#mis_restaurantes as HTML
  [1m[36mUser Load (30.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:77:in `mis_restaurantes'
  Rendering layout layouts/application.html.erb
  Rendering users/mis_restaurantes.html.erb within layouts/application
  [1m[36mRestaurant Load (42.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/views/users/mis_restaurantes.html.erb:8
  Rendered users/mis_restaurantes.html.erb within layouts/application (Duration: 50.1ms | Allocations: 1840)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1117)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 26.0ms | Allocations: 4412)
  Rendered layout layouts/application.html.erb (Duration: 88.1ms | Allocations: 11146)
Completed 200 OK in 126ms (Views: 49.0ms | ActiveRecord: 72.8ms | Allocations: 12277)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:08:19 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (33.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (26.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (29.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (30.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (31.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (33.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (34.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (24.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (25.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 34.8ms | Allocations: 2793)
  [1m[36mDish Load (23.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (35.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (291.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (118.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (32.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 3.4ms | Allocations: 883)
  Rendered layouts/_reaction.html.erb (Duration: 2.7ms | Allocations: 446)
  Rendered layouts/_comment.html.erb (Duration: 158.8ms | Allocations: 5444)
  Rendered layouts/_add_comment.html.erb (Duration: 2.7ms | Allocations: 685)
  [1m[35m (26.2ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 4.2ms | Allocations: 1538)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 875.7ms | Allocations: 23119)
  Rendered layouts/_header.html.erb (Duration: 3.9ms | Allocations: 1089)
  [1m[36mUser Load (26.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 76.0ms | Allocations: 4651)
  Rendered layout layouts/application.html.erb (Duration: 974.3ms | Allocations: 32620)
Completed 200 OK in 1647ms (Views: 321.9ms | ActiveRecord: 1125.7ms | Allocations: 55299)


Started GET "/reviews/new?review_to=3&review_type=Restaurant" for 127.0.0.1 at 2023-11-20 15:08:26 +0100
Processing by ReviewsController#new as HTML
  Parameters: {"review_to"=>"3", "review_type"=>"Restaurant"}
  Rendering layout layouts/application.html.erb
  Rendering reviews/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 12.0ms | Allocations: 2773)
  Rendered reviews/new.html.erb within layouts/application (Duration: 14.4ms | Allocations: 3012)
  Rendered layouts/_header.html.erb (Duration: 3.3ms | Allocations: 1088)
  [1m[36mUser Load (23.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 58.8ms | Allocations: 4643)
  Rendered layout layouts/application.html.erb (Duration: 84.5ms | Allocations: 12502)
Completed 200 OK in 88ms (Views: 39.7ms | ActiveRecord: 46.2ms | Allocations: 13246)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-20 15:10:14 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (22.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (23.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (47.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (24.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-20 14:10:14.501366')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-20 14:10:14.528747')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (22.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-20 14:10:14.554998')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (22.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (23.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (22.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-20 14:10:14.630786')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (22.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (22.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-20 14:10:14.680902')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (22.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-20 14:10:14.705500')[0m  [["reviewable_id", 16], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (26.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 17.9ms | Allocations: 3433)
  Rendered layouts/_header.html.erb (Duration: 2.7ms | Allocations: 1093)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 13.9ms | Allocations: 4427)
  Rendered layout layouts/application.html.erb (Duration: 44.0ms | Allocations: 12702)
Completed 200 OK in 541ms (Views: 45.5ms | ActiveRecord: 421.8ms | Allocations: 31376)


Started GET "/logout" for 127.0.0.1 at 2023-11-20 15:10:23 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.0ms | Allocations: 502)


Started GET "/" for 127.0.0.1 at 2023-11-20 15:10:23 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (55.4ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (23.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (23.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (23.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (23.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (22.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (23.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (22.9ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 88.1ms | Allocations: 10540)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1093)
  Rendered layouts/_sidenav.html.erb (Duration: 4.9ms | Allocations: 2671)
  Rendered layout layouts/application.html.erb (Duration: 104.2ms | Allocations: 18271)
Completed 200 OK in 265ms (Views: 36.6ms | ActiveRecord: 217.9ms | Allocations: 20767)


Started GET "/login" for 127.0.0.1 at 2023-11-20 15:10:28 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 7.9ms | Allocations: 3007)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1089)
  Rendered layouts/_sidenav.html.erb (Duration: 6.9ms | Allocations: 2659)
  Rendered layout layouts/application.html.erb (Duration: 24.2ms | Allocations: 10518)
Completed 200 OK in 28ms (Views: 26.5ms | ActiveRecord: 0.0ms | Allocations: 10968)


Started POST "/login" for 127.0.0.1 at 2023-11-20 15:10:32 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"juan", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (23.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 4.7ms | Allocations: 2398)
  Rendered layouts/_header.html.erb (Duration: 2.4ms | Allocations: 1089)
  Rendered layouts/_sidenav.html.erb (Duration: 4.6ms | Allocations: 2660)
  Rendered layout layouts/application.html.erb (Duration: 18.5ms | Allocations: 9946)
Completed 200 OK in 321ms (Views: 19.3ms | ActiveRecord: 23.1ms | Allocations: 11000)


Started POST "/login" for 127.0.0.1 at 2023-11-20 15:10:43 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"juan", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (25.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 286ms (ActiveRecord: 25.9ms | Allocations: 860)


Started GET "/" for 127.0.0.1 at 2023-11-20 15:10:43 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (48.4ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (23.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (22.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (22.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (23.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (23.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (22.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (32.3ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 104.5ms | Allocations: 10524)
  Rendered layouts/_header.html.erb (Duration: 3.3ms | Allocations: 1089)
  [1m[36mUser Load (22.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 57.3ms | Allocations: 4103)
  Rendered layout layouts/application.html.erb (Duration: 177.4ms | Allocations: 19706)
Completed 200 OK in 330ms (Views: 54.9ms | ActiveRecord: 263.7ms | Allocations: 22205)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:10:46 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (23.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (23.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (22.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (22.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (22.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (23.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.0ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (22.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.6ms | Allocations: 2138)
  [1m[36mDish Load (23.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (22.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (23.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (23.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (22.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (22.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 622)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 54.6ms | Allocations: 3226)
  Rendered layouts/_add_comment.html.erb (Duration: 1.0ms | Allocations: 534)
  [1m[35m (22.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 35.3ms | Allocations: 2185)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 245.1ms | Allocations: 10900)
  Rendered layouts/_header.html.erb (Duration: 16.1ms | Allocations: 1095)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (26.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 48.8ms | Allocations: 4008)
  Rendered layout layouts/application.html.erb (Duration: 327.3ms | Allocations: 19760)
Completed 200 OK in 662ms (Views: 94.3ms | ActiveRecord: 542.7ms | Allocations: 25351)


Started GET "/reviews/new?review_to=3&review_type=Restaurant" for 127.0.0.1 at 2023-11-20 15:10:57 +0100
Processing by ReviewsController#new as HTML
  Parameters: {"review_to"=>"3", "review_type"=>"Restaurant"}
  Rendering layout layouts/application.html.erb
  Rendering reviews/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 7.5ms | Allocations: 1653)
  Rendered reviews/new.html.erb within layouts/application (Duration: 8.2ms | Allocations: 1723)
  Rendered layouts/_header.html.erb (Duration: 8.6ms | Allocations: 1092)
  [1m[36mUser Load (31.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (27.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 105.5ms | Allocations: 4114)
  Rendered layout layouts/application.html.erb (Duration: 141.7ms | Allocations: 10698)
Completed 200 OK in 146ms (Views: 83.8ms | ActiveRecord: 59.6ms | Allocations: 11185)


Started POST "/reviews" for 127.0.0.1 at 2023-11-20 15:11:04 +0100
Processing by ReviewsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "review"=>{"reviewable_id"=>"3", "reviewable_type"=>"Restaurant", "autor"=>"juan", "contenido"=>"Espectacular"}, "button"=>""}
  [1m[36mRestaurant Load (33.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:34:in `get_original_reviewed'
  [1m[36mTRANSACTION (36.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/reviews_controller.rb:24:in `create'
  [1m[36mRestaurant Load (27.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:24:in `create'
  [1m[36mReview Create (24.5ms)[0m  [1m[32mINSERT INTO "reviews" ("autor", "reviewable_type", "reviewable_id", "contenido", "ruta_img", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["autor", "juan"], ["reviewable_type", "Restaurant"], ["reviewable_id", 3], ["contenido", "Espectacular"], ["ruta_img", nil], ["created_at", "2023-11-20 14:11:04.419685"], ["updated_at", "2023-11-20 14:11:04.419889"]]
  â†³ app/controllers/reviews_controller.rb:24:in `create'
  [1m[36mTRANSACTION (30.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/reviews_controller.rb:24:in `create'
Redirected to http://localhost:3000/restaurants/3
Completed 302 Found in 170ms (ActiveRecord: 151.7ms | Allocations: 5222)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:11:04 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (23.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (23.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (23.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (22.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (23.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (23.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (22.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (22.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 27.4ms | Allocations: 2142)
  [1m[36mDish Load (22.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (23.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (23.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (26.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (22.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 618)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 2.6ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 76.4ms | Allocations: 4713)
  Rendered layouts/_add_comment.html.erb (Duration: 2.1ms | Allocations: 530)
  [1m[35m (22.1ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (24.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 2.2ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 34.8ms | Allocations: 2185)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 276.2ms | Allocations: 12379)
  Rendered layouts/_header.html.erb (Duration: 3.1ms | Allocations: 1091)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 45.6ms | Allocations: 4008)
  Rendered layout layouts/application.html.erb (Duration: 337.1ms | Allocations: 21242)
Completed 200 OK in 671ms (Views: 103.7ms | ActiveRecord: 541.6ms | Allocations: 26907)


Started GET "/reviews/new?review_to=3&review_type=Restaurant" for 127.0.0.1 at 2023-11-20 15:11:42 +0100
Processing by ReviewsController#new as HTML
  Parameters: {"review_to"=>"3", "review_type"=>"Restaurant"}
  Rendering layout layouts/application.html.erb
  Rendering reviews/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 3.7ms | Allocations: 1641)
  Rendered reviews/new.html.erb within layouts/application (Duration: 4.2ms | Allocations: 1711)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1088)
  [1m[36mUser Load (24.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 61.8ms | Allocations: 4105)
  Rendered layout layouts/application.html.erb (Duration: 81.0ms | Allocations: 10660)
Completed 200 OK in 83ms (Views: 33.5ms | ActiveRecord: 48.4ms | Allocations: 11156)


Started GET "/reviews/new?review_to=3&review_type=Restaurant" for 127.0.0.1 at 2023-11-20 15:13:57 +0100
Processing by ReviewsController#new as HTML
  Parameters: {"review_to"=>"3", "review_type"=>"Restaurant"}
  Rendering layout layouts/application.html.erb
  Rendering reviews/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 8.6ms | Allocations: 1641)
  Rendered reviews/new.html.erb within layouts/application (Duration: 9.3ms | Allocations: 1711)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1088)
  [1m[36mUser Load (22.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 64.6ms | Allocations: 4104)
  Rendered layout layouts/application.html.erb (Duration: 196.1ms | Allocations: 17649)
Completed 200 OK in 199ms (Views: 150.3ms | ActiveRecord: 46.9ms | Allocations: 18133)


Started GET "/reviews/new?review_to=3&review_type=Restaurant" for 127.0.0.1 at 2023-11-20 15:14:11 +0100
Processing by ReviewsController#new as HTML
  Parameters: {"review_to"=>"3", "review_type"=>"Restaurant"}
  Rendering layout layouts/application.html.erb
  Rendering reviews/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 5.2ms | Allocations: 1641)
  Rendered reviews/new.html.erb within layouts/application (Duration: 5.8ms | Allocations: 1711)
  Rendered layouts/_header.html.erb (Duration: 3.0ms | Allocations: 1088)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (28.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 88.7ms | Allocations: 4109)
  Rendered layout layouts/application.html.erb (Duration: 167.9ms | Allocations: 17366)
Completed 200 OK in 171ms (Views: 115.5ms | ActiveRecord: 53.6ms | Allocations: 17839)


Started GET "/categories" for 127.0.0.1 at 2023-11-20 15:14:41 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (23.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (22.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 72.7ms | Allocations: 4529)
  Rendered layouts/_header.html.erb (Duration: 2.2ms | Allocations: 1118)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 38.4ms | Allocations: 4008)
  Rendered layout layouts/application.html.erb (Duration: 122.7ms | Allocations: 13404)
Completed 200 OK in 125ms (Views: 55.8ms | ActiveRecord: 68.4ms | Allocations: 13666)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 15:14:42 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (22.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (23.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (23.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (23.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.6ms | Allocations: 636)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 48.5ms | Allocations: 5583)
  Rendered layouts/_add_comment.html.erb (Duration: 1.9ms | Allocations: 533)
  Rendered categories/show.html.erb within layouts/application (Duration: 81.1ms | Allocations: 6886)
  Rendered layouts/_header.html.erb (Duration: 4.0ms | Allocations: 1092)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (26.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 46.3ms | Allocations: 4006)
  Rendered layout layouts/application.html.erb (Duration: 143.0ms | Allocations: 15748)
Completed 200 OK in 355ms (Views: 72.4ms | ActiveRecord: 214.5ms | Allocations: 19178)


Started GET "/" for 127.0.0.1 at 2023-11-20 15:15:22 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (46.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (23.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (23.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (23.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (22.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (22.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 108.5ms | Allocations: 10538)
  Rendered layouts/_header.html.erb (Duration: 2.7ms | Allocations: 1090)
  [1m[36mUser Load (23.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 68.0ms | Allocations: 4103)
  Rendered layout layouts/application.html.erb (Duration: 200.0ms | Allocations: 19703)
Completed 200 OK in 358ms (Views: 84.3ms | ActiveRecord: 257.1ms | Allocations: 22196)


Started GET "/categories" for 127.0.0.1 at 2023-11-20 15:17:31 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (24.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 73.5ms | Allocations: 4519)
  Rendered layouts/_header.html.erb (Duration: 3.5ms | Allocations: 1114)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (30.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 56.0ms | Allocations: 3998)
  Rendered layout layouts/application.html.erb (Duration: 147.5ms | Allocations: 13367)
Completed 200 OK in 151ms (Views: 71.0ms | ActiveRecord: 78.5ms | Allocations: 13628)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 15:17:34 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (23.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (23.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (30.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (23.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 630)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 40.2ms | Allocations: 5565)
  Rendered layouts/_add_comment.html.erb (Duration: 1.0ms | Allocations: 527)
  Rendered categories/show.html.erb within layouts/application (Duration: 70.5ms | Allocations: 6631)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1088)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 35.4ms | Allocations: 3998)
  Rendered layout layouts/application.html.erb (Duration: 118.0ms | Allocations: 15474)
Completed 200 OK in 294ms (Views: 49.9ms | ActiveRecord: 216.6ms | Allocations: 18291)


Started GET "/" for 127.0.0.1 at 2023-11-20 15:20:10 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (22.9ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (23.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (22.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (22.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (22.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (22.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (23.9ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 139.9ms | Allocations: 12983)
  Rendered layouts/_header.html.erb (Duration: 3.8ms | Allocations: 1354)
  [1m[36mUser Load (22.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 141.8ms | Allocations: 12898)
  Rendered layout layouts/application.html.erb (Duration: 394.4ms | Allocations: 53096)
Completed 200 OK in 745ms (Views: 216.4ms | ActiveRecord: 441.0ms | Allocations: 69001)


Started GET "/users/juan" for 127.0.0.1 at 2023-11-20 15:20:14 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"juan"}
  [1m[36mUser Load (23.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (379.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (22.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (21.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (22.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-20 14:20:15.390271')[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (22.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-20 14:20:15.414937')[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (22.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-20 14:20:15.439379')[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (22.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 11.3ms | Allocations: 3136)
  Rendered layouts/_header.html.erb (Duration: 2.3ms | Allocations: 1089)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 33.4ms | Allocations: 4002)
  Rendered layout layouts/application.html.erb (Duration: 54.3ms | Allocations: 11966)
Completed 200 OK in 738ms (Views: 33.7ms | ActiveRecord: 627.6ms | Allocations: 23142)


Started GET "/posts/new" for 127.0.0.1 at 2023-11-20 15:22:47 +0100
Processing by PostsController#new as HTML
  [1m[35m (22.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre FROM restaurants, users, restaurants_users as ru WHERE users.nombre='juan' AND users.nombre=ru.user_id AND ru.restaurant_id=restaurants.id [0m
  â†³ app/controllers/posts_controller.rb:7:in `new'
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 13.2ms | Allocations: 2386)
  Rendered posts/new.html.erb within layouts/application (Duration: 15.0ms | Allocations: 2652)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1088)
  [1m[36mUser Load (22.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (21.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 55.2ms | Allocations: 4104)
  Rendered layout layouts/application.html.erb (Duration: 100.4ms | Allocations: 18336)
Completed 200 OK in 158ms (Views: 57.8ms | ActiveRecord: 91.6ms | Allocations: 22125)


Started GET "/posts/new" for 127.0.0.1 at 2023-11-20 15:22:48 +0100
Processing by PostsController#new as HTML
  [1m[35m (52.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre FROM restaurants, users, restaurants_users as ru WHERE users.nombre='juan' AND users.nombre=ru.user_id AND ru.restaurant_id=restaurants.id [0m
  â†³ app/controllers/posts_controller.rb:7:in `new'
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 16.2ms | Allocations: 1602)
  Rendered posts/new.html.erb within layouts/application (Duration: 17.1ms | Allocations: 1694)
  Rendered layouts/_header.html.erb (Duration: 4.2ms | Allocations: 1092)
  [1m[36mUser Load (22.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 60.1ms | Allocations: 4113)
  Rendered layout layouts/application.html.erb (Duration: 93.2ms | Allocations: 10729)
Completed 200 OK in 150ms (Views: 50.1ms | ActiveRecord: 96.4ms | Allocations: 11420)


Started POST "/posts" for 127.0.0.1 at 2023-11-20 15:23:01 +0100
Processing by PostsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"asOwnerOf"=>"", "contenido"=>"me gusta el pito gordo"}, "button"=>""}
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mUser Load (23.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/controllers/posts_controller.rb:17:in `create'
  [1m[36mTRANSACTION (23.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/posts_controller.rb:23:in `create'
  [1m[36mPost Create (48.3ms)[0m  [1m[32mINSERT INTO "posts" ("categoria", "autor", "contenido", "ruta_img", "created_at", "updated_at", "restaurant_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["categoria", "burger"], ["autor", "juan"], ["contenido", "me gusta el pito gordo"], ["ruta_img", nil], ["created_at", "2023-11-20 14:23:01.114303"], ["updated_at", "2023-11-20 14:23:01.114306"], ["restaurant_id", nil]]
  â†³ app/controllers/posts_controller.rb:23:in `create'
  [1m[36mTRANSACTION (23.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/posts_controller.rb:23:in `create'
Redirected to http://localhost:3000/categories/burger
Completed 302 Found in 107ms (ActiveRecord: 117.6ms | Allocations: 3058)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 15:23:01 +0100
Processing by CategoriesController#show as TURBO_STREAM
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (24.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (22.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (22.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (22.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (23.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (22.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (22.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (22.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.8ms | Allocations: 890)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 442)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 3.6ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 62.0ms | Allocations: 7921)
  Rendered layouts/_add_comment.html.erb (Duration: 4.3ms | Allocations: 679)
  Rendered categories/show.html.erb within layouts/application (Duration: 95.0ms | Allocations: 9540)
  Rendered layouts/_header.html.erb (Duration: 3.1ms | Allocations: 1092)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 38.0ms | Allocations: 4008)
  Rendered layout layouts/application.html.erb (Duration: 147.3ms | Allocations: 18420)
Completed 200 OK in 308ms (Views: 79.9ms | ActiveRecord: 205.9ms | Allocations: 22447)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 15:23:40 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (28.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (23.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (22.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (23.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (22.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 3.3ms | Allocations: 630)
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 52.5ms | Allocations: 7058)
  Rendered layouts/_add_comment.html.erb (Duration: 2.2ms | Allocations: 527)
  Rendered categories/show.html.erb within layouts/application (Duration: 83.0ms | Allocations: 8124)
  Rendered layouts/_header.html.erb (Duration: 2.4ms | Allocations: 1088)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 42.9ms | Allocations: 3998)
  Rendered layout layouts/application.html.erb (Duration: 181.6ms | Allocations: 23687)
Completed 200 OK in 344ms (Views: 113.9ms | ActiveRecord: 213.4ms | Allocations: 26585)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 15:24:17 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (22.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (26.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (22.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (23.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.1ms | Allocations: 630)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 8.3ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 444)
  Rendered layouts/_comment.html.erb (Duration: 62.6ms | Allocations: 7059)
  Rendered layouts/_add_comment.html.erb (Duration: 1.6ms | Allocations: 533)
  Rendered categories/show.html.erb within layouts/application (Duration: 92.4ms | Allocations: 8131)
  Rendered layouts/_header.html.erb (Duration: 3.4ms | Allocations: 1092)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 40.2ms | Allocations: 4008)
  Rendered layout layouts/application.html.erb (Duration: 191.8ms | Allocations: 23718)
Completed 200 OK in 356ms (Views: 122.1ms | ActiveRecord: 215.4ms | Allocations: 26616)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 15:24:34 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (22.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (23.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (22.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (22.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (22.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 4.0ms | Allocations: 632)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 56.6ms | Allocations: 7064)
  Rendered layouts/_add_comment.html.erb (Duration: 1.2ms | Allocations: 533)
  Rendered categories/show.html.erb within layouts/application (Duration: 86.9ms | Allocations: 8136)
  Rendered layouts/_header.html.erb (Duration: 4.1ms | Allocations: 1092)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 37.8ms | Allocations: 4008)
  Rendered layout layouts/application.html.erb (Duration: 164.8ms | Allocations: 23717)
Completed 200 OK in 322ms (Views: 97.4ms | ActiveRecord: 205.7ms | Allocations: 26630)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 15:24:58 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (24.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (26.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (28.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (23.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.1ms | Allocations: 630)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 441)
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 61.4ms | Allocations: 7059)
  Rendered layouts/_add_comment.html.erb (Duration: 2.5ms | Allocations: 527)
  Rendered categories/show.html.erb within layouts/application (Duration: 92.1ms | Allocations: 8125)
  Rendered layouts/_header.html.erb (Duration: 4.2ms | Allocations: 1088)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (28.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 47.7ms | Allocations: 3998)
  Rendered layout layouts/application.html.erb (Duration: 194.2ms | Allocations: 23696)
Completed 200 OK in 374ms (Views: 119.0ms | ActiveRecord: 232.6ms | Allocations: 26603)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 15:25:26 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (24.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (23.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (23.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (23.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (23.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 4.7ms | Allocations: 636)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 441)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 63.6ms | Allocations: 7078)
  Rendered layouts/_add_comment.html.erb (Duration: 2.7ms | Allocations: 533)
  Rendered categories/show.html.erb within layouts/application (Duration: 97.3ms | Allocations: 8150)
  Rendered layouts/_header.html.erb (Duration: 4.8ms | Allocations: 1092)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 39.3ms | Allocations: 4008)
  Rendered layout layouts/application.html.erb (Duration: 154.9ms | Allocations: 17020)
Completed 200 OK in 323ms (Views: 87.9ms | ActiveRecord: 211.9ms | Allocations: 19936)


Started DELETE "/posts/46" for 127.0.0.1 at 2023-11-20 15:25:29 +0100
Processing by PostsController#destroy as TURBO_STREAM
  Parameters: {"id"=>"46"}
  [1m[36mPost Load (36.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  â†³ app/controllers/posts_controller.rb:31:in `destroy'
  [1m[36mTRANSACTION (29.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/posts_controller.rb:32:in `destroy'
  [1m[36mReaction Delete All (33.7ms)[0m  [1m[31mDELETE FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2[0m  [["reactionable_id", 46], ["reactionable_type", "Post"]]
  â†³ app/controllers/posts_controller.rb:32:in `destroy'
  [1m[36mResponse Load (26.6ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2[0m  [["respondable_id", 46], ["respondable_type", "Post"]]
  â†³ app/controllers/posts_controller.rb:32:in `destroy'
  [1m[36mPost Destroy (30.7ms)[0m  [1m[31mDELETE FROM "posts" WHERE "posts"."id" = $1[0m  [["id", 46]]
  â†³ app/controllers/posts_controller.rb:32:in `destroy'
  [1m[36mTRANSACTION (36.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/posts_controller.rb:32:in `destroy'
Redirected to http://localhost:3000/categories/burger
Completed 302 Found in 424ms (ActiveRecord: 325.9ms | Allocations: 17727)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 15:25:30 +0100
Processing by CategoriesController#show as TURBO_STREAM
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (30.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (53.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (34.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (26.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (30.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (23.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 636)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 43.9ms | Allocations: 5583)
  Rendered layouts/_add_comment.html.erb (Duration: 2.2ms | Allocations: 533)
  Rendered categories/show.html.erb within layouts/application (Duration: 74.5ms | Allocations: 6657)
  Rendered layouts/_header.html.erb (Duration: 4.6ms | Allocations: 1092)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 40.4ms | Allocations: 4011)
  Rendered layout layouts/application.html.erb (Duration: 131.6ms | Allocations: 15527)
Completed 200 OK in 349ms (Views: 61.9ms | ActiveRecord: 271.9ms | Allocations: 18358)


Started GET "/" for 127.0.0.1 at 2023-11-20 15:25:33 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (46.4ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (22.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (22.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (22.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (23.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (23.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (34.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 148.3ms | Allocations: 10558)
  Rendered layouts/_header.html.erb (Duration: 4.4ms | Allocations: 1089)
  [1m[36mUser Load (23.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 62.9ms | Allocations: 4103)
  Rendered layout layouts/application.html.erb (Duration: 233.0ms | Allocations: 19726)
Completed 200 OK in 386ms (Views: 106.1ms | ActiveRecord: 264.9ms | Allocations: 22223)


Started GET "/categories" for 127.0.0.1 at 2023-11-20 15:25:41 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (22.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (22.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 61.5ms | Allocations: 4888)
  Rendered layouts/_header.html.erb (Duration: 3.5ms | Allocations: 1118)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 37.0ms | Allocations: 4008)
  Rendered layout layouts/application.html.erb (Duration: 113.6ms | Allocations: 13764)
Completed 200 OK in 118ms (Views: 45.7ms | ActiveRecord: 70.1ms | Allocations: 14088)


Started GET "/users/juan" for 127.0.0.1 at 2023-11-20 15:25:43 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"juan"}
  [1m[36mUser Load (39.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (24.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (24.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (23.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-20 14:25:44.032083')[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (27.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-20 14:25:44.058603')[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-20 14:25:44.090935')[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (34.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 8.7ms | Allocations: 2282)
  Rendered layouts/_header.html.erb (Duration: 5.9ms | Allocations: 1093)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (26.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 48.4ms | Allocations: 4008)
  Rendered layout layouts/application.html.erb (Duration: 77.1ms | Allocations: 11143)
Completed 200 OK in 337ms (Views: 52.0ms | ActiveRecord: 249.5ms | Allocations: 15521)


Started GET "/logout" for 127.0.0.1 at 2023-11-20 15:25:45 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.0ms | Allocations: 425)


Started GET "/" for 127.0.0.1 at 2023-11-20 15:25:45 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (46.8ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (22.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (23.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (22.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (23.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (22.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (22.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (22.8ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 103.0ms | Allocations: 10537)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1089)
  Rendered layouts/_sidenav.html.erb (Duration: 8.7ms | Allocations: 2662)
  Rendered layout layouts/application.html.erb (Duration: 123.7ms | Allocations: 18275)
Completed 200 OK in 275ms (Views: 57.0ms | ActiveRecord: 205.5ms | Allocations: 20770)


Started GET "/login" for 127.0.0.1 at 2023-11-20 15:25:47 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 12.0ms | Allocations: 2975)
  Rendered layouts/_header.html.erb (Duration: 3.5ms | Allocations: 1089)
  Rendered layouts/_sidenav.html.erb (Duration: 14.5ms | Allocations: 2659)
  Rendered layout layouts/application.html.erb (Duration: 42.7ms | Allocations: 10486)
Completed 200 OK in 49ms (Views: 46.8ms | ActiveRecord: 0.0ms | Allocations: 10935)


Started POST "/login" for 127.0.0.1 at 2023-11-20 15:25:51 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"gari", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (23.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 324ms (ActiveRecord: 23.3ms | Allocations: 881)


Started GET "/" for 127.0.0.1 at 2023-11-20 15:25:52 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (47.1ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (22.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (22.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (28.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (31.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (45.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (22.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 124.7ms | Allocations: 10531)
  Rendered layouts/_header.html.erb (Duration: 4.3ms | Allocations: 1095)
  [1m[36mUser Load (23.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 60.9ms | Allocations: 4114)
  Rendered layout layouts/application.html.erb (Duration: 199.5ms | Allocations: 19729)
Completed 200 OK in 358ms (Views: 55.5ms | ActiveRecord: 290.2ms | Allocations: 22225)


Started GET "/categories" for 127.0.0.1 at 2023-11-20 15:25:56 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (28.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (27.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 80.7ms | Allocations: 4576)
  Rendered layouts/_header.html.erb (Duration: 2.8ms | Allocations: 1114)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 42.8ms | Allocations: 3998)
  Rendered layout layouts/application.html.erb (Duration: 138.4ms | Allocations: 13427)
Completed 200 OK in 141ms (Views: 62.0ms | ActiveRecord: 77.9ms | Allocations: 13688)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 15:25:57 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (31.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (26.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (22.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (22.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (22.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (31.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (27.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 833)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 41.4ms | Allocations: 4806)
  Rendered layouts/_add_comment.html.erb (Duration: 1.0ms | Allocations: 533)
  Rendered categories/show.html.erb within layouts/application (Duration: 77.0ms | Allocations: 5948)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1092)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 34.8ms | Allocations: 4008)
  Rendered layout layouts/application.html.erb (Duration: 122.7ms | Allocations: 14815)
Completed 200 OK in 287ms (Views: 41.6ms | ActiveRecord: 230.2ms | Allocations: 17659)


Started GET "/posts/10/responses" for 127.0.0.1 at 2023-11-20 15:26:59 +0100
Processing by PostResponsesController#index as HTML
  Parameters: {"post_id"=>"10"}
  [1m[36mPost Load (71.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/post_responses_controller.rb:22:in `index'
  [1m[35m (32.1ms)[0m  [1m[34mSELECT responses.id, COUNT(reaccion) as react FROM responses LEFT JOIN reactions ON reactionable_id=responses.id AND reactionable_type='Response' AND reaccion='Like' AND respondable_id=10 AND respondable_type='Post' GROUP BY responses.id ORDER BY responses.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (40.3ms)[0m  [1m[34mSELECT responses.id, COUNT(reaccion) as react FROM responses LEFT JOIN reactions ON reactionable_id=responses.id AND reactionable_type='Response' AND reaccion='Dislike' AND respondable_id=10 AND respondable_type='Post' GROUP BY responses.id ORDER BY responses.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[36mResponse Load (26.6ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2 ORDER BY "responses"."id" ASC LIMIT $3[0m  [["respondable_id", 10], ["respondable_type", "Post"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:27:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT responses.id, reactions.id as reaction_id FROM responses LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=responses.id AND reactions.reactionable_type='Response' AND respondable_id=10 AND respondable_type='Post' GROUP BY responses.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[36mReaction Load (42.5ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."reaccion" = $3[0m  [["reactionable_id", 10], ["reactionable_type", "Post"], ["reaccion", "Like"]]
  â†³ app/controllers/post_responses_controller.rb:26:in `index'
  [1m[36mReaction Load (26.4ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."reaccion" = $3[0m  [["reactionable_id", 10], ["reactionable_type", "Post"], ["reaccion", "Dislike"]]
  â†³ app/controllers/post_responses_controller.rb:26:in `index'
  [1m[36mResponse Count (23.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2[0m  [["respondable_id", 10], ["respondable_type", "Post"]]
  â†³ app/controllers/post_responses_controller.rb:26:in `size'
  [1m[36mReaction Load (23.3ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."who" = $3 LIMIT $4[0m  [["reactionable_id", 10], ["reactionable_type", "Post"], ["who", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/post_responses_controller.rb:27:in `index'
  Rendering layout layouts/application.html.erb
  Rendering post_responses/index.html.erb within layouts/application
  [1m[36mUser Load (23.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 4.3ms | Allocations: 828)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 40.9ms | Allocations: 2466)
  [1m[36mResponse Load (22.8ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2 ORDER BY "responses"."id" ASC LIMIT $3[0m  [["respondable_id", 10], ["respondable_type", "Post"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 440)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 441)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 441)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 441)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 15.3ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 442)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 2.7ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 98.9ms | Allocations: 10813)
  Rendered layouts/_add_comment.html.erb (Duration: 3.8ms | Allocations: 534)
  Rendered post_responses/index.html.erb within layouts/application (Duration: 150.1ms | Allocations: 14242)
  Rendered layouts/_header.html.erb (Duration: 3.1ms | Allocations: 1093)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (26.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 49.2ms | Allocations: 4008)
  Rendered layout layouts/application.html.erb (Duration: 219.0ms | Allocations: 23129)
Completed 200 OK in 691ms (Views: 150.0ms | ActiveRecord: 382.4ms | Allocations: 38134)


Started GET "/posts/10/responses" for 127.0.0.1 at 2023-11-20 15:28:28 +0100
Processing by PostResponsesController#index as HTML
  Parameters: {"post_id"=>"10"}
  [1m[36mPost Load (24.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/post_responses_controller.rb:22:in `index'
  [1m[35m (26.5ms)[0m  [1m[34mSELECT responses.id, COUNT(reaccion) as react FROM responses LEFT JOIN reactions ON reactionable_id=responses.id AND reactionable_type='Response' AND reaccion='Like' AND respondable_id=10 AND respondable_type='Post' GROUP BY responses.id ORDER BY responses.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.5ms)[0m  [1m[34mSELECT responses.id, COUNT(reaccion) as react FROM responses LEFT JOIN reactions ON reactionable_id=responses.id AND reactionable_type='Response' AND reaccion='Dislike' AND respondable_id=10 AND respondable_type='Post' GROUP BY responses.id ORDER BY responses.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[36mResponse Load (25.7ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2 ORDER BY "responses"."id" ASC LIMIT $3[0m  [["respondable_id", 10], ["respondable_type", "Post"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:27:in `each'
  [1m[35m (29.0ms)[0m  [1m[34mSELECT responses.id, reactions.id as reaction_id FROM responses LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=responses.id AND reactions.reactionable_type='Response' AND respondable_id=10 AND respondable_type='Post' GROUP BY responses.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[36mReaction Load (22.5ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."reaccion" = $3[0m  [["reactionable_id", 10], ["reactionable_type", "Post"], ["reaccion", "Like"]]
  â†³ app/controllers/post_responses_controller.rb:26:in `index'
  [1m[36mReaction Load (28.4ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."reaccion" = $3[0m  [["reactionable_id", 10], ["reactionable_type", "Post"], ["reaccion", "Dislike"]]
  â†³ app/controllers/post_responses_controller.rb:26:in `index'
  [1m[36mResponse Count (25.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2[0m  [["respondable_id", 10], ["respondable_type", "Post"]]
  â†³ app/controllers/post_responses_controller.rb:26:in `size'
  [1m[36mReaction Load (24.6ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."who" = $3 LIMIT $4[0m  [["reactionable_id", 10], ["reactionable_type", "Post"], ["who", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/post_responses_controller.rb:27:in `index'
  Rendering layout layouts/application.html.erb
  Rendering post_responses/index.html.erb within layouts/application
  [1m[36mUser Load (23.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 4.1ms | Allocations: 1121)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 442)
  Rendered layouts/_comment.html.erb (Duration: 100.2ms | Allocations: 10196)
  [1m[36mResponse Load (23.3ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2 ORDER BY "responses"."id" ASC LIMIT $3[0m  [["respondable_id", 10], ["respondable_type", "Post"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 440)
  [1m[36mCACHE User Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 441)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 62.9ms | Allocations: 10019)
  Rendered layouts/_add_comment.html.erb (Duration: 2.0ms | Allocations: 680)
  Rendered post_responses/index.html.erb within layouts/application (Duration: 169.7ms | Allocations: 21453)
  Rendered layouts/_header.html.erb (Duration: 3.6ms | Allocations: 1359)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 147.6ms | Allocations: 11628)
  Rendered layout layouts/application.html.erb (Duration: 356.6ms | Allocations: 53531)
Completed 200 OK in 929ms (Views: 183.3ms | ActiveRecord: 635.1ms | Allocations: 74719)


Started GET "/categories" for 127.0.0.1 at 2023-11-20 15:29:04 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (70.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (88.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 298.0ms | Allocations: 6484)
  Rendered layouts/_header.html.erb (Duration: 2.6ms | Allocations: 1126)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (53.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 64.9ms | Allocations: 4030)
  Rendered layout layouts/application.html.erb (Duration: 372.9ms | Allocations: 15443)
Completed 200 OK in 386ms (Views: 59.0ms | ActiveRecord: 316.1ms | Allocations: 17066)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 15:29:09 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (30.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (27.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (42.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (29.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (30.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (23.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (27.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 835)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 41.2ms | Allocations: 4807)
  Rendered layouts/_add_comment.html.erb (Duration: 1.0ms | Allocations: 533)
  Rendered categories/show.html.erb within layouts/application (Duration: 70.6ms | Allocations: 6171)
  Rendered layouts/_header.html.erb (Duration: 2.7ms | Allocations: 1101)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (35.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 47.7ms | Allocations: 4028)
  Rendered layout layouts/application.html.erb (Duration: 128.1ms | Allocations: 15099)
Completed 200 OK in 332ms (Views: 42.6ms | ActiveRecord: 273.0ms | Allocations: 18834)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 15:33:30 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (30.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (26.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (31.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (79.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  Rendered categories/show.html.erb within layouts/application (Duration: 169.9ms | Allocations: 7304)
  Rendered layout layouts/application.html.erb (Duration: 171.6ms | Allocations: 7397)
Completed 500 Internal Server Error in 551ms (ActiveRecord: 398.0ms | Allocations: 20029)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `comment' for #<ActionView::Base:0x00000000024c48>):
     6:         <%= link_to edit_category_path, class: "categories_new_button" do %>
     7:           <div>Editar</div>
     8:         <% end %>
     9:         <%= link_to "Eliminar", get_delete_comment_path(comment), class: "categories_new_button", data: {turbo_method: :delete} %>
    10:       </div>
    11:     <% end %>
    12:   </div>
  
app/views/categories/show.html.erb:9
Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 15:33:49 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (28.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (22.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (22.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  Rendered categories/show.html.erb within layouts/application (Duration: 107.1ms | Allocations: 6941)
  Rendered layout layouts/application.html.erb (Duration: 108.2ms | Allocations: 7034)
Completed 500 Internal Server Error in 444ms (ActiveRecord: 297.4ms | Allocations: 19706)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `cagories_path' for #<ActionView::Base:0x0000000002bae8>):
     6:         <%= link_to edit_category_path, class: "categories_new_button" do %>
     7:           <div>Editar</div>
     8:         <% end %>
     9:         <%= link_to "Eliminar", cagories_path, class: "categories_new_button", data: {turbo_method: :delete} %>
    10:       </div>
    11:     <% end %>
    12:   </div>
  
app/views/categories/show.html.erb:9
Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 15:33:58 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (22.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (22.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (22.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (32.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (24.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 3.9ms | Allocations: 1120)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 442)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 100.8ms | Allocations: 8335)
  Rendered layouts/_add_comment.html.erb (Duration: 4.0ms | Allocations: 679)
  Rendered categories/show.html.erb within layouts/application (Duration: 199.8ms | Allocations: 15367)
  Rendered layouts/_header.html.erb (Duration: 6.8ms | Allocations: 1359)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (30.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 189.8ms | Allocations: 11625)
  Rendered layout layouts/application.html.erb (Duration: 497.7ms | Allocations: 54163)
Completed 200 OK in 839ms (Views: 313.4ms | ActiveRecord: 443.2ms | Allocations: 66855)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 15:34:37 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (39.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (38.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (31.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (32.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (28.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (37.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (30.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (31.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 827)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 47.3ms | Allocations: 4790)
  Rendered layouts/_add_comment.html.erb (Duration: 1.4ms | Allocations: 527)
  Rendered categories/show.html.erb within layouts/application (Duration: 84.5ms | Allocations: 5950)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1088)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (32.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 42.6ms | Allocations: 3998)
  Rendered layout layouts/application.html.erb (Duration: 140.4ms | Allocations: 14840)
Completed 200 OK in 367ms (Views: 47.5ms | ActiveRecord: 301.3ms | Allocations: 17677)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-20 15:34:48 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (41.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (32.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (35.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (48.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (47.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (56.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (33.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 3.1ms | Allocations: 827)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 54.9ms | Allocations: 4790)
  Rendered layouts/_add_comment.html.erb (Duration: 1.2ms | Allocations: 527)
  Rendered categories/show.html.erb within layouts/application (Duration: 116.4ms | Allocations: 5950)
  Rendered layouts/_header.html.erb (Duration: 4.6ms | Allocations: 1088)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (70.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 83.2ms | Allocations: 3998)
  Rendered layout layouts/application.html.erb (Duration: 252.3ms | Allocations: 21526)
Completed 200 OK in 521ms (Views: 94.0ms | ActiveRecord: 408.7ms | Allocations: 24335)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-20 15:38:04 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"gari"}
  [1m[36mUser Load (26.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (27.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (22.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (27.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (27.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-20 14:38:04.930102')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-20 14:38:04.964394')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (36.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-20 14:38:04.994677')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (27.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 29.7ms | Allocations: 3240)
  Rendered layouts/_header.html.erb (Duration: 5.6ms | Allocations: 1353)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (26.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.4ms | Allocations: 5058)
  Rendered layout layouts/application.html.erb (Duration: 143.4ms | Allocations: 28704)
Completed 200 OK in 800ms (Views: 124.6ms | ActiveRecord: 482.9ms | Allocations: 52003)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-20 15:38:09 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (30.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (33.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (33.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (74.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (74.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (71.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (38.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (38.4ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 232.9ms | Allocations: 12962)
  Rendered layouts/_header.html.erb (Duration: 6.4ms | Allocations: 1089)
  [1m[36mUser Load (65.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (58.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 152.3ms | Allocations: 4107)
  Rendered layout layouts/application.html.erb (Duration: 410.8ms | Allocations: 22153)
Completed 200 OK in 762ms (Views: 103.4ms | ActiveRecord: 617.3ms | Allocations: 33082)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:38:11 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (39.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (38.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (55.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (29.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (31.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (64.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (79.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (36.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (30.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (27.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (73.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (59.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (37.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 44.0ms | Allocations: 2732)
  [1m[36mDish Load (27.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (26.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (26.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (28.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 3.8ms | Allocations: 872)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 442)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 78.3ms | Allocations: 6190)
  Rendered layouts/_add_comment.html.erb (Duration: 3.1ms | Allocations: 680)
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.1ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 35.2ms | Allocations: 1908)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 406.0ms | Allocations: 21166)
  Rendered layouts/_header.html.erb (Duration: 4.6ms | Allocations: 1100)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 45.2ms | Allocations: 4029)
  Rendered layout layouts/application.html.erb (Duration: 473.7ms | Allocations: 30107)
Completed 200 OK in 1195ms (Views: 136.6ms | ActiveRecord: 999.2ms | Allocations: 43000)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:38:18 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (25.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (25.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (23.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (23.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (26.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (28.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (23.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 28.8ms | Allocations: 2150)
  [1m[36mDish Load (23.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (35.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (22.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (22.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (29.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 4.1ms | Allocations: 616)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 4.2ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 3.7ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 98.0ms | Allocations: 4555)
  Rendered layouts/_add_comment.html.erb (Duration: 8.1ms | Allocations: 528)
  [1m[35m (33.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 5.2ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 44.3ms | Allocations: 1892)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 336.5ms | Allocations: 11932)
  Rendered layouts/_header.html.erb (Duration: 5.4ms | Allocations: 1088)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (34.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 65.7ms | Allocations: 3998)
  Rendered layout layouts/application.html.erb (Duration: 438.5ms | Allocations: 20775)
Completed 200 OK in 798ms (Views: 166.7ms | ActiveRecord: 595.6ms | Allocations: 26388)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-20 15:38:21 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (27.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.1ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (23.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (26.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (23.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (27.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 29.2ms | Allocations: 2469)
  [1m[36mDish Load (23.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (22.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (28.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 616)
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 37.7ms | Allocations: 2350)
  Rendered layouts/_add_comment.html.erb (Duration: 1.4ms | Allocations: 528)
  [1m[35m (26.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.3ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 150.3ms | Allocations: 6680)
  Rendered layouts/_header.html.erb (Duration: 3.7ms | Allocations: 1088)
  [1m[36mUser Load (24.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 62.2ms | Allocations: 4104)
  Rendered layout layouts/application.html.erb (Duration: 226.6ms | Allocations: 15629)
Completed 200 OK in 586ms (Views: 54.0ms | ActiveRecord: 498.2ms | Allocations: 21114)


Started GET "/search?search=Goiko" for 127.0.0.1 at 2023-11-20 15:38:34 +0100
Processing by RestaurantsController#search as HTML
  Parameters: {"search"=>"Goiko"}
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE (lower(nombre) LIKE '%goiko%')[0m
  â†³ app/controllers/restaurants_controller.rb:82:in `search'
Redirected to http://localhost:3000/restaurants/1
Completed 302 Found in 28ms (ActiveRecord: 25.0ms | Allocations: 703)


Started GET "/restaurants/1" for 127.0.0.1 at 2023-11-20 15:38:34 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (22.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (23.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (26.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (23.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (22.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (22.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (22.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 29.5ms | Allocations: 3268)
  [1m[36mDish Load (25.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (22.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (23.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (22.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (23.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (22.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 2.2ms | Allocations: 617)
  Rendered layouts/_reaction.html.erb (Duration: 2.9ms | Allocations: 441)
  [1m[36mUser Load (22.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 75.7ms | Allocations: 7779)
  Rendered layouts/_add_comment.html.erb (Duration: 1.1ms | Allocations: 528)
  [1m[35m (30.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 270.0ms | Allocations: 14951)
  Rendered layouts/_header.html.erb (Duration: 2.3ms | Allocations: 1088)
  [1m[36mUser Load (37.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (28.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 77.1ms | Allocations: 4104)
  Rendered layout layouts/application.html.erb (Duration: 358.0ms | Allocations: 23875)
Completed 200 OK in 696ms (Views: 77.6ms | ActiveRecord: 591.6ms | Allocations: 29533)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-20 15:38:38 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"gari"}
  [1m[36mUser Load (23.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (44.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (44.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (35.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (28.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-20 14:38:38.218490')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (28.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-20 14:38:38.249218')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (27.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-20 14:38:38.280737')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (55.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 5.4ms | Allocations: 2301)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1089)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (37.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.1ms | Allocations: 3998)
  Rendered layout layouts/application.html.erb (Duration: 69.3ms | Allocations: 11123)
Completed 200 OK in 385ms (Views: 33.4ms | ActiveRecord: 324.3ms | Allocations: 15490)


Started GET "/logout" for 127.0.0.1 at 2023-11-20 15:38:39 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.0ms | Allocations: 430)


Started GET "/" for 127.0.0.1 at 2023-11-20 15:38:39 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (59.1ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (26.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (26.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (23.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (25.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (33.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 111.7ms | Allocations: 10566)
  Rendered layouts/_header.html.erb (Duration: 2.9ms | Allocations: 1101)
  Rendered layouts/_sidenav.html.erb (Duration: 6.2ms | Allocations: 2691)
  Rendered layout layouts/application.html.erb (Duration: 132.5ms | Allocations: 18370)
Completed 200 OK in 310ms (Views: 50.5ms | ActiveRecord: 244.3ms | Allocations: 20866)


Started GET "/search?search=Goiko" for 127.0.0.1 at 2023-11-20 15:38:42 +0100
Processing by RestaurantsController#search as HTML
  Parameters: {"search"=>"Goiko"}
  [1m[36mRestaurant Load (37.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE (lower(nombre) LIKE '%goiko%')[0m
  â†³ app/controllers/restaurants_controller.rb:82:in `search'
Redirected to http://localhost:3000/restaurants/1
Completed 302 Found in 41ms (ActiveRecord: 37.8ms | Allocations: 614)


Started GET "/restaurants/1" for 127.0.0.1 at 2023-11-20 15:38:42 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (32.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (40.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (40.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (27.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (33.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (35.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (36.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (26.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (22.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (22.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 11.1ms | Allocations: 2176)
  [1m[36mDish Load (34.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (44.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (26.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 623)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 124.6ms | Allocations: 10578)
  Rendered layouts/_add_comment.html.erb (Duration: 1.5ms | Allocations: 534)
  [1m[35m (26.1ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 207.7ms | Allocations: 15738)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1088)
  Rendered layouts/_sidenav.html.erb (Duration: 6.3ms | Allocations: 2659)
  Rendered layout layouts/application.html.erb (Duration: 224.1ms | Allocations: 23225)
Completed 200 OK in 664ms (Views: 95.3ms | ActiveRecord: 543.1ms | Allocations: 28857)


Started GET "/search?search=Tagliatella" for 127.0.0.1 at 2023-11-20 15:38:48 +0100
Processing by RestaurantsController#search as HTML
  Parameters: {"search"=>"Tagliatella"}
  [1m[36mRestaurant Load (43.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE (lower(nombre) LIKE '%tagliatella%')[0m
  â†³ app/controllers/restaurants_controller.rb:82:in `search'
Redirected to http://localhost:3000/restaurants/2
Completed 302 Found in 47ms (ActiveRecord: 43.4ms | Allocations: 614)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-20 15:38:48 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (27.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (43.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (37.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (32.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (28.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (27.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (28.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (27.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 4.4ms | Allocations: 2230)
  [1m[36mDish Load (32.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (27.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (28.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 629)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 66.8ms | Allocations: 3342)
  Rendered layouts/_add_comment.html.erb (Duration: 1.3ms | Allocations: 528)
  [1m[35m (31.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 145.1ms | Allocations: 7200)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1088)
  Rendered layouts/_sidenav.html.erb (Duration: 6.2ms | Allocations: 2659)
  Rendered layout layouts/application.html.erb (Duration: 162.7ms | Allocations: 14704)
Completed 200 OK in 568ms (Views: 43.8ms | ActiveRecord: 499.0ms | Allocations: 20146)


Started GET "/login" for 127.0.0.1 at 2023-11-20 15:38:52 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 14.5ms | Allocations: 2958)
  Rendered layouts/_header.html.erb (Duration: 4.1ms | Allocations: 1089)
  Rendered layouts/_sidenav.html.erb (Duration: 12.5ms | Allocations: 2659)
  Rendered layout layouts/application.html.erb (Duration: 51.0ms | Allocations: 10470)
Completed 200 OK in 56ms (Views: 53.0ms | ActiveRecord: 0.0ms | Allocations: 10919)


Started POST "/login" for 127.0.0.1 at 2023-11-20 15:38:58 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"Atreides", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (30.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 311ms (ActiveRecord: 30.3ms | Allocations: 855)


Started GET "/" for 127.0.0.1 at 2023-11-20 15:38:58 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (59.9ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (23.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (26.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (30.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (30.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (32.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 109.8ms | Allocations: 10522)
  Rendered layouts/_header.html.erb (Duration: 6.8ms | Allocations: 1093)
  [1m[36mUser Load (23.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 61.1ms | Allocations: 4677)
  Rendered layout layouts/application.html.erb (Duration: 185.5ms | Allocations: 20299)
Completed 200 OK in 365ms (Views: 52.1ms | ActiveRecord: 301.0ms | Allocations: 22838)


Started GET "/search?search=Tagliatella" for 127.0.0.1 at 2023-11-20 15:39:03 +0100
Processing by RestaurantsController#search as HTML
  Parameters: {"search"=>"Tagliatella"}
  [1m[36mRestaurant Load (70.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE (lower(nombre) LIKE '%tagliatella%')[0m
  â†³ app/controllers/restaurants_controller.rb:82:in `search'
Redirected to http://localhost:3000/restaurants/2
Completed 302 Found in 73ms (ActiveRecord: 70.1ms | Allocations: 614)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-20 15:39:03 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (68.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (26.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (22.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (23.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (22.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (22.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (23.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (22.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (22.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (31.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 39.1ms | Allocations: 2481)
  [1m[36mDish Load (31.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (22.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (22.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 642)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 445)
  Rendered layouts/_comment.html.erb (Duration: 56.5ms | Allocations: 3245)
  Rendered layouts/_add_comment.html.erb (Duration: 1.4ms | Allocations: 534)
  [1m[35m (23.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 183.9ms | Allocations: 7595)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1094)
  [1m[36mUser Load (27.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 67.5ms | Allocations: 4665)
  Rendered layout layouts/application.html.erb (Duration: 262.5ms | Allocations: 17136)
Completed 200 OK in 641ms (Views: 56.1ms | ActiveRecord: 560.0ms | Allocations: 22610)


Started GET "/search?search=Fumanchu" for 127.0.0.1 at 2023-11-20 15:39:10 +0100
Processing by RestaurantsController#search as HTML
  Parameters: {"search"=>"Fumanchu"}
  [1m[36mRestaurant Load (23.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE (lower(nombre) LIKE '%fumanchu%')[0m
  â†³ app/controllers/restaurants_controller.rb:82:in `search'
Redirected to http://localhost:3000/restaurants/3
Completed 302 Found in 27ms (ActiveRecord: 23.2ms | Allocations: 615)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:39:10 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (28.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (27.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (25.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (31.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (42.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (31.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (28.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (35.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (62.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (43.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (26.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 33.7ms | Allocations: 2190)
  [1m[36mDish Load (24.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (22.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (23.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (26.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 621)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 445)
  [1m[36mUser Load (23.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 65.2ms | Allocations: 4714)
  Rendered layouts/_add_comment.html.erb (Duration: 1.2ms | Allocations: 528)
  [1m[35m (25.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 3.1ms | Allocations: 1491)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 239.0ms | Allocations: 11834)
  Rendered layouts/_header.html.erb (Duration: 3.5ms | Allocations: 1088)
  [1m[36mUser Load (22.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 70.1ms | Allocations: 4635)
  Rendered layout layouts/application.html.erb (Duration: 321.7ms | Allocations: 21314)
Completed 200 OK in 797ms (Views: 82.4ms | ActiveRecord: 688.2ms | Allocations: 26935)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:43:23 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (76.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (43.8ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (84.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (33.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (30.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (55.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (57.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (50.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (37.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (52.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (34.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (85.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 1.5ms | Allocations: 1655)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 5.0ms | Allocations: 2443)
  Rendered layout layouts/application.html.erb (Duration: 5.3ms | Allocations: 2544)
Completed 500 Internal Server Error in 1457ms (ActiveRecord: 1261.0ms | Allocations: 31715)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <div class="restaurants_header">
  <div class="restaurants_img">
    <% if locals[:restaurant].ruta_img_fondo.present? %>
      <%= image_tag locals[:restaurant].ruta_img_fondo %>
    <% else %>
      <%= image_tag "Default-restaurant-img" %>
    <% end %>
  </div>
  <div class="restaurants_header_content">
    <div>
      <div class="title">
        <%= locals[:restaurant].nombre %> - <span class="title_key_word"><%= locals[:restaurant].categoria %></span>
      </div>
      <div class="restaurant_rating_container">
        
        <% if locals[:ratings] %>
          <% locals[:ratings].floor.times do %>
            <%= image_tag "Star", style: "width: 40px; height: 40px" %>
          <% end %>
        <% end %>
        <div class="restaurant_rating_text"> - <span><%= locals[:ratings] %></span></div>
      </div>
    </div>
    
    <div class="restaurants_header_buttons_container">
      <div>
        <% if session[:username].present? and user_is_owner?(locals[:restaurant].id) %>
          <!-- Si el restaurante tiene su imported_id distinto de nil, significa que es un restaurante importado y no se puede editar -->
          <% if locals[:restaurant].imported_id.nil? %>
            <%= link_to edit_restaurant_path(locals[:restaurant].id), style: "text-decoration: none" do %>
              <div class="restaurants_header_edit_button">
                <span class="restaurants_header_edit_button_text">Editar</span>
              </div>
            <% end %>
            <%= link_to "Eliminar", categories_path class: "restaurants_header_edit_button", data: {turbo_method: :delete} %>
          <% else %>
             <%= link_to ENV['EINA_EATS_WEB'] , style: "text-decoration: none" do %>
              <div class="restaurants_header_edit_button">
                <span class="restaurants_header_edit_button_text">Editar en EinaEats</span>
              </div> 
            <% end %>
          <% end %>
        <% end %>
      </div>
    
      <% if locals[:restaurant].imported_id %>
        <%= link_to ENV['EINA_EATS_WEB'] , style: "text-decoration: none" do %>
          <div class="restaurants_einaeats_button">
            <%= image_tag "Bolsa-einaeats" %>
            <span class="restaurant_einaeats_button_text">Pedir en EinaEats</span>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
<div class="restaurants_header_botones">
    <a href="#restaurant_menu" class="restaurants_header_page_button">
      <div>MenÃº</div>
    </a>
    <a href="#restaurant_reviews" class="restaurants_header_page_button">
      <div>ReseÃ±as</div>
    </a>
    <a href="#restaurant_posts" class="restaurants_header_page_button">
      <div>Posts del restaurante</div> 
    </a>
    <a href="#restaurant_info" class="restaurants_header_page_button">
      <div>InformaciÃ³n</div>
    </a>
  </div>

):
1:    <div class="restaurants_header">
2:      <div class="restaurants_img">
3:        <% if locals[:restaurant].ruta_img_fondo.present? %>
4:          <%= image_tag locals[:restaurant].ruta_img_fondo %>
5:        <% else %>
6:          <%= image_tag "Default-restaurant-img" %>
7:        <% end %>
8:      </div>
9:      <div class="restaurants_header_content">
10:        <div>
11:          <div class="title">
12:            <%= locals[:restaurant].nombre %> - <span class="title_key_word"><%= locals[:restaurant].categoria %></span>
13:          </div>
14:          <div class="restaurant_rating_container">
15:            
16:            <% if locals[:ratings] %>
17:              <% locals[:ratings].floor.times do %>
18:                <%= image_tag "Star", style: "width: 40px; height: 40px" %>
19:              <% end %>
20:            <% end %>
21:            <div class="restaurant_rating_text"> - <span><%= locals[:ratings] %></span></div>
22:          </div>
23:        </div>
24:        
25:        <div class="restaurants_header_buttons_container">
26:          <div>
27:            <% if session[:username].present? and user_is_owner?(locals[:restaurant].id) %>
28:              <!-- Si el restaurante tiene su imported_id distinto de nil, significa que es un restaurante importado y no se puede editar -->
29:              <% if locals[:restaurant].imported_id.nil? %>
30:                <%= link_to edit_restaurant_path(locals[:restaurant].id), style: "text-decoration: none" do %>
31:                  <div class="restaurants_header_edit_button">
32:                    <span class="restaurants_header_edit_button_text">Editar</span>
33:                  </div>
34:                <% end %>
35:                <%= link_to "Eliminar", categories_path class: "restaurants_header_edit_button", data: {turbo_method: :delete} %>
36:              <% else %>
37:                 <%= link_to ENV['EINA_EATS_WEB'] , style: "text-decoration: none" do %>
38:                  <div class="restaurants_header_edit_button">
39:                    <span class="restaurants_header_edit_button_text">Editar en EinaEats</span>
40:                  </div> 
41:                <% end %>
42:              <% end %>
43:            <% end %>
44:          </div>
45:        
46:          <% if locals[:restaurant].imported_id %>
47:            <%= link_to ENV['EINA_EATS_WEB'] , style: "text-decoration: none" do %>
48:              <div class="restaurants_einaeats_button">
49:                <%= image_tag "Bolsa-einaeats" %>
50:                <span class="restaurant_einaeats_button_text">Pedir en EinaEats</span>
51:              </div>
52:            <% end %>
53:          <% end %>
54:        </div>
55:      </div>
56:    </div>
57:    <div class="restaurants_header_botones">
58:        <a href="#restaurant_menu" class="restaurants_header_page_button">
59:          <div>MenÃº</div>
60:        </a>
61:        <a href="#restaurant_reviews" class="restaurants_header_page_button">
62:          <div>ReseÃ±as</div>
63:        </a>
64:        <a href="#restaurant_posts" class="restaurants_header_page_button">
65:          <div>Posts del restaurante</div> 
66:        </a>
67:        <a href="#restaurant_info" class="restaurants_header_page_button">
68:          <div>InformaciÃ³n</div>
69:        </a>
70:      </div>
  
app/views/restaurants/_header.html.erb:35: syntax error, unexpected label, expecting `do' or '{' or '('
app/views/restaurants/show.html.erb:2
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/show_exceptions.rb:36)
Processing by ErrorsController#internal_server_error as HTML
  Parameters: {"id"=>"3"}
  Rendering layout layouts/application.html.erb
  Rendering errors/internal_server_error.html.erb within layouts/application
  Rendered errors/internal_server_error.html.erb within layouts/application (Duration: 0.9ms | Allocations: 91)
  Rendered layouts/_header.html.erb (Duration: 4.4ms | Allocations: 1424)
  [1m[36mUser Load (48.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (51.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 251.0ms | Allocations: 13356)
  Rendered layout layouts/application.html.erb (Duration: 314.8ms | Allocations: 40903)
Completed 500 Internal Server Error in 318ms (Views: 111.2ms | ActiveRecord: 206.1ms | Allocations: 41365)


Started GET "/categories" for 127.0.0.1 at 2023-11-20 15:43:33 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (40.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (44.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 143.1ms | Allocations: 6418)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1114)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (33.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 48.3ms | Allocations: 4532)
  Rendered layout layouts/application.html.erb (Duration: 201.6ms | Allocations: 15814)
Completed 200 OK in 217ms (Views: 45.3ms | ActiveRecord: 158.9ms | Allocations: 17435)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-20 15:43:33 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (411.1ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (51.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (45.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (57.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (63.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (51.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (66.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 255.2ms | Allocations: 11439)
  Rendered layouts/_header.html.erb (Duration: 9.8ms | Allocations: 1101)
  [1m[36mUser Load (41.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (37.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 109.7ms | Allocations: 4672)
  Rendered layout layouts/application.html.erb (Duration: 408.7ms | Allocations: 21214)
Completed 200 OK in 1020ms (Views: 150.6ms | ActiveRecord: 851.0ms | Allocations: 24364)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-20 15:43:36 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (154.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (82.5ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (273.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (93.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (54.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (59.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (45.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (68.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (81.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (55.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (52.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (64.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (51.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 5.7ms | Allocations: 1705)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 6.6ms | Allocations: 1784)
  Rendered layout layouts/application.html.erb (Duration: 7.4ms | Allocations: 1884)
Completed 500 Internal Server Error in 1179ms (ActiveRecord: 1135.6ms | Allocations: 7352)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <div class="restaurants_header">
  <div class="restaurants_img">
    <% if locals[:restaurant].ruta_img_fondo.present? %>
      <%= image_tag locals[:restaurant].ruta_img_fondo %>
    <% else %>
      <%= image_tag "Default-restaurant-img" %>
    <% end %>
  </div>
  <div class="restaurants_header_content">
    <div>
      <div class="title">
        <%= locals[:restaurant].nombre %> - <span class="title_key_word"><%= locals[:restaurant].categoria %></span>
      </div>
      <div class="restaurant_rating_container">
        
        <% if locals[:ratings] %>
          <% locals[:ratings].floor.times do %>
            <%= image_tag "Star", style: "width: 40px; height: 40px" %>
          <% end %>
        <% end %>
        <div class="restaurant_rating_text"> - <span><%= locals[:ratings] %></span></div>
      </div>
    </div>
    
    <div class="restaurants_header_buttons_container">
      <div>
        <% if session[:username].present? and user_is_owner?(locals[:restaurant].id) %>
          <!-- Si el restaurante tiene su imported_id distinto de nil, significa que es un restaurante importado y no se puede editar -->
          <% if locals[:restaurant].imported_id.nil? %>
            <%= link_to edit_restaurant_path(locals[:restaurant].id), style: "text-decoration: none" do %>
              <div class="restaurants_header_edit_button">
                <span class="restaurants_header_edit_button_text">Editar</span>
              </div>
            <% end %>
            <%= link_to "Eliminar", categories_path class: "restaurants_header_edit_button", data: {turbo_method: :delete} %>
          <% else %>
             <%= link_to ENV['EINA_EATS_WEB'] , style: "text-decoration: none" do %>
              <div class="restaurants_header_edit_button">
                <span class="restaurants_header_edit_button_text">Editar en EinaEats</span>
              </div> 
            <% end %>
          <% end %>
        <% end %>
      </div>
    
      <% if locals[:restaurant].imported_id %>
        <%= link_to ENV['EINA_EATS_WEB'] , style: "text-decoration: none" do %>
          <div class="restaurants_einaeats_button">
            <%= image_tag "Bolsa-einaeats" %>
            <span class="restaurant_einaeats_button_text">Pedir en EinaEats</span>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
<div class="restaurants_header_botones">
    <a href="#restaurant_menu" class="restaurants_header_page_button">
      <div>MenÃº</div>
    </a>
    <a href="#restaurant_reviews" class="restaurants_header_page_button">
      <div>ReseÃ±as</div>
    </a>
    <a href="#restaurant_posts" class="restaurants_header_page_button">
      <div>Posts del restaurante</div> 
    </a>
    <a href="#restaurant_info" class="restaurants_header_page_button">
      <div>InformaciÃ³n</div>
    </a>
  </div>

):
1:    <div class="restaurants_header">
2:      <div class="restaurants_img">
3:        <% if locals[:restaurant].ruta_img_fondo.present? %>
4:          <%= image_tag locals[:restaurant].ruta_img_fondo %>
5:        <% else %>
6:          <%= image_tag "Default-restaurant-img" %>
7:        <% end %>
8:      </div>
9:      <div class="restaurants_header_content">
10:        <div>
11:          <div class="title">
12:            <%= locals[:restaurant].nombre %> - <span class="title_key_word"><%= locals[:restaurant].categoria %></span>
13:          </div>
14:          <div class="restaurant_rating_container">
15:            
16:            <% if locals[:ratings] %>
17:              <% locals[:ratings].floor.times do %>
18:                <%= image_tag "Star", style: "width: 40px; height: 40px" %>
19:              <% end %>
20:            <% end %>
21:            <div class="restaurant_rating_text"> - <span><%= locals[:ratings] %></span></div>
22:          </div>
23:        </div>
24:        
25:        <div class="restaurants_header_buttons_container">
26:          <div>
27:            <% if session[:username].present? and user_is_owner?(locals[:restaurant].id) %>
28:              <!-- Si el restaurante tiene su imported_id distinto de nil, significa que es un restaurante importado y no se puede editar -->
29:              <% if locals[:restaurant].imported_id.nil? %>
30:                <%= link_to edit_restaurant_path(locals[:restaurant].id), style: "text-decoration: none" do %>
31:                  <div class="restaurants_header_edit_button">
32:                    <span class="restaurants_header_edit_button_text">Editar</span>
33:                  </div>
34:                <% end %>
35:                <%= link_to "Eliminar", categories_path class: "restaurants_header_edit_button", data: {turbo_method: :delete} %>
36:              <% else %>
37:                 <%= link_to ENV['EINA_EATS_WEB'] , style: "text-decoration: none" do %>
38:                  <div class="restaurants_header_edit_button">
39:                    <span class="restaurants_header_edit_button_text">Editar en EinaEats</span>
40:                  </div> 
41:                <% end %>
42:              <% end %>
43:            <% end %>
44:          </div>
45:        
46:          <% if locals[:restaurant].imported_id %>
47:            <%= link_to ENV['EINA_EATS_WEB'] , style: "text-decoration: none" do %>
48:              <div class="restaurants_einaeats_button">
49:                <%= image_tag "Bolsa-einaeats" %>
50:                <span class="restaurant_einaeats_button_text">Pedir en EinaEats</span>
51:              </div>
52:            <% end %>
53:          <% end %>
54:        </div>
55:      </div>
56:    </div>
57:    <div class="restaurants_header_botones">
58:        <a href="#restaurant_menu" class="restaurants_header_page_button">
59:          <div>MenÃº</div>
60:        </a>
61:        <a href="#restaurant_reviews" class="restaurants_header_page_button">
62:          <div>ReseÃ±as</div>
63:        </a>
64:        <a href="#restaurant_posts" class="restaurants_header_page_button">
65:          <div>Posts del restaurante</div> 
66:        </a>
67:        <a href="#restaurant_info" class="restaurants_header_page_button">
68:          <div>InformaciÃ³n</div>
69:        </a>
70:      </div>
  
app/views/restaurants/_header.html.erb:35: syntax error, unexpected label, expecting `do' or '{' or '('
app/views/restaurants/show.html.erb:2
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/show_exceptions.rb:36)
Processing by ErrorsController#internal_server_error as HTML
  Parameters: {"id"=>"2"}
  Rendering layout layouts/application.html.erb
  Rendering errors/internal_server_error.html.erb within layouts/application
  Rendered errors/internal_server_error.html.erb within layouts/application (Duration: 0.1ms | Allocations: 6)
  Rendered layouts/_header.html.erb (Duration: 6.0ms | Allocations: 1139)
  [1m[36mUser Load (97.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (66.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 198.2ms | Allocations: 4671)
  Rendered layout layouts/application.html.erb (Duration: 219.3ms | Allocations: 9817)
Completed 500 Internal Server Error in 222ms (Views: 57.9ms | ActiveRecord: 163.6ms | Allocations: 10056)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-20 15:44:01 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (106.6ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (51.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (97.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (33.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (110.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (57.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (74.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (42.9ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 279.7ms | Allocations: 13024)
  Rendered layouts/_header.html.erb (Duration: 4.1ms | Allocations: 1360)
  [1m[36mUser Load (39.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (53.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 250.8ms | Allocations: 13418)
  Rendered layout layouts/application.html.erb (Duration: 589.3ms | Allocations: 47083)
Completed 200 OK in 1375ms (Views: 178.4ms | ActiveRecord: 1126.9ms | Allocations: 62991)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:44:04 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (41.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (71.8ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (72.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (41.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (42.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (34.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (42.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (91.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (48.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (81.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (61.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (62.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (52.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (31.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 44.7ms | Allocations: 2825)
  [1m[36mDish Load (42.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (42.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (36.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (35.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (31.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 5.1ms | Allocations: 876)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 446)
  [1m[36mUser Load (50.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 449)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 147.9ms | Allocations: 7523)
  Rendered layouts/_add_comment.html.erb (Duration: 2.9ms | Allocations: 682)
  [1m[35m (63.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 5.5ms | Allocations: 1507)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 629.8ms | Allocations: 22262)
  Rendered layouts/_header.html.erb (Duration: 2.9ms | Allocations: 1100)
  [1m[36mUser Load (120.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (38.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 179.2ms | Allocations: 4673)
  Rendered layout layouts/application.html.erb (Duration: 822.8ms | Allocations: 31845)
Completed 200 OK in 1897ms (Views: 175.7ms | ActiveRecord: 1635.8ms | Allocations: 49314)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:44:31 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (31.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (33.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (48.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (39.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (32.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (36.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (22.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (28.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (32.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (45.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (32.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (42.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 53.2ms | Allocations: 2905)
  [1m[36mDish Load (23.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (27.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (23.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (29.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 4.2ms | Allocations: 872)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 446)
  [1m[36mUser Load (31.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 149.8ms | Allocations: 12758)
  Rendered layouts/_add_comment.html.erb (Duration: 2.1ms | Allocations: 674)
  [1m[35m (22.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 4.4ms | Allocations: 1507)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 461.1ms | Allocations: 27570)
  Rendered layouts/_header.html.erb (Duration: 4.9ms | Allocations: 1362)
  [1m[36mUser Load (78.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (52.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 174.0ms | Allocations: 8115)
  Rendered layout layouts/application.html.erb (Duration: 680.5ms | Allocations: 56139)
Completed 200 OK in 1911ms (Views: 177.1ms | ActiveRecord: 1346.8ms | Allocations: 93220)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:44:57 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (49.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (75.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (66.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (68.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (41.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (31.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (48.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (54.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (38.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (56.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (63.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (73.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (39.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (70.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 75.6ms | Allocations: 2220)
  [1m[36mDish Load (36.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (32.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (83.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (104.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (217.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 622)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 445)
  [1m[36mUser Load (62.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 293.1ms | Allocations: 4719)
  Rendered layouts/_add_comment.html.erb (Duration: 1.8ms | Allocations: 530)
  [1m[35m (243.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 4.0ms | Allocations: 1491)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 887.3ms | Allocations: 11864)
  Rendered layouts/_header.html.erb (Duration: 6.8ms | Allocations: 1088)
  [1m[36mUser Load (57.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (50.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 135.3ms | Allocations: 4635)
  Rendered layout layouts/application.html.erb (Duration: 1067.4ms | Allocations: 28116)
Completed 200 OK in 1804ms (Views: 110.4ms | ActiveRecord: 1664.3ms | Allocations: 33765)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:45:47 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (38.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (73.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (44.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (32.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (53.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (27.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (23.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (34.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (28.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (27.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (57.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (28.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (23.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 31.3ms | Allocations: 2916)
  [1m[36mDish Load (52.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (31.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (58.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (22.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 4.2ms | Allocations: 876)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 446)
  [1m[36mUser Load (67.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 185.4ms | Allocations: 12774)
  Rendered layouts/_add_comment.html.erb (Duration: 2.3ms | Allocations: 680)
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 3.5ms | Allocations: 1507)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 501.1ms | Allocations: 27610)
  Rendered layouts/_header.html.erb (Duration: 5.2ms | Allocations: 1358)
  [1m[36mUser Load (22.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (30.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 100.9ms | Allocations: 8114)
  Rendered layout layouts/application.html.erb (Duration: 635.0ms | Allocations: 56171)
Completed 200 OK in 1738ms (Views: 157.4ms | ActiveRecord: 1382.0ms | Allocations: 85299)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:46:58 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (23.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (46.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (27.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (23.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (22.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (23.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (22.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (32.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (22.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 37.3ms | Allocations: 2928)
  [1m[36mDish Load (22.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (25.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (22.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 2.1ms | Allocations: 876)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 446)
  [1m[36mUser Load (24.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 123.5ms | Allocations: 12774)
  Rendered layouts/_add_comment.html.erb (Duration: 2.1ms | Allocations: 680)
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 4.2ms | Allocations: 1507)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 374.6ms | Allocations: 27622)
  Rendered layouts/_header.html.erb (Duration: 3.8ms | Allocations: 1360)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 89.4ms | Allocations: 8115)
  Rendered layout layouts/application.html.erb (Duration: 505.8ms | Allocations: 56221)
Completed 200 OK in 1284ms (Views: 172.2ms | ActiveRecord: 919.2ms | Allocations: 85361)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 15:49:12 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (22.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (29.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (22.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (29.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (22.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (23.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (28.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (22.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (22.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 3.7ms | Allocations: 879)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 147.7ms | Allocations: 15107)
  Rendered layouts/_add_comment.html.erb (Duration: 3.6ms | Allocations: 680)
  Rendered dishes/show.html.erb within layouts/application (Duration: 216.7ms | Allocations: 18656)
  Rendered layouts/_header.html.erb (Duration: 6.1ms | Allocations: 1359)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 74.7ms | Allocations: 7942)
  Rendered layout layouts/application.html.erb (Duration: 339.8ms | Allocations: 47049)
Completed 200 OK in 833ms (Views: 170.9ms | ActiveRecord: 544.0ms | Allocations: 70047)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:52:11 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (23.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (23.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (22.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (22.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (22.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (22.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (22.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (22.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (23.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (22.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (22.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 31.3ms | Allocations: 2928)
  [1m[36mDish Load (22.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (23.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/show.html.erb within layouts/application (Duration: 153.4ms | Allocations: 12051)
  Rendered layout layouts/application.html.erb (Duration: 154.0ms | Allocations: 12144)
Completed 500 Internal Server Error in 826ms (ActiveRecord: 637.5ms | Allocations: 41241)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `imported_id' for nil:NilClass):
    25:               <div class="restaurants_new_dish_button_text">Editar plato</div>
    26:             <% end %>
    27:           <% end %> -->
    28:            <% if @dish.imported_id %>
    29:             <%= link_to "#{ENV['EINA_EATS_WEB']}/platosrestaurante/#{@restaurant.imported_id}", style: "text-decoration: none" do %>
    30:               <div class="restaurants_header_edit_button">
    31:                 <span class="restaurants_header_edit_button_text">Editar en EinaEats</span>
  
app/views/restaurants/show.html.erb:28
app/views/restaurants/show.html.erb:9
Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:53:37 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (60.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (47.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (29.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (36.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (34.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (32.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (40.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (37.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (28.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (30.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (30.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 32.8ms | Allocations: 2917)
  [1m[36mDish Load (63.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (25.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (49.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (33.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (23.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 876)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 446)
  [1m[36mUser Load (33.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 154.9ms | Allocations: 12775)
  Rendered layouts/_add_comment.html.erb (Duration: 2.5ms | Allocations: 680)
  [1m[35m (45.1ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 4.3ms | Allocations: 1507)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 564.4ms | Allocations: 27866)
  Rendered layouts/_header.html.erb (Duration: 4.8ms | Allocations: 1358)
  [1m[36mUser Load (31.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 100.2ms | Allocations: 8114)
  Rendered layout layouts/application.html.erb (Duration: 710.2ms | Allocations: 56429)
Completed 200 OK in 1783ms (Views: 178.9ms | ActiveRecord: 1339.9ms | Allocations: 85554)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:54:58 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (22.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (22.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (26.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (23.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (30.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (23.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (32.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 38.7ms | Allocations: 2917)
  [1m[36mDish Load (22.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (27.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (27.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (23.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 3.2ms | Allocations: 876)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 446)
  [1m[36mUser Load (22.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 449)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 139.0ms | Allocations: 12820)
  Rendered layouts/_add_comment.html.erb (Duration: 3.4ms | Allocations: 682)
  [1m[35m (22.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 446)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 4.9ms | Allocations: 1511)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 401.1ms | Allocations: 27919)
  Rendered layouts/_header.html.erb (Duration: 4.5ms | Allocations: 1358)
  [1m[36mUser Load (22.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 88.4ms | Allocations: 8115)
  Rendered layout layouts/application.html.erb (Duration: 526.8ms | Allocations: 56483)
Completed 200 OK in 1289ms (Views: 193.0ms | ActiveRecord: 920.1ms | Allocations: 85618)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:55:27 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (26.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (22.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (23.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (22.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (27.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (22.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (23.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (22.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (23.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 29.2ms | Allocations: 2220)
  [1m[36mDish Load (22.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (37.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (22.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (41.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (42.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 620)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 445)
  [1m[36mUser Load (24.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 81.7ms | Allocations: 4713)
  Rendered layouts/_add_comment.html.erb (Duration: 1.3ms | Allocations: 528)
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 6.2ms | Allocations: 1491)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 283.1ms | Allocations: 11969)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1088)
  [1m[36mUser Load (22.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 63.1ms | Allocations: 4635)
  Rendered layout layouts/application.html.erb (Duration: 392.6ms | Allocations: 28178)
Completed 200 OK in 749ms (Views: 109.7ms | ActiveRecord: 601.9ms | Allocations: 33839)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 15:55:34 +0100
Started GET "/restaurants/3/dishes/3/edit" for 127.0.0.1 at 2023-11-20 15:55:34 +0100
Processing by DishesController#show as HTML
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  Parameters: {"restaurant_id"=>"3", "id"=>"3"}
  [1m[36mRestaurant Load (26.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (23.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (23.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (22.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.0ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (23.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (23.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (23.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.6ms | Allocations: 618)
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 75.5ms | Allocations: 8108)
  Rendered layouts/_add_comment.html.erb (Duration: 3.5ms | Allocations: 528)
  Rendered dishes/show.html.erb within layouts/application (Duration: 137.3ms | Allocations: 10762)
  Rendered layouts/_header.html.erb (Duration: 3.3ms | Allocations: 1089)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 37.0ms | Allocations: 4531)
  Rendered layout layouts/application.html.erb (Duration: 191.5ms | Allocations: 20152)
Completed 200 OK in 389ms (Views: 78.1ms | ActiveRecord: 282.2ms | Allocations: 26391)


  [1m[36mDish Load (25.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 20.6ms | Allocations: 2890)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 25.1ms | Allocations: 3389)
  Rendered layouts/_header.html.erb (Duration: 5.9ms | Allocations: 1088)
  [1m[36mUser Load (26.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 139.3ms | Allocations: 4662)
  Rendered layout layouts/application.html.erb (Duration: 197.8ms | Allocations: 12895)
Completed 200 OK in 988ms (Views: 148.5ms | ActiveRecord: 272.8ms | Allocations: 42415)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:55:39 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (20.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (22.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (25.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (26.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (1654.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (133.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (23.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (105.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (47.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (33.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (34.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (43.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 29.8ms | Allocations: 2221)
  [1m[36mDish Load (105.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (33.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (28.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 626)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 445)
  [1m[36mUser Load (119.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 196.1ms | Allocations: 4732)
  Rendered layouts/_add_comment.html.erb (Duration: 5.5ms | Allocations: 534)
  [1m[35m (76.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 8.9ms | Allocations: 1491)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 581.7ms | Allocations: 11995)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1100)
  [1m[36mUser Load (71.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (32.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 122.8ms | Allocations: 4674)
  Rendered layout layouts/application.html.erb (Duration: 722.1ms | Allocations: 21579)
Completed 200 OK in 3022ms (Views: 182.2ms | ActiveRecord: 2735.1ms | Allocations: 27286)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:56:41 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (26.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (32.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (42.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (31.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (31.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (38.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (35.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (31.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (52.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (34.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (30.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (33.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (133.0ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (88.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 96.3ms | Allocations: 2917)
  [1m[36mDish Load (42.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (21.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (30.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (26.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 4.7ms | Allocations: 870)
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 446)
  [1m[36mUser Load (43.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 186.5ms | Allocations: 12766)
  Rendered layouts/_add_comment.html.erb (Duration: 4.9ms | Allocations: 674)
  [1m[35m (82.2ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 4.2ms | Allocations: 1507)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 644.1ms | Allocations: 27882)
  Rendered layouts/_header.html.erb (Duration: 27.4ms | Allocations: 1353)
  [1m[36mUser Load (46.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (36.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 155.2ms | Allocations: 8118)
  Rendered layout layouts/application.html.erb (Duration: 864.5ms | Allocations: 56388)
Completed 200 OK in 2020ms (Views: 252.8ms | ActiveRecord: 1578.1ms | Allocations: 85611)


Started GET "/restaurants/3/dishes/3/edit" for 127.0.0.1 at 2023-11-20 15:56:46 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"3"}
  [1m[36mDish Load (20.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 8.8ms | Allocations: 2765)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 14.7ms | Allocations: 3278)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1096)
  [1m[36mUser Load (21.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (20.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 62.9ms | Allocations: 4672)
  Rendered layout layouts/application.html.erb (Duration: 89.5ms | Allocations: 12817)
Completed 200 OK in 122ms (Views: 50.3ms | ActiveRecord: 63.5ms | Allocations: 14293)


Started GET "/restaurants/3/dishes/3/edit" for 127.0.0.1 at 2023-11-20 15:56:52 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"3"}
  [1m[36mDish Load (23.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 8.2ms | Allocations: 2176)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 9.2ms | Allocations: 2454)
  Rendered layouts/_header.html.erb (Duration: 4.0ms | Allocations: 1088)
  [1m[36mUser Load (22.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (21.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 61.7ms | Allocations: 4635)
  Rendered layout layouts/application.html.erb (Duration: 84.1ms | Allocations: 11933)
Completed 200 OK in 112ms (Views: 41.0ms | ActiveRecord: 67.5ms | Allocations: 12585)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:57:49 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (20.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (21.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (22.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (23.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (22.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (22.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (20.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (21.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (19.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (19.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (19.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (20.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 28.8ms | Allocations: 2917)
  [1m[36mDish Load (23.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (20.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (22.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (21.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 2.4ms | Allocations: 872)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 446)
  [1m[36mUser Load (23.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 449)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 133.1ms | Allocations: 12791)
  Rendered layouts/_add_comment.html.erb (Duration: 2.7ms | Allocations: 685)
  [1m[35m (20.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 4.0ms | Allocations: 1507)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 362.3ms | Allocations: 27887)
  Rendered layouts/_header.html.erb (Duration: 3.9ms | Allocations: 1358)
  [1m[36mUser Load (19.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (19.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 81.9ms | Allocations: 8115)
  Rendered layout layouts/application.html.erb (Duration: 485.5ms | Allocations: 56458)
Completed 200 OK in 1117ms (Views: 185.0ms | ActiveRecord: 789.4ms | Allocations: 85589)


Started GET "/restaurants/3/dishes/4/edit" for 127.0.0.1 at 2023-11-20 15:57:53 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mDish Load (21.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 7.8ms | Allocations: 2765)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 10.9ms | Allocations: 3260)
  Rendered layouts/_header.html.erb (Duration: 2.4ms | Allocations: 1088)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 63.4ms | Allocations: 4636)
  Rendered layout layouts/application.html.erb (Duration: 85.6ms | Allocations: 12770)
Completed 200 OK in 114ms (Views: 40.0ms | ActiveRecord: 69.0ms | Allocations: 14245)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 15:58:09 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (34.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (39.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (20.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (29.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (34.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (35.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (38.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (29.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (28.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (21.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (20.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (20.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (20.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (21.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 38.4ms | Allocations: 2917)
  [1m[36mDish Load (31.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (20.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (20.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (20.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (19.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 2.8ms | Allocations: 876)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 446)
  [1m[36mUser Load (19.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 111.6ms | Allocations: 12800)
  Rendered layouts/_add_comment.html.erb (Duration: 2.2ms | Allocations: 680)
  [1m[35m (20.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 5.0ms | Allocations: 1507)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 372.7ms | Allocations: 27907)
  Rendered layouts/_header.html.erb (Duration: 4.0ms | Allocations: 1358)
  [1m[36mUser Load (19.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (19.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 80.6ms | Allocations: 8115)
  Rendered layout layouts/application.html.erb (Duration: 492.6ms | Allocations: 56469)
Completed 200 OK in 1344ms (Views: 190.4ms | ActiveRecord: 965.8ms | Allocations: 85585)


Started GET "/restaurants/3/dishes/4/edit" for 127.0.0.1 at 2023-11-20 15:58:14 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mDish Load (20.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 12.1ms | Allocations: 2763)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 15.6ms | Allocations: 3258)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1088)
  [1m[36mUser Load (21.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 63.8ms | Allocations: 4636)
  Rendered layout layouts/application.html.erb (Duration: 92.9ms | Allocations: 12740)
Completed 200 OK in 123ms (Views: 50.8ms | ActiveRecord: 64.1ms | Allocations: 14215)


Started GET "/restaurants/3/dishes/16/edit" for 127.0.0.1 at 2023-11-20 15:58:18 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"16"}
  [1m[36mDish Load (25.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 14.2ms | Allocations: 2176)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 17.4ms | Allocations: 2454)
  Rendered layouts/_header.html.erb (Duration: 5.8ms | Allocations: 1088)
  [1m[36mUser Load (23.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (21.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 74.0ms | Allocations: 4635)
  Rendered layout layouts/application.html.erb (Duration: 113.6ms | Allocations: 11933)
Completed 200 OK in 145ms (Views: 70.2ms | ActiveRecord: 70.2ms | Allocations: 12585)


Started GET "/restaurants/3/dishes/16/edit" for 127.0.0.1 at 2023-11-20 15:58:32 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"16"}
  [1m[36mDish Load (24.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 9.0ms | Allocations: 2176)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 10.7ms | Allocations: 2472)
  Rendered layouts/_header.html.erb (Duration: 4.2ms | Allocations: 1088)
  [1m[36mUser Load (26.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (21.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 77.7ms | Allocations: 4642)
  Rendered layout layouts/application.html.erb (Duration: 104.8ms | Allocations: 11958)
Completed 200 OK in 134ms (Views: 58.1ms | ActiveRecord: 72.4ms | Allocations: 12611)


Started PATCH "/restaurants/3/dishes" for 127.0.0.1 at 2023-11-20 15:58:42 +0100
Processing by ErrorsController#not_found as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"bing", "descripcion"=>"chillin", "precio"=>"10.85"}, "button"=>"", "unmatched"=>"restaurants/3/dishes"}
  Rendering layout layouts/application.html.erb
  Rendering errors/not_found.html.erb within layouts/application
  Rendered errors/not_found.html.erb within layouts/application (Duration: 0.8ms | Allocations: 95)
  Rendered layouts/_header.html.erb (Duration: 2.8ms | Allocations: 1129)
  [1m[36mUser Load (22.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (19.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.9ms | Allocations: 4653)
  Rendered layout layouts/application.html.erb (Duration: 68.4ms | Allocations: 9883)
Completed 404 Not Found in 72ms (Views: 28.3ms | ActiveRecord: 42.0ms | Allocations: 10673)


Started GET "/" for 127.0.0.1 at 2023-11-20 15:58:43 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (46.6ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (22.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (20.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (20.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (19.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (21.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (26.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (21.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 117.8ms | Allocations: 12973)
  Rendered layouts/_header.html.erb (Duration: 3.5ms | Allocations: 1089)
  [1m[36mUser Load (21.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (19.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 56.6ms | Allocations: 4655)
  Rendered layout layouts/application.html.erb (Duration: 187.9ms | Allocations: 22683)
Completed 200 OK in 345ms (Views: 57.3ms | ActiveRecord: 261.3ms | Allocations: 26956)


Started GET "/categories" for 127.0.0.1 at 2023-11-20 15:58:49 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (21.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (21.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 71.9ms | Allocations: 4909)
  Rendered layouts/_header.html.erb (Duration: 5.7ms | Allocations: 1114)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 42.9ms | Allocations: 4530)
  Rendered layout layouts/application.html.erb (Duration: 138.1ms | Allocations: 14302)
Completed 200 OK in 142ms (Views: 74.4ms | ActiveRecord: 65.9ms | Allocations: 14795)


Started GET "/" for 127.0.0.1 at 2023-11-20 19:54:45 +0100
  [1m[36mActiveRecord::SchemaMigration Load (132.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (97.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (97.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (102.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (102.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (299.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (194.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (80.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (92.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 1627.4ms | Allocations: 132838)
  Rendered layouts/_header.html.erb (Duration: 6.2ms | Allocations: 1394)
  Rendered layouts/_sidenav.html.erb (Duration: 19.8ms | Allocations: 3427)
  Rendered layout layouts/application.html.erb (Duration: 1723.0ms | Allocations: 157210)
Completed 200 OK in 3912ms (Views: 1268.5ms | ActiveRecord: 2044.2ms | Allocations: 199629)


Started GET "/restaurants/1" for 127.0.0.1 at 2023-11-20 19:57:29 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (126.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (98.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (139.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (201.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (97.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (101.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (620.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (163.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (102.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (101.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (96.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (93.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (129.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 11.3ms | Allocations: 3666)
  [1m[36mDish Load (300.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (101.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (198.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 6.3ms | Allocations: 888)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 442)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 938.5ms | Allocations: 17790)
  Rendered layouts/_add_comment.html.erb (Duration: 5.7ms | Allocations: 685)
  [1m[35m (151.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 2093.2ms | Allocations: 35339)
  Rendered layouts/_header.html.erb (Duration: 3.9ms | Allocations: 1088)
  Rendered layouts/_sidenav.html.erb (Duration: 10.4ms | Allocations: 2659)
  Rendered layout layouts/application.html.erb (Duration: 2119.3ms | Allocations: 42818)
Completed 200 OK in 5338ms (Views: 818.7ms | ActiveRecord: 3895.7ms | Allocations: 72111)


Started GET "/restaurants/1/dishes/1" for 127.0.0.1 at 2023-11-20 19:57:38 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"1", "id"=>"1"}
  [1m[36mRestaurant Load (123.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (70.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 1], ["restaurant_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (126.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=1 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (98.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=1 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (99.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=1 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (96.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (97.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (97.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[36mReview Load (91.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (102.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 3.5ms | Allocations: 641)
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 440)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 3.1ms | Allocations: 443)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 236.3ms | Allocations: 6581)
  Rendered layouts/_add_comment.html.erb (Duration: 3.7ms | Allocations: 534)
  Rendered dishes/show.html.erb within layouts/application (Duration: 346.4ms | Allocations: 9055)
  Rendered layouts/_header.html.erb (Duration: 7.5ms | Allocations: 1094)
  Rendered layouts/_sidenav.html.erb (Duration: 14.1ms | Allocations: 2669)
  Rendered layout layouts/application.html.erb (Duration: 391.4ms | Allocations: 16601)
Completed 200 OK in 1234ms (Views: 102.6ms | ActiveRecord: 1003.5ms | Allocations: 21475)


Started GET "/login" for 127.0.0.1 at 2023-11-20 19:57:42 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 15.8ms | Allocations: 3236)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1093)
  Rendered layouts/_sidenav.html.erb (Duration: 12.4ms | Allocations: 2670)
  Rendered layout layouts/application.html.erb (Duration: 45.2ms | Allocations: 10766)
Completed 200 OK in 104ms (Views: 47.0ms | ActiveRecord: 0.0ms | Allocations: 14295)


Started POST "/login" for 127.0.0.1 at 2023-11-20 19:57:49 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"Atreides", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (100.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 528ms (ActiveRecord: 100.1ms | Allocations: 1144)


Started GET "/" for 127.0.0.1 at 2023-11-20 19:57:50 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (322.9ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (207.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (91.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (101.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (92.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (189.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (101.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (91.0ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 465.8ms | Allocations: 10542)
  Rendered layouts/_header.html.erb (Duration: 36.6ms | Allocations: 1089)
  [1m[36mUser Load (231.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (105.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 806.0ms | Allocations: 8469)
  Rendered layout layouts/application.html.erb (Duration: 1367.1ms | Allocations: 24123)
Completed 200 OK in 2209ms (Views: 476.3ms | ActiveRecord: 1708.7ms | Allocations: 26670)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 19:57:55 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (851.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (196.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (197.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (196.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (100.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (99.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (204.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (177.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (201.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (197.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (106.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (194.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (99.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (179.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 199.0ms | Allocations: 2223)
  [1m[36mDish Load (197.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (1325.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (101.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 3.3ms | Allocations: 629)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 445)
  [1m[36mUser Load (83.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 3.7ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 3.7ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 226.5ms | Allocations: 4744)
  Rendered layouts/_add_comment.html.erb (Duration: 7.6ms | Allocations: 534)
  [1m[35m (266.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 4.9ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 5.4ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 24.3ms | Allocations: 1533)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 2282.4ms | Allocations: 11536)
  Rendered layouts/_header.html.erb (Duration: 19.8ms | Allocations: 1088)
  [1m[36mUser Load (86.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (92.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 219.6ms | Allocations: 4635)
  Rendered layout layouts/application.html.erb (Duration: 2568.7ms | Allocations: 21016)
Completed 200 OK in 5475ms (Views: 238.0ms | ActiveRecord: 5152.8ms | Allocations: 29513)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 19:58:52 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (98.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (94.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (99.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (76.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (194.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (286.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (90.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (99.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (101.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (102.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (98.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (202.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (181.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (179.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 195.8ms | Allocations: 2919)
  [1m[36mDish Load (91.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (85.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (179.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 5.2ms | Allocations: 879)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 446)
  [1m[36mUser Load (98.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 633.6ms | Allocations: 12827)
  Rendered layouts/_add_comment.html.erb (Duration: 4.5ms | Allocations: 680)
  [1m[35m (175.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 2.4ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 7.8ms | Allocations: 1507)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 1540.4ms | Allocations: 27255)
  Rendered layouts/_header.html.erb (Duration: 6.1ms | Allocations: 1351)
  [1m[36mUser Load (182.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (303.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 824.2ms | Allocations: 8096)
  Rendered layout layouts/application.html.erb (Duration: 2464.7ms | Allocations: 55631)
Completed 200 OK in 5958ms (Views: 389.3ms | ActiveRecord: 5186.0ms | Allocations: 84777)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 19:59:29 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (95.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (122.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (96.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (103.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (98.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (100.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (54.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (132.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (102.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (96.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (99.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (211.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (174.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (178.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 194.2ms | Allocations: 2921)
  [1m[36mDish Load (101.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (79.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (88.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 6.8ms | Allocations: 876)
  Rendered layouts/_reaction.html.erb (Duration: 2.7ms | Allocations: 446)
  [1m[36mUser Load (94.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 2.6ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 442.8ms | Allocations: 12774)
  Rendered layouts/_add_comment.html.erb (Duration: 5.3ms | Allocations: 683)
  [1m[35m (161.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 446)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 8.9ms | Allocations: 1509)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 1334.5ms | Allocations: 27211)
  Rendered layouts/_header.html.erb (Duration: 17.8ms | Allocations: 1350)
  [1m[36mUser Load (177.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (101.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 506.7ms | Allocations: 8457)
  Rendered layout layouts/application.html.erb (Duration: 1956.1ms | Allocations: 55947)
Completed 200 OK in 5061ms (Views: 393.6ms | ActiveRecord: 4247.8ms | Allocations: 85072)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 20:02:22 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (70.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (135.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (199.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (98.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (100.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (210.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (88.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (93.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (101.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (101.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (97.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (201.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (204.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (184.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 196.7ms | Allocations: 2220)
  [1m[36mDish Load (94.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (194.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (99.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 2.7ms | Allocations: 622)
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 445)
  [1m[36mUser Load (190.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.7ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 2.1ms | Allocations: 442)
  Rendered layouts/_comment.html.erb (Duration: 320.4ms | Allocations: 4718)
  Rendered layouts/_add_comment.html.erb (Duration: 3.3ms | Allocations: 528)
  [1m[35m (286.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 2.4ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 8.0ms | Allocations: 1491)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 1129.1ms | Allocations: 11388)
  Rendered layouts/_header.html.erb (Duration: 24.7ms | Allocations: 1088)
  [1m[36mUser Load (121.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (95.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 258.8ms | Allocations: 4659)
  Rendered layout layouts/application.html.erb (Duration: 1643.3ms | Allocations: 27919)
Completed 200 OK in 3402ms (Views: 379.3ms | ActiveRecord: 2967.4ms | Allocations: 33549)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 20:02:48 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (934.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (209.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (91.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (61.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (136.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (104.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (106.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (181.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (202.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (305.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (100.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (103.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (94.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (89.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 98.8ms | Allocations: 2223)
  [1m[36mDish Load (94.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (92.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (98.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 3.0ms | Allocations: 622)
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 445)
  [1m[36mUser Load (88.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 217.2ms | Allocations: 4722)
  Rendered layouts/_add_comment.html.erb (Duration: 3.4ms | Allocations: 530)
  [1m[35m (83.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 446)
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 8.0ms | Allocations: 1493)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 618.5ms | Allocations: 11393)
  Rendered layouts/_header.html.erb (Duration: 5.4ms | Allocations: 1092)
  [1m[36mUser Load (106.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (96.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 240.8ms | Allocations: 4662)
  Rendered layout layouts/application.html.erb (Duration: 937.9ms | Allocations: 27643)
Completed 200 OK in 3623ms (Views: 192.2ms | ActiveRecord: 3379.2ms | Allocations: 33282)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 20:03:06 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (117.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (100.5ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (97.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (98.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (101.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (101.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (100.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (60.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (235.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (98.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (205.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (196.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (300.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (84.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 100.7ms | Allocations: 2220)
  [1m[36mDish Load (200.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (105.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (84.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 3.2ms | Allocations: 620)
  Rendered layouts/_reaction.html.erb (Duration: 2.4ms | Allocations: 445)
  [1m[36mUser Load (188.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 445)
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 306.2ms | Allocations: 4716)
  Rendered layouts/_add_comment.html.erb (Duration: 3.0ms | Allocations: 528)
  [1m[35m (82.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 2.1ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 7.7ms | Allocations: 1491)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 827.3ms | Allocations: 11380)
  Rendered layouts/_header.html.erb (Duration: 3.1ms | Allocations: 1088)
  [1m[36mUser Load (238.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (98.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 362.3ms | Allocations: 4636)
  Rendered layout layouts/application.html.erb (Duration: 1245.4ms | Allocations: 27594)
Completed 200 OK in 3111ms (Views: 164.1ms | ActiveRecord: 2895.0ms | Allocations: 33227)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 20:03:40 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (115.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (91.5ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (94.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (205.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (99.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (98.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (94.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (94.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (175.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (231.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (98.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (198.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (298.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (92.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 107.6ms | Allocations: 2221)
  [1m[36mDish Load (89.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (91.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (105.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 3.5ms | Allocations: 626)
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 445)
  [1m[36mUser Load (183.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 2.2ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 322.0ms | Allocations: 4732)
  Rendered layouts/_add_comment.html.erb (Duration: 3.7ms | Allocations: 534)
  [1m[35m (182.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 7.1ms | Allocations: 1491)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 830.4ms | Allocations: 11407)
  Rendered layouts/_header.html.erb (Duration: 7.4ms | Allocations: 1092)
  [1m[36mUser Load (104.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (190.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 328.0ms | Allocations: 4665)
  Rendered layout layouts/application.html.erb (Duration: 1246.7ms | Allocations: 27665)
Completed 200 OK in 3207ms (Views: 207.8ms | ActiveRecord: 2934.9ms | Allocations: 33294)


Started GET "/" for 127.0.0.1 at 2023-11-20 20:03:59 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (189.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (95.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (105.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (108.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (86.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (179.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (99.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (90.3ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 515.7ms | Allocations: 12978)
  Rendered layouts/_header.html.erb (Duration: 3.7ms | Allocations: 1091)
  [1m[36mUser Load (72.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (102.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 189.6ms | Allocations: 4637)
  Rendered layout layouts/application.html.erb (Duration: 719.0ms | Allocations: 22665)
Completed 200 OK in 1382ms (Views: 79.5ms | ActiveRecord: 1226.4ms | Allocations: 34861)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-20 20:04:04 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (87.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (195.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (210.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (105.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (87.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-20 19:04:05.619602')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (197.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-20 19:04:05.718247')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (96.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-20 19:04:05.920337')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (103.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (95.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (99.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-20 19:04:06.228590')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (93.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (91.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-20 19:04:06.437316')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (199.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-20 19:04:06.536959')[0m  [["reviewable_id", 16], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (100.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (99.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 28.7ms | Allocations: 3534)
  Rendered layouts/_header.html.erb (Duration: 6.1ms | Allocations: 1093)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 20.2ms | Allocations: 4443)
  Rendered layout layouts/application.html.erb (Duration: 69.5ms | Allocations: 12822)
Completed 200 OK in 2434ms (Views: 82.4ms | ActiveRecord: 2212.9ms | Allocations: 23473)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 20:06:04 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (89.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (198.8ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (97.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (106.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (93.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (308.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (93.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (83.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (96.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (103.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (201.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (90.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (318.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (320.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 337.5ms | Allocations: 2918)
  [1m[36mDish Load (101.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (181.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (93.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 7.6ms | Allocations: 876)
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 446)
  [1m[36mUser Load (101.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.8ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 3.5ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 430.0ms | Allocations: 12798)
  Rendered layouts/_add_comment.html.erb (Duration: 3.7ms | Allocations: 680)
  [1m[35m (170.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 2.7ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 12.1ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 28.1ms | Allocations: 1507)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 1627.7ms | Allocations: 27229)
  Rendered layouts/_header.html.erb (Duration: 2.4ms | Allocations: 1360)
  [1m[36mUser Load (118.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (94.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 339.5ms | Allocations: 8115)
  Rendered layout layouts/application.html.erb (Duration: 2125.3ms | Allocations: 55780)
Completed 200 OK in 5570ms (Views: 447.4ms | ActiveRecord: 4683.2ms | Allocations: 84898)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 20:07:13 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (197.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (189.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (102.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (96.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (100.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (102.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (92.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (99.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (97.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (101.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (107.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (189.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (107.1ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (181.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 193.2ms | Allocations: 2221)
  [1m[36mDish Load (98.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (104.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (85.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 2.9ms | Allocations: 620)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 445)
  [1m[36mUser Load (87.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 203.5ms | Allocations: 4718)
  Rendered layouts/_add_comment.html.erb (Duration: 2.7ms | Allocations: 530)
  [1m[35m (333.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 8.7ms | Allocations: 1491)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 963.1ms | Allocations: 11390)
  Rendered layouts/_header.html.erb (Duration: 6.9ms | Allocations: 1096)
  [1m[36mUser Load (262.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (196.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 494.5ms | Allocations: 4645)
  Rendered layout layouts/application.html.erb (Duration: 1541.0ms | Allocations: 27635)
Completed 200 OK in 3188ms (Views: 196.6ms | ActiveRecord: 2930.7ms | Allocations: 33245)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 20:07:53 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (125.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (104.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (200.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (94.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (1095.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (128.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (99.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (97.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (94.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (104.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (98.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (101.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (89.1ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (90.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 101.9ms | Allocations: 2216)
  [1m[36mDish Load (200.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (92.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (98.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 3.0ms | Allocations: 620)
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 445)
  [1m[36mUser Load (84.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.2ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 210.8ms | Allocations: 4714)
  Rendered layouts/_add_comment.html.erb (Duration: 3.6ms | Allocations: 528)
  [1m[35m (189.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 8.6ms | Allocations: 1491)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 830.6ms | Allocations: 11375)
  Rendered layouts/_header.html.erb (Duration: 5.4ms | Allocations: 1088)
  [1m[36mUser Load (84.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (199.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 314.9ms | Allocations: 4635)
  Rendered layout layouts/application.html.erb (Duration: 1242.3ms | Allocations: 27580)
Completed 200 OK in 3731ms (Views: 206.4ms | ActiveRecord: 3471.3ms | Allocations: 33205)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 20:08:09 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (202.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (102.1ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (89.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (203.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (101.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (200.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (89.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (81.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (102.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (99.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (104.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (93.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (84.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (75.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 89.7ms | Allocations: 2913)
  [1m[36mDish Load (100.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (251.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (91.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 4.6ms | Allocations: 876)
  Rendered layouts/_reaction.html.erb (Duration: 2.2ms | Allocations: 446)
  [1m[36mUser Load (97.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 426.2ms | Allocations: 12805)
  Rendered layouts/_add_comment.html.erb (Duration: 5.4ms | Allocations: 680)
  [1m[35m (72.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 8.7ms | Allocations: 1507)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 1233.1ms | Allocations: 27244)
  Rendered layouts/_header.html.erb (Duration: 11.5ms | Allocations: 1358)
  [1m[36mUser Load (82.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (236.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 427.6ms | Allocations: 8118)
  Rendered layout layouts/application.html.erb (Duration: 1758.3ms | Allocations: 55784)
Completed 200 OK in 5849ms (Views: 405.6ms | ActiveRecord: 4221.3ms | Allocations: 84910)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:08:44 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (954.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (100.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (201.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (99.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (209.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (286.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (97.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (202.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (95.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (84.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (94.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 7.5ms | Allocations: 624)
  Rendered layouts/_reaction.html.erb (Duration: 2.9ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 4.0ms | Allocations: 441)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 265.0ms | Allocations: 7811)
  Rendered layouts/_add_comment.html.erb (Duration: 3.6ms | Allocations: 534)
  Rendered dishes/show.html.erb within layouts/application (Duration: 583.5ms | Allocations: 10473)
  Rendered layouts/_header.html.erb (Duration: 5.3ms | Allocations: 1088)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (92.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 115.3ms | Allocations: 4530)
  Rendered layout layouts/application.html.erb (Duration: 722.4ms | Allocations: 19864)
Completed 200 OK in 2710ms (Views: 155.4ms | ActiveRecord: 2518.1ms | Allocations: 24760)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:09:46 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (97.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (203.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (98.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (101.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (98.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (96.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (183.0ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (86.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (98.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (95.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (103.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 8.7ms | Allocations: 873)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 441)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 514.9ms | Allocations: 15071)
  Rendered layouts/_add_comment.html.erb (Duration: 3.8ms | Allocations: 683)
  Rendered dishes/show.html.erb within layouts/application (Duration: 720.0ms | Allocations: 18581)
  Rendered layouts/_header.html.erb (Duration: 7.1ms | Allocations: 1359)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (98.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 244.6ms | Allocations: 7945)
  Rendered layout layouts/application.html.erb (Duration: 1030.1ms | Allocations: 46945)
Completed 200 OK in 3152ms (Views: 322.6ms | ActiveRecord: 2666.5ms | Allocations: 69758)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:10:30 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (193.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (94.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (101.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (174.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (129.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (91.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (83.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (86.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (92.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (90.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (99.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 5.3ms | Allocations: 879)
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 2.4ms | Allocations: 441)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 477.4ms | Allocations: 15106)
  Rendered layouts/_add_comment.html.erb (Duration: 6.4ms | Allocations: 680)
  Rendered dishes/show.html.erb within layouts/application (Duration: 682.1ms | Allocations: 18612)
  Rendered layouts/_header.html.erb (Duration: 9.3ms | Allocations: 1360)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (103.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 370.6ms | Allocations: 7915)
  Rendered layout layouts/application.html.erb (Duration: 1130.8ms | Allocations: 46910)
Completed 200 OK in 3628ms (Views: 299.6ms | ActiveRecord: 3120.0ms | Allocations: 69886)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:19:41 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (30.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
Completed 500 Internal Server Error in 61ms (ActiveRecord: 30.5ms | Allocations: 1838)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::ConnectionFailed (PQconsumeInput() SSL SYSCALL error: EOF detected
):
  
Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:19:53 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.4ms | Allocations: 1469)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::ConnectionNotEstablished (PQsocket() can't get socket descriptor):
  
Started GET "/" for 127.0.0.1 at 2023-11-20 20:19:58 +0100
Processing by RestaurantsController#index as HTML
Completed 500 Internal Server Error in 37ms (ActiveRecord: 1.6ms | Allocations: 3647)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::ConnectionNotEstablished (PQsocket() can't get socket descriptor):
  
Started GET "/" for 127.0.0.1 at 2023-11-20 20:20:38 +0100
  [1m[36mActiveRecord::SchemaMigration Load (88.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (89.0ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (107.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (112.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (104.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (100.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (109.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (66.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (78.3ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 1980.4ms | Allocations: 133444)
  Rendered layouts/_header.html.erb (Duration: 3.4ms | Allocations: 1394)
  [1m[36mUser Load (81.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (82.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 904.9ms | Allocations: 17672)
  Rendered layout layouts/application.html.erb (Duration: 2935.3ms | Allocations: 173212)
Completed 200 OK in 4587ms (Views: 1940.4ms | ActiveRecord: 2286.0ms | Allocations: 215265)


Started GET "/users/mis_restaurantes" for 127.0.0.1 at 2023-11-20 20:20:51 +0100
Processing by UsersController#mis_restaurantes as HTML
  [1m[36mUser Load (80.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:77:in `mis_restaurantes'
  Rendering layout layouts/application.html.erb
  Rendering users/mis_restaurantes.html.erb within layouts/application
  [1m[36mRestaurant Load (63.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/views/users/mis_restaurantes.html.erb:8
  Rendered users/mis_restaurantes.html.erb within layouts/application (Duration: 68.8ms | Allocations: 1842)
  Rendered layouts/_header.html.erb (Duration: 3.3ms | Allocations: 1114)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 15.5ms | Allocations: 4412)
  Rendered layout layouts/application.html.erb (Duration: 96.6ms | Allocations: 11143)
Completed 200 OK in 184ms (Views: 36.1ms | ActiveRecord: 143.8ms | Allocations: 12272)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-20 20:20:53 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (136.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (96.1ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (89.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (93.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (98.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (115.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (85.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (70.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (80.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (457.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (64.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (976.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (1304.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (3600.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 3618.4ms | Allocations: 2882)
  [1m[36mDish Load (80.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (111.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (60.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 6.9ms | Allocations: 883)
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 446)
  [1m[36mUser Load (652.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.7ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 866.2ms | Allocations: 7834)
  Rendered layouts/_add_comment.html.erb (Duration: 4.5ms | Allocations: 685)
  [1m[35m (90.2ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 2.1ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 30.1ms | Allocations: 1538)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 5200.4ms | Allocations: 25177)
  Rendered layouts/_header.html.erb (Duration: 7.0ms | Allocations: 1092)
  [1m[36mUser Load (73.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (110.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 207.7ms | Allocations: 4649)
  Rendered layout layouts/application.html.erb (Duration: 5430.9ms | Allocations: 34688)
Completed 200 OK in 9925ms (Views: 430.8ms | ActiveRecord: 9125.0ms | Allocations: 67524)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:21:10 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (95.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (76.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (94.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (86.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (81.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (1941.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (96.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (77.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[35m (88.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (64.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (92.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 620)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 2.9ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 184.4ms | Allocations: 7799)
  Rendered layouts/_add_comment.html.erb (Duration: 1.8ms | Allocations: 530)
  Rendered dishes/show.html.erb within layouts/application (Duration: 361.9ms | Allocations: 10505)
  Rendered layouts/_header.html.erb (Duration: 3.4ms | Allocations: 1092)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (88.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 100.5ms | Allocations: 4542)
  Rendered layout layouts/application.html.erb (Duration: 475.3ms | Allocations: 19919)
Completed 200 OK in 3039ms (Views: 65.5ms | ActiveRecord: 2883.9ms | Allocations: 24863)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:24:31 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (389.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (116.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (108.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (114.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (98.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (79.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (89.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (87.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (138.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (122.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (98.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 3.3ms | Allocations: 879)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 416.3ms | Allocations: 15147)
  Rendered layouts/_add_comment.html.erb (Duration: 2.1ms | Allocations: 680)
  Rendered dishes/show.html.erb within layouts/application (Duration: 656.2ms | Allocations: 19026)
  Rendered layouts/_header.html.erb (Duration: 4.8ms | Allocations: 1351)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (69.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 240.1ms | Allocations: 7918)
  Rendered layout layouts/application.html.erb (Duration: 939.9ms | Allocations: 47224)
Completed 200 OK in 5653ms (Views: 139.1ms | ActiveRecord: 5401.3ms | Allocations: 70196)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:25:45 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (80.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (78.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (78.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (79.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (80.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (94.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (79.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (70.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (92.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (85.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (276.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.4ms | Allocations: 618)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 441)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 391.6ms | Allocations: 7013)
  Rendered layouts/_add_comment.html.erb (Duration: 1.5ms | Allocations: 528)
  Rendered dishes/show.html.erb within layouts/application (Duration: 561.7ms | Allocations: 8592)
  Rendered layouts/_header.html.erb (Duration: 3.9ms | Allocations: 1088)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (117.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 133.6ms | Allocations: 4530)
  Rendered layout layouts/application.html.erb (Duration: 752.6ms | Allocations: 24982)
Completed 200 OK in 1343ms (Views: 111.8ms | ActiveRecord: 1214.0ms | Allocations: 28291)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:27:37 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (76.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (108.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (72.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (66.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (80.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (67.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (106.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (75.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (77.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered dishes/show.html.erb within layouts/application (Duration: 163.8ms | Allocations: 4040)
  Rendered layout layouts/application.html.erb (Duration: 164.5ms | Allocations: 4133)
Completed 500 Internal Server Error in 1494ms (ActiveRecord: 1378.1ms | Allocations: 27110)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `dish' for #<ActionView::Base:0x0000000001cea8>):
    25: 
    26:   
    27:   <div class="category_post_list">
    28:     <div class="restaurant_dish_container" onclick="window.location='<%= get_dish_path(dish) %>'" style="cursor: pointer;">
    29:       <% if dish.ruta_img_plato.present? %>
    30:         <%= image_tag dish.ruta_img_plato, class: "restaurant_dish_img" %>
    31:       <% else %>
  
app/views/dishes/show.html.erb:28
Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:28:54 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (83.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (267.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (64.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (88.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (69.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (92.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (63.1ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (66.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (70.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (70.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (61.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 879)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 269.4ms | Allocations: 14897)
  Rendered layouts/_add_comment.html.erb (Duration: 2.1ms | Allocations: 680)
  Rendered dishes/show.html.erb within layouts/application (Duration: 421.7ms | Allocations: 19374)
  Rendered layouts/_header.html.erb (Duration: 5.2ms | Allocations: 1361)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (82.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 176.3ms | Allocations: 7946)
  Rendered layout layouts/application.html.erb (Duration: 639.3ms | Allocations: 47807)
Completed 200 OK in 2219ms (Views: 142.0ms | ActiveRecord: 1983.1ms | Allocations: 70772)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:30:09 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (186.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (64.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (78.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (96.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (114.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (68.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (93.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (97.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (76.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (51.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (63.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 3.1ms | Allocations: 879)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 265.3ms | Allocations: 14886)
  Rendered layouts/_add_comment.html.erb (Duration: 2.0ms | Allocations: 680)
  Rendered dishes/show.html.erb within layouts/application (Duration: 457.8ms | Allocations: 19300)
  Rendered layouts/_header.html.erb (Duration: 5.1ms | Allocations: 1359)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (67.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 187.4ms | Allocations: 7943)
  Rendered layout layouts/application.html.erb (Duration: 678.3ms | Allocations: 47693)
Completed 200 OK in 2316ms (Views: 141.2ms | ActiveRecord: 2089.6ms | Allocations: 70669)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:30:55 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (69.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (62.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (149.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (69.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (72.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (67.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (68.1ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (52.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (105.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (77.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (82.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.6ms | Allocations: 875)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 299.4ms | Allocations: 14878)
  Rendered layouts/_add_comment.html.erb (Duration: 3.1ms | Allocations: 676)
  Rendered dishes/show.html.erb within layouts/application (Duration: 471.1ms | Allocations: 19277)
  Rendered layouts/_header.html.erb (Duration: 4.2ms | Allocations: 1351)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (70.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 160.6ms | Allocations: 7914)
  Rendered layout layouts/application.html.erb (Duration: 664.5ms | Allocations: 47471)
Completed 200 OK in 2257ms (Views: 126.9ms | ActiveRecord: 2026.3ms | Allocations: 70430)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:31:40 +0100
Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:31:41 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (115.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (74.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (93.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (63.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (77.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (86.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (68.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (59.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (65.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (54.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (67.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.5ms | Allocations: 879)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 288.0ms | Allocations: 14878)
  Rendered layouts/_add_comment.html.erb (Duration: 3.4ms | Allocations: 680)
  Rendered dishes/show.html.erb within layouts/application (Duration: 427.3ms | Allocations: 19284)
  Rendered layouts/_header.html.erb (Duration: 4.0ms | Allocations: 1359)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (69.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 167.7ms | Allocations: 7943)
  Rendered layout layouts/application.html.erb (Duration: 631.7ms | Allocations: 47675)
Completed 200 OK in 3521ms (Views: 129.4ms | ActiveRecord: 3306.3ms | Allocations: 70574)


Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (52.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (85.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (82.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (77.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (60.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (71.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (104.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (61.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (68.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (65.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (67.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 873)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 272.4ms | Allocations: 14855)
  Rendered layouts/_add_comment.html.erb (Duration: 2.6ms | Allocations: 674)
  Rendered dishes/show.html.erb within layouts/application (Duration: 414.6ms | Allocations: 19533)
  Rendered layouts/_header.html.erb (Duration: 5.7ms | Allocations: 1361)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (82.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 181.5ms | Allocations: 7942)
  Rendered layout layouts/application.html.erb (Duration: 648.2ms | Allocations: 47707)
Completed 200 OK in 1795ms (Views: 136.7ms | ActiveRecord: 1583.3ms | Allocations: 70570)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:34:19 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (98.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (126.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (201.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (101.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (101.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (93.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (94.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (128.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (143.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (162.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (108.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.4ms | Allocations: 875)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 434.0ms | Allocations: 14874)
  Rendered layouts/_add_comment.html.erb (Duration: 3.4ms | Allocations: 676)
  Rendered dishes/show.html.erb within layouts/application (Duration: 719.4ms | Allocations: 19631)
  Rendered layouts/_header.html.erb (Duration: 3.6ms | Allocations: 1359)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (120.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 263.8ms | Allocations: 7940)
  Rendered layout layouts/application.html.erb (Duration: 1015.5ms | Allocations: 47839)
Completed 200 OK in 5596ms (Views: 125.5ms | ActiveRecord: 5390.4ms | Allocations: 70805)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:36:28 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (65.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (197.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (71.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (133.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (115.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (150.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (66.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (83.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (91.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (61.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (73.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.7ms | Allocations: 879)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 297.5ms | Allocations: 14877)
  Rendered layouts/_add_comment.html.erb (Duration: 3.5ms | Allocations: 680)
  Rendered dishes/show.html.erb within layouts/application (Duration: 485.8ms | Allocations: 19290)
  Rendered layouts/_header.html.erb (Duration: 4.3ms | Allocations: 1359)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (60.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 236.1ms | Allocations: 7943)
  Rendered layout layouts/application.html.erb (Duration: 755.4ms | Allocations: 47682)
Completed 200 OK in 2670ms (Views: 127.1ms | ActiveRecord: 2450.0ms | Allocations: 70538)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:38:15 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (83.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (96.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (115.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (297.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (142.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (122.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (97.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (87.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (60.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (87.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (78.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.8ms | Allocations: 879)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 442)
  Rendered layouts/_comment.html.erb (Duration: 320.9ms | Allocations: 14881)
  Rendered layouts/_add_comment.html.erb (Duration: 3.0ms | Allocations: 680)
  Rendered dishes/show.html.erb within layouts/application (Duration: 484.9ms | Allocations: 19278)
  Rendered layouts/_header.html.erb (Duration: 4.6ms | Allocations: 1359)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (67.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 230.4ms | Allocations: 7944)
  Rendered layout layouts/application.html.erb (Duration: 752.3ms | Allocations: 47670)
Completed 200 OK in 4710ms (Views: 154.0ms | ActiveRecord: 4462.3ms | Allocations: 70541)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:38:35 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (229.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (64.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (71.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (68.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (77.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (56.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (64.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (77.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (136.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (59.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (72.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.4ms | Allocations: 879)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 322.8ms | Allocations: 14880)
  Rendered layouts/_add_comment.html.erb (Duration: 2.3ms | Allocations: 680)
  Rendered dishes/show.html.erb within layouts/application (Duration: 554.7ms | Allocations: 19273)
  Rendered layouts/_header.html.erb (Duration: 5.7ms | Allocations: 1359)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (75.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 212.8ms | Allocations: 7946)
  Rendered layout layouts/application.html.erb (Duration: 807.5ms | Allocations: 47669)
Completed 200 OK in 2363ms (Views: 150.9ms | ActiveRecord: 2117.3ms | Allocations: 70572)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-20 20:39:15 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mRestaurant Load (78.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (141.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (100.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (102.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (98.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=4 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (541.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (146.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=4 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (90.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (132.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (69.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (80.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 879)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 442)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 441)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 444)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 441)
  Rendered layouts/_comment.html.erb (Duration: 350.1ms | Allocations: 14887)
  Rendered layouts/_add_comment.html.erb (Duration: 1.8ms | Allocations: 680)
  Rendered dishes/show.html.erb within layouts/application (Duration: 588.2ms | Allocations: 19285)
  Rendered layouts/_header.html.erb (Duration: 4.6ms | Allocations: 1359)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (80.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 258.9ms | Allocations: 7944)
  Rendered layout layouts/application.html.erb (Duration: 884.4ms | Allocations: 47678)
Completed 200 OK in 3490ms (Views: 147.0ms | ActiveRecord: 3250.6ms | Allocations: 70634)


Started GET "/" for 127.0.0.1 at 2023-11-20 20:41:33 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (106.4ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (84.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (73.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (65.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (66.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (65.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (75.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (66.0ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 345.9ms | Allocations: 12958)
  Rendered layouts/_header.html.erb (Duration: 7.5ms | Allocations: 1101)
  [1m[36mUser Load (72.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (67.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 162.1ms | Allocations: 4677)
  Rendered layout layouts/application.html.erb (Duration: 526.9ms | Allocations: 22756)
Completed 200 OK in 1185ms (Views: 88.1ms | ActiveRecord: 1050.2ms | Allocations: 29978)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-20 20:41:40 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (19263.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
Completed 500 Internal Server Error in 19269ms (ActiveRecord: 19263.5ms | Allocations: 1978)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::ConnectionFailed (PQconsumeInput() server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.
server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.
):
  
Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-20 20:42:58 +0100
  [1m[36mActiveRecord::SchemaMigration Load (100.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (74.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (79.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (75.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (97.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (182.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-20 19:43:06.304710')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (92.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-20 19:43:06.490119')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (89.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-20 19:43:06.584848')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (93.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (64.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (88.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-20 19:43:07.491793')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (72.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (118.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-20 19:43:07.944070')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (73.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-20 19:43:08.064981')[0m  [["reviewable_id", 16], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (83.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (64.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 435.5ms | Allocations: 123041)
  Rendered layouts/_header.html.erb (Duration: 4.6ms | Allocations: 1368)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 16.2ms | Allocations: 5198)
  Rendered layout layouts/application.html.erb (Duration: 482.7ms | Allocations: 148808)
Completed 200 OK in 4085ms (Views: 491.4ms | ActiveRecord: 3003.5ms | Allocations: 216751)


Started GET "/logout" for 127.0.0.1 at 2023-11-20 20:43:11 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.0ms | Allocations: 495)


Started GET "/" for 127.0.0.1 at 2023-11-20 20:43:11 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (58.6ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (67.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (58.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (67.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (51.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (62.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (62.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (81.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 327.1ms | Allocations: 13994)
  Rendered layouts/_header.html.erb (Duration: 2.3ms | Allocations: 1089)
  Rendered layouts/_sidenav.html.erb (Duration: 9.0ms | Allocations: 2662)
  Rendered layout layouts/application.html.erb (Duration: 352.9ms | Allocations: 21697)
Completed 200 OK in 971ms (Views: 72.6ms | ActiveRecord: 743.5ms | Allocations: 34714)


Started GET "/login" for 127.0.0.1 at 2023-11-20 20:43:14 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 11.0ms | Allocations: 2964)
  Rendered layouts/_header.html.erb (Duration: 4.1ms | Allocations: 1089)
  Rendered layouts/_sidenav.html.erb (Duration: 7.8ms | Allocations: 2659)
  Rendered layout layouts/application.html.erb (Duration: 34.4ms | Allocations: 10475)
Completed 200 OK in 38ms (Views: 36.1ms | ActiveRecord: 0.0ms | Allocations: 10951)


Started GET "/users/new" for 127.0.0.1 at 2023-11-20 20:43:16 +0100
Processing by UsersController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 5.9ms | Allocations: 2314)
  Rendered layouts/_header.html.erb (Duration: 2.9ms | Allocations: 1089)
  Rendered layouts/_sidenav.html.erb (Duration: 6.8ms | Allocations: 2659)
  Rendered layout layouts/application.html.erb (Duration: 23.6ms | Allocations: 9822)
Completed 200 OK in 36ms (Views: 25.0ms | ActiveRecord: 0.0ms | Allocations: 10152)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-20 20:43:35 +0100
Processing by UsersController#show as */*
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (185.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
Completed 500 Internal Server Error in 1607ms (ActiveRecord: 185.7ms | Allocations: 1244)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
NoMethodError (undefined method `id' for nil:NilClass):
  
app/controllers/users_controller.rb:29:in `show'
Started GET "/users/new" for 127.0.0.1 at 2023-11-20 20:43:49 +0100
Processing by UsersController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 11.2ms | Allocations: 2023)
  Rendered layouts/_header.html.erb (Duration: 7.9ms | Allocations: 1093)
  Rendered layouts/_sidenav.html.erb (Duration: 13.0ms | Allocations: 2669)
  Rendered layout layouts/application.html.erb (Duration: 48.3ms | Allocations: 9558)
Completed 200 OK in 52ms (Views: 50.8ms | ActiveRecord: 0.0ms | Allocations: 9820)


Started POST "/users/new" for 127.0.0.1 at 2023-11-20 20:44:00 +0100
Processing by UsersController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"nombre"=>"str1ien", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"CREAR CUENTA"}
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (15087.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Create (18464.6ms)[0m  [1m[32mINSERT INTO "users" ("nombre", "ruta_img_perfil", "esAdmin", "password_digest") VALUES ($1, $2, $3, $4)[0m  [["nombre", "str1ien"], ["ruta_img_perfil", nil], ["esAdmin", false], ["password_digest", "[FILTERED]"]]
  â†³ app/controllers/users_controller.rb:18:in `create'
  [1m[36mTRANSACTION (399.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:18:in `create'
Redirected to http://localhost:3000/is_rest_owner
Completed 302 Found in 19139ms (ActiveRecord: 33950.7ms | Allocations: 3597)


Started GET "/is_rest_owner" for 127.0.0.1 at 2023-11-20 20:44:19 +0100
Processing by UsersController#is_restaurant_owner as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering users/is_restaurant_owner.html.erb within layouts/application
  Rendered users/is_restaurant_owner.html.erb within layouts/application (Duration: 1.7ms | Allocations: 199)
  Rendered layouts/_header.html.erb (Duration: 4.7ms | Allocations: 1114)
  [1m[36mUser Load (3129.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (81.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 3231.0ms | Allocations: 4110)
  Rendered layout layouts/application.html.erb (Duration: 3250.5ms | Allocations: 9618)
Completed 200 OK in 3263ms (Views: 42.5ms | ActiveRecord: 3210.1ms | Allocations: 9974)


Started GET "/restaurants/new" for 127.0.0.1 at 2023-11-20 20:44:26 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (606.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 635.2ms | Allocations: 15933)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 639.4ms | Allocations: 17148)
  Rendered layouts/_header.html.erb (Duration: 4.4ms | Allocations: 1088)
  [1m[36mUser Load (107.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
Started GET "/restaurants/new" for 127.0.0.1 at 2023-11-20 20:44:27 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mRestaurant Load (146.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 275.2ms | Allocations: 6796)
  Rendered layout layouts/application.html.erb (Duration: 929.5ms | Allocations: 28795)
Completed 200 OK in 940ms (Views: 69.8ms | ActiveRecord: 860.8ms | Allocations: 29131)


  [1m[36mCategory Load (1895.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 1907.2ms | Allocations: 8316)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 1908.2ms | Allocations: 8458)
  Rendered layouts/_header.html.erb (Duration: 4.7ms | Allocations: 1088)
  [1m[36mUser Load (82.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (135.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 505.5ms | Allocations: 4195)
  Rendered layout layouts/application.html.erb (Duration: 2429.6ms | Allocations: 17501)
Completed 200 OK in 2432ms (Views: -545.4ms | ActiveRecord: 2976.4ms | Allocations: 17767)


Started GET "/" for 127.0.0.1 at 2023-11-20 20:44:43 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (137.0ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (74.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (66.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (64.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (114.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (91.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (79.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (71.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 269.4ms | Allocations: 10542)
  Rendered layouts/_header.html.erb (Duration: 3.2ms | Allocations: 1089)
  [1m[36mUser Load (75.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (77.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 168.8ms | Allocations: 4121)
  Rendered layout layouts/application.html.erb (Duration: 454.0ms | Allocations: 19702)
Completed 200 OK in 984ms (Views: 60.9ms | ActiveRecord: 851.4ms | Allocations: 22226)


Started GET "/users/str1ien" for 127.0.0.1 at 2023-11-20 20:44:47 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"str1ien"}
  [1m[36mUser Load (88.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (58.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (75.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (69.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (74.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-20 19:44:47.363352')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (74.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-20 19:44:47.441498')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (157.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-20 19:44:47.519535')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (67.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 5.7ms | Allocations: 2270)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1093)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (63.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 74.7ms | Allocations: 4009)
  Rendered layout layouts/application.html.erb (Duration: 91.2ms | Allocations: 11120)
Completed 200 OK in 796ms (Views: 29.3ms | ActiveRecord: 728.3ms | Allocations: 15489)


Started GET "/users/new" for 127.0.0.1 at 2023-11-20 20:44:57 +0100
Processing by UsersController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 7.8ms | Allocations: 2024)
  Rendered layouts/_header.html.erb (Duration: 4.9ms | Allocations: 1093)
  [1m[36mUser Load (98.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (49.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 161.5ms | Allocations: 4114)
  Rendered layout layouts/application.html.erb (Duration: 185.5ms | Allocations: 11004)
Completed 200 OK in 188ms (Views: 38.5ms | ActiveRecord: 148.3ms | Allocations: 11266)


Started GET "/users/str1ien" for 127.0.0.1 at 2023-11-20 20:45:00 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"str1ien"}
  [1m[36mUser Load (66.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (67.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (73.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (82.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (57.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-20 19:45:00.899623')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (64.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-20 19:45:00.959431')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (74.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-20 19:45:01.025835')[0m  [["autor", "str1ien"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (112.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 9.0ms | Allocations: 2265)
  Rendered layouts/_header.html.erb (Duration: 2.8ms | Allocations: 1089)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (75.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "str1ien"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "str1ien"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 100.5ms | Allocations: 3998)
  Rendered layout layouts/application.html.erb (Duration: 125.1ms | Allocations: 11087)
Completed 200 OK in 748ms (Views: 51.1ms | ActiveRecord: 672.6ms | Allocations: 15463)


Started GET "/logout" for 127.0.0.1 at 2023-11-20 20:45:02 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.0ms | Allocations: 362)


Started GET "/" for 127.0.0.1 at 2023-11-20 20:45:02 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (148.1ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (89.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (76.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (68.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (69.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (77.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (71.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (63.0ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 242.8ms | Allocations: 10550)
  Rendered layouts/_header.html.erb (Duration: 3.2ms | Allocations: 1089)
  Rendered layouts/_sidenav.html.erb (Duration: 11.9ms | Allocations: 2659)
  Rendered layout layouts/application.html.erb (Duration: 275.1ms | Allocations: 18256)
Completed 200 OK in 740ms (Views: 65.3ms | ActiveRecord: 662.2ms | Allocations: 20749)


Started GET "/login" for 127.0.0.1 at 2023-11-20 20:45:04 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 5.7ms | Allocations: 2607)
  Rendered layouts/_header.html.erb (Duration: 2.6ms | Allocations: 1089)
  Rendered layouts/_sidenav.html.erb (Duration: 4.7ms | Allocations: 2659)
  Rendered layout layouts/application.html.erb (Duration: 21.3ms | Allocations: 10115)
Completed 200 OK in 24ms (Views: 22.6ms | ActiveRecord: 0.0ms | Allocations: 10377)


Started GET "/users/new" for 127.0.0.1 at 2023-11-20 20:45:05 +0100
Processing by UsersController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 7.6ms | Allocations: 2015)
  Rendered layouts/_header.html.erb (Duration: 7.6ms | Allocations: 1089)
  Rendered layouts/_sidenav.html.erb (Duration: 12.1ms | Allocations: 2659)
  Rendered layout layouts/application.html.erb (Duration: 49.9ms | Allocations: 9523)
Completed 200 OK in 53ms (Views: 51.8ms | ActiveRecord: 0.0ms | Allocations: 9785)


Started POST "/users/new" for 127.0.0.1 at 2023-11-20 20:45:25 +0100
Processing by UsersController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"nombre"=>"carlos", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"CREAR CUENTA"}
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (551.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Create (708.6ms)[0m  [1m[32mINSERT INTO "users" ("nombre", "ruta_img_perfil", "esAdmin", "password_digest") VALUES ($1, $2, $3, $4)[0m  [["nombre", "carlos"], ["ruta_img_perfil", nil], ["esAdmin", false], ["password_digest", "[FILTERED]"]]
  â†³ app/controllers/users_controller.rb:18:in `create'
  [1m[36mTRANSACTION (144.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:18:in `create'
Redirected to http://localhost:3000/is_rest_owner
Completed 302 Found in 1134ms (ActiveRecord: 1404.3ms | Allocations: 2297)


Started GET "/is_rest_owner" for 127.0.0.1 at 2023-11-20 20:45:26 +0100
Processing by UsersController#is_restaurant_owner as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering users/is_restaurant_owner.html.erb within layouts/application
  Rendered users/is_restaurant_owner.html.erb within layouts/application (Duration: 0.6ms | Allocations: 59)
  Rendered layouts/_header.html.erb (Duration: 4.5ms | Allocations: 1114)
  [1m[36mUser Load (63.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (68.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "carlos"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 154.4ms | Allocations: 4104)
  Rendered layout layouts/application.html.erb (Duration: 177.3ms | Allocations: 9428)
Completed 200 OK in 183ms (Views: 50.8ms | ActiveRecord: 132.2ms | Allocations: 9681)


Started GET "/restaurants/new" for 127.0.0.1 at 2023-11-20 20:45:31 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (3776.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 3787.8ms | Allocations: 3088)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 3789.9ms | Allocations: 3230)
  Rendered layouts/_header.html.erb (Duration: 4.1ms | Allocations: 1092)
  [1m[36mUser Load (398.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (83.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "carlos"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 502.2ms | Allocations: 4117)
  Rendered layout layouts/application.html.erb (Duration: 4314.5ms | Allocations: 12212)
Completed 200 OK in 4316ms (Views: 57.5ms | ActiveRecord: 4257.9ms | Allocations: 12480)


Started GET "/restaurants/new" for 127.0.0.1 at 2023-11-20 20:47:13 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (75.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 204.2ms | Allocations: 6438)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 209.9ms | Allocations: 7644)
  Rendered layouts/_header.html.erb (Duration: 3.8ms | Allocations: 1345)
  [1m[36mUser Load (45.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (59.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "carlos"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 300.3ms | Allocations: 13005)
  Rendered layout layouts/application.html.erb (Duration: 570.4ms | Allocations: 40930)
Completed 200 OK in 1043ms (Views: 159.1ms | ActiveRecord: 750.2ms | Allocations: 49568)


Started GET "/restaurants/new" for 127.0.0.1 at 2023-11-20 20:48:44 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (148.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 303.1ms | Allocations: 6405)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 309.7ms | Allocations: 7629)
  Rendered layouts/_header.html.erb (Duration: 8.9ms | Allocations: 1343)
  [1m[36mUser Load (200.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (98.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "carlos"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 833.0ms | Allocations: 12947)
  Rendered layout layouts/application.html.erb (Duration: 1213.8ms | Allocations: 40835)
Completed 200 OK in 1779ms (Views: 235.3ms | ActiveRecord: 1294.6ms | Allocations: 49326)


Started GET "/restaurants/new" for 127.0.0.1 at 2023-11-20 20:49:37 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (65.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 162.6ms | Allocations: 6403)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 168.3ms | Allocations: 7631)
  Rendered layouts/_header.html.erb (Duration: 3.1ms | Allocations: 1353)
  [1m[36mUser Load (49.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (67.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "carlos"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 318.6ms | Allocations: 13010)
  Rendered layout layouts/application.html.erb (Duration: 599.9ms | Allocations: 41003)
Completed 200 OK in 1656ms (Views: 190.6ms | ActiveRecord: 619.4ms | Allocations: 49566)


Started GET "/restaurants/new" for 127.0.0.1 at 2023-11-20 20:50:22 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (126.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 857.3ms | Allocations: 6389)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 862.0ms | Allocations: 7620)
  Rendered layouts/_header.html.erb (Duration: 5.3ms | Allocations: 1351)
  [1m[36mUser Load (58.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (64.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "carlos"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 361.3ms | Allocations: 12993)
  Rendered layout layouts/application.html.erb (Duration: 1258.6ms | Allocations: 40978)
Completed 200 OK in 1848ms (Views: 120.9ms | ActiveRecord: 1574.3ms | Allocations: 49457)


Started GET "/restaurants/new" for 127.0.0.1 at 2023-11-20 20:50:32 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (74.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 165.7ms | Allocations: 6400)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 169.9ms | Allocations: 7638)
  Rendered layouts/_header.html.erb (Duration: 4.4ms | Allocations: 1351)
  [1m[36mUser Load (57.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (88.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "carlos"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 318.0ms | Allocations: 13029)
  Rendered layout layouts/application.html.erb (Duration: 526.6ms | Allocations: 41011)
Completed 200 OK in 940ms (Views: 116.0ms | ActiveRecord: 718.7ms | Allocations: 49557)


Started GET "/restaurants/new" for 127.0.0.1 at 2023-11-20 20:51:17 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (56.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 153.5ms | Allocations: 6377)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 157.6ms | Allocations: 7618)
  Rendered layouts/_header.html.erb (Duration: 9.0ms | Allocations: 1339)
  [1m[36mUser Load (58.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (50.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "carlos"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 297.9ms | Allocations: 12905)
  Rendered layout layouts/application.html.erb (Duration: 510.0ms | Allocations: 40669)
Completed 200 OK in 840ms (Views: 156.0ms | ActiveRecord: 559.6ms | Allocations: 49090)


Started GET "/restaurants/new" for 127.0.0.1 at 2023-11-20 20:51:44 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (106.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 211.3ms | Allocations: 6394)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 214.2ms | Allocations: 7644)
  Rendered layouts/_header.html.erb (Duration: 10.4ms | Allocations: 1351)
  [1m[36mUser Load (121.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (58.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "carlos"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 493.5ms | Allocations: 13029)
  Rendered layout layouts/application.html.erb (Duration: 761.4ms | Allocations: 41016)
Completed 200 OK in 2968ms (Views: 156.5ms | ActiveRecord: 838.9ms | Allocations: 49584)


Started GET "/restaurants/new" for 127.0.0.1 at 2023-11-20 20:52:03 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (60.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 206.3ms | Allocations: 6391)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 211.0ms | Allocations: 7644)
  Rendered layouts/_header.html.erb (Duration: 8.0ms | Allocations: 1353)
  [1m[36mUser Load (78.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (67.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "carlos"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 366.0ms | Allocations: 12989)
  Rendered layout layouts/application.html.erb (Duration: 649.3ms | Allocations: 40840)
Completed 200 OK in 1029ms (Views: 183.3ms | ActiveRecord: 734.7ms | Allocations: 49265)


Started GET "/restaurants/new" for 127.0.0.1 at 2023-11-20 20:53:19 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (82.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 190.4ms | Allocations: 6402)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 198.5ms | Allocations: 7666)
  Rendered layouts/_header.html.erb (Duration: 4.7ms | Allocations: 1351)
  [1m[36mUser Load (67.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (65.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "carlos"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 359.2ms | Allocations: 12926)
  Rendered layout layouts/application.html.erb (Duration: 615.9ms | Allocations: 40867)
Completed 200 OK in 2563ms (Views: 174.7ms | ActiveRecord: 1161.4ms | Allocations: 49328)


Started GET "/users/carlos" for 127.0.0.1 at 2023-11-20 20:54:38 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"carlos"}
  [1m[36mUser Load (109.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (97.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "carlos"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (101.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "carlos"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (101.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "carlos"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (96.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-20 19:54:39.136406')[0m  [["autor", "carlos"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (102.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-20 19:54:39.236484')[0m  [["autor", "carlos"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (106.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-20 19:54:39.342422')[0m  [["autor", "carlos"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (84.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "carlos"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 14.1ms | Allocations: 3106)
  Rendered layouts/_header.html.erb (Duration: 3.9ms | Allocations: 1089)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (74.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "carlos"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "carlos"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 92.6ms | Allocations: 4002)
  Rendered layout layouts/application.html.erb (Duration: 126.3ms | Allocations: 11936)
Completed 200 OK in 1264ms (Views: 53.7ms | ActiveRecord: 1138.7ms | Allocations: 23173)


Started GET "/logout" for 127.0.0.1 at 2023-11-20 20:54:40 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.0ms | Allocations: 447)


Started GET "/" for 127.0.0.1 at 2023-11-20 20:54:40 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (84.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (60.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (67.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (58.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (49.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (78.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (61.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (59.2ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 236.1ms | Allocations: 11433)
  Rendered layouts/_header.html.erb (Duration: 3.8ms | Allocations: 1101)
  Rendered layouts/_sidenav.html.erb (Duration: 13.2ms | Allocations: 2691)
  Rendered layout layouts/application.html.erb (Duration: 267.8ms | Allocations: 19193)
Completed 200 OK in 843ms (Views: 71.2ms | ActiveRecord: 741.1ms | Allocations: 25733)


Started GET "/login" for 127.0.0.1 at 2023-11-20 20:54:42 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 7.5ms | Allocations: 2946)
  Rendered layouts/_header.html.erb (Duration: 2.3ms | Allocations: 1089)
  Rendered layouts/_sidenav.html.erb (Duration: 5.8ms | Allocations: 2659)
  Rendered layout layouts/application.html.erb (Duration: 25.9ms | Allocations: 10460)
Completed 200 OK in 28ms (Views: 27.1ms | ActiveRecord: 0.0ms | Allocations: 10910)


Started POST "/login" for 127.0.0.1 at 2023-11-20 20:54:47 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"gari", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (61.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 336ms (ActiveRecord: 60.9ms | Allocations: 876)


Started GET "/" for 127.0.0.1 at 2023-11-20 20:54:48 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (138.2ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (60.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (59.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (55.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (72.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (91.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (99.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (75.1ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 312.5ms | Allocations: 10526)
  Rendered layouts/_header.html.erb (Duration: 4.0ms | Allocations: 1089)
  [1m[36mUser Load (63.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (70.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 159.8ms | Allocations: 4104)
  Rendered layout layouts/application.html.erb (Duration: 494.8ms | Allocations: 19739)
Completed 200 OK in 894ms (Views: 96.1ms | ActiveRecord: 785.2ms | Allocations: 22282)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-20 20:54:55 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"gari"}
  [1m[36mUser Load (102.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (66.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (76.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (76.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (90.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-20 19:54:55.772545')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (97.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-20 19:54:55.865261')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (74.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-20 19:54:55.964778')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (119.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 5.8ms | Allocations: 2299)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1089)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (60.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 72.7ms | Allocations: 3998)
  Rendered layout layouts/application.html.erb (Duration: 88.9ms | Allocations: 11121)
Completed 200 OK in 816ms (Views: 29.4ms | ActiveRecord: 764.7ms | Allocations: 15510)


Started GET "/admin" for 127.0.0.1 at 2023-11-20 20:55:04 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (164.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-20 19:55:04.065548')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (91.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-20 19:55:04.232971')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (63.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-20 19:55:04.325950')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (62.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 1.5ms | Allocations: 347)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1114)
  [1m[36mUser Load (61.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (56.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 129.9ms | Allocations: 4126)
  Rendered layout layouts/application.html.erb (Duration: 142.0ms | Allocations: 9736)
Completed 200 OK in 536ms (Views: 26.7ms | ActiveRecord: 498.8ms | Allocations: 12011)


Started GET "/admin" for 127.0.0.1 at 2023-11-20 21:06:58 +0100
  [1m[36mActiveRecord::SchemaMigration Load (69.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (58.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-20 20:07:00.728099')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (67.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-20 20:07:00.967071')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (76.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-20 20:07:01.118368')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (69.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (113.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:15
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 219.1ms | Allocations: 7251)
  Rendered layouts/_header.html.erb (Duration: 54.0ms | Allocations: 1438)
  [1m[36mUser Load (121.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (78.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 3340.3ms | Allocations: 16737)
  Rendered layout layouts/application.html.erb (Duration: 4077.1ms | Allocations: 171727)
Completed 200 OK in 4900ms (Views: 873.1ms | ActiveRecord: 3908.7ms | Allocations: 195800)


Started GET "/admin" for 127.0.0.1 at 2023-11-20 21:07:26 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (66.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-20 20:07:27.111311')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (57.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-20 20:07:32.676101')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (1194.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-20 20:07:32.812623')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (64.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (70.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:15
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 145.0ms | Allocations: 3076)
  Rendered layouts/_header.html.erb (Duration: 4.8ms | Allocations: 1391)
  [1m[36mUser Load (80.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (48.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 406.7ms | Allocations: 11926)
  Rendered layout layouts/application.html.erb (Duration: 594.9ms | Allocations: 35754)
Completed 200 OK in 7758ms (Views: 94.7ms | ActiveRecord: 2896.9ms | Allocations: 49556)


Started GET "/admin" for 127.0.0.1 at 2023-11-20 21:08:00 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (59.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-20 20:08:01.073001')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (59.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-20 20:08:01.313724')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (56.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-20 20:08:01.460252')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (58.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (72.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:15
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 152.9ms | Allocations: 2730)
  Rendered layouts/_header.html.erb (Duration: 5.4ms | Allocations: 1391)
  [1m[36mUser Load (62.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (66.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 357.5ms | Allocations: 11924)
  Rendered layout layouts/application.html.erb (Duration: 550.3ms | Allocations: 35443)
Completed 200 OK in 1262ms (Views: 92.3ms | ActiveRecord: 990.4ms | Allocations: 48860)


Started GET "/admin" for 127.0.0.1 at 2023-11-20 21:08:25 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (135.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-20 20:08:25.431025')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (122.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-20 20:08:25.570381')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (87.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-20 20:08:25.695472')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (86.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (115.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:15
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 119.8ms | Allocations: 994)
  Rendered layouts/_header.html.erb (Duration: 3.6ms | Allocations: 1114)
  [1m[36mUser Load (58.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (288.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 363.3ms | Allocations: 4105)
  Rendered layout layouts/application.html.erb (Duration: 542.6ms | Allocations: 17094)
Completed 200 OK in 987ms (Views: 81.8ms | ActiveRecord: 893.4ms | Allocations: 19136)


Started GET "/admin" for 127.0.0.1 at 2023-11-20 21:09:09 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (144.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-20 20:09:09.122128')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (64.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-20 20:09:09.269513')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (82.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-20 20:09:09.337404')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (71.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (69.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:15
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 73.1ms | Allocations: 994)
  Rendered layouts/_header.html.erb (Duration: 3.2ms | Allocations: 1114)
  [1m[36mUser Load (63.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (63.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 143.2ms | Allocations: 4107)
  Rendered layout layouts/application.html.erb (Duration: 258.3ms | Allocations: 17109)
Completed 200 OK in 636ms (Views: 64.1ms | ActiveRecord: 558.8ms | Allocations: 19124)


Started GET "/admin" for 127.0.0.1 at 2023-11-20 21:09:52 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (178.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-20 20:09:52.778068')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (98.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-20 20:09:52.959563')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (89.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-20 20:09:53.060826')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (76.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (73.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:15
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 77.4ms | Allocations: 994)
  Rendered layouts/_header.html.erb (Duration: 5.9ms | Allocations: 1114)
  [1m[36mUser Load (243.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (128.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 403.7ms | Allocations: 4117)
  Rendered layout layouts/application.html.erb (Duration: 538.5ms | Allocations: 17108)
Completed 200 OK in 992ms (Views: 95.4ms | ActiveRecord: 886.0ms | Allocations: 19124)


Started GET "/admin" for 127.0.0.1 at 2023-11-20 21:10:19 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (174.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-20 20:10:19.436015')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (155.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-20 20:10:19.613232')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (104.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-20 20:10:19.771190')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (61.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (83.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:15
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 87.6ms | Allocations: 994)
  Rendered layouts/_header.html.erb (Duration: 4.5ms | Allocations: 1118)
  [1m[36mUser Load (57.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (57.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 134.8ms | Allocations: 4114)
  Rendered layout layouts/application.html.erb (Duration: 282.4ms | Allocations: 17136)
Completed 200 OK in 790ms (Views: 86.4ms | ActiveRecord: 692.5ms | Allocations: 19156)


Started GET "/admin" for 127.0.0.1 at 2023-11-20 21:10:56 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (161.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-20 20:10:56.285538')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (58.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-20 20:10:56.449464')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (78.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-20 20:10:56.510518')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (48.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (63.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:15
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 67.3ms | Allocations: 995)
  Rendered layouts/_header.html.erb (Duration: 2.7ms | Allocations: 1114)
  [1m[36mUser Load (70.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (79.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 165.2ms | Allocations: 4104)
  Rendered layout layouts/application.html.erb (Duration: 286.4ms | Allocations: 17082)
Completed 200 OK in 647ms (Views: 74.6ms | ActiveRecord: 559.8ms | Allocations: 19097)


Started GET "/admin" for 127.0.0.1 at 2023-11-20 21:11:06 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (149.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-20 20:11:06.461250')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (69.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-20 20:11:06.613797')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (100.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-20 20:11:06.685999')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (355.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (69.8ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:15
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 73.5ms | Allocations: 994)
  Rendered layouts/_header.html.erb (Duration: 3.8ms | Allocations: 1114)
  [1m[36mUser Load (70.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (65.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 152.2ms | Allocations: 4104)
  Rendered layout layouts/application.html.erb (Duration: 283.9ms | Allocations: 17099)
Completed 200 OK in 972ms (Views: 79.9ms | ActiveRecord: 879.5ms | Allocations: 19115)


Started GET "/admin" for 127.0.0.1 at 2023-11-20 21:11:18 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (170.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-20 20:11:18.119539')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (66.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-20 20:11:18.293658')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (58.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-20 20:11:18.362293')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (56.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (87.9ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:15
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 92.3ms | Allocations: 994)
  Rendered layouts/_header.html.erb (Duration: 2.7ms | Allocations: 1122)
  [1m[36mUser Load (67.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (65.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 147.7ms | Allocations: 4120)
  Rendered layout layouts/application.html.erb (Duration: 292.4ms | Allocations: 17145)
Completed 200 OK in 660ms (Views: 73.1ms | ActiveRecord: 574.0ms | Allocations: 19161)


Started GET "/admin" for 127.0.0.1 at 2023-11-20 21:11:37 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (137.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-20 20:11:37.937270')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (62.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-20 20:11:38.081291')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (66.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-20 20:11:38.146805')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (54.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (61.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:15
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 64.9ms | Allocations: 994)
  Rendered layouts/_header.html.erb (Duration: 2.8ms | Allocations: 1122)
  [1m[36mUser Load (56.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (81.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 154.5ms | Allocations: 4120)
  Rendered layout layouts/application.html.erb (Duration: 256.7ms | Allocations: 17130)
Completed 200 OK in 595ms (Views: 59.4ms | ActiveRecord: 519.8ms | Allocations: 19146)


Started GET "/admin" for 127.0.0.1 at 2023-11-20 21:11:56 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (149.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-20 20:11:56.187015')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (65.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-20 20:11:56.337889')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (58.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-20 20:11:56.405317')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (60.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (58.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:15
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 61.8ms | Allocations: 994)
  Rendered layouts/_header.html.erb (Duration: 2.2ms | Allocations: 1114)
  [1m[36mUser Load (74.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (60.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 152.5ms | Allocations: 4105)
  Rendered layout layouts/application.html.erb (Duration: 258.0ms | Allocations: 17093)
Completed 200 OK in 602ms (Views: 66.4ms | ActiveRecord: 526.6ms | Allocations: 19108)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-20 21:13:30 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"gari"}
  [1m[36mUser Load (2180.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (138.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (202.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (98.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (305.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-20 20:13:33.321310')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (97.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-20 20:13:33.630525')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (98.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-20 20:13:33.732767')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (84.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 21.0ms | Allocations: 3923)
  Rendered layouts/_header.html.erb (Duration: 7.0ms | Allocations: 1089)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (78.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 101.2ms | Allocations: 4019)
  Rendered layout layouts/application.html.erb (Duration: 145.1ms | Allocations: 12769)
Completed 200 OK in 3384ms (Views: 68.7ms | ActiveRecord: 3284.6ms | Allocations: 17506)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-20 21:14:15 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"gari"}
  [1m[36mUser Load (2542.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (145.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (125.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (140.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (111.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-20 20:14:18.410924')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (108.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-20 20:14:18.524974')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (112.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-20 20:14:18.635831')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (131.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 6.6ms | Allocations: 2302)
  Rendered layouts/_header.html.erb (Duration: 2.8ms | Allocations: 1097)
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (92.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 103.8ms | Allocations: 4013)
  Rendered layout layouts/application.html.erb (Duration: 146.1ms | Allocations: 17913)
Completed 200 OK in 3584ms (Views: 54.3ms | ActiveRecord: 3510.4ms | Allocations: 22278)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-20 21:15:11 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"gari"}
  [1m[36mUser Load (99.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (64.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (57.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (143.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (77.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-20 20:15:11.571380')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (73.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-20 20:15:11.651655')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (70.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-20 20:15:11.727376')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (67.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 9.7ms | Allocations: 2285)
  Rendered layouts/_header.html.erb (Duration: 4.0ms | Allocations: 1089)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (65.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 83.7ms | Allocations: 3998)
  Rendered layout layouts/application.html.erb (Duration: 137.4ms | Allocations: 17851)
Completed 200 OK in 819ms (Views: 73.5ms | ActiveRecord: 720.5ms | Allocations: 22209)


Started GET "/admin" for 127.0.0.1 at 2023-11-20 21:15:17 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (152.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-20 20:15:17.151893')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (67.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-20 20:15:17.306754')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (65.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-20 20:15:17.375468')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (67.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (349.8ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:15
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 354.8ms | Allocations: 994)
  Rendered layouts/_header.html.erb (Duration: 2.6ms | Allocations: 1114)
  [1m[36mUser Load (465.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (274.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 764.2ms | Allocations: 4107)
  Rendered layout layouts/application.html.erb (Duration: 1137.5ms | Allocations: 10358)
Completed 200 OK in 1498ms (Views: 48.7ms | ActiveRecord: 1441.6ms | Allocations: 12448)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-20 21:15:53 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"gari"}
  [1m[36mUser Load (15464.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
Completed 500 Internal Server Error in 15469ms (ActiveRecord: 15464.1ms | Allocations: 2018)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::ConnectionFailed (PQconsumeInput() server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.
server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.
):
  
Started GET "/admin" for 127.0.0.1 at 2023-11-20 21:16:10 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (2176.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-20 20:16:10.348214')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
Completed 500 Internal Server Error in 2180ms (ActiveRecord: 2176.2ms | Allocations: 3313)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::NoDatabaseError (We could not find your database: brm33sftclngywwhayzb. Available database configurations can be found in config/database.yml file.

To resolve this error:

- Did you create the database for this app, or delete it? You may need to create your database.
- Has the database name changed? Check your database.yml config has the correct database name.

To create your database, run:

        bin/rails db:create
):
  
app/controllers/admin_controller.rb:5:in `dashboard'
Started GET "/" for 127.0.0.1 at 2023-11-20 21:16:26 +0100
Processing by RestaurantsController#index as HTML
Completed 500 Internal Server Error in 20062ms (ActiveRecord: 0.0ms | Allocations: 5113)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::NoDatabaseError (We could not find your database: brm33sftclngywwhayzb. Available database configurations can be found in config/database.yml file.

To resolve this error:

- Did you create the database for this app, or delete it? You may need to create your database.
- Has the database name changed? Check your database.yml config has the correct database name.

To create your database, run:

        bin/rails db:create
):
  
app/controllers/restaurants_controller.rb:12:in `index'
Started GET "/" for 127.0.0.1 at 2023-11-20 21:16:59 +0100
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::NoDatabaseError (We could not find your database: brm33sftclngywwhayzb. Available database configurations can be found in config/database.yml file.

To resolve this error:

- Did you create the database for this app, or delete it? You may need to create your database.
- Has the database name changed? Check your database.yml config has the correct database name.

To create your database, run:

        bin/rails db:create
):
  
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:74:in `rescue in new_client'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:68:in `new_client'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:981:in `connect'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:993:in `reconnect'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:685:in `block in reconnect!'
activesupport (7.1.1) lib/active_support/concurrency/null_lock.rb:9:in `synchronize'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:684:in `reconnect!'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:788:in `verify!'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:795:in `connect!'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:997:in `block in with_raw_connection'
activesupport (7.1.1) lib/active_support/concurrency/null_lock.rb:9:in `synchronize'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:996:in `with_raw_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:1104:in `valid_raw_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:619:in `get_database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/schema_cache.rb:374:in `database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/schema_cache.rb:70:in `database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/schema_cache.rb:200:in `database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:871:in `database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:647:in `check_version'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:675:in `new_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:720:in `checkout_new_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:699:in `try_to_checkout_new_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:657:in `acquire_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:355:in `checkout'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:184:in `connection'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:501:in `block in with_temporary_connection'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:518:in `with_temporary_pool'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:500:in `with_temporary_connection'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:494:in `block in with_temporary_connection_for_each'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:493:in `each'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:493:in `with_temporary_connection_for_each'
activerecord (7.1.1) lib/active_record/migration.rb:771:in `pending_migrations'
activerecord (7.1.1) lib/active_record/migration.rb:750:in `check_pending_migrations'
activerecord (7.1.1) lib/active_record/migration.rb:642:in `block (2 levels) in call'
activesupport (7.1.1) lib/active_support/file_update_checker.rb:85:in `execute'
activerecord (7.1.1) lib/active_record/migration.rb:647:in `block in call'
activerecord (7.1.1) lib/active_record/migration.rb:639:in `synchronize'
activerecord (7.1.1) lib/active_record/migration.rb:639:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
activesupport (7.1.1) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.1.1) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/actionable_exceptions.rb:16:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (7.1.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (7.1.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (7.1.1) lib/active_support/tagged_logging.rb:135:in `block in tagged'
activesupport (7.1.1) lib/active_support/tagged_logging.rb:39:in `tagged'
activesupport (7.1.1) lib/active_support/tagged_logging.rb:135:in `tagged'
activesupport (7.1.1) lib/active_support/broadcast_logger.rb:232:in `method_missing'
railties (7.1.1) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/remote_ip.rb:92:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/request_id.rb:28:in `call'
rack (3.0.8) lib/rack/method_override.rb:28:in `call'
rack (3.0.8) lib/rack/runtime.rb:24:in `call'
activesupport (7.1.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/server_timing.rb:59:in `block in call'
actionpack (7.1.1) lib/action_dispatch/middleware/server_timing.rb:24:in `collect_events'
actionpack (7.1.1) lib/action_dispatch/middleware/server_timing.rb:58:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.8) lib/rack/sendfile.rb:114:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/host_authorization.rb:141:in `call'
railties (7.1.1) lib/rails/engine.rb:529:in `call'
puma (6.4.0) lib/puma/configuration.rb:272:in `call'
puma (6.4.0) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.0) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.0) lib/puma/request.rb:99:in `handle_request'
puma (6.4.0) lib/puma/server.rb:443:in `process_client'
puma (6.4.0) lib/puma/server.rb:241:in `block in run'
puma (6.4.0) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
Started GET "/" for 127.0.0.1 at 2023-11-20 21:21:53 +0100
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::DatabaseConnectionError (There is an issue connecting to your database with your username/password, username: ufmtugbort5e5ro1nkzn.

Please check your database configuration to ensure the username/password are valid.
):
  
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:76:in `rescue in new_client'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:68:in `new_client'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:981:in `connect'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:993:in `reconnect'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:685:in `block in reconnect!'
activesupport (7.1.1) lib/active_support/concurrency/null_lock.rb:9:in `synchronize'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:684:in `reconnect!'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:788:in `verify!'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:795:in `connect!'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:997:in `block in with_raw_connection'
activesupport (7.1.1) lib/active_support/concurrency/null_lock.rb:9:in `synchronize'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:996:in `with_raw_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:1104:in `valid_raw_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:619:in `get_database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/schema_cache.rb:374:in `database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/schema_cache.rb:70:in `database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/schema_cache.rb:200:in `database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:871:in `database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:647:in `check_version'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:675:in `new_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:720:in `checkout_new_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:699:in `try_to_checkout_new_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:657:in `acquire_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:355:in `checkout'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:184:in `connection'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:501:in `block in with_temporary_connection'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:518:in `with_temporary_pool'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:500:in `with_temporary_connection'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:494:in `block in with_temporary_connection_for_each'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:493:in `each'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:493:in `with_temporary_connection_for_each'
activerecord (7.1.1) lib/active_record/migration.rb:771:in `pending_migrations'
activerecord (7.1.1) lib/active_record/migration.rb:750:in `check_pending_migrations'
activerecord (7.1.1) lib/active_record/migration.rb:642:in `block (2 levels) in call'
activesupport (7.1.1) lib/active_support/file_update_checker.rb:85:in `execute'
activerecord (7.1.1) lib/active_record/migration.rb:647:in `block in call'
activerecord (7.1.1) lib/active_record/migration.rb:639:in `synchronize'
activerecord (7.1.1) lib/active_record/migration.rb:639:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
activesupport (7.1.1) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.1.1) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/actionable_exceptions.rb:16:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (7.1.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (7.1.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (7.1.1) lib/active_support/tagged_logging.rb:135:in `block in tagged'
activesupport (7.1.1) lib/active_support/tagged_logging.rb:39:in `tagged'
activesupport (7.1.1) lib/active_support/tagged_logging.rb:135:in `tagged'
activesupport (7.1.1) lib/active_support/broadcast_logger.rb:232:in `method_missing'
railties (7.1.1) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/remote_ip.rb:92:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/request_id.rb:28:in `call'
rack (3.0.8) lib/rack/method_override.rb:28:in `call'
rack (3.0.8) lib/rack/runtime.rb:24:in `call'
activesupport (7.1.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/server_timing.rb:59:in `block in call'
actionpack (7.1.1) lib/action_dispatch/middleware/server_timing.rb:24:in `collect_events'
actionpack (7.1.1) lib/action_dispatch/middleware/server_timing.rb:58:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.8) lib/rack/sendfile.rb:114:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/host_authorization.rb:141:in `call'
railties (7.1.1) lib/rails/engine.rb:529:in `call'
puma (6.4.0) lib/puma/configuration.rb:272:in `call'
puma (6.4.0) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.0) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.0) lib/puma/request.rb:99:in `handle_request'
puma (6.4.0) lib/puma/server.rb:443:in `process_client'
puma (6.4.0) lib/puma/server.rb:241:in `block in run'
puma (6.4.0) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
Started GET "/" for ::1 at 2023-11-21 10:13:52 +0100
  [1m[36mActiveRecord::SchemaMigration Load (64.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (51.0ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (41.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (40.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (41.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (47.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (33.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (47.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (77.2ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 540.5ms | Allocations: 93105)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1397)
  Rendered layouts/_sidenav.html.erb (Duration: 5.0ms | Allocations: 3427)
  Rendered layout layouts/application.html.erb (Duration: 585.8ms | Allocations: 117406)
Completed 200 OK in 1399ms (Views: 373.2ms | ActiveRecord: 804.0ms | Allocations: 159550)


Started GET "/login" for ::1 at 2023-11-21 10:14:59 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 12.4ms | Allocations: 4196)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1093)
  Rendered layouts/_sidenav.html.erb (Duration: 3.2ms | Allocations: 2665)
  Rendered layout layouts/application.html.erb (Duration: 21.1ms | Allocations: 11726)
Completed 200 OK in 71ms (Views: 22.1ms | ActiveRecord: 32.9ms | Allocations: 19303)


Started POST "/login" for ::1 at 2023-11-21 10:15:07 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"Mr.Dani", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (36.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 268ms (ActiveRecord: 36.3ms | Allocations: 1263)


Started GET "/" for ::1 at 2023-11-21 10:15:07 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (80.6ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (33.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (33.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (47.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (37.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (36.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (36.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (37.4ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 128.0ms | Allocations: 10528)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1089)
  [1m[36mUser Load (35.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 183.3ms | Allocations: 9746)
  Rendered layout layouts/application.html.erb (Duration: 320.6ms | Allocations: 25364)
Completed 200 OK in 561ms (Views: 98.6ms | ActiveRecord: 455.5ms | Allocations: 27910)


Started GET "/users/mis_restaurantes" for ::1 at 2023-11-21 10:15:37 +0100
Processing by UsersController#mis_restaurantes as HTML
  [1m[36mUser Load (46.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:77:in `mis_restaurantes'
  Rendering layout layouts/application.html.erb
  Rendering users/mis_restaurantes.html.erb within layouts/application
  [1m[36mRestaurant Load (33.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/views/users/mis_restaurantes.html.erb:8
  Rendered users/mis_restaurantes.html.erb within layouts/application (Duration: 37.6ms | Allocations: 2952)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1126)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 5.5ms | Allocations: 4462)
  Rendered layout layouts/application.html.erb (Duration: 48.4ms | Allocations: 12369)
Completed 200 OK in 103ms (Views: 17.0ms | ActiveRecord: 79.1ms | Allocations: 13514)


Started GET "/restaurants/new" for ::1 at 2023-11-21 10:15:40 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (66.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 76.3ms | Allocations: 4259)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 79.5ms | Allocations: 4591)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1088)
  [1m[36mUser Load (36.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 86.7ms | Allocations: 4665)
  Rendered layout layouts/application.html.erb (Duration: 171.4ms | Allocations: 14120)
Completed 200 OK in 174ms (Views: 25.2ms | ActiveRecord: 147.1ms | Allocations: 14463)


Started GET "/restaurants/new" for ::1 at 2023-11-21 10:17:01 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (36.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 93.6ms | Allocations: 6491)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 94.8ms | Allocations: 6823)
  Rendered layouts/_header.html.erb (Duration: 3.8ms | Allocations: 1355)
  [1m[36mUser Load (32.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (38.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 182.4ms | Allocations: 13589)
  Rendered layout layouts/application.html.erb (Duration: 303.0ms | Allocations: 40838)
Completed 200 OK in 454ms (Views: 69.9ms | ActiveRecord: 328.4ms | Allocations: 49404)


Started POST "/restaurants" for ::1 at 2023-11-21 10:17:38 +0100
Processing by RestaurantsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "restaurant"=>{"nombre"=>"Prueba2", "telefono"=>"121221213123", "direccion"=>"adfas", "horario"=>"jkljk", "categoria"=>"Tapas"}, "button"=>""}
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (46.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/restaurants_controller.rb:47:in `create'
  [1m[36mRestaurant Create (113.8ms)[0m  [1m[32mINSERT INTO "restaurants" ("categoria", "nombre", "ruta_img_perfil", "ruta_img_fondo", "direccion", "telefono", "horario", "imported_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["categoria", "Tapas"], ["nombre", "Prueba2"], ["ruta_img_perfil", nil], ["ruta_img_fondo", nil], ["direccion", "adfas"], ["telefono", "121221213123"], ["horario", "jkljk"], ["imported_id", nil]]
  â†³ app/controllers/restaurants_controller.rb:47:in `create'
  [1m[36mTRANSACTION (68.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/restaurants_controller.rb:47:in `create'
Redirected to http://localhost:3000/restaurants/21
  [1m[36mUser Load (71.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:52:in `create'
  [1m[36mTRANSACTION (69.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/restaurants_controller.rb:52:in `create'
  [1m[36mRestaurant::HABTM_Users Create (79.3ms)[0m  [1m[32mINSERT INTO "restaurants_users" ("restaurant_id", "user_id") VALUES ($1, $2)[0m  [["restaurant_id", 21], ["user_id", "Mr.Dani"]]
  â†³ app/controllers/restaurants_controller.rb:52:in `create'
  [1m[36mTRANSACTION (37.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/restaurants_controller.rb:52:in `create'
Completed 302 Found in 550ms (ActiveRecord: 621.1ms | Allocations: 20138)


Started GET "/restaurants/21" for ::1 at 2023-11-21 10:17:38 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"21"}
  [1m[36mRestaurant Load (46.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (39.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 21], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[35m (46.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=21 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (47.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=21 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (30.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=21 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (34.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 21], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (49.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=21 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (44.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=21 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (49.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=21 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (50.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=21 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (37.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 21], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (62.1ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=21 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (70.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 74.1ms | Allocations: 1694)
  [1m[36mDish Load (55.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 21]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (131.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (32.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 21], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 74.4ms | Allocations: 1803)
  Rendered layouts/_add_comment.html.erb (Duration: 1.7ms | Allocations: 710)
  [1m[35m (33.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=21 AND posts.autor=users.nombre AND posts.restaurant_id=21[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 536.4ms | Allocations: 9539)
  Rendered layouts/_header.html.erb (Duration: 2.2ms | Allocations: 1088)
  [1m[36mUser Load (34.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (42.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 84.6ms | Allocations: 4679)
  Rendered layout layouts/application.html.erb (Duration: 629.4ms | Allocations: 19079)
Completed 200 OK in 1546ms (Views: 115.7ms | ActiveRecord: 1292.9ms | Allocations: 32368)


Started GET "/restaurants/21/dishes/new" for ::1 at 2023-11-21 10:21:12 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"21"}
  [1m[36mRestaurant Load (30.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:19:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 4.6ms | Allocations: 2861)
  Rendered dishes/new.html.erb within layouts/application (Duration: 5.6ms | Allocations: 3164)
  Rendered layouts/_header.html.erb (Duration: 5.3ms | Allocations: 1356)
  [1m[36mUser Load (45.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (31.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 210.8ms | Allocations: 13481)
  Rendered layout layouts/application.html.erb (Duration: 241.7ms | Allocations: 37072)
Completed 200 OK in 681ms (Views: 56.4ms | ActiveRecord: 483.2ms | Allocations: 53571)


Started POST "/restaurants/21/dishes" for ::1 at 2023-11-21 10:21:26 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"afds", "descripcion"=>"hgdd", "precio"=>"232.2"}, "button"=>"", "restaurant_id"=>"21"}
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (50.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:25:in `create'
  [1m[36mRestaurant Load (62.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:25:in `create'
  [1m[36mDish Create (43.2ms)[0m  [1m[32mINSERT INTO "dishes" ("restaurant_id", "nombre", "ruta_img_plato", "descripcion", "precio", "imported_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_id", 21], ["nombre", "afds"], ["ruta_img_plato", nil], ["descripcion", "hgdd"], ["precio", 232.2], ["imported_id", nil]]
  â†³ app/controllers/dishes_controller.rb:25:in `create'
  [1m[36mTRANSACTION (38.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:25:in `create'
Redirected to http://localhost:3000/restaurants/21
Completed 302 Found in 207ms (ActiveRecord: 195.0ms | Allocations: 4609)


Started GET "/restaurants/21" for ::1 at 2023-11-21 10:21:26 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"21"}
  [1m[36mRestaurant Load (29.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (32.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 21], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[35m (45.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=21 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (42.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=21 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (35.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=21 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (42.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 21], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (42.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=21 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (36.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=21 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (36.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=21 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (39.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=21 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (49.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 21], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (49.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=21 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (46.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 49.0ms | Allocations: 1682)
  [1m[36mDish Load (51.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 21]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (49.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (53.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 21], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 57.6ms | Allocations: 1776)
  Rendered layouts/_add_comment.html.erb (Duration: 1.2ms | Allocations: 705)
  [1m[35m (47.0ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=21 AND posts.autor=users.nombre AND posts.restaurant_id=21[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 269.5ms | Allocations: 8440)
  Rendered layouts/_header.html.erb (Duration: 3.8ms | Allocations: 1100)
  [1m[36mUser Load (48.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (28.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 87.1ms | Allocations: 4714)
  Rendered layout layouts/application.html.erb (Duration: 365.6ms | Allocations: 18078)
Completed 200 OK in 1082ms (Views: 42.0ms | ActiveRecord: 998.0ms | Allocations: 30687)


Started GET "/restaurants/21/dishes/23/edit" for ::1 at 2023-11-21 10:21:32 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"21", "id"=>"23"}
  [1m[36mDish Load (44.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.8ms | Allocations: 2221)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 3.7ms | Allocations: 2645)
  Rendered layouts/_header.html.erb (Duration: 2.6ms | Allocations: 1088)
  [1m[36mUser Load (49.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (38.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 99.0ms | Allocations: 4676)
  Rendered layout layouts/application.html.erb (Duration: 112.3ms | Allocations: 12175)
Completed 200 OK in 221ms (Views: 24.2ms | ActiveRecord: 133.1ms | Allocations: 13488)


Started GET "/restaurants/21/dishes/23" for ::1 at 2023-11-21 10:21:39 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"21", "id"=>"23"}
  [1m[36mRestaurant Load (37.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (47.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 23], ["restaurant_id", 21], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (41.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=23 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (37.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=23 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (40.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=23 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (41.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 23], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (46.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=23 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (37.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (53.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (29.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 23], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 31.0ms | Allocations: 1319)
  Rendered layouts/_add_comment.html.erb (Duration: 0.8ms | Allocations: 553)
  Rendered dishes/show.html.erb within layouts/application (Duration: 128.0ms | Allocations: 4115)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1088)
  [1m[36mUser Load (30.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 80.6ms | Allocations: 4678)
  Rendered layout layouts/application.html.erb (Duration: 214.8ms | Allocations: 13638)
Completed 200 OK in 554ms (Views: 21.4ms | ActiveRecord: 485.9ms | Allocations: 18148)


Started GET "/reviews/new?review_to=23&review_type=Dish" for ::1 at 2023-11-21 10:21:48 +0100
Processing by ReviewsController#new as HTML
  Parameters: {"review_to"=>"23", "review_type"=>"Dish"}
  Rendering layout layouts/application.html.erb
  Rendering reviews/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 5.4ms | Allocations: 2425)
  Rendered reviews/new.html.erb within layouts/application (Duration: 6.3ms | Allocations: 2664)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1088)
  [1m[36mUser Load (49.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (36.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 92.5ms | Allocations: 4677)
  Rendered layout layouts/application.html.erb (Duration: 104.6ms | Allocations: 12188)
Completed 200 OK in 125ms (Views: 19.6ms | ActiveRecord: 85.7ms | Allocations: 19299)


Started POST "/reviews" for ::1 at 2023-11-21 10:22:08 +0100
Processing by ReviewsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "review"=>{"reviewable_id"=>"23", "reviewable_type"=>"Dish", "autor"=>"Mr.Dani", "contenido"=>"review sobre mi plato asdfasas o algo asÃ­", "ruta_img"=>#<ActionDispatch::Http::UploadedFile:0x00007fca1b22ee70 @tempfile=#<Tempfile:/tmp/RackMultipart20231121-5539-9ehs99.png>, @content_type="image/png", @original_filename="Captura desde 2023-11-03 13-23-39.png", @headers="Content-Disposition: form-data; name=\"review[ruta_img]\"; filename=\"Captura desde 2023-11-03 13-23-39.png\"\r\nContent-Type: image/png\r\n">}, "button"=>""}
  [1m[36mDish Load (38.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:32:in `get_original_reviewed'
  [1m[36mTRANSACTION (42.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/reviews_controller.rb:24:in `create'
  [1m[36mDish Load (31.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:24:in `create'
  [1m[36mReview Create (42.0ms)[0m  [1m[32mINSERT INTO "reviews" ("autor", "reviewable_type", "reviewable_id", "contenido", "ruta_img", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["autor", "Mr.Dani"], ["reviewable_type", "Dish"], ["reviewable_id", 23], ["contenido", "review sobre mi plato asdfasas o algo asÃ­"], ["ruta_img", "79907ea86e3d4a748030.png"], ["created_at", "2023-11-21 09:22:08.836315"], ["updated_at", "2023-11-21 09:22:08.836335"]]
  â†³ app/controllers/reviews_controller.rb:24:in `create'
  [1m[36mTRANSACTION (38.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/reviews_controller.rb:24:in `create'
Redirected to http://localhost:3000/restaurants/21/dishes/23
Completed 302 Found in 207ms (ActiveRecord: 191.6ms | Allocations: 4670)


Started GET "/restaurants/21/dishes/23" for ::1 at 2023-11-21 10:22:09 +0100
Processing by DishesController#show as TURBO_STREAM
  Parameters: {"restaurant_id"=>"21", "id"=>"23"}
  [1m[36mRestaurant Load (33.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (37.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 23], ["restaurant_id", 21], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (31.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=23 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (34.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=23 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (31.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=23 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (29.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 23], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (35.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=23 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (53.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (34.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (51.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 23], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 908)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 444)
  Rendered layouts/_comment.html.erb (Duration: 153.2ms | Allocations: 64646)
  Rendered layouts/_add_comment.html.erb (Duration: 0.9ms | Allocations: 534)
  Rendered dishes/show.html.erb within layouts/application (Duration: 248.1ms | Allocations: 66960)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1104)
  [1m[36mUser Load (42.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 95.9ms | Allocations: 4730)
  Rendered layout layouts/application.html.erb (Duration: 355.5ms | Allocations: 76569)
Completed 200 OK in 597ms (Views: 129.8ms | ActiveRecord: 459.5ms | Allocations: 79810)


Started POST "/reactions" for ::1 at 2023-11-21 10:22:15 +0100
Processing by ReactionsController#create as TURBO_STREAM
  Parameters: {"reaction"=>{"reaccion"=>"Like", "reactionable_id"=>"22", "reactionable_type"=>"Review"}}
  [1m[36mReaction Exists? (59.8ms)[0m  [1m[34mSELECT 1 AS one FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reactionable_id" = $2 AND "reactions"."reactionable_type" = $3 LIMIT $4[0m  [["who", "Mr.Dani"], ["reactionable_id", 22], ["reactionable_type", "Review"], ["LIMIT", 1]]
  â†³ app/controllers/reactions_controller.rb:10:in `create'
  [1m[36mReview Load (33.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  â†³ app/controllers/reactions_controller.rb:10:in `create'
  [1m[36mCACHE Reaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reactionable_id" = $2 AND "reactions"."reactionable_type" = $3 LIMIT $4[0m  [["who", "Mr.Dani"], ["reactionable_id", 22], ["reactionable_type", "Review"], ["LIMIT", 1]]
  â†³ app/controllers/reactions_controller.rb:10:in `create'
  [1m[36mTRANSACTION (32.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/reactions_controller.rb:10:in `create'
  [1m[36mReaction Create (65.6ms)[0m  [1m[32mINSERT INTO "reactions" ("who", "reactionable_type", "reactionable_id", "reaccion") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["who", "Mr.Dani"], ["reactionable_type", "Review"], ["reactionable_id", 22], ["reaccion", "Like"]]
  â†³ app/controllers/reactions_controller.rb:10:in `create'
  [1m[36mTRANSACTION (29.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/reactions_controller.rb:10:in `create'
Redirected to http://localhost:3000/restaurants/21/dishes/23
Completed 302 Found in 348ms (ActiveRecord: 315.8ms | Allocations: 10979)


Started GET "/restaurants/21/dishes/23" for ::1 at 2023-11-21 10:22:16 +0100
Processing by DishesController#show as TURBO_STREAM
  Parameters: {"restaurant_id"=>"21", "id"=>"23"}
  [1m[36mRestaurant Load (109.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (50.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 23], ["restaurant_id", 21], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (33.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=23 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (31.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=23 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (34.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=23 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (40.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 23], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (37.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=23 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (69.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (31.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Mr.Dani' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (36.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 23], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 653)
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 447)
  Rendered layouts/_comment.html.erb (Duration: 44.2ms | Allocations: 2908)
  Rendered layouts/_add_comment.html.erb (Duration: 0.7ms | Allocations: 532)
  Rendered dishes/show.html.erb within layouts/application (Duration: 149.4ms | Allocations: 5214)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1095)
  [1m[36mUser Load (30.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (36.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 76.8ms | Allocations: 4698)
  Rendered layout layouts/application.html.erb (Duration: 231.6ms | Allocations: 14765)
Completed 200 OK in 581ms (Views: 29.3ms | ActiveRecord: 540.2ms | Allocations: 17982)


Started GET "/reviews/22/responses" for ::1 at 2023-11-21 10:22:19 +0100
Processing by ReviewResponsesController#index as HTML
  Parameters: {"review_id"=>"22"}
  [1m[36mReview Load (48.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  â†³ app/controllers/review_responses_controller.rb:5:in `index'
  [1m[35m (38.4ms)[0m  [1m[34mSELECT responses.id, COUNT(reaccion) as react FROM responses LEFT JOIN reactions ON reactionable_id=responses.id AND reactionable_type='Response' AND reaccion='Like' AND respondable_id=22 AND respondable_type='Review' GROUP BY responses.id ORDER BY responses.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.3ms)[0m  [1m[34mSELECT responses.id, COUNT(reaccion) as react FROM responses LEFT JOIN reactions ON reactionable_id=responses.id AND reactionable_type='Response' AND reaccion='Dislike' AND respondable_id=22 AND respondable_type='Review' GROUP BY responses.id ORDER BY responses.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[36mResponse Load (32.5ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2 ORDER BY "responses"."id" ASC LIMIT $3[0m  [["respondable_id", 22], ["respondable_type", "Review"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:27:in `each'
  [1m[35m (46.2ms)[0m  [1m[34mSELECT responses.id, reactions.id as reaction_id FROM responses LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=responses.id AND reactions.reactionable_type='Response' AND respondable_id=22 AND respondable_type='Review' GROUP BY responses.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[36mReaction Load (30.5ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."reaccion" = $3[0m  [["reactionable_id", 22], ["reactionable_type", "Review"], ["reaccion", "Like"]]
  â†³ app/controllers/review_responses_controller.rb:9:in `index'
  [1m[36mReaction Load (33.1ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."reaccion" = $3[0m  [["reactionable_id", 22], ["reactionable_type", "Review"], ["reaccion", "Dislike"]]
  â†³ app/controllers/review_responses_controller.rb:9:in `index'
  [1m[36mResponse Count (38.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2[0m  [["respondable_id", 22], ["respondable_type", "Review"]]
  â†³ app/controllers/review_responses_controller.rb:9:in `size'
  [1m[36mReaction Load (46.2ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."who" = $3 LIMIT $4[0m  [["reactionable_id", 22], ["reactionable_type", "Review"], ["who", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/review_responses_controller.rb:10:in `index'
  Rendering layout layouts/application.html.erb
  Rendering review_responses/index.html.erb within layouts/application
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 648)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 447)
  Rendered layouts/_comment.html.erb (Duration: 5.1ms | Allocations: 2604)
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 30)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 530)
  Rendered review_responses/index.html.erb within layouts/application (Duration: 7.2ms | Allocations: 3591)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1092)
  [1m[36mUser Load (49.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (62.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 118.8ms | Allocations: 4688)
  Rendered layout layouts/application.html.erb (Duration: 131.4ms | Allocations: 13124)
Completed 200 OK in 727ms (Views: 20.0ms | ActiveRecord: 583.3ms | Allocations: 20563)


Started GET "/responses/new?response_to=22&response_type=Review" for ::1 at 2023-11-21 10:22:22 +0100
Processing by ResponsesController#new as HTML
  Parameters: {"response_to"=>"22", "response_type"=>"Review"}
  Rendering layout layouts/application.html.erb
  Rendering responses/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 9.8ms | Allocations: 1733)
  Rendered responses/new.html.erb within layouts/application (Duration: 10.6ms | Allocations: 1906)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1104)
  [1m[36mUser Load (64.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 115.3ms | Allocations: 4726)
  Rendered layout layouts/application.html.erb (Duration: 132.8ms | Allocations: 11556)
Completed 200 OK in 146ms (Views: 25.4ms | ActiveRecord: 108.1ms | Allocations: 16907)


Started POST "/responses" for ::1 at 2023-11-21 10:22:40 +0100
Processing by ResponsesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "response"=>{"respondable_id"=>"22", "respondable_type"=>"Review", "autor"=>"Mr.Dani", "contenido"=>"Respondo a mi review", "ruta_img"=>#<ActionDispatch::Http::UploadedFile:0x00007fca1b524d00 @tempfile=#<Tempfile:/tmp/RackMultipart20231121-5539-b74a60.jpg>, @content_type="image/jpeg", @original_filename="kebab.jpg", @headers="Content-Disposition: form-data; name=\"response[ruta_img]\"; filename=\"kebab.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "button"=>""}
  [1m[36mReview Load (56.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  â†³ app/controllers/responses_controller.rb:36:in `get_original_comment'
  [1m[36mTRANSACTION (89.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/responses_controller.rb:26:in `create'
  [1m[36mReview Load (62.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  â†³ app/controllers/responses_controller.rb:26:in `create'
  [1m[36mResponse Create (71.9ms)[0m  [1m[32mINSERT INTO "responses" ("autor", "respondable_type", "respondable_id", "contenido", "ruta_img", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["autor", "Mr.Dani"], ["respondable_type", "Review"], ["respondable_id", 22], ["contenido", "Respondo a mi review"], ["ruta_img", "214aadfccbcb4b36c982.jpg"], ["created_at", "2023-11-21 09:22:40.960880"], ["updated_at", "2023-11-21 09:22:40.960890"]]
  â†³ app/controllers/responses_controller.rb:26:in `create'
  [1m[36mTRANSACTION (47.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/responses_controller.rb:26:in `create'
Redirected to http://localhost:3000/reviews/22/responses
Completed 302 Found in 338ms (ActiveRecord: 326.8ms | Allocations: 4340)


Started GET "/reviews/22/responses" for ::1 at 2023-11-21 10:22:41 +0100
Processing by ReviewResponsesController#index as TURBO_STREAM
  Parameters: {"review_id"=>"22"}
  [1m[36mReview Load (30.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  â†³ app/controllers/review_responses_controller.rb:5:in `index'
  [1m[35m (59.9ms)[0m  [1m[34mSELECT responses.id, COUNT(reaccion) as react FROM responses LEFT JOIN reactions ON reactionable_id=responses.id AND reactionable_type='Response' AND reaccion='Like' AND respondable_id=22 AND respondable_type='Review' GROUP BY responses.id ORDER BY responses.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (66.3ms)[0m  [1m[34mSELECT responses.id, COUNT(reaccion) as react FROM responses LEFT JOIN reactions ON reactionable_id=responses.id AND reactionable_type='Response' AND reaccion='Dislike' AND respondable_id=22 AND respondable_type='Review' GROUP BY responses.id ORDER BY responses.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[36mResponse Load (60.6ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2 ORDER BY "responses"."id" ASC LIMIT $3[0m  [["respondable_id", 22], ["respondable_type", "Review"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:27:in `each'
  [1m[35m (74.8ms)[0m  [1m[34mSELECT responses.id, reactions.id as reaction_id FROM responses LEFT JOIN reactions ON reactions.who='Mr.Dani' AND reactions.reactionable_id=responses.id AND reactions.reactionable_type='Response' AND respondable_id=22 AND respondable_type='Review' GROUP BY responses.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[36mReaction Load (50.1ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."reaccion" = $3[0m  [["reactionable_id", 22], ["reactionable_type", "Review"], ["reaccion", "Like"]]
  â†³ app/controllers/review_responses_controller.rb:9:in `index'
  [1m[36mReaction Load (49.0ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."reaccion" = $3[0m  [["reactionable_id", 22], ["reactionable_type", "Review"], ["reaccion", "Dislike"]]
  â†³ app/controllers/review_responses_controller.rb:9:in `index'
  [1m[36mResponse Count (37.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2[0m  [["respondable_id", 22], ["respondable_type", "Review"]]
  â†³ app/controllers/review_responses_controller.rb:9:in `size'
  [1m[36mReaction Load (49.0ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."who" = $3 LIMIT $4[0m  [["reactionable_id", 22], ["reactionable_type", "Review"], ["who", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/review_responses_controller.rb:10:in `index'
  Rendering layout layouts/application.html.erb
  Rendering review_responses/index.html.erb within layouts/application
  Rendered layouts/_reaction.html.erb (Duration: 4.7ms | Allocations: 656)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 449)
  Rendered layouts/_comment.html.erb (Duration: 11.6ms | Allocations: 2626)
  [1m[36mResponse Load (74.2ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2 ORDER BY "responses"."id" ASC LIMIT $3[0m  [["respondable_id", 22], ["respondable_type", "Review"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 445)
  Rendered layouts/_comment.html.erb (Duration: 179.5ms | Allocations: 63976)
  Rendered layouts/_add_comment.html.erb (Duration: 0.8ms | Allocations: 536)
  Rendered review_responses/index.html.erb within layouts/application (Duration: 193.2ms | Allocations: 67377)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1107)
  [1m[36mUser Load (41.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (47.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 96.6ms | Allocations: 4724)
  Rendered layout layouts/application.html.erb (Duration: 295.5ms | Allocations: 77008)
Completed 200 OK in 789ms (Views: 133.9ms | ActiveRecord: 639.8ms | Allocations: 81926)


Started GET "/users/Mr.Dani" for ::1 at 2023-11-21 10:23:05 +0100
Processing by UsersController#show as */*
  Parameters: {"id"=>"Mr"}
  [1m[36mUser Load (43.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (40.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (52.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (51.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (59.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-21 09:23:05.693287')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (69.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-21 09:23:05.753605')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (82.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-21 09:23:05.824940')[0m  [["autor", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (64.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (67.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (44.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-21 09:23:06.043918')[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (84.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (46.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-21 09:23:06.176077')[0m  [["reviewable_id", 6], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (44.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-21 09:23:06.224920')[0m  [["reviewable_id", 7], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (42.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-21 09:23:06.271871')[0m  [["reviewable_id", 8], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (48.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (47.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "7"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (64.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-21 09:23:06.416599')[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (84.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (62.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-21 09:23:06.568720')[0m  [["reviewable_id", 1], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (61.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-21 09:23:06.632236')[0m  [["reviewable_id", 2], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (53.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-21 09:23:06.695288')[0m  [["reviewable_id", 3], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (64.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-21 09:23:06.749552')[0m  [["reviewable_id", 19], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (85.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-21 09:23:06.815213')[0m  [["reviewable_id", 20], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (72.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-21 09:23:06.902463')[0m  [["reviewable_id", 21], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (54.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-21 09:23:06.978195')[0m  [["reviewable_id", 22], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (45.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (39.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "1"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (49.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-21 09:23:07.124895')[0m  [["reviewable_id", 13], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (33.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 13]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (39.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-21 09:23:07.210355')[0m  [["reviewable_id", 15], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (39.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "13"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (45.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "13"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  [1m[36mReview Count (52.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-21 09:23:07.339361')[0m  [["reviewable_id", 21], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (43.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 21]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (40.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-21 09:23:07.439795')[0m  [["reviewable_id", 23], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (41.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "21"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (72.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "21"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 6.2ms | Allocations: 3313)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1097)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Mr.Dani"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Mr.Dani"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 8.1ms | Allocations: 4457)
  Rendered layout layouts/application.html.erb (Duration: 20.2ms | Allocations: 12621)
Completed 200 OK in 2122ms (Views: 20.9ms | ActiveRecord: 2030.1ms | Allocations: 32600)


Started GET "/logout" for ::1 at 2023-11-21 10:23:10 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.0ms | Allocations: 439)


Started GET "/" for ::1 at 2023-11-21 10:23:10 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (48.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (47.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (71.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (45.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (32.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (30.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (28.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (32.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 138.9ms | Allocations: 13433)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1110)
  Rendered layouts/_sidenav.html.erb (Duration: 2.9ms | Allocations: 2711)
  Rendered layout layouts/application.html.erb (Duration: 147.1ms | Allocations: 21291)
Completed 200 OK in 454ms (Views: 26.8ms | ActiveRecord: 411.1ms | Allocations: 27149)


Started GET "/login" for ::1 at 2023-11-21 10:23:13 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 6.0ms | Allocations: 2974)
  Rendered layouts/_header.html.erb (Duration: 2.2ms | Allocations: 1097)
  Rendered layouts/_sidenav.html.erb (Duration: 5.5ms | Allocations: 2679)
  Rendered layout layouts/application.html.erb (Duration: 23.7ms | Allocations: 10529)
Completed 200 OK in 28ms (Views: 25.9ms | ActiveRecord: 0.0ms | Allocations: 10978)


Started POST "/login" for ::1 at 2023-11-21 10:23:18 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"juan", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (59.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 251ms (ActiveRecord: 59.4ms | Allocations: 886)


Started GET "/" for ::1 at 2023-11-21 10:23:19 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (86.0ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (33.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (50.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (31.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (49.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (30.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (49.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (50.9ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 148.9ms | Allocations: 11009)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1097)
  [1m[36mUser Load (50.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (127.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 188.5ms | Allocations: 4124)
  Rendered layout layouts/application.html.erb (Duration: 343.5ms | Allocations: 20209)
Completed 200 OK in 602ms (Views: 34.7ms | ActiveRecord: 560.5ms | Allocations: 22705)


Started GET "/restaurants/21" for ::1 at 2023-11-21 10:23:22 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"21"}
  [1m[36mRestaurant Load (92.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (79.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 21], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[35m (65.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=21 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (62.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=21 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (51.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=21 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (68.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 21], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (34.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=21 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (49.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=21 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (53.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=21 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (40.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=21 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (53.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 21], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (43.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=21 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (33.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 34.6ms | Allocations: 960)
  [1m[36mDish Load (102.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 21]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (45.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (35.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 21], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 36.5ms | Allocations: 485)
  Rendered layouts/_add_comment.html.erb (Duration: 1.0ms | Allocations: 563)
  [1m[35m (33.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=21 AND posts.autor=users.nombre AND posts.restaurant_id=21[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 259.3ms | Allocations: 3966)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1096)
  [1m[36mUser Load (58.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (37.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 102.5ms | Allocations: 4123)
  Rendered layout layouts/application.html.erb (Duration: 371.4ms | Allocations: 12959)
Completed 200 OK in 1087ms (Views: 28.3ms | ActiveRecord: 1040.0ms | Allocations: 17934)


Started GET "/restaurants/21/dishes/23" for ::1 at 2023-11-21 10:23:25 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"21", "id"=>"23"}
  [1m[36mRestaurant Load (87.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (44.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 23], ["restaurant_id", 21], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (45.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=23 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (51.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=23 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (39.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=23 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (42.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 23], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (48.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=23 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (32.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (40.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (53.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 23], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (50.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 640)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 445)
  Rendered layouts/_comment.html.erb (Duration: 112.4ms | Allocations: 3812)
  Rendered layouts/_add_comment.html.erb (Duration: 1.7ms | Allocations: 538)
  Rendered dishes/show.html.erb within layouts/application (Duration: 192.9ms | Allocations: 6048)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1108)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (32.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 38.9ms | Allocations: 4049)
  Rendered layout layouts/application.html.erb (Duration: 240.2ms | Allocations: 15010)
Completed 200 OK in 611ms (Views: 31.2ms | ActiveRecord: 567.9ms | Allocations: 18220)


Started GET "/reviews/22/responses" for ::1 at 2023-11-21 10:23:31 +0100
Processing by ReviewResponsesController#index as HTML
  Parameters: {"review_id"=>"22"}
  [1m[36mReview Load (39.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  â†³ app/controllers/review_responses_controller.rb:5:in `index'
  [1m[35m (42.6ms)[0m  [1m[34mSELECT responses.id, COUNT(reaccion) as react FROM responses LEFT JOIN reactions ON reactionable_id=responses.id AND reactionable_type='Response' AND reaccion='Like' AND respondable_id=22 AND respondable_type='Review' GROUP BY responses.id ORDER BY responses.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (32.7ms)[0m  [1m[34mSELECT responses.id, COUNT(reaccion) as react FROM responses LEFT JOIN reactions ON reactionable_id=responses.id AND reactionable_type='Response' AND reaccion='Dislike' AND respondable_id=22 AND respondable_type='Review' GROUP BY responses.id ORDER BY responses.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[36mResponse Load (30.1ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2 ORDER BY "responses"."id" ASC LIMIT $3[0m  [["respondable_id", 22], ["respondable_type", "Review"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:27:in `each'
  [1m[35m (32.1ms)[0m  [1m[34mSELECT responses.id, reactions.id as reaction_id FROM responses LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=responses.id AND reactions.reactionable_type='Response' AND respondable_id=22 AND respondable_type='Review' GROUP BY responses.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[36mReaction Load (31.9ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."reaccion" = $3[0m  [["reactionable_id", 22], ["reactionable_type", "Review"], ["reaccion", "Like"]]
  â†³ app/controllers/review_responses_controller.rb:9:in `index'
  [1m[36mReaction Load (29.6ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."reaccion" = $3[0m  [["reactionable_id", 22], ["reactionable_type", "Review"], ["reaccion", "Dislike"]]
  â†³ app/controllers/review_responses_controller.rb:9:in `index'
  [1m[36mResponse Count (30.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2[0m  [["respondable_id", 22], ["respondable_type", "Review"]]
  â†³ app/controllers/review_responses_controller.rb:9:in `size'
  [1m[36mReaction Load (29.2ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."who" = $3 LIMIT $4[0m  [["reactionable_id", 22], ["reactionable_type", "Review"], ["who", "juan"], ["LIMIT", 1]]
  â†³ app/controllers/review_responses_controller.rb:10:in `index'
  Rendering layout layouts/application.html.erb
  Rendering review_responses/index.html.erb within layouts/application
  [1m[36mUser Load (45.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 634)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 445)
  Rendered layouts/_comment.html.erb (Duration: 50.1ms | Allocations: 3466)
  [1m[36mResponse Load (49.6ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2 ORDER BY "responses"."id" ASC LIMIT $3[0m  [["respondable_id", 22], ["respondable_type", "Review"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 448)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 445)
  Rendered layouts/_comment.html.erb (Duration: 55.2ms | Allocations: 2928)
  Rendered layouts/_add_comment.html.erb (Duration: 0.8ms | Allocations: 532)
  Rendered review_responses/index.html.erb within layouts/application (Duration: 106.7ms | Allocations: 7165)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1106)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (47.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.9ms | Allocations: 4018)
  Rendered layout layouts/application.html.erb (Duration: 168.4ms | Allocations: 16062)
Completed 200 OK in 479ms (Views: 25.8ms | ActiveRecord: 440.9ms | Allocations: 20907)


Started GET "/responses/new?response_to=22&response_type=Review" for ::1 at 2023-11-21 10:23:35 +0100
Processing by ResponsesController#new as HTML
  Parameters: {"response_to"=>"22", "response_type"=>"Review"}
  Rendering layout layouts/application.html.erb
  Rendering responses/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 4.2ms | Allocations: 1661)
  Rendered responses/new.html.erb within layouts/application (Duration: 4.6ms | Allocations: 1731)
  Rendered layouts/_header.html.erb (Duration: 2.4ms | Allocations: 1096)
  [1m[36mUser Load (30.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (49.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 87.4ms | Allocations: 4124)
  Rendered layout layouts/application.html.erb (Duration: 102.5ms | Allocations: 10723)
Completed 200 OK in 104ms (Views: 23.4ms | ActiveRecord: 79.8ms | Allocations: 11189)


Started POST "/responses" for ::1 at 2023-11-21 10:23:50 +0100
Processing by ResponsesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "response"=>{"respondable_id"=>"22", "respondable_type"=>"Review", "autor"=>"juan", "contenido"=>"review de un no admin", "ruta_img"=>#<ActionDispatch::Http::UploadedFile:0x00007fca1b600968 @tempfile=#<Tempfile:/tmp/RackMultipart20231121-5539-47ts9.jpg>, @content_type="image/jpeg", @original_filename="21_bestrestaurantintheworld.jpg", @headers="Content-Disposition: form-data; name=\"response[ruta_img]\"; filename=\"21_bestrestaurantintheworld.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "button"=>""}
  [1m[36mReview Load (29.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  â†³ app/controllers/responses_controller.rb:36:in `get_original_comment'
  [1m[36mTRANSACTION (54.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/responses_controller.rb:26:in `create'
  [1m[36mReview Load (31.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  â†³ app/controllers/responses_controller.rb:26:in `create'
  [1m[36mResponse Create (33.2ms)[0m  [1m[32mINSERT INTO "responses" ("autor", "respondable_type", "respondable_id", "contenido", "ruta_img", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["autor", "juan"], ["respondable_type", "Review"], ["respondable_id", 22], ["contenido", "review de un no admin"], ["ruta_img", "b14d8428bdd48d86b481.jpg"], ["created_at", "2023-11-21 09:23:50.476163"], ["updated_at", "2023-11-21 09:23:50.476171"]]
  â†³ app/controllers/responses_controller.rb:26:in `create'
  [1m[36mTRANSACTION (54.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/responses_controller.rb:26:in `create'
Redirected to http://localhost:3000/reviews/22/responses
Completed 302 Found in 214ms (ActiveRecord: 202.1ms | Allocations: 3278)


Started GET "/reviews/22/responses" for ::1 at 2023-11-21 10:23:50 +0100
Processing by ReviewResponsesController#index as TURBO_STREAM
  Parameters: {"review_id"=>"22"}
  [1m[36mReview Load (45.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  â†³ app/controllers/review_responses_controller.rb:5:in `index'
  [1m[35m (51.0ms)[0m  [1m[34mSELECT responses.id, COUNT(reaccion) as react FROM responses LEFT JOIN reactions ON reactionable_id=responses.id AND reactionable_type='Response' AND reaccion='Like' AND respondable_id=22 AND respondable_type='Review' GROUP BY responses.id ORDER BY responses.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (51.0ms)[0m  [1m[34mSELECT responses.id, COUNT(reaccion) as react FROM responses LEFT JOIN reactions ON reactionable_id=responses.id AND reactionable_type='Response' AND reaccion='Dislike' AND respondable_id=22 AND respondable_type='Review' GROUP BY responses.id ORDER BY responses.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[36mResponse Load (52.4ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2 ORDER BY "responses"."id" ASC LIMIT $3[0m  [["respondable_id", 22], ["respondable_type", "Review"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:27:in `each'
  [1m[35m (61.2ms)[0m  [1m[34mSELECT responses.id, reactions.id as reaction_id FROM responses LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=responses.id AND reactions.reactionable_type='Response' AND respondable_id=22 AND respondable_type='Review' GROUP BY responses.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[36mReaction Load (61.1ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."reaccion" = $3[0m  [["reactionable_id", 22], ["reactionable_type", "Review"], ["reaccion", "Like"]]
  â†³ app/controllers/review_responses_controller.rb:9:in `index'
  [1m[36mReaction Load (34.5ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."reaccion" = $3[0m  [["reactionable_id", 22], ["reactionable_type", "Review"], ["reaccion", "Dislike"]]
  â†³ app/controllers/review_responses_controller.rb:9:in `index'
  [1m[36mResponse Count (45.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2[0m  [["respondable_id", 22], ["respondable_type", "Review"]]
  â†³ app/controllers/review_responses_controller.rb:9:in `size'
  [1m[36mReaction Load (33.6ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."who" = $3 LIMIT $4[0m  [["reactionable_id", 22], ["reactionable_type", "Review"], ["who", "juan"], ["LIMIT", 1]]
  â†³ app/controllers/review_responses_controller.rb:10:in `index'
  Rendering layout layouts/application.html.erb
  Rendering review_responses/index.html.erb within layouts/application
  [1m[36mUser Load (39.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 636)
  Rendered layouts/_reaction.html.erb (Duration: 3.3ms | Allocations: 447)
  Rendered layouts/_comment.html.erb (Duration: 49.7ms | Allocations: 3482)
  [1m[36mResponse Load (46.3ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2 ORDER BY "responses"."id" ASC LIMIT $3[0m  [["respondable_id", 22], ["respondable_type", "Review"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 447)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 452)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 447)
  Rendered layouts/_comment.html.erb (Duration: 153.4ms | Allocations: 65834)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 538)
  Rendered review_responses/index.html.erb within layouts/application (Duration: 204.5ms | Allocations: 70093)
  Rendered layouts/_header.html.erb (Duration: 2.8ms | Allocations: 1108)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (36.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 45.3ms | Allocations: 4049)
  Rendered layout layouts/application.html.erb (Duration: 257.0ms | Allocations: 79037)
Completed 200 OK in 705ms (Views: 135.3ms | ActiveRecord: 557.9ms | Allocations: 83941)


Started DELETE "/reviews/22/responses" for ::1 at 2023-11-21 10:23:56 +0100
Processing by ErrorsController#not_found as TURBO_STREAM
  Parameters: {"unmatched"=>"reviews/22/responses"}
  Rendering layout layouts/application.html.erb
  Rendering errors/not_found.html.erb within layouts/application
  Rendered errors/not_found.html.erb within layouts/application (Duration: 6.4ms | Allocations: 95)
  Rendered layouts/_header.html.erb (Duration: 2.2ms | Allocations: 1145)
  [1m[36mUser Load (47.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (40.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 93.5ms | Allocations: 4155)
  Rendered layout layouts/application.html.erb (Duration: 109.4ms | Allocations: 9407)
Completed 404 Not Found in 111ms (Views: 23.3ms | ActiveRecord: 87.2ms | Allocations: 10112)


Started GET "/responses/new?response_to=22&response_type=Review" for ::1 at 2023-11-21 10:25:25 +0100
Processing by ResponsesController#new as HTML
  Parameters: {"response_to"=>"22", "response_type"=>"Review"}
  Rendering layout layouts/application.html.erb
  Rendering responses/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 8.5ms | Allocations: 1662)
  Rendered responses/new.html.erb within layouts/application (Duration: 9.0ms | Allocations: 1732)
  Rendered layouts/_header.html.erb (Duration: 4.9ms | Allocations: 1101)
  [1m[36mUser Load (45.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (33.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 86.7ms | Allocations: 4143)
  Rendered layout layouts/application.html.erb (Duration: 110.2ms | Allocations: 10754)
Completed 200 OK in 113ms (Views: 32.2ms | ActiveRecord: 79.4ms | Allocations: 11212)


Started GET "/restaurants/21/dishes/23" for ::1 at 2023-11-21 10:25:29 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"21", "id"=>"23"}
  [1m[36mRestaurant Load (58.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (33.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 23], ["restaurant_id", 21], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (31.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=23 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (34.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=23 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (30.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=23 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (29.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 23], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (30.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=23 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (36.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (38.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (42.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 23], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (53.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 640)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 447)
  Rendered layouts/_comment.html.erb (Duration: 101.3ms | Allocations: 3813)
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 538)
  Rendered dishes/show.html.erb within layouts/application (Duration: 180.0ms | Allocations: 6049)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1100)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (53.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 59.9ms | Allocations: 4028)
  Rendered layout layouts/application.html.erb (Duration: 245.1ms | Allocations: 14931)
Completed 200 OK in 505ms (Views: 22.8ms | ActiveRecord: 471.1ms | Allocations: 18167)


<<<<<<< HEAD
Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-21 16:28:06 +0100
  [1m[36mActiveRecord::SchemaMigration Load (50.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (46.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (45.5ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (61.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (48.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (52.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (46.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (47.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (48.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (43.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 1862.4ms | Allocations: 167607)
  [1m[36mDish Load (46.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (60.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (100.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 907)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 449)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 431.2ms | Allocations: 12858)
  Rendered layouts/_add_comment.html.erb (Duration: 2.4ms | Allocations: 692)
  [1m[35m (53.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (81.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.8ms | Allocations: 453)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 103.5ms | Allocations: 2362)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 2729.7ms | Allocations: 195932)
  Rendered layouts/_header.html.erb (Duration: 3.5ms | Allocations: 1400)
  Rendered layouts/_sidenav.html.erb (Duration: 6.9ms | Allocations: 3458)
  Rendered layout layouts/application.html.erb (Duration: 2825.2ms | Allocations: 220220)
Completed 200 OK in 5719ms (Views: 2360.8ms | ActiveRecord: 2083.4ms | Allocations: 296839)


Started GET "/login" for 127.0.0.1 at 2023-11-21 16:29:03 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 19.9ms | Allocations: 3410)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1106)
  Rendered layouts/_sidenav.html.erb (Duration: 4.3ms | Allocations: 2701)
  Rendered layout layouts/application.html.erb (Duration: 34.4ms | Allocations: 11019)
Completed 200 OK in 53ms (Views: 35.6ms | ActiveRecord: 0.0ms | Allocations: 14570)


Started POST "/login" for 127.0.0.1 at 2023-11-21 16:29:15 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"Atreides", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (52.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 540ms (ActiveRecord: 52.0ms | Allocations: 1151)


Started GET "/" for 127.0.0.1 at 2023-11-21 16:29:19 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (201.1ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (100.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (44.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (43.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (50.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (49.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (45.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (45.4ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 219.2ms | Allocations: 13484)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1102)
  [1m[36mUser Load (42.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (51.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 246.8ms | Allocations: 9371)
  Rendered layout layouts/application.html.erb (Duration: 477.0ms | Allocations: 27994)
Completed 200 OK in 1137ms (Views: 144.1ms | ActiveRecord: 774.0ms | Allocations: 34638)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-21 16:29:25 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (43.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (46.5ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (50.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (45.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (47.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (44.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (55.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (199.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (44.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 51.0ms | Allocations: 2256)
  [1m[36mDish Load (52.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (43.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (50.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 634)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 452)
  [1m[36mUser Load (47.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 115.3ms | Allocations: 4757)
  Rendered layouts/_add_comment.html.erb (Duration: 2.4ms | Allocations: 539)
  [1m[35m (45.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 5.1ms | Allocations: 1510)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 325.7ms | Allocations: 11493)
  Rendered layouts/_header.html.erb (Duration: 2.7ms | Allocations: 1105)
  [1m[36mUser Load (50.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 118.9ms | Allocations: 4676)
  Rendered layout layouts/application.html.erb (Duration: 455.9ms | Allocations: 21070)
Completed 200 OK in 1288ms (Views: 78.1ms | ActiveRecord: 1134.2ms | Allocations: 26690)


Started GET "/reviews/4/responses" for 127.0.0.1 at 2023-11-21 16:29:46 +0100
Processing by ReviewResponsesController#index as HTML
  Parameters: {"review_id"=>"4"}
  [1m[36mReview Load (101.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/review_responses_controller.rb:5:in `index'
  [1m[35m (50.4ms)[0m  [1m[34mSELECT responses.id, COUNT(reaccion) as react FROM responses LEFT JOIN reactions ON reactionable_id=responses.id AND reactionable_type='Response' AND reaccion='Like' AND respondable_id=4 AND respondable_type='Review' GROUP BY responses.id ORDER BY responses.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (53.6ms)[0m  [1m[34mSELECT responses.id, COUNT(reaccion) as react FROM responses LEFT JOIN reactions ON reactionable_id=responses.id AND reactionable_type='Response' AND reaccion='Dislike' AND respondable_id=4 AND respondable_type='Review' GROUP BY responses.id ORDER BY responses.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[36mResponse Load (57.7ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2 ORDER BY "responses"."id" ASC LIMIT $3[0m  [["respondable_id", 4], ["respondable_type", "Review"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:27:in `each'
  [1m[35m (50.6ms)[0m  [1m[34mSELECT responses.id, reactions.id as reaction_id FROM responses LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=responses.id AND reactions.reactionable_type='Response' AND respondable_id=4 AND respondable_type='Review' GROUP BY responses.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[36mReaction Load (43.7ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."reaccion" = $3[0m  [["reactionable_id", 4], ["reactionable_type", "Review"], ["reaccion", "Like"]]
  â†³ app/controllers/review_responses_controller.rb:9:in `index'
  [1m[36mReaction Load (46.3ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."reaccion" = $3[0m  [["reactionable_id", 4], ["reactionable_type", "Review"], ["reaccion", "Dislike"]]
  â†³ app/controllers/review_responses_controller.rb:9:in `index'
  [1m[36mResponse Count (47.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2[0m  [["respondable_id", 4], ["respondable_type", "Review"]]
  â†³ app/controllers/review_responses_controller.rb:9:in `size'
  [1m[36mReaction Load (59.3ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."who" = $3 LIMIT $4[0m  [["reactionable_id", 4], ["reactionable_type", "Review"], ["who", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/review_responses_controller.rb:10:in `index'
  Rendering layout layouts/application.html.erb
  Rendering review_responses/index.html.erb within layouts/application
  Rendered layouts/_reaction.html.erb (Duration: 2.2ms | Allocations: 844)
  Rendered layouts/_reaction.html.erb (Duration: 4.0ms | Allocations: 452)
  Rendered layouts/_comment.html.erb (Duration: 14.5ms | Allocations: 2097)
  [1m[36mResponse Load (45.8ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2 ORDER BY "responses"."id" ASC LIMIT $3[0m  [["respondable_id", 4], ["respondable_type", "Review"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 54.5ms | Allocations: 3242)
  Rendered layouts/_add_comment.html.erb (Duration: 0.9ms | Allocations: 537)
  Rendered review_responses/index.html.erb within layouts/application (Duration: 72.8ms | Allocations: 6300)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1105)
  [1m[36mUser Load (43.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 107.8ms | Allocations: 4680)
  Rendered layout layouts/application.html.erb (Duration: 196.6ms | Allocations: 15886)
Completed 200 OK in 1703ms (Views: 66.3ms | ActiveRecord: 984.7ms | Allocations: 34070)


Started GET "/restaurants/3/edit" for 127.0.0.1 at 2023-11-21 16:30:05 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (46.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:56:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  [1m[36mCategory Load (44.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 95.6ms | Allocations: 4713)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 98.2ms | Allocations: 5039)
  Rendered layouts/_header.html.erb (Duration: 2.3ms | Allocations: 1105)
  [1m[36mUser Load (43.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (81.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 141.7ms | Allocations: 4669)
  Rendered layout layouts/application.html.erb (Duration: 250.9ms | Allocations: 14607)
Completed 200 OK in 358ms (Views: 82.0ms | ActiveRecord: 216.1ms | Allocations: 15378)


Started GET "/restaurants/3/edit_info" for 127.0.0.1 at 2023-11-21 16:30:29 +0100
Processing by RestaurantsController#edit_info as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (107.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:97:in `edit_info'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit_info.html.erb within layouts/application
  [1m[36mCategory Load (258.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/edit_info.html.erb:20
  Rendered restaurants/edit_info.html.erb within layouts/application (Duration: 308.4ms | Allocations: 8994)
  Rendered layout layouts/application.html.erb (Duration: 308.8ms | Allocations: 9085)
Completed 500 Internal Server Error in 562ms (ActiveRecord: 364.9ms | Allocations: 9809)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `profile_pic' for #<Restaurant id: 3, categoria: "chino", nombre: "Fumanchu", ruta_img_perfil: nil, ruta_img_fondo: "b9631b3a9d522f4f3f00.jpg", direccion: "c/123", telefono: "333333333", horario: "soleado", imported_id: nil>):
    21:             </div>
    22:             <div>
    23:             <%= form.label :profile_pic, "Foto de perfil" %>
    24:             <%= image_tag @restaurant.profile_pic if @restaurant.profile_pic.attached? %>
    25:             <br>
    26:             <%= form.file_field :profile_pic %>
    27:             </div>
  
app/views/restaurants/edit_info.html.erb:24
app/views/restaurants/edit_info.html.erb:9
=======
Started GET "/" for 127.0.0.1 at 2023-11-21 17:26:22 +0100
  [1m[36mActiveRecord::SchemaMigration Load (25.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (25.6ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (25.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (23.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 2563.9ms | Allocations: 145331)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1402)
  Rendered layouts/_sidenav.html.erb (Duration: 3.1ms | Allocations: 3447)
  Rendered layout layouts/application.html.erb (Duration: 2654.1ms | Allocations: 169699)
Completed 200 OK in 3514ms (Views: 2632.7ms | ActiveRecord: 401.8ms | Allocations: 212342)


Started GET "/" for 127.0.0.1 at 2023-11-21 17:27:36 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (50.2ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (25.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (28.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 81.3ms | Allocations: 11095)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1113)
  Rendered layouts/_sidenav.html.erb (Duration: 1.6ms | Allocations: 2719)
  Rendered layout layouts/application.html.erb (Duration: 173.6ms | Allocations: 39508)
Completed 200 OK in 332ms (Views: 100.4ms | ActiveRecord: 227.8ms | Allocations: 42023)


Started GET "/restaurants?filter=burger" for 127.0.0.1 at 2023-11-21 17:27:39 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"filter"=>"burger"}
  [1m[36mRestaurant Exists? (49.0ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."categoria" = $1[0m  [["categoria", "burger"]]
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 105.1ms | Allocations: 6754)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1101)
  Rendered layouts/_sidenav.html.erb (Duration: 2.5ms | Allocations: 2689)
  Rendered layout layouts/application.html.erb (Duration: 111.6ms | Allocations: 14495)
Completed 200 OK in 263ms (Views: 38.0ms | ActiveRecord: 221.7ms | Allocations: 17033)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-21 17:27:40 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (49.6ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 88.9ms | Allocations: 11059)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1101)
  Rendered layouts/_sidenav.html.erb (Duration: 19.1ms | Allocations: 2715)
  Rendered layout layouts/application.html.erb (Duration: 116.6ms | Allocations: 18835)
Completed 200 OK in 268ms (Views: 43.8ms | ActiveRecord: 221.1ms | Allocations: 21341)


Started GET "/categories" for 127.0.0.1 at 2023-11-21 17:30:07 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (50.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 56.2ms | Allocations: 4542)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1130)
  Rendered layouts/_sidenav.html.erb (Duration: 2.0ms | Allocations: 2714)
  Rendered layout layouts/application.html.erb (Duration: 62.1ms | Allocations: 12171)
Completed 200 OK in 109ms (Views: 11.9ms | ActiveRecord: 50.9ms | Allocations: 12677)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-21 17:31:39 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (48.5ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (25.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 79.5ms | Allocations: 11087)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  Rendered layouts/_sidenav.html.erb (Duration: 1.7ms | Allocations: 2689)
  Rendered layout layouts/application.html.erb (Duration: 92.3ms | Allocations: 25600)
Completed 200 OK in 245ms (Views: 19.6ms | ActiveRecord: 221.7ms | Allocations: 28191)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-21 17:32:16 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (51.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (25.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (23.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 78.7ms | Allocations: 11059)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1101)
  Rendered layouts/_sidenav.html.erb (Duration: 1.8ms | Allocations: 2689)
  Rendered layout layouts/application.html.erb (Duration: 93.4ms | Allocations: 25569)
Completed 200 OK in 248ms (Views: 21.5ms | ActiveRecord: 223.2ms | Allocations: 28074)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-21 17:32:37 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (49.1ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (25.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (22.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (23.0ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:62
  Rendered restaurants/index.html.erb within layouts/application (Duration: 79.0ms | Allocations: 11059)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  Rendered layouts/_sidenav.html.erb (Duration: 1.6ms | Allocations: 2689)
  Rendered layout layouts/application.html.erb (Duration: 92.1ms | Allocations: 25582)
Completed 200 OK in 242ms (Views: 20.8ms | ActiveRecord: 218.0ms | Allocations: 28072)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-21 17:38:26 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (25.9ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 82.0ms | Allocations: 13413)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1372)
  Rendered layouts/_sidenav.html.erb (Duration: 1.9ms | Allocations: 3424)
  Rendered layout layouts/application.html.erb (Duration: 93.1ms | Allocations: 37568)
Completed 200 OK in 871ms (Views: 19.9ms | ActiveRecord: 425.1ms | Allocations: 56106)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-21 17:43:03 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (24.4ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 106.7ms | Allocations: 13545)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1373)
  Rendered layouts/_sidenav.html.erb (Duration: 2.4ms | Allocations: 3424)
  Rendered layout layouts/application.html.erb (Duration: 127.5ms | Allocations: 44483)
Completed 200 OK in 453ms (Views: 30.2ms | ActiveRecord: 402.5ms | Allocations: 60317)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-21 17:43:52 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (50.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (25.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 81.8ms | Allocations: 11059)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1101)
  Rendered layouts/_sidenav.html.erb (Duration: 2.5ms | Allocations: 2689)
  Rendered layout layouts/application.html.erb (Duration: 99.2ms | Allocations: 25601)
Completed 200 OK in 255ms (Views: 26.1ms | ActiveRecord: 224.4ms | Allocations: 28096)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-21 17:48:36 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (49.0ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (23.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 79.8ms | Allocations: 11059)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1101)
  Rendered layouts/_sidenav.html.erb (Duration: 1.6ms | Allocations: 2689)
  Rendered layout layouts/application.html.erb (Duration: 97.6ms | Allocations: 25581)
Completed 200 OK in 248ms (Views: 25.2ms | ActiveRecord: 219.4ms | Allocations: 28071)


Started GET "/restaurants/7" for 127.0.0.1 at 2023-11-21 17:48:53 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (26.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 1.3ms | Allocations: 1378)
  [1m[36mDish Load (25.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 51.5ms | Allocations: 1805)
  Rendered layouts/_add_comment.html.erb (Duration: 1.0ms | Allocations: 716)
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 248.3ms | Allocations: 17429)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1112)
  Rendered layouts/_sidenav.html.erb (Duration: 1.4ms | Allocations: 2719)
  Rendered layout layouts/application.html.erb (Duration: 253.0ms | Allocations: 25070)
Completed 200 OK in 790ms (Views: 125.4ms | ActiveRecord: 532.5ms | Allocations: 45817)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-21 17:50:35 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (51.2ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 79.9ms | Allocations: 11090)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1101)
  Rendered layouts/_sidenav.html.erb (Duration: 1.7ms | Allocations: 2689)
  Rendered layout layouts/application.html.erb (Duration: 85.2ms | Allocations: 18831)
Completed 200 OK in 240ms (Views: 12.1ms | ActiveRecord: 224.1ms | Allocations: 21330)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-21 17:50:35 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (48.6ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 80.4ms | Allocations: 11060)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  Rendered layouts/_sidenav.html.erb (Duration: 1.7ms | Allocations: 2689)
  Rendered layout layouts/application.html.erb (Duration: 85.6ms | Allocations: 18798)
Completed 200 OK in 236ms (Views: 13.2ms | ActiveRecord: 219.3ms | Allocations: 21308)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-21 17:50:36 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (23.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 1.1ms | Allocations: 2267)
  [1m[36mDish Load (23.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 904)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 163.8ms | Allocations: 9331)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 534)
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 214.9ms | Allocations: 13232)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1100)
  Rendered layouts/_sidenav.html.erb (Duration: 1.6ms | Allocations: 2689)
  Rendered layout layouts/application.html.erb (Duration: 219.3ms | Allocations: 20796)
Completed 200 OK in 561ms (Views: 96.7ms | ActiveRecord: 441.9ms | Allocations: 43086)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-21 17:51:38 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 2.1ms | Allocations: 2952)
  [1m[36mDish Load (24.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 913)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 91.7ms | Allocations: 10163)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 684)
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 200.0ms | Allocations: 18652)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1374)
  Rendered layouts/_sidenav.html.erb (Duration: 2.4ms | Allocations: 3424)
  Rendered layout layouts/application.html.erb (Duration: 213.2ms | Allocations: 42616)
Completed 200 OK in 824ms (Views: 38.8ms | ActiveRecord: 727.6ms | Allocations: 68705)


Started GET "/restaurants/7" for 127.0.0.1 at 2023-11-21 17:51:41 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (22.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (22.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[35m (23.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 0.9ms | Allocations: 742)
  [1m[36mDish Load (23.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (24.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 25.1ms | Allocations: 486)
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 565)
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 80.6ms | Allocations: 7642)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1112)
  Rendered layouts/_sidenav.html.erb (Duration: 2.5ms | Allocations: 2719)
  Rendered layout layouts/application.html.erb (Duration: 87.1ms | Allocations: 15303)
Completed 200 OK in 393ms (Views: 15.2ms | ActiveRecord: 366.1ms | Allocations: 20230)


Started GET "/restaurants/7" for 127.0.0.1 at 2023-11-21 17:52:34 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (23.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (26.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 1.5ms | Allocations: 1418)
  [1m[36mDish Load (24.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 26.6ms | Allocations: 1778)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 711)
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 138.5ms | Allocations: 13365)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1373)
  Rendered layouts/_sidenav.html.erb (Duration: 2.2ms | Allocations: 3424)
  Rendered layout layouts/application.html.erb (Duration: 154.5ms | Allocations: 37335)
Completed 200 OK in 720ms (Views: 28.2ms | ActiveRecord: 632.5ms | Allocations: 58452)


Started GET "/restaurants/7" for 127.0.0.1 at 2023-11-21 17:52:42 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.5ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 1.0ms | Allocations: 1409)
  [1m[36mDish Load (24.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 26.9ms | Allocations: 1780)
  Rendered layouts/_add_comment.html.erb (Duration: 0.7ms | Allocations: 711)
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 141.7ms | Allocations: 13381)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1370)
  Rendered layouts/_sidenav.html.erb (Duration: 2.0ms | Allocations: 3424)
  Rendered layout layouts/application.html.erb (Duration: 154.9ms | Allocations: 37345)
Completed 200 OK in 715ms (Views: 28.9ms | ActiveRecord: 632.5ms | Allocations: 58572)


Started GET "/restaurants/7" for 127.0.0.1 at 2023-11-21 17:56:39 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 1.3ms | Allocations: 1408)
  [1m[36mDish Load (24.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 26.2ms | Allocations: 1778)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 711)
  [1m[35m (24.2ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 136.8ms | Allocations: 13360)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1370)
  Rendered layouts/_sidenav.html.erb (Duration: 11.9ms | Allocations: 3424)
  Rendered layout layouts/application.html.erb (Duration: 168.6ms | Allocations: 44093)
Completed 200 OK in 735ms (Views: 45.1ms | ActiveRecord: 634.6ms | Allocations: 65278)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-21 17:56:44 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 1.2ms | Allocations: 1745)
  [1m[36mDish Load (24.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 897)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 87.9ms | Allocations: 8935)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 536)
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 140.3ms | Allocations: 12316)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1102)
  Rendered layouts/_sidenav.html.erb (Duration: 1.6ms | Allocations: 2699)
  Rendered layout layouts/application.html.erb (Duration: 144.7ms | Allocations: 19902)
Completed 200 OK in 511ms (Views: 21.0ms | ActiveRecord: 473.9ms | Allocations: 29785)


Started GET "/restaurants/7" for 127.0.0.1 at 2023-11-21 17:57:17 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (25.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (25.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 0.8ms | Allocations: 735)
  [1m[36mDish Load (24.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 25.6ms | Allocations: 486)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 560)
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 78.1ms | Allocations: 4364)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1100)
  Rendered layouts/_sidenav.html.erb (Duration: 1.6ms | Allocations: 2689)
  Rendered layout layouts/application.html.erb (Duration: 92.1ms | Allocations: 18689)
Completed 200 OK in 400ms (Views: 18.7ms | ActiveRecord: 374.2ms | Allocations: 23606)


Started GET "/restaurants/7" for 127.0.0.1 at 2023-11-21 17:59:27 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (30.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 0.7ms | Allocations: 733)
  [1m[36mDish Load (24.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 25.5ms | Allocations: 501)
  Rendered layouts/_add_comment.html.erb (Duration: 0.4ms | Allocations: 559)
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 79.5ms | Allocations: 4377)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1100)
  Rendered layouts/_sidenav.html.erb (Duration: 2.0ms | Allocations: 2689)
  Rendered layout layouts/application.html.erb (Duration: 96.8ms | Allocations: 18703)
Completed 200 OK in 411ms (Views: 22.6ms | ActiveRecord: 380.7ms | Allocations: 23636)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-21 17:59:33 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (25.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (25.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 1.0ms | Allocations: 1737)
  [1m[36mDish Load (24.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 635)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 447)
  Rendered layouts/_comment.html.erb (Duration: 53.0ms | Allocations: 3368)
  Rendered layouts/_add_comment.html.erb (Duration: 0.4ms | Allocations: 534)
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 105.6ms | Allocations: 6739)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1100)
  Rendered layouts/_sidenav.html.erb (Duration: 2.0ms | Allocations: 2689)
  Rendered layout layouts/application.html.erb (Duration: 110.7ms | Allocations: 14303)
Completed 200 OK in 445ms (Views: 11.1ms | ActiveRecord: 426.2ms | Allocations: 19746)


Started GET "/restaurants/7" for 127.0.0.1 at 2023-11-21 18:01:01 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 1.0ms | Allocations: 1414)
  [1m[36mDish Load (25.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 26.1ms | Allocations: 1778)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 711)
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 138.4ms | Allocations: 13366)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1370)
  Rendered layouts/_sidenav.html.erb (Duration: 2.0ms | Allocations: 3424)
  Rendered layout layouts/application.html.erb (Duration: 149.7ms | Allocations: 37327)
Completed 200 OK in 712ms (Views: 22.5ms | ActiveRecord: 639.3ms | Allocations: 58496)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-21 18:01:03 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 0.9ms | Allocations: 1744)
  [1m[36mDish Load (24.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 897)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 89.2ms | Allocations: 8876)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 540)
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 141.0ms | Allocations: 12260)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1112)
  Rendered layouts/_sidenav.html.erb (Duration: 1.8ms | Allocations: 2719)
  Rendered layout layouts/application.html.erb (Duration: 145.8ms | Allocations: 19919)
Completed 200 OK in 505ms (Views: 21.5ms | ActiveRecord: 474.4ms | Allocations: 29797)


Started GET "/restaurants/Default-restaurant-img" for 127.0.0.1 at 2023-11-21 18:01:04 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"Default-restaurant-img"}
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
Redirected to http://localhost:3000/not_found
Completed 302 Found in 26ms (ActiveRecord: 24.9ms | Allocations: 635)


Started GET "/not_found" for 127.0.0.1 at 2023-11-21 18:01:04 +0100
Processing by ErrorsController#not_found as HTML
  Parameters: {"unmatched"=>"not_found"}
  Rendering layout layouts/application.html.erb
  Rendering errors/not_found.html.erb within layouts/application
  Rendered errors/not_found.html.erb within layouts/application (Duration: 0.2ms | Allocations: 91)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1157)
  Rendered layouts/_sidenav.html.erb (Duration: 1.6ms | Allocations: 2709)
  Rendered layout layouts/application.html.erb (Duration: 5.6ms | Allocations: 8172)
Completed 404 Not Found in 7ms (Views: 6.6ms | ActiveRecord: 0.0ms | Allocations: 8636)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-21 18:01:44 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (30.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 1.8ms | Allocations: 2435)
  [1m[36mDish Load (24.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 913)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 90.1ms | Allocations: 10176)
  Rendered layouts/_add_comment.html.erb (Duration: 0.7ms | Allocations: 686)
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 200.8ms | Allocations: 18156)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1375)
  Rendered layouts/_sidenav.html.erb (Duration: 2.1ms | Allocations: 3424)
  Rendered layout layouts/application.html.erb (Duration: 213.3ms | Allocations: 42124)
Completed 200 OK in 835ms (Views: 36.3ms | ActiveRecord: 741.2ms | Allocations: 68262)


Started GET "/restaurants/Default-restaurant-img" for 127.0.0.1 at 2023-11-21 18:01:45 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"Default-restaurant-img"}
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
Redirected to http://localhost:3000/not_found
Completed 302 Found in 26ms (ActiveRecord: 25.1ms | Allocations: 542)


Started GET "/not_found" for 127.0.0.1 at 2023-11-21 18:01:45 +0100
Processing by ErrorsController#not_found as HTML
  Parameters: {"unmatched"=>"not_found"}
  Rendering layout layouts/application.html.erb
  Rendering errors/not_found.html.erb within layouts/application
  Rendered errors/not_found.html.erb within layouts/application (Duration: 0.2ms | Allocations: 89)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1145)
  Rendered layouts/_sidenav.html.erb (Duration: 2.3ms | Allocations: 2690)
  Rendered layout layouts/application.html.erb (Duration: 6.7ms | Allocations: 8081)
Completed 404 Not Found in 8ms (Views: 7.4ms | ActiveRecord: 0.0ms | Allocations: 8542)


Started GET "/restaurants/7" for 127.0.0.1 at 2023-11-21 18:01:46 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.5ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 0.6ms | Allocations: 739)
  [1m[36mDish Load (24.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 25.6ms | Allocations: 487)
  Rendered layouts/_add_comment.html.erb (Duration: 0.4ms | Allocations: 559)
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 80.2ms | Allocations: 7614)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1100)
  Rendered layouts/_sidenav.html.erb (Duration: 1.4ms | Allocations: 2689)
  Rendered layout layouts/application.html.erb (Duration: 84.9ms | Allocations: 15178)
Completed 200 OK in 393ms (Views: 10.5ms | ActiveRecord: 375.5ms | Allocations: 20099)


Started GET "/restaurants/%3Cimg%20src=" for 127.0.0.1 at 2023-11-21 18:01:46 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"<img src="}
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
Redirected to http://localhost:3000/not_found
Completed 302 Found in 26ms (ActiveRecord: 24.9ms | Allocations: 528)


Started GET "/not_found" for 127.0.0.1 at 2023-11-21 18:01:46 +0100
Processing by ErrorsController#not_found as HTML
  Parameters: {"unmatched"=>"not_found"}
  Rendering layout layouts/application.html.erb
  Rendering errors/not_found.html.erb within layouts/application
  Rendered errors/not_found.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1139)
  Rendered layouts/_sidenav.html.erb (Duration: 4.4ms | Allocations: 2715)
  Rendered layout layouts/application.html.erb (Duration: 8.9ms | Allocations: 7996)
Completed 404 Not Found in 9ms (Views: 9.2ms | ActiveRecord: 0.0ms | Allocations: 8233)


Started GET "/restaurants/%3Cimg%20src=" for 127.0.0.1 at 2023-11-21 18:01:57 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"<img src="}
  [1m[36mRestaurant Load (25.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
Redirected to http://localhost:3000/not_found
Completed 302 Found in 27ms (ActiveRecord: 25.9ms | Allocations: 528)


Started GET "/not_found" for 127.0.0.1 at 2023-11-21 18:01:57 +0100
Processing by ErrorsController#not_found as HTML
  Parameters: {"unmatched"=>"not_found"}
  Rendering layout layouts/application.html.erb
  Rendering errors/not_found.html.erb within layouts/application
  Rendered errors/not_found.html.erb within layouts/application (Duration: 0.1ms | Allocations: 6)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1144)
  Rendered layouts/_sidenav.html.erb (Duration: 2.0ms | Allocations: 2707)
  Rendered layout layouts/application.html.erb (Duration: 5.9ms | Allocations: 8018)
Completed 404 Not Found in 6ms (Views: 6.2ms | ActiveRecord: 0.0ms | Allocations: 8255)


Started GET "/restaurants/%3Cimg%20src=" for 127.0.0.1 at 2023-11-21 18:01:57 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"<img src="}
  [1m[36mRestaurant Load (30.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
Redirected to http://localhost:3000/not_found
Completed 302 Found in 32ms (ActiveRecord: 30.4ms | Allocations: 528)


Started GET "/not_found" for 127.0.0.1 at 2023-11-21 18:01:57 +0100
Processing by ErrorsController#not_found as HTML
  Parameters: {"unmatched"=>"not_found"}
  Rendering layout layouts/application.html.erb
  Rendering errors/not_found.html.erb within layouts/application
  Rendered errors/not_found.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1143)
  Rendered layouts/_sidenav.html.erb (Duration: 1.4ms | Allocations: 2696)
  Rendered layout layouts/application.html.erb (Duration: 6.1ms | Allocations: 8026)
Completed 404 Not Found in 7ms (Views: 6.4ms | ActiveRecord: 0.0ms | Allocations: 8262)


Started GET "/restaurants/7" for 127.0.0.1 at 2023-11-21 18:02:40 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (26.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 1.1ms | Allocations: 1413)
  [1m[36mDish Load (25.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 27.0ms | Allocations: 1778)
  Rendered layouts/_add_comment.html.erb (Duration: 0.9ms | Allocations: 711)
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 141.5ms | Allocations: 13366)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1370)
  Rendered layouts/_sidenav.html.erb (Duration: 2.5ms | Allocations: 3424)
  Rendered layout layouts/application.html.erb (Duration: 154.3ms | Allocations: 37374)
Completed 200 OK in 723ms (Views: 27.2ms | ActiveRecord: 638.2ms | Allocations: 58555)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-21 18:02:42 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.5ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 7.7ms | Allocations: 2276)
  [1m[36mDish Load (24.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 897)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 87.8ms | Allocations: 8912)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 540)
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 147.0ms | Allocations: 12828)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1112)
  Rendered layouts/_sidenav.html.erb (Duration: 2.0ms | Allocations: 2719)
  Rendered layout layouts/application.html.erb (Duration: 152.6ms | Allocations: 20487)
Completed 200 OK in 543ms (Views: 31.4ms | ActiveRecord: 473.0ms | Allocations: 30346)


Started GET "/restaurants/7" for 127.0.0.1 at 2023-11-21 18:05:01 +0100
  [1m[36mActiveRecord::SchemaMigration Load (25.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (26.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 529.7ms | Allocations: 120252)
  [1m[36mDish Load (25.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (24.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 52.0ms | Allocations: 1812)
  Rendered layouts/_add_comment.html.erb (Duration: 0.9ms | Allocations: 714)
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 729.8ms | Allocations: 136672)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1393)
  Rendered layouts/_sidenav.html.erb (Duration: 2.6ms | Allocations: 3446)
  Rendered layout layouts/application.html.erb (Duration: 743.0ms | Allocations: 160793)
Completed 200 OK in 1461ms (Views: 618.2ms | ActiveRecord: 691.7ms | Allocations: 205320)


Started GET "/categories" for 127.0.0.1 at 2023-11-21 18:06:22 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (51.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 92.3ms | Allocations: 8717)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1130)
  Rendered layouts/_sidenav.html.erb (Duration: 1.7ms | Allocations: 2700)
  Rendered layout layouts/application.html.erb (Duration: 97.1ms | Allocations: 16328)
Completed 200 OK in 100ms (Views: 21.2ms | ActiveRecord: 76.4ms | Allocations: 17991)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-21 18:06:23 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (24.8ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (25.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 80.0ms | Allocations: 12016)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1101)
  Rendered layouts/_sidenav.html.erb (Duration: 1.6ms | Allocations: 2689)
  Rendered layout layouts/application.html.erb (Duration: 85.0ms | Allocations: 19775)
Completed 200 OK in 250ms (Views: 12.4ms | ActiveRecord: 223.4ms | Allocations: 28112)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-21 18:06:40 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (28.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (25.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (25.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 1.4ms | Allocations: 2267)
  [1m[36mDish Load (24.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 902)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 110.7ms | Allocations: 9305)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 536)
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 163.3ms | Allocations: 13210)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1100)
  Rendered layouts/_sidenav.html.erb (Duration: 2.2ms | Allocations: 2689)
  Rendered layout layouts/application.html.erb (Duration: 168.8ms | Allocations: 20774)
Completed 200 OK in 516ms (Views: 45.7ms | ActiveRecord: 452.3ms | Allocations: 32800)


Started GET "/restaurants/1" for 127.0.0.1 at 2023-11-21 18:06:43 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 4.8ms | Allocations: 3056)
  [1m[36mDish Load (24.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (24.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 627)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 447)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 447)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 449)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 447)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 447)
  Rendered layouts/_comment.html.erb (Duration: 56.9ms | Allocations: 10648)
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 536)
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 115.4ms | Allocations: 19708)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1104)
  Rendered layouts/_sidenav.html.erb (Duration: 1.5ms | Allocations: 2699)
  Rendered layout layouts/application.html.erb (Duration: 120.4ms | Allocations: 27274)
Completed 200 OK in 451ms (Views: 22.3ms | ActiveRecord: 420.4ms | Allocations: 32960)


Started GET "/restaurants/1" for 127.0.0.1 at 2023-11-21 18:10:07 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 2.9ms | Allocations: 3732)
  [1m[36mDish Load (25.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 881)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 447)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 449)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 447)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 447)
  Rendered layouts/_comment.html.erb (Duration: 93.7ms | Allocations: 17415)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 682)
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 208.3ms | Allocations: 34187)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1362)
  Rendered layouts/_sidenav.html.erb (Duration: 2.3ms | Allocations: 3404)
  Rendered layout layouts/application.html.erb (Duration: 228.8ms | Allocations: 64999)
Completed 200 OK in 852ms (Views: 53.2ms | ActiveRecord: 732.6ms | Allocations: 91311)


Started GET "/restaurants/1" for 127.0.0.1 at 2023-11-21 18:10:33 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 1.7ms | Allocations: 2199)
  [1m[36mDish Load (24.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 623)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 447)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 447)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 449)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 447)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 447)
  Rendered layouts/_comment.html.erb (Duration: 57.3ms | Allocations: 10615)
  Rendered layouts/_add_comment.html.erb (Duration: 0.4ms | Allocations: 534)
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 111.7ms | Allocations: 18812)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1104)
  Rendered layouts/_sidenav.html.erb (Duration: 1.5ms | Allocations: 2699)
  Rendered layout layouts/application.html.erb (Duration: 127.4ms | Allocations: 33145)
Completed 200 OK in 461ms (Views: 28.7ms | ActiveRecord: 424.1ms | Allocations: 38819)


Started GET "/restaurants/1" for 127.0.0.1 at 2023-11-21 18:11:12 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (29.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 2.9ms | Allocations: 3743)
  [1m[36mDish Load (24.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 881)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 447)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 449)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 447)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 447)
  Rendered layouts/_comment.html.erb (Duration: 91.4ms | Allocations: 17415)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 682)
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 206.5ms | Allocations: 34195)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1362)
  Rendered layouts/_sidenav.html.erb (Duration: 2.1ms | Allocations: 3404)
  Rendered layout layouts/application.html.erb (Duration: 217.7ms | Allocations: 57941)
Completed 200 OK in 843ms (Views: 42.9ms | ActiveRecord: 738.1ms | Allocations: 84275)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-21 18:11:23 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (30.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 1.4ms | Allocations: 2266)
  [1m[36mDish Load (24.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 635)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 447)
  Rendered layouts/_comment.html.erb (Duration: 53.3ms | Allocations: 3366)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 534)
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 105.6ms | Allocations: 7268)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1100)
  Rendered layouts/_sidenav.html.erb (Duration: 1.4ms | Allocations: 2689)
  Rendered layout layouts/application.html.erb (Duration: 110.0ms | Allocations: 14832)
Completed 200 OK in 450ms (Views: 11.0ms | ActiveRecord: 430.7ms | Allocations: 20308)


Started GET "/nearme" for 127.0.0.1 at 2023-11-21 18:11:26 +0100
Processing by NearmeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering nearme/index.html.erb within layouts/application
  Rendered nearme/index.html.erb within layouts/application (Duration: 0.2ms | Allocations: 88)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1145)
  Rendered layouts/_sidenav.html.erb (Duration: 4.3ms | Allocations: 2690)
  Rendered layout layouts/application.html.erb (Duration: 8.4ms | Allocations: 8092)
Completed 200 OK in 9ms (Views: 8.8ms | ActiveRecord: 0.0ms | Allocations: 8570)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-21 18:11:27 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (49.5ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (41.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 107.8ms | Allocations: 13512)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1105)
  Rendered layouts/_sidenav.html.erb (Duration: 1.8ms | Allocations: 2697)
  Rendered layout layouts/application.html.erb (Duration: 113.4ms | Allocations: 21296)
Completed 200 OK in 286ms (Views: 15.6ms | ActiveRecord: 262.7ms | Allocations: 25558)


Started GET "/restaurants/7" for 127.0.0.1 at 2023-11-21 18:11:29 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 0.6ms | Allocations: 737)
  [1m[36mDish Load (24.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 25.8ms | Allocations: 486)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 561)
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 78.4ms | Allocations: 4368)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1100)
  Rendered layouts/_sidenav.html.erb (Duration: 1.7ms | Allocations: 2689)
  Rendered layout layouts/application.html.erb (Duration: 83.0ms | Allocations: 11932)
Completed 200 OK in 386ms (Views: 8.9ms | ActiveRecord: 371.0ms | Allocations: 16856)


Started GET "/restaurants/1" for 127.0.0.1 at 2023-11-21 18:12:58 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.5ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 2.3ms | Allocations: 3749)
  [1m[36mDish Load (24.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.4ms | Allocations: 881)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 452)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 447)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 449)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 447)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 447)
  Rendered layouts/_comment.html.erb (Duration: 113.5ms | Allocations: 17416)
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 688)
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 236.9ms | Allocations: 34184)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1370)
  Rendered layouts/_sidenav.html.erb (Duration: 2.1ms | Allocations: 3424)
  Rendered layout layouts/application.html.erb (Duration: 249.2ms | Allocations: 58121)
Completed 200 OK in 867ms (Views: 72.9ms | ActiveRecord: 736.4ms | Allocations: 84444)


Started GET "/restaurants/1" for 127.0.0.1 at 2023-11-21 18:15:46 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (25.1ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (22.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 1.8ms | Allocations: 2204)
  [1m[36mDish Load (24.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 625)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 447)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 447)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 449)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 447)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 447)
  Rendered layouts/_comment.html.erb (Duration: 59.9ms | Allocations: 10623)
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 536)
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 115.7ms | Allocations: 18830)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1100)
  Rendered layouts/_sidenav.html.erb (Duration: 1.7ms | Allocations: 2689)
  Rendered layout layouts/application.html.erb (Duration: 130.2ms | Allocations: 33140)
Completed 200 OK in 466ms (Views: 31.3ms | ActiveRecord: 424.5ms | Allocations: 38808)


>>>>>>> 39f4c3fe770a202d7a13fb7c3c5b80a7751c9467
Started GET "/" for 127.0.0.1 at 2023-11-21 20:12:19 +0100
  [1m[36mActiveRecord::SchemaMigration Load (25.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (25.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 508.7ms | Allocations: 222854)
  Rendered layouts/_header.html.erb (Duration: 3.3ms | Allocations: 1403)
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 194.4ms | Allocations: 21035)
  Rendered layout layouts/application.html.erb (Duration: 725.2ms | Allocations: 267387)
Completed 200 OK in 1620ms (Views: 528.9ms | ActiveRecord: 732.1ms | Allocations: 322534)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-21 20:12:24 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"gari"}
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (25.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (24.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-21 19:12:25.012965')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-21 19:12:25.038465')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-21 19:12:25.063216')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 5.1ms | Allocations: 4454)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1106)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.2ms | Allocations: 4082)
  Rendered layout layouts/application.html.erb (Duration: 36.4ms | Allocations: 13422)
Completed 200 OK in 353ms (Views: 12.1ms | ActiveRecord: 301.0ms | Allocations: 25306)


Started GET "/logout" for 127.0.0.1 at 2023-11-21 20:12:28 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 502)


Started GET "/" for 127.0.0.1 at 2023-11-21 20:12:28 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (49.6ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 79.3ms | Allocations: 11124)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1102)
  Rendered layouts/_sidenav.html.erb (Duration: 2.0ms | Allocations: 2692)
  Rendered layout layouts/application.html.erb (Duration: 85.0ms | Allocations: 18897)
Completed 200 OK in 237ms (Views: 12.3ms | ActiveRecord: 222.1ms | Allocations: 21465)


Started GET "/login" for 127.0.0.1 at 2023-11-21 20:12:29 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 2.3ms | Allocations: 3016)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1102)
  Rendered layouts/_sidenav.html.erb (Duration: 1.6ms | Allocations: 2690)
  Rendered layout layouts/application.html.erb (Duration: 7.3ms | Allocations: 10594)
Completed 200 OK in 8ms (Views: 7.8ms | ActiveRecord: 0.0ms | Allocations: 11056)


Started POST "/login" for 127.0.0.1 at 2023-11-21 20:12:33 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"juan", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (26.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 220ms (ActiveRecord: 26.5ms | Allocations: 949)


Started GET "/" for 127.0.0.1 at 2023-11-21 20:12:33 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (50.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 79.5ms | Allocations: 11112)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1102)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.1ms | Allocations: 4173)
  Rendered layout layouts/application.html.erb (Duration: 135.8ms | Allocations: 20416)
Completed 200 OK in 289ms (Views: 13.2ms | ActiveRecord: 272.7ms | Allocations: 23013)


Started GET "/restaurants/7" for 127.0.0.1 at 2023-11-21 20:12:38 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.8ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.1ms | Allocations: 1641)
  [1m[36mDish Load (25.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 51.9ms | Allocations: 1919)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 719)
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 247.7ms | Allocations: 18591)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1106)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.2ms | Allocations: 4190)
  Rendered layout layouts/application.html.erb (Duration: 308.2ms | Allocations: 27667)
Completed 200 OK in 747ms (Views: 81.6ms | ActiveRecord: 582.9ms | Allocations: 34452)


Started GET "/users/juan" for 127.0.0.1 at 2023-11-21 20:13:04 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"juan"}
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (25.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (25.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-21 19:13:04.792276')[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-21 19:13:04.817220')[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-21 19:13:04.842125')[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 3.0ms | Allocations: 3239)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1358)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 30.4ms | Allocations: 5110)
  Rendered layout layouts/application.html.erb (Duration: 43.6ms | Allocations: 28706)
Completed 200 OK in 508ms (Views: 19.7ms | ActiveRecord: 428.8ms | Allocations: 52027)


Started GET "/logout" for 127.0.0.1 at 2023-11-21 20:13:06 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 400)


Started GET "/" for 127.0.0.1 at 2023-11-21 20:13:06 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (24.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 107.6ms | Allocations: 13526)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1107)
  Rendered layouts/_sidenav.html.erb (Duration: 2.1ms | Allocations: 2707)
  Rendered layout layouts/application.html.erb (Duration: 117.4ms | Allocations: 21312)
Completed 200 OK in 329ms (Views: 19.0ms | ActiveRecord: 299.4ms | Allocations: 32296)


Started GET "/login" for 127.0.0.1 at 2023-11-21 20:13:07 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 2.2ms | Allocations: 2966)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1102)
  Rendered layouts/_sidenav.html.erb (Duration: 1.9ms | Allocations: 2698)
  Rendered layout layouts/application.html.erb (Duration: 7.1ms | Allocations: 10563)
Completed 200 OK in 8ms (Views: 7.5ms | ActiveRecord: 0.0ms | Allocations: 11005)


Started POST "/login" for 127.0.0.1 at 2023-11-21 20:13:11 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"Atreides", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (26.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 218ms (ActiveRecord: 26.2ms | Allocations: 942)


Started GET "/" for 127.0.0.1 at 2023-11-21 20:13:12 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (50.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 79.2ms | Allocations: 11126)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1106)
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.1ms | Allocations: 4731)
  Rendered layout layouts/application.html.erb (Duration: 136.5ms | Allocations: 21012)
Completed 200 OK in 290ms (Views: 13.4ms | ActiveRecord: 272.9ms | Allocations: 23614)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-21 20:13:15 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.6ms | Allocations: 2906)
  [1m[36mDish Load (24.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 890)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 453)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 454)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 81.1ms | Allocations: 7356)
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 689)
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 452)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 26.8ms | Allocations: 1961)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 269.1ms | Allocations: 22308)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1101)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.3ms | Allocations: 4609)
  Rendered layout layouts/application.html.erb (Duration: 300.3ms | Allocations: 31798)
Completed 200 OK in 725ms (Views: 24.3ms | ActiveRecord: 657.0ms | Allocations: 48679)


Started GET "/restaurants/3/edit" for 127.0.0.1 at 2023-11-21 20:13:23 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:56:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  [1m[36mCategory Load (24.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 29.8ms | Allocations: 4453)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 30.8ms | Allocations: 4777)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1101)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.0ms | Allocations: 4733)
  Rendered layout layouts/application.html.erb (Duration: 86.7ms | Allocations: 14390)
Completed 200 OK in 139ms (Views: 12.7ms | ActiveRecord: 99.1ms | Allocations: 15148)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-21 20:14:13 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.5ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.6ms | Allocations: 2913)
  [1m[36mDish Load (25.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 886)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 453)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 454)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 116.6ms | Allocations: 13677)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 689)
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 27.5ms | Allocations: 1945)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 305.6ms | Allocations: 28591)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1364)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 55.6ms | Allocations: 8072)
  Rendered layout layouts/application.html.erb (Duration: 370.3ms | Allocations: 57069)
Completed 200 OK in 991ms (Views: 43.7ms | ActiveRecord: 888.2ms | Allocations: 86297)


Started GET "/restaurants/3/edit" for 127.0.0.1 at 2023-11-21 20:14:16 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:56:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  [1m[36mCategory Load (24.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 59.1ms | Allocations: 6391)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 59.8ms | Allocations: 6712)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1105)
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.3ms | Allocations: 4737)
  Rendered layout layouts/application.html.erb (Duration: 117.0ms | Allocations: 16351)
Completed 200 OK in 169ms (Views: 17.5ms | ActiveRecord: 125.0ms | Allocations: 17112)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-21 20:14:46 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (26.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (24.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-21 19:14:46.387834')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (24.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-21 19:14:46.412887')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-21 19:14:46.437679')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (24.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-21 19:14:46.513874')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (25.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-21 19:14:46.565616')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-21 19:14:46.590763')[0m  [["reviewable_id", 16], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 3.0ms | Allocations: 3135)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1106)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 3.6ms | Allocations: 4494)
  Rendered layout layouts/application.html.erb (Duration: 9.9ms | Allocations: 12504)
Completed 200 OK in 475ms (Views: 10.3ms | ActiveRecord: 423.3ms | Allocations: 23160)


Started GET "/logout" for 127.0.0.1 at 2023-11-21 20:14:47 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 421)


Started GET "/" for 127.0.0.1 at 2023-11-21 20:14:47 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (50.0ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 81.1ms | Allocations: 11989)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1102)
  Rendered layouts/_sidenav.html.erb (Duration: 2.1ms | Allocations: 2692)
  Rendered layout layouts/application.html.erb (Duration: 86.9ms | Allocations: 19779)
Completed 200 OK in 240ms (Views: 14.2ms | ActiveRecord: 221.9ms | Allocations: 22955)


Started GET "/login" for 127.0.0.1 at 2023-11-21 20:14:49 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 2.0ms | Allocations: 2946)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1103)
  Rendered layouts/_sidenav.html.erb (Duration: 1.9ms | Allocations: 2690)
  Rendered layout layouts/application.html.erb (Duration: 7.3ms | Allocations: 10525)
Completed 200 OK in 8ms (Views: 7.7ms | ActiveRecord: 0.0ms | Allocations: 10966)


Started POST "/login" for 127.0.0.1 at 2023-11-21 20:14:52 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"gari", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 220ms (ActiveRecord: 25.0ms | Allocations: 863)


Started GET "/" for 127.0.0.1 at 2023-11-21 20:14:52 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (50.8ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 79.1ms | Allocations: 11111)
  Rendered layouts/_header.html.erb (Duration: 3.2ms | Allocations: 1102)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.3ms | Allocations: 4189)
  Rendered layout layouts/application.html.erb (Duration: 138.2ms | Allocations: 20449)
Completed 200 OK in 291ms (Views: 15.6ms | ActiveRecord: 272.1ms | Allocations: 23049)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-21 20:14:54 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.6ms | Allocations: 2522)
  [1m[36mDish Load (24.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 631)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 53.6ms | Allocations: 3644)
  Rendered layouts/_add_comment.html.erb (Duration: 0.4ms | Allocations: 543)
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 156.2ms | Allocations: 8097)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1105)
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.3ms | Allocations: 4189)
  Rendered layout layouts/application.html.erb (Duration: 213.7ms | Allocations: 17189)
Completed 200 OK in 573ms (Views: 15.9ms | ActiveRecord: 523.9ms | Allocations: 22850)


Started GET "/restaurants/7" for 127.0.0.1 at 2023-11-21 20:15:01 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (25.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (25.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.2ms | Allocations: 987)
  [1m[36mDish Load (25.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 25.9ms | Allocations: 500)
  Rendered layouts/_add_comment.html.erb (Duration: 0.4ms | Allocations: 562)
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 130.0ms | Allocations: 4902)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1101)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.2ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 186.6ms | Allocations: 13957)
Completed 200 OK in 522ms (Views: 12.3ms | ActiveRecord: 477.0ms | Allocations: 19061)


Started GET "/restaurants/7" for 127.0.0.1 at 2023-11-21 20:16:10 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (26.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 27.3ms | Allocations: 3760)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 28.1ms | Allocations: 4598)
  Rendered layout layouts/application.html.erb (Duration: 28.2ms | Allocations: 4690)
Completed 500 Internal Server Error in 602ms (ActiveRecord: 535.7ms | Allocations: 26055)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `esAdmin?' for "gari":String):
    23:     
    24:     <div class="restaurants_header_buttons_container">
    25:       <div>
    26:         <% if session[:username].present? and (user_is_owner?(locals[:restaurant].id) or session[:username].esAdmin?) %>
    27:           <!-- Si el restaurante tiene su imported_id distinto de nil, significa que es un restaurante importado y no se puede editar -->
    28:           <div style=" display: flex; flex-direction: row; gap: 20px;">
    29:             <% if locals[:restaurant].imported_id.nil? %>
  
app/views/restaurants/_header.html.erb:26
app/views/restaurants/show.html.erb:2
Started GET "/restaurants/7" for 127.0.0.1 at 2023-11-21 20:16:19 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (25.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 27.3ms | Allocations: 2657)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 28.4ms | Allocations: 3493)
  Rendered layout layouts/application.html.erb (Duration: 28.5ms | Allocations: 3585)
Completed 500 Internal Server Error in 596ms (ActiveRecord: 535.7ms | Allocations: 24982)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `esAdmin?' for #<ActionView::Base:0x0000000002b020>):
    23:     
    24:     <div class="restaurants_header_buttons_container">
    25:       <div>
    26:         <% if session[:username].present? and (user_is_owner?(locals[:restaurant].id) or esAdmin?) %>
    27:           <!-- Si el restaurante tiene su imported_id distinto de nil, significa que es un restaurante importado y no se puede editar -->
    28:           <div style=" display: flex; flex-direction: row; gap: 20px;">
    29:             <% if locals[:restaurant].imported_id.nil? %>
  
app/views/restaurants/_header.html.erb:26
app/views/restaurants/show.html.erb:2
Started GET "/restaurants/7" for 127.0.0.1 at 2023-11-21 20:17:19 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.5ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.1ms | Allocations: 2657)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 27.1ms | Allocations: 3491)
  Rendered layout layouts/application.html.erb (Duration: 27.2ms | Allocations: 3583)
Completed 500 Internal Server Error in 594ms (ActiveRecord: 532.7ms | Allocations: 24908)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `soyAdmin?' for #<ActionView::Base:0x00000000031f38>):
    23:     
    24:     <div class="restaurants_header_buttons_container">
    25:       <div>
    26:         <% if session[:username].present? and (user_is_owner?(locals[:restaurant].id) or soyAdmin?) %>
    27:           <!-- Si el restaurante tiene su imported_id distinto de nil, significa que es un restaurante importado y no se puede editar -->
    28:           <div style=" display: flex; flex-direction: row; gap: 20px;">
    29:             <% if locals[:restaurant].imported_id.nil? %>
  
app/views/restaurants/_header.html.erb:26
app/views/restaurants/show.html.erb:2
Started GET "/restaurants/7" for 127.0.0.1 at 2023-11-21 20:17:38 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.6ms | Allocations: 2655)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 27.4ms | Allocations: 3491)
  Rendered layout layouts/application.html.erb (Duration: 27.6ms | Allocations: 3583)
Completed 500 Internal Server Error in 590ms (ActiveRecord: 531.2ms | Allocations: 24964)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `soyAdmin?' for #<ActionView::Base:0x00000000038ea0>):
    23:     
    24:     <div class="restaurants_header_buttons_container">
    25:       <div>
    26:         <% if session[:username].present? and (user_is_owner?(locals[:restaurant].id) or soyAdmin?()) %>
    27:           <!-- Si el restaurante tiene su imported_id distinto de nil, significa que es un restaurante importado y no se puede editar -->
    28:           <div style=" display: flex; flex-direction: row; gap: 20px;">
    29:             <% if locals[:restaurant].imported_id.nil? %>
  
app/views/restaurants/_header.html.erb:26
app/views/restaurants/show.html.erb:2
Started GET "/restaurants/7" for 127.0.0.1 at 2023-11-21 20:18:29 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 36.6ms | Allocations: 2660)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 38.3ms | Allocations: 3496)
  Rendered layout layouts/application.html.erb (Duration: 39.3ms | Allocations: 3588)
Completed 500 Internal Server Error in 624ms (ActiveRecord: 533.5ms | Allocations: 24908)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `soyadmin?' for #<ActionView::Base:0x0000000003fde0>):
    23:     
    24:     <div class="restaurants_header_buttons_container">
    25:       <div>
    26:         <% if session[:username].present? and (user_is_owner?(locals[:restaurant].id) or soyadmin?) %>
    27:           <!-- Si el restaurante tiene su imported_id distinto de nil, significa que es un restaurante importado y no se puede editar -->
    28:           <div style=" display: flex; flex-direction: row; gap: 20px;">
    29:             <% if locals[:restaurant].imported_id.nil? %>
  
app/views/restaurants/_header.html.erb:26
app/views/restaurants/show.html.erb:2
Started GET "/restaurants/7" for 127.0.0.1 at 2023-11-21 20:18:35 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 85.5ms | Allocations: 7438)
  [1m[36mDish Load (24.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (34.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 27.9ms | Allocations: 1889)
  Rendered layouts/_add_comment.html.erb (Duration: 0.9ms | Allocations: 714)
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 263.0ms | Allocations: 19738)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1372)
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 80.2ms | Allocations: 7644)
  Rendered layout layouts/application.html.erb (Duration: 353.4ms | Allocations: 47953)
Completed 200 OK in 958ms (Views: 45.2ms | ActiveRecord: 821.9ms | Allocations: 69351)


Started GET "/restaurants/7/edit" for 127.0.0.1 at 2023-11-21 20:18:40 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:56:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  [1m[36mCategory Load (24.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 55.9ms | Allocations: 6388)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 56.6ms | Allocations: 6709)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1101)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.5ms | Allocations: 4198)
  Rendered layout layouts/application.html.erb (Duration: 113.1ms | Allocations: 15787)
Completed 200 OK in 165ms (Views: 14.2ms | ActiveRecord: 124.4ms | Allocations: 16544)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-21 20:18:47 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"gari"}
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (26.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-21 19:18:47.685615')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-21 19:18:47.710867')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-21 19:18:47.736189')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 2.8ms | Allocations: 3147)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1102)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.1ms | Allocations: 4072)
  Rendered layout layouts/application.html.erb (Duration: 35.0ms | Allocations: 12083)
Completed 200 OK in 297ms (Views: 11.2ms | ActiveRecord: 250.4ms | Allocations: 18768)


Started GET "/admin" for 127.0.0.1 at 2023-11-21 20:18:48 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (51.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-21 19:18:48.313885')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-21 19:18:48.365646')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-21 19:18:48.392287')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (25.8ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:12
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 27.1ms | Allocations: 1370)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1127)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.2ms | Allocations: 4175)
  Rendered layout layouts/application.html.erb (Duration: 84.6ms | Allocations: 10853)
Completed 200 OK in 217ms (Views: 10.2ms | ActiveRecord: 203.4ms | Allocations: 13187)


Started GET "/categories" for 127.0.0.1 at 2023-11-21 20:18:52 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 78.4ms | Allocations: 5022)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1127)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 31.0ms | Allocations: 4096)
  Rendered layout layouts/application.html.erb (Duration: 112.4ms | Allocations: 14017)
Completed 200 OK in 113ms (Views: 38.9ms | ActiveRecord: 73.9ms | Allocations: 14505)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-21 20:18:53 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (24.4ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 80.6ms | Allocations: 12009)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1106)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.7ms | Allocations: 4201)
  Rendered layout layouts/application.html.erb (Duration: 137.0ms | Allocations: 21331)
Completed 200 OK in 316ms (Views: 14.7ms | ActiveRecord: 296.3ms | Allocations: 26091)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-21 20:18:56 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (49.8ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 80.2ms | Allocations: 11134)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1102)
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.9ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 137.0ms | Allocations: 20368)
Completed 200 OK in 289ms (Views: 14.9ms | ActiveRecord: 270.7ms | Allocations: 22923)


Started GET "/nearme" for 127.0.0.1 at 2023-11-21 20:18:57 +0100
Processing by NearmeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering nearme/index.html.erb within layouts/application
  Rendered nearme/index.html.erb within layouts/application (Duration: 0.2ms | Allocations: 89)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1146)
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 78.3ms | Allocations: 4177)
  Rendered layout layouts/application.html.erb (Duration: 82.3ms | Allocations: 9591)
Completed 200 OK in 83ms (Views: 33.1ms | ActiveRecord: 49.6ms | Allocations: 10058)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-21 20:18:58 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (49.6ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 80.8ms | Allocations: 11111)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1102)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.8ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 137.3ms | Allocations: 20354)
Completed 200 OK in 289ms (Views: 15.0ms | ActiveRecord: 270.5ms | Allocations: 22904)


Started GET "/nearme" for 127.0.0.1 at 2023-11-21 20:18:59 +0100
Processing by NearmeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering nearme/index.html.erb within layouts/application
  Rendered nearme/index.html.erb within layouts/application (Duration: 0.1ms | Allocations: 7)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1153)
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 78.2ms | Allocations: 4206)
  Rendered layout layouts/application.html.erb (Duration: 84.5ms | Allocations: 9545)
Completed 200 OK in 86ms (Views: 36.4ms | ActiveRecord: 48.9ms | Allocations: 9788)


Started GET "/categories" for 127.0.0.1 at 2023-11-21 20:19:04 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (25.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 82.1ms | Allocations: 4629)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1139)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.7ms | Allocations: 4098)
  Rendered layout layouts/application.html.erb (Duration: 114.5ms | Allocations: 13645)
Completed 200 OK in 115ms (Views: 38.8ms | ActiveRecord: 75.9ms | Allocations: 13899)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-21 20:19:06 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (49.6ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 80.8ms | Allocations: 11143)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1102)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.7ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 136.9ms | Allocations: 20398)
Completed 200 OK in 289ms (Views: 14.7ms | ActiveRecord: 270.9ms | Allocations: 22948)


Started GET "/nearme" for 127.0.0.1 at 2023-11-21 20:19:06 +0100
Processing by NearmeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering nearme/index.html.erb within layouts/application
  Rendered nearme/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 7)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1140)
  [1m[36mUser Load (24.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 78.3ms | Allocations: 4176)
  Rendered layout layouts/application.html.erb (Duration: 82.7ms | Allocations: 9484)
Completed 200 OK in 83ms (Views: 33.7ms | ActiveRecord: 49.2ms | Allocations: 9726)


Started GET "/categories" for 127.0.0.1 at 2023-11-21 20:19:12 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (26.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 81.6ms | Allocations: 4628)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1127)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 30.2ms | Allocations: 4068)
  Rendered layout layouts/application.html.erb (Duration: 115.4ms | Allocations: 13582)
Completed 200 OK in 116ms (Views: 39.0ms | ActiveRecord: 76.8ms | Allocations: 13837)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-21 20:19:13 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (50.4ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 80.2ms | Allocations: 11111)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1102)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.8ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 136.2ms | Allocations: 20357)
Completed 200 OK in 290ms (Views: 13.3ms | ActiveRecord: 273.1ms | Allocations: 22907)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-21 20:19:25 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (25.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (25.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 51.0ms | Allocations: 2659)
  [1m[36mDish Load (24.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 885)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 449)
  [1m[36mUser Load (22.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 103.6ms | Allocations: 5812)
  Rendered layouts/_add_comment.html.erb (Duration: 0.4ms | Allocations: 543)
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 51.6ms | Allocations: 2356)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 283.0ms | Allocations: 13854)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1113)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.8ms | Allocations: 4098)
  Rendered layout layouts/application.html.erb (Duration: 314.0ms | Allocations: 22903)
Completed 200 OK in 677ms (Views: 18.5ms | ActiveRecord: 621.2ms | Allocations: 34469)


Started GET "/restaurants/3/dishes/16" for 127.0.0.1 at 2023-11-21 20:19:36 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"16"}
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (25.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 16], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=16 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=16 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=16 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 16], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=16 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 16], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 26.1ms | Allocations: 1287)
  Rendered layouts/_add_comment.html.erb (Duration: 0.4ms | Allocations: 562)
  Rendered dishes/show.html.erb within layouts/application (Duration: 78.5ms | Allocations: 4832)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1103)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.8ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 134.4ms | Allocations: 13902)
Completed 200 OK in 368ms (Views: 10.7ms | ActiveRecord: 300.5ms | Allocations: 18632)


Started GET "/restaurants/3/dishes/16/edit" for 127.0.0.1 at 2023-11-21 20:19:41 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"16"}
  [1m[36mDish Load (25.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.6ms | Allocations: 2790)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 4.4ms | Allocations: 3278)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.5ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 61.3ms | Allocations: 12332)
Completed 200 OK in 139ms (Views: 11.6ms | ActiveRecord: 75.2ms | Allocations: 13613)


Started GET "/restaurants/3/dishes/16/edit" for 127.0.0.1 at 2023-11-21 20:19:44 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"16"}
  [1m[36mDish Load (25.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.2ms | Allocations: 2204)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 2.6ms | Allocations: 2471)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1101)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.0ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 59.7ms | Allocations: 11525)
Completed 200 OK in 111ms (Views: 10.7ms | ActiveRecord: 74.3ms | Allocations: 12185)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-21 20:20:22 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (51.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (25.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 82.9ms | Allocations: 11141)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1114)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.0ms | Allocations: 4204)
  Rendered layout layouts/application.html.erb (Duration: 139.8ms | Allocations: 20498)
Completed 200 OK in 294ms (Views: 17.6ms | ActiveRecord: 273.5ms | Allocations: 23070)


Started GET "/restaurants/21" for 127.0.0.1 at 2023-11-21 20:20:23 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"21"}
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.5ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 21], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=21 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=21 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=21 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 21], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=21 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=21 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=21 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=21 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 21], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=21 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 51.0ms | Allocations: 1442)
  [1m[36mDish Load (25.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 21]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 21], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 24.7ms | Allocations: 500)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 568)
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=21 AND posts.autor=users.nombre AND posts.restaurant_id=21[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 152.4ms | Allocations: 4491)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1101)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.2ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 208.6ms | Allocations: 13579)
Completed 200 OK in 542ms (Views: 11.4ms | ActiveRecord: 498.6ms | Allocations: 18651)


Started GET "/restaurants/21/edit" for 127.0.0.1 at 2023-11-21 20:20:27 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"21"}
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:56:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 27.2ms | Allocations: 3129)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 27.4ms | Allocations: 3233)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.4ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 83.8ms | Allocations: 12287)
Completed 200 OK in 135ms (Views: 10.1ms | ActiveRecord: 99.3ms | Allocations: 12955)


Started DELETE "/restaurants/21" for 127.0.0.1 at 2023-11-21 20:20:37 +0100
Processing by RestaurantsController#destroy as TURBO_STREAM
  Parameters: {"id"=>"21"}
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:70:in `destroy'
  [1m[36mTRANSACTION (25.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/restaurants_controller.rb:71:in `destroy'
  [1m[36mRank Delete All (51.2ms)[0m  [1m[31mDELETE FROM "ranks" WHERE "ranks"."what" = $1[0m  [["what", 21]]
  â†³ app/controllers/restaurants_controller.rb:71:in `destroy'
  [1m[36mPost Load (24.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1[0m  [["restaurant_id", 21]]
  â†³ app/controllers/restaurants_controller.rb:71:in `destroy'
  [1m[36mReview Load (24.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 21], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/restaurants_controller.rb:71:in `destroy'
  [1m[36mDish Load (23.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 21]]
  â†³ app/controllers/restaurants_controller.rb:71:in `destroy'
  [1m[36mReview Load (24.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 23], ["reviewable_type", "Dish"]]
  â†³ app/controllers/restaurants_controller.rb:71:in `destroy'
  [1m[36mResponse Load (24.5ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2[0m  [["respondable_id", 22], ["respondable_type", "Review"]]
  â†³ app/controllers/restaurants_controller.rb:71:in `destroy'
  [1m[36mResponse Destroy (25.3ms)[0m  [1m[31mDELETE FROM "responses" WHERE "responses"."id" = $1[0m  [["id", 17]]
  â†³ app/controllers/restaurants_controller.rb:71:in `destroy'
  [1m[36mResponse Destroy (25.5ms)[0m  [1m[31mDELETE FROM "responses" WHERE "responses"."id" = $1[0m  [["id", 18]]
  â†³ app/controllers/restaurants_controller.rb:71:in `destroy'
  [1m[36mReaction Delete All (24.9ms)[0m  [1m[31mDELETE FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2[0m  [["reactionable_id", 22], ["reactionable_type", "Review"]]
  â†³ app/controllers/restaurants_controller.rb:71:in `destroy'
  [1m[36mReview Destroy (25.3ms)[0m  [1m[31mDELETE FROM "reviews" WHERE "reviews"."id" = $1[0m  [["id", 22]]
  â†³ app/controllers/restaurants_controller.rb:71:in `destroy'
  [1m[36mDish Destroy (25.2ms)[0m  [1m[31mDELETE FROM "dishes" WHERE "dishes"."id" = $1[0m  [["id", 23]]
  â†³ app/controllers/restaurants_controller.rb:71:in `destroy'
  [1m[36mRestaurant::HABTM_Users Delete All (26.0ms)[0m  [1m[31mDELETE FROM "restaurants_users" WHERE "restaurants_users"."restaurant_id" = $1[0m  [["restaurant_id", 21]]
  â†³ app/controllers/restaurants_controller.rb:71:in `destroy'
  [1m[36mRestaurant Destroy (25.9ms)[0m  [1m[31mDELETE FROM "restaurants" WHERE "restaurants"."id" = $1[0m  [["id", 21]]
  â†³ app/controllers/restaurants_controller.rb:71:in `destroy'
  [1m[36mTRANSACTION (26.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/restaurants_controller.rb:71:in `destroy'
Redirected to http://localhost:3000/
Completed 303 See Other in 609ms (ActiveRecord: 531.9ms | Allocations: 29842)


Started GET "/" for 127.0.0.1 at 2023-11-21 20:20:37 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (49.6ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 83.9ms | Allocations: 10719)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1114)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.2ms | Allocations: 4226)
  Rendered layout layouts/application.html.erb (Duration: 142.4ms | Allocations: 20124)
Completed 200 OK in 296ms (Views: 19.9ms | ActiveRecord: 271.5ms | Allocations: 22726)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-21 20:20:54 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (25.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 51.9ms | Allocations: 2654)
  [1m[36mDish Load (24.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 631)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 106.0ms | Allocations: 5454)
  Rendered layouts/_add_comment.html.erb (Duration: 0.4ms | Allocations: 543)
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (25.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 53.4ms | Allocations: 2360)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 288.8ms | Allocations: 13462)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1113)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.4ms | Allocations: 4101)
  Rendered layout layouts/application.html.erb (Duration: 320.8ms | Allocations: 22514)
Completed 200 OK in 681ms (Views: 22.9ms | ActiveRecord: 625.2ms | Allocations: 28277)


Started GET "/restaurants/3/dishes/16/edit" for 127.0.0.1 at 2023-11-21 20:20:56 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"16"}
  [1m[36mDish Load (25.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 1.9ms | Allocations: 2216)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 2.3ms | Allocations: 2486)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1101)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.7ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 59.0ms | Allocations: 11540)
Completed 200 OK in 110ms (Views: 9.9ms | ActiveRecord: 74.7ms | Allocations: 12200)


Started GET "/categories" for 127.0.0.1 at 2023-11-21 20:22:10 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (25.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 79.1ms | Allocations: 4606)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1127)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 29.5ms | Allocations: 4068)
  Rendered layout layouts/application.html.erb (Duration: 111.9ms | Allocations: 13560)
Completed 200 OK in 113ms (Views: 37.0ms | ActiveRecord: 75.2ms | Allocations: 13814)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-21 20:22:14 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (49.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 80.4ms | Allocations: 10735)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1114)
  [1m[36mUser Load (24.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.5ms | Allocations: 4204)
  Rendered layout layouts/application.html.erb (Duration: 141.4ms | Allocations: 20057)
Completed 200 OK in 293ms (Views: 18.6ms | ActiveRecord: 271.1ms | Allocations: 22608)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-21 20:22:15 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 51.4ms | Allocations: 2654)
  [1m[36mDish Load (24.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 631)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 105.4ms | Allocations: 5454)
  Rendered layouts/_add_comment.html.erb (Duration: 0.4ms | Allocations: 543)
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 54.1ms | Allocations: 2340)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 288.5ms | Allocations: 13442)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1113)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 29.6ms | Allocations: 4098)
  Rendered layout layouts/application.html.erb (Duration: 322.4ms | Allocations: 22491)
Completed 200 OK in 678ms (Views: 25.2ms | ActiveRecord: 619.8ms | Allocations: 28254)


Started GET "/restaurants/3/edit" for 127.0.0.1 at 2023-11-21 20:22:16 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:56:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  [1m[36mCategory Load (24.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 27.6ms | Allocations: 3154)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 27.8ms | Allocations: 3258)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1101)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.5ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 84.3ms | Allocations: 12312)
Completed 200 OK in 134ms (Views: 10.8ms | ActiveRecord: 99.0ms | Allocations: 12982)


Started GET "/restaurants/3/dishes/16/edit" for 127.0.0.1 at 2023-11-21 20:22:25 +0100
Processing by DishesController#edit as */*
  Parameters: {"restaurant_id"=>"3", "id"=>"16"}
  [1m[36mDish Load (26.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.7ms | Allocations: 2214)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 3.3ms | Allocations: 2361)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1101)
  Rendered layouts/_sidenav.html.erb (Duration: 2.0ms | Allocations: 2692)
  Rendered layout layouts/application.html.erb (Duration: 9.2ms | Allocations: 9933)
Completed 200 OK in 61ms (Views: 9.7ms | ActiveRecord: 26.0ms | Allocations: 10676)


Started GET "/restaurants/3/edit" for 127.0.0.1 at 2023-11-21 20:31:08 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:56:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  [1m[36mCategory Load (24.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 30.8ms | Allocations: 6393)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 31.4ms | Allocations: 6772)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1364)
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 111.7ms | Allocations: 12745)
  Rendered layout layouts/application.html.erb (Duration: 152.8ms | Allocations: 40062)
Completed 200 OK in 830ms (Views: 78.4ms | ActiveRecord: 326.9ms | Allocations: 52413)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-21 20:31:11 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (50.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (25.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 81.0ms | Allocations: 11608)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1102)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.0ms | Allocations: 4194)
  Rendered layout layouts/application.html.erb (Duration: 138.7ms | Allocations: 20907)
Completed 200 OK in 297ms (Views: 16.4ms | ActiveRecord: 272.5ms | Allocations: 26751)


Started GET "/restaurants/7" for 127.0.0.1 at 2023-11-21 20:31:13 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (26.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 51.6ms | Allocations: 2124)
  [1m[36mDish Load (25.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 52.2ms | Allocations: 1893)
  Rendered layouts/_add_comment.html.erb (Duration: 1.1ms | Allocations: 714)
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 367.2ms | Allocations: 16192)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1113)
  [1m[36mUser Load (24.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.4ms | Allocations: 4205)
  Rendered layout layouts/application.html.erb (Duration: 424.2ms | Allocations: 25352)
Completed 200 OK in 819ms (Views: 78.6ms | ActiveRecord: 648.8ms | Allocations: 35931)


Started GET "/restaurants/7/edit" for 127.0.0.1 at 2023-11-21 20:31:18 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:56:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  [1m[36mCategory Load (24.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 28.1ms | Allocations: 3160)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 28.4ms | Allocations: 3264)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1101)
  [1m[36mUser Load (23.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 51.9ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 84.0ms | Allocations: 12356)
Completed 200 OK in 135ms (Views: 11.7ms | ActiveRecord: 97.5ms | Allocations: 13025)


Started GET "/restaurants/1" for 127.0.0.1 at 2023-11-21 20:31:29 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (26.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (25.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (25.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (25.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 53.2ms | Allocations: 4199)
  [1m[36mDish Load (24.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (23.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 883)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 449)
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 90.5ms | Allocations: 12829)
  Rendered layouts/_add_comment.html.erb (Duration: 0.4ms | Allocations: 537)
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 829.8ms | Allocations: 32083)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.7ms | Allocations: 4176)
  Rendered layout layouts/application.html.erb (Duration: 887.7ms | Allocations: 41115)
Completed 200 OK in 1248ms (Views: 46.1ms | ActiveRecord: 1168.6ms | Allocations: 49882)


Started GET "/restaurants/1" for 127.0.0.1 at 2023-11-21 20:32:20 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 87.5ms | Allocations: 10188)
  [1m[36mDish Load (24.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (22.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (23.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 882)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 449)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 92.6ms | Allocations: 14207)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 692)
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 921.7ms | Allocations: 46491)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1371)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 79.7ms | Allocations: 7644)
  Rendered layout layouts/application.html.erb (Duration: 1012.6ms | Allocations: 74678)
Completed 200 OK in 1656ms (Views: 74.6ms | ActiveRecord: 1523.9ms | Allocations: 101145)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-21 20:32:58 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (51.1ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (26.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 107.6ms | Allocations: 13129)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1102)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.8ms | Allocations: 4176)
  Rendered layout layouts/application.html.erb (Duration: 165.7ms | Allocations: 22386)
Completed 200 OK in 329ms (Views: 17.7ms | ActiveRecord: 300.2ms | Allocations: 30507)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-21 20:33:00 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.1ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 51.3ms | Allocations: 2978)
  [1m[36mDish Load (24.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 627)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 54.0ms | Allocations: 3617)
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 537)
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 181.6ms | Allocations: 8500)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.9ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 239.6ms | Allocations: 17555)
Completed 200 OK in 596ms (Views: 18.1ms | ActiveRecord: 545.1ms | Allocations: 23184)


Started GET "/reviews/new?review_to=2&review_type=Restaurant" for 127.0.0.1 at 2023-11-21 20:33:02 +0100
Processing by ReviewsController#new as HTML
  Parameters: {"review_to"=>"2", "review_type"=>"Restaurant"}
  Rendering layout layouts/application.html.erb
  Rendering reviews/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 3.2ms | Allocations: 2618)
  Rendered reviews/new.html.erb within layouts/application (Duration: 3.7ms | Allocations: 2860)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1113)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 77.1ms | Allocations: 4207)
  Rendered layout layouts/application.html.erb (Duration: 84.3ms | Allocations: 12020)
Completed 200 OK in 86ms (Views: 35.8ms | ActiveRecord: 49.0ms | Allocations: 12733)


Started GET "/restaurants/2/edit" for 127.0.0.1 at 2023-11-21 20:34:38 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:56:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  [1m[36mCategory Load (25.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 28.9ms | Allocations: 3746)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 29.8ms | Allocations: 4107)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.1ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 86.4ms | Allocations: 13177)
Completed 200 OK in 140ms (Views: 12.2ms | ActiveRecord: 100.1ms | Allocations: 13933)


Started GET "/restaurants/2/edit" for 127.0.0.1 at 2023-11-21 20:46:32 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:56:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  [1m[36mCategory Load (24.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 31.0ms | Allocations: 6407)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 31.7ms | Allocations: 6784)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1368)
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 116.5ms | Allocations: 12786)
  Rendered layout layouts/application.html.erb (Duration: 164.3ms | Allocations: 40112)
Completed 200 OK in 745ms (Views: 89.8ms | ActiveRecord: 329.2ms | Allocations: 52465)


Started GET "/restaurants/2/edit" for 127.0.0.1 at 2023-11-21 20:47:25 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:56:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  [1m[36mCategory Load (24.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 56.0ms | Allocations: 6485)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 56.6ms | Allocations: 6862)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1352)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 116.4ms | Allocations: 12928)
  Rendered layout layouts/application.html.erb (Duration: 182.3ms | Allocations: 40099)
Completed 200 OK in 351ms (Views: 34.1ms | ActiveRecord: 305.9ms | Allocations: 49605)


Started GET "/categories" for 127.0.0.1 at 2023-11-21 20:48:49 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (25.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 81.7ms | Allocations: 5025)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1131)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 29.5ms | Allocations: 4087)
  Rendered layout layouts/application.html.erb (Duration: 114.7ms | Allocations: 14042)
Completed 200 OK in 115ms (Views: 38.4ms | ActiveRecord: 76.7ms | Allocations: 14528)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-21 20:48:52 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (24.4ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (23.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 82.3ms | Allocations: 11613)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1102)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 55.2ms | Allocations: 4194)
  Rendered layout layouts/application.html.erb (Duration: 141.7ms | Allocations: 20901)
Completed 200 OK in 348ms (Views: 19.0ms | ActiveRecord: 319.7ms | Allocations: 26968)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-21 20:48:53 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (22.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (26.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 52.0ms | Allocations: 3653)
  [1m[36mDish Load (25.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 881)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 449)
  Rendered layouts/_comment.html.erb (Duration: 82.5ms | Allocations: 6511)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 689)
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 289.9ms | Allocations: 16050)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  [1m[36mUser Load (24.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 57.2ms | Allocations: 4203)
  Rendered layout layouts/application.html.erb (Duration: 350.5ms | Allocations: 25134)
Completed 200 OK in 867ms (Views: 79.5ms | ActiveRecord: 693.5ms | Allocations: 39808)


Started GET "/restaurants/2/edit" for 127.0.0.1 at 2023-11-21 20:48:56 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:56:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  [1m[36mCategory Load (24.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 27.9ms | Allocations: 3175)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 28.2ms | Allocations: 3279)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1105)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.1ms | Allocations: 4199)
  Rendered layout layouts/application.html.erb (Duration: 84.0ms | Allocations: 12389)
Completed 200 OK in 136ms (Views: 11.5ms | ActiveRecord: 97.3ms | Allocations: 13057)


Started GET "/categories" for 127.0.0.1 at 2023-11-21 20:54:04 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 164.0ms | Allocations: 12056)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1386)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 115.9ms | Allocations: 11718)
  Rendered layout layouts/application.html.erb (Duration: 289.4ms | Allocations: 44279)
Completed 200 OK in 294ms (Views: 63.3ms | ActiveRecord: 227.1ms | Allocations: 46608)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-21 20:54:04 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (25.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mUser Load (22.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "pipi"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 907)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 449)
  [1m[36mUser Load (23.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 84.1ms | Allocations: 10154)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 688)
  Rendered categories/show.html.erb within layouts/application (Duration: 111.2ms | Allocations: 11885)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1105)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.4ms | Allocations: 4095)
  Rendered layout layouts/application.html.erb (Duration: 142.8ms | Allocations: 20892)
Completed 200 OK in 432ms (Views: 21.9ms | ActiveRecord: 323.0ms | Allocations: 30030)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-21 20:54:44 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (24.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mUser Load (24.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "pipi"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 902)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 449)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 452)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 90.9ms | Allocations: 10196)
  Rendered layouts/_add_comment.html.erb (Duration: 1.0ms | Allocations: 690)
  Rendered categories/show.html.erb within layouts/application (Duration: 149.9ms | Allocations: 17220)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1364)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 113.6ms | Allocations: 11726)
  Rendered layout layouts/application.html.erb (Duration: 273.8ms | Allocations: 49480)
Completed 200 OK in 567ms (Views: 49.8ms | ActiveRecord: 476.3ms | Allocations: 62093)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-21 20:54:45 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (25.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mUser Load (24.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "pipi"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 653)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 81.8ms | Allocations: 6559)
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 542)
  Rendered categories/show.html.erb within layouts/application (Duration: 108.0ms | Allocations: 7744)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1101)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.4ms | Allocations: 4068)
  Rendered layout layouts/application.html.erb (Duration: 140.1ms | Allocations: 16698)
Completed 200 OK in 319ms (Views: 16.6ms | ActiveRecord: 273.8ms | Allocations: 19604)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-21 20:55:17 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (25.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (25.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "pipi"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 908)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 449)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 97.9ms | Allocations: 10201)
  Rendered layouts/_add_comment.html.erb (Duration: 1.1ms | Allocations: 688)
  Rendered categories/show.html.erb within layouts/application (Duration: 159.1ms | Allocations: 17228)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1372)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 119.3ms | Allocations: 11693)
  Rendered layout layouts/application.html.erb (Duration: 291.4ms | Allocations: 49492)
Completed 200 OK in 590ms (Views: 64.3ms | ActiveRecord: 481.7ms | Allocations: 62193)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-21 20:56:45 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (25.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (24.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "pipi"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 902)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 449)
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 85.6ms | Allocations: 10178)
  Rendered layouts/_add_comment.html.erb (Duration: 0.7ms | Allocations: 682)
  Rendered categories/show.html.erb within layouts/application (Duration: 146.5ms | Allocations: 17184)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1376)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 115.3ms | Allocations: 11732)
  Rendered layout layouts/application.html.erb (Duration: 287.7ms | Allocations: 56441)
Completed 200 OK in 587ms (Views: 64.0ms | ActiveRecord: 477.3ms | Allocations: 69038)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-21 20:57:31 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (25.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (23.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "pipi"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 656)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 82.4ms | Allocations: 6558)
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 538)
  Rendered categories/show.html.erb within layouts/application (Duration: 108.9ms | Allocations: 7742)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1101)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.5ms | Allocations: 4068)
  Rendered layout layouts/application.html.erb (Duration: 148.3ms | Allocations: 23582)
Completed 200 OK in 328ms (Views: 23.4ms | ActiveRecord: 274.1ms | Allocations: 26471)


Started GET "/categories/burger/edit" for 127.0.0.1 at 2023-11-21 20:57:55 +0100
Processing by CategoriesController#edit as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (24.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:32:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering categories/edit.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.6ms | Allocations: 2759)
  Rendered categories/edit.html.erb within layouts/application (Duration: 3.2ms | Allocations: 2996)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1101)
  [1m[36mUser Load (23.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.4ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 58.9ms | Allocations: 12018)
Completed 200 OK in 111ms (Views: 10.7ms | ActiveRecord: 73.3ms | Allocations: 12737)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-21 20:59:00 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (26.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "pipi"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 908)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 449)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 89.7ms | Allocations: 10205)
  Rendered layouts/_add_comment.html.erb (Duration: 0.8ms | Allocations: 688)
  Rendered categories/show.html.erb within layouts/application (Duration: 152.5ms | Allocations: 17199)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1372)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 115.0ms | Allocations: 11694)
  Rendered layout layouts/application.html.erb (Duration: 277.2ms | Allocations: 49450)
Completed 200 OK in 576ms (Views: 51.2ms | ActiveRecord: 481.2ms | Allocations: 62178)


Started GET "/categories/burger/edit" for 127.0.0.1 at 2023-11-21 20:59:02 +0100
Processing by CategoriesController#edit as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (25.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:32:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering categories/edit.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.7ms | Allocations: 2721)
  Rendered categories/edit.html.erb within layouts/application (Duration: 3.2ms | Allocations: 2955)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.5ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 58.7ms | Allocations: 11977)
Completed 200 OK in 109ms (Views: 10.2ms | ActiveRecord: 73.9ms | Allocations: 12696)


Started GET "/categories/burger/edit" for 127.0.0.1 at 2023-11-21 21:00:58 +0100
Processing by CategoriesController#edit as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (25.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:32:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering categories/edit.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 4.4ms | Allocations: 2821)
  Rendered categories/edit.html.erb within layouts/application (Duration: 5.5ms | Allocations: 4017)
  Rendered layout layouts/application.html.erb (Duration: 5.7ms | Allocations: 4109)
Completed 500 Internal Server Error in 115ms (ActiveRecord: 76.5ms | Allocations: 8541)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `id' for nil:NilClass):
    3: </div>
    4: <%= render "form", category: @category %>
    5: 
    6: <%= link_to restaurant_path(@restaurant.id), style: "text-decoration: none; display: flex; justify-content: center; background-color: var(--delete-color); color: var(--black);", data: {turbo_method: :delete} do %>
    7:     <div class="restaurants_header_edit_button" style="width: 700px;">
    8:         <span class="restaurants_header_edit_button_text">Eliminar Restaurante</span>
    9:     </div> 
  
app/views/categories/edit.html.erb:6
Started GET "/categories/burger/edit" for 127.0.0.1 at 2023-11-21 21:01:46 +0100
Processing by CategoriesController#edit as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (25.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:32:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering categories/edit.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.4ms | Allocations: 2809)
  Rendered categories/edit.html.erb within layouts/application (Duration: 3.0ms | Allocations: 3141)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1364)
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 175.6ms | Allocations: 17141)
  Rendered layout layouts/application.html.erb (Duration: 188.9ms | Allocations: 40790)
Completed 200 OK in 298ms (Views: 36.6ms | ActiveRecord: 229.5ms | Allocations: 45273)


Started GET "/categories/burger/edit" for 127.0.0.1 at 2023-11-21 21:02:00 +0100
Processing by CategoriesController#edit as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (25.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:32:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering categories/edit.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.9ms | Allocations: 2794)
  Rendered categories/edit.html.erb within layouts/application (Duration: 3.6ms | Allocations: 3126)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1364)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 175.3ms | Allocations: 17138)
  Rendered layout layouts/application.html.erb (Duration: 189.3ms | Allocations: 40774)
Completed 200 OK in 297ms (Views: 39.6ms | ActiveRecord: 227.4ms | Allocations: 45204)


Started GET "/categories/burger/edit" for 127.0.0.1 at 2023-11-21 21:02:15 +0100
Processing by CategoriesController#edit as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (26.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:32:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering categories/edit.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.5ms | Allocations: 2809)
  Rendered categories/edit.html.erb within layouts/application (Duration: 3.2ms | Allocations: 3143)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1364)
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 172.8ms | Allocations: 17163)
  Rendered layout layouts/application.html.erb (Duration: 186.8ms | Allocations: 40817)
Completed 200 OK in 297ms (Views: 36.2ms | ActiveRecord: 228.8ms | Allocations: 45311)


Started GET "/categories/burger/edit" for 127.0.0.1 at 2023-11-21 21:06:07 +0100
Processing by CategoriesController#edit as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (25.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:32:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering categories/edit.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.5ms | Allocations: 2793)
  Rendered categories/edit.html.erb within layouts/application (Duration: 3.2ms | Allocations: 3124)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1366)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 173.8ms | Allocations: 17165)
  Rendered layout layouts/application.html.erb (Duration: 190.6ms | Allocations: 40654)
Completed 200 OK in 300ms (Views: 39.2ms | ActiveRecord: 229.1ms | Allocations: 45064)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-21 21:06:14 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (24.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "pipi"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 907)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 449)
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 91.2ms | Allocations: 10162)
  Rendered layouts/_add_comment.html.erb (Duration: 0.8ms | Allocations: 688)
  Rendered categories/show.html.erb within layouts/application (Duration: 118.4ms | Allocations: 11840)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1110)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.9ms | Allocations: 4070)
  Rendered layout layouts/application.html.erb (Duration: 151.1ms | Allocations: 20815)
Completed 200 OK in 392ms (Views: 26.9ms | ActiveRecord: 326.7ms | Allocations: 29789)


Started GET "/categories" for 127.0.0.1 at 2023-11-21 21:06:16 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 79.4ms | Allocations: 4999)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1127)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.8ms | Allocations: 4068)
  Rendered layout layouts/application.html.erb (Duration: 110.6ms | Allocations: 13946)
Completed 200 OK in 111ms (Views: 37.7ms | ActiveRecord: 73.2ms | Allocations: 14264)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-21 21:06:18 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.0ms | Allocations: 2315)
  Rendered categories/new.html.erb within layouts/application (Duration: 2.5ms | Allocations: 2488)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  [1m[36mUser Load (24.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 78.9ms | Allocations: 4176)
  Rendered layout layouts/application.html.erb (Duration: 84.8ms | Allocations: 11516)
Completed 200 OK in 86ms (Views: 36.2ms | ActiveRecord: 49.0ms | Allocations: 11842)


Started POST "/categories" for 127.0.0.1 at 2023-11-21 21:06:26 +0100
Processing by CategoriesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "category"=>{"nombre"=>"prueba"}, "button"=>""}
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (26.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/categories_controller.rb:24:in `create'
  [1m[36mCategory Create (51.7ms)[0m  [1m[32mINSERT INTO "categories" ("nombre", "created_at", "updated_at", "ruta_img") VALUES ($1, $2, $3, $4)[0m  [["nombre", "prueba"], ["created_at", "2023-11-21 20:06:26.351402"], ["updated_at", "2023-11-21 20:06:26.351402"], ["ruta_img", nil]]
  â†³ app/controllers/categories_controller.rb:24:in `create'
  [1m[36mTRANSACTION (26.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/categories_controller.rb:24:in `create'
Redirected to http://localhost:3000/categories/prueba
Completed 302 Found in 81ms (ActiveRecord: 104.4ms | Allocations: 3319)


Started GET "/categories/prueba" for 127.0.0.1 at 2023-11-21 21:06:26 +0100
Processing by CategoriesController#show as TURBO_STREAM
  Parameters: {"nombre"=>"prueba"}
  [1m[36mCategory Load (24.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "prueba"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='prueba' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='prueba' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='prueba' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "prueba"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='prueba' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (24.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "prueba"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_comment.html.erb (Duration: 25.2ms | Allocations: 664)
  Rendered layouts/_add_comment.html.erb (Duration: 0.7ms | Allocations: 749)
  Rendered categories/show.html.erb within layouts/application (Duration: 52.2ms | Allocations: 2071)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1113)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.9ms | Allocations: 4098)
  Rendered layout layouts/application.html.erb (Duration: 87.9ms | Allocations: 11073)
Completed 200 OK in 266ms (Views: 15.0ms | ActiveRecord: 222.1ms | Allocations: 13856)


Started GET "/categories" for 127.0.0.1 at 2023-11-21 21:06:30 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 79.3ms | Allocations: 5026)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1139)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.1ms | Allocations: 4098)
  Rendered layout layouts/application.html.erb (Duration: 110.8ms | Allocations: 14035)
Completed 200 OK in 111ms (Views: 37.4ms | ActiveRecord: 73.7ms | Allocations: 14289)


Started GET "/categories/prueba" for 127.0.0.1 at 2023-11-21 21:06:33 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"prueba"}
  [1m[36mCategory Load (25.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "prueba"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='prueba' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='prueba' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='prueba' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "prueba"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='prueba' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "prueba"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_comment.html.erb (Duration: 26.0ms | Allocations: 664)
  Rendered layouts/_add_comment.html.erb (Duration: 1.0ms | Allocations: 752)
  Rendered categories/show.html.erb within layouts/application (Duration: 52.7ms | Allocations: 2031)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1101)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.8ms | Allocations: 4068)
  Rendered layout layouts/application.html.erb (Duration: 85.9ms | Allocations: 10973)
Completed 200 OK in 266ms (Views: 12.2ms | ActiveRecord: 223.4ms | Allocations: 13687)


Started GET "/categories/prueba/edit" for 127.0.0.1 at 2023-11-21 21:06:34 +0100
Processing by CategoriesController#edit as HTML
  Parameters: {"nombre"=>"prueba"}
  [1m[36mCategory Load (24.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "prueba"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:32:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering categories/edit.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.6ms | Allocations: 2322)
  Rendered categories/edit.html.erb within layouts/application (Duration: 2.9ms | Allocations: 2427)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.8ms | Allocations: 4194)
  Rendered layout layouts/application.html.erb (Duration: 60.3ms | Allocations: 11469)
Completed 200 OK in 110ms (Views: 11.5ms | ActiveRecord: 73.4ms | Allocations: 12125)


Started DELETE "/categories/prueba" for 127.0.0.1 at 2023-11-21 21:06:35 +0100
Processing by CategoriesController#destroy as TURBO_STREAM
  Parameters: {"nombre"=>"prueba"}
  [1m[36mCategory Load (25.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "prueba"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:46:in `destroy'
  [1m[36mTRANSACTION (25.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/categories_controller.rb:47:in `destroy'
  [1m[36mRestaurant Update All (49.8ms)[0m  [1m[33mUPDATE "restaurants" SET "categoria" = $1 WHERE "restaurants"."categoria" = $2[0m  [["categoria", nil], ["categoria", "prueba"]]
  â†³ app/controllers/categories_controller.rb:47:in `destroy'
  [1m[36mPost Load (24.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1[0m  [["categoria", "prueba"]]
  â†³ app/controllers/categories_controller.rb:47:in `destroy'
  [1m[36mCategory Destroy (25.6ms)[0m  [1m[31mDELETE FROM "categories" WHERE "categories"."nombre" = $1[0m  [["nombre", "prueba"]]
  â†³ app/controllers/categories_controller.rb:47:in `destroy'
  [1m[36mTRANSACTION (24.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/categories_controller.rb:47:in `destroy'
Redirected to http://localhost:3000/
Completed 303 See Other in 205ms (ActiveRecord: 174.8ms | Allocations: 4158)


Started GET "/" for 127.0.0.1 at 2023-11-21 21:06:36 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (24.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (23.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 81.4ms | Allocations: 11623)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1102)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 56.0ms | Allocations: 4184)
  Rendered layout layouts/application.html.erb (Duration: 141.7ms | Allocations: 20892)
Completed 200 OK in 348ms (Views: 18.6ms | ActiveRecord: 320.3ms | Allocations: 30798)


Started GET "/categories" for 127.0.0.1 at 2023-11-21 21:06:38 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 80.2ms | Allocations: 4649)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1139)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.6ms | Allocations: 4098)
  Rendered layout layouts/application.html.erb (Duration: 112.5ms | Allocations: 13662)
Completed 200 OK in 113ms (Views: 39.7ms | ActiveRecord: 73.1ms | Allocations: 13918)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-21 21:09:46 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (24.6ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 138.8ms | Allocations: 13181)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1373)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 115.3ms | Allocations: 12986)
  Rendered layout layouts/application.html.erb (Duration: 267.3ms | Allocations: 46956)
Completed 200 OK in 595ms (Views: 74.3ms | ActiveRecord: 474.3ms | Allocations: 62935)


Started GET "/restaurants/13" for 127.0.0.1 at 2023-11-21 21:09:50 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"13"}
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.5ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=13 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=13 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=13 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 13], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=13 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 13], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 51.8ms | Allocations: 2125)
  [1m[36mDish Load (24.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 13]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 13], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 26.8ms | Allocations: 1891)
  Rendered layouts/_add_comment.html.erb (Duration: 0.8ms | Allocations: 714)
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=13 AND posts.autor=users.nombre AND posts.restaurant_id=13[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 262.7ms | Allocations: 14246)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.1ms | Allocations: 4175)
  Rendered layout layouts/application.html.erb (Duration: 318.1ms | Allocations: 23326)
Completed 200 OK in 774ms (Views: 21.4ms | ActiveRecord: 699.0ms | Allocations: 34536)


Started GET "/restaurants/13/dishes/15/edit" for 127.0.0.1 at 2023-11-21 21:09:55 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"13", "id"=>"15"}
  [1m[36mDish Load (25.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.8ms | Allocations: 2787)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 3.7ms | Allocations: 3293)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1101)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.5ms | Allocations: 4176)
  Rendered layout layouts/application.html.erb (Duration: 60.3ms | Allocations: 12344)
Completed 200 OK in 140ms (Views: 11.4ms | ActiveRecord: 75.2ms | Allocations: 13831)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-21 21:10:00 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"gari"}
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (25.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (25.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-21 20:10:00.873974')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-21 20:10:00.899437')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (24.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-21 20:10:00.924713')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 2.7ms | Allocations: 3156)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1114)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 29.1ms | Allocations: 4103)
  Rendered layout layouts/application.html.erb (Duration: 39.9ms | Allocations: 12153)
Completed 200 OK in 302ms (Views: 15.9ms | ActiveRecord: 249.1ms | Allocations: 18857)


Started GET "/restaurants/13/dishes/15/edit" for 127.0.0.1 at 2023-11-21 21:11:04 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"13", "id"=>"15"}
  [1m[36mDish Load (24.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.0ms | Allocations: 2867)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 4.3ms | Allocations: 4329)
  Rendered layout layouts/application.html.erb (Duration: 4.5ms | Allocations: 4421)
Completed 500 Internal Server Error in 145ms (ActiveRecord: 131.1ms | Allocations: 10816)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `dish_path' for #<ActionView::Base:0x000000000b8038>):
     6: <% end %>
     7: <%= render "form", dish: @dish %>
     8: 
     9: <%= link_to dish_path(@dish.id), style: "text-decoration: none; display: flex; justify-content: center;", data: {turbo_method: :delete} do %>
    10:   <div class="restaurants_header_edit_button" style="width: 700px; background-color: var(--delete-color);">
    11:     <span class="restaurants_header_edit_button_text" style="color: var(--black);">Eliminar Plato</span>
    12:   </div> 
  
app/views/dishes/edit.html.erb:9
Started GET "/restaurants/13/dishes/15/edit" for 127.0.0.1 at 2023-11-21 21:12:11 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"13", "id"=>"15"}
  [1m[36mDish Load (23.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.6ms | Allocations: 2863)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 4.7ms | Allocations: 3499)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1367)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 171.6ms | Allocations: 17153)
  Rendered layout layouts/application.html.erb (Duration: 190.9ms | Allocations: 41185)
Completed 200 OK in 329ms (Views: 40.9ms | ActiveRecord: 280.2ms | Allocations: 47566)


Started DELETE "/restaurants/15/dishes/15" for 127.0.0.1 at 2023-11-21 21:12:15 +0100
Processing by ErrorsController#not_found as TURBO_STREAM
  Parameters: {"unmatched"=>"restaurants/15/dishes/15"}
  Rendering layout layouts/application.html.erb
  Rendering errors/not_found.html.erb within layouts/application
  Rendered errors/not_found.html.erb within layouts/application (Duration: 0.2ms | Allocations: 92)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1138)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 79.7ms | Allocations: 4177)
  Rendered layout layouts/application.html.erb (Duration: 83.5ms | Allocations: 9425)
Completed 404 Not Found in 85ms (Views: 34.5ms | ActiveRecord: 49.6ms | Allocations: 10180)


Started GET "/restaurants/13" for 127.0.0.1 at 2023-11-21 21:12:47 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"13"}
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=13 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=13 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=13 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 13], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=13 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 13], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 83.7ms | Allocations: 7445)
  [1m[36mDish Load (24.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 13]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 13], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 26.5ms | Allocations: 1895)
  Rendered layouts/_add_comment.html.erb (Duration: 1.2ms | Allocations: 715)
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=13 AND posts.autor=users.nombre AND posts.restaurant_id=13[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 300.2ms | Allocations: 19573)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1372)
  [1m[36mUser Load (24.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 79.3ms | Allocations: 7646)
  Rendered layout layouts/application.html.erb (Duration: 390.7ms | Allocations: 47779)
Completed 200 OK in 955ms (Views: 45.9ms | ActiveRecord: 849.6ms | Allocations: 68970)


Started GET "/restaurants/13/dishes/15/edit" for 127.0.0.1 at 2023-11-21 21:12:49 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"13", "id"=>"15"}
  [1m[36mDish Load (24.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.6ms | Allocations: 2788)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 3.6ms | Allocations: 3391)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1101)
  [1m[36mUser Load (25.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 55.3ms | Allocations: 4175)
  Rendered layout layouts/application.html.erb (Duration: 62.4ms | Allocations: 12444)
Completed 200 OK in 115ms (Views: 12.4ms | ActiveRecord: 75.4ms | Allocations: 13926)


Started DELETE "/restaurants/15/dishes/15" for 127.0.0.1 at 2023-11-21 21:12:50 +0100
Processing by ErrorsController#not_found as TURBO_STREAM
  Parameters: {"unmatched"=>"restaurants/15/dishes/15"}
  Rendering layout layouts/application.html.erb
  Rendering errors/not_found.html.erb within layouts/application
  Rendered errors/not_found.html.erb within layouts/application (Duration: 0.3ms | Allocations: 90)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1138)
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 78.1ms | Allocations: 4177)
  Rendered layout layouts/application.html.erb (Duration: 82.6ms | Allocations: 9417)
Completed 404 Not Found in 84ms (Views: 34.2ms | ActiveRecord: 49.1ms | Allocations: 10160)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-22 17:09:51 +0100
  [1m[36mActiveRecord::SchemaMigration Load (53.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (43.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (41.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (58.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (47.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (48.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (42.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (47.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (47.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (55.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (42.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (51.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 1260.4ms | Allocations: 88746)
  [1m[36mDish Load (86.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (53.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (54.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (42.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.1ms | Allocations: 940)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 449)
  [1m[36mUser Load (57.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 520.7ms | Allocations: 17739)
  Rendered layouts/_add_comment.html.erb (Duration: 1.6ms | Allocations: 692)
  [1m[35m (44.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (42.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (46.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 453)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 102.8ms | Allocations: 3086)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 2309.8ms | Allocations: 122578)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1407)
  Rendered layouts/_sidenav.html.erb (Duration: 4.6ms | Allocations: 3447)
  Rendered layout layouts/application.html.erb (Duration: 2382.4ms | Allocations: 146849)
Completed 200 OK in 5022ms (Views: 1802.1ms | ActiveRecord: 2217.8ms | Allocations: 213165)


Started GET "/login" for 127.0.0.1 at 2023-11-22 17:10:24 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 110.4ms | Allocations: 4246)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1106)
  Rendered layouts/_sidenav.html.erb (Duration: 8.9ms | Allocations: 2696)
  Rendered layout layouts/application.html.erb (Duration: 133.1ms | Allocations: 11890)
Completed 200 OK in 152ms (Views: 135.2ms | ActiveRecord: 0.0ms | Allocations: 12395)


Started GET "/reviews/new?review_to=3&review_type=Restaurant" for 127.0.0.1 at 2023-11-22 17:10:33 +0100
Processing by ReviewsController#new as HTML
  Parameters: {"review_to"=>"3", "review_type"=>"Restaurant"}
Redirected to http://localhost:3000/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 502)


Started GET "/login" for 127.0.0.1 at 2023-11-22 17:10:34 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 5.2ms | Allocations: 2653)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1114)
  Rendered layouts/_sidenav.html.erb (Duration: 3.0ms | Allocations: 2720)
  Rendered layout layouts/application.html.erb (Duration: 15.2ms | Allocations: 10326)
Completed 200 OK in 16ms (Views: 15.8ms | ActiveRecord: 0.0ms | Allocations: 10590)


Started POST "/login" for 127.0.0.1 at 2023-11-22 17:10:53 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"Atreides", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (299.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 936ms (ActiveRecord: 299.7ms | Allocations: 952)


Started GET "/" for 127.0.0.1 at 2023-11-22 17:10:54 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (87.2ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (42.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (51.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (44.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (46.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (65.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (43.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (47.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 250.5ms | Allocations: 13148)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1102)
  [1m[36mUser Load (42.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (41.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 204.9ms | Allocations: 14458)
  Rendered layout layouts/application.html.erb (Duration: 464.0ms | Allocations: 32780)
Completed 200 OK in 848ms (Views: 131.9ms | ActiveRecord: 604.6ms | Allocations: 38010)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-22 17:11:01 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (113.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (90.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (128.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (53.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (58.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (47.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (43.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (65.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (286.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (317.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (47.0ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (95.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 107.8ms | Allocations: 2238)
  [1m[36mDish Load (98.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (43.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (45.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (68.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (65.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (67.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 638)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 452)
  [1m[36mUser Load (62.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 212.8ms | Allocations: 6296)
  Rendered layouts/_add_comment.html.erb (Duration: 1.1ms | Allocations: 543)
  [1m[35m (47.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (340.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 349.1ms | Allocations: 2238)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 989.0ms | Allocations: 14227)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1113)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (56.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 66.8ms | Allocations: 4595)
  Rendered layout layouts/application.html.erb (Duration: 1063.2ms | Allocations: 23771)
Completed 200 OK in 2760ms (Views: 75.1ms | ActiveRecord: 2334.5ms | Allocations: 29392)


Started GET "/reviews/new?review_to=3&review_type=Restaurant" for 127.0.0.1 at 2023-11-22 17:11:14 +0100
Processing by ReviewsController#new as HTML
  Parameters: {"review_to"=>"3", "review_type"=>"Restaurant"}
  Rendering layout layouts/application.html.erb
  Rendering reviews/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 42.2ms | Allocations: 2793)
  Rendered reviews/new.html.erb within layouts/application (Duration: 43.2ms | Allocations: 3035)
  Rendered layouts/_header.html.erb (Duration: 3.1ms | Allocations: 1101)
  [1m[36mUser Load (114.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 290.9ms | Allocations: 4663)
  Rendered layout layouts/application.html.erb (Duration: 342.6ms | Allocations: 12579)
Completed 200 OK in 346ms (Views: 185.5ms | ActiveRecord: 158.1ms | Allocations: 13265)


Started GET "/reviews/new?review_to=3&review_type=Restaurant" for 127.0.0.1 at 2023-11-22 17:25:25 +0100
Processing by ReviewsController#new as HTML
  Parameters: {"review_to"=>"3", "review_type"=>"Restaurant"}
  Rendering layout layouts/application.html.erb
  Rendering reviews/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 22.8ms | Allocations: 3154)
  Rendered reviews/new.html.erb within layouts/application (Duration: 23.7ms | Allocations: 3397)
  Rendered layout layouts/application.html.erb (Duration: 23.9ms | Allocations: 3489)
Completed 500 Internal Server Error in 1207ms (ActiveRecord: 367.2ms | Allocations: 12857)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `id' for nil:NilClass):
    28:         </label>
    29: 
    30:         <% 5.times.each do |i| %>
    31:           <%= link_to restaurant_rank_path(restaurant_id: @restaurant.id, rank: i+1), class: "new_post_image_upload_button", data: {turbo_method: :post} do %>
    32:             <span><%= i+1 %></span>
    33:             <%= image_tag "Star", class: "new_post_submit_icon" %>
    34:           <% end %>
  
app/views/layouts/_new_comment.html.erb:31
app/views/layouts/_new_comment.html.erb:30:in `times'
app/views/layouts/_new_comment.html.erb:30:in `each'
app/views/layouts/_new_comment.html.erb:30
app/views/layouts/_new_comment.html.erb:5
app/views/reviews/new.html.erb:1
Started GET "/reviews/new?review_to=3&review_type=Restaurant" for 127.0.0.1 at 2023-11-22 17:27:53 +0100
Processing by ReviewsController#new as HTML
  Parameters: {"review_to"=>"3", "review_type"=>"Restaurant"}
  Rendering layout layouts/application.html.erb
  Rendering reviews/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 5.5ms | Allocations: 4654)
  Rendered reviews/new.html.erb within layouts/application (Duration: 6.4ms | Allocations: 4892)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1366)
  [1m[36mUser Load (55.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (47.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 572.0ms | Allocations: 20921)
  Rendered layout layouts/application.html.erb (Duration: 606.1ms | Allocations: 46493)
Completed 200 OK in 1036ms (Views: 200.7ms | ActiveRecord: 711.5ms | Allocations: 53027)


Started POST "/restaurants/3/rank" for 127.0.0.1 at 2023-11-22 17:28:10 +0100
Processing by RanksController#create as TURBO_STREAM
  Parameters: {"rank"=>"4", "restaurant_id"=>"3"}
  [1m[36mTRANSACTION (50.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/ranks_controller.rb:4:in `create'
  [1m[36mRank Exists? (95.8ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."who" = $1 AND "ranks"."what" = $2 LIMIT $3[0m  [["who", "Atreides"], ["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/ranks_controller.rb:4:in `create'
  [1m[36mTRANSACTION (42.6ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/ranks_controller.rb:4:in `create'
No template found for RanksController#create, rendering head :no_content
Completed 204 No Content in 527ms (ActiveRecord: 551.5ms | Allocations: 5977)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-22 17:30:07 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (99.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (59.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (44.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (45.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (52.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-22 16:30:08.653966')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (52.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-22 16:30:08.709588')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (70.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-22 16:30:08.764983')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (54.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (47.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (46.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-22 16:30:08.945865')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (47.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (65.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-22 16:30:09.204544')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReview Count (143.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-22 16:30:09.271777')[0m  [["reviewable_id", 16], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (44.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (45.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 27.4ms | Allocations: 3338)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1102)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 15.2ms | Allocations: 4447)
  Rendered layout layouts/application.html.erb (Duration: 53.5ms | Allocations: 12656)
Completed 200 OK in 1657ms (Views: 54.9ms | ActiveRecord: 1368.1ms | Allocations: 32574)


Started GET "/logout" for 127.0.0.1 at 2023-11-22 17:30:10 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.0ms | Allocations: 451)


Started GET "/" for 127.0.0.1 at 2023-11-22 17:30:10 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (827.0ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (314.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (42.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (42.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (50.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (48.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (53.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (47.1ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 235.1ms | Allocations: 13138)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1114)
  Rendered layouts/_sidenav.html.erb (Duration: 6.3ms | Allocations: 2723)
  Rendered layout layouts/application.html.erb (Duration: 250.0ms | Allocations: 21010)
Completed 200 OK in 1616ms (Views: 60.8ms | ActiveRecord: 1469.1ms | Allocations: 26040)


Started GET "/login" for 127.0.0.1 at 2023-11-22 17:30:16 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 5.5ms | Allocations: 2996)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1102)
  Rendered layouts/_sidenav.html.erb (Duration: 3.7ms | Allocations: 2690)
  Rendered layout layouts/application.html.erb (Duration: 15.6ms | Allocations: 10572)
Completed 200 OK in 19ms (Views: 17.2ms | ActiveRecord: 0.0ms | Allocations: 11021)


Started POST "/login" for 127.0.0.1 at 2023-11-22 17:30:22 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"gari", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (306.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 815ms (ActiveRecord: 306.8ms | Allocations: 891)


Started GET "/" for 127.0.0.1 at 2023-11-22 17:30:23 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (199.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (44.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (49.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (42.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (42.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (53.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (44.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (56.9ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 175.8ms | Allocations: 10660)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1114)
  [1m[36mUser Load (113.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (51.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 171.2ms | Allocations: 4152)
  Rendered layout layouts/application.html.erb (Duration: 353.8ms | Allocations: 19999)
Completed 200 OK in 742ms (Views: 35.2ms | ActiveRecord: 697.3ms | Allocations: 22472)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-22 17:30:25 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (41.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (45.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (55.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (43.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (67.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (48.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (69.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (55.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (61.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (51.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (42.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (67.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (55.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (48.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 113.8ms | Allocations: 3297)
  [1m[36mDish Load (80.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (48.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (53.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (49.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (45.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (46.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (54.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (43.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (53.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 3.3ms | Allocations: 881)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 449)
  [1m[36mUser Load (92.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 356.7ms | Allocations: 7978)
  Rendered layouts/_add_comment.html.erb (Duration: 2.5ms | Allocations: 689)
  [1m[35m (57.2ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (242.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (105.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 357.7ms | Allocations: 2645)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 1239.4ms | Allocations: 19261)
  Rendered layouts/_header.html.erb (Duration: 4.6ms | Allocations: 1101)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 67.3ms | Allocations: 4018)
  Rendered layout layouts/application.html.erb (Duration: 1323.9ms | Allocations: 28195)
Completed 200 OK in 2243ms (Views: 205.9ms | ActiveRecord: 1859.3ms | Allocations: 38160)


Started GET "/reviews/new?review_to=3&review_type=Restaurant" for 127.0.0.1 at 2023-11-22 17:30:34 +0100
Processing by ReviewsController#new as HTML
  Parameters: {"review_to"=>"3", "review_type"=>"Restaurant"}
  Rendering layout layouts/application.html.erb
  Rendering reviews/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 9.4ms | Allocations: 3857)
  Rendered reviews/new.html.erb within layouts/application (Duration: 9.7ms | Allocations: 3926)
  Rendered layouts/_header.html.erb (Duration: 2.8ms | Allocations: 1114)
  [1m[36mUser Load (198.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 366.0ms | Allocations: 4159)
  Rendered layout layouts/application.html.erb (Duration: 386.0ms | Allocations: 13034)
Completed 200 OK in 388ms (Views: 144.7ms | ActiveRecord: 242.1ms | Allocations: 13505)


Started POST "/restaurants/3/rank" for 127.0.0.1 at 2023-11-22 17:30:37 +0100
Processing by RanksController#create as TURBO_STREAM
  Parameters: {"rank"=>"4", "restaurant_id"=>"3"}
  [1m[36mTRANSACTION (341.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/ranks_controller.rb:4:in `create'
  [1m[36mRank Exists? (401.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."who" = $1 AND "ranks"."what" = $2 LIMIT $3[0m  [["who", "gari"], ["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/ranks_controller.rb:4:in `create'
  [1m[36mTRANSACTION (45.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/ranks_controller.rb:4:in `create'
No template found for RanksController#create, rendering head :no_content
Completed 204 No Content in 455ms (ActiveRecord: 787.9ms | Allocations: 2451)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-22 17:31:09 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"gari"}
  [1m[36mUser Load (1689.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (48.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (69.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (130.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (71.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-22 16:31:12.411056')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (47.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-22 16:31:12.485482')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (45.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-22 16:31:12.537110')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (52.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 5.8ms | Allocations: 2325)
  Rendered layouts/_header.html.erb (Duration: 3.3ms | Allocations: 1102)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.0ms | Allocations: 4019)
  Rendered layout layouts/application.html.erb (Duration: 66.7ms | Allocations: 11202)
Completed 200 OK in 2945ms (Views: 24.8ms | ActiveRecord: 2196.7ms | Allocations: 15530)


Started GET "/logout" for 127.0.0.1 at 2023-11-22 17:31:14 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 382)


Started GET "/" for 127.0.0.1 at 2023-11-22 17:31:14 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (443.9ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (129.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (360.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (153.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (789.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (149.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (91.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (62.4ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 326.2ms | Allocations: 10673)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1102)
  Rendered layouts/_sidenav.html.erb (Duration: 3.9ms | Allocations: 2690)
  Rendered layout layouts/application.html.erb (Duration: 337.3ms | Allocations: 18467)
Completed 200 OK in 2225ms (Views: 34.1ms | ActiveRecord: 2180.1ms | Allocations: 20939)


Started GET "/login" for 127.0.0.1 at 2023-11-22 17:31:18 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 6.0ms | Allocations: 2650)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1114)
  Rendered layouts/_sidenav.html.erb (Duration: 4.7ms | Allocations: 2720)
  Rendered layout layouts/application.html.erb (Duration: 18.4ms | Allocations: 10324)
Completed 200 OK in 19ms (Views: 19.0ms | ActiveRecord: 0.0ms | Allocations: 10586)


Started POST "/login" for 127.0.0.1 at 2023-11-22 17:31:23 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"juan", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (822.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 1718ms (ActiveRecord: 821.9ms | Allocations: 852)


Started GET "/" for 127.0.0.1 at 2023-11-22 17:31:25 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (192.5ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (266.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (100.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (268.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (153.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (302.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (345.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (273.3ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 953.2ms | Allocations: 10672)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1109)
  [1m[36mUser Load (44.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (47.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 105.5ms | Allocations: 4132)
  Rendered layout layouts/application.html.erb (Duration: 1067.0ms | Allocations: 19913)
Completed 200 OK in 2059ms (Views: 55.2ms | ActiveRecord: 1993.1ms | Allocations: 22386)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-22 17:31:35 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (500.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (43.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (70.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (54.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (284.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (59.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (50.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (271.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (136.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (173.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (99.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (459.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (99.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (53.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (56.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 116.3ms | Allocations: 2566)
  [1m[36mDish Load (51.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (51.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (77.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (130.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (371.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (79.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (64.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (62.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (85.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 631)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 449)
  Rendered layouts/_comment.html.erb (Duration: 230.4ms | Allocations: 6282)
  Rendered layouts/_add_comment.html.erb (Duration: 0.9ms | Allocations: 543)
  [1m[35m (227.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (57.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (124.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 191.4ms | Allocations: 2928)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 1540.3ms | Allocations: 15922)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1101)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (226.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 237.8ms | Allocations: 4033)
  Rendered layout layouts/application.html.erb (Duration: 1788.5ms | Allocations: 24834)
Completed 200 OK in 4291ms (Views: 70.5ms | ActiveRecord: 4021.5ms | Allocations: 30465)


Started GET "/reviews/new?review_to=3&review_type=Restaurant" for 127.0.0.1 at 2023-11-22 17:31:56 +0100
Processing by ReviewsController#new as HTML
  Parameters: {"review_to"=>"3", "review_type"=>"Restaurant"}
  Rendering layout layouts/application.html.erb
  Rendering reviews/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 4.6ms | Allocations: 3853)
  Rendered reviews/new.html.erb within layouts/application (Duration: 4.8ms | Allocations: 3922)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1110)
  [1m[36mUser Load (211.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (87.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 596.2ms | Allocations: 4166)
  Rendered layout layouts/application.html.erb (Duration: 611.1ms | Allocations: 13011)
Completed 200 OK in 613ms (Views: 314.4ms | ActiveRecord: 297.9ms | Allocations: 13495)


Started POST "/restaurants/3/rank" for 127.0.0.1 at 2023-11-22 17:31:59 +0100
Processing by RanksController#create as TURBO_STREAM
  Parameters: {"rank"=>"4", "restaurant_id"=>"3"}
  [1m[36mTRANSACTION (297.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/ranks_controller.rb:4:in `create'
  [1m[36mRank Exists? (357.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."who" = $1 AND "ranks"."what" = $2 LIMIT $3[0m  [["who", "juan"], ["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/ranks_controller.rb:4:in `create'
  [1m[36mRank Create (46.5ms)[0m  [1m[32mINSERT INTO "ranks" ("who", "what", "valoracion", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5)[0m  [["who", "juan"], ["what", 3], ["valoracion", 4], ["created_at", "2023-11-22 16:31:59.770947"], ["updated_at", "2023-11-22 16:31:59.770947"]]
  â†³ app/controllers/ranks_controller.rb:4:in `create'
  [1m[36mTRANSACTION (146.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/ranks_controller.rb:4:in `create'
Redirected to http://localhost:3000/restaurants/3
Completed 302 Found in 559ms (ActiveRecord: 847.5ms | Allocations: 3395)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-22 17:31:59 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (45.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (151.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (124.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (133.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (102.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (47.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (131.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (274.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (55.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (137.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (98.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (53.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (215.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (42.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 267.4ms | Allocations: 2569)
  [1m[36mDish Load (60.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (46.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (45.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (52.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (46.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (47.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (86.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (56.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (45.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 627)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 206.1ms | Allocations: 6262)
  Rendered layouts/_add_comment.html.erb (Duration: 1.2ms | Allocations: 539)
  [1m[35m (44.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (86.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (52.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 145.4ms | Allocations: 2931)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 979.0ms | Allocations: 15896)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1101)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (62.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 75.1ms | Allocations: 4019)
  Rendered layout layouts/application.html.erb (Duration: 1060.3ms | Allocations: 24794)
Completed 200 OK in 2535ms (Views: 70.2ms | ActiveRecord: 2390.7ms | Allocations: 30358)


Started GET "/reviews/new?review_to=3&review_type=Restaurant" for 127.0.0.1 at 2023-11-22 17:32:44 +0100
Processing by ReviewsController#new as HTML
  Parameters: {"review_to"=>"3", "review_type"=>"Restaurant"}
  Rendering layout layouts/application.html.erb
  Rendering reviews/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 8.4ms | Allocations: 3842)
  Rendered reviews/new.html.erb within layouts/application (Duration: 8.8ms | Allocations: 3911)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1113)
  [1m[36mUser Load (106.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (100.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 343.3ms | Allocations: 4153)
  Rendered layout layouts/application.html.erb (Duration: 358.9ms | Allocations: 13017)
Completed 200 OK in 360ms (Views: 153.2ms | ActiveRecord: 206.3ms | Allocations: 13483)


Started GET "/" for 127.0.0.1 at 2023-11-22 17:37:43 +0100
  [1m[36mActiveRecord::SchemaMigration Load (328.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (53.6ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (75.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (89.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (101.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (42.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (45.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (45.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (51.9ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 346.1ms | Allocations: 52857)
  Rendered layouts/_header.html.erb (Duration: 2.2ms | Allocations: 1439)
  [1m[36mUser Load (54.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (58.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 426.9ms | Allocations: 17527)
  Rendered layout layouts/application.html.erb (Duration: 801.9ms | Allocations: 92733)
Completed 200 OK in 2762ms (Views: 404.6ms | ActiveRecord: 1699.1ms | Allocations: 137909)


Started GET "/users/juan" for 127.0.0.1 at 2023-11-22 17:38:05 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"juan"}
  [1m[36mUser Load (44.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (46.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (45.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (45.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (44.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-22 16:38:06.030320')[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (55.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-22 16:38:06.078046')[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (47.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-22 16:38:06.136997')[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (51.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 10.0ms | Allocations: 3994)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1108)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (71.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 83.6ms | Allocations: 4028)
  Rendered layout layouts/application.html.erb (Duration: 101.2ms | Allocations: 12920)
Completed 200 OK in 729ms (Views: 31.8ms | ActiveRecord: 602.4ms | Allocations: 24484)


Started GET "/logout" for 127.0.0.1 at 2023-11-22 17:38:07 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 507)


Started GET "/" for 127.0.0.1 at 2023-11-22 17:38:07 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (100.0ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (44.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (61.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (48.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (43.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (48.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (44.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (332.3ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 458.4ms | Allocations: 10655)
  Rendered layouts/_header.html.erb (Duration: 4.7ms | Allocations: 1102)
  Rendered layouts/_sidenav.html.erb (Duration: 12.6ms | Allocations: 2692)
  Rendered layout layouts/application.html.erb (Duration: 485.6ms | Allocations: 18434)
Completed 200 OK in 795ms (Views: 61.7ms | ActiveRecord: 723.2ms | Allocations: 20919)


Started GET "/login" for 127.0.0.1 at 2023-11-22 17:38:10 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 5.4ms | Allocations: 3037)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1102)
  Rendered layouts/_sidenav.html.erb (Duration: 3.8ms | Allocations: 2690)
  Rendered layout layouts/application.html.erb (Duration: 20.2ms | Allocations: 10613)
Completed 200 OK in 21ms (Views: 20.8ms | ActiveRecord: 0.0ms | Allocations: 11087)


Started GET "/users/new" for 127.0.0.1 at 2023-11-22 17:38:11 +0100
Processing by UsersController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering users/new.html.erb within layouts/application
  Rendered users/new.html.erb within layouts/application (Duration: 6.9ms | Allocations: 2366)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1116)
  Rendered layouts/_sidenav.html.erb (Duration: 3.6ms | Allocations: 2725)
  Rendered layout layouts/application.html.erb (Duration: 18.8ms | Allocations: 10058)
Completed 200 OK in 46ms (Views: 19.5ms | ActiveRecord: 0.0ms | Allocations: 10382)


Started POST "/users/new" for 127.0.0.1 at 2023-11-22 17:38:29 +0100
Processing by UsersController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"nombre"=>"gertrudis", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"CREAR CUENTA"}
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (104.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:18:in `create'
  [1m[36mUser Create (161.6ms)[0m  [1m[32mINSERT INTO "users" ("nombre", "ruta_img_perfil", "esAdmin", "password_digest") VALUES ($1, $2, $3, $4)[0m  [["nombre", "gertrudis"], ["ruta_img_perfil", nil], ["esAdmin", false], ["password_digest", "[FILTERED]"]]
  â†³ app/controllers/users_controller.rb:18:in `create'
  [1m[36mTRANSACTION (57.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:18:in `create'
Redirected to http://localhost:3000/is_rest_owner
Completed 302 Found in 538ms (ActiveRecord: 323.3ms | Allocations: 3495)


Started GET "/is_rest_owner" for 127.0.0.1 at 2023-11-22 17:38:29 +0100
Processing by UsersController#is_restaurant_owner as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering users/is_restaurant_owner.html.erb within layouts/application
  Rendered users/is_restaurant_owner.html.erb within layouts/application (Duration: 0.9ms | Allocations: 200)
  Rendered layouts/_header.html.erb (Duration: 2.2ms | Allocations: 1133)
  [1m[36mUser Load (58.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gertrudis"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 205.3ms | Allocations: 4129)
  Rendered layout layouts/application.html.erb (Duration: 219.1ms | Allocations: 9740)
Completed 200 OK in 240ms (Views: 115.7ms | ActiveRecord: 104.1ms | Allocations: 10098)


Started GET "/" for 127.0.0.1 at 2023-11-22 17:38:32 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (92.9ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (46.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (48.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (46.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (75.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (59.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (55.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (44.4ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 183.4ms | Allocations: 10679)
  Rendered layouts/_header.html.erb (Duration: 2.3ms | Allocations: 1102)
  [1m[36mUser Load (65.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (53.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gertrudis"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 133.8ms | Allocations: 4121)
  Rendered layout layouts/application.html.erb (Duration: 327.4ms | Allocations: 19913)
Completed 200 OK in 660ms (Views: 49.7ms | ActiveRecord: 588.0ms | Allocations: 22380)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-22 17:38:39 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (397.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (47.8ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (46.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (56.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (49.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (56.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (54.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gertrudis' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (45.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (43.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gertrudis' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (61.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gertrudis' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (45.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 115.0ms | Allocations: 3279)
  [1m[36mDish Load (52.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (46.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gertrudis' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (47.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (46.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gertrudis' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (53.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (581.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gertrudis' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (72.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (43.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (213.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 911)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 449)
  [1m[36mUser Load (547.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 981.3ms | Allocations: 8911)
  Rendered layouts/_add_comment.html.erb (Duration: 3.3ms | Allocations: 712)
  [1m[35m (51.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (55.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (42.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 5.3ms | Allocations: 453)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 122.5ms | Allocations: 2955)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 2313.6ms | Allocations: 29271)
  Rendered layouts/_header.html.erb (Duration: 4.6ms | Allocations: 1115)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (48.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gertrudis"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 62.0ms | Allocations: 4054)
  Rendered layout layouts/application.html.erb (Duration: 2393.1ms | Allocations: 38288)
Completed 200 OK in 3860ms (Views: 290.0ms | ActiveRecord: 3179.0ms | Allocations: 56182)


Started GET "/reviews/new?review_to=3&review_type=Restaurant" for 127.0.0.1 at 2023-11-22 17:38:46 +0100
Processing by ReviewsController#new as HTML
  Parameters: {"review_to"=>"3", "review_type"=>"Restaurant"}
  Rendering layout layouts/application.html.erb
  Rendering reviews/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 12.0ms | Allocations: 4796)
  Rendered reviews/new.html.erb within layouts/application (Duration: 13.2ms | Allocations: 5034)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1101)
  [1m[36mUser Load (1216.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (297.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gertrudis"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 1574.5ms | Allocations: 4144)
  Rendered layout layouts/application.html.erb (Duration: 1595.8ms | Allocations: 14059)
Completed 200 OK in 1599ms (Views: 83.8ms | ActiveRecord: 1513.6ms | Allocations: 14794)


Started POST "/reviews" for 127.0.0.1 at 2023-11-22 17:39:03 +0100
Processing by ReviewsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "review"=>{"reviewable_id"=>"3", "reviewable_type"=>"Restaurant", "autor"=>"gertrudis", "contenido"=>"me dieron calabazas"}, "button"=>""}
  [1m[36mRestaurant Load (56.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:34:in `get_original_reviewed'
  [1m[36mTRANSACTION (53.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/reviews_controller.rb:24:in `create'
  [1m[36mRestaurant Load (459.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:24:in `create'
  [1m[36mReview Create (50.9ms)[0m  [1m[32mINSERT INTO "reviews" ("autor", "reviewable_type", "reviewable_id", "contenido", "ruta_img", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["autor", "gertrudis"], ["reviewable_type", "Restaurant"], ["reviewable_id", 3], ["contenido", "me dieron calabazas"], ["ruta_img", nil], ["created_at", "2023-11-22 16:39:03.384299"], ["updated_at", "2023-11-22 16:39:03.384332"]]
  â†³ app/controllers/reviews_controller.rb:24:in `create'
  [1m[36mTRANSACTION (61.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/reviews_controller.rb:24:in `create'
Redirected to http://localhost:3000/restaurants/3
Completed 302 Found in 774ms (ActiveRecord: 681.6ms | Allocations: 4381)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-22 17:39:04 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (79.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (48.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (43.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (636.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (60.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (81.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (50.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (66.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gertrudis' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (59.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (50.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (56.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (248.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gertrudis' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (76.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gertrudis' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (48.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 130.8ms | Allocations: 2583)
  [1m[36mDish Load (48.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (46.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gertrudis' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (98.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (63.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gertrudis' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (637.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (333.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gertrudis' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (920.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (59.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (46.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 6.2ms | Allocations: 632)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 449)
  [1m[36mUser Load (58.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 4.0ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 4.0ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 1127.1ms | Allocations: 9132)
  Rendered layouts/_add_comment.html.erb (Duration: 1.8ms | Allocations: 544)
  [1m[35m (325.0ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (368.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (332.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 715.0ms | Allocations: 2928)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 3550.4ms | Allocations: 18815)
  Rendered layouts/_header.html.erb (Duration: 2.4ms | Allocations: 1115)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (322.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gertrudis"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 337.2ms | Allocations: 4054)
  Rendered layout layouts/application.html.erb (Duration: 3897.4ms | Allocations: 27835)
Completed 200 OK in 5845ms (Views: 112.6ms | ActiveRecord: 5312.2ms | Allocations: 33508)


Started GET "/reviews/new?review_to=3&review_type=Restaurant" for 127.0.0.1 at 2023-11-22 17:39:26 +0100
Processing by ReviewsController#new as HTML
  Parameters: {"review_to"=>"3", "review_type"=>"Restaurant"}
  Rendering layout layouts/application.html.erb
  Rendering reviews/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 8.0ms | Allocations: 3862)
  Rendered reviews/new.html.erb within layouts/application (Duration: 8.3ms | Allocations: 3931)
  Rendered layouts/_header.html.erb (Duration: 2.4ms | Allocations: 1104)
  [1m[36mUser Load (336.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gertrudis"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 652.4ms | Allocations: 4142)
  Rendered layout layouts/application.html.erb (Duration: 670.8ms | Allocations: 12954)
Completed 200 OK in 674ms (Views: 291.8ms | ActiveRecord: 380.9ms | Allocations: 13448)


Started POST "/restaurants/3/rank" for 127.0.0.1 at 2023-11-22 17:39:29 +0100
Processing by RanksController#create as TURBO_STREAM
  Parameters: {"rank"=>"5", "restaurant_id"=>"3"}
  [1m[36mTRANSACTION (264.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/ranks_controller.rb:4:in `create'
  [1m[36mRank Exists? (356.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."who" = $1 AND "ranks"."what" = $2 LIMIT $3[0m  [["who", "gertrudis"], ["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/ranks_controller.rb:4:in `create'
  [1m[36mRank Create (99.4ms)[0m  [1m[32mINSERT INTO "ranks" ("who", "what", "valoracion", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5)[0m  [["who", "gertrudis"], ["what", 3], ["valoracion", 5], ["created_at", "2023-11-22 16:39:30.185258"], ["updated_at", "2023-11-22 16:39:30.185258"]]
  â†³ app/controllers/ranks_controller.rb:4:in `create'
  [1m[36mTRANSACTION (48.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/ranks_controller.rb:4:in `create'
Redirected to http://localhost:3000/restaurants/3
Completed 302 Found in 512ms (ActiveRecord: 768.6ms | Allocations: 2849)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-22 17:39:30 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (474.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (49.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (42.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (44.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (49.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (230.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (89.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gertrudis' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (46.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (62.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (43.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (48.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gertrudis' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (50.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gertrudis' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (44.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 101.4ms | Allocations: 2573)
  [1m[36mDish Load (49.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (43.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gertrudis' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (47.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (60.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gertrudis' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (44.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (43.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gertrudis' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (58.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (48.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (74.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.6ms | Allocations: 632)
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 448)
  [1m[36mUser Load (48.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 452)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 450)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 258.9ms | Allocations: 9124)
  Rendered layouts/_add_comment.html.erb (Duration: 1.2ms | Allocations: 544)
  [1m[35m (47.1ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (53.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (58.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 122.3ms | Allocations: 2932)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 848.6ms | Allocations: 18773)
  Rendered layouts/_header.html.erb (Duration: 2.3ms | Allocations: 1115)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (461.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gertrudis"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 473.4ms | Allocations: 4057)
  Rendered layout layouts/application.html.erb (Duration: 1333.6ms | Allocations: 27795)
Completed 200 OK in 2681ms (Views: 100.6ms | ActiveRecord: 2504.1ms | Allocations: 33460)


Started GET "/categories" for 127.0.0.1 at 2023-11-22 17:39:41 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (100.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (227.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 699.2ms | Allocations: 5094)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1127)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gertrudis"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.1ms | Allocations: 4018)
  Rendered layout layouts/application.html.erb (Duration: 761.0ms | Allocations: 14009)
Completed 200 OK in 773ms (Views: 390.3ms | ActiveRecord: 372.2ms | Allocations: 14504)


Started GET "/categories/Tapas" for 127.0.0.1 at 2023-11-22 17:39:44 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"Tapas"}
  [1m[36mCategory Load (50.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Tapas"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (49.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='Tapas' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (48.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='Tapas' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='Tapas' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (50.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Tapas"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (59.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gertrudis' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='Tapas' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (47.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (46.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Tapas"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_comment.html.erb (Duration: 49.1ms | Allocations: 633)
  Rendered layouts/_add_comment.html.erb (Duration: 1.6ms | Allocations: 751)
  Rendered categories/show.html.erb within layouts/application (Duration: 100.4ms | Allocations: 2168)
  Rendered layouts/_header.html.erb (Duration: 3.4ms | Allocations: 1101)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gertrudis"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 58.0ms | Allocations: 4018)
  Rendered layout layouts/application.html.erb (Duration: 170.8ms | Allocations: 11065)
Completed 200 OK in 1158ms (Views: 30.9ms | ActiveRecord: 443.0ms | Allocations: 14324)


Started GET "/posts/new" for 127.0.0.1 at 2023-11-22 17:39:46 +0100
Processing by PostsController#new as HTML
  [1m[35m (349.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre FROM restaurants, users, restaurants_users as ru WHERE users.nombre='gertrudis' AND users.nombre=ru.user_id AND ru.restaurant_id=restaurants.id [0m
  â†³ app/controllers/posts_controller.rb:7:in `new'
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 23.7ms | Allocations: 1913)
  Rendered posts/new.html.erb within layouts/application (Duration: 25.0ms | Allocations: 2117)
  Rendered layouts/_header.html.erb (Duration: 3.6ms | Allocations: 1115)
  [1m[36mUser Load (43.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (764.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gertrudis"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 824.0ms | Allocations: 4157)
  Rendered layout layouts/application.html.erb (Duration: 865.1ms | Allocations: 11244)
Completed 200 OK in 1220ms (Views: 59.3ms | ActiveRecord: 1157.4ms | Allocations: 12188)


Started POST "/posts" for 127.0.0.1 at 2023-11-22 17:40:07 +0100
Processing by PostsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"asOwnerOf"=>"", "contenido"=>"Tapadme este comentario mamahuevos"}, "button"=>""}
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mUser Load (47.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/controllers/posts_controller.rb:17:in `create'
  [1m[36mTRANSACTION (44.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/posts_controller.rb:23:in `create'
  [1m[36mPost Create (94.6ms)[0m  [1m[32mINSERT INTO "posts" ("categoria", "autor", "contenido", "ruta_img", "created_at", "updated_at", "restaurant_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["categoria", "Tapas"], ["autor", "gertrudis"], ["contenido", "Tapadme este comentario mamahuevos"], ["ruta_img", nil], ["created_at", "2023-11-22 16:40:07.873851"], ["updated_at", "2023-11-22 16:40:07.873858"], ["restaurant_id", nil]]
  â†³ app/controllers/posts_controller.rb:23:in `create'
  [1m[36mTRANSACTION (49.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/posts_controller.rb:23:in `create'
Redirected to http://localhost:3000/categories/Tapas
Completed 302 Found in 265ms (ActiveRecord: 236.1ms | Allocations: 2979)


Started GET "/categories/Tapas" for 127.0.0.1 at 2023-11-22 17:40:08 +0100
Processing by CategoriesController#show as TURBO_STREAM
  Parameters: {"nombre"=>"Tapas"}
  [1m[36mCategory Load (58.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Tapas"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (47.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='Tapas' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (42.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='Tapas' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (324.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='Tapas' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (54.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Tapas"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (212.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gertrudis' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='Tapas' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (54.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (61.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Tapas"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 3.5ms | Allocations: 660)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 76.1ms | Allocations: 3581)
  Rendered layouts/_add_comment.html.erb (Duration: 0.8ms | Allocations: 543)
  Rendered categories/show.html.erb within layouts/application (Duration: 133.6ms | Allocations: 4656)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1110)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (345.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gertrudis"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 359.0ms | Allocations: 4018)
  Rendered layout layouts/application.html.erb (Duration: 503.2ms | Allocations: 13631)
Completed 200 OK in 1303ms (Views: 42.7ms | ActiveRecord: 1201.8ms | Allocations: 16389)


Started POST "/reactions" for 127.0.0.1 at 2023-11-22 17:40:15 +0100
Processing by ReactionsController#create as TURBO_STREAM
  Parameters: {"reaction"=>{"reaccion"=>"Dislike", "reactionable_id"=>"47", "reactionable_type"=>"Post"}}
  [1m[36mReaction Exists? (300.1ms)[0m  [1m[34mSELECT 1 AS one FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reactionable_id" = $2 AND "reactions"."reactionable_type" = $3 LIMIT $4[0m  [["who", "gertrudis"], ["reactionable_id", 47], ["reactionable_type", "Post"], ["LIMIT", 1]]
  â†³ app/controllers/reactions_controller.rb:10:in `create'
  [1m[36mPost Load (46.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 47], ["LIMIT", 1]]
  â†³ app/controllers/reactions_controller.rb:10:in `create'
  [1m[36mCACHE Reaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reactionable_id" = $2 AND "reactions"."reactionable_type" = $3 LIMIT $4[0m  [["who", "gertrudis"], ["reactionable_id", 47], ["reactionable_type", "Post"], ["LIMIT", 1]]
  â†³ app/controllers/reactions_controller.rb:10:in `create'
  [1m[36mTRANSACTION (57.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/reactions_controller.rb:10:in `create'
  [1m[36mReaction Create (117.4ms)[0m  [1m[32mINSERT INTO "reactions" ("who", "reactionable_type", "reactionable_id", "reaccion") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["who", "gertrudis"], ["reactionable_type", "Post"], ["reactionable_id", 47], ["reaccion", "Dislike"]]
  â†³ app/controllers/reactions_controller.rb:10:in `create'
  [1m[36mTRANSACTION (56.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/reactions_controller.rb:10:in `create'
Redirected to http://localhost:3000/categories/Tapas
Completed 302 Found in 991ms (ActiveRecord: 960.6ms | Allocations: 10826)


Started GET "/categories/Tapas" for 127.0.0.1 at 2023-11-22 17:40:16 +0100
Processing by CategoriesController#show as TURBO_STREAM
  Parameters: {"nombre"=>"Tapas"}
  [1m[36mCategory Load (180.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Tapas"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (44.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='Tapas' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (49.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='Tapas' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='Tapas' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (55.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Tapas"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (58.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gertrudis' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='Tapas' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (309.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (75.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Tapas"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 659)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 451)
  Rendered layouts/_comment.html.erb (Duration: 87.0ms | Allocations: 3565)
  Rendered layouts/_add_comment.html.erb (Duration: 1.1ms | Allocations: 536)
  Rendered categories/show.html.erb within layouts/application (Duration: 400.5ms | Allocations: 4636)
  Rendered layouts/_header.html.erb (Duration: 4.0ms | Allocations: 1116)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (49.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gertrudis"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 67.0ms | Allocations: 4056)
  Rendered layout layouts/application.html.erb (Duration: 485.0ms | Allocations: 13654)
Completed 200 OK in 1043ms (Views: 51.8ms | ActiveRecord: 867.2ms | Allocations: 16446)


Started GET "/users/gertrudis" for 127.0.0.1 at 2023-11-22 17:40:25 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"gertrudis"}
  [1m[36mUser Load (96.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (46.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gertrudis"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (47.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gertrudis"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (48.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gertrudis"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (359.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-22 16:40:26.262171')[0m  [["autor", "gertrudis"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (92.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-22 16:40:26.623393')[0m  [["autor", "gertrudis"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (360.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-22 16:40:26.719422')[0m  [["autor", "gertrudis"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (56.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gertrudis"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 8.7ms | Allocations: 2306)
  Rendered layouts/_header.html.erb (Duration: 3.0ms | Allocations: 1116)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (85.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gertrudis"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 108.3ms | Allocations: 4053)
  Rendered layout layouts/application.html.erb (Duration: 133.2ms | Allocations: 11300)
Completed 200 OK in 1405ms (Views: 48.6ms | ActiveRecord: 1193.9ms | Allocations: 15637)


Started GET "/logout" for 127.0.0.1 at 2023-11-22 17:40:30 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.0ms | Allocations: 365)


Started GET "/" for 127.0.0.1 at 2023-11-22 17:40:30 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (439.2ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (43.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (54.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (46.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (50.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (46.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (47.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (43.8ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 175.7ms | Allocations: 10678)
  Rendered layouts/_header.html.erb (Duration: 4.5ms | Allocations: 1102)
  Rendered layouts/_sidenav.html.erb (Duration: 12.2ms | Allocations: 2690)
  Rendered layout layouts/application.html.erb (Duration: 212.0ms | Allocations: 18457)
Completed 200 OK in 859ms (Views: 75.4ms | ActiveRecord: 771.3ms | Allocations: 20952)


Started GET "/login" for 127.0.0.1 at 2023-11-22 17:40:33 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 2.8ms | Allocations: 2631)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1117)
  Rendered layouts/_sidenav.html.erb (Duration: 4.2ms | Allocations: 2726)
  Rendered layout layouts/application.html.erb (Duration: 20.0ms | Allocations: 10271)
Completed 200 OK in 21ms (Views: 20.5ms | ActiveRecord: 0.0ms | Allocations: 10533)


Started POST "/login" for 127.0.0.1 at 2023-11-22 17:40:37 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"gari", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (102.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 603ms (ActiveRecord: 102.4ms | Allocations: 879)


Started GET "/" for 127.0.0.1 at 2023-11-22 17:40:38 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (461.6ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (101.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (42.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (98.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (44.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (68.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (48.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (43.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 194.7ms | Allocations: 10681)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1116)
  [1m[36mUser Load (98.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (51.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 164.4ms | Allocations: 4157)
  Rendered layout layouts/application.html.erb (Duration: 367.1ms | Allocations: 20019)
Completed 200 OK in 1128ms (Views: 58.3ms | ActiveRecord: 1057.6ms | Allocations: 22494)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-22 17:40:41 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"gari"}
  [1m[36mUser Load (51.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (46.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (46.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (44.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (48.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-22 16:40:41.502274')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (327.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-22 16:40:41.552692')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (43.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-22 16:40:41.882299')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (59.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 8.3ms | Allocations: 2351)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1102)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (47.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 61.2ms | Allocations: 4018)
  Rendered layout layouts/application.html.erb (Duration: 80.1ms | Allocations: 11227)
Completed 200 OK in 815ms (Views: 33.9ms | ActiveRecord: 715.6ms | Allocations: 15572)


  [1m[36mUser Load (75.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (112.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPost Load (53.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gertrudis"]]
  [1m[36mReaction Delete All (47.2ms)[0m  [1m[31mDELETE FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2[0m  [["reactionable_id", 47], ["reactionable_type", "Post"]]
  [1m[36mResponse Load (50.9ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2[0m  [["respondable_id", 47], ["respondable_type", "Post"]]
  [1m[36mPost Destroy (68.9ms)[0m  [1m[31mDELETE FROM "posts" WHERE "posts"."id" = $1[0m  [["id", 47]]
  [1m[36mResponse Load (47.3ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gertrudis"]]
  [1m[36mReview Load (49.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gertrudis"]]
  [1m[36mResponse Load (55.5ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2[0m  [["respondable_id", 25], ["respondable_type", "Review"]]
  [1m[36mReaction Delete All (56.0ms)[0m  [1m[31mDELETE FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2[0m  [["reactionable_id", 25], ["reactionable_type", "Review"]]
  [1m[36mReview Destroy (64.9ms)[0m  [1m[31mDELETE FROM "reviews" WHERE "reviews"."id" = $1[0m  [["id", 25]]
  [1m[36mRank Delete All (50.6ms)[0m  [1m[31mDELETE FROM "ranks" WHERE "ranks"."who" = $1[0m  [["who", "gertrudis"]]
  [1m[36mReaction Delete All (71.4ms)[0m  [1m[31mDELETE FROM "reactions" WHERE "reactions"."who" = $1[0m  [["who", "gertrudis"]]
  [1m[36mTRANSACTION (75.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (45.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gertrudis"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (108.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPost Load (48.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gertrudis"]]
  [1m[36mReaction Delete All (42.9ms)[0m  [1m[31mDELETE FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2[0m  [["reactionable_id", 47], ["reactionable_type", "Post"]]
  [1m[36mResponse Load (45.7ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2[0m  [["respondable_id", 47], ["respondable_type", "Post"]]
  [1m[36mPost Destroy (44.4ms)[0m  [1m[31mDELETE FROM "posts" WHERE "posts"."id" = $1[0m  [["id", 47]]
  [1m[36mResponse Load (48.7ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gertrudis"]]
  [1m[36mReview Load (43.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gertrudis"]]
  [1m[36mResponse Load (56.9ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2[0m  [["respondable_id", 25], ["respondable_type", "Review"]]
  [1m[36mReaction Delete All (42.3ms)[0m  [1m[31mDELETE FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2[0m  [["reactionable_id", 25], ["reactionable_type", "Review"]]
  [1m[36mReview Destroy (46.3ms)[0m  [1m[31mDELETE FROM "reviews" WHERE "reviews"."id" = $1[0m  [["id", 25]]
  [1m[36mRank Delete All (43.6ms)[0m  [1m[31mDELETE FROM "ranks" WHERE "ranks"."who" = $1[0m  [["who", "gertrudis"]]
  [1m[36mReaction Delete All (78.6ms)[0m  [1m[31mDELETE FROM "reactions" WHERE "reactions"."who" = $1[0m  [["who", "gertrudis"]]
  [1m[36mUser::HABTM_Restaurants Delete All (47.5ms)[0m  [1m[31mDELETE FROM "restaurants_users" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gertrudis"]]
  [1m[36mUser Destroy (45.9ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."nombre" = $1[0m  [["nombre", "gertrudis"]]
  [1m[36mTRANSACTION (46.8ms)[0m  [1m[35mCOMMIT[0m
Started GET "/categories" for 127.0.0.1 at 2023-11-22 17:43:50 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (44.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (49.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 360.5ms | Allocations: 12171)
  Rendered layouts/_header.html.erb (Duration: 3.2ms | Allocations: 1400)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (48.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 233.8ms | Allocations: 11680)
  Rendered layout layouts/application.html.erb (Duration: 618.8ms | Allocations: 44541)
Completed 200 OK in 627ms (Views: 156.5ms | ActiveRecord: 464.3ms | Allocations: 46882)


Started GET "/categories/Tapas" for 127.0.0.1 at 2023-11-22 17:43:52 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"Tapas"}
  [1m[36mCategory Load (46.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Tapas"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (44.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='Tapas' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (46.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='Tapas' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='Tapas' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (48.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Tapas"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (45.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='Tapas' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (46.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (55.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Tapas"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_comment.html.erb (Duration: 60.5ms | Allocations: 1225)
  Rendered layouts/_add_comment.html.erb (Duration: 2.9ms | Allocations: 902)
  Rendered categories/show.html.erb within layouts/application (Duration: 115.1ms | Allocations: 3090)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1101)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (48.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 66.6ms | Allocations: 4035)
  Rendered layout layouts/application.html.erb (Duration: 189.9ms | Allocations: 12004)
Completed 200 OK in 648ms (Views: 40.6ms | ActiveRecord: 533.1ms | Allocations: 18039)


Started GET "/restaurants/3/" for 127.0.0.1 at 2023-11-22 17:44:44 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (45.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (45.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (47.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (52.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (54.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (50.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (61.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (50.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (53.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (54.0ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (45.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (71.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 124.5ms | Allocations: 3319)
  [1m[36mDish Load (60.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (46.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (57.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (54.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (80.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (45.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (73.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (74.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (43.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 3.4ms | Allocations: 882)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 449)
  [1m[36mUser Load (43.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 268.0ms | Allocations: 8492)
  Rendered layouts/_add_comment.html.erb (Duration: 1.0ms | Allocations: 540)
  [1m[35m (52.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (321.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (43.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 378.5ms | Allocations: 2648)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 1303.4ms | Allocations: 25440)
  Rendered layouts/_header.html.erb (Duration: 3.0ms | Allocations: 1107)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (59.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 73.4ms | Allocations: 4043)
  Rendered layout layouts/application.html.erb (Duration: 1388.4ms | Allocations: 34411)
Completed 200 OK in 2373ms (Views: 121.3ms | ActiveRecord: 2116.8ms | Allocations: 55703)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-22 17:45:31 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"gari"}
  [1m[36mUser Load (45.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (52.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (69.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (44.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (48.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-22 16:45:32.485562')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (43.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-22 16:45:32.536123')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (48.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-22 16:45:32.581246')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (42.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 5.9ms | Allocations: 3269)
  Rendered layouts/_header.html.erb (Duration: 2.3ms | Allocations: 1368)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 61.1ms | Allocations: 5084)
  Rendered layout layouts/application.html.erb (Duration: 88.2ms | Allocations: 28995)
Completed 200 OK in 1548ms (Views: 45.1ms | ActiveRecord: 1205.6ms | Allocations: 52345)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 17:45:33 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (100.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 16:45:34.056343')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (42.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 16:45:34.158192')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (44.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 16:45:34.202348')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (53.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (56.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:12
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 62.7ms | Allocations: 1377)
  Rendered layouts/_header.html.erb (Duration: 3.0ms | Allocations: 1133)
  [1m[36mUser Load (51.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (43.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 107.1ms | Allocations: 4131)
  Rendered layout layouts/application.html.erb (Duration: 183.1ms | Allocations: 10842)
Completed 200 OK in 456ms (Views: 33.9ms | ActiveRecord: 391.1ms | Allocations: 13106)


Started DELETE "/users/elmo" for 127.0.0.1 at 2023-11-22 17:45:48 +0100
Processing by UsersController#destroy as TURBO_STREAM
  Parameters: {"id"=>"elmo"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 737)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
NameError (undefined local variable or method `nombre' for #<UsersController:0x0000000001db28>):
  
app/controllers/users_controller.rb:77:in `destroy'
Started GET "/admin" for 127.0.0.1 at 2023-11-22 17:48:55 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (63.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 16:48:55.271964')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (72.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 16:48:55.819561')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (53.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 16:48:56.386760')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (125.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (55.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:12
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 208.0ms | Allocations: 2745)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1406)
  [1m[36mUser Load (68.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (101.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 456.6ms | Allocations: 11902)
  Rendered layout layouts/application.html.erb (Duration: 685.9ms | Allocations: 35770)
Completed 200 OK in 2129ms (Views: 73.5ms | ActiveRecord: 1720.7ms | Allocations: 49342)


Started DELETE "/users/elmo" for 127.0.0.1 at 2023-11-22 17:49:01 +0100
Processing by UsersController#destroy as TURBO_STREAM
  Parameters: {"nombre"=>"elmo"}
  [1m[36mUser Load (117.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "elmo"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:77:in `destroy'
  [1m[36mTRANSACTION (112.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:78:in `destroy'
  [1m[36mPost Load (43.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "elmo"]]
  â†³ app/controllers/users_controller.rb:78:in `destroy'
  [1m[36mResponse Load (45.2ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "elmo"]]
  â†³ app/controllers/users_controller.rb:78:in `destroy'
  [1m[36mReview Load (45.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "elmo"]]
  â†³ app/controllers/users_controller.rb:78:in `destroy'
  [1m[36mRank Delete All (42.7ms)[0m  [1m[31mDELETE FROM "ranks" WHERE "ranks"."who" = $1[0m  [["who", "elmo"]]
  â†³ app/controllers/users_controller.rb:78:in `destroy'
  [1m[36mReaction Delete All (72.4ms)[0m  [1m[31mDELETE FROM "reactions" WHERE "reactions"."who" = $1[0m  [["who", "elmo"]]
  â†³ app/controllers/users_controller.rb:78:in `destroy'
  [1m[36mUser::HABTM_Restaurants Delete All (44.4ms)[0m  [1m[31mDELETE FROM "restaurants_users" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "elmo"]]
  â†³ app/controllers/users_controller.rb:78:in `destroy'
  [1m[36mUser Destroy (47.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."nombre" = $1[0m  [["nombre", "elmo"]]
  â†³ app/controllers/users_controller.rb:78:in `destroy'
  [1m[36mTRANSACTION (54.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:78:in `destroy'
No template found for UsersController#destroy, rendering head :no_content
Completed 204 No Content in 1651ms (ActiveRecord: 1204.4ms | Allocations: 12138)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 17:52:51 +0100
  [1m[36mActiveRecord::SchemaMigration Load (51.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (48.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 16:52:53.460706')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (53.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 16:52:54.697334')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (51.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 16:52:54.825215')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (48.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (107.8ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:12
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 183.9ms | Allocations: 6850)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1478)
  [1m[36mUser Load (52.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (54.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 453.8ms | Allocations: 16444)
  Rendered layout layouts/application.html.erb (Duration: 736.2ms | Allocations: 84834)
Completed 200 OK in 2362ms (Views: 272.0ms | ActiveRecord: 1462.0ms | Allocations: 112167)


Started DELETE "/users/limon" for 127.0.0.1 at 2023-11-22 17:52:59 +0100
Processing by UsersController#destroy as TURBO_STREAM
  Parameters: {"nombre"=>"limon"}
  [1m[36mUser Load (227.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "limon"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:77:in `destroy'
  [1m[36mTRANSACTION (81.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:78:in `destroy'
  [1m[36mPost Load (56.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "limon"]]
  â†³ app/controllers/users_controller.rb:78:in `destroy'
  [1m[36mResponse Load (57.9ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "limon"]]
  â†³ app/controllers/users_controller.rb:78:in `destroy'
  [1m[36mResponse Destroy (93.6ms)[0m  [1m[31mDELETE FROM "responses" WHERE "responses"."id" = $1[0m  [["id", 15]]
  â†³ app/controllers/users_controller.rb:78:in `destroy'
  [1m[36mReview Load (56.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "limon"]]
  â†³ app/controllers/users_controller.rb:78:in `destroy'
  [1m[36mRank Delete All (89.4ms)[0m  [1m[31mDELETE FROM "ranks" WHERE "ranks"."who" = $1[0m  [["who", "limon"]]
  â†³ app/controllers/users_controller.rb:78:in `destroy'
  [1m[36mReaction Delete All (965.7ms)[0m  [1m[31mDELETE FROM "reactions" WHERE "reactions"."who" = $1[0m  [["who", "limon"]]
  â†³ app/controllers/users_controller.rb:78:in `destroy'
  [1m[36mUser::HABTM_Restaurants Delete All (59.0ms)[0m  [1m[31mDELETE FROM "restaurants_users" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "limon"]]
  â†³ app/controllers/users_controller.rb:78:in `destroy'
  [1m[36mUser Destroy (68.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."nombre" = $1[0m  [["nombre", "limon"]]
  â†³ app/controllers/users_controller.rb:78:in `destroy'
  [1m[36mTRANSACTION (62.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:78:in `destroy'
Redirected to http://localhost:3000/admin
Completed 302 Found in 4015ms (ActiveRecord: 3419.2ms | Allocations: 24328)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 17:53:03 +0100
Processing by AdminController#dashboard as TURBO_STREAM
  [1m[36mPost Count (151.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 16:53:03.998444')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (52.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 16:53:04.151134')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (51.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 16:53:04.206725')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (54.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (56.8ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:12
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 60.5ms | Allocations: 931)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1141)
  [1m[36mUser Load (47.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 111.6ms | Allocations: 4162)
  Rendered layout layouts/application.html.erb (Duration: 186.2ms | Allocations: 10527)
Completed 200 OK in 506ms (Views: 36.5ms | ActiveRecord: 459.7ms | Allocations: 12578)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-22 17:55:12 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (99.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (47.1ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (50.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (260.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (49.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (69.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (49.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (130.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (56.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (48.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (50.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (47.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (49.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (51.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (47.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 107.1ms | Allocations: 3390)
  [1m[36mDish Load (47.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (124.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (52.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (61.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (52.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (50.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (46.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (47.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (46.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 2.7ms | Allocations: 917)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 449)
  [1m[36mUser Load (84.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 303.5ms | Allocations: 8231)
  Rendered layouts/_add_comment.html.erb (Duration: 1.5ms | Allocations: 712)
  [1m[35m (55.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (46.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (47.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 107.6ms | Allocations: 2666)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 1178.0ms | Allocations: 28536)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1115)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (49.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 59.4ms | Allocations: 4054)
  Rendered layout layouts/application.html.erb (Duration: 1248.9ms | Allocations: 37567)
Completed 200 OK in 2705ms (Views: 230.4ms | ActiveRecord: 2030.9ms | Allocations: 66834)


Started GET "/restaurants/3/dishes/4/edit" for 127.0.0.1 at 2023-11-22 17:55:17 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mDish Load (47.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 23.7ms | Allocations: 3314)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 34.9ms | Allocations: 3944)
  Rendered layouts/_header.html.erb (Duration: 3.5ms | Allocations: 1101)
  [1m[36mUser Load (230.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (78.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 325.2ms | Allocations: 4122)
  Rendered layout layouts/application.html.erb (Duration: 375.8ms | Allocations: 12946)
Completed 200 OK in 626ms (Views: 68.2ms | ActiveRecord: 356.5ms | Allocations: 14436)


Started GET "/restaurants/1/" for 127.0.0.1 at 2023-11-22 17:56:06 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (524.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (51.8ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (147.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (53.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (54.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (64.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (50.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (51.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (110.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (56.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (47.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (49.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (49.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (60.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (81.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 150.9ms | Allocations: 4144)
  [1m[36mDish Load (49.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (51.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (53.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (62.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (49.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (52.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (50.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (49.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (51.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (47.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (61.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (52.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (46.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (48.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (50.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (48.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (46.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (56.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (45.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (48.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (49.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (50.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (46.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (48.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (61.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (53.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (65.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (55.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 2.5ms | Allocations: 633)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 450)
  [1m[36mUser Load (50.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 201.0ms | Allocations: 11730)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 545)
  [1m[35m (74.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 1826.4ms | Allocations: 30521)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1115)
  [1m[36mUser Load (49.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (47.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 109.6ms | Allocations: 4156)
  Rendered layout layouts/application.html.erb (Duration: 1949.0ms | Allocations: 39615)
Completed 200 OK in 3375ms (Views: 133.4ms | ActiveRecord: 3126.7ms | Allocations: 45235)


Started GET "/restaurants/1/dishes/1/edit" for 127.0.0.1 at 2023-11-22 17:56:15 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"1", "id"=>"1"}
  [1m[36mDish Load (71.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 5.3ms | Allocations: 2219)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 6.8ms | Allocations: 2563)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1101)
  [1m[36mUser Load (48.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (57.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 117.7ms | Allocations: 4121)
  Rendered layout layouts/application.html.erb (Duration: 130.4ms | Allocations: 11562)
Completed 200 OK in 355ms (Views: 25.0ms | ActiveRecord: 177.8ms | Allocations: 12230)


Started GET "/restaurants/1/edit" for 127.0.0.1 at 2023-11-22 17:56:38 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (200.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:56:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  [1m[36mCategory Load (72.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 159.1ms | Allocations: 12848)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 172.3ms | Allocations: 13179)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1101)
  [1m[36mUser Load (92.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (60.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 163.1ms | Allocations: 4126)
  Rendered layout layouts/application.html.erb (Duration: 340.8ms | Allocations: 22183)
Completed 200 OK in 762ms (Views: 56.1ms | ActiveRecord: 485.7ms | Allocations: 22929)


Started GET "/restaurants/3/" for 127.0.0.1 at 2023-11-22 17:56:48 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (108.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (88.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (51.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (48.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (52.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (48.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (48.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (249.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (56.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (51.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (48.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (83.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (47.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (61.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (74.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 144.2ms | Allocations: 2629)
  [1m[36mDish Load (100.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (47.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (55.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (49.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (85.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (49.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (63.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (62.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (46.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 632)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 448)
  [1m[36mUser Load (46.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 449)
  Rendered layouts/_comment.html.erb (Duration: 239.0ms | Allocations: 6201)
  Rendered layouts/_add_comment.html.erb (Duration: 0.9ms | Allocations: 545)
  [1m[35m (48.1ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (59.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (55.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 123.5ms | Allocations: 2632)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 960.6ms | Allocations: 15673)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1115)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.5ms | Allocations: 4053)
  Rendered layout layouts/application.html.erb (Duration: 1021.6ms | Allocations: 24691)
Completed 200 OK in 2102ms (Views: 68.8ms | ActiveRecord: 1937.2ms | Allocations: 30281)


Started GET "/restaurants/3/edit" for 127.0.0.1 at 2023-11-22 17:56:55 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (47.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:56:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  [1m[36mCategory Load (57.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 67.6ms | Allocations: 3128)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 68.3ms | Allocations: 3234)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1101)
  [1m[36mUser Load (48.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 105.3ms | Allocations: 4122)
  Rendered layout layouts/application.html.erb (Duration: 181.6ms | Allocations: 12234)
Completed 200 OK in 282ms (Views: 30.2ms | ActiveRecord: 199.3ms | Allocations: 12891)


Started GET "/restaurants/1/" for 127.0.0.1 at 2023-11-22 17:57:00 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (99.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (99.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (55.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (48.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (49.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (61.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (113.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (49.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (49.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (51.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (50.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (65.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (49.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (50.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (49.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 109.8ms | Allocations: 3248)
  [1m[36mDish Load (59.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (50.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (47.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (55.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (51.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (53.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (86.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (50.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (49.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (49.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (47.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (51.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (46.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (57.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (56.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (57.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (49.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (95.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (52.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (48.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (56.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (48.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (48.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (92.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (50.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (52.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (46.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (52.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 633)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 448)
  [1m[36mUser Load (50.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 174.8ms | Allocations: 11693)
  Rendered layouts/_add_comment.html.erb (Duration: 1.2ms | Allocations: 544)
  [1m[35m (48.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 1860.9ms | Allocations: 29589)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1115)
  [1m[36mUser Load (47.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (46.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 101.0ms | Allocations: 4156)
  Rendered layout layouts/application.html.erb (Duration: 1974.0ms | Allocations: 38685)
Completed 200 OK in 2919ms (Views: 120.6ms | ActiveRecord: 2694.2ms | Allocations: 44285)


Started GET "/restaurants/1/edit" for 127.0.0.1 at 2023-11-22 17:57:06 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (53.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:56:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  [1m[36mCategory Load (49.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 55.5ms | Allocations: 3026)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 55.8ms | Allocations: 3089)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1101)
  [1m[36mUser Load (63.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (56.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 131.8ms | Allocations: 4121)
  Rendered layout layouts/application.html.erb (Duration: 193.3ms | Allocations: 12088)
Completed 200 OK in 543ms (Views: 24.8ms | ActiveRecord: 222.8ms | Allocations: 12745)


Started GET "/" for 127.0.0.1 at 2023-11-22 19:36:03 +0100
  [1m[36mActiveRecord::SchemaMigration Load (25.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (25.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (25.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 156.0ms | Allocations: 53288)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1443)
  Rendered layouts/_sidenav.html.erb (Duration: 2.8ms | Allocations: 3548)
  Rendered layout layouts/application.html.erb (Duration: 172.0ms | Allocations: 78059)
Completed 200 OK in 1053ms (Views: 75.6ms | ActiveRecord: 633.4ms | Allocations: 123285)


Started GET "/login" for 127.0.0.1 at 2023-11-22 19:36:11 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 10.3ms | Allocations: 4326)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1102)
  Rendered layouts/_sidenav.html.erb (Duration: 1.6ms | Allocations: 2691)
  Rendered layout layouts/application.html.erb (Duration: 15.1ms | Allocations: 11899)
Completed 200 OK in 93ms (Views: 15.6ms | ActiveRecord: 51.9ms | Allocations: 19594)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 19:36:13 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (55.4ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (25.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (23.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 81.4ms | Allocations: 10731)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1102)
  Rendered layouts/_sidenav.html.erb (Duration: 1.9ms | Allocations: 2690)
  Rendered layout layouts/application.html.erb (Duration: 86.6ms | Allocations: 18484)
Completed 200 OK in 245ms (Views: 13.2ms | ActiveRecord: 228.1ms | Allocations: 21061)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-22 19:36:14 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 2.1ms | Allocations: 2978)
  [1m[36mDish Load (25.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 925)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 449)
  Rendered layouts/_comment.html.erb (Duration: 161.0ms | Allocations: 8222)
  Rendered layouts/_add_comment.html.erb (Duration: 0.7ms | Allocations: 712)
  [1m[35m (25.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 298.0ms | Allocations: 16983)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1115)
  Rendered layouts/_sidenav.html.erb (Duration: 1.7ms | Allocations: 2725)
  Rendered layout layouts/application.html.erb (Duration: 302.8ms | Allocations: 24661)
Completed 200 OK in 846ms (Views: 123.4ms | ActiveRecord: 611.0ms | Allocations: 44729)


Started GET "/reviews/new?review_to=2&review_type=Restaurant" for 127.0.0.1 at 2023-11-22 19:36:18 +0100
Processing by ReviewsController#new as HTML
  Parameters: {"review_to"=>"2", "review_type"=>"Restaurant"}
Redirected to http://localhost:3000/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 505)


Started GET "/login" for 127.0.0.1 at 2023-11-22 19:36:18 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 1.4ms | Allocations: 2643)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1102)
  Rendered layouts/_sidenav.html.erb (Duration: 1.5ms | Allocations: 2691)
  Rendered layout layouts/application.html.erb (Duration: 6.0ms | Allocations: 10212)
Completed 200 OK in 6ms (Views: 6.2ms | ActiveRecord: 0.0ms | Allocations: 10474)


Started POST "/login" for 127.0.0.1 at 2023-11-22 19:36:25 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"juan", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (25.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 219ms (ActiveRecord: 25.6ms | Allocations: 952)


Started GET "/" for 127.0.0.1 at 2023-11-22 19:36:25 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (50.6ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 79.8ms | Allocations: 10736)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1102)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 106.1ms | Allocations: 8082)
  Rendered layout layouts/application.html.erb (Duration: 189.3ms | Allocations: 23950)
Completed 200 OK in 343ms (Views: 41.0ms | ActiveRecord: 298.9ms | Allocations: 26559)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-22 19:36:27 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 51.3ms | Allocations: 2933)
  [1m[36mDish Load (24.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 645)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 82.8ms | Allocations: 4542)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 544)
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 210.7ms | Allocations: 9390)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1115)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.2ms | Allocations: 4208)
  Rendered layout layouts/application.html.erb (Duration: 267.2ms | Allocations: 18552)
Completed 200 OK in 624ms (Views: 19.3ms | ActiveRecord: 571.3ms | Allocations: 24224)


Started GET "/reviews/new?review_to=2&review_type=Restaurant" for 127.0.0.1 at 2023-11-22 19:36:30 +0100
Processing by ReviewsController#new as HTML
  Parameters: {"review_to"=>"2", "review_type"=>"Restaurant"}
  Rendering layout layouts/application.html.erb
  Rendering reviews/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 22.8ms | Allocations: 5030)
  Rendered reviews/new.html.erb within layouts/application (Duration: 23.4ms | Allocations: 5272)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1106)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 78.9ms | Allocations: 4199)
  Rendered layout layouts/application.html.erb (Duration: 105.5ms | Allocations: 14413)
Completed 200 OK in 129ms (Views: 56.2ms | ActiveRecord: 49.8ms | Allocations: 15074)


Started POST "/restaurants/2/rank" for 127.0.0.1 at 2023-11-22 19:36:47 +0100
Processing by RanksController#create as TURBO_STREAM
  Parameters: {"rank"=>"5", "restaurant_id"=>"2"}
  [1m[36mTRANSACTION (24.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/ranks_controller.rb:4:in `create'
  [1m[36mRank Exists? (50.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."who" = $1 AND "ranks"."what" = $2 LIMIT $3[0m  [["who", "juan"], ["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/ranks_controller.rb:4:in `create'
  [1m[36mRank Create (26.2ms)[0m  [1m[32mINSERT INTO "ranks" ("who", "what", "valoracion", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5)[0m  [["who", "juan"], ["what", 2], ["valoracion", 5], ["created_at", "2023-11-22 18:36:47.305033"], ["updated_at", "2023-11-22 18:36:47.305033"]]
  â†³ app/controllers/ranks_controller.rb:4:in `create'
  [1m[36mTRANSACTION (25.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/ranks_controller.rb:4:in `create'
Redirected to http://localhost:3000/restaurants/2
Completed 302 Found in 105ms (ActiveRecord: 125.9ms | Allocations: 3863)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-22 19:36:47 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 51.2ms | Allocations: 2934)
  [1m[36mDish Load (24.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (23.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 645)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 77.0ms | Allocations: 4540)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 544)
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 204.7ms | Allocations: 9384)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1101)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.0ms | Allocations: 4173)
  Rendered layout layouts/application.html.erb (Duration: 260.4ms | Allocations: 18431)
Completed 200 OK in 616ms (Views: 17.8ms | ActiveRecord: 565.5ms | Allocations: 24073)


Started GET "/reviews/new?review_to=2&review_type=Restaurant" for 127.0.0.1 at 2023-11-22 19:36:52 +0100
Processing by ReviewsController#new as HTML
  Parameters: {"review_to"=>"2", "review_type"=>"Restaurant"}
  Rendering layout layouts/application.html.erb
  Rendering reviews/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 2.9ms | Allocations: 3842)
  Rendered reviews/new.html.erb within layouts/application (Duration: 3.1ms | Allocations: 3911)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 79.7ms | Allocations: 4204)
  Rendered layout layouts/application.html.erb (Duration: 85.8ms | Allocations: 12988)
Completed 200 OK in 87ms (Views: 38.5ms | ActiveRecord: 47.6ms | Allocations: 13478)


Started POST "/reviews" for 127.0.0.1 at 2023-11-22 19:36:58 +0100
Processing by ReviewsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "review"=>{"reviewable_id"=>"2", "reviewable_type"=>"Restaurant", "autor"=>"juan", "contenido"=>"Garico Marico"}, "button"=>""}
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:34:in `get_original_reviewed'
  [1m[36mTRANSACTION (26.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/reviews_controller.rb:24:in `create'
  [1m[36mRestaurant Load (26.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:24:in `create'
  [1m[36mReview Create (25.6ms)[0m  [1m[32mINSERT INTO "reviews" ("autor", "reviewable_type", "reviewable_id", "contenido", "ruta_img", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["autor", "juan"], ["reviewable_type", "Restaurant"], ["reviewable_id", 2], ["contenido", "Garico Marico"], ["ruta_img", nil], ["created_at", "2023-11-22 18:36:58.661283"], ["updated_at", "2023-11-22 18:36:58.661292"]]
  â†³ app/controllers/reviews_controller.rb:24:in `create'
  [1m[36mTRANSACTION (26.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/reviews_controller.rb:24:in `create'
Redirected to http://localhost:3000/restaurants/2
Completed 302 Found in 162ms (ActiveRecord: 130.0ms | Allocations: 4531)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-22 19:36:58 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (26.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 51.9ms | Allocations: 2944)
  [1m[36mDish Load (24.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 645)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 81.2ms | Allocations: 6897)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 544)
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 209.0ms | Allocations: 11751)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1110)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.4ms | Allocations: 4204)
  Rendered layout layouts/application.html.erb (Duration: 265.3ms | Allocations: 20902)
Completed 200 OK in 625ms (Views: 20.2ms | ActiveRecord: 570.0ms | Allocations: 26651)


Started DELETE "/reviews/26" for 127.0.0.1 at 2023-11-22 19:37:04 +0100
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
AbstractController::ActionNotFound (The action 'destroy' could not be found for ReviewsController):
  
actionpack (7.1.2) lib/abstract_controller/base.rb:155:in `process'
actionview (7.1.2) lib/action_view/rendering.rb:40:in `process'
actionpack (7.1.2) lib/action_controller/metal.rb:227:in `dispatch'
actionpack (7.1.2) lib/action_controller/metal.rb:309:in `dispatch'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:51:in `block in serve'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:131:in `block in find_routes'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:124:in `each'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:124:in `find_routes'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:882:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.8) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.0.8) lib/rack/etag.rb:29:in `call'
rack (3.0.8) lib/rack/conditional_get.rb:43:in `call'
rack (3.0.8) lib/rack/head.rb:15:in `call'
actionpack (7.1.2) lib/action_dispatch/http/permissions_policy.rb:36:in `call'
actionpack (7.1.2) lib/action_dispatch/http/content_security_policy.rb:33:in `call'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:272:in `context'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:266:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/cookies.rb:689:in `call'
activerecord (7.1.2) lib/active_record/migration.rb:654:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
activesupport (7.1.2) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.1.2) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/actionable_exceptions.rb:16:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (7.1.2) lib/rails/rack/logger.rb:37:in `call_app'
railties (7.1.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:135:in `block in tagged'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:39:in `tagged'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:135:in `tagged'
activesupport (7.1.2) lib/active_support/broadcast_logger.rb:240:in `method_missing'
railties (7.1.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/remote_ip.rb:92:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/request_id.rb:28:in `call'
rack (3.0.8) lib/rack/method_override.rb:28:in `call'
rack (3.0.8) lib/rack/runtime.rb:24:in `call'
activesupport (7.1.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:59:in `block in call'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:24:in `collect_events'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:58:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.8) lib/rack/sendfile.rb:114:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/host_authorization.rb:141:in `call'
railties (7.1.2) lib/rails/engine.rb:529:in `call'
puma (6.4.0) lib/puma/configuration.rb:272:in `call'
puma (6.4.0) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.0) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.0) lib/puma/request.rb:99:in `handle_request'
puma (6.4.0) lib/puma/server.rb:443:in `process_client'
puma (6.4.0) lib/puma/server.rb:241:in `block in run'
puma (6.4.0) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-22 19:37:04 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (25.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (25.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 52.2ms | Allocations: 2948)
  [1m[36mDish Load (24.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (26.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 645)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 82.5ms | Allocations: 6870)
  Rendered layouts/_add_comment.html.erb (Duration: 0.4ms | Allocations: 544)
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 211.0ms | Allocations: 11728)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1115)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 55.0ms | Allocations: 4209)
  Rendered layout layouts/application.html.erb (Duration: 269.1ms | Allocations: 20890)
Completed 200 OK in 631ms (Views: 21.3ms | ActiveRecord: 575.5ms | Allocations: 26631)


Started DELETE "/reviews/26" for 127.0.0.1 at 2023-11-22 19:37:13 +0100
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
AbstractController::ActionNotFound (The action 'destroy' could not be found for ReviewsController):
  
actionpack (7.1.2) lib/abstract_controller/base.rb:155:in `process'
actionview (7.1.2) lib/action_view/rendering.rb:40:in `process'
actionpack (7.1.2) lib/action_controller/metal.rb:227:in `dispatch'
actionpack (7.1.2) lib/action_controller/metal.rb:309:in `dispatch'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:51:in `block in serve'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:131:in `block in find_routes'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:124:in `each'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:124:in `find_routes'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:882:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.8) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.0.8) lib/rack/etag.rb:29:in `call'
rack (3.0.8) lib/rack/conditional_get.rb:43:in `call'
rack (3.0.8) lib/rack/head.rb:15:in `call'
actionpack (7.1.2) lib/action_dispatch/http/permissions_policy.rb:36:in `call'
actionpack (7.1.2) lib/action_dispatch/http/content_security_policy.rb:33:in `call'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:272:in `context'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:266:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/cookies.rb:689:in `call'
activerecord (7.1.2) lib/active_record/migration.rb:654:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
activesupport (7.1.2) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.1.2) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/actionable_exceptions.rb:16:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (7.1.2) lib/rails/rack/logger.rb:37:in `call_app'
railties (7.1.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:135:in `block in tagged'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:39:in `tagged'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:135:in `tagged'
activesupport (7.1.2) lib/active_support/broadcast_logger.rb:240:in `method_missing'
railties (7.1.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/remote_ip.rb:92:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/request_id.rb:28:in `call'
rack (3.0.8) lib/rack/method_override.rb:28:in `call'
rack (3.0.8) lib/rack/runtime.rb:24:in `call'
activesupport (7.1.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:59:in `block in call'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:24:in `collect_events'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:58:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.8) lib/rack/sendfile.rb:114:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/host_authorization.rb:141:in `call'
railties (7.1.2) lib/rails/engine.rb:529:in `call'
puma (6.4.0) lib/puma/configuration.rb:272:in `call'
puma (6.4.0) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.0) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.0) lib/puma/request.rb:99:in `handle_request'
puma (6.4.0) lib/puma/server.rb:443:in `process_client'
puma (6.4.0) lib/puma/server.rb:241:in `block in run'
puma (6.4.0) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-22 19:37:13 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (25.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (25.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 51.4ms | Allocations: 2947)
  [1m[36mDish Load (24.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 645)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 80.9ms | Allocations: 6870)
  Rendered layouts/_add_comment.html.erb (Duration: 0.4ms | Allocations: 544)
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 208.3ms | Allocations: 11727)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1115)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.0ms | Allocations: 4208)
  Rendered layout layouts/application.html.erb (Duration: 264.4ms | Allocations: 20888)
Completed 200 OK in 622ms (Views: 17.4ms | ActiveRecord: 571.6ms | Allocations: 26629)


Started DELETE "/reviews/26" for 127.0.0.1 at 2023-11-22 19:37:23 +0100
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
AbstractController::ActionNotFound (The action 'destroy' could not be found for ReviewsController):
  
actionpack (7.1.2) lib/abstract_controller/base.rb:155:in `process'
actionview (7.1.2) lib/action_view/rendering.rb:40:in `process'
actionpack (7.1.2) lib/action_controller/metal.rb:227:in `dispatch'
actionpack (7.1.2) lib/action_controller/metal.rb:309:in `dispatch'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:51:in `block in serve'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:131:in `block in find_routes'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:124:in `each'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:124:in `find_routes'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:882:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.8) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.0.8) lib/rack/etag.rb:29:in `call'
rack (3.0.8) lib/rack/conditional_get.rb:43:in `call'
rack (3.0.8) lib/rack/head.rb:15:in `call'
actionpack (7.1.2) lib/action_dispatch/http/permissions_policy.rb:36:in `call'
actionpack (7.1.2) lib/action_dispatch/http/content_security_policy.rb:33:in `call'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:272:in `context'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:266:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/cookies.rb:689:in `call'
activerecord (7.1.2) lib/active_record/migration.rb:654:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
activesupport (7.1.2) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.1.2) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/actionable_exceptions.rb:16:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (7.1.2) lib/rails/rack/logger.rb:37:in `call_app'
railties (7.1.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:135:in `block in tagged'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:39:in `tagged'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:135:in `tagged'
activesupport (7.1.2) lib/active_support/broadcast_logger.rb:240:in `method_missing'
railties (7.1.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/remote_ip.rb:92:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/request_id.rb:28:in `call'
rack (3.0.8) lib/rack/method_override.rb:28:in `call'
rack (3.0.8) lib/rack/runtime.rb:24:in `call'
activesupport (7.1.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:59:in `block in call'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:24:in `collect_events'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:58:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.8) lib/rack/sendfile.rb:114:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/host_authorization.rb:141:in `call'
railties (7.1.2) lib/rails/engine.rb:529:in `call'
puma (6.4.0) lib/puma/configuration.rb:272:in `call'
puma (6.4.0) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.0) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.0) lib/puma/request.rb:99:in `handle_request'
puma (6.4.0) lib/puma/server.rb:443:in `process_client'
puma (6.4.0) lib/puma/server.rb:241:in `block in run'
puma (6.4.0) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-22 19:37:23 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (25.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (25.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 51.4ms | Allocations: 2947)
  [1m[36mDish Load (22.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (22.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 645)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 79.0ms | Allocations: 6870)
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 544)
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 204.4ms | Allocations: 11727)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1116)
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.7ms | Allocations: 4208)
  Rendered layout layouts/application.html.erb (Duration: 262.6ms | Allocations: 20889)
Completed 200 OK in 622ms (Views: 19.6ms | ActiveRecord: 567.8ms | Allocations: 26604)


Started DELETE "/reviews/26" for 127.0.0.1 at 2023-11-22 19:37:30 +0100
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
AbstractController::ActionNotFound (The action 'destroy' could not be found for ReviewsController):
  
actionpack (7.1.2) lib/abstract_controller/base.rb:155:in `process'
actionview (7.1.2) lib/action_view/rendering.rb:40:in `process'
actionpack (7.1.2) lib/action_controller/metal.rb:227:in `dispatch'
actionpack (7.1.2) lib/action_controller/metal.rb:309:in `dispatch'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:51:in `block in serve'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:131:in `block in find_routes'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:124:in `each'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:124:in `find_routes'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:882:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.8) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.0.8) lib/rack/etag.rb:29:in `call'
rack (3.0.8) lib/rack/conditional_get.rb:43:in `call'
rack (3.0.8) lib/rack/head.rb:15:in `call'
actionpack (7.1.2) lib/action_dispatch/http/permissions_policy.rb:36:in `call'
actionpack (7.1.2) lib/action_dispatch/http/content_security_policy.rb:33:in `call'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:272:in `context'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:266:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/cookies.rb:689:in `call'
activerecord (7.1.2) lib/active_record/migration.rb:654:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
activesupport (7.1.2) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.1.2) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/actionable_exceptions.rb:16:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (7.1.2) lib/rails/rack/logger.rb:37:in `call_app'
railties (7.1.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:135:in `block in tagged'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:39:in `tagged'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:135:in `tagged'
activesupport (7.1.2) lib/active_support/broadcast_logger.rb:240:in `method_missing'
railties (7.1.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/remote_ip.rb:92:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/request_id.rb:28:in `call'
rack (3.0.8) lib/rack/method_override.rb:28:in `call'
rack (3.0.8) lib/rack/runtime.rb:24:in `call'
activesupport (7.1.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:59:in `block in call'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:24:in `collect_events'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:58:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.8) lib/rack/sendfile.rb:114:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/host_authorization.rb:141:in `call'
railties (7.1.2) lib/rails/engine.rb:529:in `call'
puma (6.4.0) lib/puma/configuration.rb:272:in `call'
puma (6.4.0) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.0) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.0) lib/puma/request.rb:99:in `handle_request'
puma (6.4.0) lib/puma/server.rb:443:in `process_client'
puma (6.4.0) lib/puma/server.rb:241:in `block in run'
puma (6.4.0) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-22 19:37:30 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.8ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (25.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 51.5ms | Allocations: 2948)
  [1m[36mDish Load (24.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 645)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 80.8ms | Allocations: 6874)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 544)
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 209.0ms | Allocations: 11732)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1115)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.7ms | Allocations: 4208)
  Rendered layout layouts/application.html.erb (Duration: 264.8ms | Allocations: 20893)
Completed 200 OK in 622ms (Views: 17.8ms | ActiveRecord: 570.2ms | Allocations: 26606)


Started GET "/users/juan" for 127.0.0.1 at 2023-11-22 19:37:47 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"juan"}
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (26.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (24.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (24.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-22 18:37:48.063086')[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-22 18:37:48.088651')[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-22 18:37:48.113839')[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 18.8ms | Allocations: 3332)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1102)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.0ms | Allocations: 4069)
  Rendered layout layouts/application.html.erb (Duration: 49.8ms | Allocations: 12257)
Completed 200 OK in 327ms (Views: 25.7ms | ActiveRecord: 249.5ms | Allocations: 17925)


Started GET "/logout" for 127.0.0.1 at 2023-11-22 19:37:49 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 357)


Started GET "/" for 127.0.0.1 at 2023-11-22 19:37:49 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (49.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (23.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 81.4ms | Allocations: 10752)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1116)
  Rendered layouts/_sidenav.html.erb (Duration: 1.5ms | Allocations: 2725)
  Rendered layout layouts/application.html.erb (Duration: 86.3ms | Allocations: 18619)
Completed 200 OK in 237ms (Views: 13.0ms | ActiveRecord: 220.2ms | Allocations: 21177)


Started GET "/login" for 127.0.0.1 at 2023-11-22 19:37:50 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 1.9ms | Allocations: 2638)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1102)
  Rendered layouts/_sidenav.html.erb (Duration: 1.6ms | Allocations: 2690)
  Rendered layout layouts/application.html.erb (Duration: 6.3ms | Allocations: 10206)
Completed 200 OK in 7ms (Views: 6.8ms | ActiveRecord: 0.0ms | Allocations: 10468)


Started POST "/login" for 127.0.0.1 at 2023-11-22 19:37:53 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"gari", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 219ms (ActiveRecord: 25.0ms | Allocations: 852)


Started GET "/" for 127.0.0.1 at 2023-11-22 19:37:53 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (50.1ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 79.4ms | Allocations: 10714)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1102)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.2ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 136.9ms | Allocations: 19969)
Completed 200 OK in 290ms (Views: 14.2ms | ActiveRecord: 272.6ms | Allocations: 22528)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-22 19:37:55 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 51.9ms | Allocations: 2979)
  [1m[36mDish Load (24.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 632)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 80.9ms | Allocations: 6377)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 544)
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 210.0ms | Allocations: 11266)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1116)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.0ms | Allocations: 4210)
  Rendered layout layouts/application.html.erb (Duration: 268.9ms | Allocations: 20378)
Completed 200 OK in 627ms (Views: 22.8ms | ActiveRecord: 571.3ms | Allocations: 26133)


Started DELETE "/reviews/26" for 127.0.0.1 at 2023-11-22 19:37:58 +0100
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
AbstractController::ActionNotFound (The action 'destroy' could not be found for ReviewsController):
  
actionpack (7.1.2) lib/abstract_controller/base.rb:155:in `process'
actionview (7.1.2) lib/action_view/rendering.rb:40:in `process'
actionpack (7.1.2) lib/action_controller/metal.rb:227:in `dispatch'
actionpack (7.1.2) lib/action_controller/metal.rb:309:in `dispatch'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:51:in `block in serve'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:131:in `block in find_routes'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:124:in `each'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:124:in `find_routes'
actionpack (7.1.2) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.1.2) lib/action_dispatch/routing/route_set.rb:882:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.8) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.0.8) lib/rack/etag.rb:29:in `call'
rack (3.0.8) lib/rack/conditional_get.rb:43:in `call'
rack (3.0.8) lib/rack/head.rb:15:in `call'
actionpack (7.1.2) lib/action_dispatch/http/permissions_policy.rb:36:in `call'
actionpack (7.1.2) lib/action_dispatch/http/content_security_policy.rb:33:in `call'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:272:in `context'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:266:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/cookies.rb:689:in `call'
activerecord (7.1.2) lib/active_record/migration.rb:654:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
activesupport (7.1.2) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.1.2) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/actionable_exceptions.rb:16:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (7.1.2) lib/rails/rack/logger.rb:37:in `call_app'
railties (7.1.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:135:in `block in tagged'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:39:in `tagged'
activesupport (7.1.2) lib/active_support/tagged_logging.rb:135:in `tagged'
activesupport (7.1.2) lib/active_support/broadcast_logger.rb:240:in `method_missing'
railties (7.1.2) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/remote_ip.rb:92:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/request_id.rb:28:in `call'
rack (3.0.8) lib/rack/method_override.rb:28:in `call'
rack (3.0.8) lib/rack/runtime.rb:24:in `call'
activesupport (7.1.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:59:in `block in call'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:24:in `collect_events'
actionpack (7.1.2) lib/action_dispatch/middleware/server_timing.rb:58:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.8) lib/rack/sendfile.rb:114:in `call'
actionpack (7.1.2) lib/action_dispatch/middleware/host_authorization.rb:141:in `call'
railties (7.1.2) lib/rails/engine.rb:529:in `call'
puma (6.4.0) lib/puma/configuration.rb:272:in `call'
puma (6.4.0) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.0) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.0) lib/puma/request.rb:99:in `handle_request'
puma (6.4.0) lib/puma/server.rb:443:in `process_client'
puma (6.4.0) lib/puma/server.rb:241:in `block in run'
puma (6.4.0) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-22 19:37:58 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 51.8ms | Allocations: 2993)
  [1m[36mDish Load (24.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 632)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  [1m[36mUser Load (24.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 80.1ms | Allocations: 6376)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 544)
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 208.2ms | Allocations: 11279)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1115)
  [1m[36mUser Load (23.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 50.3ms | Allocations: 4209)
  Rendered layout layouts/application.html.erb (Duration: 261.6ms | Allocations: 20441)
Completed 200 OK in 622ms (Views: 17.0ms | ActiveRecord: 570.1ms | Allocations: 26211)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-22 19:39:01 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (25.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (23.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 84.1ms | Allocations: 9136)
  [1m[36mDish Load (24.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 882)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 449)
  [1m[36mUser Load (24.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 83.4ms | Allocations: 9266)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 690)
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 301.2ms | Allocations: 24231)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1374)
  [1m[36mUser Load (24.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 81.7ms | Allocations: 7650)
  Rendered layout layouts/application.html.erb (Duration: 391.7ms | Allocations: 52459)
Completed 200 OK in 1010ms (Views: 44.9ms | ActiveRecord: 904.1ms | Allocations: 78825)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-22 19:39:03 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"gari"}
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (24.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (25.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (24.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-22 18:39:03.890379')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-22 18:39:03.915735')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (25.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-22 18:39:03.941074')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 3.2ms | Allocations: 3184)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1108)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.7ms | Allocations: 4081)
  Rendered layout layouts/application.html.erb (Duration: 34.3ms | Allocations: 12152)
Completed 200 OK in 292ms (Views: 10.4ms | ActiveRecord: 247.2ms | Allocations: 17703)


Started DELETE "/reviews/26" for 127.0.0.1 at 2023-11-22 19:39:08 +0100
Processing by ReviewsController#destroy as TURBO_STREAM
  Parameters: {"id"=>"26"}
  [1m[36mReview Load (25.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:31:in `destroy'
  [1m[36mTRANSACTION (25.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/reviews_controller.rb:32:in `destroy'
  [1m[36mResponse Load (25.5ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2[0m  [["respondable_id", 26], ["respondable_type", "Review"]]
  â†³ app/controllers/reviews_controller.rb:32:in `destroy'
  [1m[36mReaction Delete All (24.5ms)[0m  [1m[31mDELETE FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2[0m  [["reactionable_id", 26], ["reactionable_type", "Review"]]
  â†³ app/controllers/reviews_controller.rb:32:in `destroy'
  [1m[36mReview Destroy (25.2ms)[0m  [1m[31mDELETE FROM "reviews" WHERE "reviews"."id" = $1[0m  [["id", 26]]
  â†³ app/controllers/reviews_controller.rb:32:in `destroy'
  [1m[36mTRANSACTION (25.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/reviews_controller.rb:32:in `destroy'
No template found for ReviewsController#destroy, rendering head :no_content
Completed 204 No Content in 327ms (ActiveRecord: 256.1ms | Allocations: 7734)


Started DELETE "/reviews/26" for 127.0.0.1 at 2023-11-22 19:39:12 +0100
Processing by ReviewsController#destroy as TURBO_STREAM
  Parameters: {"id"=>"26"}
  [1m[36mReview Load (24.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:31:in `destroy'
Completed 404 Not Found in 50ms (ActiveRecord: 24.6ms | Allocations: 1144)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::RecordNotFound (Couldn't find Review with 'id'=26):
  
app/controllers/reviews_controller.rb:31:in `destroy'
Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-22 19:39:13 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 51.7ms | Allocations: 2995)
  [1m[36mDish Load (24.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 632)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 53.2ms | Allocations: 3633)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 544)
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 180.6ms | Allocations: 8540)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1115)
  [1m[36mUser Load (23.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 51.5ms | Allocations: 4209)
  Rendered layout layouts/application.html.erb (Duration: 235.2ms | Allocations: 17702)
Completed 200 OK in 594ms (Views: 15.3ms | ActiveRecord: 544.2ms | Allocations: 23368)


Started GET "/reviews/new?review_to=2&review_type=Restaurant" for 127.0.0.1 at 2023-11-22 19:39:16 +0100
Processing by ReviewsController#new as HTML
  Parameters: {"review_to"=>"2", "review_type"=>"Restaurant"}
  Rendering layout layouts/application.html.erb
  Rendering reviews/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 19.5ms | Allocations: 4538)
  Rendered reviews/new.html.erb within layouts/application (Duration: 21.7ms | Allocations: 4771)
  Rendered layouts/_header.html.erb (Duration: 4.2ms | Allocations: 1101)
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 79.0ms | Allocations: 4196)
  Rendered layout layouts/application.html.erb (Duration: 121.3ms | Allocations: 13843)
Completed 200 OK in 124ms (Views: 73.8ms | ActiveRecord: 49.2ms | Allocations: 14520)


Started POST "/reviews" for 127.0.0.1 at 2023-11-22 19:39:23 +0100
Processing by ReviewsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "review"=>{"reviewable_id"=>"2", "reviewable_type"=>"Restaurant", "autor"=>"gari", "contenido"=>"garico tremendo marico"}, "button"=>""}
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:42:in `get_original_reviewed'
  [1m[36mTRANSACTION (25.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/reviews_controller.rb:24:in `create'
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:24:in `create'
  [1m[36mReview Create (25.7ms)[0m  [1m[32mINSERT INTO "reviews" ("autor", "reviewable_type", "reviewable_id", "contenido", "ruta_img", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["autor", "gari"], ["reviewable_type", "Restaurant"], ["reviewable_id", 2], ["contenido", "garico tremendo marico"], ["ruta_img", nil], ["created_at", "2023-11-22 18:39:23.367834"], ["updated_at", "2023-11-22 18:39:23.367842"]]
  â†³ app/controllers/reviews_controller.rb:24:in `create'
  [1m[36mTRANSACTION (25.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/reviews_controller.rb:24:in `create'
Redirected to http://localhost:3000/restaurants/2
Completed 302 Found in 158ms (ActiveRecord: 127.8ms | Allocations: 4342)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-22 19:39:23 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.5ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 52.7ms | Allocations: 2986)
  [1m[36mDish Load (24.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 632)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 56.6ms | Allocations: 6085)
  Rendered layouts/_add_comment.html.erb (Duration: 0.4ms | Allocations: 544)
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 185.4ms | Allocations: 11024)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1107)
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.9ms | Allocations: 4198)
  Rendered layout layouts/application.html.erb (Duration: 242.4ms | Allocations: 20127)
Completed 200 OK in 598ms (Views: 19.4ms | ActiveRecord: 546.9ms | Allocations: 25882)


Started DELETE "/reviews/27" for 127.0.0.1 at 2023-11-22 19:39:27 +0100
Processing by ReviewsController#destroy as TURBO_STREAM
  Parameters: {"id"=>"27"}
  [1m[36mReview Load (24.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:31:in `destroy'
  [1m[36mTRANSACTION (24.9ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/reviews_controller.rb:32:in `destroy'
  [1m[36mResponse Load (25.5ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2[0m  [["respondable_id", 27], ["respondable_type", "Review"]]
  â†³ app/controllers/reviews_controller.rb:32:in `destroy'
  [1m[36mReaction Delete All (24.2ms)[0m  [1m[31mDELETE FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2[0m  [["reactionable_id", 27], ["reactionable_type", "Review"]]
  â†³ app/controllers/reviews_controller.rb:32:in `destroy'
  [1m[36mReview Destroy (24.9ms)[0m  [1m[31mDELETE FROM "reviews" WHERE "reviews"."id" = $1[0m  [["id", 27]]
  â†³ app/controllers/reviews_controller.rb:32:in `destroy'
  [1m[36mTRANSACTION (25.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/reviews_controller.rb:32:in `destroy'
No template found for ReviewsController#destroy, rendering head :no_content
Completed 204 No Content in 179ms (ActiveRecord: 148.8ms | Allocations: 3479)


Started DELETE "/reviews/27" for 127.0.0.1 at 2023-11-22 19:39:31 +0100
Processing by ReviewsController#destroy as TURBO_STREAM
  Parameters: {"id"=>"27"}
  [1m[36mReview Load (24.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:31:in `destroy'
Completed 404 Not Found in 51ms (ActiveRecord: 24.5ms | Allocations: 1115)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::RecordNotFound (Couldn't find Review with 'id'=27):
  
app/controllers/reviews_controller.rb:31:in `destroy'
Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-22 19:39:32 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 51.5ms | Allocations: 2993)
  [1m[36mDish Load (24.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 632)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 52.5ms | Allocations: 3633)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 544)
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 180.0ms | Allocations: 8536)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1115)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.3ms | Allocations: 4209)
  Rendered layout layouts/application.html.erb (Duration: 235.4ms | Allocations: 17698)
Completed 200 OK in 592ms (Views: 15.3ms | ActiveRecord: 542.8ms | Allocations: 23349)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-22 19:39:34 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"gari"}
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (25.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (25.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (25.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-22 18:39:34.936661')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-22 18:39:34.961603')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-22 18:39:34.986949')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (24.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 1.8ms | Allocations: 2325)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1102)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.8ms | Allocations: 4104)
  Rendered layout layouts/application.html.erb (Duration: 34.0ms | Allocations: 11282)
Completed 200 OK in 265ms (Views: 10.1ms | ActiveRecord: 223.6ms | Allocations: 15768)


Started GET "/logout" for 127.0.0.1 at 2023-11-22 19:39:35 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 415)


Started GET "/" for 127.0.0.1 at 2023-11-22 19:39:35 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (49.6ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 107.8ms | Allocations: 13171)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1108)
  Rendered layouts/_sidenav.html.erb (Duration: 1.9ms | Allocations: 2713)
  Rendered layout layouts/application.html.erb (Duration: 113.4ms | Allocations: 21000)
Completed 200 OK in 267ms (Views: 15.4ms | ActiveRecord: 246.2ms | Allocations: 25335)


Started GET "/login" for 127.0.0.1 at 2023-11-22 19:39:36 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 3.3ms | Allocations: 2959)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1102)
  Rendered layouts/_sidenav.html.erb (Duration: 2.5ms | Allocations: 2690)
  Rendered layout layouts/application.html.erb (Duration: 9.0ms | Allocations: 10530)
Completed 200 OK in 10ms (Views: 9.5ms | ActiveRecord: 0.0ms | Allocations: 10980)


Started POST "/login" for 127.0.0.1 at 2023-11-22 19:39:40 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"juan", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 220ms (ActiveRecord: 25.6ms | Allocations: 870)


Started GET "/" for 127.0.0.1 at 2023-11-22 19:39:40 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (50.9ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (22.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 79.1ms | Allocations: 10703)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1103)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.4ms | Allocations: 4173)
  Rendered layout layouts/application.html.erb (Duration: 136.2ms | Allocations: 19956)
Completed 200 OK in 287ms (Views: 14.5ms | ActiveRecord: 269.0ms | Allocations: 22521)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 19:39:43 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (49.2ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 80.0ms | Allocations: 10723)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1117)
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.3ms | Allocations: 4208)
  Rendered layout layouts/application.html.erb (Duration: 140.4ms | Allocations: 20043)
Completed 200 OK in 292ms (Views: 17.5ms | ActiveRecord: 270.9ms | Allocations: 22601)


Started GET "/restaurants/1" for 127.0.0.1 at 2023-11-22 19:39:45 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.1ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 52.7ms | Allocations: 3733)
  [1m[36mDish Load (24.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 633)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 93.3ms | Allocations: 19670)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 544)
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 835.6ms | Allocations: 45072)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1115)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.3ms | Allocations: 4195)
  Rendered layout layouts/application.html.erb (Duration: 892.4ms | Allocations: 54161)
Completed 200 OK in 1249ms (Views: 52.7ms | ActiveRecord: 1163.0ms | Allocations: 60239)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-22 19:39:49 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 52.8ms | Allocations: 2604)
  [1m[36mDish Load (25.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 625)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 453)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 83.9ms | Allocations: 6332)
  Rendered layouts/_add_comment.html.erb (Duration: 0.4ms | Allocations: 544)
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 453)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 52.2ms | Allocations: 2978)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 368.2ms | Allocations: 16197)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1115)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.5ms | Allocations: 4103)
  Rendered layout layouts/application.html.erb (Duration: 400.2ms | Allocations: 25253)
Completed 200 OK in 757ms (Views: 28.0ms | ActiveRecord: 693.9ms | Allocations: 33946)


Started GET "/reviews/new?review_to=3&review_type=Restaurant" for 127.0.0.1 at 2023-11-22 19:39:59 +0100
Processing by ReviewsController#new as HTML
  Parameters: {"review_to"=>"3", "review_type"=>"Restaurant"}
  Rendering layout layouts/application.html.erb
  Rendering reviews/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 2.9ms | Allocations: 3858)
  Rendered reviews/new.html.erb within layouts/application (Duration: 3.0ms | Allocations: 3927)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1101)
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 78.9ms | Allocations: 4175)
  Rendered layout layouts/application.html.erb (Duration: 85.0ms | Allocations: 12975)
Completed 200 OK in 86ms (Views: 34.7ms | ActiveRecord: 50.6ms | Allocations: 13455)


Started POST "/reviews" for 127.0.0.1 at 2023-11-22 19:40:07 +0100
Processing by ReviewsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "review"=>{"reviewable_id"=>"3", "reviewable_type"=>"Restaurant", "autor"=>"juan", "contenido"=>"hoy me levantÃ© reloco"}, "button"=>""}
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:42:in `get_original_reviewed'
  [1m[36mTRANSACTION (26.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/reviews_controller.rb:24:in `create'
  [1m[36mRestaurant Load (31.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:24:in `create'
  [1m[36mReview Create (25.3ms)[0m  [1m[32mINSERT INTO "reviews" ("autor", "reviewable_type", "reviewable_id", "contenido", "ruta_img", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["autor", "juan"], ["reviewable_type", "Restaurant"], ["reviewable_id", 3], ["contenido", "hoy me levantÃ© reloco"], ["ruta_img", nil], ["created_at", "2023-11-22 18:40:07.382391"], ["updated_at", "2023-11-22 18:40:07.382397"]]
  â†³ app/controllers/reviews_controller.rb:24:in `create'
  [1m[36mTRANSACTION (24.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/reviews_controller.rb:24:in `create'
Redirected to http://localhost:3000/restaurants/3
Completed 302 Found in 164ms (ActiveRecord: 132.9ms | Allocations: 3344)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-22 19:40:07 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (25.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 51.5ms | Allocations: 2602)
  [1m[36mDish Load (24.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 628)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 84.1ms | Allocations: 8487)
  Rendered layouts/_add_comment.html.erb (Duration: 0.4ms | Allocations: 544)
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (24.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 53.0ms | Allocations: 2962)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 366.7ms | Allocations: 18303)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1102)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.3ms | Allocations: 4068)
  Rendered layout layouts/application.html.erb (Duration: 399.6ms | Allocations: 27246)
Completed 200 OK in 756ms (Views: 28.3ms | ActiveRecord: 695.4ms | Allocations: 33171)


Started DELETE "/reviews/28" for 127.0.0.1 at 2023-11-22 19:40:11 +0100
Processing by ReviewsController#destroy as TURBO_STREAM
  Parameters: {"id"=>"28"}
  [1m[36mReview Load (24.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:31:in `destroy'
  [1m[36mTRANSACTION (25.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/reviews_controller.rb:32:in `destroy'
  [1m[36mResponse Load (25.2ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2[0m  [["respondable_id", 28], ["respondable_type", "Review"]]
  â†³ app/controllers/reviews_controller.rb:32:in `destroy'
  [1m[36mReaction Delete All (24.6ms)[0m  [1m[31mDELETE FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2[0m  [["reactionable_id", 28], ["reactionable_type", "Review"]]
  â†³ app/controllers/reviews_controller.rb:32:in `destroy'
  [1m[36mReview Destroy (24.8ms)[0m  [1m[31mDELETE FROM "reviews" WHERE "reviews"."id" = $1[0m  [["id", 28]]
  â†³ app/controllers/reviews_controller.rb:32:in `destroy'
  [1m[36mTRANSACTION (39.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/reviews_controller.rb:32:in `destroy'
No template found for ReviewsController#destroy, rendering head :no_content
Completed 204 No Content in 193ms (ActiveRecord: 162.5ms | Allocations: 3463)


Started DELETE "/reviews/28" for 127.0.0.1 at 2023-11-22 19:40:13 +0100
Processing by ReviewsController#destroy as TURBO_STREAM
  Parameters: {"id"=>"28"}
  [1m[36mReview Load (24.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:31:in `destroy'
Completed 404 Not Found in 50ms (ActiveRecord: 24.3ms | Allocations: 1107)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::RecordNotFound (Couldn't find Review with 'id'=28):
  
app/controllers/reviews_controller.rb:31:in `destroy'
Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-22 19:40:13 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.5ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 51.0ms | Allocations: 2614)
  [1m[36mDish Load (24.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (25.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 632)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 79.8ms | Allocations: 6354)
  Rendered layouts/_add_comment.html.erb (Duration: 1.6ms | Allocations: 544)
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (24.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 453)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 51.6ms | Allocations: 2971)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 362.6ms | Allocations: 16195)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1115)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.3ms | Allocations: 4103)
  Rendered layout layouts/application.html.erb (Duration: 394.1ms | Allocations: 25251)
Completed 200 OK in 751ms (Views: 24.9ms | ActiveRecord: 694.2ms | Allocations: 31110)


Started GET "/users/juan" for 127.0.0.1 at 2023-11-22 19:40:26 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"juan"}
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (26.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-22 18:40:26.816240')[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-22 18:40:26.841285')[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-22 18:40:26.866374')[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 1.9ms | Allocations: 2305)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1102)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.7ms | Allocations: 4068)
  Rendered layout layouts/application.html.erb (Duration: 34.5ms | Allocations: 11226)
Completed 200 OK in 266ms (Views: 10.2ms | ActiveRecord: 226.5ms | Allocations: 15687)


Started GET "/logout" for 127.0.0.1 at 2023-11-22 19:40:27 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 330)


Started GET "/" for 127.0.0.1 at 2023-11-22 19:40:27 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (48.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 79.6ms | Allocations: 10737)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1102)
  Rendered layouts/_sidenav.html.erb (Duration: 1.7ms | Allocations: 2691)
  Rendered layout layouts/application.html.erb (Duration: 85.2ms | Allocations: 18510)
Completed 200 OK in 235ms (Views: 12.6ms | ActiveRecord: 219.3ms | Allocations: 21066)


Started GET "/login" for 127.0.0.1 at 2023-11-22 19:40:28 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 1.6ms | Allocations: 2632)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1102)
  Rendered layouts/_sidenav.html.erb (Duration: 1.8ms | Allocations: 2690)
  Rendered layout layouts/application.html.erb (Duration: 6.8ms | Allocations: 10200)
Completed 200 OK in 7ms (Views: 7.1ms | ActiveRecord: 0.0ms | Allocations: 10462)


Started POST "/login" for 127.0.0.1 at 2023-11-22 19:40:31 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"gari", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 220ms (ActiveRecord: 25.0ms | Allocations: 843)


Started GET "/" for 127.0.0.1 at 2023-11-22 19:40:31 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (50.0ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 79.3ms | Allocations: 10703)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1116)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.1ms | Allocations: 4209)
  Rendered layout layouts/application.html.erb (Duration: 137.3ms | Allocations: 20076)
Completed 200 OK in 290ms (Views: 15.1ms | ActiveRecord: 271.4ms | Allocations: 22636)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-22 19:40:35 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"gari"}
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (26.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (24.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-22 18:40:35.491954')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (25.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-22 18:40:35.517441')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (24.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-22 18:40:35.543326')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (24.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 2.6ms | Allocations: 2332)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1111)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.8ms | Allocations: 4102)
  Rendered layout layouts/application.html.erb (Duration: 34.7ms | Allocations: 11341)
Completed 200 OK in 267ms (Views: 9.7ms | ActiveRecord: 226.1ms | Allocations: 15846)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 19:40:36 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (50.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 18:40:36.087701')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (26.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 18:40:36.138712')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (24.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 18:40:36.165808')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (25.9ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:12
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 27.5ms | Allocations: 1317)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1127)
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.5ms | Allocations: 4175)
  Rendered layout layouts/application.html.erb (Duration: 83.8ms | Allocations: 10812)
Completed 200 OK in 239ms (Views: 9.3ms | ActiveRecord: 202.2ms | Allocations: 13151)


Started GET "/admin/actualizar_datos" for 127.0.0.1 at 2023-11-22 19:40:39 +0100
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionController::RoutingError (uninitialized constant Admin):
  
Started GET "/admin" for 127.0.0.1 at 2023-11-22 19:40:41 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (51.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 18:40:41.734303')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (25.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 18:40:41.786224')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (25.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 18:40:41.812023')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (25.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (25.9ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:12
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 27.3ms | Allocations: 952)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1141)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.5ms | Allocations: 4209)
  Rendered layout layouts/application.html.erb (Duration: 85.5ms | Allocations: 10564)
Completed 200 OK in 216ms (Views: 10.1ms | ActiveRecord: 202.5ms | Allocations: 12736)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-22 19:40:49 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"gari"}
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (25.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (26.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (24.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-22 18:40:49.199626')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (24.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-22 18:40:49.225177')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (24.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-22 18:40:49.250670')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (24.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 1.8ms | Allocations: 2332)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1104)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.4ms | Allocations: 4069)
  Rendered layout layouts/application.html.erb (Duration: 33.4ms | Allocations: 11293)
Completed 200 OK in 268ms (Views: 9.0ms | ActiveRecord: 227.3ms | Allocations: 15758)


Started DELETE "/users/tumama" for 127.0.0.1 at 2023-11-22 19:41:07 +0100
Processing by UsersController#destroy as TURBO_STREAM
  Parameters: {"nombre"=>"tumama"}
  [1m[36mUser Load (23.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "tumama"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:77:in `destroy'
  [1m[36mTRANSACTION (24.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:78:in `destroy'
  [1m[36mPost Load (25.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "tumama"]]
  â†³ app/controllers/users_controller.rb:78:in `destroy'
  [1m[36mResponse Load (24.2ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "tumama"]]
  â†³ app/controllers/users_controller.rb:78:in `destroy'
  [1m[36mReview Load (24.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "tumama"]]
  â†³ app/controllers/users_controller.rb:78:in `destroy'
  [1m[36mRank Delete All (25.1ms)[0m  [1m[31mDELETE FROM "ranks" WHERE "ranks"."who" = $1[0m  [["who", "tumama"]]
  â†³ app/controllers/users_controller.rb:78:in `destroy'
  [1m[36mReaction Delete All (24.7ms)[0m  [1m[31mDELETE FROM "reactions" WHERE "reactions"."who" = $1[0m  [["who", "tumama"]]
  â†³ app/controllers/users_controller.rb:78:in `destroy'
  [1m[36mUser::HABTM_Restaurants Delete All (26.3ms)[0m  [1m[31mDELETE FROM "restaurants_users" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "tumama"]]
  â†³ app/controllers/users_controller.rb:78:in `destroy'
  [1m[36mUser Destroy (26.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."nombre" = $1[0m  [["nombre", "tumama"]]
  â†³ app/controllers/users_controller.rb:78:in `destroy'
  [1m[36mTRANSACTION (26.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:78:in `destroy'
Redirected to http://localhost:3000/admin
Completed 302 Found in 382ms (ActiveRecord: 275.4ms | Allocations: 8815)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 19:41:08 +0100
Processing by AdminController#dashboard as TURBO_STREAM
  [1m[36mPost Count (49.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 18:41:08.016685')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 18:41:08.066591')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (25.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 18:41:08.091749')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (26.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (25.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:12
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 26.8ms | Allocations: 910)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1127)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.1ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 84.6ms | Allocations: 10394)
Completed 200 OK in 213ms (Views: 9.9ms | ActiveRecord: 200.6ms | Allocations: 12469)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 19:41:20 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (49.2ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (28.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 80.7ms | Allocations: 10432)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1102)
  [1m[36mUser Load (24.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.6ms | Allocations: 4182)
  Rendered layout layouts/application.html.erb (Duration: 138.7ms | Allocations: 19692)
Completed 200 OK in 294ms (Views: 16.2ms | ActiveRecord: 274.2ms | Allocations: 22253)


Started GET "/categories" for 127.0.0.1 at 2023-11-22 19:41:23 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 79.0ms | Allocations: 5147)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1133)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.5ms | Allocations: 4087)
  Rendered layout layouts/application.html.erb (Duration: 109.9ms | Allocations: 14180)
Completed 200 OK in 123ms (Views: 37.4ms | ActiveRecord: 73.0ms | Allocations: 14673)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-22 19:41:23 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (25.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "pipi"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 658)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 83.4ms | Allocations: 6572)
  Rendered layouts/_add_comment.html.erb (Duration: 0.4ms | Allocations: 543)
  Rendered categories/show.html.erb within layouts/application (Duration: 110.3ms | Allocations: 7974)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1101)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 29.6ms | Allocations: 4068)
  Rendered layout layouts/application.html.erb (Duration: 143.3ms | Allocations: 16916)
Completed 200 OK in 376ms (Views: 18.4ms | ActiveRecord: 275.1ms | Allocations: 20459)


Started GET "/categories/chino" for 127.0.0.1 at 2023-11-22 19:41:26 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"chino"}
  [1m[36mCategory Load (24.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "chino"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='chino' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 652)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 6.1ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 2.1ms | Allocations: 447)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 3.1ms | Allocations: 457)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 451)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 449)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 449)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mUser Load (23.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "darkskills"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "darkskills"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 170.7ms | Allocations: 38893)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 543)
  Rendered categories/show.html.erb within layouts/application (Duration: 196.9ms | Allocations: 40051)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1115)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.9ms | Allocations: 4103)
  Rendered layout layouts/application.html.erb (Duration: 227.7ms | Allocations: 49082)
Completed 200 OK in 405ms (Views: 79.4ms | ActiveRecord: 296.7ms | Allocations: 52920)


Started GET "/categories/Turca" for 127.0.0.1 at 2023-11-22 19:41:36 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"Turca"}
  [1m[36mCategory Load (26.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Turca"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='Turca' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='Turca' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='Turca' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Turca"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='Turca' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (23.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Turca"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 653)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 28.9ms | Allocations: 3892)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 536)
  Rendered categories/show.html.erb within layouts/application (Duration: 55.5ms | Allocations: 5043)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.9ms | Allocations: 4068)
  Rendered layout layouts/application.html.erb (Duration: 87.4ms | Allocations: 13985)
Completed 200 OK in 269ms (Views: 14.9ms | ActiveRecord: 224.2ms | Allocations: 16841)


Started GET "/categories/Gourmet" for 127.0.0.1 at 2023-11-22 19:41:40 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"Gourmet"}
  [1m[36mCategory Load (25.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Gourmet"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='Gourmet' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='Gourmet' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='Gourmet' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Gourmet"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='Gourmet' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Gourmet"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_comment.html.erb (Duration: 25.8ms | Allocations: 664)
  Rendered layouts/_add_comment.html.erb (Duration: 0.7ms | Allocations: 749)
  Rendered categories/show.html.erb within layouts/application (Duration: 52.4ms | Allocations: 2028)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1101)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.4ms | Allocations: 4068)
  Rendered layout layouts/application.html.erb (Duration: 83.6ms | Allocations: 10970)
Completed 200 OK in 261ms (Views: 8.7ms | ActiveRecord: 224.5ms | Allocations: 13735)


Started GET "/categories/pizza" for 127.0.0.1 at 2023-11-22 19:41:42 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"pizza"}
  [1m[36mCategory Load (25.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "pizza"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='pizza' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='pizza' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='pizza' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "pizza"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='pizza' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "pizza"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 660)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 28.9ms | Allocations: 3913)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 543)
  Rendered categories/show.html.erb within layouts/application (Duration: 55.2ms | Allocations: 5071)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1116)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.2ms | Allocations: 4103)
  Rendered layout layouts/application.html.erb (Duration: 86.6ms | Allocations: 14130)
Completed 200 OK in 267ms (Views: 12.8ms | ActiveRecord: 224.2ms | Allocations: 16985)


Started GET "/categories/Tapas" for 127.0.0.1 at 2023-11-22 19:41:44 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"Tapas"}
  [1m[36mCategory Load (25.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Tapas"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='Tapas' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='Tapas' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='Tapas' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Tapas"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='Tapas' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Tapas"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_comment.html.erb (Duration: 26.1ms | Allocations: 664)
  Rendered layouts/_add_comment.html.erb (Duration: 0.7ms | Allocations: 756)
  Rendered categories/show.html.erb within layouts/application (Duration: 52.7ms | Allocations: 2035)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1101)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.0ms | Allocations: 4068)
  Rendered layout layouts/application.html.erb (Duration: 83.1ms | Allocations: 11032)
Completed 200 OK in 259ms (Views: 9.4ms | ActiveRecord: 221.8ms | Allocations: 13797)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 19:41:47 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (50.1ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (22.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 80.9ms | Allocations: 10432)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1102)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.9ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 139.1ms | Allocations: 19706)
Completed 200 OK in 290ms (Views: 16.5ms | ActiveRecord: 269.7ms | Allocations: 22416)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-22 19:41:48 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 51.1ms | Allocations: 2643)
  [1m[36mDish Load (24.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 626)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 53.1ms | Allocations: 3620)
  Rendered layouts/_add_comment.html.erb (Duration: 0.4ms | Allocations: 537)
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 180.3ms | Allocations: 8166)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1101)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.8ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 237.2ms | Allocations: 17214)
Completed 200 OK in 595ms (Views: 16.1ms | ActiveRecord: 544.7ms | Allocations: 22878)


Started GET "/restaurants/7" for 127.0.0.1 at 2023-11-22 19:41:54 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.9ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 52.7ms | Allocations: 1446)
  [1m[36mDish Load (24.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 25.0ms | Allocations: 500)
  Rendered layouts/_add_comment.html.erb (Duration: 0.7ms | Allocations: 569)
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 306.7ms | Allocations: 7352)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1116)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.1ms | Allocations: 4209)
  Rendered layout layouts/application.html.erb (Duration: 363.2ms | Allocations: 16515)
Completed 200 OK in 701ms (Views: 18.8ms | ActiveRecord: 646.3ms | Allocations: 21613)


Started GET "/restaurants/1" for 127.0.0.1 at 2023-11-22 19:41:58 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.5ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 52.1ms | Allocations: 3303)
  [1m[36mDish Load (25.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 633)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 91.0ms | Allocations: 16742)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 544)
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 831.5ms | Allocations: 35183)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1101)
  [1m[36mUser Load (23.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 51.5ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 887.0ms | Allocations: 44261)
Completed 200 OK in 1243ms (Views: 46.9ms | ActiveRecord: 1162.1ms | Allocations: 50301)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 19:42:13 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (51.2ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (25.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (23.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (22.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 78.6ms | Allocations: 10385)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1102)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 55.4ms | Allocations: 4192)
  Rendered layout layouts/application.html.erb (Duration: 137.4ms | Allocations: 19655)
Completed 200 OK in 292ms (Views: 16.2ms | ActiveRecord: 271.7ms | Allocations: 22227)


Started GET "/restaurants/13" for 127.0.0.1 at 2023-11-22 19:42:15 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"13"}
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=13 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=13 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=13 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 13], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=13 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 13], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 51.1ms | Allocations: 1448)
  [1m[36mDish Load (25.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 13]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 13], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 25.4ms | Allocations: 500)
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 569)
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=13 AND posts.autor=users.nombre AND posts.restaurant_id=13[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 205.3ms | Allocations: 5185)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1107)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.3ms | Allocations: 4197)
  Rendered layout layouts/application.html.erb (Duration: 264.3ms | Allocations: 14320)
Completed 200 OK in 598ms (Views: 16.2ms | ActiveRecord: 549.7ms | Allocations: 19436)


Started GET "/categories" for 127.0.0.1 at 2023-11-22 19:42:20 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 77.3ms | Allocations: 4652)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1127)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.4ms | Allocations: 4068)
  Rendered layout layouts/application.html.erb (Duration: 109.1ms | Allocations: 13599)
Completed 200 OK in 110ms (Views: 35.8ms | ActiveRecord: 73.6ms | Allocations: 13859)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 19:42:21 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (49.8ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (23.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 82.2ms | Allocations: 10386)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1102)
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.9ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 139.8ms | Allocations: 19617)
Completed 200 OK in 291ms (Views: 16.5ms | ActiveRecord: 270.6ms | Allocations: 22173)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-22 19:42:22 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 51.2ms | Allocations: 2645)
  [1m[36mDish Load (24.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 632)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 453)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 107.0ms | Allocations: 6292)
  Rendered layouts/_add_comment.html.erb (Duration: 0.8ms | Allocations: 544)
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 453)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 52.4ms | Allocations: 2667)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 389.1ms | Allocations: 15927)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1116)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.6ms | Allocations: 4103)
  Rendered layout layouts/application.html.erb (Duration: 421.1ms | Allocations: 24984)
Completed 200 OK in 777ms (Views: 26.4ms | ActiveRecord: 717.6ms | Allocations: 30816)


Started GET "/categories" for 127.0.0.1 at 2023-11-22 19:42:27 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 77.4ms | Allocations: 4651)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1133)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.5ms | Allocations: 4074)
  Rendered layout layouts/application.html.erb (Duration: 109.1ms | Allocations: 13665)
Completed 200 OK in 110ms (Views: 36.2ms | ActiveRecord: 73.3ms | Allocations: 13926)


Started GET "/nearme" for 127.0.0.1 at 2023-11-22 19:42:29 +0100
Processing by NearmeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering nearme/index.html.erb within layouts/application
  Rendered nearme/index.html.erb within layouts/application (Duration: 0.3ms | Allocations: 93)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1146)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 77.4ms | Allocations: 4177)
  Rendered layout layouts/application.html.erb (Duration: 81.4ms | Allocations: 9616)
Completed 200 OK in 99ms (Views: 32.6ms | ActiveRecord: 49.5ms | Allocations: 10089)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 19:42:42 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (50.5ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (25.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (22.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 78.6ms | Allocations: 10404)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1102)
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.1ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 136.2ms | Allocations: 19650)
Completed 200 OK in 291ms (Views: 14.4ms | ActiveRecord: 272.8ms | Allocations: 22221)


Started GET "/nearme" for 127.0.0.1 at 2023-11-22 19:42:46 +0100
Processing by NearmeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering nearme/index.html.erb within layouts/application
  Rendered nearme/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 7)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1140)
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 77.7ms | Allocations: 4176)
  Rendered layout layouts/application.html.erb (Duration: 81.8ms | Allocations: 9493)
Completed 200 OK in 82ms (Views: 32.8ms | ActiveRecord: 49.4ms | Allocations: 9741)


Started GET "/categories" for 127.0.0.1 at 2023-11-22 19:42:59 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (25.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 82.5ms | Allocations: 4668)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1141)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.9ms | Allocations: 4104)
  Rendered layout layouts/application.html.erb (Duration: 114.8ms | Allocations: 13730)
Completed 200 OK in 116ms (Views: 39.5ms | ActiveRecord: 75.8ms | Allocations: 13991)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 19:43:21 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (24.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 106.0ms | Allocations: 12860)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1375)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 112.3ms | Allocations: 13150)
  Rendered layout layouts/application.html.erb (Duration: 228.8ms | Allocations: 46820)
Completed 200 OK in 527ms (Views: 32.5ms | ActiveRecord: 474.0ms | Allocations: 62783)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-22 19:43:25 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (25.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 52.4ms | Allocations: 3342)
  [1m[36mDish Load (24.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 882)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 449)
  Rendered layouts/_comment.html.erb (Duration: 58.3ms | Allocations: 6517)
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 690)
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 243.6ms | Allocations: 15688)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1115)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.4ms | Allocations: 4213)
  Rendered layout layouts/application.html.erb (Duration: 300.7ms | Allocations: 24854)
Completed 200 OK in 806ms (Views: 28.2ms | ActiveRecord: 700.6ms | Allocations: 39599)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-22 19:44:38 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (25.5ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (26.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 52.6ms | Allocations: 2657)
  [1m[36mDish Load (24.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 625)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 53.6ms | Allocations: 3612)
  Rendered layouts/_add_comment.html.erb (Duration: 0.4ms | Allocations: 537)
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 183.2ms | Allocations: 8174)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1101)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.6ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 241.7ms | Allocations: 17222)
Completed 200 OK in 602ms (Views: 20.0ms | ActiveRecord: 547.4ms | Allocations: 22901)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-22 19:45:12 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"gari"}
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-22 18:45:12.655196')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (24.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-22 18:45:12.680710')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-22 18:45:12.705569')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (25.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 2.6ms | Allocations: 3178)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1102)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.1ms | Allocations: 4070)
  Rendered layout layouts/application.html.erb (Duration: 34.0ms | Allocations: 12104)
Completed 200 OK in 294ms (Views: 9.7ms | ActiveRecord: 251.7ms | Allocations: 17616)


Started GET "/logout" for 127.0.0.1 at 2023-11-22 19:45:14 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 425)


Started GET "/" for 127.0.0.1 at 2023-11-22 19:45:14 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (48.9ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (26.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 84.4ms | Allocations: 10423)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1116)
  Rendered layouts/_sidenav.html.erb (Duration: 2.1ms | Allocations: 2727)
  Rendered layout layouts/application.html.erb (Duration: 90.9ms | Allocations: 18306)
Completed 200 OK in 244ms (Views: 16.1ms | ActiveRecord: 223.5ms | Allocations: 20867)


Started GET "/login" for 127.0.0.1 at 2023-11-22 19:45:16 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 2.4ms | Allocations: 2987)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1116)
  Rendered layouts/_sidenav.html.erb (Duration: 1.6ms | Allocations: 2724)
  Rendered layout layouts/application.html.erb (Duration: 7.2ms | Allocations: 10667)
Completed 200 OK in 8ms (Views: 7.6ms | ActiveRecord: 0.0ms | Allocations: 11115)


Started POST "/login" for 127.0.0.1 at 2023-11-22 19:45:20 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"juan", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (29.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 223ms (ActiveRecord: 29.7ms | Allocations: 946)


Started GET "/" for 127.0.0.1 at 2023-11-22 19:45:20 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (50.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 79.2ms | Allocations: 10393)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1102)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.9ms | Allocations: 4744)
  Rendered layout layouts/application.html.erb (Duration: 136.4ms | Allocations: 20271)
Completed 200 OK in 290ms (Views: 14.4ms | ActiveRecord: 272.2ms | Allocations: 22875)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 19:45:22 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (48.6ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 81.7ms | Allocations: 10385)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1102)
  [1m[36mUser Load (23.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.6ms | Allocations: 4712)
  Rendered layout layouts/application.html.erb (Duration: 138.2ms | Allocations: 20182)
Completed 200 OK in 289ms (Views: 17.1ms | ActiveRecord: 268.9ms | Allocations: 22743)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-22 19:45:23 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.2ms | Allocations: 2231)
  [1m[36mDish Load (24.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (25.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (24.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 632)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 80.7ms | Allocations: 4529)
  Rendered layouts/_add_comment.html.erb (Duration: 0.4ms | Allocations: 544)
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 183.3ms | Allocations: 8699)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1115)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.7ms | Allocations: 4756)
  Rendered layout layouts/application.html.erb (Duration: 240.4ms | Allocations: 18408)
Completed 200 OK in 598ms (Views: 17.6ms | ActiveRecord: 547.1ms | Allocations: 24071)


Started GET "/restaurants/2/dishes/new" for 127.0.0.1 at 2023-11-22 19:45:34 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"2"}
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:19:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 16.5ms | Allocations: 2907)
  Rendered dishes/new.html.erb within layouts/application (Duration: 17.3ms | Allocations: 3202)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1115)
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.8ms | Allocations: 4735)
  Rendered layout layouts/application.html.erb (Duration: 74.8ms | Allocations: 12887)
Completed 200 OK in 129ms (Views: 24.7ms | ActiveRecord: 76.0ms | Allocations: 16635)


Started POST "/restaurants/2/dishes" for 127.0.0.1 at 2023-11-22 19:45:46 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"oleee me gusta espaÃ±a", "descripcion"=>"soy franquista", "precio"=>""}, "button"=>"", "restaurant_id"=>"2"}
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (26.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:25:in `create'
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:25:in `create'
  [1m[36mDish Create (25.5ms)[0m  [1m[32mINSERT INTO "dishes" ("restaurant_id", "nombre", "ruta_img_plato", "descripcion", "precio", "imported_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_id", 2], ["nombre", "oleee me gusta espaÃ±a"], ["ruta_img_plato", nil], ["descripcion", "soy franquista"], ["precio", nil], ["imported_id", nil]]
  â†³ app/controllers/dishes_controller.rb:25:in `create'
  [1m[36mTRANSACTION (26.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:25:in `create'
Redirected to http://localhost:3000/restaurants/2
Completed 302 Found in 108ms (ActiveRecord: 103.1ms | Allocations: 5106)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-22 19:45:46 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.1ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.1ms | Allocations: 2246)
  [1m[36mDish Load (25.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 625)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 79.3ms | Allocations: 4499)
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 537)
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 208.5ms | Allocations: 9559)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1101)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.3ms | Allocations: 4712)
  Rendered layout layouts/application.html.erb (Duration: 265.1ms | Allocations: 19145)
Completed 200 OK in 620ms (Views: 18.8ms | ActiveRecord: 568.3ms | Allocations: 24839)


Started GET "/restaurants/2/dishes/31/edit" for 127.0.0.1 at 2023-11-22 19:45:50 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"2", "id"=>"31"}
  [1m[36mDish Load (24.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.2ms | Allocations: 2218)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 3.2ms | Allocations: 2791)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1101)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.0ms | Allocations: 4712)
  Rendered layout layouts/application.html.erb (Duration: 58.9ms | Allocations: 12376)
Completed 200 OK in 137ms (Views: 11.8ms | ActiveRecord: 73.8ms | Allocations: 13704)


Started DELETE "/restaurants/31/dishes/31" for 127.0.0.1 at 2023-11-22 19:45:52 +0100
Processing by ErrorsController#not_found as TURBO_STREAM
  Parameters: {"unmatched"=>"restaurants/31/dishes/31"}
  Rendering layout layouts/application.html.erb
  Rendering errors/not_found.html.erb within layouts/application
  Rendered errors/not_found.html.erb within layouts/application (Duration: 0.4ms | Allocations: 94)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1153)
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 78.2ms | Allocations: 4746)
  Rendered layout layouts/application.html.erb (Duration: 82.5ms | Allocations: 10027)
Completed 404 Not Found in 121ms (Views: 71.1ms | ActiveRecord: 49.2ms | Allocations: 10760)


Started GET "/restaurants/2/dishes/31/edit" for 127.0.0.1 at 2023-11-22 19:50:34 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"2", "id"=>"31"}
  [1m[36mDish Load (25.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:35:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.3ms | Allocations: 2862)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 3.1ms | Allocations: 3502)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1354)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 117.3ms | Allocations: 13657)
  Rendered layout layouts/application.html.erb (Duration: 130.5ms | Allocations: 37655)
Completed 200 OK in 356ms (Views: 31.6ms | ActiveRecord: 307.8ms | Allocations: 52275)


Started DELETE "/restaurants/2/dishes/31" for 127.0.0.1 at 2023-11-22 19:50:35 +0100
Processing by ErrorsController#not_found as TURBO_STREAM
  Parameters: {"unmatched"=>"restaurants/2/dishes/31"}
  Rendering layout layouts/application.html.erb
  Rendering errors/not_found.html.erb within layouts/application
  Rendered errors/not_found.html.erb within layouts/application (Duration: 0.3ms | Allocations: 94)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1152)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 79.0ms | Allocations: 4757)
  Rendered layout layouts/application.html.erb (Duration: 82.9ms | Allocations: 10080)
Completed 404 Not Found in 84ms (Views: 33.7ms | ActiveRecord: 49.7ms | Allocations: 10842)


Started GET "/restaurants/2/dishes/new" for 127.0.0.1 at 2023-11-22 19:50:45 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"2"}
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:19:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 1.9ms | Allocations: 2185)
  Rendered dishes/new.html.erb within layouts/application (Duration: 2.3ms | Allocations: 2409)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  [1m[36mUser Load (25.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 55.4ms | Allocations: 4712)
  Rendered layout layouts/application.html.erb (Duration: 60.8ms | Allocations: 11994)
Completed 200 OK in 114ms (Views: 9.4ms | ActiveRecord: 76.9ms | Allocations: 12977)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-22 19:50:51 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.8ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.6ms | Allocations: 2932)
  [1m[36mDish Load (24.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 886)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 449)
  Rendered layouts/_comment.html.erb (Duration: 82.6ms | Allocations: 7408)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 690)
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 212.2ms | Allocations: 16029)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1101)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.1ms | Allocations: 4716)
  Rendered layout layouts/application.html.erb (Duration: 268.4ms | Allocations: 25632)
Completed 200 OK in 796ms (Views: 21.7ms | ActiveRecord: 727.8ms | Allocations: 43377)


Started GET "/restaurants/2/dishes/31/edit" for 127.0.0.1 at 2023-11-22 19:50:53 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"2", "id"=>"31"}
  [1m[36mDish Load (25.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:35:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.3ms | Allocations: 2204)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 2.8ms | Allocations: 2552)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 55.8ms | Allocations: 4734)
  Rendered layout layouts/application.html.erb (Duration: 61.4ms | Allocations: 12159)
Completed 200 OK in 138ms (Views: 11.9ms | ActiveRecord: 99.7ms | Allocations: 13248)


Started DELETE "/restaurants/2/dishes/31" for 127.0.0.1 at 2023-11-22 19:50:54 +0100
Processing by ErrorsController#not_found as TURBO_STREAM
  Parameters: {"unmatched"=>"restaurants/2/dishes/31"}
  Rendering layout layouts/application.html.erb
  Rendering errors/not_found.html.erb within layouts/application
  Rendered errors/not_found.html.erb within layouts/application (Duration: 0.0ms | Allocations: 7)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1139)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 79.1ms | Allocations: 4757)
  Rendered layout layouts/application.html.erb (Duration: 82.9ms | Allocations: 9917)
Completed 404 Not Found in 84ms (Views: 33.5ms | ActiveRecord: 49.7ms | Allocations: 10398)


Started GET "/restaurants/2/dishes/31/edit" for 127.0.0.1 at 2023-11-22 19:52:07 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"2", "id"=>"31"}
  [1m[36mDish Load (24.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:35:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.4ms | Allocations: 2868)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 3.6ms | Allocations: 3533)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1365)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 118.0ms | Allocations: 13659)
  Rendered layout layouts/application.html.erb (Duration: 131.5ms | Allocations: 37710)
Completed 200 OK in 355ms (Views: 32.0ms | ActiveRecord: 307.8ms | Allocations: 52316)


Started DELETE "/restaurants/2/dishes/31" for 127.0.0.1 at 2023-11-22 19:52:09 +0100
Processing by ErrorsController#not_found as TURBO_STREAM
  Parameters: {"unmatched"=>"restaurants/2/dishes/31"}
  Rendering layout layouts/application.html.erb
  Rendering errors/not_found.html.erb within layouts/application
  Rendered errors/not_found.html.erb within layouts/application (Duration: 0.2ms | Allocations: 93)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1152)
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 78.1ms | Allocations: 4757)
  Rendered layout layouts/application.html.erb (Duration: 81.6ms | Allocations: 10079)
Completed 404 Not Found in 83ms (Views: 33.0ms | ActiveRecord: 49.1ms | Allocations: 10831)


Started GET "/restaurants/2/dishes/31/edit" for 127.0.0.1 at 2023-11-22 19:53:03 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"2", "id"=>"31"}
  [1m[36mDish Load (25.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:35:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.0ms | Allocations: 2213)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 2.5ms | Allocations: 2570)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.2ms | Allocations: 4715)
  Rendered layout layouts/application.html.erb (Duration: 59.6ms | Allocations: 12158)
Completed 200 OK in 139ms (Views: 9.7ms | ActiveRecord: 101.5ms | Allocations: 13245)


Started GET "/restaurants/2/dishes/31/edit" for 127.0.0.1 at 2023-11-22 19:53:49 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"2", "id"=>"31"}
  [1m[36mDish Load (25.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:35:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.2ms | Allocations: 2853)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 3.0ms | Allocations: 3489)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1370)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 112.8ms | Allocations: 13731)
  Rendered layout layouts/application.html.erb (Duration: 130.1ms | Allocations: 37731)
Completed 200 OK in 354ms (Views: 31.6ms | ActiveRecord: 306.1ms | Allocations: 52274)


Started DELETE "/restaurants/2/dishes/31" for 127.0.0.1 at 2023-11-22 19:53:51 +0100
Processing by ErrorsController#not_found as TURBO_STREAM
  Parameters: {"unmatched"=>"restaurants/2/dishes/31"}
  Rendering layout layouts/application.html.erb
  Rendering errors/not_found.html.erb within layouts/application
  Rendered errors/not_found.html.erb within layouts/application (Duration: 0.2ms | Allocations: 90)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1138)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 80.3ms | Allocations: 4716)
  Rendered layout layouts/application.html.erb (Duration: 83.8ms | Allocations: 10000)
Completed 404 Not Found in 85ms (Views: 34.4ms | ActiveRecord: 50.0ms | Allocations: 10775)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-22 19:54:01 +0100
  [1m[36mActiveRecord::SchemaMigration Load (24.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (26.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (26.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (22.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (25.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 74.3ms | Allocations: 41963)
  [1m[36mDish Load (25.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (23.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (23.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 925)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 449)
  Rendered layouts/_comment.html.erb (Duration: 166.4ms | Allocations: 15180)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 710)
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 429.8ms | Allocations: 71009)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1430)
  [1m[36mUser Load (22.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 102.4ms | Allocations: 9789)
  Rendered layout layouts/application.html.erb (Duration: 542.2ms | Allocations: 101656)
Completed 200 OK in 1798ms (Views: 199.3ms | ActiveRecord: 1195.8ms | Allocations: 163810)


Started GET "/restaurants/2/dishes/31/edit" for 127.0.0.1 at 2023-11-22 19:54:06 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"2", "id"=>"31"}
  [1m[36mDish Load (25.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:35:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.9ms | Allocations: 3318)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 4.9ms | Allocations: 3923)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.0ms | Allocations: 4713)
  Rendered layout layouts/application.html.erb (Duration: 61.7ms | Allocations: 13511)
Completed 200 OK in 164ms (Views: 12.1ms | ActiveRecord: 99.7ms | Allocations: 15445)


Started DELETE "/restaurants/2/dishes/31" for 127.0.0.1 at 2023-11-22 19:54:08 +0100
Processing by ErrorsController#not_found as TURBO_STREAM
  Parameters: {"unmatched"=>"restaurants/2/dishes/31"}
  Rendering layout layouts/application.html.erb
  Rendering errors/not_found.html.erb within layouts/application
  Rendered errors/not_found.html.erb within layouts/application (Duration: 0.3ms | Allocations: 92)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1152)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 77.5ms | Allocations: 4768)
  Rendered layout layouts/application.html.erb (Duration: 88.0ms | Allocations: 10049)
Completed 404 Not Found in 89ms (Views: 40.2ms | ActiveRecord: 48.3ms | Allocations: 10863)


Started GET "/restaurants/2/dishes/31/edit" for 127.0.0.1 at 2023-11-22 19:59:01 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"2", "id"=>"31"}
  [1m[36mDish Load (25.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  [1m[36mRestaurant Load (37.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:35:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.8ms | Allocations: 2875)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 4.1ms | Allocations: 3509)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1356)
  [1m[36mUser Load (33.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 130.1ms | Allocations: 13655)
  Rendered layout layouts/application.html.erb (Duration: 147.1ms | Allocations: 37657)
Completed 200 OK in 384ms (Views: 39.4ms | ActiveRecord: 327.8ms | Allocations: 52272)


Started GET "/users/juan" for 127.0.0.1 at 2023-11-22 20:04:06 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"juan"}
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (24.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (24.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-22 19:04:06.844109')[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-22 19:04:06.869710')[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (24.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-22 19:04:06.894825')[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (24.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-22 19:04:06.972016')[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (24.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-22 19:04:07.023864')[0m  [["reviewable_id", 31], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (24.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "2"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "2"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 5.1ms | Allocations: 3490)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1110)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 4.7ms | Allocations: 4533)
  Rendered layout layouts/application.html.erb (Duration: 13.1ms | Allocations: 12926)
Completed 200 OK in 531ms (Views: 13.8ms | ActiveRecord: 466.0ms | Allocations: 30496)


Started GET "/logout" for 127.0.0.1 at 2023-11-22 20:04:11 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 522)


Started GET "/" for 127.0.0.1 at 2023-11-22 20:04:11 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (24.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 107.8ms | Allocations: 12901)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1102)
  Rendered layouts/_sidenav.html.erb (Duration: 1.8ms | Allocations: 2693)
  Rendered layout layouts/application.html.erb (Duration: 113.4ms | Allocations: 20682)
Completed 200 OK in 323ms (Views: 15.3ms | ActiveRecord: 297.2ms | Allocations: 28615)


Started GET "/login" for 127.0.0.1 at 2023-11-22 20:04:12 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 2.1ms | Allocations: 3043)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1102)
  Rendered layouts/_sidenav.html.erb (Duration: 1.6ms | Allocations: 2690)
  Rendered layout layouts/application.html.erb (Duration: 6.4ms | Allocations: 10614)
Completed 200 OK in 7ms (Views: 6.9ms | ActiveRecord: 0.0ms | Allocations: 11083)


Started POST "/login" for 127.0.0.1 at 2023-11-22 20:04:15 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"gari", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 217ms (ActiveRecord: 24.6ms | Allocations: 925)


Started GET "/" for 127.0.0.1 at 2023-11-22 20:04:15 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (49.4ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 79.0ms | Allocations: 10417)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1116)
  [1m[36mUser Load (24.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.6ms | Allocations: 4209)
  Rendered layout layouts/application.html.erb (Duration: 135.0ms | Allocations: 19827)
Completed 200 OK in 289ms (Views: 13.1ms | ActiveRecord: 269.6ms | Allocations: 22434)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 20:04:19 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (49.4ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 79.9ms | Allocations: 10380)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1102)
  [1m[36mUser Load (24.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.9ms | Allocations: 4195)
  Rendered layout layouts/application.html.erb (Duration: 136.2ms | Allocations: 19676)
Completed 200 OK in 287ms (Views: 14.2ms | ActiveRecord: 269.3ms | Allocations: 22233)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-22 20:04:29 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"gari"}
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (25.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-22 19:04:29.945191')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-22 19:04:29.970111')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-22 19:04:29.995062')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 1.8ms | Allocations: 2334)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1102)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.6ms | Allocations: 4069)
  Rendered layout layouts/application.html.erb (Duration: 32.5ms | Allocations: 11256)
Completed 200 OK in 264ms (Views: 8.4ms | ActiveRecord: 224.4ms | Allocations: 15769)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-22 20:04:37 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"gari"}
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (24.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-22 19:04:37.598253')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-22 19:04:37.623052')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (24.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-22 19:04:37.647977')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 2.1ms | Allocations: 2311)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1102)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.5ms | Allocations: 4068)
  Rendered layout layouts/application.html.erb (Duration: 32.7ms | Allocations: 11232)
Completed 200 OK in 261ms (Views: 8.6ms | ActiveRecord: 222.1ms | Allocations: 15728)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 20:04:39 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (48.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 80.9ms | Allocations: 10398)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1116)
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.5ms | Allocations: 4209)
  Rendered layout layouts/application.html.erb (Duration: 137.7ms | Allocations: 19758)
Completed 200 OK in 288ms (Views: 15.3ms | ActiveRecord: 269.8ms | Allocations: 22335)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-22 20:04:45 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"gari"}
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (25.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (25.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (24.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-22 19:04:45.581845')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-22 19:04:45.606661')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-22 19:04:45.631811')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (24.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 2.4ms | Allocations: 2332)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1116)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.7ms | Allocations: 4068)
  Rendered layout layouts/application.html.erb (Duration: 33.7ms | Allocations: 11305)
Completed 200 OK in 265ms (Views: 9.5ms | ActiveRecord: 223.9ms | Allocations: 15820)


Started GET "/logout" for 127.0.0.1 at 2023-11-22 20:04:46 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 390)


Started GET "/" for 127.0.0.1 at 2023-11-22 20:04:46 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (49.4ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 80.7ms | Allocations: 10406)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1102)
  Rendered layouts/_sidenav.html.erb (Duration: 1.8ms | Allocations: 2690)
  Rendered layout layouts/application.html.erb (Duration: 86.0ms | Allocations: 18172)
Completed 200 OK in 237ms (Views: 13.2ms | ActiveRecord: 220.2ms | Allocations: 20729)


Started GET "/login" for 127.0.0.1 at 2023-11-22 20:04:47 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 1.9ms | Allocations: 2680)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1102)
  Rendered layouts/_sidenav.html.erb (Duration: 1.8ms | Allocations: 2690)
  Rendered layout layouts/application.html.erb (Duration: 6.8ms | Allocations: 10249)
Completed 200 OK in 7ms (Views: 7.1ms | ActiveRecord: 0.0ms | Allocations: 10510)


Started POST "/login" for 127.0.0.1 at 2023-11-22 20:04:53 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"Atreides", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (25.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 218ms (ActiveRecord: 25.9ms | Allocations: 877)


Started GET "/" for 127.0.0.1 at 2023-11-22 20:04:54 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (50.5ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 78.8ms | Allocations: 10370)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1116)
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.1ms | Allocations: 4756)
  Rendered layout layouts/application.html.erb (Duration: 137.3ms | Allocations: 20284)
Completed 200 OK in 289ms (Views: 14.3ms | ActiveRecord: 272.2ms | Allocations: 22844)


Started GET "/users/mis_restaurantes" for 127.0.0.1 at 2023-11-22 20:04:56 +0100
Processing by UsersController#mis_restaurantes as HTML
  [1m[36mUser Load (23.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:87:in `mis_restaurantes'
  Rendering layout layouts/application.html.erb
  Rendering users/mis_restaurantes.html.erb within layouts/application
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/views/users/mis_restaurantes.html.erb:8
  Rendered users/mis_restaurantes.html.erb within layouts/application (Duration: 27.3ms | Allocations: 1871)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1141)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 3.4ms | Allocations: 4524)
  Rendered layout layouts/application.html.erb (Duration: 33.6ms | Allocations: 11351)
Completed 200 OK in 102ms (Views: 27.0ms | ActiveRecord: 48.6ms | Allocations: 12341)


Started GET "/restaurants/new" for 127.0.0.1 at 2023-11-22 20:04:58 +0100
Processing by RestaurantsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering restaurants/new.html.erb within layouts/application
  [1m[36mCategory Load (49.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 72.7ms | Allocations: 9380)
  Rendered restaurants/new.html.erb within layouts/application (Duration: 74.0ms | Allocations: 10613)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.6ms | Allocations: 4713)
  Rendered layout layouts/application.html.erb (Duration: 130.5ms | Allocations: 20203)
Completed 200 OK in 132ms (Views: 31.4ms | ActiveRecord: 99.5ms | Allocations: 20540)


Started POST "/restaurants" for 127.0.0.1 at 2023-11-22 20:05:12 +0100
Processing by RestaurantsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "restaurant"=>{"nombre"=>"prueba", "telefono"=>"", "direccion"=>"", "horario"=>"", "categoria"=>"Gourmet"}, "button"=>""}
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (24.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/restaurants_controller.rb:47:in `create'
  [1m[36mRestaurant Create (51.0ms)[0m  [1m[32mINSERT INTO "restaurants" ("categoria", "nombre", "ruta_img_perfil", "ruta_img_fondo", "direccion", "telefono", "horario", "imported_id") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["categoria", "Gourmet"], ["nombre", "prueba"], ["ruta_img_perfil", nil], ["ruta_img_fondo", nil], ["direccion", ""], ["telefono", ""], ["horario", ""], ["imported_id", nil]]
  â†³ app/controllers/restaurants_controller.rb:47:in `create'
  [1m[36mTRANSACTION (25.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/restaurants_controller.rb:47:in `create'
Redirected to http://localhost:3000/restaurants/31
  [1m[36mUser Load (26.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:52:in `create'
  [1m[36mTRANSACTION (25.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/restaurants_controller.rb:52:in `create'
  [1m[36mRestaurant::HABTM_Users Create (24.8ms)[0m  [1m[32mINSERT INTO "restaurants_users" ("restaurant_id", "user_id") VALUES ($1, $2)[0m  [["restaurant_id", 31], ["user_id", "Atreides"]]
  â†³ app/controllers/restaurants_controller.rb:52:in `create'
  [1m[36mTRANSACTION (24.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/restaurants_controller.rb:52:in `create'
Completed 302 Found in 210ms (ActiveRecord: 251.4ms | Allocations: 8806)


Started GET "/restaurants/31" for 127.0.0.1 at 2023-11-22 20:05:12 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"31"}
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 31], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=31 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=31 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=31 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 31], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=31 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (26.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=31 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=31 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=31 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 31], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=31 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.4ms | Allocations: 1702)
  [1m[36mDish Load (24.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 31]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 31], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 26.1ms | Allocations: 1940)
  Rendered layouts/_add_comment.html.erb (Duration: 0.8ms | Allocations: 715)
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=31 AND posts.autor=users.nombre AND posts.restaurant_id=31[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 130.2ms | Allocations: 6682)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1101)
  [1m[36mUser Load (22.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 50.7ms | Allocations: 4727)
  Rendered layout layouts/application.html.erb (Duration: 184.4ms | Allocations: 16283)
Completed 200 OK in 569ms (Views: 15.9ms | ActiveRecord: 519.4ms | Allocations: 22921)


Started GET "/restaurants/2/dishes/31/edit" for 127.0.0.1 at 2023-11-22 20:05:22 +0100
Processing by DishesController#edit as */*
  Parameters: {"restaurant_id"=>"2", "id"=>"31"}
  [1m[36mDish Load (25.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:35:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 1.9ms | Allocations: 2235)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 2.2ms | Allocations: 2426)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1115)
  Rendered layouts/_sidenav.html.erb (Duration: 1.9ms | Allocations: 2725)
  Rendered layout layouts/application.html.erb (Duration: 7.9ms | Allocations: 10080)
Completed 200 OK in 86ms (Views: 8.8ms | ActiveRecord: 50.3ms | Allocations: 14021)


Started GET "/restaurants/31" for 127.0.0.1 at 2023-11-22 20:05:47 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"31"}
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 31], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=31 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=31 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=31 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 31], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=31 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=31 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=31 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=31 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 31], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=31 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 25.9ms | Allocations: 1038)
  [1m[36mDish Load (24.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 31]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 31], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 26.2ms | Allocations: 500)
  Rendered layouts/_add_comment.html.erb (Duration: 0.7ms | Allocations: 569)
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=31 AND posts.autor=users.nombre AND posts.restaurant_id=31[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 128.6ms | Allocations: 3503)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1115)
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.7ms | Allocations: 4768)
  Rendered layout layouts/application.html.erb (Duration: 377.6ms | Allocations: 78937)
Completed 200 OK in 712ms (Views: 204.8ms | ActiveRecord: 473.2ms | Allocations: 84054)


Started GET "/restaurants/31/edit" for 127.0.0.1 at 2023-11-22 20:05:51 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"31"}
  [1m[36mRestaurant Load (24.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:56:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  [1m[36mCategory Load (24.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 27.6ms | Allocations: 3195)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 28.2ms | Allocations: 3504)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1115)
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.0ms | Allocations: 4768)
  Rendered layout layouts/application.html.erb (Duration: 85.3ms | Allocations: 13204)
Completed 200 OK in 136ms (Views: 10.8ms | ActiveRecord: 98.8ms | Allocations: 13967)


Started GET "/restaurants/31/edit" for 127.0.0.1 at 2023-11-22 20:06:30 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"31"}
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:56:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  [1m[36mCategory Load (24.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 58.0ms | Allocations: 6488)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 58.6ms | Allocations: 6858)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1370)
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 113.1ms | Allocations: 13701)
  Rendered layout layouts/application.html.erb (Duration: 186.2ms | Allocations: 41111)
Completed 200 OK in 329ms (Views: 39.9ms | ActiveRecord: 278.0ms | Allocations: 50729)


Started DELETE "/restaurants/31" for 127.0.0.1 at 2023-11-22 20:06:33 +0100
Processing by RestaurantsController#destroy as TURBO_STREAM
  Parameters: {"id"=>"31"}
  [1m[36mRestaurant Load (23.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:70:in `destroy'
  [1m[36mTRANSACTION (25.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/restaurants_controller.rb:71:in `destroy'
  [1m[36mRank Delete All (25.1ms)[0m  [1m[31mDELETE FROM "ranks" WHERE "ranks"."what" = $1[0m  [["what", 31]]
  â†³ app/controllers/restaurants_controller.rb:71:in `destroy'
  [1m[36mPost Load (24.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1[0m  [["restaurant_id", 31]]
  â†³ app/controllers/restaurants_controller.rb:71:in `destroy'
  [1m[36mReview Load (24.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 31], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/restaurants_controller.rb:71:in `destroy'
  [1m[36mDish Load (24.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 31]]
  â†³ app/controllers/restaurants_controller.rb:71:in `destroy'
  [1m[36mRestaurant::HABTM_Users Delete All (24.8ms)[0m  [1m[31mDELETE FROM "restaurants_users" WHERE "restaurants_users"."restaurant_id" = $1[0m  [["restaurant_id", 31]]
  â†³ app/controllers/restaurants_controller.rb:71:in `destroy'
  [1m[36mRestaurant Destroy (25.8ms)[0m  [1m[31mDELETE FROM "restaurants" WHERE "restaurants"."id" = $1[0m  [["id", 31]]
  â†³ app/controllers/restaurants_controller.rb:71:in `destroy'
  [1m[36mTRANSACTION (24.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/restaurants_controller.rb:71:in `destroy'
Redirected to http://localhost:3000/
Completed 303 See Other in 526ms (ActiveRecord: 480.4ms | Allocations: 17164)


Started GET "/" for 127.0.0.1 at 2023-11-22 20:06:34 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (49.4ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 80.3ms | Allocations: 11278)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1102)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.8ms | Allocations: 4715)
  Rendered layout layouts/application.html.erb (Duration: 136.2ms | Allocations: 21144)
Completed 200 OK in 288ms (Views: 14.8ms | ActiveRecord: 269.0ms | Allocations: 25479)


Started GET "/" for 127.0.0.1 at 2023-11-22 20:06:49 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (24.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 108.1ms | Allocations: 12881)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1375)
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 112.7ms | Allocations: 13656)
  Rendered layout layouts/application.html.erb (Duration: 232.5ms | Allocations: 47339)
Completed 200 OK in 571ms (Views: 36.0ms | ActiveRecord: 475.1ms | Allocations: 63363)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-22 20:06:51 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 28.6ms | Allocations: 2906)
  [1m[36mDish Load (24.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 886)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 453)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 454)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 82.6ms | Allocations: 9266)
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 690)
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 26.1ms | Allocations: 2276)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 325.2ms | Allocations: 25049)
  Rendered layouts/_header.html.erb (Duration: 4.2ms | Allocations: 1111)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.8ms | Allocations: 4653)
  Rendered layout layouts/application.html.erb (Duration: 360.7ms | Allocations: 34598)
Completed 200 OK in 832ms (Views: 37.7ms | ActiveRecord: 748.6ms | Allocations: 52301)


Started GET "/restaurants/3/dishes/new" for 127.0.0.1 at 2023-11-22 20:06:54 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"3"}
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:19:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.2ms | Allocations: 2776)
  Rendered dishes/new.html.erb within layouts/application (Duration: 3.1ms | Allocations: 3069)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1103)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.8ms | Allocations: 4720)
  Rendered layout layouts/application.html.erb (Duration: 59.6ms | Allocations: 12703)
Completed 200 OK in 110ms (Views: 11.1ms | ActiveRecord: 73.6ms | Allocations: 13829)


Started GET "/restaurants/3/dishes/16" for 127.0.0.1 at 2023-11-22 20:06:57 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"16"}
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (25.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 16], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=16 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=16 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=16 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 16], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=16 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 16], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 25.5ms | Allocations: 1287)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 565)
  Rendered dishes/show.html.erb within layouts/application (Duration: 79.2ms | Allocations: 4883)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1108)
  [1m[36mUser Load (23.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.3ms | Allocations: 4749)
  Rendered layout layouts/application.html.erb (Duration: 135.0ms | Allocations: 14532)
Completed 200 OK in 364ms (Views: 13.4ms | ActiveRecord: 294.8ms | Allocations: 19177)


Started GET "/restaurants/3/dishes/16/edit" for 127.0.0.1 at 2023-11-22 20:06:59 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"16"}
  [1m[36mDish Load (24.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:35:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.2ms | Allocations: 2208)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 3.0ms | Allocations: 2762)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1101)
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.7ms | Allocations: 4713)
  Rendered layout layouts/application.html.erb (Duration: 60.0ms | Allocations: 12360)
Completed 200 OK in 136ms (Views: 10.4ms | ActiveRecord: 99.4ms | Allocations: 14066)


Started DELETE "/restaurants/16/dishes/16" for 127.0.0.1 at 2023-11-22 20:07:02 +0100
Processing by ErrorsController#not_found as TURBO_STREAM
  Parameters: {"unmatched"=>"restaurants/16/dishes/16"}
  Rendering layout layouts/application.html.erb
  Rendering errors/not_found.html.erb within layouts/application
  Rendered errors/not_found.html.erb within layouts/application (Duration: 0.3ms | Allocations: 90)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1138)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 78.3ms | Allocations: 4716)
  Rendered layout layouts/application.html.erb (Duration: 82.8ms | Allocations: 9968)
Completed 404 Not Found in 84ms (Views: 34.2ms | ActiveRecord: 49.2ms | Allocations: 10716)


Started GET "/restaurants/3/dishes/16" for 127.0.0.1 at 2023-11-22 20:07:20 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"16"}
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (25.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 16], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=16 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=16 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=16 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 16], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=16 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (24.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (23.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 16], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 24.1ms | Allocations: 501)
  Rendered layouts/_add_comment.html.erb (Duration: 0.4ms | Allocations: 562)
  Rendered dishes/show.html.erb within layouts/application (Duration: 75.8ms | Allocations: 2860)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1101)
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.6ms | Allocations: 4713)
  Rendered layout layouts/application.html.erb (Duration: 132.3ms | Allocations: 12459)
Completed 200 OK in 337ms (Views: 10.5ms | ActiveRecord: 296.7ms | Allocations: 15685)


Started GET "/restaurants/3/dishes/16" for 127.0.0.1 at 2023-11-22 20:08:01 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"16"}
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (26.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 16], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (26.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=16 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=16 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=16 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 16], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=16 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 16], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 24.8ms | Allocations: 501)
  Rendered layouts/_add_comment.html.erb (Duration: 0.4ms | Allocations: 570)
  Rendered dishes/show.html.erb within layouts/application (Duration: 77.7ms | Allocations: 2878)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1115)
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.0ms | Allocations: 4755)
  Rendered layout layouts/application.html.erb (Duration: 135.0ms | Allocations: 12604)
Completed 200 OK in 343ms (Views: 11.8ms | ActiveRecord: 300.1ms | Allocations: 15811)


Started GET "/restaurants/3/dishes/16" for 127.0.0.1 at 2023-11-22 20:10:45 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"16"}
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (25.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 16], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=16 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=16 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=16 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 16], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=16 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 16], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 26.3ms | Allocations: 1890)
  Rendered layouts/_add_comment.html.erb (Duration: 0.7ms | Allocations: 715)
  Rendered dishes/show.html.erb within layouts/application (Duration: 79.8ms | Allocations: 6351)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1378)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 113.5ms | Allocations: 13574)
  Rendered layout layouts/application.html.erb (Duration: 203.9ms | Allocations: 40519)
Completed 200 OK in 616ms (Views: 31.5ms | ActiveRecord: 557.0ms | Allocations: 60539)


Started GET "/restaurants/3/dishes/16/edit" for 127.0.0.1 at 2023-11-22 20:10:46 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"16"}
  [1m[36mDish Load (24.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:35:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.3ms | Allocations: 2776)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 3.3ms | Allocations: 3402)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1101)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 68.8ms | Allocations: 4716)
  Rendered layout layouts/application.html.erb (Duration: 76.5ms | Allocations: 13003)
Completed 200 OK in 153ms (Views: 27.1ms | ActiveRecord: 99.2ms | Allocations: 14711)


Started DELETE "/restaurants/3/dishes/16" for 127.0.0.1 at 2023-11-22 20:10:47 +0100
Processing by ErrorsController#not_found as TURBO_STREAM
  Parameters: {"unmatched"=>"restaurants/3/dishes/16"}
  Rendering layout layouts/application.html.erb
  Rendering errors/not_found.html.erb within layouts/application
  Rendered errors/not_found.html.erb within layouts/application (Duration: 0.2ms | Allocations: 90)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1144)
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 78.7ms | Allocations: 4732)
  Rendered layout layouts/application.html.erb (Duration: 90.0ms | Allocations: 10003)
Completed 404 Not Found in 95ms (Views: 44.1ms | ActiveRecord: 49.3ms | Allocations: 10754)


Started GET "/restaurants/3/dishes/16" for 127.0.0.1 at 2023-11-22 20:10:49 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"16"}
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  [1m[36mDish Load (24.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 16], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:6:in `show'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_type='Dish' AND reviewable_id=16 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_type='Dish' AND reviewable_id=16 GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_type='Dish' AND reviewable_id=16 GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 16], ["reviewable_type", "Dish"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=16 AND reviewable_type='Dish' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:4
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 16], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 26.5ms | Allocations: 501)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 569)
  Rendered dishes/show.html.erb within layouts/application (Duration: 78.9ms | Allocations: 2870)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1103)
  [1m[36mUser Load (24.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.9ms | Allocations: 4723)
  Rendered layout layouts/application.html.erb (Duration: 136.5ms | Allocations: 12499)
Completed 200 OK in 339ms (Views: 14.5ms | ActiveRecord: 294.2ms | Allocations: 15702)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-22 20:12:42 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (23.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.8ms | Allocations: 2992)
  [1m[36mDish Load (24.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 886)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 453)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 454)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 118.1ms | Allocations: 14658)
  Rendered layouts/_add_comment.html.erb (Duration: 0.8ms | Allocations: 690)
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (24.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 25.6ms | Allocations: 2265)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 357.4ms | Allocations: 30495)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1374)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 55.4ms | Allocations: 8092)
  Rendered layout layouts/application.html.erb (Duration: 423.8ms | Allocations: 59177)
Completed 200 OK in 1039ms (Views: 51.7ms | ActiveRecord: 927.6ms | Allocations: 88520)


Started GET "/restaurants/3/dishes/16/edit" for 127.0.0.1 at 2023-11-22 20:12:45 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"16"}
  [1m[36mDish Load (24.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:35:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.2ms | Allocations: 2793)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 3.2ms | Allocations: 3425)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.2ms | Allocations: 4714)
  Rendered layout layouts/application.html.erb (Duration: 60.3ms | Allocations: 13026)
Completed 200 OK in 137ms (Views: 10.7ms | ActiveRecord: 99.3ms | Allocations: 14940)


Started DELETE "/restaurants/16/dishes/16" for 127.0.0.1 at 2023-11-22 20:12:45 +0100
Processing by DishesController#destroy as TURBO_STREAM
  Parameters: {"restaurant_id"=>"16", "id"=>"16"}
  [1m[36mDish Load (24.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:56:in `destroy'
  [1m[36mTRANSACTION (25.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:57:in `destroy'
  [1m[36mReview Load (25.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 16], ["reviewable_type", "Dish"]]
  â†³ app/controllers/dishes_controller.rb:57:in `destroy'
  [1m[36mDish Destroy (25.0ms)[0m  [1m[31mDELETE FROM "dishes" WHERE "dishes"."id" = $1[0m  [["id", 16]]
  â†³ app/controllers/dishes_controller.rb:57:in `destroy'
  [1m[36mTRANSACTION (25.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:57:in `destroy'
No template found for DishesController#destroy, rendering head :no_content
Completed 204 No Content in 155ms (ActiveRecord: 125.0ms | Allocations: 4346)


Started DELETE "/restaurants/16/dishes/16" for 127.0.0.1 at 2023-11-22 20:12:48 +0100
Processing by DishesController#destroy as TURBO_STREAM
  Parameters: {"restaurant_id"=>"16", "id"=>"16"}
  [1m[36mDish Load (24.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:56:in `destroy'
Completed 404 Not Found in 50ms (ActiveRecord: 24.2ms | Allocations: 1153)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::RecordNotFound (Couldn't find Dish with 'id'=16):
  
app/controllers/dishes_controller.rb:56:in `destroy'
Started GET "/restaurants/3/dishes/16/edit" for 127.0.0.1 at 2023-11-22 20:12:48 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"16"}
  [1m[36mDish Load (24.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
Completed 404 Not Found in 49ms (ActiveRecord: 24.5ms | Allocations: 877)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::RecordNotFound (Couldn't find Dish with 'id'=16):
  
app/controllers/dishes_controller.rb:34:in `edit'
Started GET "/restaurants/3/dishes/16/edit" for 127.0.0.1 at 2023-11-22 20:13:01 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"16"}
  [1m[36mDish Load (24.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
Completed 404 Not Found in 134ms (ActiveRecord: 129.9ms | Allocations: 3311)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::RecordNotFound (Couldn't find Dish with 'id'=16):
  
app/controllers/dishes_controller.rb:34:in `edit'
Started GET "/restaurants/3/dishes/16/edit" for 127.0.0.1 at 2023-11-22 20:13:04 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"16"}
  [1m[36mDish Load (25.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
Completed 404 Not Found in 51ms (ActiveRecord: 25.0ms | Allocations: 878)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::RecordNotFound (Couldn't find Dish with 'id'=16):
  
app/controllers/dishes_controller.rb:34:in `edit'
Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-22 20:13:12 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.6ms | Allocations: 2989)
  [1m[36mDish Load (24.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 888)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 453)
  [1m[36mUser Load (22.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 454)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 118.1ms | Allocations: 14678)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 690)
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (23.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 26.0ms | Allocations: 2265)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 275.5ms | Allocations: 28267)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1374)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 55.5ms | Allocations: 8093)
  Rendered layout layouts/application.html.erb (Duration: 341.9ms | Allocations: 56950)
Completed 200 OK in 938ms (Views: 48.9ms | ActiveRecord: 853.0ms | Allocations: 85999)


Started GET "/restaurants/3/dishes/new" for 127.0.0.1 at 2023-11-22 20:13:16 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"3"}
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:19:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.3ms | Allocations: 2764)
  Rendered dishes/new.html.erb within layouts/application (Duration: 2.9ms | Allocations: 3051)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1101)
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.3ms | Allocations: 4714)
  Rendered layout layouts/application.html.erb (Duration: 60.1ms | Allocations: 12652)
Completed 200 OK in 111ms (Views: 10.9ms | ActiveRecord: 75.2ms | Allocations: 13778)


Started POST "/restaurants/3/dishes" for 127.0.0.1 at 2023-11-22 20:13:22 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"tumadre", "descripcion"=>"LELELELELE", "precio"=>""}, "button"=>"", "restaurant_id"=>"3"}
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (26.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:25:in `create'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:25:in `create'
  [1m[36mDish Create (25.5ms)[0m  [1m[32mINSERT INTO "dishes" ("restaurant_id", "nombre", "ruta_img_plato", "descripcion", "precio", "imported_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_id", 3], ["nombre", "tumadre"], ["ruta_img_plato", nil], ["descripcion", "LELELELELE"], ["precio", nil], ["imported_id", nil]]
  â†³ app/controllers/dishes_controller.rb:25:in `create'
  [1m[36mTRANSACTION (25.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:25:in `create'
Redirected to http://localhost:3000/restaurants/3
Completed 302 Found in 107ms (ActiveRecord: 102.4ms | Allocations: 4170)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-22 20:13:22 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.8ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.1ms | Allocations: 2239)
  [1m[36mDish Load (24.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (23.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 629)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 452)
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 79.5ms | Allocations: 6334)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 537)
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 26.6ms | Allocations: 2249)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 259.6ms | Allocations: 14372)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.1ms | Allocations: 4608)
  Rendered layout layouts/application.html.erb (Duration: 290.8ms | Allocations: 23866)
Completed 200 OK in 645ms (Views: 19.4ms | ActiveRecord: 594.6ms | Allocations: 29760)


Started GET "/restaurants/3/dishes/32/edit" for 127.0.0.1 at 2023-11-22 20:13:26 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"32"}
  [1m[36mDish Load (25.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:35:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.2ms | Allocations: 2206)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 4.0ms | Allocations: 2737)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.1ms | Allocations: 4713)
  Rendered layout layouts/application.html.erb (Duration: 60.3ms | Allocations: 12336)
Completed 200 OK in 137ms (Views: 10.9ms | ActiveRecord: 99.5ms | Allocations: 13483)


Started DELETE "/restaurants/3/dishes/32" for 127.0.0.1 at 2023-11-22 20:13:30 +0100
Processing by DishesController#destroy as TURBO_STREAM
  Parameters: {"restaurant_id"=>"3", "id"=>"32"}
  [1m[36mDish Load (24.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:56:in `destroy'
  [1m[36mTRANSACTION (24.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:57:in `destroy'
  [1m[36mReview Load (25.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 32], ["reviewable_type", "Dish"]]
  â†³ app/controllers/dishes_controller.rb:57:in `destroy'
  [1m[36mDish Destroy (24.8ms)[0m  [1m[31mDELETE FROM "dishes" WHERE "dishes"."id" = $1[0m  [["id", 32]]
  â†³ app/controllers/dishes_controller.rb:57:in `destroy'
  [1m[36mTRANSACTION (25.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:57:in `destroy'
No template found for DishesController#destroy, rendering head :no_content
Completed 204 No Content in 155ms (ActiveRecord: 125.2ms | Allocations: 4261)


Started DELETE "/restaurants/3/dishes/32" for 127.0.0.1 at 2023-11-22 20:13:33 +0100
Processing by DishesController#destroy as TURBO_STREAM
  Parameters: {"restaurant_id"=>"3", "id"=>"32"}
  [1m[36mDish Load (25.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:56:in `destroy'
Completed 404 Not Found in 54ms (ActiveRecord: 25.0ms | Allocations: 1106)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::RecordNotFound (Couldn't find Dish with 'id'=32):
  
app/controllers/dishes_controller.rb:56:in `destroy'
Started GET "/restaurants/3/dishes/32/edit" for 127.0.0.1 at 2023-11-22 20:13:33 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"32"}
  [1m[36mDish Load (24.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
Completed 404 Not Found in 51ms (ActiveRecord: 24.8ms | Allocations: 896)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::RecordNotFound (Couldn't find Dish with 'id'=32):
  
app/controllers/dishes_controller.rb:34:in `edit'
Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-22 20:13:40 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.8ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (25.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.9ms | Allocations: 2250)
  [1m[36mDish Load (25.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 636)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 452)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 81.4ms | Allocations: 6362)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 544)
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 27.0ms | Allocations: 2249)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 238.2ms | Allocations: 13703)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1115)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 29.2ms | Allocations: 4651)
  Rendered layout layouts/application.html.erb (Duration: 270.7ms | Allocations: 23319)
Completed 200 OK in 633ms (Views: 22.5ms | ActiveRecord: 575.8ms | Allocations: 29156)


Started GET "/restaurants/3/dishes/new" for 127.0.0.1 at 2023-11-22 20:13:42 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"3"}
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:19:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 1.9ms | Allocations: 2189)
  Rendered dishes/new.html.erb within layouts/application (Duration: 2.0ms | Allocations: 2263)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1101)
  [1m[36mUser Load (23.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.4ms | Allocations: 4714)
  Rendered layout layouts/application.html.erb (Duration: 57.4ms | Allocations: 11862)
Completed 200 OK in 109ms (Views: 9.3ms | ActiveRecord: 73.1ms | Allocations: 12769)


Started POST "/restaurants/3/dishes" for 127.0.0.1 at 2023-11-22 20:13:51 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"kjfdaÃ±fsk", "descripcion"=>"jfdklajfldafa", "precio"=>"848484.1"}, "button"=>"", "restaurant_id"=>"3"}
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (25.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:25:in `create'
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:25:in `create'
  [1m[36mDish Create (24.9ms)[0m  [1m[32mINSERT INTO "dishes" ("restaurant_id", "nombre", "ruta_img_plato", "descripcion", "precio", "imported_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_id", 3], ["nombre", "kjfdaÃ±fsk"], ["ruta_img_plato", nil], ["descripcion", "jfdklajfldafa"], ["precio", 848484.1], ["imported_id", nil]]
  â†³ app/controllers/dishes_controller.rb:25:in `create'
  [1m[36mTRANSACTION (27.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:25:in `create'
Redirected to http://localhost:3000/restaurants/3
Completed 302 Found in 107ms (ActiveRecord: 102.9ms | Allocations: 3166)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-22 20:13:51 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.6ms | Allocations: 2234)
  [1m[36mDish Load (24.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 629)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 452)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 79.5ms | Allocations: 6334)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 537)
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 26.7ms | Allocations: 2249)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 260.1ms | Allocations: 14325)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 29.2ms | Allocations: 4608)
  Rendered layout layouts/application.html.erb (Duration: 292.9ms | Allocations: 23819)
Completed 200 OK in 645ms (Views: 22.6ms | ActiveRecord: 590.1ms | Allocations: 29666)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-22 20:14:38 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (23.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 27.2ms | Allocations: 2992)
  [1m[36mDish Load (24.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 886)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 453)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 454)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 114.9ms | Allocations: 14650)
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 690)
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 26.5ms | Allocations: 2265)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 353.1ms | Allocations: 30486)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1374)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 64.0ms | Allocations: 8092)
  Rendered layout layouts/application.html.erb (Duration: 426.4ms | Allocations: 59168)
Completed 200 OK in 1048ms (Views: 56.4ms | ActiveRecord: 926.7ms | Allocations: 88504)


Started GET "/restaurants/3/edit" for 127.0.0.1 at 2023-11-22 20:14:42 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:56:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/_form.html.erb:28
  Rendered restaurants/_form.html.erb (Duration: 85.4ms | Allocations: 6390)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 87.2ms | Allocations: 6748)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1107)
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.8ms | Allocations: 4735)
  Rendered layout layouts/application.html.erb (Duration: 146.1ms | Allocations: 16405)
Completed 200 OK in 200ms (Views: 46.8ms | ActiveRecord: 124.5ms | Allocations: 17169)


Started GET "/restaurants/3/dishes/33/edit" for 127.0.0.1 at 2023-11-22 20:14:45 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"33"}
  [1m[36mDish Load (24.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:35:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.5ms | Allocations: 2759)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 3.5ms | Allocations: 3378)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1102)
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.9ms | Allocations: 4740)
  Rendered layout layouts/application.html.erb (Duration: 59.5ms | Allocations: 13025)
Completed 200 OK in 137ms (Views: 10.9ms | ActiveRecord: 98.8ms | Allocations: 14937)


Started DELETE "/restaurants/33/dishes/33" for 127.0.0.1 at 2023-11-22 20:14:48 +0100
Processing by DishesController#destroy as TURBO_STREAM
  Parameters: {"restaurant_id"=>"33", "id"=>"33"}
  [1m[36mDish Load (24.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:56:in `destroy'
  [1m[36mTRANSACTION (25.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:57:in `destroy'
  [1m[36mReview Load (25.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 33], ["reviewable_type", "Dish"]]
  â†³ app/controllers/dishes_controller.rb:57:in `destroy'
  [1m[36mDish Destroy (24.3ms)[0m  [1m[31mDELETE FROM "dishes" WHERE "dishes"."id" = $1[0m  [["id", 33]]
  â†³ app/controllers/dishes_controller.rb:57:in `destroy'
  [1m[36mTRANSACTION (25.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:57:in `destroy'
No template found for DishesController#destroy, rendering head :no_content
Completed 204 No Content in 153ms (ActiveRecord: 124.7ms | Allocations: 4342)


Started GET "/restaurants/3/dishes/33/edit" for 127.0.0.1 at 2023-11-22 20:14:51 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"33"}
  [1m[36mDish Load (25.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
Completed 404 Not Found in 51ms (ActiveRecord: 24.9ms | Allocations: 888)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::RecordNotFound (Couldn't find Dish with 'id'=33):
  
app/controllers/dishes_controller.rb:34:in `edit'
Started GET "/restaurants/3/dishes/new" for 127.0.0.1 at 2023-11-22 20:15:40 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"3"}
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:19:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.4ms | Allocations: 2850)
  Rendered dishes/new.html.erb within layouts/application (Duration: 2.9ms | Allocations: 3146)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1371)
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 111.4ms | Allocations: 13656)
  Rendered layout layouts/application.html.erb (Duration: 124.0ms | Allocations: 37371)
Completed 200 OK in 322ms (Views: 25.1ms | ActiveRecord: 254.6ms | Allocations: 51201)


Started POST "/restaurants/3/dishes" for 127.0.0.1 at 2023-11-22 20:15:45 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"jkfdlaÃ±j", "descripcion"=>"fjkdalÃ±fds", "precio"=>"434"}, "button"=>"", "restaurant_id"=>"3"}
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (25.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:25:in `create'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:25:in `create'
  [1m[36mDish Create (24.9ms)[0m  [1m[32mINSERT INTO "dishes" ("restaurant_id", "nombre", "ruta_img_plato", "descripcion", "precio", "imported_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_id", 3], ["nombre", "jkfdlaÃ±j"], ["ruta_img_plato", nil], ["descripcion", "fjkdalÃ±fds"], ["precio", 434.0], ["imported_id", nil]]
  â†³ app/controllers/dishes_controller.rb:25:in `create'
  [1m[36mTRANSACTION (25.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:25:in `create'
Redirected to http://localhost:3000/restaurants/3
Completed 302 Found in 106ms (ActiveRecord: 101.2ms | Allocations: 4595)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-22 20:15:45 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (23.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.4ms | Allocations: 2934)
  [1m[36mDish Load (24.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 886)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 453)
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 454)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 84.3ms | Allocations: 9253)
  Rendered layouts/_add_comment.html.erb (Duration: 0.8ms | Allocations: 690)
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 27.5ms | Allocations: 2265)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 266.4ms | Allocations: 20467)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1101)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 29.0ms | Allocations: 4610)
  Rendered layout layouts/application.html.erb (Duration: 298.6ms | Allocations: 29976)
Completed 200 OK in 820ms (Views: 26.6ms | ActiveRecord: 746.4ms | Allocations: 50721)


Started GET "/restaurants/3/dishes/34/edit" for 127.0.0.1 at 2023-11-22 20:15:54 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"34"}
  [1m[36mDish Load (25.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:35:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.1ms | Allocations: 2210)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 2.9ms | Allocations: 2756)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.9ms | Allocations: 4713)
  Rendered layout layouts/application.html.erb (Duration: 59.6ms | Allocations: 12354)
Completed 200 OK in 140ms (Views: 9.9ms | ActiveRecord: 100.6ms | Allocations: 14100)


Started DELETE "/restaurants/3/dishes/34" for 127.0.0.1 at 2023-11-22 20:15:57 +0100
Processing by DishesController#destroy as TURBO_STREAM
  Parameters: {"restaurant_id"=>"3", "id"=>"34"}
  [1m[36mDish Load (24.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:56:in `destroy'
  [1m[36mTRANSACTION (25.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:57:in `destroy'
  [1m[36mReview Load (24.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 34], ["reviewable_type", "Dish"]]
  â†³ app/controllers/dishes_controller.rb:57:in `destroy'
  [1m[36mDish Destroy (24.9ms)[0m  [1m[31mDELETE FROM "dishes" WHERE "dishes"."id" = $1[0m  [["id", 34]]
  â†³ app/controllers/dishes_controller.rb:57:in `destroy'
  [1m[36mTRANSACTION (24.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:57:in `destroy'
No template found for DishesController#destroy, rendering head :no_content
Completed 204 No Content in 153ms (ActiveRecord: 123.6ms | Allocations: 4256)


Started GET "/restaurants/3/dishes/34/edit" for 127.0.0.1 at 2023-11-22 20:16:00 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"34"}
  [1m[36mDish Load (24.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
Completed 404 Not Found in 55ms (ActiveRecord: 24.4ms | Allocations: 887)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::RecordNotFound (Couldn't find Dish with 'id'=34):
  
app/controllers/dishes_controller.rb:34:in `edit'
Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-22 20:16:04 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.5ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (23.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.4ms | Allocations: 2250)
  [1m[36mDish Load (25.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 636)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 452)
  [1m[36mUser Load (24.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 79.5ms | Allocations: 6363)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 544)
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 28.8ms | Allocations: 2251)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 236.7ms | Allocations: 13706)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1115)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 29.2ms | Allocations: 4650)
  Rendered layout layouts/application.html.erb (Duration: 269.5ms | Allocations: 23322)
Completed 200 OK in 624ms (Views: 21.8ms | ActiveRecord: 568.6ms | Allocations: 29182)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-22 20:17:18 +0100
  [1m[36mActiveRecord::SchemaMigration Load (24.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (25.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (25.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 183.2ms | Allocations: 126087)
  [1m[36mDish Load (25.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (28.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 904)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 453)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 455)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 172.0ms | Allocations: 16998)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 692)
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 26.3ms | Allocations: 2291)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 579.5ms | Allocations: 158498)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1394)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 81.4ms | Allocations: 9576)
  Rendered layout layouts/application.html.erb (Duration: 671.9ms | Allocations: 188785)
Completed 200 OK in 1938ms (Views: 321.4ms | ActiveRecord: 1191.2ms | Allocations: 254841)


Started GET "/restaurants/3/dishes/new" for 127.0.0.1 at 2023-11-22 20:17:22 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"3"}
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:19:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 3.4ms | Allocations: 3244)
  Rendered dishes/new.html.erb within layouts/application (Duration: 4.0ms | Allocations: 3535)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.4ms | Allocations: 4715)
  Rendered layout layouts/application.html.erb (Duration: 61.6ms | Allocations: 13137)
Completed 200 OK in 113ms (Views: 11.6ms | ActiveRecord: 75.1ms | Allocations: 14281)


Started POST "/restaurants/3/dishes" for 127.0.0.1 at 2023-11-22 20:17:28 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"lelelel", "descripcion"=>"lolololo", "precio"=>"43443"}, "button"=>"", "restaurant_id"=>"3"}
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (25.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:25:in `create'
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:25:in `create'
  [1m[36mDish Create (25.2ms)[0m  [1m[32mINSERT INTO "dishes" ("restaurant_id", "nombre", "ruta_img_plato", "descripcion", "precio", "imported_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_id", 3], ["nombre", "lelelel"], ["ruta_img_plato", nil], ["descripcion", "lolololo"], ["precio", 43443.0], ["imported_id", nil]]
  â†³ app/controllers/dishes_controller.rb:25:in `create'
  [1m[36mTRANSACTION (26.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:25:in `create'
Redirected to http://localhost:3000/restaurants/3
Completed 302 Found in 107ms (ActiveRecord: 102.4ms | Allocations: 5547)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-22 20:17:28 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.1ms | Allocations: 2237)
  [1m[36mDish Load (24.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 629)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 452)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 80.4ms | Allocations: 6334)
  Rendered layouts/_add_comment.html.erb (Duration: 0.4ms | Allocations: 537)
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 26.7ms | Allocations: 2249)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 259.5ms | Allocations: 14374)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1101)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.5ms | Allocations: 4608)
  Rendered layout layouts/application.html.erb (Duration: 291.0ms | Allocations: 23868)
Completed 200 OK in 644ms (Views: 19.1ms | ActiveRecord: 592.5ms | Allocations: 29750)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-22 20:17:30 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.1ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.2ms | Allocations: 2233)
  [1m[36mDish Load (22.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (25.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 629)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 452)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 80.4ms | Allocations: 6334)
  Rendered layouts/_add_comment.html.erb (Duration: 0.4ms | Allocations: 537)
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 26.7ms | Allocations: 2249)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 259.1ms | Allocations: 14324)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1105)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 29.0ms | Allocations: 4621)
  Rendered layout layouts/application.html.erb (Duration: 295.4ms | Allocations: 23843)
Completed 200 OK in 651ms (Views: 25.5ms | ActiveRecord: 593.4ms | Allocations: 29690)


Started GET "/restaurants/3/dishes/35/edit" for 127.0.0.1 at 2023-11-22 20:17:33 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"35"}
  [1m[36mDish Load (24.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:35:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.8ms | Allocations: 2242)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 3.8ms | Allocations: 2774)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.6ms | Allocations: 4725)
  Rendered layout layouts/application.html.erb (Duration: 61.8ms | Allocations: 12387)
Completed 200 OK in 163ms (Views: 12.0ms | ActiveRecord: 99.3ms | Allocations: 14151)


Started DELETE "/restaurants/3/dishes/35" for 127.0.0.1 at 2023-11-22 20:17:35 +0100
Processing by DishesController#destroy as TURBO_STREAM
  Parameters: {"restaurant_id"=>"3", "id"=>"35"}
  [1m[36mDish Load (25.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:56:in `destroy'
  [1m[36mTRANSACTION (25.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:57:in `destroy'
  [1m[36mReview Load (24.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 35], ["reviewable_type", "Dish"]]
  â†³ app/controllers/dishes_controller.rb:57:in `destroy'
  [1m[36mDish Destroy (25.0ms)[0m  [1m[31mDELETE FROM "dishes" WHERE "dishes"."id" = $1[0m  [["id", 35]]
  â†³ app/controllers/dishes_controller.rb:57:in `destroy'
  [1m[36mTRANSACTION (26.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:57:in `destroy'
Redirected to http://localhost:3000/restaurants/3/dishes/35/edit
Completed 302 Found in 155ms (ActiveRecord: 125.6ms | Allocations: 4081)


Started GET "/restaurants/3/dishes/35/edit" for 127.0.0.1 at 2023-11-22 20:17:35 +0100
Processing by DishesController#edit as TURBO_STREAM
  Parameters: {"restaurant_id"=>"3", "id"=>"35"}
  [1m[36mDish Load (24.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
Completed 404 Not Found in 51ms (ActiveRecord: 24.7ms | Allocations: 911)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::RecordNotFound (Couldn't find Dish with 'id'=35):
  
app/controllers/dishes_controller.rb:34:in `edit'
Started GET "/restaurants/3/dishes/35/edit" for 127.0.0.1 at 2023-11-22 20:17:35 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"35"}
  [1m[36mDish Load (24.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
Completed 404 Not Found in 50ms (ActiveRecord: 24.7ms | Allocations: 877)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::RecordNotFound (Couldn't find Dish with 'id'=35):
  
app/controllers/dishes_controller.rb:34:in `edit'
Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-22 20:18:02 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.5ms | Allocations: 2990)
  [1m[36mDish Load (24.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 885)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 453)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 454)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 119.5ms | Allocations: 14644)
  Rendered layouts/_add_comment.html.erb (Duration: 0.7ms | Allocations: 689)
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 26.8ms | Allocations: 2265)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 334.8ms | Allocations: 29794)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1374)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.2ms | Allocations: 8089)
  Rendered layout layouts/application.html.erb (Duration: 402.0ms | Allocations: 58490)
Completed 200 OK in 1019ms (Views: 51.4ms | ActiveRecord: 906.5ms | Allocations: 87819)


Started GET "/restaurants/3/dishes/new" for 127.0.0.1 at 2023-11-22 20:18:04 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"3"}
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:19:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.2ms | Allocations: 2761)
  Rendered dishes/new.html.erb within layouts/application (Duration: 2.8ms | Allocations: 3048)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1101)
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.2ms | Allocations: 4714)
  Rendered layout layouts/application.html.erb (Duration: 59.7ms | Allocations: 12655)
Completed 200 OK in 111ms (Views: 10.2ms | ActiveRecord: 74.7ms | Allocations: 13808)


Started POST "/restaurants/3/dishes" for 127.0.0.1 at 2023-11-22 20:18:09 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"fdasfdsf", "descripcion"=>"fdsaf", "precio"=>"43"}, "button"=>"", "restaurant_id"=>"3"}
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (25.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:25:in `create'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:25:in `create'
  [1m[36mDish Create (24.9ms)[0m  [1m[32mINSERT INTO "dishes" ("restaurant_id", "nombre", "ruta_img_plato", "descripcion", "precio", "imported_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_id", 3], ["nombre", "fdasfdsf"], ["ruta_img_plato", nil], ["descripcion", "fdsaf"], ["precio", 43.0], ["imported_id", nil]]
  â†³ app/controllers/dishes_controller.rb:25:in `create'
  [1m[36mTRANSACTION (26.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:25:in `create'
Redirected to http://localhost:3000/restaurants/3
Completed 302 Found in 106ms (ActiveRecord: 102.0ms | Allocations: 4139)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-22 20:18:09 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 25.8ms | Allocations: 2237)
  [1m[36mDish Load (24.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 631)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 452)
  [1m[36mUser Load (24.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 78.8ms | Allocations: 6342)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 539)
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (24.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 25.6ms | Allocations: 2249)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 256.3ms | Allocations: 14382)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.8ms | Allocations: 4608)
  Rendered layout layouts/application.html.erb (Duration: 287.2ms | Allocations: 23877)
Completed 200 OK in 640ms (Views: 18.8ms | ActiveRecord: 588.4ms | Allocations: 29777)


Started GET "/restaurants/3/dishes/36/edit" for 127.0.0.1 at 2023-11-22 20:18:12 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"36"}
  [1m[36mDish Load (25.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:35:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 1.8ms | Allocations: 2208)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 2.5ms | Allocations: 2745)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1101)
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.3ms | Allocations: 4713)
  Rendered layout layouts/application.html.erb (Duration: 58.8ms | Allocations: 12343)
Completed 200 OK in 134ms (Views: 10.0ms | ActiveRecord: 99.0ms | Allocations: 14089)


Started DELETE "/restaurants/3/dishes/36" for 127.0.0.1 at 2023-11-22 20:18:13 +0100
Processing by DishesController#destroy as TURBO_STREAM
  Parameters: {"restaurant_id"=>"3", "id"=>"36"}
  [1m[36mDish Load (24.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:56:in `destroy'
  [1m[36mTRANSACTION (25.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:57:in `destroy'
  [1m[36mReview Load (24.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 36], ["reviewable_type", "Dish"]]
  â†³ app/controllers/dishes_controller.rb:57:in `destroy'
  [1m[36mDish Destroy (25.0ms)[0m  [1m[31mDELETE FROM "dishes" WHERE "dishes"."id" = $1[0m  [["id", 36]]
  â†³ app/controllers/dishes_controller.rb:57:in `destroy'
  [1m[36mTRANSACTION (25.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:57:in `destroy'
Redirected to http://localhost:3000/restaurants/36
Completed 302 Found in 154ms (ActiveRecord: 124.7ms | Allocations: 4002)


Started GET "/restaurants/36" for 127.0.0.1 at 2023-11-22 20:18:13 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"36"}
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
Redirected to http://localhost:3000/not_found
Completed 302 Found in 50ms (ActiveRecord: 24.6ms | Allocations: 573)


Started GET "/not_found" for 127.0.0.1 at 2023-11-22 20:18:13 +0100
Processing by ErrorsController#not_found as TURBO_STREAM
  Parameters: {"unmatched"=>"not_found"}
  Rendering layout layouts/application.html.erb
  Rendering errors/not_found.html.erb within layouts/application
  Rendered errors/not_found.html.erb within layouts/application (Duration: 0.3ms | Allocations: 92)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1158)
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 78.1ms | Allocations: 4752)
  Rendered layout layouts/application.html.erb (Duration: 84.0ms | Allocations: 10212)
Completed 404 Not Found in 85ms (Views: 35.5ms | ActiveRecord: 49.1ms | Allocations: 10680)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-22 20:19:00 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 27.3ms | Allocations: 2990)
  [1m[36mDish Load (24.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 885)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 453)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 454)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 120.0ms | Allocations: 14666)
  Rendered layouts/_add_comment.html.erb (Duration: 0.7ms | Allocations: 689)
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 26.8ms | Allocations: 2265)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 334.3ms | Allocations: 29825)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1372)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 55.3ms | Allocations: 8089)
  Rendered layout layouts/application.html.erb (Duration: 399.4ms | Allocations: 58490)
Completed 200 OK in 1015ms (Views: 51.7ms | ActiveRecord: 902.0ms | Allocations: 87842)


Started GET "/restaurants/3/dishes/new" for 127.0.0.1 at 2023-11-22 20:19:02 +0100
Processing by DishesController#new as HTML
  Parameters: {"restaurant_id"=>"3"}
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:19:in `new'
  Rendering layout layouts/application.html.erb
  Rendering dishes/new.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.1ms | Allocations: 2759)
  Rendered dishes/new.html.erb within layouts/application (Duration: 2.7ms | Allocations: 3046)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.7ms | Allocations: 4714)
  Rendered layout layouts/application.html.erb (Duration: 59.4ms | Allocations: 12647)
Completed 200 OK in 111ms (Views: 9.8ms | ActiveRecord: 74.6ms | Allocations: 13792)


Started POST "/restaurants/3/dishes" for 127.0.0.1 at 2023-11-22 20:19:07 +0100
Processing by DishesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "dish"=>{"nombre"=>"fdfdf", "descripcion"=>"fdfdfd", "precio"=>"534545"}, "button"=>"", "restaurant_id"=>"3"}
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mTRANSACTION (25.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:25:in `create'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:25:in `create'
  [1m[36mDish Create (24.7ms)[0m  [1m[32mINSERT INTO "dishes" ("restaurant_id", "nombre", "ruta_img_plato", "descripcion", "precio", "imported_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["restaurant_id", 3], ["nombre", "fdfdf"], ["ruta_img_plato", nil], ["descripcion", "fdfdfd"], ["precio", 534545.0], ["imported_id", nil]]
  â†³ app/controllers/dishes_controller.rb:25:in `create'
  [1m[36mTRANSACTION (26.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:25:in `create'
Redirected to http://localhost:3000/restaurants/3
Completed 302 Found in 108ms (ActiveRecord: 103.6ms | Allocations: 4148)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-22 20:19:07 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (24.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 25.9ms | Allocations: 2248)
  [1m[36mDish Load (24.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 635)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 452)
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 453)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 80.6ms | Allocations: 6362)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 543)
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 28.0ms | Allocations: 2251)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 262.1ms | Allocations: 14425)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1113)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 29.7ms | Allocations: 4644)
  Rendered layout layouts/application.html.erb (Duration: 296.3ms | Allocations: 24020)
Completed 200 OK in 649ms (Views: 23.9ms | ActiveRecord: 593.4ms | Allocations: 29894)


Started GET "/restaurants/3/dishes/37/edit" for 127.0.0.1 at 2023-11-22 20:19:09 +0100
Processing by DishesController#edit as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"37"}
  [1m[36mDish Load (24.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:34:in `edit'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:35:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering dishes/edit.html.erb within layouts/application
  Rendered dishes/_form.html.erb (Duration: 2.5ms | Allocations: 2220)
  Rendered dishes/edit.html.erb within layouts/application (Duration: 3.4ms | Allocations: 2770)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.7ms | Allocations: 4713)
  Rendered layout layouts/application.html.erb (Duration: 60.3ms | Allocations: 12368)
Completed 200 OK in 138ms (Views: 11.2ms | ActiveRecord: 98.8ms | Allocations: 14113)


Started DELETE "/restaurants/3/dishes/37" for 127.0.0.1 at 2023-11-22 20:19:10 +0100
Processing by DishesController#destroy as TURBO_STREAM
  Parameters: {"restaurant_id"=>"3", "id"=>"37"}
  [1m[36mDish Load (25.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:56:in `destroy'
  [1m[36mTRANSACTION (25.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/dishes_controller.rb:57:in `destroy'
  [1m[36mReview Load (25.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 37], ["reviewable_type", "Dish"]]
  â†³ app/controllers/dishes_controller.rb:57:in `destroy'
  [1m[36mDish Destroy (24.9ms)[0m  [1m[31mDELETE FROM "dishes" WHERE "dishes"."id" = $1[0m  [["id", 37]]
  â†³ app/controllers/dishes_controller.rb:57:in `destroy'
  [1m[36mTRANSACTION (25.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/dishes_controller.rb:57:in `destroy'
Redirected to http://localhost:3000/restaurants/3
Completed 302 Found in 155ms (ActiveRecord: 125.6ms | Allocations: 4010)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-22 20:19:10 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `show'
  [1m[36mRank Exists? (24.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:29:in `show'
  [1m[36mRank Load (23.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 31.3ms | Allocations: 2233)
  [1m[36mDish Load (23.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 633)
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 452)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 3.5ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 2.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 100.9ms | Allocations: 6351)
  Rendered layouts/_add_comment.html.erb (Duration: 1.6ms | Allocations: 537)
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 453)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 26.8ms | Allocations: 2256)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 267.5ms | Allocations: 13668)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1113)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.8ms | Allocations: 4644)
  Rendered layout layouts/application.html.erb (Duration: 298.7ms | Allocations: 23263)
Completed 200 OK in 651ms (Views: 55.1ms | ActiveRecord: 563.7ms | Allocations: 29090)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-22 20:19:23 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"Atreides"}
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (25.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (26.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-22 19:19:23.315840')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-22 19:19:23.341183')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-22 19:19:23.366054')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-22 19:19:23.441928')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (24.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-22 19:19:23.492808')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (24.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 3.5ms | Allocations: 3450)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1114)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 3.7ms | Allocations: 4530)
  Rendered layout layouts/application.html.erb (Duration: 10.3ms | Allocations: 12914)
Completed 200 OK in 447ms (Views: 10.7ms | ActiveRecord: 396.7ms | Allocations: 23213)


Started GET "/logout" for 127.0.0.1 at 2023-11-22 20:19:24 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 443)


Started GET "/" for 127.0.0.1 at 2023-11-22 20:19:24 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (50.0ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 106.7ms | Allocations: 12858)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1102)
  Rendered layouts/_sidenav.html.erb (Duration: 1.6ms | Allocations: 2692)
  Rendered layout layouts/application.html.erb (Duration: 112.2ms | Allocations: 20633)
Completed 200 OK in 268ms (Views: 14.6ms | ActiveRecord: 246.2ms | Allocations: 25494)


Started GET "/login" for 127.0.0.1 at 2023-11-22 20:19:25 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 2.5ms | Allocations: 2992)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1102)
  Rendered layouts/_sidenav.html.erb (Duration: 1.7ms | Allocations: 2690)
  Rendered layout layouts/application.html.erb (Duration: 7.2ms | Allocations: 10575)
Completed 200 OK in 8ms (Views: 7.6ms | ActiveRecord: 0.0ms | Allocations: 11025)


Started POST "/login" for 127.0.0.1 at 2023-11-22 20:19:29 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"gari", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 213ms (ActiveRecord: 24.9ms | Allocations: 902)


Started GET "/" for 127.0.0.1 at 2023-11-22 20:19:29 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Exists? (49.5ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 79.0ms | Allocations: 10370)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1115)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.5ms | Allocations: 4204)
  Rendered layout layouts/application.html.erb (Duration: 137.5ms | Allocations: 19696)
Completed 200 OK in 288ms (Views: 16.0ms | ActiveRecord: 268.9ms | Allocations: 22259)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-22 20:19:35 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"gari"}
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (26.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (25.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (24.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-22 19:19:35.293167')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-22 19:19:35.318144')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-22 19:19:35.343084')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 2.4ms | Allocations: 2331)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1114)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 29.1ms | Allocations: 4098)
  Rendered layout layouts/application.html.erb (Duration: 35.2ms | Allocations: 11359)
Completed 200 OK in 267ms (Views: 11.4ms | ActiveRecord: 224.7ms | Allocations: 15868)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 20:19:36 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (51.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 19:19:36.135487')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 19:19:36.187315')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (26.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 19:19:36.213830')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (25.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (25.9ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:12
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 27.2ms | Allocations: 1275)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1139)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.9ms | Allocations: 4193)
  Rendered layout layouts/application.html.erb (Duration: 84.7ms | Allocations: 10824)
Completed 200 OK in 216ms (Views: 9.0ms | ActiveRecord: 204.5ms | Allocations: 13165)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 20:19:44 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (49.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 79.0ms | Allocations: 10382)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1102)
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.1ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 135.0ms | Allocations: 19668)
Completed 200 OK in 288ms (Views: 14.0ms | ActiveRecord: 270.0ms | Allocations: 22224)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-22 20:20:37 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"gari"}
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (25.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (23.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-22 19:20:37.478065')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-22 19:20:37.503108')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-22 19:20:37.528038')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (24.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 2.0ms | Allocations: 2323)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1102)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.2ms | Allocations: 4068)
  Rendered layout layouts/application.html.erb (Duration: 33.2ms | Allocations: 11256)
Completed 200 OK in 260ms (Views: 8.7ms | ActiveRecord: 220.1ms | Allocations: 15759)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 20:20:38 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (51.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 19:20:38.225625')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 19:20:38.277862')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 19:20:38.304602')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (25.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:12
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 26.7ms | Allocations: 910)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1127)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 55.1ms | Allocations: 4187)
  Rendered layout layouts/application.html.erb (Duration: 85.5ms | Allocations: 10426)
Completed 200 OK in 215ms (Views: 10.4ms | ActiveRecord: 201.2ms | Allocations: 12495)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 20:23:25 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (25.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 19:23:25.971368')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (24.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 19:23:26.052949')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (25.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 19:23:26.106119')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (25.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mUser Load (25.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:12
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 52.0ms | Allocations: 2599)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1406)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 140.1ms | Allocations: 11964)
  Rendered layout layouts/application.html.erb (Duration: 215.3ms | Allocations: 42740)
Completed 200 OK in 464ms (Views: 39.5ms | ActiveRecord: 379.6ms | Allocations: 56381)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 20:25:15 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (25.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 19:25:15.404279')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (26.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 19:25:15.486502')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (25.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 19:25:15.543269')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (25.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:14
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 132.5ms | Allocations: 6873)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1404)
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 79.1ms | Allocations: 7839)
  Rendered layout layouts/application.html.erb (Duration: 221.7ms | Allocations: 35764)
Completed 200 OK in 483ms (Views: 21.7ms | ActiveRecord: 405.5ms | Allocations: 53006)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 20:26:33 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (25.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 19:26:33.480262')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 19:26:33.561022')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (25.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 19:26:33.614402')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (24.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (25.8ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:17
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 131.8ms | Allocations: 6864)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1406)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 80.0ms | Allocations: 7839)
  Rendered layout layouts/application.html.erb (Duration: 225.3ms | Allocations: 35792)
Completed 200 OK in 477ms (Views: 25.2ms | ActiveRecord: 400.8ms | Allocations: 53013)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 20:42:30 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (25.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 19:42:30.869071')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (33.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 19:42:31.387942')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (26.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 19:42:31.425452')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (26.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 28.1ms | Allocations: 5440)
  Rendered layout layouts/application.html.erb (Duration: 28.4ms | Allocations: 5532)
Completed 500 Internal Server Error in 656ms (ActiveRecord: 336.7ms | Allocations: 24868)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `promoted_restaurant' for #<Rails::Application::Configuration:0x0000000003a0c0>):
     9:     <% @restaurants.each do |restaurant| %>
    10:       <div class="admin_promoted_restaurant_item">
    11:         <%= restaurant.nombre %>
    12:         <% if restaurant.id == Rails.application.config.promoted_restaurant %>
    13:           <div class="delete_button" style="background-color: var(--ok-color); color: var(--black);"> Promocionado </div>
    14:         <% else %>
    15:           <%= link_to "Promocionar", user_path(user.nombre),  class: "delete_button", style: "background-color: var(--strong-gold); color: var(--black);" %>
  
app/views/admin/dashboard.html.erb:12
app/views/admin/dashboard.html.erb:9
Started GET "/admin" for 127.0.0.1 at 2023-11-22 20:43:06 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (25.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 19:43:06.796796')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (26.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 19:43:06.908126')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (26.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 19:43:06.963099')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (25.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 107.3ms | Allocations: 5795)
  Rendered layout layouts/application.html.erb (Duration: 107.4ms | Allocations: 5887)
Completed 500 Internal Server Error in 399ms (ActiveRecord: 335.8ms | Allocations: 23092)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `promoted_restaurant' for #<Rails::Application::Configuration:0x0000000003a0c0>):
     9:     <% @restaurants.each do |restaurant| %>
    10:       <div class="admin_promoted_restaurant_item">
    11:         <%= restaurant.nombre %>
    12:         <% if restaurant.id == Rails.application.config.promoted_restaurant %>
    13:           <div class="delete_button" style="background-color: var(--ok-color); color: var(--black);"> Promocionado </div>
    14:         <% else %>
    15:           <%= link_to "Promocionar", user_path(user.nombre),  class: "delete_button", style: "background-color: var(--strong-gold); color: var(--black);" %>
  
app/views/admin/dashboard.html.erb:12
app/views/admin/dashboard.html.erb:9
Started GET "/admin" for 127.0.0.1 at 2023-11-22 20:43:15 +0100
  [1m[36mActiveRecord::SchemaMigration Load (25.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (26.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 19:43:16.068431')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (26.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 19:43:16.702571')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (26.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 19:43:16.757385')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 123.0ms | Allocations: 15457)
  Rendered layout layouts/application.html.erb (Duration: 123.2ms | Allocations: 15583)
Completed 500 Internal Server Error in 950ms (ActiveRecord: 558.9ms | Allocations: 46471)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `user' for #<ActionView::Base:0x0000000000eb00>):
    12:         <% if restaurant.id == Rails.application.config.promoted_restaurant %>
    13:           <div class="delete_button" style="background-color: var(--ok-color); color: var(--black);"> Promocionado </div>
    14:         <% else %>
    15:           <%= link_to "Promocionar", user_path(user.nombre),  class: "delete_button", style: "background-color: var(--strong-gold); color: var(--black);" %>
    16:         <% end %>
    17:       </div>
    18:     <% end%>
  
app/views/admin/dashboard.html.erb:15
app/views/admin/dashboard.html.erb:9
Started GET "/admin" for 127.0.0.1 at 2023-11-22 20:43:31 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (26.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 19:43:31.678198')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 19:43:31.759601')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 19:43:31.815790')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (26.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:21
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 142.6ms | Allocations: 8861)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1439)
  [1m[36mUser Load (24.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 158.6ms | Allocations: 12153)
  Rendered layout layouts/application.html.erb (Duration: 479.1ms | Allocations: 164728)
Completed 200 OK in 739ms (Views: 253.7ms | ActiveRecord: 430.1ms | Allocations: 181983)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 20:44:00 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (52.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 19:44:00.563109')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (26.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 19:44:00.616387')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (24.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 19:44:00.643720')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (25.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:21
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 51.9ms | Allocations: 1478)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1127)
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.5ms | Allocations: 4176)
  Rendered layout layouts/application.html.erb (Duration: 118.8ms | Allocations: 18042)
Completed 200 OK in 252ms (Views: 19.7ms | ActiveRecord: 228.8ms | Allocations: 20143)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 20:44:12 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (50.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 19:44:12.078929')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (26.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 19:44:12.130001')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (26.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 19:44:12.157333')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (25.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:21
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 51.5ms | Allocations: 1478)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1127)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.6ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 115.9ms | Allocations: 17758)
Completed 200 OK in 248ms (Views: 17.3ms | ActiveRecord: 227.5ms | Allocations: 19836)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 20:45:01 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (26.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 19:45:01.700060')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 19:45:01.782730')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (25.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 19:45:01.838977')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:21
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 134.0ms | Allocations: 7036)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1396)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 80.8ms | Allocations: 7817)
  Rendered layout layouts/application.html.erb (Duration: 227.8ms | Allocations: 35730)
Completed 200 OK in 492ms (Views: 27.9ms | ActiveRecord: 407.7ms | Allocations: 52976)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 20:45:41 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (25.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 19:45:41.485942')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 19:45:41.567423')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 19:45:41.624093')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (26.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:21
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 133.3ms | Allocations: 6996)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1396)
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 79.9ms | Allocations: 7816)
  Rendered layout layouts/application.html.erb (Duration: 224.7ms | Allocations: 35689)
Completed 200 OK in 490ms (Views: 24.4ms | ActiveRecord: 404.6ms | Allocations: 52838)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 20:53:48 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (25.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 19:53:48.728453')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (24.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 19:53:49.344896')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 19:53:49.373585')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (26.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (26.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:21
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 57.6ms | Allocations: 6794)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1396)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 131.2ms | Allocations: 7754)
  Rendered layout layouts/application.html.erb (Duration: 199.5ms | Allocations: 35447)
Completed 200 OK in 922ms (Views: 73.5ms | ActiveRecord: 431.8ms | Allocations: 54790)


Started GET "/admin/promote" for 127.0.0.1 at 2023-11-22 20:53:55 +0100
Processing by AdminController#promote as HTML
Redirected to http://localhost:3000/admin
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 459)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 20:53:55 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (52.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 19:53:55.548557')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (25.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 19:53:55.601386')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (25.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 19:53:55.627191')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (25.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (24.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:21
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 49.9ms | Allocations: 1591)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1127)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.0ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 107.0ms | Allocations: 11091)
Completed 200 OK in 238ms (Views: 9.4ms | ActiveRecord: 225.4ms | Allocations: 13178)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 20:53:59 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (49.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 19:53:59.285835')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (25.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 19:53:59.335994')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (24.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 19:53:59.362174')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (25.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (25.8ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:21
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 51.5ms | Allocations: 1591)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1127)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.3ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 108.8ms | Allocations: 11061)
Completed 200 OK in 236ms (Views: 9.6ms | ActiveRecord: 223.7ms | Allocations: 13139)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 20:54:35 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (51.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 19:54:35.503214')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (26.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 19:54:35.555325')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (26.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 19:54:35.582323')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:21
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 50.9ms | Allocations: 1592)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1127)
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.1ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 108.1ms | Allocations: 11056)
Completed 200 OK in 240ms (Views: 10.0ms | ActiveRecord: 227.5ms | Allocations: 13134)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 20:54:48 +0100
  [1m[36mActiveRecord::SchemaMigration Load (25.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (26.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 19:54:49.195400')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (24.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 19:54:49.745683')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 19:54:49.799221')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (25.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (26.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:21
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 156.8ms | Allocations: 18290)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1445)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 158.9ms | Allocations: 12150)
  Rendered layout layouts/application.html.erb (Duration: 508.3ms | Allocations: 175866)
Completed 200 OK in 1246ms (Views: 285.5ms | ActiveRecord: 678.6ms | Allocations: 206790)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 20:56:16 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (27.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 19:56:17.078697')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (26.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 19:56:17.165158')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 19:56:17.243397')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (25.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (25.9ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:21
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 132.6ms | Allocations: 7153)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1396)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 79.6ms | Allocations: 7820)
  Rendered layout layouts/application.html.erb (Duration: 222.2ms | Allocations: 35835)
Completed 200 OK in 508ms (Views: 21.1ms | ActiveRecord: 429.2ms | Allocations: 53082)


Started GET "/admin/promote?restaurant_id=2" for 127.0.0.1 at 2023-11-22 20:56:18 +0100
Processing by AdminController#promote as HTML
  Parameters: {"restaurant_id"=>"2"}
Redirected to http://localhost:3000/admin
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 477)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 20:56:18 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (51.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 19:56:18.811524')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 19:56:18.863735')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 19:56:18.890400')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (25.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:21
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 51.9ms | Allocations: 1631)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1127)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.0ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 110.4ms | Allocations: 11125)
Completed 200 OK in 243ms (Views: 10.5ms | ActiveRecord: 229.5ms | Allocations: 13226)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 20:56:55 +0100
  [1m[36mActiveRecord::SchemaMigration Load (24.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (23.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 19:56:56.058335')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (23.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 19:56:56.592434')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (23.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 19:56:56.643957')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (23.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (23.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (23.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:21
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 149.1ms | Allocations: 18331)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1481)
  [1m[36mUser Load (23.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 155.4ms | Allocations: 12245)
  Rendered layout layouts/application.html.erb (Duration: 369.7ms | Allocations: 92122)
Completed 200 OK in 1079ms (Views: 152.9ms | ActiveRecord: 661.0ms | Allocations: 123069)


Started GET "/admin/promote?restaurant_id=3" for 127.0.0.1 at 2023-11-22 20:58:39 +0100
Processing by AdminController#promote as HTML
  Parameters: {"restaurant_id"=>"3"}
Redirected to http://localhost:3000/admin
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 470)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 20:58:39 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (52.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 19:58:39.225415')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (27.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 19:58:39.279065')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 19:58:39.306630')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (25.8ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:21
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 51.8ms | Allocations: 1631)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1127)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.2ms | Allocations: 4175)
  Rendered layout layouts/application.html.erb (Duration: 108.9ms | Allocations: 11105)
Completed 200 OK in 244ms (Views: 9.9ms | ActiveRecord: 231.4ms | Allocations: 13208)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 20:59:43 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (26.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 19:59:43.953666')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 19:59:44.035649')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 19:59:44.091145')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (25.9ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:21
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 133.4ms | Allocations: 7188)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1406)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 79.7ms | Allocations: 7845)
  Rendered layout layouts/application.html.erb (Duration: 224.3ms | Allocations: 36080)
Completed 200 OK in 489ms (Views: 23.2ms | ActiveRecord: 407.6ms | Allocations: 53311)


Started GET "/" for 127.0.0.1 at 2023-11-22 20:59:45 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (24.9ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (23.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (23.2ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 107.9ms | Allocations: 13924)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1102)
  [1m[36mUser Load (23.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 50.9ms | Allocations: 4195)
  Rendered layout layouts/application.html.erb (Duration: 163.0ms | Allocations: 23220)
Completed 200 OK in 408ms (Views: 20.6ms | ActiveRecord: 342.5ms | Allocations: 36238)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-22 20:59:47 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"gari"}
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (25.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (25.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (25.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-22 19:59:47.731599')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-22 19:59:47.757648')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-22 19:59:47.783000')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 4.6ms | Allocations: 4000)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1102)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.6ms | Allocations: 4069)
  Rendered layout layouts/application.html.erb (Duration: 36.3ms | Allocations: 12925)
Completed 200 OK in 268ms (Views: 11.8ms | ActiveRecord: 224.1ms | Allocations: 17778)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 20:59:48 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (50.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 19:59:48.282644')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (25.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 19:59:48.334241')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 19:59:48.360744')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (25.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:21
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 51.6ms | Allocations: 1631)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1141)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.0ms | Allocations: 4210)
  Rendered layout layouts/application.html.erb (Duration: 110.7ms | Allocations: 11235)
Completed 200 OK in 242ms (Views: 11.8ms | ActiveRecord: 227.1ms | Allocations: 13336)


Started GET "/admin/promote?restaurant_id=1" for 127.0.0.1 at 2023-11-22 20:59:50 +0100
Processing by AdminController#promote as HTML
  Parameters: {"restaurant_id"=>"1"}
Redirected to http://localhost:3000/admin
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 386)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 20:59:50 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (51.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 19:59:50.402000')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (25.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 19:59:50.453696')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 19:59:50.480152')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (25.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (25.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:21
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 51.9ms | Allocations: 1631)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1127)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.0ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 108.5ms | Allocations: 11174)
Completed 200 OK in 239ms (Views: 9.3ms | ActiveRecord: 227.4ms | Allocations: 13254)


Started GET "/admin/promote?restaurant_id=1" for 127.0.0.1 at 2023-11-22 20:59:52 +0100
Processing by AdminController#promote as HTML
  Parameters: {"restaurant_id"=>"1"}
Redirected to http://localhost:3000/admin
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 353)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 20:59:52 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (50.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 19:59:52.274531')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 19:59:52.325154')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 19:59:52.351751')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (25.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:21
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 51.7ms | Allocations: 1631)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1127)
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.3ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 109.4ms | Allocations: 11120)
Completed 200 OK in 239ms (Views: 10.5ms | ActiveRecord: 225.6ms | Allocations: 13201)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 21:00:57 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (55.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 20:00:57.041766')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 20:00:57.098277')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (26.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 20:00:57.125280')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (25.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:21
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 51.3ms | Allocations: 1631)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1127)
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.9ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 108.0ms | Allocations: 11125)
Completed 200 OK in 246ms (Views: 9.8ms | ActiveRecord: 232.6ms | Allocations: 13203)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 21:01:38 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (26.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 20:01:38.153398')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 20:01:38.235356')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (25.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 20:01:38.290441')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (26.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (26.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:23
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 132.3ms | Allocations: 7212)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1406)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 83.9ms | Allocations: 7845)
  Rendered layout layouts/application.html.erb (Duration: 226.8ms | Allocations: 36095)
Completed 200 OK in 487ms (Views: 26.3ms | ActiveRecord: 407.3ms | Allocations: 53310)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 21:01:41 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (51.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 20:01:41.617011')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 20:01:41.669244')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 20:01:41.696064')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (25.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (25.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:23
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 51.7ms | Allocations: 1636)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1133)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.2ms | Allocations: 4175)
  Rendered layout layouts/application.html.erb (Duration: 109.1ms | Allocations: 11189)
Completed 200 OK in 241ms (Views: 10.4ms | ActiveRecord: 227.5ms | Allocations: 13273)


Started GET "/admin/promote?restaurant_id=2" for 127.0.0.1 at 2023-11-22 21:01:58 +0100
Processing by AdminController#promote as HTML
  Parameters: {"restaurant_id"=>"2"}
Redirected to http://localhost:3000/admin
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 419)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 21:01:58 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (26.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 20:01:58.270410')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 20:01:58.352083')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (25.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 20:01:58.406465')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (26.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:22
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 131.7ms | Allocations: 7209)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1406)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 79.5ms | Allocations: 7901)
  Rendered layout layouts/application.html.erb (Duration: 221.5ms | Allocations: 36153)
Completed 200 OK in 480ms (Views: 21.5ms | ActiveRecord: 405.0ms | Allocations: 53346)


Started GET "/admin/promote?restaurant_id=7" for 127.0.0.1 at 2023-11-22 21:01:59 +0100
Processing by AdminController#promote as HTML
  Parameters: {"restaurant_id"=>"7"}
Redirected to http://localhost:3000/admin
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 353)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 21:01:59 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (51.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 20:01:59.398621')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 20:01:59.450504')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 20:01:59.476963')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:22
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 51.7ms | Allocations: 1633)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1127)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.7ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 107.8ms | Allocations: 11133)
Completed 200 OK in 240ms (Views: 8.5ms | ActiveRecord: 228.8ms | Allocations: 13219)


Started GET "/admin/promote?restaurant_id=13" for 127.0.0.1 at 2023-11-22 21:02:00 +0100
Processing by AdminController#promote as HTML
  Parameters: {"restaurant_id"=>"13"}
Redirected to http://localhost:3000/admin
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 353)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 21:02:00 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (50.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 20:02:00.341469')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (25.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 20:02:00.392951')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (25.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 20:02:00.419253')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (25.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (25.8ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:22
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 51.6ms | Allocations: 1633)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1127)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.7ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 107.8ms | Allocations: 11136)
Completed 200 OK in 238ms (Views: 8.6ms | ActiveRecord: 227.1ms | Allocations: 13217)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 21:04:32 +0100
  [1m[36mActiveRecord::SchemaMigration Load (25.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (26.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 20:04:33.806136')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (26.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 20:04:34.366810')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 20:04:34.421843')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (26.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (26.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:22
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 158.6ms | Allocations: 18352)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1481)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 158.0ms | Allocations: 12245)
  Rendered layout layouts/application.html.erb (Duration: 382.5ms | Allocations: 92048)
Completed 200 OK in 1128ms (Views: 155.4ms | ActiveRecord: 682.9ms | Allocations: 122996)


Started GET "/admin/promote?restaurant_id=13" for 127.0.0.1 at 2023-11-22 21:04:40 +0100
Processing by AdminController#promote as HTML
  Parameters: {"restaurant_id"=>"13"}
Redirected to http://localhost:3000/admin
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 456)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 21:04:40 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (52.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 20:04:40.918078')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (26.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 20:04:40.971622')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (26.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 20:04:40.998480')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:22
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 52.2ms | Allocations: 1633)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1127)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.9ms | Allocations: 4175)
  Rendered layout layouts/application.html.erb (Duration: 109.8ms | Allocations: 11134)
Completed 200 OK in 245ms (Views: 10.2ms | ActiveRecord: 231.2ms | Allocations: 13237)


Started GET "/admin/promote?restaurant_id=13" for 127.0.0.1 at 2023-11-22 21:04:43 +0100
Processing by AdminController#promote as HTML
  Parameters: {"restaurant_id"=>"13"}
Redirected to http://localhost:3000/admin
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 395)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 21:04:43 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (51.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 20:04:43.045532')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (25.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 20:04:43.097551')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 20:04:43.123800')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:22
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 51.7ms | Allocations: 1633)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1127)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.8ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 108.3ms | Allocations: 11151)
Completed 200 OK in 239ms (Views: 9.2ms | ActiveRecord: 226.5ms | Allocations: 13245)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 21:05:23 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (26.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 20:05:23.154812')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (25.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 20:05:23.237018')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 20:05:23.292652')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (26.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:23
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 133.5ms | Allocations: 7230)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1406)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 80.4ms | Allocations: 7844)
  Rendered layout layouts/application.html.erb (Duration: 224.6ms | Allocations: 36123)
Completed 200 OK in 485ms (Views: 23.8ms | ActiveRecord: 406.6ms | Allocations: 53372)


Started GET "/admin/promote?restaurant_id=3" for 127.0.0.1 at 2023-11-22 21:05:24 +0100
Processing by AdminController#promote as HTML
  Parameters: {"restaurant_id"=>"3"}
Redirected to http://localhost:3000/admin
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 356)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 21:05:24 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (51.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 20:05:24.916475')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 20:05:24.968568')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 20:05:24.995294')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (26.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:23
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 52.3ms | Allocations: 1635)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1127)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 51.9ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 108.2ms | Allocations: 11138)
Completed 200 OK in 241ms (Views: 9.9ms | ActiveRecord: 227.4ms | Allocations: 13224)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 21:06:37 +0100
  [1m[36mActiveRecord::SchemaMigration Load (25.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (26.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 20:06:38.774515')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 20:06:39.326607')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 20:06:39.379796')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 127.3ms | Allocations: 15765)
  Rendered layout layouts/application.html.erb (Duration: 127.5ms | Allocations: 15891)
Completed 500 Internal Server Error in 865ms (ActiveRecord: 561.9ms | Allocations: 46757)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `to' for 1:Integer):
    17:       </div>
    18:     <% end %>
    19:     <%= Rails.application.config.promoted_restaurant %>
    20:     <%= Rails.application.config.promoted_restaurant.to == 3.to_s %>
    21:   </div>
    22:   <div class="admin_user_list">
    23:       <% @users.each do |user| %>
  
app/views/admin/dashboard.html.erb:20
Started GET "/admin" for 127.0.0.1 at 2023-11-22 21:06:50 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (26.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 20:06:50.887130')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 20:06:50.969807')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 20:06:51.025723')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (25.9ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:23
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 136.1ms | Allocations: 9019)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1475)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 157.8ms | Allocations: 12240)
  Rendered layout layouts/application.html.erb (Duration: 352.9ms | Allocations: 81393)
Completed 200 OK in 614ms (Views: 126.5ms | ActiveRecord: 433.0ms | Allocations: 98654)


Started GET "/admin/promote?restaurant_id=3" for 127.0.0.1 at 2023-11-22 21:06:53 +0100
Processing by AdminController#promote as HTML
  Parameters: {"restaurant_id"=>"3"}
Redirected to http://localhost:3000/admin
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 457)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 21:06:53 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (50.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 20:06:53.868660')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (27.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 20:06:53.920099')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (25.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 20:06:53.950118')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (25.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:23
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 51.7ms | Allocations: 1593)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1127)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.6ms | Allocations: 4175)
  Rendered layout layouts/application.html.erb (Duration: 109.3ms | Allocations: 11100)
Completed 200 OK in 244ms (Views: 10.3ms | ActiveRecord: 228.4ms | Allocations: 13202)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:07:42 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Exists? (25.0ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12:in `index'
  [1m[36mRank Load (24.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:18:in `map'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:18:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 109.1ms | Allocations: 13983)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1375)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 113.2ms | Allocations: 13139)
  Rendered layout layouts/application.html.erb (Duration: 237.4ms | Allocations: 47856)
Completed 200 OK in 572ms (Views: 41.1ms | ActiveRecord: 477.6ms | Allocations: 69001)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:10:29 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:4:in `index'
  [1m[36mRestaurant Exists? (24.2ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:16:in `index'
  [1m[36mRank Load (24.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:22:in `map'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  Rendered restaurants/index.html.erb within layouts/application (Duration: 1.9ms | Allocations: 2664)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | Allocations: 2756)
Completed 500 Internal Server Error in 327ms (ActiveRecord: 277.2ms | Allocations: 19062)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `promoted_restaurant' for #<ActionView::Base:0x00000000024298>):
    16:             <div class="explore_promoted_restaurant_info">
    17:                 <div>
    18:                     <div class="explore_promoted_restaurant_name">
    19:                         <%= promoted_restaurant.nombre %><br>
    20:                         <span class="title_key_word"><%= promoted_restaurant.categoria %></span>
    21:                     </div>
    22:                     <div class="explore_promoted_restaurant_stars">
  
app/views/restaurants/index.html.erb:19
Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:10:51 +0100
  [1m[36mActiveRecord::SchemaMigration Load (25.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:4:in `index'
  [1m[36mRestaurant Exists? (24.8ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:14:in `index'
  [1m[36mRank Load (25.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:20:in `map'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:20:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:20:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:20:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  Rendered restaurants/index.html.erb within layouts/application (Duration: 55.3ms | Allocations: 42343)
  Rendered layout layouts/application.html.erb (Duration: 55.7ms | Allocations: 42469)
Completed 500 Internal Server Error in 1025ms (ActiveRecord: 531.9ms | Allocations: 87959)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `promoted_restaurant' for #<ActionView::Base:0x0000000000eec0>):
    16:             <div class="explore_promoted_restaurant_info">
    17:                 <div>
    18:                     <div class="explore_promoted_restaurant_name">
    19:                         <%= promoted_restaurant.nombre %><br>
    20:                         <span class="title_key_word"><%= promoted_restaurant.categoria %></span>
    21:                     </div>
    22:                     <div class="explore_promoted_restaurant_stars">
  
app/views/restaurants/index.html.erb:19
Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:11:13 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:4:in `index'
  [1m[36mRestaurant Exists? (24.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:14:in `index'
  [1m[36mRank Load (24.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:20:in `map'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:20:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:20:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:20:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:45
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:52
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:64
  Rendered restaurants/index.html.erb within layouts/application (Duration: 108.8ms | Allocations: 14021)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1437)
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 166.3ms | Allocations: 17358)
  Rendered layout layouts/application.html.erb (Duration: 286.8ms | Allocations: 52543)
Completed 200 OK in 588ms (Views: 89.7ms | ActiveRecord: 451.1ms | Allocations: 68925)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:13:00 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `index'
  [1m[36mRank Load (24.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:21:in `map'
  [1m[36mRestaurant Load (24.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:23
  [1m[36mCategory Load (24.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:45
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:52
  Rendered restaurants/index.html.erb within layouts/application (Duration: 104.9ms | Allocations: 11935)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1375)
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 110.6ms | Allocations: 13084)
  Rendered layout layouts/application.html.erb (Duration: 224.6ms | Allocations: 45806)
Completed 200 OK in 519ms (Views: 29.6ms | ActiveRecord: 446.9ms | Allocations: 62068)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-22 21:13:24 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"gari"}
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (25.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (25.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (26.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-22 20:13:25.075113')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-22 20:13:25.100714')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-22 20:13:25.126102')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (25.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 22.5ms | Allocations: 4017)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1116)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 32.0ms | Allocations: 4107)
  Rendered layout layouts/application.html.erb (Duration: 58.3ms | Allocations: 13060)
Completed 200 OK in 386ms (Views: 33.3ms | ActiveRecord: 302.2ms | Allocations: 24740)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 21:13:25 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (50.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 20:13:25.732013')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (26.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 20:13:25.783856')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (30.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 20:13:25.810870')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (26.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:21
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 53.0ms | Allocations: 2083)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1127)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 55.1ms | Allocations: 4175)
  Rendered layout layouts/application.html.erb (Duration: 112.6ms | Allocations: 11591)
Completed 200 OK in 251ms (Views: 13.0ms | ActiveRecord: 233.2ms | Allocations: 13957)


Started GET "/admin/promote?restaurant_id=2" for 127.0.0.1 at 2023-11-22 21:13:27 +0100
Processing by AdminController#promote as HTML
  Parameters: {"restaurant_id"=>"2"}
Redirected to http://localhost:3000/admin
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 465)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 21:13:27 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (50.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 20:13:27.052452')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 20:13:27.104095')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 20:13:27.130867')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (25.8ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:21
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 52.5ms | Allocations: 1587)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1127)
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.8ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 110.0ms | Allocations: 11087)
Completed 200 OK in 241ms (Views: 10.5ms | ActiveRecord: 226.9ms | Allocations: 13174)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:13:28 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.6ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `index'
  [1m[36mRank Load (24.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:21:in `map'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:23
  [1m[36mCategory Load (24.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:45
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:52
  Rendered restaurants/index.html.erb within layouts/application (Duration: 80.0ms | Allocations: 9806)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1102)
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.0ms | Allocations: 4175)
  Rendered layout layouts/application.html.erb (Duration: 137.5ms | Allocations: 19066)
Completed 200 OK in 315ms (Views: 14.9ms | ActiveRecord: 270.3ms | Allocations: 22073)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-22 21:13:37 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"gari"}
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (25.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (26.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (25.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-22 20:13:37.868980')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (24.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-22 20:13:37.894089')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-22 20:13:37.918981')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 2.4ms | Allocations: 2311)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1116)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 29.1ms | Allocations: 4104)
  Rendered layout layouts/application.html.erb (Duration: 37.8ms | Allocations: 11300)
Completed 200 OK in 271ms (Views: 13.5ms | ActiveRecord: 224.9ms | Allocations: 15810)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 21:13:38 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (51.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 20:13:38.320469')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 20:13:38.373146')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (25.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 20:13:38.399910')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (23.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (26.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:21
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 51.2ms | Allocations: 1587)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1141)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.9ms | Allocations: 4203)
  Rendered layout layouts/application.html.erb (Duration: 108.4ms | Allocations: 11153)
Completed 200 OK in 240ms (Views: 10.4ms | ActiveRecord: 225.8ms | Allocations: 13238)


Started GET "/admin/promote?restaurant_id=3" for 127.0.0.1 at 2023-11-22 21:13:41 +0100
Processing by AdminController#promote as HTML
  Parameters: {"restaurant_id"=>"3"}
Redirected to http://localhost:3000/admin
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 368)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 21:13:41 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (48.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 20:13:41.369978')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 20:13:41.419376')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 20:13:41.445806')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (25.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:21
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 51.9ms | Allocations: 1587)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1127)
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.6ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 108.3ms | Allocations: 11087)
Completed 200 OK in 235ms (Views: 9.9ms | ActiveRecord: 222.1ms | Allocations: 13171)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:13:43 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `index'
  [1m[36mRank Load (22.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:21:in `map'
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (22.4ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:23
  [1m[36mCategory Load (24.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:45
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:52
  Rendered restaurants/index.html.erb within layouts/application (Duration: 79.7ms | Allocations: 9804)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1102)
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.8ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 137.5ms | Allocations: 19082)
Completed 200 OK in 314ms (Views: 17.0ms | ActiveRecord: 266.0ms | Allocations: 22090)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:13:50 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (25.2ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `index'
  [1m[36mRank Load (24.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:21:in `map'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:23
  [1m[36mCategory Load (24.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:45
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:52
  Rendered restaurants/index.html.erb within layouts/application (Duration: 81.9ms | Allocations: 9766)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1102)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 56.1ms | Allocations: 4210)
  Rendered layout layouts/application.html.erb (Duration: 141.5ms | Allocations: 19052)
Completed 200 OK in 321ms (Views: 18.9ms | ActiveRecord: 273.2ms | Allocations: 22052)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-22 21:13:52 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"gari"}
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (24.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (25.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-22 20:13:53.088682')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (24.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-22 20:13:53.114076')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-22 20:13:53.138978')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 2.1ms | Allocations: 2333)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1116)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 30.1ms | Allocations: 4103)
  Rendered layout layouts/application.html.erb (Duration: 35.9ms | Allocations: 11338)
Completed 200 OK in 266ms (Views: 11.4ms | ActiveRecord: 222.3ms | Allocations: 15822)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 21:13:53 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (46.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 20:13:53.551072')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (23.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 20:13:53.598482')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (23.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 20:13:53.622566')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (23.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (22.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (23.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:21
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 47.3ms | Allocations: 1587)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1127)
  [1m[36mUser Load (23.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 50.1ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 101.3ms | Allocations: 11075)
Completed 200 OK in 221ms (Views: 9.8ms | ActiveRecord: 208.4ms | Allocations: 13159)


Started GET "/admin/promote?restaurant_id=7" for 127.0.0.1 at 2023-11-22 21:13:54 +0100
Processing by AdminController#promote as HTML
  Parameters: {"restaurant_id"=>"7"}
Redirected to http://localhost:3000/admin
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 350)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 21:13:54 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (48.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 20:13:54.564019')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 20:13:54.613316')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (23.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 20:13:54.638532')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (23.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (23.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (24.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:21
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 49.3ms | Allocations: 1587)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1127)
  [1m[36mUser Load (23.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 51.5ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 104.6ms | Allocations: 11054)
Completed 200 OK in 228ms (Views: 10.0ms | ActiveRecord: 214.8ms | Allocations: 13137)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:13:56 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (23.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.5ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `index'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:21:in `map'
  [1m[36mRestaurant Load (24.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (22.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:23
  [1m[36mCategory Load (23.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:45
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:52
  Rendered restaurants/index.html.erb within layouts/application (Duration: 79.8ms | Allocations: 8757)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1102)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.0ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 137.7ms | Allocations: 18025)
Completed 200 OK in 311ms (Views: 16.0ms | ActiveRecord: 266.4ms | Allocations: 21030)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-22 21:14:06 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"gari"}
  [1m[36mUser Load (25.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (26.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (25.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-22 20:14:06.306932')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-22 20:14:06.332391')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (24.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-22 20:14:06.357679')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (24.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 2.5ms | Allocations: 2333)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1116)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.7ms | Allocations: 4103)
  Rendered layout layouts/application.html.erb (Duration: 34.9ms | Allocations: 11373)
Completed 200 OK in 271ms (Views: 10.6ms | ActiveRecord: 227.1ms | Allocations: 15874)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 21:14:06 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (49.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 20:14:06.773253')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 20:14:06.824152')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (22.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 20:14:06.850823')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (25.8ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:21
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 51.8ms | Allocations: 1587)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1127)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.8ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 111.2ms | Allocations: 11087)
Completed 200 OK in 239ms (Views: 11.3ms | ActiveRecord: 224.5ms | Allocations: 13172)


Started GET "/admin/promote?restaurant_id=13" for 127.0.0.1 at 2023-11-22 21:14:08 +0100
Processing by AdminController#promote as HTML
  Parameters: {"restaurant_id"=>"13"}
Redirected to http://localhost:3000/admin
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 371)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 21:14:08 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (51.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 20:14:08.433517')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (25.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 20:14:08.485407')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 20:14:08.512053')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (26.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:21
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 52.3ms | Allocations: 1587)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1127)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.9ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 108.9ms | Allocations: 11072)
Completed 200 OK in 240ms (Views: 10.0ms | ActiveRecord: 226.5ms | Allocations: 13153)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:14:10 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (24.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.6ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `index'
  [1m[36mRank Load (24.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:21:in `map'
  [1m[36mRestaurant Load (23.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:23
  [1m[36mCategory Load (22.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:45
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:52
  Rendered restaurants/index.html.erb within layouts/application (Duration: 79.3ms | Allocations: 8777)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1102)
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 55.1ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 138.3ms | Allocations: 18045)
Completed 200 OK in 313ms (Views: 17.4ms | ActiveRecord: 266.6ms | Allocations: 21029)


Started GET "/restaurants/13" for 127.0.0.1 at 2023-11-22 21:14:23 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"13"}
  [1m[36mRestaurant Load (23.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Exists? (26.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=13 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=13 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=13 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 13], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=13 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 13], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 51.9ms | Allocations: 2147)
  [1m[36mDish Load (25.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 13]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 13], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 52.4ms | Allocations: 1919)
  Rendered layouts/_add_comment.html.erb (Duration: 1.1ms | Allocations: 737)
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=13 AND posts.autor=users.nombre AND posts.restaurant_id=13[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 329.6ms | Allocations: 23543)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1115)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.0ms | Allocations: 4210)
  Rendered layout layouts/application.html.erb (Duration: 387.2ms | Allocations: 32706)
Completed 200 OK in 829ms (Views: 87.2ms | ActiveRecord: 655.4ms | Allocations: 39495)


Started GET "/reviews/new?review_to=13&review_type=Restaurant" for 127.0.0.1 at 2023-11-22 21:14:26 +0100
Processing by ReviewsController#new as HTML
  Parameters: {"review_to"=>"13", "review_type"=>"Restaurant"}
  Rendering layout layouts/application.html.erb
  Rendering reviews/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 4.0ms | Allocations: 4825)
  Rendered reviews/new.html.erb within layouts/application (Duration: 4.5ms | Allocations: 5063)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1101)
  [1m[36mUser Load (23.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 73.3ms | Allocations: 4177)
  Rendered layout layouts/application.html.erb (Duration: 81.6ms | Allocations: 14116)
Completed 200 OK in 93ms (Views: 36.2ms | ActiveRecord: 46.0ms | Allocations: 21220)


Started POST "/reviews" for 127.0.0.1 at 2023-11-22 21:14:43 +0100
Processing by ReviewsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "review"=>{"reviewable_id"=>"13", "reviewable_type"=>"Restaurant", "autor"=>"gari", "contenido"=>"Espectacular durum caguÃ© muy fuerte"}, "button"=>""}
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:40:in `get_original_reviewed'
  [1m[36mTRANSACTION (25.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/reviews_controller.rb:24:in `create'
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:24:in `create'
  [1m[36mReview Create (26.6ms)[0m  [1m[32mINSERT INTO "reviews" ("autor", "reviewable_type", "reviewable_id", "contenido", "ruta_img", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["autor", "gari"], ["reviewable_type", "Restaurant"], ["reviewable_id", 13], ["contenido", "Espectacular durum caguÃ© muy fuerte"], ["ruta_img", nil], ["created_at", "2023-11-22 20:14:43.146819"], ["updated_at", "2023-11-22 20:14:43.146834"]]
  â†³ app/controllers/reviews_controller.rb:24:in `create'
  [1m[36mTRANSACTION (25.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/reviews_controller.rb:24:in `create'
Redirected to http://localhost:3000/restaurants/13
Completed 302 Found in 159ms (ActiveRecord: 128.5ms | Allocations: 5447)


Started GET "/restaurants/13" for 127.0.0.1 at 2023-11-22 21:14:43 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"13"}
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Exists? (24.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=13 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=13 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=13 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 13], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=13 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 13], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 51.8ms | Allocations: 1444)
  [1m[36mDish Load (24.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 13]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 13], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 930)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 449)
  Rendered layouts/_comment.html.erb (Duration: 53.5ms | Allocations: 4099)
  Rendered layouts/_add_comment.html.erb (Duration: 0.4ms | Allocations: 537)
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=13 AND posts.autor=users.nombre AND posts.restaurant_id=13[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 232.5ms | Allocations: 8768)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  [1m[36mUser Load (24.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 57.0ms | Allocations: 4204)
  Rendered layout layouts/application.html.erb (Duration: 292.8ms | Allocations: 17846)
Completed 200 OK in 624ms (Views: 23.2ms | ActiveRecord: 567.7ms | Allocations: 23196)


Started GET "/reviews/new?review_to=13&review_type=Restaurant" for 127.0.0.1 at 2023-11-22 21:14:49 +0100
Processing by ReviewsController#new as HTML
  Parameters: {"review_to"=>"13", "review_type"=>"Restaurant"}
  Rendering layout layouts/application.html.erb
  Rendering reviews/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 3.4ms | Allocations: 3862)
  Rendered reviews/new.html.erb within layouts/application (Duration: 3.5ms | Allocations: 3931)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1107)
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 82.7ms | Allocations: 4208)
  Rendered layout layouts/application.html.erb (Duration: 89.4ms | Allocations: 13043)
Completed 200 OK in 90ms (Views: 40.4ms | ActiveRecord: 49.5ms | Allocations: 13528)


Started POST "/restaurants/13/rank" for 127.0.0.1 at 2023-11-22 21:14:52 +0100
Processing by RanksController#create as TURBO_STREAM
  Parameters: {"rank"=>"5", "restaurant_id"=>"13"}
  [1m[36mTRANSACTION (23.9ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/ranks_controller.rb:4:in `create'
  [1m[36mRank Exists? (49.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."who" = $1 AND "ranks"."what" = $2 LIMIT $3[0m  [["who", "gari"], ["what", 13], ["LIMIT", 1]]
  â†³ app/controllers/ranks_controller.rb:4:in `create'
  [1m[36mRank Create (25.8ms)[0m  [1m[32mINSERT INTO "ranks" ("who", "what", "valoracion", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5)[0m  [["who", "gari"], ["what", 13], ["valoracion", 5], ["created_at", "2023-11-22 20:14:52.781697"], ["updated_at", "2023-11-22 20:14:52.781697"]]
  â†³ app/controllers/ranks_controller.rb:4:in `create'
  [1m[36mTRANSACTION (26.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/ranks_controller.rb:4:in `create'
Redirected to http://localhost:3000/restaurants/13
Completed 302 Found in 105ms (ActiveRecord: 125.3ms | Allocations: 2987)


Started GET "/restaurants/13" for 127.0.0.1 at 2023-11-22 21:14:52 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"13"}
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Exists? (24.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[36mRank Load (24.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 13]]
  â†³ app/controllers/restaurants_controller.rb:35:in `show'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=13 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=13 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=13 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 13], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=13 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 13], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 51.5ms | Allocations: 3323)
  [1m[36mDish Load (24.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 13]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 13], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 629)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 54.4ms | Allocations: 3619)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 540)
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=13 AND posts.autor=users.nombre AND posts.restaurant_id=13[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 234.0ms | Allocations: 10128)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1101)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.3ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 291.0ms | Allocations: 19176)
Completed 200 OK in 647ms (Views: 18.9ms | ActiveRecord: 593.6ms | Allocations: 24886)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:14:56 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `index'
  [1m[36mRank Load (24.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:21:in `map'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:23
  [1m[36mCategory Load (24.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:45
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:52
  Rendered restaurants/index.html.erb within layouts/application (Duration: 80.3ms | Allocations: 12295)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1102)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.7ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 136.4ms | Allocations: 21566)
Completed 200 OK in 340ms (Views: 14.1ms | ActiveRecord: 295.5ms | Allocations: 24980)


Started GET "/restaurants/13" for 127.0.0.1 at 2023-11-22 21:15:04 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"13"}
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Exists? (25.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[36mRank Load (25.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 13]]
  â†³ app/controllers/restaurants_controller.rb:35:in `show'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=13 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=13 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=13 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 13], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=13 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 13], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=13 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 52.6ms | Allocations: 3327)
  [1m[36mDish Load (24.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 13]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 13], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 633)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 54.5ms | Allocations: 3631)
  Rendered layouts/_add_comment.html.erb (Duration: 0.4ms | Allocations: 544)
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=13 AND posts.autor=users.nombre AND posts.restaurant_id=13[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 236.4ms | Allocations: 10153)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1115)
  [1m[36mUser Load (22.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.7ms | Allocations: 4209)
  Rendered layout layouts/application.html.erb (Duration: 292.5ms | Allocations: 19315)
Completed 200 OK in 652ms (Views: 22.2ms | ActiveRecord: 593.5ms | Allocations: 25006)


Started GET "/reviews/new?review_to=13&review_type=Restaurant" for 127.0.0.1 at 2023-11-22 21:15:06 +0100
Processing by ReviewsController#new as HTML
  Parameters: {"review_to"=>"13", "review_type"=>"Restaurant"}
  Rendering layout layouts/application.html.erb
  Rendering reviews/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 3.1ms | Allocations: 3861)
  Rendered reviews/new.html.erb within layouts/application (Duration: 3.2ms | Allocations: 3930)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 79.2ms | Allocations: 4176)
  Rendered layout layouts/application.html.erb (Duration: 85.9ms | Allocations: 12980)
Completed 200 OK in 87ms (Views: 36.3ms | ActiveRecord: 50.0ms | Allocations: 13468)


Started POST "/restaurants/13/rank" for 127.0.0.1 at 2023-11-22 21:15:07 +0100
Processing by RanksController#create as TURBO_STREAM
  Parameters: {"rank"=>"4", "restaurant_id"=>"13"}
  [1m[36mTRANSACTION (23.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/ranks_controller.rb:4:in `create'
  [1m[36mRank Exists? (48.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."who" = $1 AND "ranks"."what" = $2 LIMIT $3[0m  [["who", "gari"], ["what", 13], ["LIMIT", 1]]
  â†³ app/controllers/ranks_controller.rb:4:in `create'
  [1m[36mTRANSACTION (24.0ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/ranks_controller.rb:4:in `create'
No template found for RanksController#create, rendering head :no_content
Completed 204 No Content in 75ms (ActiveRecord: 95.3ms | Allocations: 2872)


Started POST "/restaurants/13/rank" for 127.0.0.1 at 2023-11-22 21:15:11 +0100
Processing by RanksController#create as TURBO_STREAM
  Parameters: {"rank"=>"4", "restaurant_id"=>"13"}
  [1m[36mTRANSACTION (25.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/ranks_controller.rb:4:in `create'
  [1m[36mRank Exists? (50.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."who" = $1 AND "ranks"."what" = $2 LIMIT $3[0m  [["who", "gari"], ["what", 13], ["LIMIT", 1]]
  â†³ app/controllers/ranks_controller.rb:4:in `create'
  [1m[36mTRANSACTION (24.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/ranks_controller.rb:4:in `create'
No template found for RanksController#create, rendering head :no_content
Completed 204 No Content in 77ms (ActiveRecord: 99.6ms | Allocations: 2581)


Started POST "/restaurants/13/rank" for 127.0.0.1 at 2023-11-22 21:15:12 +0100
Processing by RanksController#create as TURBO_STREAM
  Parameters: {"rank"=>"4", "restaurant_id"=>"13"}
  [1m[36mTRANSACTION (24.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/ranks_controller.rb:4:in `create'
  [1m[36mRank Exists? (49.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."who" = $1 AND "ranks"."what" = $2 LIMIT $3[0m  [["who", "gari"], ["what", 13], ["LIMIT", 1]]
  â†³ app/controllers/ranks_controller.rb:4:in `create'
  [1m[36mTRANSACTION (23.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/ranks_controller.rb:4:in `create'
No template found for RanksController#create, rendering head :no_content
Completed 204 No Content in 75ms (ActiveRecord: 96.7ms | Allocations: 2588)


Started POST "/restaurants/13/rank" for 127.0.0.1 at 2023-11-22 21:15:12 +0100
Processing by RanksController#create as TURBO_STREAM
  Parameters: {"rank"=>"4", "restaurant_id"=>"13"}
  [1m[36mTRANSACTION (23.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/ranks_controller.rb:4:in `create'
  [1m[36mRank Exists? (48.1ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."who" = $1 AND "ranks"."what" = $2 LIMIT $3[0m  [["who", "gari"], ["what", 13], ["LIMIT", 1]]
  â†³ app/controllers/ranks_controller.rb:4:in `create'
  [1m[36mTRANSACTION (23.7ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/ranks_controller.rb:4:in `create'
No template found for RanksController#create, rendering head :no_content
Completed 204 No Content in 74ms (ActiveRecord: 95.2ms | Allocations: 2580)


Started POST "/restaurants/13/rank" for 127.0.0.1 at 2023-11-22 21:15:12 +0100
Processing by RanksController#create as TURBO_STREAM
  Parameters: {"rank"=>"4", "restaurant_id"=>"13"}
  [1m[36mTRANSACTION (25.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/ranks_controller.rb:4:in `create'
  [1m[36mRank Exists? (50.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."who" = $1 AND "ranks"."what" = $2 LIMIT $3[0m  [["who", "gari"], ["what", 13], ["LIMIT", 1]]
  â†³ app/controllers/ranks_controller.rb:4:in `create'
  [1m[36mTRANSACTION (25.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/ranks_controller.rb:4:in `create'
No template found for RanksController#create, rendering head :no_content
Completed 204 No Content in 79ms (ActiveRecord: 101.3ms | Allocations: 2573)


Started POST "/restaurants/13/rank" for 127.0.0.1 at 2023-11-22 21:15:12 +0100
Processing by RanksController#create as TURBO_STREAM
  Parameters: {"rank"=>"4", "restaurant_id"=>"13"}
  [1m[36mTRANSACTION (24.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/ranks_controller.rb:4:in `create'
  [1m[36mRank Exists? (49.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."who" = $1 AND "ranks"."what" = $2 LIMIT $3[0m  [["who", "gari"], ["what", 13], ["LIMIT", 1]]
  â†³ app/controllers/ranks_controller.rb:4:in `create'
  [1m[36mTRANSACTION (25.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/ranks_controller.rb:4:in `create'
No template found for RanksController#create, rendering head :no_content
Completed 204 No Content in 78ms (ActiveRecord: 98.9ms | Allocations: 2593)


Started POST "/restaurants/13/rank" for 127.0.0.1 at 2023-11-22 21:15:13 +0100
Processing by RanksController#create as TURBO_STREAM
  Parameters: {"rank"=>"4", "restaurant_id"=>"13"}
  [1m[36mTRANSACTION (23.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/ranks_controller.rb:4:in `create'
  [1m[36mRank Exists? (48.1ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."who" = $1 AND "ranks"."what" = $2 LIMIT $3[0m  [["who", "gari"], ["what", 13], ["LIMIT", 1]]
  â†³ app/controllers/ranks_controller.rb:4:in `create'
  [1m[36mTRANSACTION (25.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/ranks_controller.rb:4:in `create'
No template found for RanksController#create, rendering head :no_content
Completed 204 No Content in 76ms (ActiveRecord: 97.0ms | Allocations: 2554)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:15:13 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (25.2ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `index'
  [1m[36mRank Load (24.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:21:in `map'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:23
  [1m[36mCategory Load (24.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:45
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:52
  Rendered restaurants/index.html.erb within layouts/application (Duration: 82.4ms | Allocations: 12310)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1116)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.8ms | Allocations: 4210)
  Rendered layout layouts/application.html.erb (Duration: 139.6ms | Allocations: 21721)
Completed 200 OK in 348ms (Views: 17.0ms | ActiveRecord: 296.6ms | Allocations: 25134)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:16:36 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (25.1ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `index'
  [1m[36mRank Load (25.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:21:in `map'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:23
  [1m[36mCategory Load (24.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:45
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:52
  Rendered restaurants/index.html.erb within layouts/application (Duration: 84.4ms | Allocations: 12274)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1116)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.2ms | Allocations: 4209)
  Rendered layout layouts/application.html.erb (Duration: 252.7ms | Allocations: 87662)
Completed 200 OK in 460ms (Views: 129.3ms | ActiveRecord: 298.6ms | Allocations: 91092)


Started GET "/restaurants/7" for 127.0.0.1 at 2023-11-22 21:17:22 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Exists? (25.0ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (23.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 51.3ms | Allocations: 1452)
  [1m[36mDish Load (24.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 25.6ms | Allocations: 500)
  Rendered layouts/_add_comment.html.erb (Duration: 0.8ms | Allocations: 569)
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 307.1ms | Allocations: 7372)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1115)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 55.0ms | Allocations: 4209)
  Rendered layout layouts/application.html.erb (Duration: 368.2ms | Allocations: 16510)
Completed 200 OK in 703ms (Views: 24.0ms | ActiveRecord: 644.9ms | Allocations: 21624)


Started GET "/reviews/new?review_to=7&review_type=Restaurant" for 127.0.0.1 at 2023-11-22 21:17:25 +0100
Processing by ReviewsController#new as HTML
  Parameters: {"review_to"=>"7", "review_type"=>"Restaurant"}
  Rendering layout layouts/application.html.erb
  Rendering reviews/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 3.6ms | Allocations: 3863)
  Rendered reviews/new.html.erb within layouts/application (Duration: 3.8ms | Allocations: 3932)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1113)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 80.2ms | Allocations: 4206)
  Rendered layout layouts/application.html.erb (Duration: 88.4ms | Allocations: 13046)
Completed 200 OK in 90ms (Views: 39.2ms | ActiveRecord: 49.8ms | Allocations: 13541)


Started POST "/restaurants/7/rank" for 127.0.0.1 at 2023-11-22 21:17:26 +0100
Processing by RanksController#create as TURBO_STREAM
  Parameters: {"rank"=>"2", "restaurant_id"=>"7"}
  [1m[36mTRANSACTION (24.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/ranks_controller.rb:4:in `create'
  [1m[36mRank Exists? (48.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."who" = $1 AND "ranks"."what" = $2 LIMIT $3[0m  [["who", "gari"], ["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/ranks_controller.rb:4:in `create'
  [1m[36mRank Create (24.3ms)[0m  [1m[32mINSERT INTO "ranks" ("who", "what", "valoracion", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5)[0m  [["who", "gari"], ["what", 7], ["valoracion", 2], ["created_at", "2023-11-22 20:17:26.763784"], ["updated_at", "2023-11-22 20:17:26.763784"]]
  â†³ app/controllers/ranks_controller.rb:4:in `create'
  [1m[36mTRANSACTION (24.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/ranks_controller.rb:4:in `create'
Redirected to http://localhost:3000/restaurants/7
Completed 302 Found in 101ms (ActiveRecord: 121.6ms | Allocations: 2691)


Started GET "/restaurants/7" for 127.0.0.1 at 2023-11-22 21:17:26 +0100
Processing by RestaurantsController#show as TURBO_STREAM
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Exists? (24.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[36mRank Load (24.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 7]]
  â†³ app/controllers/restaurants_controller.rb:35:in `show'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (23.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (23.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 50.3ms | Allocations: 2314)
  [1m[36mDish Load (23.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (23.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (23.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (23.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 26.7ms | Allocations: 500)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 537)
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 301.1ms | Allocations: 8177)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.3ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 357.8ms | Allocations: 17225)
Completed 200 OK in 711ms (Views: 18.9ms | ActiveRecord: 659.3ms | Allocations: 22795)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:17:29 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (46.0ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `index'
  [1m[36mRank Load (24.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:21:in `map'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:23
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:45
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:52
  Rendered restaurants/index.html.erb within layouts/application (Duration: 81.6ms | Allocations: 13146)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1117)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 56.2ms | Allocations: 4209)
  Rendered layout layouts/application.html.erb (Duration: 143.7ms | Allocations: 22451)
Completed 200 OK in 396ms (Views: 20.9ms | ActiveRecord: 343.3ms | Allocations: 26293)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:18:14 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `index'
  [1m[36mRank Load (24.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:21:in `map'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:23
  [1m[36mCategory Load (24.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:45
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:52
  Rendered restaurants/index.html.erb within layouts/application (Duration: 83.0ms | Allocations: 13144)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1116)
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.8ms | Allocations: 4209)
  Rendered layout layouts/application.html.erb (Duration: 150.8ms | Allocations: 29299)
Completed 200 OK in 383ms (Views: 28.0ms | ActiveRecord: 322.4ms | Allocations: 33139)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:21:00 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (25.1ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `index'
  [1m[36mRank Load (25.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:21:in `map'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:23
  [1m[36mCategory Load (24.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:45
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:52
  Rendered restaurants/index.html.erb within layouts/application (Duration: 86.4ms | Allocations: 13122)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1102)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 56.3ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 158.5ms | Allocations: 29187)
Completed 200 OK in 395ms (Views: 35.7ms | ActiveRecord: 323.3ms | Allocations: 33047)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:22:22 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (25.0ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `index'
  [1m[36mRank Load (25.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:21:in `map'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:23
  [1m[36mCategory Load (24.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:45
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:52
  Rendered restaurants/index.html.erb within layouts/application (Duration: 84.0ms | Allocations: 13166)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1116)
  [1m[36mUser Load (24.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.0ms | Allocations: 4210)
  Rendered layout layouts/application.html.erb (Duration: 150.6ms | Allocations: 29343)
Completed 200 OK in 385ms (Views: 29.6ms | ActiveRecord: 321.2ms | Allocations: 33182)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:23:27 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (25.0ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `index'
  [1m[36mRank Load (25.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:21:in `map'
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:23
  [1m[36mCategory Load (24.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:45
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:52
  Rendered restaurants/index.html.erb within layouts/application (Duration: 81.9ms | Allocations: 13166)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1102)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 83.8ms | Allocations: 4175)
  Rendered layout layouts/application.html.erb (Duration: 178.5ms | Allocations: 29227)
Completed 200 OK in 408ms (Views: 58.3ms | ActiveRecord: 318.9ms | Allocations: 33066)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:25:46 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (25.0ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `index'
  [1m[36mRank Load (25.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:21:in `map'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:23
  [1m[36mCategory Load (24.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:45
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:52
  Rendered restaurants/index.html.erb within layouts/application (Duration: 84.3ms | Allocations: 13152)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1108)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.1ms | Allocations: 4185)
  Rendered layout layouts/application.html.erb (Duration: 151.9ms | Allocations: 29285)
Completed 200 OK in 385ms (Views: 29.4ms | ActiveRecord: 322.3ms | Allocations: 33145)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:25:55 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (25.1ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `index'
  [1m[36mRank Load (24.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:21:in `map'
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:23
  [1m[36mCategory Load (24.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:45
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:52
  Rendered restaurants/index.html.erb within layouts/application (Duration: 84.4ms | Allocations: 13136)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1102)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.4ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 152.7ms | Allocations: 29199)
Completed 200 OK in 388ms (Views: 30.5ms | ActiveRecord: 322.4ms | Allocations: 33039)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-22 21:26:23 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"gari"}
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (24.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-22 20:26:23.810563')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-22 20:26:23.836455')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-22 20:26:23.861733')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 2.9ms | Allocations: 2333)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1105)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 31.0ms | Allocations: 4068)
  Rendered layout layouts/application.html.erb (Duration: 38.6ms | Allocations: 11257)
Completed 200 OK in 271ms (Views: 14.2ms | ActiveRecord: 221.8ms | Allocations: 15764)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 21:26:24 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (50.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 20:26:24.452396')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 20:26:24.504438')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 20:26:24.529558')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (26.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:21
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 53.0ms | Allocations: 1587)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1127)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 56.4ms | Allocations: 4202)
  Rendered layout layouts/application.html.erb (Duration: 113.2ms | Allocations: 11055)
Completed 200 OK in 244ms (Views: 13.7ms | ActiveRecord: 226.7ms | Allocations: 13141)


Started GET "/admin/promote?restaurant_id=7" for 127.0.0.1 at 2023-11-22 21:26:25 +0100
Processing by AdminController#promote as HTML
  Parameters: {"restaurant_id"=>"7"}
Redirected to http://localhost:3000/admin
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 359)


Started GET "/admin" for 127.0.0.1 at 2023-11-22 21:26:25 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (51.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-22 20:26:25.984310')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-22 20:26:26.036872')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-22 20:26:26.063853')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (25.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/admin/dashboard.html.erb:9
  [1m[36mUser Load (26.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ app/views/admin/dashboard.html.erb:21
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 53.4ms | Allocations: 1587)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1133)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.7ms | Allocations: 4181)
  Rendered layout layouts/application.html.erb (Duration: 112.0ms | Allocations: 11127)
Completed 200 OK in 246ms (Views: 12.4ms | ActiveRecord: 229.5ms | Allocations: 13207)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:26:27 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `index'
  [1m[36mRank Load (24.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:21:in `map'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (23.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (23.8ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:23
  [1m[36mCategory Load (24.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:45
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:52
  Rendered restaurants/index.html.erb within layouts/application (Duration: 80.1ms | Allocations: 12162)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1106)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.8ms | Allocations: 4200)
  Rendered layout layouts/application.html.erb (Duration: 138.3ms | Allocations: 21496)
Completed 200 OK in 367ms (Views: 17.2ms | ActiveRecord: 316.3ms | Allocations: 25338)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:26:53 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (25.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `index'
  [1m[36mRank Load (25.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:21:in `map'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:23
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:45
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:52
  Rendered restaurants/index.html.erb within layouts/application (Duration: 84.2ms | Allocations: 12123)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1102)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.7ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 150.7ms | Allocations: 28206)
Completed 200 OK in 384ms (Views: 29.2ms | ActiveRecord: 320.6ms | Allocations: 32065)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:26:59 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (25.1ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `index'
  [1m[36mRank Load (25.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:21:in `map'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:23
  [1m[36mCategory Load (24.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:45
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:52
  Rendered restaurants/index.html.erb within layouts/application (Duration: 83.8ms | Allocations: 12123)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1109)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.7ms | Allocations: 4210)
  Rendered layout layouts/application.html.erb (Duration: 144.0ms | Allocations: 21441)
Completed 200 OK in 376ms (Views: 20.7ms | ActiveRecord: 323.6ms | Allocations: 25284)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:27:16 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (25.6ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `index'
  [1m[36mRank Load (25.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:21:in `map'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:23
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:45
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:52
  Rendered restaurants/index.html.erb within layouts/application (Duration: 84.3ms | Allocations: 12142)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1112)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.3ms | Allocations: 4210)
  Rendered layout layouts/application.html.erb (Duration: 153.6ms | Allocations: 28322)
Completed 200 OK in 387ms (Views: 31.9ms | ActiveRecord: 322.0ms | Allocations: 32181)


Started GET "/restaurants/7" for 127.0.0.1 at 2023-11-22 21:27:40 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:25:in `show'
  [1m[36mRank Exists? (24.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:32:in `show'
  [1m[36mRank Load (25.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 7]]
  â†³ app/controllers/restaurants_controller.rb:35:in `show'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=7 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 7], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=7 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=7 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 51.7ms | Allocations: 2319)
  [1m[36mDish Load (24.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 7]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='gari' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 7], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 24.8ms | Allocations: 500)
  Rendered layouts/_add_comment.html.erb (Duration: 0.8ms | Allocations: 544)
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=7 AND posts.autor=users.nombre AND posts.restaurant_id=7[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 305.6ms | Allocations: 8194)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1101)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.8ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 363.0ms | Allocations: 17242)
Completed 200 OK in 721ms (Views: 19.7ms | ActiveRecord: 666.3ms | Allocations: 22831)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:28:34 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.6ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `index'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:21:in `map'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:49
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:56
  Rendered restaurants/index.html.erb within layouts/application (Duration: 108.4ms | Allocations: 14691)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1371)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 113.0ms | Allocations: 13084)
  Rendered layout layouts/application.html.erb (Duration: 232.7ms | Allocations: 48516)
Completed 200 OK in 609ms (Views: 36.9ms | ActiveRecord: 523.6ms | Allocations: 65770)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-22 21:28:59 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"gari"}
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (25.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (24.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-22 20:28:59.365379')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-22 20:28:59.390545')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-22 20:28:59.415567')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 3.2ms | Allocations: 3194)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1112)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.9ms | Allocations: 4107)
  Rendered layout layouts/application.html.erb (Duration: 35.5ms | Allocations: 12200)
Completed 200 OK in 358ms (Views: 10.9ms | ActiveRecord: 300.6ms | Allocations: 23471)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:31:11 +0100
  [1m[36mActiveRecord::SchemaMigration Load (24.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.8ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `index'
  [1m[36mRank Load (24.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:21:in `map'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (23.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  Rendered restaurants/index.html.erb within layouts/application (Duration: 1.7ms | Allocations: 2240)
  Rendered layout layouts/application.html.erb (Duration: 2.0ms | Allocations: 2377)
Completed 500 Internal Server Error in 986ms (ActiveRecord: 580.0ms | Allocations: 48765)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <div class="explore_container">
    <div class="explore_best_valued">
        <div class="explore_top_section_title">Mejor valorados</div>
        <div class="explore_top_section_best_valued_list">
          <% @tops.each_with_index do |restaurant, pos| %>
            <%= link_to restaurant_path(restaurant), class: "explore_top_section_best_valued_list_item", style: "text-decoration: none" do %>
                <%= pos + 1 %> - <%= restaurant.nombre %> 
            <% end %>
          <% end %>
        </div>
    </div>
    <div class="explore_promoted_restaurant">
        <div class="explore_top_section_title">Restaurante promocionado</div>
        <div class="explore_promoted_restaurant_box">
            <% if @promoted_restaurant.ruta_img_fondo %>
                <%= image_tag @promoted_restaurant.ruta_img_fondo, class: "explore_promoted_restaurant_image" %>
            <% else %>
                <%= image_tag "Default-restaurant-img", class: "explore_promoted_restaurant_image" %>
            <% end %>
            <div class="explore_promoted_restaurant_info">
                <div>
                    <div class="explore_promoted_restaurant_name">
                        <%= @promoted_restaurant.nombre %><br>
                        <span class="title_key_word"><%= @promoted_restaurant.categoria %></span>
                    </div>
                    <div class="explore_promoted_restaurant_stars">
                        <% if @ratings && !@ratings.select {|r| r.what == @promoted_restaurant.id}.empty? %>
                            <% @ratings.select {|r| r.what == @promoted_restaurant.id}[0][:rest_val].floor.times do %> 
                            <%= image_tag "Star", style: "width: 25px; height: 25px" %>
                        <% end %>
                        <% end %>
                    </div>
                </div>
                <div>
                    <%= link_to url('google.com') class: "restaurants_einaeats_button" do %>
                        <%= image_tag "Bolsa-einaeats" %>
                        <span class="restaurant_einaeats_button_text">Pedir en EinaEats</span>
                    <% end %>
                </div>
            </div>
        </div>
    </div>
    <div class="explore_lower_section">
        <div class="explore_restaurants_filters">
            <div class="explore_restaurants_filters_title">Filtrar por categorÃ­a</div>
            <%= link_to restaurants_path, class: "explore_restaurants_filters_item" do %>
              <div>Todos los restaurantes</div>
            <% end %>
            <% @categories.each do |category| %>
                <%= link_to restaurants_path(filter: category.nombre), class: "explore_restaurants_filters_item" do %>
                    <div><%= category.nombre %></div>
                <% end %>
            <% end %>
        </div>
        <div class="explore_restaurants_section">
            <% @restaurants.each do |restaurant| %>
                <%= link_to restaurant_path(restaurant), style: "text-decoration: none;" do %>
                    <div class="explore_restaurants_box">
                        <% if restaurant.ruta_img_fondo %>
                            <%= image_tag restaurant.ruta_img_fondo, class: "explore_restaurants_box_image" %>
                        <% else %>
                            <%= image_tag "Default-restaurant-img", class: "explore_restaurants_box_image" %>
                        <% end %>
                        <div style="display: flex;flex-direction: column;justify-content: center;align-items: center;height: 100%;gap: 5px;">
                            <div class="explore_restaurant_box_name"><%= restaurant.nombre %></div>
                            <div class="explore_restaurant_box_category"><%= restaurant.categoria %></div>
                            <div>
                                <% if @ratings && !@ratings.select {|r| r.what == restaurant.id}.empty? %>
                                    <% @ratings.select {|r| r.what == restaurant.id}[0][:rest_val].floor.times do %> 
                                    <%= image_tag "Star", style: "width: 25px; height: 25px" %>
                                <% end %>
                                <% end %>
                            </div>
                        </div>
                    </div>
                <% end %>
            <% end %>
        </div>
    </div>
</div>

):
1:    <div class="explore_container">
2:        <div class="explore_best_valued">
3:            <div class="explore_top_section_title">Mejor valorados</div>
4:            <div class="explore_top_section_best_valued_list">
5:              <% @tops.each_with_index do |restaurant, pos| %>
6:                <%= link_to restaurant_path(restaurant), class: "explore_top_section_best_valued_list_item", style: "text-decoration: none" do %>
7:                    <%= pos + 1 %> - <%= restaurant.nombre %> 
8:                <% end %>
9:              <% end %>
10:            </div>
11:        </div>
12:        <div class="explore_promoted_restaurant">
13:            <div class="explore_top_section_title">Restaurante promocionado</div>
14:            <div class="explore_promoted_restaurant_box">
15:                <% if @promoted_restaurant.ruta_img_fondo %>
16:                    <%= image_tag @promoted_restaurant.ruta_img_fondo, class: "explore_promoted_restaurant_image" %>
17:                <% else %>
18:                    <%= image_tag "Default-restaurant-img", class: "explore_promoted_restaurant_image" %>
19:                <% end %>
20:                <div class="explore_promoted_restaurant_info">
21:                    <div>
22:                        <div class="explore_promoted_restaurant_name">
23:                            <%= @promoted_restaurant.nombre %><br>
24:                            <span class="title_key_word"><%= @promoted_restaurant.categoria %></span>
25:                        </div>
26:                        <div class="explore_promoted_restaurant_stars">
27:                            <% if @ratings && !@ratings.select {|r| r.what == @promoted_restaurant.id}.empty? %>
28:                                <% @ratings.select {|r| r.what == @promoted_restaurant.id}[0][:rest_val].floor.times do %> 
29:                                <%= image_tag "Star", style: "width: 25px; height: 25px" %>
30:                            <% end %>
31:                            <% end %>
32:                        </div>
33:                    </div>
34:                    <div>
35:                        <%= link_to url('google.com') class: "restaurants_einaeats_button" do %>
36:                            <%= image_tag "Bolsa-einaeats" %>
37:                            <span class="restaurant_einaeats_button_text">Pedir en EinaEats</span>
38:                        <% end %>
39:                    </div>
40:                </div>
41:            </div>
42:        </div>
43:        <div class="explore_lower_section">
44:            <div class="explore_restaurants_filters">
45:                <div class="explore_restaurants_filters_title">Filtrar por categorÃ­a</div>
46:                <%= link_to restaurants_path, class: "explore_restaurants_filters_item" do %>
47:                  <div>Todos los restaurantes</div>
48:                <% end %>
49:                <% @categories.each do |category| %>
50:                    <%= link_to restaurants_path(filter: category.nombre), class: "explore_restaurants_filters_item" do %>
51:                        <div><%= category.nombre %></div>
52:                    <% end %>
53:                <% end %>
54:            </div>
55:            <div class="explore_restaurants_section">
56:                <% @restaurants.each do |restaurant| %>
57:                    <%= link_to restaurant_path(restaurant), style: "text-decoration: none;" do %>
58:                        <div class="explore_restaurants_box">
59:                            <% if restaurant.ruta_img_fondo %>
60:                                <%= image_tag restaurant.ruta_img_fondo, class: "explore_restaurants_box_image" %>
61:                            <% else %>
62:                                <%= image_tag "Default-restaurant-img", class: "explore_restaurants_box_image" %>
63:                            <% end %>
64:                            <div style="display: flex;flex-direction: column;justify-content: center;align-items: center;height: 100%;gap: 5px;">
65:                                <div class="explore_restaurant_box_name"><%= restaurant.nombre %></div>
66:                                <div class="explore_restaurant_box_category"><%= restaurant.categoria %></div>
67:                                <div>
68:                                    <% if @ratings && !@ratings.select {|r| r.what == restaurant.id}.empty? %>
69:                                        <% @ratings.select {|r| r.what == restaurant.id}[0][:rest_val].floor.times do %> 
70:                                        <%= image_tag "Star", style: "width: 25px; height: 25px" %>
71:                                    <% end %>
72:                                    <% end %>
73:                                </div>
74:                            </div>
75:                        </div>
76:                    <% end %>
77:                <% end %>
78:            </div>
79:        </div>
80:    </div>
  
app/views/restaurants/index.html.erb:35: syntax error, unexpected label, expecting `end' or dummy end
app/views/restaurants/index.html.erb:83: syntax error, unexpected `end'
Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:31:49 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.2ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `index'
  [1m[36mRank Load (24.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:21:in `map'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  Rendered restaurants/index.html.erb within layouts/application (Duration: 189.6ms | Allocations: 128114)
  Rendered layout layouts/application.html.erb (Duration: 189.8ms | Allocations: 128206)
Completed 500 Internal Server Error in 550ms (ActiveRecord: 331.6ms | Allocations: 145330)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `url' for #<ActionView::Base:0x00000000016238>):
    32:                     </div>
    33:                 </div>
    34:                 <div>
    35:                     <%= link_to url('google.com'), class: "restaurants_einaeats_button" do %>
    36:                         <%= image_tag "Bolsa-einaeats" %>
    37:                         <span class="restaurant_einaeats_button_text">Pedir en EinaEats</span>
    38:                     <% end %>
  
app/views/restaurants/index.html.erb:35
Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:32:16 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (26.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.5ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `index'
  [1m[36mRank Load (24.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:21:in `map'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (25.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:49
  [1m[36mRestaurant Load (23.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:56
  Rendered restaurants/index.html.erb within layouts/application (Duration: 112.7ms | Allocations: 15763)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1400)
  [1m[36mUser Load (23.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 162.5ms | Allocations: 17315)
  Rendered layout layouts/application.html.erb (Duration: 286.3ms | Allocations: 54054)
Completed 200 OK in 656ms (Views: 93.0ms | ActiveRecord: 499.2ms | Allocations: 71291)


Started GET "/google.com" for 127.0.0.1 at 2023-11-22 21:32:18 +0100
Processing by ErrorsController#not_found as */*
  Parameters: {"unmatched"=>"google"}
  Rendering layout layouts/application.html.erb
  Rendering errors/not_found.html.erb within layouts/application
  Rendered errors/not_found.html.erb within layouts/application (Duration: 0.3ms | Allocations: 92)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1146)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 79.0ms | Allocations: 4177)
  Rendered layout layouts/application.html.erb (Duration: 83.8ms | Allocations: 9583)
Completed 404 Not Found in 85ms (Views: 35.2ms | ActiveRecord: 49.3ms | Allocations: 10127)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:32:27 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.6ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `index'
  [1m[36mRank Load (24.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:21:in `map'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:49
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:56
  Rendered restaurants/index.html.erb within layouts/application (Duration: 109.3ms | Allocations: 14740)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1373)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 113.6ms | Allocations: 13083)
  Rendered layout layouts/application.html.erb (Duration: 236.3ms | Allocations: 48600)
Completed 200 OK in 594ms (Views: 40.4ms | ActiveRecord: 500.1ms | Allocations: 65702)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:32:44 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (25.1ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `index'
  [1m[36mRank Load (25.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:21:in `map'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:49
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:56
  Rendered restaurants/index.html.erb within layouts/application (Duration: 86.9ms | Allocations: 12153)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1114)
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 55.4ms | Allocations: 4204)
  Rendered layout layouts/application.html.erb (Duration: 157.2ms | Allocations: 28628)
Completed 200 OK in 363ms (Views: 33.8ms | ActiveRecord: 298.4ms | Allocations: 32370)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:32:53 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (25.1ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `index'
  [1m[36mRank Load (25.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:21:in `map'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:49
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:56
  Rendered restaurants/index.html.erb within layouts/application (Duration: 83.5ms | Allocations: 12158)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1114)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.7ms | Allocations: 4192)
  Rendered layout layouts/application.html.erb (Duration: 143.2ms | Allocations: 21858)
Completed 200 OK in 352ms (Views: 21.0ms | ActiveRecord: 297.6ms | Allocations: 25578)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:33:56 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (25.0ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `index'
  [1m[36mRank Load (25.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:21:in `map'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:21:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:49
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:56
  Rendered restaurants/index.html.erb within layouts/application (Duration: 83.2ms | Allocations: 12139)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1102)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.8ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 150.2ms | Allocations: 28217)
Completed 200 OK in 357ms (Views: 27.0ms | ActiveRecord: 297.7ms | Allocations: 31937)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:37:33 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (25.0ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:16:in `index'
  [1m[36mRank Load (24.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:22:in `map'
  [1m[36mRestaurant Load (24.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (23.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (23.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (23.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (23.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:56
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 107.0ms | Allocations: 15028)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1375)
  [1m[36mUser Load (23.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 112.5ms | Allocations: 13119)
  Rendered layout layouts/application.html.erb (Duration: 233.4ms | Allocations: 48733)
Completed 200 OK in 581ms (Views: 40.3ms | ActiveRecord: 492.9ms | Allocations: 65864)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:40:23 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (25.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:16:in `index'
  [1m[36mRank Load (25.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:22:in `map'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:56
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 82.2ms | Allocations: 12359)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1102)
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.9ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 140.5ms | Allocations: 21414)
Completed 200 OK in 347ms (Views: 18.3ms | ActiveRecord: 296.8ms | Allocations: 25140)


Started GET "/restaurants?filter=burger" for 127.0.0.1 at 2023-11-22 21:40:25 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"filter"=>"burger"}
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:16:in `index'
  [1m[36mRank Load (24.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:22:in `map'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:56
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."categoria" = $1[0m  [["categoria", "burger"]]
  â†³ app/views/restaurants/index.html.erb:63
  Rendered restaurants/index.html.erb within layouts/application (Duration: 103.6ms | Allocations: 6766)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1102)
  [1m[36mUser Load (24.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.4ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 159.7ms | Allocations: 15815)
Completed 200 OK in 364ms (Views: 37.8ms | ActiveRecord: 294.9ms | Allocations: 19759)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:41:31 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.6ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:16:in `index'
  [1m[36mRank Load (24.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:22:in `map'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  Rendered restaurants/index.html.erb within layouts/application (Duration: 0.8ms | Allocations: 1899)
  Rendered layout layouts/application.html.erb (Duration: 1.0ms | Allocations: 1999)
Completed 500 Internal Server Error in 401ms (ActiveRecord: 302.6ms | Allocations: 19121)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <div class="explore_container">
    <div class="explore_best_valued">
        <div class="explore_top_section_title">Mejor valorados</div>
        <div class="explore_top_section_best_valued_list">
          <% @tops.each_with_index do |restaurant, pos| %>
            <%= link_to restaurant_path(restaurant), class: "explore_top_section_best_valued_list_item", style: "text-decoration: none" do %>
                <%= pos + 1 %> - <%= restaurant.nombre %> 
            <% end %>
          <% end %>
        </div>
    </div>
    <div class="explore_promoted_restaurant">
        <div class="explore_top_section_title">Restaurante promocionado</div>
        <div class="explore_promoted_restaurant_box">
            <% if @promoted_restaurant.ruta_img_fondo %>
                <%= image_tag @promoted_restaurant.ruta_img_fondo, class: "explore_promoted_restaurant_image" %>
            <% else %>
                <%= image_tag "Default-restaurant-img", class: "explore_promoted_restaurant_image" %>
            <% end %>
            <div class="explore_promoted_restaurant_info">
                <div>
                    <div class="explore_promoted_restaurant_name">
                        <%= @promoted_restaurant.nombre %><br>
                        <span class="title_key_word"><%= @promoted_restaurant.categoria %></span>
                    </div>
                    <div class="explore_promoted_restaurant_stars">
                        <% if @ratings && !@ratings.select {|r| r.what == @promoted_restaurant.id}.empty? %>
                            <% @ratings.select {|r| r.what == @promoted_restaurant.id}[0][:rest_val].floor.times do %> 
                            <%= image_tag "Star", style: "width: 25px; height: 25px" %>
                        <% end %>
                        <% end %>
                    </div>
                </div>
                <div>
                    <%= link_to 'https://google.com', class: "restaurants_einaeats_button" do %>
                        <%= image_tag "Bolsa-einaeats" %>
                        <span class="restaurant_einaeats_button_text">Pedir en EinaEats</span>
                    <% end %>
                </div>
            </div>
        </div>
    </div>
    <div class="explore_lower_section">
        <div class="explore_restaurants_filters">
            <div class="explore_restaurants_filters_title">Filtrar por categorÃ­a</div>
            
            <% if !session[:filter].present? %>
              <%= link_to restaurants_path, class: "explore_restaurants_filters_item", style: "background-color: var(--light-black); color: var(--strong-gold);" do %>
                <div>Todos los restaurantes</div>
              <% end %>
            <% else %>
              <%= link_to restaurants_path, class: "explore_restaurants_filters_item" do %>
                <div>Todos los restaurantes</div>
              <% end %>
            <% end %>
            <% @categories.each do |category| %>
              <% if session[:filter].present and session[:filter] == category.nombre %>
                <%= link_to restaurants_path(filter: category.nombre), class: "explore_restaurants_filters_item", style: "background-color: var(--light-black); color: var(--strong-gold);" do %>
                    <div><%= category.nombre %></div>
                <% end %>
              <% else %>
                <%= link_to restaurants_path(filter: category.nombre), class: "explore_restaurants_filters_item" do %>
                    <div><%= category.nombre %></div>
                <% end %>
            <% end %>
        </div>
        <div class="explore_restaurants_section">
            <% @restaurants.each do |restaurant| %>
                <%= link_to restaurant_path(restaurant), style: "text-decoration: none;" do %>
                    <div class="explore_restaurants_box">
                        <% if restaurant.ruta_img_fondo %>
                            <%= image_tag restaurant.ruta_img_fondo, class: "explore_restaurants_box_image" %>
                        <% else %>
                            <%= image_tag "Default-restaurant-img", class: "explore_restaurants_box_image" %>
                        <% end %>
                        <div style="display: flex;flex-direction: column;justify-content: center;align-items: center;height: 100%;gap: 5px;">
                            <div class="explore_restaurant_box_name"><%= restaurant.nombre %></div>
                            <div class="explore_restaurant_box_category"><%= restaurant.categoria %></div>
                            <div>
                                <% if @ratings && !@ratings.select {|r| r.what == restaurant.id}.empty? %>
                                    <% @ratings.select {|r| r.what == restaurant.id}[0][:rest_val].floor.times do %> 
                                    <%= image_tag "Star", style: "width: 25px; height: 25px" %>
                                <% end %>
                                <% end %>
                            </div>
                        </div>
                    </div>
                <% end %>
            <% end %>
        </div>
    </div>
</div>

):
1:    <div class="explore_container">
2:        <div class="explore_best_valued">
3:            <div class="explore_top_section_title">Mejor valorados</div>
4:            <div class="explore_top_section_best_valued_list">
5:              <% @tops.each_with_index do |restaurant, pos| %>
6:                <%= link_to restaurant_path(restaurant), class: "explore_top_section_best_valued_list_item", style: "text-decoration: none" do %>
7:                    <%= pos + 1 %> - <%= restaurant.nombre %> 
8:                <% end %>
9:              <% end %>
10:            </div>
11:        </div>
12:        <div class="explore_promoted_restaurant">
13:            <div class="explore_top_section_title">Restaurante promocionado</div>
14:            <div class="explore_promoted_restaurant_box">
15:                <% if @promoted_restaurant.ruta_img_fondo %>
16:                    <%= image_tag @promoted_restaurant.ruta_img_fondo, class: "explore_promoted_restaurant_image" %>
17:                <% else %>
18:                    <%= image_tag "Default-restaurant-img", class: "explore_promoted_restaurant_image" %>
19:                <% end %>
20:                <div class="explore_promoted_restaurant_info">
21:                    <div>
22:                        <div class="explore_promoted_restaurant_name">
23:                            <%= @promoted_restaurant.nombre %><br>
24:                            <span class="title_key_word"><%= @promoted_restaurant.categoria %></span>
25:                        </div>
26:                        <div class="explore_promoted_restaurant_stars">
27:                            <% if @ratings && !@ratings.select {|r| r.what == @promoted_restaurant.id}.empty? %>
28:                                <% @ratings.select {|r| r.what == @promoted_restaurant.id}[0][:rest_val].floor.times do %> 
29:                                <%= image_tag "Star", style: "width: 25px; height: 25px" %>
30:                            <% end %>
31:                            <% end %>
32:                        </div>
33:                    </div>
34:                    <div>
35:                        <%= link_to 'https://google.com', class: "restaurants_einaeats_button" do %>
36:                            <%= image_tag "Bolsa-einaeats" %>
37:                            <span class="restaurant_einaeats_button_text">Pedir en EinaEats</span>
38:                        <% end %>
39:                    </div>
40:                </div>
41:            </div>
42:        </div>
43:        <div class="explore_lower_section">
44:            <div class="explore_restaurants_filters">
45:                <div class="explore_restaurants_filters_title">Filtrar por categorÃ­a</div>
46:                
47:                <% if !session[:filter].present? %>
48:                  <%= link_to restaurants_path, class: "explore_restaurants_filters_item", style: "background-color: var(--light-black); color: var(--strong-gold);" do %>
49:                    <div>Todos los restaurantes</div>
50:                  <% end %>
51:                <% else %>
52:                  <%= link_to restaurants_path, class: "explore_restaurants_filters_item" do %>
53:                    <div>Todos los restaurantes</div>
54:                  <% end %>
55:                <% end %>
56:                <% @categories.each do |category| %>
57:                  <% if session[:filter].present and session[:filter] == category.nombre %>
58:                    <%= link_to restaurants_path(filter: category.nombre), class: "explore_restaurants_filters_item", style: "background-color: var(--light-black); color: var(--strong-gold);" do %>
59:                        <div><%= category.nombre %></div>
60:                    <% end %>
61:                  <% else %>
62:                    <%= link_to restaurants_path(filter: category.nombre), class: "explore_restaurants_filters_item" do %>
63:                        <div><%= category.nombre %></div>
64:                    <% end %>
65:                <% end %>
66:            </div>
67:            <div class="explore_restaurants_section">
68:                <% @restaurants.each do |restaurant| %>
69:                    <%= link_to restaurant_path(restaurant), style: "text-decoration: none;" do %>
70:                        <div class="explore_restaurants_box">
71:                            <% if restaurant.ruta_img_fondo %>
72:                                <%= image_tag restaurant.ruta_img_fondo, class: "explore_restaurants_box_image" %>
73:                            <% else %>
74:                                <%= image_tag "Default-restaurant-img", class: "explore_restaurants_box_image" %>
75:                            <% end %>
76:                            <div style="display: flex;flex-direction: column;justify-content: center;align-items: center;height: 100%;gap: 5px;">
77:                                <div class="explore_restaurant_box_name"><%= restaurant.nombre %></div>
78:                                <div class="explore_restaurant_box_category"><%= restaurant.categoria %></div>
79:                                <div>
80:                                    <% if @ratings && !@ratings.select {|r| r.what == restaurant.id}.empty? %>
81:                                        <% @ratings.select {|r| r.what == restaurant.id}[0][:rest_val].floor.times do %> 
82:                                        <%= image_tag "Star", style: "width: 25px; height: 25px" %>
83:                                    <% end %>
84:                                    <% end %>
85:                                </div>
86:                            </div>
87:                        </div>
88:                    <% end %>
89:                <% end %>
90:            </div>
91:        </div>
92:    </div>
  
app/views/restaurants/index.html.erb:95: syntax error, unexpected end-of-input
Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:41:43 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.2ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:16:in `index'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:22:in `map'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:56
  Rendered restaurants/index.html.erb within layouts/application (Duration: 79.4ms | Allocations: 7392)
  Rendered layout layouts/application.html.erb (Duration: 79.5ms | Allocations: 7484)
Completed 500 Internal Server Error in 436ms (ActiveRecord: 374.9ms | Allocations: 24656)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `present' for "burger":String):
    54:               <% end %>
    55:             <% end %>
    56:             <% @categories.each do |category| %>
    57:               <% if session[:filter].present and session[:filter] == category.nombre %>
    58:                 <%= link_to restaurants_path(filter: category.nombre), class: "explore_restaurants_filters_item", style: "background-color: var(--light-black); color: var(--strong-gold);" do %>
    59:                     <div><%= category.nombre %></div>
    60:                 <% end %>
  
app/views/restaurants/index.html.erb:57
app/views/restaurants/index.html.erb:56
Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:41:50 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.5ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:16:in `index'
  [1m[36mRank Load (24.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:22:in `map'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:56
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:69
  Rendered restaurants/index.html.erb within layouts/application (Duration: 108.3ms | Allocations: 15177)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1373)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 112.3ms | Allocations: 13140)
  Rendered layout layouts/application.html.erb (Duration: 230.9ms | Allocations: 48883)
Completed 200 OK in 611ms (Views: 34.3ms | ActiveRecord: 501.1ms | Allocations: 66084)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:41:52 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.2ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:16:in `index'
  [1m[36mRank Load (24.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:22:in `map'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (23.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:56
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:69
  Rendered restaurants/index.html.erb within layouts/application (Duration: 80.5ms | Allocations: 12400)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1102)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.9ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 137.9ms | Allocations: 21449)
Completed 200 OK in 340ms (Views: 15.5ms | ActiveRecord: 294.1ms | Allocations: 25177)


Started GET "/restaurants?filter=chino" for 127.0.0.1 at 2023-11-22 21:41:54 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"filter"=>"chino"}
  [1m[36mRestaurant Load (23.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:16:in `index'
  [1m[36mRank Load (24.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:22:in `map'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:56
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."categoria" = $1[0m  [["categoria", "chino"]]
  â†³ app/views/restaurants/index.html.erb:69
  Rendered restaurants/index.html.erb within layouts/application (Duration: 78.7ms | Allocations: 5989)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1102)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.3ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 135.2ms | Allocations: 15038)
Completed 200 OK in 335ms (Views: 11.6ms | ActiveRecord: 294.6ms | Allocations: 19007)


Started GET "/restaurants?filter=Turca" for 127.0.0.1 at 2023-11-22 21:41:55 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"filter"=>"Turca"}
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.2ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:16:in `index'
  [1m[36mRank Load (24.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:22:in `map'
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (23.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:56
  [1m[36mRestaurant Load (24.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."categoria" = $1[0m  [["categoria", "Turca"]]
  â†³ app/views/restaurants/index.html.erb:69
  Rendered restaurants/index.html.erb within layouts/application (Duration: 77.9ms | Allocations: 6656)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1102)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.2ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 134.3ms | Allocations: 15705)
Completed 200 OK in 336ms (Views: 12.6ms | ActiveRecord: 292.6ms | Allocations: 19662)


Started GET "/restaurants?filter=Turca" for 127.0.0.1 at 2023-11-22 21:41:56 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"filter"=>"Turca"}
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.4ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:16:in `index'
  [1m[36mRank Load (24.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:22:in `map'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:56
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."categoria" = $1[0m  [["categoria", "Turca"]]
  â†³ app/views/restaurants/index.html.erb:69
  Rendered restaurants/index.html.erb within layouts/application (Duration: 78.8ms | Allocations: 6656)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1102)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.4ms | Allocations: 4194)
  Rendered layout layouts/application.html.erb (Duration: 135.7ms | Allocations: 15725)
Completed 200 OK in 340ms (Views: 13.3ms | ActiveRecord: 295.8ms | Allocations: 19712)


Started GET "/restaurants?filter=Gourmet" for 127.0.0.1 at 2023-11-22 21:41:56 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"filter"=>"Gourmet"}
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.5ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:16:in `index'
  [1m[36mRank Load (24.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:22:in `map'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:56
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."categoria" = $1[0m  [["categoria", "Gourmet"]]
  â†³ app/views/restaurants/index.html.erb:69
  Rendered restaurants/index.html.erb within layouts/application (Duration: 77.7ms | Allocations: 4333)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1102)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.4ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 134.5ms | Allocations: 13382)
Completed 200 OK in 336ms (Views: 11.6ms | ActiveRecord: 293.9ms | Allocations: 17336)


Started GET "/restaurants?filter=pizza" for 127.0.0.1 at 2023-11-22 21:41:57 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"filter"=>"pizza"}
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:16:in `index'
  [1m[36mRank Load (24.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:22:in `map'
  [1m[36mRestaurant Load (22.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:56
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."categoria" = $1[0m  [["categoria", "pizza"]]
  â†³ app/views/restaurants/index.html.erb:69
  Rendered restaurants/index.html.erb within layouts/application (Duration: 78.9ms | Allocations: 5822)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1114)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.3ms | Allocations: 4204)
  Rendered layout layouts/application.html.erb (Duration: 136.1ms | Allocations: 14967)
Completed 200 OK in 342ms (Views: 13.3ms | ActiveRecord: 295.0ms | Allocations: 18937)


Started GET "/restaurants?filter=Tapas" for 127.0.0.1 at 2023-11-22 21:41:58 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"filter"=>"Tapas"}
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.6ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:16:in `index'
  [1m[36mRank Load (24.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:22:in `map'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (23.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:56
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."categoria" = $1[0m  [["categoria", "Tapas"]]
  â†³ app/views/restaurants/index.html.erb:69
  Rendered restaurants/index.html.erb within layouts/application (Duration: 79.1ms | Allocations: 4335)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1114)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.8ms | Allocations: 4204)
  Rendered layout layouts/application.html.erb (Duration: 137.0ms | Allocations: 13479)
Completed 200 OK in 341ms (Views: 14.0ms | ActiveRecord: 294.7ms | Allocations: 17442)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:41:58 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.6ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:16:in `index'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:22:in `map'
  [1m[36mRestaurant Load (26.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:56
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:69
  Rendered restaurants/index.html.erb within layouts/application (Duration: 81.8ms | Allocations: 12392)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1102)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.6ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 139.1ms | Allocations: 21441)
Completed 200 OK in 343ms (Views: 16.4ms | ActiveRecord: 297.5ms | Allocations: 25167)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:42:00 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.0ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:16:in `index'
  [1m[36mRank Load (24.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:22:in `map'
  [1m[36mRestaurant Load (22.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (23.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (24.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:22:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:56
  [1m[36mRestaurant Load (23.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:69
  Rendered restaurants/index.html.erb within layouts/application (Duration: 80.5ms | Allocations: 12371)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1102)
  [1m[36mUser Load (23.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 51.9ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 136.1ms | Allocations: 21420)
Completed 200 OK in 334ms (Views: 16.1ms | ActiveRecord: 288.1ms | Allocations: 25142)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:42:32 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.8ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:56
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:69
  Rendered restaurants/index.html.erb within layouts/application (Duration: 109.6ms | Allocations: 14910)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1375)
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 117.1ms | Allocations: 13121)
  Rendered layout layouts/application.html.erb (Duration: 242.6ms | Allocations: 48587)
Completed 200 OK in 593ms (Views: 44.6ms | ActiveRecord: 501.8ms | Allocations: 65925)


Started GET "/restaurants?filter=burger" for 127.0.0.1 at 2023-11-22 21:42:33 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"filter"=>"burger"}
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.6ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (24.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:56
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."categoria" = $1[0m  [["categoria", "burger"]]
  â†³ app/views/restaurants/index.html.erb:69
  Rendered restaurants/index.html.erb within layouts/application (Duration: 79.1ms | Allocations: 6805)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1114)
  [1m[36mUser Load (24.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.4ms | Allocations: 4192)
  Rendered layout layouts/application.html.erb (Duration: 135.9ms | Allocations: 15937)
Completed 200 OK in 339ms (Views: 12.3ms | ActiveRecord: 296.2ms | Allocations: 19904)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:42:34 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.8ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (23.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:56
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:69
  Rendered restaurants/index.html.erb within layouts/application (Duration: 81.8ms | Allocations: 12167)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1102)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.3ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 140.1ms | Allocations: 21216)
Completed 200 OK in 344ms (Views: 17.5ms | ActiveRecord: 294.4ms | Allocations: 25144)


Started GET "/restaurants?filter=chino" for 127.0.0.1 at 2023-11-22 21:42:35 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"filter"=>"chino"}
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.5ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (24.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:56
  [1m[36mRestaurant Load (23.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."categoria" = $1[0m  [["categoria", "chino"]]
  â†³ app/views/restaurants/index.html.erb:69
  Rendered restaurants/index.html.erb within layouts/application (Duration: 79.1ms | Allocations: 5989)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1102)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.4ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 136.0ms | Allocations: 15038)
Completed 200 OK in 341ms (Views: 13.4ms | ActiveRecord: 294.7ms | Allocations: 19022)


Started GET "/restaurants?filter=Turca" for 127.0.0.1 at 2023-11-22 21:42:36 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"filter"=>"Turca"}
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.6ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (24.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:56
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."categoria" = $1[0m  [["categoria", "Turca"]]
  â†³ app/views/restaurants/index.html.erb:69
  Rendered restaurants/index.html.erb within layouts/application (Duration: 79.5ms | Allocations: 6656)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1102)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.8ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 136.1ms | Allocations: 15705)
Completed 200 OK in 339ms (Views: 13.4ms | ActiveRecord: 295.4ms | Allocations: 19683)


Started GET "/restaurants?filter=Gourmet" for 127.0.0.1 at 2023-11-22 21:42:36 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"filter"=>"Gourmet"}
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (25.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:56
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."categoria" = $1[0m  [["categoria", "Gourmet"]]
  â†³ app/views/restaurants/index.html.erb:69
  Rendered restaurants/index.html.erb within layouts/application (Duration: 78.6ms | Allocations: 4330)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1102)
  [1m[36mUser Load (24.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.1ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 134.1ms | Allocations: 13379)
Completed 200 OK in 340ms (Views: 12.0ms | ActiveRecord: 296.1ms | Allocations: 17330)


Started GET "/restaurants?filter=pizza" for 127.0.0.1 at 2023-11-22 21:42:37 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"filter"=>"pizza"}
  [1m[36mRestaurant Load (23.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.5ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (22.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:56
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."categoria" = $1[0m  [["categoria", "pizza"]]
  â†³ app/views/restaurants/index.html.erb:69
  Rendered restaurants/index.html.erb within layouts/application (Duration: 78.6ms | Allocations: 5813)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1102)
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.2ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 134.8ms | Allocations: 14862)
Completed 200 OK in 334ms (Views: 11.8ms | ActiveRecord: 293.0ms | Allocations: 18823)


Started GET "/restaurants?filter=Tapas" for 127.0.0.1 at 2023-11-22 21:42:38 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"filter"=>"Tapas"}
  [1m[36mRestaurant Load (23.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (24.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:56
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."categoria" = $1[0m  [["categoria", "Tapas"]]
  â†³ app/views/restaurants/index.html.erb:69
  Rendered restaurants/index.html.erb within layouts/application (Duration: 78.5ms | Allocations: 4337)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1114)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.8ms | Allocations: 4204)
  Rendered layout layouts/application.html.erb (Duration: 136.4ms | Allocations: 13481)
Completed 200 OK in 342ms (Views: 13.3ms | ActiveRecord: 294.7ms | Allocations: 17441)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:42:38 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.5ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (22.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:56
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:69
  Rendered restaurants/index.html.erb within layouts/application (Duration: 80.4ms | Allocations: 12188)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1114)
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.9ms | Allocations: 4192)
  Rendered layout layouts/application.html.erb (Duration: 136.6ms | Allocations: 21316)
Completed 200 OK in 339ms (Views: 14.6ms | ActiveRecord: 293.0ms | Allocations: 25260)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-22 21:42:47 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"gari"}
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (26.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (25.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (24.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-22 20:42:48.051163')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-22 20:42:48.076463')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-22 20:42:48.101756')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (24.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 5.6ms | Allocations: 3964)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1102)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 29.1ms | Allocations: 4072)
  Rendered layout layouts/application.html.erb (Duration: 38.2ms | Allocations: 12893)
Completed 200 OK in 359ms (Views: 13.8ms | ActiveRecord: 301.1ms | Allocations: 24568)


Started GET "/logout" for 127.0.0.1 at 2023-11-22 21:42:49 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 514)


Started GET "/" for 127.0.0.1 at 2023-11-22 21:42:49 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (24.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:56
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:69
  Rendered restaurants/index.html.erb within layouts/application (Duration: 81.4ms | Allocations: 12164)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1102)
  Rendered layouts/_sidenav.html.erb (Duration: 1.8ms | Allocations: 2692)
  Rendered layout layouts/application.html.erb (Duration: 86.6ms | Allocations: 19731)
Completed 200 OK in 292ms (Views: 13.6ms | ActiveRecord: 246.5ms | Allocations: 23644)


Started GET "/login" for 127.0.0.1 at 2023-11-22 21:42:51 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 2.4ms | Allocations: 3016)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1102)
  Rendered layouts/_sidenav.html.erb (Duration: 1.9ms | Allocations: 2690)
  Rendered layout layouts/application.html.erb (Duration: 7.3ms | Allocations: 10587)
Completed 200 OK in 8ms (Views: 7.7ms | ActiveRecord: 0.0ms | Allocations: 11055)


Started POST "/login" for 127.0.0.1 at 2023-11-22 21:42:55 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"Atreides", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 219ms (ActiveRecord: 25.1ms | Allocations: 941)


Started GET "/" for 127.0.0.1 at 2023-11-22 21:42:55 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.9ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (25.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:56
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:69
  Rendered restaurants/index.html.erb within layouts/application (Duration: 81.9ms | Allocations: 12164)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1102)
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.9ms | Allocations: 4730)
  Rendered layout layouts/application.html.erb (Duration: 139.9ms | Allocations: 21812)
Completed 200 OK in 347ms (Views: 16.6ms | ActiveRecord: 298.9ms | Allocations: 25818)


Started GET "/users/mis_restaurantes" for 127.0.0.1 at 2023-11-22 21:42:57 +0100
Processing by UsersController#mis_restaurantes as HTML
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:87:in `mis_restaurantes'
  Rendering layout layouts/application.html.erb
  Rendering users/mis_restaurantes.html.erb within layouts/application
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/views/users/mis_restaurantes.html.erb:8
  Rendered users/mis_restaurantes.html.erb within layouts/application (Duration: 27.0ms | Allocations: 1861)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1127)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 3.8ms | Allocations: 4489)
  Rendered layout layouts/application.html.erb (Duration: 34.2ms | Allocations: 11254)
Completed 200 OK in 87ms (Views: 10.1ms | ActiveRecord: 50.1ms | Allocations: 12276)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-22 21:42:58 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:27:in `show'
  [1m[36mRank Exists? (24.7ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:34:in `show'
  [1m[36mRank Load (24.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:37:in `show'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.8ms | Allocations: 2939)
  [1m[36mDish Load (25.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (26.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 892)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 453)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 454)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 109.3ms | Allocations: 8220)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 694)
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (22.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 24.7ms | Allocations: 2283)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 352.0ms | Allocations: 26235)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1113)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 29.0ms | Allocations: 4645)
  Rendered layout layouts/application.html.erb (Duration: 384.9ms | Allocations: 35819)
Completed 200 OK in 866ms (Views: 87.9ms | ActiveRecord: 675.2ms | Allocations: 53968)


Started GET "/categories" for 127.0.0.1 at 2023-11-22 21:43:18 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (25.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 80.6ms | Allocations: 4990)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1127)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 29.0ms | Allocations: 4608)
  Rendered layout layouts/application.html.erb (Duration: 113.1ms | Allocations: 14490)
Completed 200 OK in 114ms (Views: 38.8ms | ActiveRecord: 74.8ms | Allocations: 14984)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-22 21:43:20 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (25.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (27.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "pipi"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 643)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 452)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 454)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 452)
  Rendered layouts/_comment.html.erb (Duration: 57.6ms | Allocations: 6641)
  Rendered layouts/_add_comment.html.erb (Duration: 0.4ms | Allocations: 536)
  Rendered categories/show.html.erb within layouts/application (Duration: 85.1ms | Allocations: 7986)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1101)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 29.7ms | Allocations: 4608)
  Rendered layout layouts/application.html.erb (Duration: 118.1ms | Allocations: 17468)
Completed 200 OK in 352ms (Views: 18.4ms | ActiveRecord: 252.2ms | Allocations: 21020)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:43:25 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (23.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (25.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:56
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:69
  Rendered restaurants/index.html.erb within layouts/application (Duration: 82.9ms | Allocations: 12179)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1102)
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.0ms | Allocations: 4713)
  Rendered layout layouts/application.html.erb (Duration: 141.0ms | Allocations: 21767)
Completed 200 OK in 346ms (Views: 19.1ms | ActiveRecord: 295.3ms | Allocations: 25698)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-22 21:43:26 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:27:in `show'
  [1m[36mRank Exists? (24.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:34:in `show'
  [1m[36mRank Load (24.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:37:in `show'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 52.1ms | Allocations: 2600)
  [1m[36mDish Load (24.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (23.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (24.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 629)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 452)
  Rendered layouts/_comment.html.erb (Duration: 77.8ms | Allocations: 4514)
  Rendered layouts/_add_comment.html.erb (Duration: 0.4ms | Allocations: 537)
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 257.8ms | Allocations: 10263)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1113)
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.7ms | Allocations: 4749)
  Rendered layout layouts/application.html.erb (Duration: 320.6ms | Allocations: 19918)
Completed 200 OK in 678ms (Views: 24.0ms | ActiveRecord: 620.4ms | Allocations: 25601)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-22 21:44:38 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (26.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:27:in `show'
  [1m[36mRank Exists? (24.6ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:34:in `show'
  [1m[36mRank Load (24.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:37:in `show'
  [1m[35m (23.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (23.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (23.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (23.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (25.0ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (24.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered restaurants/_header.html.erb (Duration: 84.7ms | Allocations: 8722)
  [1m[36mDish Load (23.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mUser Load (23.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (24.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 894)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 453)
  Rendered layouts/_comment.html.erb (Duration: 82.0ms | Allocations: 7399)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 685)
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/show.html.erb within layouts/application (Duration: 374.0ms | Allocations: 26610)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1376)
  [1m[36mUser Load (24.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 79.9ms | Allocations: 8195)
  Rendered layout layouts/application.html.erb (Duration: 463.7ms | Allocations: 55339)
Completed 200 OK in 1068ms (Views: 48.1ms | ActiveRecord: 955.7ms | Allocations: 81666)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:44:56 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.8ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (25.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:56
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:69
  Rendered restaurants/index.html.erb within layouts/application (Duration: 110.9ms | Allocations: 14848)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1102)
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 60.9ms | Allocations: 4747)
  Rendered layout layouts/application.html.erb (Duration: 175.5ms | Allocations: 24470)
Completed 200 OK in 385ms (Views: 25.9ms | ActiveRecord: 324.4ms | Allocations: 30205)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-22 21:44:57 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:27:in `show'
  [1m[36mRank Exists? (24.2ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:34:in `show'
  [1m[36mRank Load (24.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:37:in `show'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 27.2ms | Allocations: 2241)
  [1m[36mDish Load (24.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 635)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 452)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 454)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 81.2ms | Allocations: 6367)
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 543)
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 26.9ms | Allocations: 2265)
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered layouts/_add_comment.html.erb (Duration: 0.2ms | Allocations: 364)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 263.8ms | Allocations: 14477)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1113)
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.5ms | Allocations: 4737)
  Rendered layout layouts/application.html.erb (Duration: 321.9ms | Allocations: 24124)
Completed 200 OK in 683ms (Views: 23.9ms | ActiveRecord: 622.9ms | Allocations: 32847)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-22 21:45:31 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:27:in `show'
  [1m[36mRank Exists? (24.5ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:34:in `show'
  [1m[36mRank Load (24.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:37:in `show'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (23.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 27.2ms | Allocations: 2976)
  [1m[36mDish Load (24.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 879)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 453)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 454)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 117.2ms | Allocations: 14620)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 683)
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 27.5ms | Allocations: 2265)
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered layouts/_add_comment.html.erb (Duration: 4.9ms | Allocations: 367)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 364.2ms | Allocations: 30532)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1372)
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 80.7ms | Allocations: 8194)
  Rendered layout layouts/application.html.erb (Duration: 457.5ms | Allocations: 59290)
Completed 200 OK in 1081ms (Views: 58.2ms | ActiveRecord: 956.5ms | Allocations: 88585)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-22 21:46:31 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:27:in `show'
  [1m[36mRank Exists? (24.4ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:34:in `show'
  [1m[36mRank Load (24.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:37:in `show'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.6ms | Allocations: 2980)
  [1m[36mDish Load (25.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 889)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 453)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 454)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 124.7ms | Allocations: 14654)
  Rendered layouts/_add_comment.html.erb (Duration: 0.8ms | Allocations: 689)
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 27.3ms | Allocations: 2265)
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 364)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 366.2ms | Allocations: 30568)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1372)
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 83.2ms | Allocations: 8195)
  Rendered layout layouts/application.html.erb (Duration: 463.6ms | Allocations: 59325)
Completed 200 OK in 1087ms (Views: 64.4ms | ActiveRecord: 958.4ms | Allocations: 88637)


Started GET "/posts/new?post_to=3&post_type=Restaurant" for 127.0.0.1 at 2023-11-22 21:46:36 +0100
Processing by PostsController#new as HTML
  Parameters: {"post_to"=>"3", "post_type"=>"Restaurant"}
  [1m[35m (50.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre FROM restaurants, users, restaurants_users as ru WHERE users.nombre='Atreides' AND users.nombre=ru.user_id AND ru.restaurant_id=restaurants.id [0m
  â†³ app/controllers/posts_controller.rb:7:in `new'
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 3.0ms | Allocations: 2717)
  Rendered posts/new.html.erb within layouts/application (Duration: 3.7ms | Allocations: 2987)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.2ms | Allocations: 4714)
  Rendered layout layouts/application.html.erb (Duration: 61.1ms | Allocations: 12581)
Completed 200 OK in 113ms (Views: 11.9ms | ActiveRecord: 99.9ms | Allocations: 13591)


Started GET "/posts/new?post_to=3&post_type=Restaurant" for 127.0.0.1 at 2023-11-22 21:48:32 +0100
Processing by PostsController#new as HTML
  Parameters: {"post_to"=>"3", "post_type"=>"Restaurant"}
  [1m[35m (24.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre FROM restaurants, users, restaurants_users as ru WHERE users.nombre='Atreides' AND users.nombre=ru.user_id AND ru.restaurant_id=restaurants.id [0m
  â†³ app/controllers/posts_controller.rb:7:in `new'
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 6.4ms | Allocations: 3962)
  Rendered posts/new.html.erb within layouts/application (Duration: 7.2ms | Allocations: 4243)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1369)
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 116.2ms | Allocations: 13715)
  Rendered layout layouts/application.html.erb (Duration: 134.4ms | Allocations: 38506)
Completed 200 OK in 339ms (Views: 34.7ms | ActiveRecord: 256.4ms | Allocations: 52840)


Started GET "/posts/new?post_to=3&post_type=Restaurant" for 127.0.0.1 at 2023-11-22 21:48:41 +0100
Processing by PostsController#new as */*
  Parameters: {"post_to"=>"3", "post_type"=>"Restaurant"}
Redirected to http://localhost:3000/login
  [1m[35m (51.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre FROM restaurants, users, restaurants_users as ru WHERE users.nombre='' AND users.nombre=ru.user_id AND ru.restaurant_id=restaurants.id [0m
  â†³ app/controllers/posts_controller.rb:7:in `new'
Completed 302 Found in 53ms (ActiveRecord: 51.0ms | Allocations: 491)


Started GET "/login" for 127.0.0.1 at 2023-11-22 21:48:41 +0100
Processing by LoginsController#new as */*
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 2.2ms | Allocations: 2854)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1102)
  Rendered layouts/_sidenav.html.erb (Duration: 1.7ms | Allocations: 2695)
  Rendered layout layouts/application.html.erb (Duration: 7.4ms | Allocations: 10430)
Completed 200 OK in 9ms (Views: 7.9ms | ActiveRecord: 0.0ms | Allocations: 11003)


Started GET "/posts/new?post_to=3&post_type=Restaurant" for 127.0.0.1 at 2023-11-22 21:52:54 +0100
Processing by PostsController#new as HTML
  Parameters: {"post_to"=>"3", "post_type"=>"Restaurant"}
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre FROM restaurants, users, restaurants_users as ru WHERE users.nombre='Atreides' AND users.nombre=ru.user_id AND ru.restaurant_id=restaurants.id [0m
  â†³ app/controllers/posts_controller.rb:7:in `new'
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 0.9ms | Allocations: 1685)
  Rendered posts/new.html.erb within layouts/application (Duration: 1.6ms | Allocations: 1981)
  Rendered layout layouts/application.html.erb (Duration: 1.7ms | Allocations: 2081)
Completed 500 Internal Server Error in 205ms (ActiveRecord: 156.2ms | Allocations: 16417)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <div class="posts_container">
  <div class="title_container">
    <h1 class="title">Escribe tu <span class="title_key_word"><%= locals[:tipo] %></span></h1>
  </div>
  <%= form_with model: locals[:comment] do |form| %>
    <% if get_comment_type(locals[:comment]) == "Post" & locals[:user_restaurants] %>
      <%= form.collection_select :asOwnerOf, locals[:user_restaurants], :id, :nombre, prompt: session[:username] %> 
    <% else %>
    
    <div class="new_post_container">
      <% if get_comment_type(locals[:comment]) == "Response" %>
        <%= form.hidden_field :respondable_id %>
        <%= form.hidden_field :respondable_type %>
        <%= form.hidden_field :autor %>
      <% elsif get_comment_type(locals[:comment]) == "Review" %>
        <%= form.hidden_field :reviewable_id %>
        <%= form.hidden_field :reviewable_type %>
        <%= form.hidden_field :autor %>
      <% else %>
        <span>HEEEELLLLOOOO</span>
      <% end %>
      <div>
        <%= form.text_area :contenido, class: "new_post_text_field", placeholder: "Escribe tu contenido", size: '90x16' %>
      </div>
      <div class="new_post_buttons">
        <label class="new_post_image_upload_button">
          <%= form.file_field :ruta_img %>
          <%= image_tag "image-icon", class: "new_post_image_upload_icon" %>
          <div class="new_post_image_upload_text">AÃ±ade una imagen</div>
        </label>
        <% if get_comment_type(locals[:comment]) == "Review" && locals[:comment].reviewable_type == "Restaurant" %>
          <% 5.times.each do |i| %>
            <%= link_to restaurant_rank_path(restaurant_id: locals[:comment].reviewable_id, rank: i+1), class: "new_post_image_upload_button", data: {turbo_method: :post} do %>
              <span><%= i+1 %></span>
              <%= image_tag "Star", class: "new_post_submit_icon" %>
            <% end %>
          <% end %>
        <% end %>
        <%= form.button type: :submit, class: "new_post_submit" do %>
          <%= image_tag "send", class: "new_post_submit_icon" %>
          <div class="new_post_submit_text">Publicar</div>
        <% end %>
      </div>
    </div>
  <% end %>
</div>

):
1:    <div class="posts_container">
2:      <div class="title_container">
3:        <h1 class="title">Escribe tu <span class="title_key_word"><%= locals[:tipo] %></span></h1>
4:      </div>
5:      <%= form_with model: locals[:comment] do |form| %>
6:        <% if get_comment_type(locals[:comment]) == "Post" & locals[:user_restaurants] %>
7:          <%= form.collection_select :asOwnerOf, locals[:user_restaurants], :id, :nombre, prompt: session[:username] %> 
8:        <% else %>
9:        
10:        <div class="new_post_container">
11:          <% if get_comment_type(locals[:comment]) == "Response" %>
12:            <%= form.hidden_field :respondable_id %>
13:            <%= form.hidden_field :respondable_type %>
14:            <%= form.hidden_field :autor %>
15:          <% elsif get_comment_type(locals[:comment]) == "Review" %>
16:            <%= form.hidden_field :reviewable_id %>
17:            <%= form.hidden_field :reviewable_type %>
18:            <%= form.hidden_field :autor %>
19:          <% else %>
20:            <span>HEEEELLLLOOOO</span>
21:          <% end %>
22:          <div>
23:            <%= form.text_area :contenido, class: "new_post_text_field", placeholder: "Escribe tu contenido", size: '90x16' %>
24:          </div>
25:          <div class="new_post_buttons">
26:            <label class="new_post_image_upload_button">
27:              <%= form.file_field :ruta_img %>
28:              <%= image_tag "image-icon", class: "new_post_image_upload_icon" %>
29:              <div class="new_post_image_upload_text">AÃ±ade una imagen</div>
30:            </label>
31:            <% if get_comment_type(locals[:comment]) == "Review" && locals[:comment].reviewable_type == "Restaurant" %>
32:              <% 5.times.each do |i| %>
33:                <%= link_to restaurant_rank_path(restaurant_id: locals[:comment].reviewable_id, rank: i+1), class: "new_post_image_upload_button", data: {turbo_method: :post} do %>
34:                  <span><%= i+1 %></span>
35:                  <%= image_tag "Star", class: "new_post_submit_icon" %>
36:                <% end %>
37:              <% end %>
38:            <% end %>
39:            <%= form.button type: :submit, class: "new_post_submit" do %>
40:              <%= image_tag "send", class: "new_post_submit_icon" %>
41:              <div class="new_post_submit_text">Publicar</div>
42:            <% end %>
43:          </div>
44:        </div>
45:      <% end %>
46:    </div>
  
app/views/layouts/_new_comment.html.erb:49: syntax error, unexpected end-of-input
app/views/posts/new.html.erb:1
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/show_exceptions.rb:36)
Processing by ErrorsController#internal_server_error as HTML
  Parameters: {"post_to"=>"3", "post_type"=>"Restaurant"}
  Rendering layout layouts/application.html.erb
  Rendering errors/internal_server_error.html.erb within layouts/application
  Rendered errors/internal_server_error.html.erb within layouts/application (Duration: 0.2ms | Allocations: 92)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1430)
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 112.6ms | Allocations: 13633)
  Rendered layout layouts/application.html.erb (Duration: 124.1ms | Allocations: 34565)
Completed 500 Internal Server Error in 125ms (Views: 25.6ms | ActiveRecord: 99.0ms | Allocations: 35025)


Started GET "/posts/new?post_to=3&post_type=Restaurant" for 127.0.0.1 at 2023-11-22 21:53:05 +0100
Processing by PostsController#new as HTML
  Parameters: {"post_to"=>"3", "post_type"=>"Restaurant"}
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre FROM restaurants, users, restaurants_users as ru WHERE users.nombre='Atreides' AND users.nombre=ru.user_id AND ru.restaurant_id=restaurants.id [0m
  â†³ app/controllers/posts_controller.rb:7:in `new'
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 4.0ms | Allocations: 3343)
  Rendered posts/new.html.erb within layouts/application (Duration: 4.9ms | Allocations: 3620)
  Rendered layout layouts/application.html.erb (Duration: 5.1ms | Allocations: 3712)
Completed 500 Internal Server Error in 207ms (ActiveRecord: 156.4ms | Allocations: 17893)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.2/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `&' for "Post":String):
    3:     <h1 class="title">Escribe tu <span class="title_key_word"><%= locals[:tipo] %></span></h1>
    4:   </div>
    5:   <%= form_with model: locals[:comment] do |form| %>
    6:     <% if get_comment_type(locals[:comment]) == "Post" & locals[:user_restaurants] %>
    7:       <%= form.collection_select :asOwnerOf, locals[:user_restaurants], :id, :nombre, prompt: session[:username] %> 
    8:     <% end %>
    9:     
  
app/views/layouts/_new_comment.html.erb:6
app/views/layouts/_new_comment.html.erb:5
app/views/posts/new.html.erb:1
Started GET "/posts/new?post_to=3&post_type=Restaurant" for 127.0.0.1 at 2023-11-22 21:53:17 +0100
Processing by PostsController#new as HTML
  Parameters: {"post_to"=>"3", "post_type"=>"Restaurant"}
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre FROM restaurants, users, restaurants_users as ru WHERE users.nombre='Atreides' AND users.nombre=ru.user_id AND ru.restaurant_id=restaurants.id [0m
  â†³ app/controllers/posts_controller.rb:7:in `new'
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 5.8ms | Allocations: 3961)
  Rendered posts/new.html.erb within layouts/application (Duration: 6.5ms | Allocations: 4239)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1369)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 115.2ms | Allocations: 13773)
  Rendered layout layouts/application.html.erb (Duration: 132.8ms | Allocations: 38562)
Completed 200 OK in 335ms (Views: 34.0ms | ActiveRecord: 255.4ms | Allocations: 52875)


Started GET "/posts/new?post_to=3&post_type=Restaurant" for 127.0.0.1 at 2023-11-22 21:53:32 +0100
Processing by PostsController#new as HTML
  Parameters: {"post_to"=>"3", "post_type"=>"Restaurant"}
  [1m[35m (24.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre FROM restaurants, users, restaurants_users as ru WHERE users.nombre='Atreides' AND users.nombre=ru.user_id AND ru.restaurant_id=restaurants.id [0m
  â†³ app/controllers/posts_controller.rb:7:in `new'
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 5.7ms | Allocations: 3942)
  Rendered posts/new.html.erb within layouts/application (Duration: 6.3ms | Allocations: 4220)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1370)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 117.5ms | Allocations: 13704)
  Rendered layout layouts/application.html.erb (Duration: 134.6ms | Allocations: 38474)
Completed 200 OK in 337ms (Views: 36.1ms | ActiveRecord: 255.2ms | Allocations: 52701)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-22 21:53:39 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"Atreides"}
  [1m[36mUser Load (26.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (24.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-22 20:53:39.601203')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-22 20:53:39.626777')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-22 20:53:39.652108')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (24.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-22 20:53:39.728287')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (24.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (24.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-22 20:53:39.836666')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (24.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 3.1ms | Allocations: 3143)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1102)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 4.0ms | Allocations: 4494)
  Rendered layout layouts/application.html.erb (Duration: 10.4ms | Allocations: 12494)
Completed 200 OK in 545ms (Views: 11.0ms | ActiveRecord: 476.3ms | Allocations: 30148)


Started GET "/logout" for 127.0.0.1 at 2023-11-22 21:53:41 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 432)


Started GET "/" for 127.0.0.1 at 2023-11-22 21:53:41 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (23.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.5ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (24.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:56
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:69
  Rendered restaurants/index.html.erb within layouts/application (Duration: 107.9ms | Allocations: 14867)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1102)
  Rendered layouts/_sidenav.html.erb (Duration: 1.8ms | Allocations: 2692)
  Rendered layout layouts/application.html.erb (Duration: 114.0ms | Allocations: 22447)
Completed 200 OK in 375ms (Views: 16.1ms | ActiveRecord: 321.8ms | Allocations: 31689)


Started GET "/login" for 127.0.0.1 at 2023-11-22 21:53:42 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 2.7ms | Allocations: 2965)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1114)
  Rendered layouts/_sidenav.html.erb (Duration: 1.9ms | Allocations: 2720)
  Rendered layout layouts/application.html.erb (Duration: 11.1ms | Allocations: 10631)
Completed 200 OK in 12ms (Views: 11.6ms | ActiveRecord: 0.0ms | Allocations: 11081)


Started POST "/login" for 127.0.0.1 at 2023-11-22 21:53:46 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"juan", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (26.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 221ms (ActiveRecord: 26.7ms | Allocations: 899)


Started GET "/" for 127.0.0.1 at 2023-11-22 21:53:46 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.9ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (24.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:56
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:69
  Rendered restaurants/index.html.erb within layouts/application (Duration: 80.4ms | Allocations: 12188)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1114)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.8ms | Allocations: 4718)
  Rendered layout layouts/application.html.erb (Duration: 136.5ms | Allocations: 21889)
Completed 200 OK in 342ms (Views: 15.0ms | ActiveRecord: 295.3ms | Allocations: 25888)


Started GET "/categories" for 127.0.0.1 at 2023-11-22 21:53:51 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (26.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 82.3ms | Allocations: 5001)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1127)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 29.1ms | Allocations: 4607)
  Rendered layout layouts/application.html.erb (Duration: 115.5ms | Allocations: 14500)
Completed 200 OK in 117ms (Views: 39.6ms | ActiveRecord: 76.6ms | Allocations: 14992)


Started GET "/categories/chino" for 127.0.0.1 at 2023-11-22 21:53:52 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"chino"}
  [1m[36mCategory Load (25.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "chino"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='chino' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mUser Load (24.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 896)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 449)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 447)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 447)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 454)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 453)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "darkskills"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "darkskills"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 142.9ms | Allocations: 46927)
  Rendered layouts/_add_comment.html.erb (Duration: 0.8ms | Allocations: 692)
  Rendered categories/show.html.erb within layouts/application (Duration: 170.0ms | Allocations: 48529)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1113)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.6ms | Allocations: 4644)
  Rendered layout layouts/application.html.erb (Duration: 202.5ms | Allocations: 58087)
Completed 200 OK in 383ms (Views: 53.0ms | ActiveRecord: 299.0ms | Allocations: 62812)


Started GET "/posts/new" for 127.0.0.1 at 2023-11-22 21:53:53 +0100
Processing by PostsController#new as HTML
  [1m[35m (49.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre FROM restaurants, users, restaurants_users as ru WHERE users.nombre='juan' AND users.nombre=ru.user_id AND ru.restaurant_id=restaurants.id [0m
  â†³ app/controllers/posts_controller.rb:7:in `new'
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 1.6ms | Allocations: 1648)
  Rendered posts/new.html.erb within layouts/application (Duration: 1.9ms | Allocations: 1739)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1101)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.9ms | Allocations: 4712)
  Rendered layout layouts/application.html.erb (Duration: 59.1ms | Allocations: 11328)
Completed 200 OK in 110ms (Views: 9.8ms | ActiveRecord: 99.3ms | Allocations: 12101)


Started GET "/categories/Gourmet" for 127.0.0.1 at 2023-11-22 21:54:01 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"Gourmet"}
  [1m[36mCategory Load (25.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Gourmet"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (27.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='Gourmet' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='Gourmet' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='Gourmet' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (23.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Gourmet"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='Gourmet' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Gourmet"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_comment.html.erb (Duration: 26.5ms | Allocations: 664)
  Rendered layouts/_add_comment.html.erb (Duration: 0.8ms | Allocations: 750)
  Rendered categories/show.html.erb within layouts/application (Duration: 53.0ms | Allocations: 1976)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 26.9ms | Allocations: 4607)
  Rendered layout layouts/application.html.erb (Duration: 83.2ms | Allocations: 11458)
Completed 200 OK in 264ms (Views: 10.8ms | ActiveRecord: 223.0ms | Allocations: 14206)


Started GET "/posts/new" for 127.0.0.1 at 2023-11-22 21:54:02 +0100
Processing by PostsController#new as HTML
  [1m[35m (49.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre FROM restaurants, users, restaurants_users as ru WHERE users.nombre='juan' AND users.nombre=ru.user_id AND ru.restaurant_id=restaurants.id [0m
  â†³ app/controllers/posts_controller.rb:7:in `new'
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 1.8ms | Allocations: 1636)
  Rendered posts/new.html.erb within layouts/application (Duration: 2.0ms | Allocations: 1727)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1101)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.6ms | Allocations: 4712)
  Rendered layout layouts/application.html.erb (Duration: 59.9ms | Allocations: 11316)
Completed 200 OK in 111ms (Views: 10.6ms | ActiveRecord: 99.2ms | Allocations: 12075)


Started GET "/users/juan" for 127.0.0.1 at 2023-11-22 21:54:24 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"juan"}
  [1m[36mUser Load (25.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (25.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-22 20:54:24.274245')[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-22 20:54:24.299756')[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-22 20:54:24.325017')[0m  [["autor", "juan"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (24.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/controllers/users_controller.rb:53:in `show'
  [1m[36mReview Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-22 20:54:24.401145')[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:54:in `block in show'
  [1m[36mDish Load (24.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  [1m[36mReview Count (24.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-22 20:54:24.451844')[0m  [["reviewable_id", 31], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:57:in `block (2 levels) in show'
  [1m[36mReaction Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "2"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:59:in `block in show'
  [1m[36mReaction Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "2"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:60:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 2.6ms | Allocations: 2307)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1102)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 4.2ms | Allocations: 4489)
  Rendered layout layouts/application.html.erb (Duration: 10.1ms | Allocations: 11649)
Completed 200 OK in 395ms (Views: 10.5ms | ActiveRecord: 346.8ms | Allocations: 19331)


Started GET "/logout" for 127.0.0.1 at 2023-11-22 21:54:26 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 396)


Started GET "/" for 127.0.0.1 at 2023-11-22 21:54:26 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.8ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (24.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:56
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:69
  Rendered restaurants/index.html.erb within layouts/application (Duration: 82.5ms | Allocations: 12188)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1114)
  Rendered layouts/_sidenav.html.erb (Duration: 1.7ms | Allocations: 2721)
  Rendered layout layouts/application.html.erb (Duration: 88.0ms | Allocations: 19849)
Completed 200 OK in 295ms (Views: 14.8ms | ActiveRecord: 246.9ms | Allocations: 23802)


Started GET "/login" for 127.0.0.1 at 2023-11-22 21:54:27 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 2.5ms | Allocations: 2660)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1102)
  Rendered layouts/_sidenav.html.erb (Duration: 1.6ms | Allocations: 2690)
  Rendered layout layouts/application.html.erb (Duration: 9.0ms | Allocations: 10228)
Completed 200 OK in 10ms (Views: 9.3ms | ActiveRecord: 0.0ms | Allocations: 10489)


Started POST "/login" for 127.0.0.1 at 2023-11-22 21:54:33 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"gari", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 222ms (ActiveRecord: 25.6ms | Allocations: 867)


Started GET "/" for 127.0.0.1 at 2023-11-22 21:54:33 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Load (23.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (24.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:56
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:69
  Rendered restaurants/index.html.erb within layouts/application (Duration: 80.7ms | Allocations: 12164)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1102)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.8ms | Allocations: 4174)
  Rendered layout layouts/application.html.erb (Duration: 139.7ms | Allocations: 21213)
Completed 200 OK in 342ms (Views: 17.2ms | ActiveRecord: 294.5ms | Allocations: 25179)


Started GET "/categories" for 127.0.0.1 at 2023-11-22 21:54:35 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (23.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 78.0ms | Allocations: 4648)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1127)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.8ms | Allocations: 4088)
  Rendered layout layouts/application.html.erb (Duration: 110.3ms | Allocations: 13615)
Completed 200 OK in 111ms (Views: 38.9ms | ActiveRecord: 71.8ms | Allocations: 13875)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-22 21:54:36 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (24.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "pipi"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 657)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 85.3ms | Allocations: 6567)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 542)
  Rendered categories/show.html.erb within layouts/application (Duration: 111.9ms | Allocations: 7728)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1101)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 30.9ms | Allocations: 4088)
  Rendered layout layouts/application.html.erb (Duration: 146.8ms | Allocations: 16690)
Completed 200 OK in 327ms (Views: 21.7ms | ActiveRecord: 274.7ms | Allocations: 19604)


Started GET "/posts/new" for 127.0.0.1 at 2023-11-22 21:54:36 +0100
Processing by PostsController#new as HTML
  [1m[35m (50.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre FROM restaurants, users, restaurants_users as ru WHERE users.nombre='gari' AND users.nombre=ru.user_id AND ru.restaurant_id=restaurants.id [0m
  â†³ app/controllers/posts_controller.rb:7:in `new'
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 1.9ms | Allocations: 1632)
  Rendered posts/new.html.erb within layouts/application (Duration: 2.2ms | Allocations: 1723)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1105)
  [1m[36mUser Load (24.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.2ms | Allocations: 4195)
  Rendered layout layouts/application.html.erb (Duration: 60.3ms | Allocations: 10812)
Completed 200 OK in 112ms (Views: 11.7ms | ActiveRecord: 99.4ms | Allocations: 11542)


Started GET "/posts/new" for 127.0.0.1 at 2023-11-22 21:55:28 +0100
Processing by PostsController#new as HTML
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre FROM restaurants, users, restaurants_users as ru WHERE users.nombre='gari' AND users.nombre=ru.user_id AND ru.restaurant_id=restaurants.id [0m
  â†³ app/controllers/posts_controller.rb:7:in `new'
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 6.1ms | Allocations: 3908)
  Rendered posts/new.html.erb within layouts/application (Duration: 6.7ms | Allocations: 4188)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1361)
  [1m[36mUser Load (24.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 180.3ms | Allocations: 17297)
  Rendered layout layouts/application.html.erb (Duration: 199.9ms | Allocations: 41981)
Completed 200 OK in 339ms (Views: 49.8ms | ActiveRecord: 255.1ms | Allocations: 49051)


Started GET "/posts/new" for 127.0.0.1 at 2023-11-22 21:55:55 +0100
Processing by PostsController#new as HTML
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre FROM restaurants, users, restaurants_users as ru WHERE users.nombre='gari' AND users.nombre=ru.user_id AND ru.restaurant_id=restaurants.id [0m
  â†³ app/controllers/posts_controller.rb:7:in `new'
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 22.3ms | Allocations: 3912)
  Rendered posts/new.html.erb within layouts/application (Duration: 22.9ms | Allocations: 4192)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1371)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 176.7ms | Allocations: 17415)
  Rendered layout layouts/application.html.erb (Duration: 254.9ms | Allocations: 42118)
Completed 200 OK in 394ms (Views: 103.7ms | ActiveRecord: 256.5ms | Allocations: 49120)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-22 21:55:56 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.7ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (24.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (22.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:56
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:69
  Rendered restaurants/index.html.erb within layouts/application (Duration: 107.9ms | Allocations: 14869)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1110)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.4ms | Allocations: 4176)
  Rendered layout layouts/application.html.erb (Duration: 166.2ms | Allocations: 23955)
Completed 200 OK in 429ms (Views: 21.4ms | ActiveRecord: 368.4ms | Allocations: 36319)


Started GET "/categories" for 127.0.0.1 at 2023-11-22 21:55:57 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 79.5ms | Allocations: 5037)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1127)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 29.3ms | Allocations: 4071)
  Rendered layout layouts/application.html.erb (Duration: 112.3ms | Allocations: 14000)
Completed 200 OK in 113ms (Views: 39.4ms | ActiveRecord: 73.4ms | Allocations: 14492)


Started GET "/categories/chino" for 127.0.0.1 at 2023-11-22 21:55:58 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"chino"}
  [1m[36mCategory Load (25.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "chino"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='chino' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 909)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 449)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 447)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 457)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "darkskills"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "darkskills"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 145.0ms | Allocations: 46280)
  Rendered layouts/_add_comment.html.erb (Duration: 0.8ms | Allocations: 688)
  Rendered categories/show.html.erb within layouts/application (Duration: 172.4ms | Allocations: 47948)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1113)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.2ms | Allocations: 4100)
  Rendered layout layouts/application.html.erb (Duration: 207.0ms | Allocations: 56929)
Completed 200 OK in 387ms (Views: 58.7ms | ActiveRecord: 297.8ms | Allocations: 61754)


Started GET "/posts/new" for 127.0.0.1 at 2023-11-22 21:55:59 +0100
Processing by PostsController#new as HTML
  [1m[35m (50.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre FROM restaurants, users, restaurants_users as ru WHERE users.nombre='gari' AND users.nombre=ru.user_id AND ru.restaurant_id=restaurants.id [0m
  â†³ app/controllers/posts_controller.rb:7:in `new'
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 1.6ms | Allocations: 1631)
  Rendered posts/new.html.erb within layouts/application (Duration: 1.8ms | Allocations: 1722)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1114)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (22.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 51.2ms | Allocations: 4204)
  Rendered layout layouts/application.html.erb (Duration: 56.8ms | Allocations: 10838)
Completed 200 OK in 108ms (Views: 10.0ms | ActiveRecord: 97.2ms | Allocations: 11578)


Started GET "/posts/new" for 127.0.0.1 at 2023-11-22 21:57:04 +0100
Processing by PostsController#new as HTML
  [1m[35m (24.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre FROM restaurants, users, restaurants_users as ru WHERE users.nombre='gari' AND users.nombre=ru.user_id AND ru.restaurant_id=restaurants.id [0m
  â†³ app/controllers/posts_controller.rb:7:in `new'
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 10.1ms | Allocations: 3927)
  Rendered posts/new.html.erb within layouts/application (Duration: 11.0ms | Allocations: 4207)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1357)
  [1m[36mUser Load (25.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 181.5ms | Allocations: 17240)
  Rendered layout layouts/application.html.erb (Duration: 209.0ms | Allocations: 41929)
Completed 200 OK in 346ms (Views: 56.6ms | ActiveRecord: 255.3ms | Allocations: 49020)


Started GET "/posts/new" for 127.0.0.1 at 2023-11-22 21:57:39 +0100
Processing by PostsController#new as HTML
  [1m[35m (25.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre FROM restaurants, users, restaurants_users as ru WHERE users.nombre='gari' AND users.nombre=ru.user_id AND ru.restaurant_id=restaurants.id [0m
  â†³ app/controllers/posts_controller.rb:7:in `new'
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 5.8ms | Allocations: 3831)
  Rendered posts/new.html.erb within layouts/application (Duration: 6.4ms | Allocations: 4109)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1370)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 173.2ms | Allocations: 17271)
  Rendered layout layouts/application.html.erb (Duration: 191.8ms | Allocations: 41897)
Completed 200 OK in 333ms (Views: 40.9ms | ActiveRecord: 255.8ms | Allocations: 48932)


Started GET "/posts/new" for 127.0.0.1 at 2023-11-22 21:57:45 +0100
Processing by PostsController#new as HTML
  [1m[35m (25.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre FROM restaurants, users, restaurants_users as ru WHERE users.nombre='gari' AND users.nombre=ru.user_id AND ru.restaurant_id=restaurants.id [0m
  â†³ app/controllers/posts_controller.rb:7:in `new'
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 4.8ms | Allocations: 3812)
  Rendered posts/new.html.erb within layouts/application (Duration: 5.3ms | Allocations: 4090)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1369)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 173.3ms | Allocations: 17275)
  Rendered layout layouts/application.html.erb (Duration: 189.3ms | Allocations: 41883)
Completed 200 OK in 329ms (Views: 38.4ms | ActiveRecord: 256.7ms | Allocations: 48883)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-22 21:57:58 +0100
Processing by UsersController#show as HTML
  Parameters: {"nombre"=>"gari"}
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:27:in `show'
  [1m[36mPost Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:29:in `show'
  [1m[36mReview Count (25.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:32:in `show'
  [1m[36mResponse Count (26.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mPost Count (24.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-22 20:57:58.571511')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:39:in `show'
  [1m[36mReview Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-22 20:57:58.596841')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mResponse Count (24.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-22 20:57:58.622058')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:41:in `show'
  [1m[36mRestaurant Count (23.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:44:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 2.9ms | Allocations: 3154)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1102)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 26.7ms | Allocations: 4072)
  Rendered layout layouts/application.html.erb (Duration: 32.7ms | Allocations: 12083)
Completed 200 OK in 322ms (Views: 10.4ms | ActiveRecord: 275.4ms | Allocations: 19471)


Started GET "/logout" for 127.0.0.1 at 2023-11-22 21:57:59 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 463)


Started GET "/" for 127.0.0.1 at 2023-11-22 21:57:59 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (24.3ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (24.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:56
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:69
  Rendered restaurants/index.html.erb within layouts/application (Duration: 109.3ms | Allocations: 14894)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1114)
  Rendered layouts/_sidenav.html.erb (Duration: 1.8ms | Allocations: 2722)
  Rendered layout layouts/application.html.erb (Duration: 114.8ms | Allocations: 22538)
Completed 200 OK in 380ms (Views: 17.3ms | ActiveRecord: 320.0ms | Allocations: 34946)


Started GET "/login" for 127.0.0.1 at 2023-11-22 21:58:01 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 2.4ms | Allocations: 2975)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1102)
  Rendered layouts/_sidenav.html.erb (Duration: 2.2ms | Allocations: 2690)
  Rendered layout layouts/application.html.erb (Duration: 8.3ms | Allocations: 10546)
Completed 200 OK in 9ms (Views: 8.9ms | ActiveRecord: 0.0ms | Allocations: 10995)


Started POST "/login" for 127.0.0.1 at 2023-11-22 21:58:04 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"juan", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 221ms (ActiveRecord: 24.9ms | Allocations: 906)


Started GET "/" for 127.0.0.1 at 2023-11-22 21:58:04 +0100
Processing by RestaurantsController#index as TURBO_STREAM
  [1m[36mRestaurant Load (23.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:5:in `index'
  [1m[36mRestaurant Exists? (23.6ms)[0m  [1m[34mSELECT 1 AS one FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what" LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `index'
  [1m[36mRank Load (24.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:23:in `map'
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (23.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (23.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:23:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "what", AVG(valoracion) as rest_val FROM "restaurants" INNER JOIN "ranks" ON "ranks"."what" = "restaurants"."id" GROUP BY "what"[0m
  â†³ app/views/restaurants/index.html.erb:27
  [1m[36mCategory Load (24.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:56
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:69
  Rendered restaurants/index.html.erb within layouts/application (Duration: 80.7ms | Allocations: 12164)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1102)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.2ms | Allocations: 4724)
  Rendered layout layouts/application.html.erb (Duration: 138.4ms | Allocations: 21806)
Completed 200 OK in 334ms (Views: 16.5ms | ActiveRecord: 289.3ms | Allocations: 25800)


Started GET "/users/mis_restaurantes" for 127.0.0.1 at 2023-11-22 21:58:06 +0100
Processing by UsersController#mis_restaurantes as HTML
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:87:in `mis_restaurantes'
  Rendering layout layouts/application.html.erb
  Rendering users/mis_restaurantes.html.erb within layouts/application
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/views/users/mis_restaurantes.html.erb:8
  Rendered users/mis_restaurantes.html.erb within layouts/application (Duration: 27.6ms | Allocations: 1846)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1127)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 4.0ms | Allocations: 4489)
  Rendered layout layouts/application.html.erb (Duration: 35.4ms | Allocations: 11239)
Completed 200 OK in 87ms (Views: 11.3ms | ActiveRecord: 49.8ms | Allocations: 12237)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-22 21:58:06 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:27:in `show'
  [1m[36mRank Exists? (24.3ms)[0m  [1m[34mSELECT 1 AS one FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what" LIMIT $2[0m  [["what", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:34:in `show'
  [1m[36mRank Load (24.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:37:in `show'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.6ms | Allocations: 2905)
  [1m[36mDish Load (24.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 882)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 449)
  Rendered layouts/_comment.html.erb (Duration: 83.0ms | Allocations: 6269)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 689)
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 8)
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='juan' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered layouts/_add_comment.html.erb (Duration: 0.2ms | Allocations: 364)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 298.3ms | Allocations: 19793)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1113)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.8ms | Allocations: 4749)
  Rendered layout layouts/application.html.erb (Duration: 357.0ms | Allocations: 29450)
Completed 200 OK in 747ms (Views: 33.3ms | ActiveRecord: 674.9ms | Allocations: 39558)


Started GET "/posts/new?post_to=2&post_type=Restaurant" for 127.0.0.1 at 2023-11-22 21:58:11 +0100
Processing by PostsController#new as HTML
  Parameters: {"post_to"=>"2", "post_type"=>"Restaurant"}
  [1m[35m (49.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre FROM restaurants, users, restaurants_users as ru WHERE users.nombre='juan' AND users.nombre=ru.user_id AND ru.restaurant_id=restaurants.id [0m
  â†³ app/controllers/posts_controller.rb:7:in `new'
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 1.9ms | Allocations: 1680)
  Rendered posts/new.html.erb within layouts/application (Duration: 2.2ms | Allocations: 1771)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1102)
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.8ms | Allocations: 4729)
  Rendered layout layouts/application.html.erb (Duration: 59.9ms | Allocations: 11379)
Completed 200 OK in 112ms (Views: 11.2ms | ActiveRecord: 99.0ms | Allocations: 12168)


Started POST "/posts" for 127.0.0.1 at 2023-11-22 21:58:34 +0100
Processing by PostsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"asOwnerOf"=>"2", "contenido"=>"hola hola"}, "button"=>""}
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/controllers/posts_controller.rb:17:in `create'
  [1m[36mTRANSACTION (25.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/posts_controller.rb:23:in `create'
  [1m[36mPost Create (52.6ms)[0m  [1m[32mINSERT INTO "posts" ("categoria", "autor", "contenido", "ruta_img", "created_at", "updated_at", "restaurant_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["categoria", "chino"], ["autor", "juan"], ["contenido", "hola hola"], ["ruta_img", nil], ["created_at", "2023-11-22 20:58:34.235176"], ["updated_at", "2023-11-22 20:58:34.235178"], ["restaurant_id", 2]]
  â†³ app/controllers/posts_controller.rb:23:in `create'
  [1m[36mTRANSACTION (26.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/posts_controller.rb:23:in `create'
Redirected to http://localhost:3000/categories/chino
Completed 302 Found in 131ms (ActiveRecord: 129.7ms | Allocations: 3887)


Started GET "/categories/chino" for 127.0.0.1 at 2023-11-22 21:58:34 +0100
Processing by CategoriesController#show as TURBO_STREAM
  Parameters: {"nombre"=>"chino"}
  [1m[36mCategory Load (25.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "chino"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='chino' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (23.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 644)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 447)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 447)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 448)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "darkskills"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "darkskills"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 2.9ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 453)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 140.4ms | Allocations: 48100)
  Rendered layouts/_add_comment.html.erb (Duration: 0.8ms | Allocations: 542)
  Rendered categories/show.html.erb within layouts/application (Duration: 167.1ms | Allocations: 49425)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1114)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 30.1ms | Allocations: 4643)
  Rendered layout layouts/application.html.erb (Duration: 200.9ms | Allocations: 58965)
Completed 200 OK in 382ms (Views: 54.6ms | ActiveRecord: 296.8ms | Allocations: 63658)


Started DELETE "/posts/49" for 127.0.0.1 at 2023-11-22 21:58:47 +0100
Processing by PostsController#destroy as TURBO_STREAM
  Parameters: {"id"=>"49"}
  [1m[36mPost Load (25.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  â†³ app/controllers/posts_controller.rb:31:in `destroy'
  [1m[36mTRANSACTION (25.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/posts_controller.rb:32:in `destroy'
  [1m[36mReaction Delete All (25.8ms)[0m  [1m[31mDELETE FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2[0m  [["reactionable_id", 49], ["reactionable_type", "Post"]]
  â†³ app/controllers/posts_controller.rb:32:in `destroy'
  [1m[36mResponse Load (24.5ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2[0m  [["respondable_id", 49], ["respondable_type", "Post"]]
  â†³ app/controllers/posts_controller.rb:32:in `destroy'
  [1m[36mPost Destroy (24.4ms)[0m  [1m[31mDELETE FROM "posts" WHERE "posts"."id" = $1[0m  [["id", 49]]
  â†³ app/controllers/posts_controller.rb:32:in `destroy'
  [1m[36mTRANSACTION (24.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/posts_controller.rb:32:in `destroy'
Redirected to http://localhost:3000/categories/chino
Completed 302 Found in 317ms (ActiveRecord: 255.5ms | Allocations: 7340)


Started GET "/categories/chino" for 127.0.0.1 at 2023-11-22 21:58:48 +0100
Processing by CategoriesController#show as TURBO_STREAM
  Parameters: {"nombre"=>"chino"}
  [1m[36mCategory Load (24.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "chino"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='juan' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='chino' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 642)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 447)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 447)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 448)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 450)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "darkskills"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "darkskills"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:85:in `get_user_of_comment'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:71:in `soy_admin?'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 451)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 448)
  Rendered layouts/_comment.html.erb (Duration: 137.4ms | Allocations: 45909)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 542)
  Rendered categories/show.html.erb within layouts/application (Duration: 163.1ms | Allocations: 47002)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1113)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "juan"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "juan"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.3ms | Allocations: 4642)
  Rendered layout layouts/application.html.erb (Duration: 194.7ms | Allocations: 56524)
Completed 200 OK in 372ms (Views: 45.2ms | ActiveRecord: 297.3ms | Allocations: 60359)


