Started GET "/restaurants/3/" for 127.0.0.1 at 2023-11-17 10:12:52 +0100
  [1m[36mActiveRecord::SchemaMigration Load (37.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (52.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (307.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (42.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (50.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (37.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (36.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (51.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (68.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (53.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (35.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (32.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (53.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 902.7ms | Allocations: 74217)
  [1m[36mDish Load (373.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (45.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 3.9ms | Allocations: 864)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 404)
  Rendered layouts/_comment.html.erb (Duration: 118.7ms | Allocations: 5655)
  Rendered layouts/_add_comment.html.erb (Duration: 2.3ms | Allocations: 643)
  [1m[35m (50.1ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 406)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 399)
  Rendered layouts/_comment.html.erb (Duration: 10.8ms | Allocations: 3258)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 1764.9ms | Allocations: 95072)
  Rendered layouts/_header.html.erb (Duration: 3.5ms | Allocations: 1308)
  [1m[36mUser Load (315.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 465.6ms | Allocations: 11343)
  Rendered layout layouts/application.html.erb (Duration: 2323.1ms | Allocations: 126538)
Completed 200 OK in 4744ms (Views: 1305.9ms | ActiveRecord: 2854.4ms | Allocations: 198214)


Started GET "/reviews/4/responses" for 127.0.0.1 at 2023-11-17 10:13:16 +0100
Processing by ReviewResponsesController#index as HTML
  Parameters: {"review_id"=>"4"}
  [1m[36mReview Load (54.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/review_responses_controller.rb:5:in `index'
  [1m[35m (56.9ms)[0m  [1m[34mSELECT responses.id, COUNT(reaccion) as react FROM responses LEFT JOIN reactions ON reactionable_id=responses.id AND reactionable_type='Response' AND reaccion='Like' AND respondable_id=4 AND respondable_type='Review' GROUP BY responses.id ORDER BY responses.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (47.6ms)[0m  [1m[34mSELECT responses.id, COUNT(reaccion) as react FROM responses LEFT JOIN reactions ON reactionable_id=responses.id AND reactionable_type='Response' AND reaccion='Dislike' AND respondable_id=4 AND respondable_type='Review' GROUP BY responses.id ORDER BY responses.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[36mResponse Load (56.9ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2 ORDER BY "responses"."id" ASC LIMIT $3[0m  [["respondable_id", 4], ["respondable_type", "Review"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:27:in `each'
  [1m[35m (64.7ms)[0m  [1m[34mSELECT responses.id, reactions.id as reaction_id FROM responses LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=responses.id AND reactions.reactionable_type='Response' AND respondable_id=4 AND respondable_type='Review' GROUP BY responses.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[36mReaction Load (35.2ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."reaccion" = $3[0m  [["reactionable_id", 4], ["reactionable_type", "Review"], ["reaccion", "Like"]]
  â†³ app/controllers/review_responses_controller.rb:9:in `index'
  [1m[36mReaction Load (39.4ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."reaccion" = $3[0m  [["reactionable_id", 4], ["reactionable_type", "Review"], ["reaccion", "Dislike"]]
  â†³ app/controllers/review_responses_controller.rb:9:in `index'
  [1m[36mResponse Count (50.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2[0m  [["respondable_id", 4], ["respondable_type", "Review"]]
  â†³ app/controllers/review_responses_controller.rb:9:in `size'
  [1m[36mReaction Load (56.2ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."who" = $3 LIMIT $4[0m  [["reactionable_id", 4], ["reactionable_type", "Review"], ["who", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/review_responses_controller.rb:10:in `index'
  Rendering layout layouts/application.html.erb
  Rendering review_responses/index.html.erb within layouts/application
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 604)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 403)
  Rendered layouts/_comment.html.erb (Duration: 7.3ms | Allocations: 2374)
  [1m[36mResponse Load (37.4ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2 ORDER BY "responses"."id" ASC LIMIT $3[0m  [["respondable_id", 4], ["respondable_type", "Review"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 403)
  Rendered layouts/_reaction.html.erb (Duration: 2.1ms | Allocations: 399)
  Rendered layouts/_comment.html.erb (Duration: 48.9ms | Allocations: 2439)
  Rendered layouts/_add_comment.html.erb (Duration: 1.0ms | Allocations: 492)
  Rendered review_responses/index.html.erb within layouts/application (Duration: 59.2ms | Allocations: 5734)
  Rendered layouts/_header.html.erb (Duration: 3.1ms | Allocations: 1015)
  [1m[36mUser Load (31.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 40.9ms | Allocations: 3364)
  Rendered layout layouts/application.html.erb (Duration: 112.5ms | Allocations: 13810)
Completed 200 OK in 1329ms (Views: 45.3ms | ActiveRecord: 770.1ms | Allocations: 31938)


Started GET "/categories/chino" for 127.0.0.1 at 2023-11-17 10:13:37 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"chino"}
  [1m[36mCategory Load (33.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "chino"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (287.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (32.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (34.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (34.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (32.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='chino' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mPost Load (66.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_reaction.html.erb (Duration: 2.6ms | Allocations: 595)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 406)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 405)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 405)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 403)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 399)
  Rendered layouts/_comment.html.erb (Duration: 116.8ms | Allocations: 31195)
  Rendered layouts/_add_comment.html.erb (Duration: 0.7ms | Allocations: 485)
  Rendered categories/show.html.erb within layouts/application (Duration: 119.3ms | Allocations: 31981)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1001)
  [1m[36mUser Load (42.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 51.2ms | Allocations: 3326)
  Rendered layout layouts/application.html.erb (Duration: 176.8ms | Allocations: 39927)
Completed 200 OK in 856ms (Views: 70.3ms | ActiveRecord: 599.9ms | Allocations: 47027)


Started POST "/reactions" for 127.0.0.1 at 2023-11-17 10:14:04 +0100
Processing by ReactionsController#create as TURBO_STREAM
  Parameters: {"reaction"=>{"reaccion"=>"Like", "reactionable_id"=>"20", "reactionable_type"=>"Post"}}
  [1m[36mReaction Exists? (438.0ms)[0m  [1m[34mSELECT 1 AS one FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reactionable_id" = $2 AND "reactions"."reactionable_type" = $3 LIMIT $4[0m  [["who", "Atreides"], ["reactionable_id", 20], ["reactionable_type", "Post"], ["LIMIT", 1]]
  â†³ app/controllers/reactions_controller.rb:10:in `create'
  [1m[36mPost Load (54.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/reactions_controller.rb:10:in `create'
  [1m[36mCACHE Reaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reactionable_id" = $2 AND "reactions"."reactionable_type" = $3 LIMIT $4[0m  [["who", "Atreides"], ["reactionable_id", 20], ["reactionable_type", "Post"], ["LIMIT", 1]]
  â†³ app/controllers/reactions_controller.rb:10:in `create'
  [1m[36mTRANSACTION (32.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/reactions_controller.rb:10:in `create'
  [1m[36mReaction Create (1438.5ms)[0m  [1m[32mINSERT INTO "reactions" ("who", "reactionable_type", "reactionable_id", "reaccion") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["who", "Atreides"], ["reactionable_type", "Post"], ["reactionable_id", 20], ["reaccion", "Like"]]
  â†³ app/controllers/reactions_controller.rb:10:in `create'
  [1m[36mTRANSACTION (45.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/reactions_controller.rb:10:in `create'
Redirected to http://localhost:3000/categories/chino
Completed 302 Found in 2077ms (ActiveRecord: 2008.8ms | Allocations: 5757)


Started GET "/categories/chino" for 127.0.0.1 at 2023-11-17 10:14:06 +0100
Processing by CategoriesController#show as TURBO_STREAM
  Parameters: {"nombre"=>"chino"}
  [1m[36mCategory Load (36.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "chino"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (36.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (56.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (47.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (312.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (35.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='chino' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mPost Load (54.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 598)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 406)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 405)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 405)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 403)
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 405)
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 403)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 399)
  Rendered layouts/_comment.html.erb (Duration: 129.6ms | Allocations: 31221)
  Rendered layouts/_add_comment.html.erb (Duration: 1.4ms | Allocations: 491)
  Rendered categories/show.html.erb within layouts/application (Duration: 132.2ms | Allocations: 31896)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1013)
  [1m[36mUser Load (34.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 43.3ms | Allocations: 3359)
  Rendered layout layouts/application.html.erb (Duration: 184.6ms | Allocations: 39927)
Completed 200 OK in 725ms (Views: 96.2ms | ActiveRecord: 614.6ms | Allocations: 43998)


Started GET "/posts/19/responses" for 127.0.0.1 at 2023-11-17 10:14:12 +0100
Processing by PostResponsesController#index as HTML
  Parameters: {"post_id"=>"19"}
  [1m[36mPost Load (62.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  â†³ app/controllers/post_responses_controller.rb:22:in `index'
  [1m[35m (31.8ms)[0m  [1m[34mSELECT responses.id, COUNT(reaccion) as react FROM responses LEFT JOIN reactions ON reactionable_id=responses.id AND reactionable_type='Response' AND reaccion='Like' AND respondable_id=19 AND respondable_type='Post' GROUP BY responses.id ORDER BY responses.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (34.8ms)[0m  [1m[34mSELECT responses.id, COUNT(reaccion) as react FROM responses LEFT JOIN reactions ON reactionable_id=responses.id AND reactionable_type='Response' AND reaccion='Dislike' AND respondable_id=19 AND respondable_type='Post' GROUP BY responses.id ORDER BY responses.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[36mResponse Load (45.8ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2 ORDER BY "responses"."id" ASC LIMIT $3[0m  [["respondable_id", 19], ["respondable_type", "Post"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:27:in `each'
  [1m[35m (39.9ms)[0m  [1m[34mSELECT responses.id, reactions.id as reaction_id FROM responses LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=responses.id AND reactions.reactionable_type='Response' AND respondable_id=19 AND respondable_type='Post' GROUP BY responses.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[36mReaction Load (317.1ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."reaccion" = $3[0m  [["reactionable_id", 19], ["reactionable_type", "Post"], ["reaccion", "Like"]]
  â†³ app/controllers/post_responses_controller.rb:26:in `index'
  [1m[36mReaction Load (291.0ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."reaccion" = $3[0m  [["reactionable_id", 19], ["reactionable_type", "Post"], ["reaccion", "Dislike"]]
  â†³ app/controllers/post_responses_controller.rb:26:in `index'
  [1m[36mResponse Count (65.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2[0m  [["respondable_id", 19], ["respondable_type", "Post"]]
  â†³ app/controllers/post_responses_controller.rb:26:in `size'
  [1m[36mReaction Load (45.5ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."who" = $3 LIMIT $4[0m  [["reactionable_id", 19], ["reactionable_type", "Post"], ["who", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/post_responses_controller.rb:27:in `index'
  Rendering layout layouts/application.html.erb
  Rendering post_responses/index.html.erb within layouts/application
  Rendered layouts/_reaction.html.erb (Duration: 2.7ms | Allocations: 598)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 402)
  Rendered layouts/_comment.html.erb (Duration: 11.5ms | Allocations: 2348)
  [1m[36mResponse Load (89.9ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2 ORDER BY "responses"."id" ASC LIMIT $3[0m  [["respondable_id", 19], ["respondable_type", "Post"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 2.0ms | Allocations: 399)
  Rendered layouts/_comment.html.erb (Duration: 111.5ms | Allocations: 5777)
  Rendered layouts/_add_comment.html.erb (Duration: 1.3ms | Allocations: 486)
  Rendered post_responses/index.html.erb within layouts/application (Duration: 127.5ms | Allocations: 9032)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1003)
  [1m[36mUser Load (51.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 62.3ms | Allocations: 3324)
  Rendered layout layouts/application.html.erb (Duration: 197.1ms | Allocations: 17003)
Completed 200 OK in 1154ms (Views: 57.2ms | ActiveRecord: 1075.4ms | Allocations: 23381)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-17 10:14:22 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (226.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (385.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (76.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (70.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (38.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 09:14:23.273009')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (483.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 09:14:23.315278')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (59.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 09:14:23.800557')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (59.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mRestaurant Load (50.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:49:in `show'
  [1m[36mReview Count (75.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 09:14:24.216322')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:50:in `block in show'
  [1m[36mDish Load (43.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:52:in `block in show'
  [1m[36mReview Count (445.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 09:14:24.340831')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:53:in `block (2 levels) in show'
  [1m[36mReaction Count (46.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:55:in `block in show'
  [1m[36mReaction Count (58.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 38.3ms | Allocations: 3643)
  Rendered layouts/_header.html.erb (Duration: 2.9ms | Allocations: 1014)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 6.2ms | Allocations: 3258)
  Rendered layout layouts/application.html.erb (Duration: 57.3ms | Allocations: 11580)
Completed 200 OK in 2455ms (Views: 58.5ms | ActiveRecord: 2150.8ms | Allocations: 22869)


Started GET "/categories" for 127.0.0.1 at 2023-11-17 10:14:49 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (182.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:5
  Rendered categories/index.html.erb within layouts/application (Duration: 191.3ms | Allocations: 2971)
  Rendered layouts/_header.html.erb (Duration: 4.1ms | Allocations: 1027)
  [1m[36mUser Load (383.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 398.4ms | Allocations: 3323)
  Rendered layout layouts/application.html.erb (Duration: 603.9ms | Allocations: 11161)
Completed 200 OK in 634ms (Views: 40.1ms | ActiveRecord: 565.3ms | Allocations: 11486)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-17 10:14:53 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (708.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (73.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (135.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (44.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (154.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 09:14:54.853485')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (200.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 09:14:55.011742')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (460.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 09:14:55.214263')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (95.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mRestaurant Load (79.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:49:in `show'
  [1m[36mReview Count (216.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 09:14:55.860388')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:50:in `block in show'
  [1m[36mDish Load (55.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:52:in `block in show'
  [1m[36mReview Count (107.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 09:14:56.138336')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:53:in `block (2 levels) in show'
  [1m[36mReaction Count (53.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:55:in `block in show'
  [1m[36mReaction Count (56.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 8.4ms | Allocations: 2155)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1002)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 9.9ms | Allocations: 3221)
  Rendered layout layouts/application.html.erb (Duration: 29.1ms | Allocations: 9987)
Completed 200 OK in 2520ms (Views: 30.0ms | ActiveRecord: 2439.8ms | Allocations: 17202)


Started GET "/logout" for 127.0.0.1 at 2023-11-17 10:14:56 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.0ms | Allocations: 439)


Started GET "/" for 127.0.0.1 at 2023-11-17 10:14:56 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (248.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:5
  Rendered categories/index.html.erb within layouts/application (Duration: 257.9ms | Allocations: 2712)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1039)
  Rendered layouts/_sidenav.html.erb (Duration: 3.7ms | Allocations: 2968)
  Rendered layout layouts/application.html.erb (Duration: 269.4ms | Allocations: 10584)
Completed 200 OK in 273ms (Views: 22.9ms | ActiveRecord: 248.2ms | Allocations: 10846)


Started GET "/admin" for 127.0.0.1 at 2023-11-17 10:15:01 +0100
Processing by AdminController#dashboard as HTML
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 1.0ms | Allocations: 342)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1027)
  Rendered layouts/_sidenav.html.erb (Duration: 10.1ms | Allocations: 2931)
  Rendered layout layouts/application.html.erb (Duration: 24.4ms | Allocations: 8312)
Completed 200 OK in 26ms (Views: 25.4ms | ActiveRecord: 0.0ms | Allocations: 8723)


Started GET "/logout" for 127.0.0.1 at 2023-11-17 10:15:27 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 380)


Started GET "/" for 127.0.0.1 at 2023-11-17 10:15:27 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (249.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:5
  Rendered categories/index.html.erb within layouts/application (Duration: 262.5ms | Allocations: 2703)
  Rendered layouts/_header.html.erb (Duration: 3.5ms | Allocations: 1027)
  Rendered layouts/_sidenav.html.erb (Duration: 11.9ms | Allocations: 2930)
  Rendered layout layouts/application.html.erb (Duration: 294.4ms | Allocations: 10499)
Completed 200 OK in 297ms (Views: 46.7ms | ActiveRecord: 249.4ms | Allocations: 10760)


Started GET "/categories/burger" for 127.0.0.1 at 2023-11-17 10:15:54 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (49.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (38.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (32.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (41.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (54.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (55.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mPost Load (352.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 596)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 399)
  Rendered layouts/_comment.html.erb (Duration: 372.7ms | Allocations: 6220)
  Rendered layouts/_add_comment.html.erb (Duration: 1.7ms | Allocations: 491)
  Rendered categories/show.html.erb within layouts/application (Duration: 375.0ms | Allocations: 6852)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1001)
  Rendered layouts/_sidenav.html.erb (Duration: 5.8ms | Allocations: 2930)
  Rendered layout layouts/application.html.erb (Duration: 392.4ms | Allocations: 14414)
Completed 200 OK in 679ms (Views: 41.3ms | ActiveRecord: 623.7ms | Allocations: 17254)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-17 10:15:58 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRank Load (69.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:11:in `map'
  [1m[36mRestaurant Load (43.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  [1m[36mRestaurant Load (45.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  [1m[36mRestaurant Load (32.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (35.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (52.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  Rendered restaurants/index.html.erb within layouts/application (Duration: 111.7ms | Allocations: 7490)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1015)
  Rendered layouts/_sidenav.html.erb (Duration: 4.6ms | Allocations: 2966)
  Rendered layout layouts/application.html.erb (Duration: 125.6ms | Allocations: 15335)
Completed 200 OK in 326ms (Views: 38.6ms | ActiveRecord: 278.1ms | Allocations: 17339)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-17 10:16:06 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRank Load (98.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:11:in `map'
  [1m[36mRestaurant Load (39.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  [1m[36mRestaurant Load (47.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  [1m[36mRestaurant Load (34.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (65.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (37.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  Rendered restaurants/index.html.erb within layouts/application (Duration: 125.6ms | Allocations: 6733)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1002)
  Rendered layouts/_sidenav.html.erb (Duration: 4.0ms | Allocations: 2930)
  Rendered layout layouts/application.html.erb (Duration: 137.2ms | Allocations: 14528)
Completed 200 OK in 368ms (Views: 35.7ms | ActiveRecord: 322.1ms | Allocations: 16428)


Started GET "/restaurants?filter=burger" for 127.0.0.1 at 2023-11-17 10:16:13 +0100
Processing by RestaurantsController#index as HTML
  Parameters: {"filter"=>"burger"}
  [1m[36mRank Load (198.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:11:in `map'
  [1m[36mRestaurant Load (99.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  [1m[36mRestaurant Load (39.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  [1m[36mRestaurant Load (49.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (51.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (31.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."categoria" = $1[0m  [["categoria", "burger"]]
  â†³ app/views/restaurants/index.html.erb:51
  Rendered restaurants/index.html.erb within layouts/application (Duration: 133.9ms | Allocations: 4974)
  Rendered layouts/_header.html.erb (Duration: 2.2ms | Allocations: 1002)
  Rendered layouts/_sidenav.html.erb (Duration: 5.8ms | Allocations: 2930)
  Rendered layout layouts/application.html.erb (Duration: 147.9ms | Allocations: 12744)
Completed 200 OK in 546ms (Views: 67.2ms | ActiveRecord: 470.3ms | Allocations: 14673)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-17 10:16:18 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRank Load (463.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:11:in `map'
  [1m[36mRestaurant Load (125.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  [1m[36mRestaurant Load (31.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  [1m[36mRestaurant Load (44.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (47.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (50.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  Rendered restaurants/index.html.erb within layouts/application (Duration: 115.0ms | Allocations: 6730)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1002)
  Rendered layouts/_sidenav.html.erb (Duration: 4.1ms | Allocations: 2930)
  Rendered layout layouts/application.html.erb (Duration: 128.6ms | Allocations: 14473)
Completed 200 OK in 801ms (Views: 31.9ms | ActiveRecord: 760.8ms | Allocations: 16396)


Started GET "/categories" for 127.0.0.1 at 2023-11-17 10:16:29 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (89.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:5
  Rendered categories/index.html.erb within layouts/application (Duration: 98.6ms | Allocations: 2712)
  Rendered layouts/_header.html.erb (Duration: 2.2ms | Allocations: 1039)
  Rendered layouts/_sidenav.html.erb (Duration: 6.0ms | Allocations: 2967)
  Rendered layout layouts/application.html.erb (Duration: 117.0ms | Allocations: 10596)
Completed 200 OK in 118ms (Views: 28.2ms | ActiveRecord: 89.5ms | Allocations: 10858)


Started GET "/categories" for 127.0.0.1 at 2023-11-17 10:16:33 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (336.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:5
  Rendered categories/index.html.erb within layouts/application (Duration: 346.1ms | Allocations: 2709)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1034)
  Rendered layouts/_sidenav.html.erb (Duration: 8.4ms | Allocations: 2936)
  Rendered layout layouts/application.html.erb (Duration: 363.4ms | Allocations: 10529)
Completed 200 OK in 364ms (Views: 27.3ms | ActiveRecord: 336.6ms | Allocations: 10791)


Started GET "/categories/Turca" for 127.0.0.1 at 2023-11-17 10:16:44 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"Turca"}
  [1m[36mCategory Load (88.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Turca"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (31.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='Turca' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (39.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='Turca' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (33.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='Turca' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (39.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Turca"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='Turca' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mPost Load (41.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Turca"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_comment.html.erb (Duration: 43.5ms | Allocations: 623)
  Rendered layouts/_add_comment.html.erb (Duration: 1.1ms | Allocations: 681)
  Rendered categories/show.html.erb within layouts/application (Duration: 45.2ms | Allocations: 1458)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1001)
  Rendered layouts/_sidenav.html.erb (Duration: 3.9ms | Allocations: 2930)
  Rendered layout layouts/application.html.erb (Duration: 55.3ms | Allocations: 9020)
Completed 200 OK in 347ms (Views: 14.6ms | ActiveRecord: 318.7ms | Allocations: 11602)


Started GET "/categories" for 127.0.0.1 at 2023-11-17 10:16:58 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
Started GET "/categories/burger" for 127.0.0.1 at 2023-11-17 10:17:01 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"burger"}
  [1m[36mCategory Load (3408.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:5
  Rendered categories/index.html.erb within layouts/application (Duration: 3419.9ms | Allocations: 4958)
  Rendered layouts/_header.html.erb (Duration: 3.6ms | Allocations: 1027)
  Rendered layouts/_sidenav.html.erb (Duration: 12.6ms | Allocations: 2930)
  Rendered layout layouts/application.html.erb (Duration: 3449.2ms | Allocations: 12736)
Completed 200 OK in 3451ms (Views: 42.5ms | ActiveRecord: 3408.1ms | Allocations: 12997)


  [1m[36mCategory Load (40.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "burger"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (68.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (424.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
Started GET "/posts/11/responses" for 127.0.0.1 at 2023-11-17 10:17:06 +0100
Processing by PostResponsesController#index as HTML
  Parameters: {"post_id"=>"11"}
  [1m[35m (382.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='burger' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (130.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  â†³ app/controllers/post_responses_controller.rb:22:in `index'
  [1m[36mPost Load (36.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (61.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='burger' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mPost Load (36.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "burger"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_reaction.html.erb (Duration: 3.2ms | Allocations: 596)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 5.9ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 4.5ms | Allocations: 399)
  Rendered layouts/_comment.html.erb (Duration: 85.5ms | Allocations: 6220)
  Rendered layouts/_add_comment.html.erb (Duration: 1.4ms | Allocations: 485)
  Rendered categories/show.html.erb within layouts/application (Duration: 88.4ms | Allocations: 6846)
  Rendered layouts/_header.html.erb (Duration: 3.5ms | Allocations: 1013)
  Rendered layouts/_sidenav.html.erb (Duration: 9.6ms | Allocations: 2969)
  Rendered layout layouts/application.html.erb (Duration: 120.4ms | Allocations: 14480)
Completed 200 OK in 5816ms (Views: 85.0ms | ActiveRecord: 2809.0ms | Allocations: 33508)


  [1m[35m (1056.3ms)[0m  [1m[34mSELECT responses.id, COUNT(reaccion) as react FROM responses LEFT JOIN reactions ON reactionable_id=responses.id AND reactionable_type='Response' AND reaccion='Like' AND respondable_id=11 AND respondable_type='Post' GROUP BY responses.id ORDER BY responses.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (63.8ms)[0m  [1m[34mSELECT responses.id, COUNT(reaccion) as react FROM responses LEFT JOIN reactions ON reactionable_id=responses.id AND reactionable_type='Response' AND reaccion='Dislike' AND respondable_id=11 AND respondable_type='Post' GROUP BY responses.id ORDER BY responses.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[36mResponse Load (36.2ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2 ORDER BY "responses"."id" ASC LIMIT $3[0m  [["respondable_id", 11], ["respondable_type", "Post"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:27:in `each'
  [1m[35m (43.8ms)[0m  [1m[34mSELECT responses.id, reactions.id as reaction_id FROM responses LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=responses.id AND reactions.reactionable_type='Response' AND respondable_id=11 AND respondable_type='Post' GROUP BY responses.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[36mReaction Load (97.4ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."reaccion" = $3[0m  [["reactionable_id", 11], ["reactionable_type", "Post"], ["reaccion", "Like"]]
  â†³ app/controllers/post_responses_controller.rb:26:in `index'
  [1m[36mReaction Load (45.8ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."reaccion" = $3[0m  [["reactionable_id", 11], ["reactionable_type", "Post"], ["reaccion", "Dislike"]]
  â†³ app/controllers/post_responses_controller.rb:26:in `index'
  [1m[36mResponse Count (68.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2[0m  [["respondable_id", 11], ["respondable_type", "Post"]]
  â†³ app/controllers/post_responses_controller.rb:26:in `size'
  [1m[36mReaction Load (38.1ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."who" IS NULL LIMIT $3[0m  [["reactionable_id", 11], ["reactionable_type", "Post"], ["LIMIT", 1]]
  â†³ app/controllers/post_responses_controller.rb:27:in `index'
  Rendering layout layouts/application.html.erb
  Rendering post_responses/index.html.erb within layouts/application
  Rendered layouts/_reaction.html.erb (Duration: 2.1ms | Allocations: 592)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 399)
  Rendered layouts/_comment.html.erb (Duration: 6.5ms | Allocations: 2346)
  [1m[36mResponse Load (49.7ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2 ORDER BY "responses"."id" ASC LIMIT $3[0m  [["respondable_id", 11], ["respondable_type", "Post"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 399)
  Rendered layouts/_comment.html.erb (Duration: 56.2ms | Allocations: 2421)
  Rendered layouts/_add_comment.html.erb (Duration: 0.9ms | Allocations: 488)
  Rendered post_responses/index.html.erb within layouts/application (Duration: 64.9ms | Allocations: 5494)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1013)
  Rendered layouts/_sidenav.html.erb (Duration: 4.2ms | Allocations: 2967)
  Rendered layout layouts/application.html.erb (Duration: 75.9ms | Allocations: 13157)
Completed 200 OK in 1730ms (Views: 27.3ms | ActiveRecord: 1630.0ms | Allocations: 34563)


Started GET "/posts/10/responses" for 127.0.0.1 at 2023-11-17 10:17:18 +0100
Processing by PostResponsesController#index as HTML
  Parameters: {"post_id"=>"10"}
  [1m[36mPost Load (2085.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/post_responses_controller.rb:22:in `index'
  [1m[35m (158.5ms)[0m  [1m[34mSELECT responses.id, COUNT(reaccion) as react FROM responses LEFT JOIN reactions ON reactionable_id=responses.id AND reactionable_type='Response' AND reaccion='Like' AND respondable_id=10 AND respondable_type='Post' GROUP BY responses.id ORDER BY responses.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (39.8ms)[0m  [1m[34mSELECT responses.id, COUNT(reaccion) as react FROM responses LEFT JOIN reactions ON reactionable_id=responses.id AND reactionable_type='Response' AND reaccion='Dislike' AND respondable_id=10 AND respondable_type='Post' GROUP BY responses.id ORDER BY responses.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[36mResponse Load (36.4ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2 ORDER BY "responses"."id" ASC LIMIT $3[0m  [["respondable_id", 10], ["respondable_type", "Post"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:27:in `each'
  [1m[35m (52.0ms)[0m  [1m[34mSELECT responses.id, reactions.id as reaction_id FROM responses LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=responses.id AND reactions.reactionable_type='Response' AND respondable_id=10 AND respondable_type='Post' GROUP BY responses.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[36mReaction Load (50.0ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."reaccion" = $3[0m  [["reactionable_id", 10], ["reactionable_type", "Post"], ["reaccion", "Like"]]
  â†³ app/controllers/post_responses_controller.rb:26:in `index'
  [1m[36mReaction Load (45.7ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."reaccion" = $3[0m  [["reactionable_id", 10], ["reactionable_type", "Post"], ["reaccion", "Dislike"]]
  â†³ app/controllers/post_responses_controller.rb:26:in `index'
  [1m[36mResponse Count (68.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2[0m  [["respondable_id", 10], ["respondable_type", "Post"]]
  â†³ app/controllers/post_responses_controller.rb:26:in `size'
  [1m[36mReaction Load (83.9ms)[0m  [1m[34mSELECT "reactions".* FROM "reactions" WHERE "reactions"."reactionable_id" = $1 AND "reactions"."reactionable_type" = $2 AND "reactions"."who" IS NULL LIMIT $3[0m  [["reactionable_id", 10], ["reactionable_type", "Post"], ["LIMIT", 1]]
  â†³ app/controllers/post_responses_controller.rb:27:in `index'
  Rendering layout layouts/application.html.erb
  Rendering post_responses/index.html.erb within layouts/application
  Rendered layouts/_reaction.html.erb (Duration: 3.1ms | Allocations: 590)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 399)
  Rendered layouts/_comment.html.erb (Duration: 9.7ms | Allocations: 2336)
  [1m[36mResponse Load (52.2ms)[0m  [1m[34mSELECT "responses".* FROM "responses" WHERE "responses"."respondable_id" = $1 AND "responses"."respondable_type" = $2 ORDER BY "responses"."id" ASC LIMIT $3[0m  [["respondable_id", 10], ["respondable_type", "Post"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 398)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 399)
  Rendered layouts/_comment.html.erb (Duration: 71.3ms | Allocations: 8326)
  Rendered layouts/_add_comment.html.erb (Duration: 0.7ms | Allocations: 486)
  Rendered post_responses/index.html.erb within layouts/application (Duration: 82.5ms | Allocations: 11387)
  Rendered layouts/_header.html.erb (Duration: 3.3ms | Allocations: 1001)
  Rendered layouts/_sidenav.html.erb (Duration: 6.5ms | Allocations: 2930)
  Rendered layout layouts/application.html.erb (Duration: 101.7ms | Allocations: 18949)
Completed 200 OK in 2743ms (Views: 50.4ms | ActiveRecord: 2672.3ms | Allocations: 23852)


Started GET "/responses/new?response_to=10&response_type=Post" for 127.0.0.1 at 2023-11-17 10:17:32 +0100
Processing by ResponsesController#new as HTML
  Parameters: {"response_to"=>"10", "response_type"=>"Post"}
Redirected to http://localhost:3000/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 456)


Started GET "/login" for 127.0.0.1 at 2023-11-17 10:17:32 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 4.1ms | Allocations: 2876)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1002)
  Rendered layouts/_sidenav.html.erb (Duration: 3.2ms | Allocations: 2930)
  Rendered layout layouts/application.html.erb (Duration: 13.0ms | Allocations: 10445)
Completed 200 OK in 31ms (Views: 13.8ms | ActiveRecord: 0.0ms | Allocations: 10895)


Started POST "/reactions" for 127.0.0.1 at 2023-11-17 10:17:47 +0100
Processing by ReactionsController#create as TURBO_STREAM
  Parameters: {"reaction"=>{"reaccion"=>"Like", "reactionable_id"=>"6", "reactionable_type"=>"Response"}}
Redirected to http://localhost:3000/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 383)


Started GET "/login" for 127.0.0.1 at 2023-11-17 10:17:47 +0100
Processing by LoginsController#new as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 3.4ms | Allocations: 2535)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1014)
  Rendered layouts/_sidenav.html.erb (Duration: 3.6ms | Allocations: 2966)
  Rendered layout layouts/application.html.erb (Duration: 15.0ms | Allocations: 10206)
Completed 200 OK in 16ms (Views: 15.5ms | ActiveRecord: 0.0ms | Allocations: 10471)


Started POST "/login" for 127.0.0.1 at 2023-11-17 10:18:04 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"Atreides", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (36.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 375ms (ActiveRecord: 36.5ms | Allocations: 891)


Started GET "/" for 127.0.0.1 at 2023-11-17 10:18:25 +0100
Processing by CategoriesController#index as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (407.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:5
  Rendered categories/index.html.erb within layouts/application (Duration: 416.1ms | Allocations: 2714)
  Rendered layouts/_header.html.erb (Duration: 6.2ms | Allocations: 1027)
  [1m[36mUser Load (617.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 647.0ms | Allocations: 3323)
  Rendered layout layouts/application.html.erb (Duration: 1086.0ms | Allocations: 10912)
Completed 200 OK in 1087ms (Views: 61.6ms | ActiveRecord: 1025.2ms | Allocations: 11177)


Started GET "/" for 127.0.0.1 at 2023-11-17 12:07:16 +0100
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::ConnectionNotEstablished (connection to server at "91.208.207.32", port 50013 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?
):
  
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:80:in `rescue in new_client'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:68:in `new_client'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:981:in `connect'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:993:in `reconnect'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:685:in `block in reconnect!'
activesupport (7.1.1) lib/active_support/concurrency/null_lock.rb:9:in `synchronize'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:684:in `reconnect!'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:788:in `verify!'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:795:in `connect!'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:997:in `block in with_raw_connection'
activesupport (7.1.1) lib/active_support/concurrency/null_lock.rb:9:in `synchronize'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:996:in `with_raw_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:1104:in `valid_raw_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:619:in `get_database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/schema_cache.rb:374:in `database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/schema_cache.rb:70:in `database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/schema_cache.rb:200:in `database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:871:in `database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:647:in `check_version'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:675:in `new_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:720:in `checkout_new_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:699:in `try_to_checkout_new_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:657:in `acquire_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:355:in `checkout'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:184:in `connection'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:501:in `block in with_temporary_connection'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:518:in `with_temporary_pool'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:500:in `with_temporary_connection'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:494:in `block in with_temporary_connection_for_each'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:493:in `each'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:493:in `with_temporary_connection_for_each'
activerecord (7.1.1) lib/active_record/migration.rb:771:in `pending_migrations'
activerecord (7.1.1) lib/active_record/migration.rb:750:in `check_pending_migrations'
activerecord (7.1.1) lib/active_record/migration.rb:642:in `block (2 levels) in call'
activesupport (7.1.1) lib/active_support/file_update_checker.rb:85:in `execute'
activerecord (7.1.1) lib/active_record/migration.rb:647:in `block in call'
activerecord (7.1.1) lib/active_record/migration.rb:639:in `synchronize'
activerecord (7.1.1) lib/active_record/migration.rb:639:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
activesupport (7.1.1) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.1.1) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/actionable_exceptions.rb:16:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (7.1.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (7.1.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (7.1.1) lib/active_support/tagged_logging.rb:135:in `block in tagged'
activesupport (7.1.1) lib/active_support/tagged_logging.rb:39:in `tagged'
activesupport (7.1.1) lib/active_support/tagged_logging.rb:135:in `tagged'
activesupport (7.1.1) lib/active_support/broadcast_logger.rb:232:in `method_missing'
railties (7.1.1) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/remote_ip.rb:92:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/request_id.rb:28:in `call'
rack (3.0.8) lib/rack/method_override.rb:28:in `call'
rack (3.0.8) lib/rack/runtime.rb:24:in `call'
activesupport (7.1.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/server_timing.rb:59:in `block in call'
actionpack (7.1.1) lib/action_dispatch/middleware/server_timing.rb:24:in `collect_events'
actionpack (7.1.1) lib/action_dispatch/middleware/server_timing.rb:58:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.8) lib/rack/sendfile.rb:114:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/host_authorization.rb:141:in `call'
railties (7.1.1) lib/rails/engine.rb:529:in `call'
puma (6.4.0) lib/puma/configuration.rb:272:in `call'
puma (6.4.0) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.0) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.0) lib/puma/request.rb:99:in `handle_request'
puma (6.4.0) lib/puma/server.rb:443:in `process_client'
puma (6.4.0) lib/puma/server.rb:241:in `block in run'
puma (6.4.0) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
  [1m[35m (29.6ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1120147408448878005)[0m
  [1m[36mActiveRecord::SchemaMigration Load (32.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (37.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to AddColumnImageToCategories (20231117111513)
  [1m[36mTRANSACTION (29.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (60.3ms)[0m  [1m[35mALTER TABLE "categories" ADD "ruta_img" character varying[0m
  [1m[36mActiveRecord::SchemaMigration Create (28.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231117111513') RETURNING "version"[0m
  [1m[36mTRANSACTION (36.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (982.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(1120147408448878005)[0m
  [1m[36mActiveRecord::SchemaMigration Load (32.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/categories/show" for 127.0.0.1 at 2023-11-17 12:31:07 +0100
Started GET "/categories/chino" for 127.0.0.1 at 2023-11-17 12:31:11 +0100
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::NoDatabaseError (We could not find your database: brm33sftclngywwhayzb. Available database configurations can be found in config/database.yml file.

To resolve this error:

- Did you create the database for this app, or delete it? You may need to create your database.
- Has the database name changed? Check your database.yml config has the correct database name.

To create your database, run:

        bin/rails db:create
):
  
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:74:in `rescue in new_client'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:68:in `new_client'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:981:in `connect'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:993:in `reconnect'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:685:in `block in reconnect!'
activesupport (7.1.1) lib/active_support/concurrency/null_lock.rb:9:in `synchronize'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:684:in `reconnect!'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:788:in `verify!'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:795:in `connect!'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:997:in `block in with_raw_connection'
activesupport (7.1.1) lib/active_support/concurrency/null_lock.rb:9:in `synchronize'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:996:in `with_raw_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:1104:in `valid_raw_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:619:in `get_database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/schema_cache.rb:374:in `database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/schema_cache.rb:70:in `database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/schema_cache.rb:200:in `database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:871:in `database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:647:in `check_version'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:675:in `new_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:720:in `checkout_new_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:699:in `try_to_checkout_new_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:657:in `acquire_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:355:in `checkout'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:184:in `connection'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:501:in `block in with_temporary_connection'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:518:in `with_temporary_pool'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:500:in `with_temporary_connection'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:494:in `block in with_temporary_connection_for_each'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:493:in `each'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:493:in `with_temporary_connection_for_each'
activerecord (7.1.1) lib/active_record/migration.rb:771:in `pending_migrations'
activerecord (7.1.1) lib/active_record/migration.rb:750:in `check_pending_migrations'
activerecord (7.1.1) lib/active_record/migration.rb:642:in `block (2 levels) in call'
activesupport (7.1.1) lib/active_support/file_update_checker.rb:85:in `execute'
activerecord (7.1.1) lib/active_record/migration.rb:647:in `block in call'
activerecord (7.1.1) lib/active_record/migration.rb:639:in `synchronize'
activerecord (7.1.1) lib/active_record/migration.rb:639:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
activesupport (7.1.1) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.1.1) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/actionable_exceptions.rb:16:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (7.1.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (7.1.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (7.1.1) lib/active_support/tagged_logging.rb:135:in `block in tagged'
activesupport (7.1.1) lib/active_support/tagged_logging.rb:39:in `tagged'
activesupport (7.1.1) lib/active_support/tagged_logging.rb:135:in `tagged'
activesupport (7.1.1) lib/active_support/broadcast_logger.rb:232:in `method_missing'
railties (7.1.1) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/remote_ip.rb:92:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/request_id.rb:28:in `call'
rack (3.0.8) lib/rack/method_override.rb:28:in `call'
rack (3.0.8) lib/rack/runtime.rb:24:in `call'
activesupport (7.1.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/server_timing.rb:59:in `block in call'
actionpack (7.1.1) lib/action_dispatch/middleware/server_timing.rb:24:in `collect_events'
actionpack (7.1.1) lib/action_dispatch/middleware/server_timing.rb:58:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.8) lib/rack/sendfile.rb:114:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/host_authorization.rb:141:in `call'
railties (7.1.1) lib/rails/engine.rb:529:in `call'
puma (6.4.0) lib/puma/configuration.rb:272:in `call'
puma (6.4.0) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.0) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.0) lib/puma/request.rb:99:in `handle_request'
puma (6.4.0) lib/puma/server.rb:443:in `process_client'
puma (6.4.0) lib/puma/server.rb:241:in `block in run'
puma (6.4.0) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
  [1m[36mActiveRecord::SchemaMigration Load (56.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"chino"}
  [1m[36mCategory Load (32.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "chino"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (46.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (35.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (61.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (39.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (42.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='chino' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mPost Load (75.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_reaction.html.erb (Duration: 29.2ms | Allocations: 2499)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 400)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 405)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 405)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 403)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 405)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 403)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 399)
  Rendered layouts/_comment.html.erb (Duration: 3043.7ms | Allocations: 67356)
  Rendered layouts/_add_comment.html.erb (Duration: 2.9ms | Allocations: 662)
  Rendered categories/show.html.erb within layouts/application (Duration: 3065.7ms | Allocations: 68471)
  Rendered layouts/_header.html.erb (Duration: 41.4ms | Allocations: 1325)
  [1m[36mUser Load (33.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 201.2ms | Allocations: 12532)
  Rendered layout layouts/application.html.erb (Duration: 3534.4ms | Allocations: 101147)
Completed 200 OK in 4679ms (Views: 3417.3ms | ActiveRecord: 939.0ms | Allocations: 135583)


Started GET "/posts/new" for 127.0.0.1 at 2023-11-17 12:31:51 +0100
Processing by PostsController#new as HTML
  [1m[35m (489.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre FROM restaurants, users, restaurants_users as ru WHERE users.nombre='Atreides' AND users.nombre=ru.user_id AND ru.restaurant_id=restaurants.id [0m
  â†³ app/controllers/posts_controller.rb:7:in `new'
  Rendering layout layouts/application.html.erb
  Rendering posts/new.html.erb within layouts/application
  Rendered layouts/_new_comment.html.erb (Duration: 127.3ms | Allocations: 2838)
  Rendered posts/new.html.erb within layouts/application (Duration: 134.7ms | Allocations: 3113)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1015)
  [1m[36mUser Load (33.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 43.6ms | Allocations: 3369)
  Rendered layout layouts/application.html.erb (Duration: 184.9ms | Allocations: 11193)
Completed 200 OK in 811ms (Views: 153.1ms | ActiveRecord: 600.6ms | Allocations: 22724)


Started POST "/posts" for 127.0.0.1 at 2023-11-17 12:32:11 +0100
Processing by PostsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "post"=>{"asOwnerOf"=>"3", "contenido"=>"Soy fumancher"}, "button"=>""}
Error al subir la imagen: undefined method `original_filename' for nil:NilClass
  [1m[36mUser Load (63.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/posts_controller.rb:17:in `create'
  [1m[36mTRANSACTION (49.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/posts_controller.rb:23:in `create'
  [1m[36mPost Create (95.2ms)[0m  [1m[32mINSERT INTO "posts" ("categoria", "autor", "contenido", "ruta_img", "created_at", "updated_at", "restaurant_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["categoria", "chino"], ["autor", "Atreides"], ["contenido", "Soy fumancher"], ["ruta_img", nil], ["created_at", "2023-11-17 11:32:11.335951"], ["updated_at", "2023-11-17 11:32:11.335959"], ["restaurant_id", 3]]
  â†³ app/controllers/posts_controller.rb:23:in `create'
  [1m[36mTRANSACTION (65.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/posts_controller.rb:23:in `create'
Redirected to http://localhost:3000/categories/chino
Completed 302 Found in 242ms (ActiveRecord: 274.2ms | Allocations: 3936)


Started GET "/categories/chino" for 127.0.0.1 at 2023-11-17 12:32:11 +0100
Processing by CategoriesController#show as TURBO_STREAM
  Parameters: {"nombre"=>"chino"}
  [1m[36mCategory Load (64.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "chino"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (42.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (43.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (35.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (103.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (36.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='chino' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mPost Load (53.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 599)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 406)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 405)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 405)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 403)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 405)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 403)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 405)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 2.1ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 404)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 399)
  Rendered layouts/_comment.html.erb (Duration: 123.3ms | Allocations: 32851)
  Rendered layouts/_add_comment.html.erb (Duration: 1.4ms | Allocations: 492)
  Rendered categories/show.html.erb within layouts/application (Duration: 125.7ms | Allocations: 33527)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1016)
  [1m[36mUser Load (32.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 44.2ms | Allocations: 3365)
  Rendered layout layouts/application.html.erb (Duration: 178.7ms | Allocations: 41579)
Completed 200 OK in 522ms (Views: 94.4ms | ActiveRecord: 411.5ms | Allocations: 45813)


Started GET "/restaurants/3/" for 127.0.0.1 at 2023-11-17 12:32:18 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (105.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (259.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (45.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (60.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (47.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (76.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (34.1ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (44.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (51.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (44.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (37.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (68.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 234.5ms | Allocations: 2659)
  [1m[36mDish Load (43.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (32.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 1.8ms | Allocations: 582)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 403)
  Rendered layouts/_comment.html.erb (Duration: 92.0ms | Allocations: 3447)
  Rendered layouts/_add_comment.html.erb (Duration: 2.6ms | Allocations: 486)
  [1m[35m (41.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 2.4ms | Allocations: 399)
  Rendered layouts/_comment.html.erb (Duration: 26.0ms | Allocations: 4813)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 801.6ms | Allocations: 22225)
  Rendered layouts/_header.html.erb (Duration: 4.1ms | Allocations: 1003)
  [1m[36mUser Load (60.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 77.5ms | Allocations: 3326)
  Rendered layout layouts/application.html.erb (Duration: 893.6ms | Allocations: 30173)
Completed 200 OK in 2462ms (Views: 639.0ms | ActiveRecord: 1428.8ms | Allocations: 48789)


Started GET "/restaurants/3/" for 127.0.0.1 at 2023-11-17 12:37:07 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (42.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (61.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (96.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (36.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (68.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (45.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (65.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (72.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (31.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (64.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (45.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (40.1ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 3.2ms | Allocations: 2623)
  [1m[36mDish Load (65.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (122.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 2.5ms | Allocations: 841)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 404)
  Rendered layouts/_comment.html.erb (Duration: 137.8ms | Allocations: 5323)
  Rendered layouts/_add_comment.html.erb (Duration: 1.0ms | Allocations: 639)
  [1m[35m (57.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 406)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 399)
  Rendered layouts/_comment.html.erb (Duration: 14.1ms | Allocations: 4838)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 388.8ms | Allocations: 21528)
  Rendered layouts/_header.html.erb (Duration: 3.1ms | Allocations: 1276)
  Rendered layouts/_sidenav.html.erb (Duration: 7.6ms | Allocations: 3141)
  Rendered layout layouts/application.html.erb (Duration: 443.4ms | Allocations: 44585)
Completed 500 Internal Server Error in 1903ms (ActiveRecord: 1702.0ms | Allocations: 72630)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `user_has_restaurants' for #<ActionView::Base:0x00000000015b08>):
    22:     </li>
    23:   </div>
    24:   <div>
    25:     <% if user_has_restaurants() %> 
    26:       <li>
    27:         <%= link_to categories_path, id: "mis_restaurantes", class: "sidenav_element" do %>
    28:           <%= image_tag "my-restaurant", class: "sidenav_element_icon" %>
  
app/views/layouts/_sidenav.html.erb:25
app/views/layouts/application.html.erb:21
Started GET "/restaurants/3/" for 127.0.0.1 at 2023-11-17 12:37:47 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (103.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (96.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (105.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (69.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (37.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (83.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (50.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (54.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (54.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (59.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (80.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (52.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 4.9ms | Allocations: 2616)
  [1m[36mDish Load (102.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (91.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 2.7ms | Allocations: 837)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 404)
  Rendered layouts/_comment.html.erb (Duration: 107.1ms | Allocations: 5311)
  Rendered layouts/_add_comment.html.erb (Duration: 1.1ms | Allocations: 635)
  [1m[35m (67.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 406)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 399)
  Rendered layouts/_comment.html.erb (Duration: 10.5ms | Allocations: 4834)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 606.6ms | Allocations: 21496)
  Rendered layouts/_header.html.erb (Duration: 2.4ms | Allocations: 1268)
  [1m[36mUser Load (344.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:61:in `user_has_restaurants'
  [1m[36mRestaurant Load (53.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:61:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 917.2ms | Allocations: 14597)
  Rendered layout layouts/application.html.erb (Duration: 1547.2ms | Allocations: 55836)
Completed 200 OK in 3121ms (Views: 288.3ms | ActiveRecord: 2736.5ms | Allocations: 83877)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-17 12:37:54 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (119.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (59.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (31.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (139.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (37.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 11:37:55.083203')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (32.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 11:37:55.138891')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (43.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 11:37:55.178676')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (54.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mRestaurant Load (102.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:49:in `show'
  [1m[36mReview Count (58.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 11:37:55.389057')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:50:in `block in show'
  [1m[36mDish Load (35.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:52:in `block in show'
  [1m[36mReview Count (53.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 11:37:55.487414')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:53:in `block (2 levels) in show'
  [1m[36mReaction Count (40.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:55:in `block in show'
  [1m[36mReaction Count (36.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 54.7ms | Allocations: 3363)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1002)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:61:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:61:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 13.8ms | Allocations: 4121)
  Rendered layout layouts/application.html.erb (Duration: 77.1ms | Allocations: 12117)
Completed 200 OK in 1196ms (Views: 79.2ms | ActiveRecord: 995.9ms | Allocations: 21957)


Started GET "/logout" for 127.0.0.1 at 2023-11-17 12:37:57 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 434)


Started GET "/" for 127.0.0.1 at 2023-11-17 12:37:57 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (84.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:5
  Rendered categories/index.html.erb within layouts/application (Duration: 165.6ms | Allocations: 4477)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1027)
  Rendered layouts/_sidenav.html.erb (Duration: 5.6ms | Allocations: 2587)
  Rendered layout layouts/application.html.erb (Duration: 180.5ms | Allocations: 11935)
Completed 500 Internal Server Error in 218ms (ActiveRecord: 131.5ms | Allocations: 13490)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (Couldn't find User without an ID):
    22:     </li>
    23:   </div>
    24:   <div>
    25:     <% if user_has_restaurants() %> 
    26:       <li>
    27:         <%= link_to categories_path, id: "mis_restaurantes", class: "sidenav_element" do %>
    28:           <%= image_tag "my-restaurant", class: "sidenav_element_icon" %>
  
app/helpers/application_helper.rb:61:in `user_has_restaurants'
app/views/layouts/_sidenav.html.erb:25
app/views/layouts/application.html.erb:21
Started GET "/logout" for 127.0.0.1 at 2023-11-17 12:38:12 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 2ms (ActiveRecord: 0.0ms | Allocations: 680)


Started GET "/" for 127.0.0.1 at 2023-11-17 12:38:12 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (1031.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:5
  Rendered categories/index.html.erb within layouts/application (Duration: 1247.4ms | Allocations: 4654)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1289)
  [1m[36mUser Load (76.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:61:in `user_has_restaurants'
  Rendered layouts/_sidenav.html.erb (Duration: 251.3ms | Allocations: 7781)
  Rendered layout layouts/application.html.erb (Duration: 1522.2ms | Allocations: 32388)
Completed 500 Internal Server Error in 1528ms (ActiveRecord: 1367.5ms | Allocations: 34428)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /usr/local/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `restaurants' for nil:NilClass):
    22:     </li>
    23:   </div>
    24:   <div>
    25:     <% if user_has_restaurants() %> 
    26:       <li>
    27:         <%= link_to categories_path, id: "mis_restaurantes", class: "sidenav_element" do %>
    28:           <%= image_tag "my-restaurant", class: "sidenav_element_icon" %>
  
app/helpers/application_helper.rb:61:in `user_has_restaurants'
app/views/layouts/_sidenav.html.erb:25
app/views/layouts/application.html.erb:21
Started GET "/" for 127.0.0.1 at 2023-11-17 12:38:43 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (1546.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:5
  Rendered categories/index.html.erb within layouts/application (Duration: 2638.6ms | Allocations: 4662)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1289)
  Rendered layouts/_sidenav.html.erb (Duration: 4.6ms | Allocations: 3175)
  Rendered layout layouts/application.html.erb (Duration: 2662.8ms | Allocations: 27795)
Completed 200 OK in 2670ms (Views: 38.1ms | ActiveRecord: 2626.8ms | Allocations: 30086)


Started GET "/login" for 127.0.0.1 at 2023-11-17 12:39:31 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 32.7ms | Allocations: 2879)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1002)
  Rendered layouts/_sidenav.html.erb (Duration: 2.8ms | Allocations: 2450)
  Rendered layout layouts/application.html.erb (Duration: 41.0ms | Allocations: 9969)
Completed 200 OK in 755ms (Views: 42.1ms | ActiveRecord: 668.0ms | Allocations: 15574)


Started POST "/login" for 127.0.0.1 at 2023-11-17 12:39:37 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"Atreides", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (103.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 437ms (ActiveRecord: 103.5ms | Allocations: 1113)


Started GET "/" for 127.0.0.1 at 2023-11-17 12:39:38 +0100
Processing by CategoriesController#index as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (1034.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:5
  Rendered categories/index.html.erb within layouts/application (Duration: 1040.8ms | Allocations: 2710)
  Rendered layouts/_header.html.erb (Duration: 9.1ms | Allocations: 1033)
  [1m[36mUser Load (81.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (50.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 359.6ms | Allocations: 14091)
  Rendered layout layouts/application.html.erb (Duration: 1446.2ms | Allocations: 21730)
Completed 200 OK in 1447ms (Views: 106.5ms | ActiveRecord: 1340.4ms | Allocations: 22039)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-17 12:39:45 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (144.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (613.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (55.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (69.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (102.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 11:39:47.209721')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (169.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 11:39:47.316643')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (31.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 11:39:47.488705')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (83.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mRestaurant Load (66.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:49:in `show'
  [1m[36mReview Count (35.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 11:39:47.681595')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:50:in `block in show'
  [1m[36mDish Load (43.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:52:in `block in show'
  [1m[36mReview Count (92.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 11:39:47.935649')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:53:in `block (2 levels) in show'
  [1m[36mReaction Count (129.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:55:in `block in show'
  [1m[36mReaction Count (53.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 12.6ms | Allocations: 2986)
  Rendered layouts/_header.html.erb (Duration: 3.4ms | Allocations: 1008)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 10.9ms | Allocations: 4137)
  Rendered layout layouts/application.html.erb (Duration: 35.1ms | Allocations: 11754)
Completed 200 OK in 2439ms (Views: 36.1ms | ActiveRecord: 2313.6ms | Allocations: 32261)


Started GET "/logout" for 127.0.0.1 at 2023-11-17 12:39:50 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 391)


Started GET "/" for 127.0.0.1 at 2023-11-17 12:39:50 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (89.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:5
  Rendered categories/index.html.erb within layouts/application (Duration: 97.5ms | Allocations: 2709)
  Rendered layouts/_header.html.erb (Duration: 3.8ms | Allocations: 1027)
  Rendered layouts/_sidenav.html.erb (Duration: 8.4ms | Allocations: 2449)
  Rendered layout layouts/application.html.erb (Duration: 119.5ms | Allocations: 10001)
Completed 200 OK in 120ms (Views: 31.0ms | ActiveRecord: 89.0ms | Allocations: 10263)


Started GET "/login" for 127.0.0.1 at 2023-11-17 12:40:16 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 2.6ms | Allocations: 2537)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1002)
  Rendered layouts/_sidenav.html.erb (Duration: 3.1ms | Allocations: 2449)
  Rendered layout layouts/application.html.erb (Duration: 14.0ms | Allocations: 9622)
Completed 200 OK in 15ms (Views: 14.5ms | ActiveRecord: 0.0ms | Allocations: 9884)


Started POST "/login" for 127.0.0.1 at 2023-11-17 12:40:22 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"gari", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (566.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 926ms (ActiveRecord: 566.4ms | Allocations: 835)


Started GET "/" for 127.0.0.1 at 2023-11-17 12:40:23 +0100
Processing by CategoriesController#index as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (140.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:5
  Rendered categories/index.html.erb within layouts/application (Duration: 145.9ms | Allocations: 2711)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1033)
  [1m[36mUser Load (35.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (42.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 92.0ms | Allocations: 3864)
  Rendered layout layouts/application.html.erb (Duration: 246.8ms | Allocations: 11471)
Completed 200 OK in 249ms (Views: 29.7ms | ActiveRecord: 218.2ms | Allocations: 11736)


Started GET "/categories/chino" for ::1 at 2023-11-17 12:45:31 +0100
  [1m[36mActiveRecord::SchemaMigration Load (164.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"chino"}
  [1m[36mCategory Load (52.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "chino"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (68.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (86.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (78.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (79.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (151.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='chino' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mPost Load (174.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_reaction.html.erb (Duration: 11.1ms | Allocations: 2498)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 400)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 398)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 398)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 404)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 404)
  Rendered layouts/_reaction.html.erb (Duration: 2.5ms | Allocations: 399)
  Rendered layouts/_comment.html.erb (Duration: 326.8ms | Allocations: 68996)
  Rendered layouts/_add_comment.html.erb (Duration: 2.1ms | Allocations: 666)
  Rendered categories/show.html.erb within layouts/application (Duration: 333.6ms | Allocations: 70250)
  Rendered layouts/_header.html.erb (Duration: 4.4ms | Allocations: 1333)
  Rendered layouts/_sidenav.html.erb (Duration: 4.2ms | Allocations: 3306)
  Rendered layout layouts/application.html.erb (Duration: 368.8ms | Allocations: 93735)
Completed 200 OK in 1517ms (Views: 199.8ms | ActiveRecord: 1107.5ms | Allocations: 130644)


Started GET "/categories/chino" for ::1 at 2023-11-17 12:47:17 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"chino"}
  [1m[36mCategory Load (155.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "chino"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (58.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (45.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (99.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (114.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (73.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='chino' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mPost Load (51.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 590)
  Rendered layouts/_reaction.html.erb (Duration: 2.5ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 1.2ms | Allocations: 398)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 398)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 1.6ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 2.1ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 1.3ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 1.5ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 2.4ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 2.3ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 2.5ms | Allocations: 401)
  Rendered layouts/_reaction.html.erb (Duration: 1.0ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 1.9ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 2.2ms | Allocations: 399)
  Rendered layouts/_comment.html.erb (Duration: 171.9ms | Allocations: 32790)
  Rendered layouts/_add_comment.html.erb (Duration: 1.4ms | Allocations: 485)
  Rendered categories/show.html.erb within layouts/application (Duration: 174.1ms | Allocations: 33416)
  Rendered layouts/_header.html.erb (Duration: 4.4ms | Allocations: 1001)
  Rendered layouts/_sidenav.html.erb (Duration: 11.6ms | Allocations: 2449)
  Rendered layout layouts/application.html.erb (Duration: 200.4ms | Allocations: 40472)
Completed 200 OK in 764ms (Views: 150.4ms | ActiveRecord: 597.8ms | Allocations: 44738)


Started GET "/" for 127.0.0.1 at 2023-11-17 12:49:06 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (314.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:5
  Rendered categories/index.html.erb within layouts/application (Duration: 325.0ms | Allocations: 3040)
  Rendered layouts/_header.html.erb (Duration: 2.3ms | Allocations: 1027)
  Rendered layouts/_sidenav.html.erb (Duration: 4.3ms | Allocations: 2449)
  Rendered layout layouts/application.html.erb (Duration: 343.2ms | Allocations: 10209)
Completed 200 OK in 346ms (Views: 30.5ms | ActiveRecord: 314.1ms | Allocations: 10540)


Started GET "/login" for 127.0.0.1 at 2023-11-17 12:50:08 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 4.6ms | Allocations: 3104)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1017)
  Rendered layouts/_sidenav.html.erb (Duration: 2.9ms | Allocations: 2485)
  Rendered layout layouts/application.html.erb (Duration: 12.8ms | Allocations: 10309)
Completed 200 OK in 87ms (Views: 13.5ms | ActiveRecord: 42.6ms | Allocations: 19002)


Started POST "/login" for 127.0.0.1 at 2023-11-17 12:50:15 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"Atreides", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (55.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 544ms (ActiveRecord: 55.4ms | Allocations: 1242)


Started GET "/" for 127.0.0.1 at 2023-11-17 12:50:16 +0100
Processing by CategoriesController#index as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (319.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:5
  Rendered categories/index.html.erb within layouts/application (Duration: 327.0ms | Allocations: 2732)
  Rendered layouts/_header.html.erb (Duration: 2.8ms | Allocations: 1027)
  [1m[36mUser Load (74.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (68.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 415.5ms | Allocations: 19226)
  Rendered layout layouts/application.html.erb (Duration: 757.2ms | Allocations: 26839)
Completed 200 OK in 759ms (Views: 174.7ms | ActiveRecord: 583.4ms | Allocations: 27148)


Started GET "/categories" for 127.0.0.1 at 2023-11-17 12:50:20 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (332.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:5
  Rendered categories/index.html.erb within layouts/application (Duration: 336.2ms | Allocations: 2724)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1041)
  [1m[36mUser Load (50.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (155.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 215.3ms | Allocations: 4431)
  Rendered layout layouts/application.html.erb (Duration: 563.9ms | Allocations: 12043)
Completed 200 OK in 565ms (Views: 26.5ms | ActiveRecord: 537.9ms | Allocations: 12306)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-17 12:51:25 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (149.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (69.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (45.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (66.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (54.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 11:51:25.878970')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (52.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 11:51:25.937194')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (36.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 11:51:25.991908')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (44.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mRestaurant Load (254.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:49:in `show'
  [1m[36mReview Count (161.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 11:51:26.338522')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:50:in `block in show'
  [1m[36mDish Load (35.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:52:in `block in show'
  [1m[36mReview Count (107.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 11:51:26.905804')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:53:in `block (2 levels) in show'
  [1m[36mReaction Count (93.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:55:in `block in show'
  [1m[36mReaction Count (42.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 18.6ms | Allocations: 3429)
  Rendered layouts/_header.html.erb (Duration: 3.3ms | Allocations: 1016)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 10.5ms | Allocations: 4206)
  Rendered layout layouts/application.html.erb (Duration: 44.0ms | Allocations: 12285)
Completed 200 OK in 1822ms (Views: 45.6ms | ActiveRecord: 1568.7ms | Allocations: 31467)


Started GET "/admin" for 127.0.0.1 at 2023-11-17 12:55:16 +0100
Processing by AdminController#dashboard as HTML
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 1.7ms | Allocations: 338)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1027)
  [1m[36mUser Load (100.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (36.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 148.7ms | Allocations: 4391)
  Rendered layout layouts/application.html.erb (Duration: 161.1ms | Allocations: 9767)
Completed 200 OK in 163ms (Views: 26.3ms | ActiveRecord: 136.2ms | Allocations: 10178)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-17 12:57:27 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (42.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (37.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (40.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (36.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (107.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 11:57:28.256264')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (137.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 11:57:28.367400')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (141.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 11:57:28.509062')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (36.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mRestaurant Load (40.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:49:in `show'
  [1m[36mReview Count (40.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 11:57:28.895284')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:50:in `block in show'
  [1m[36mDish Load (40.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:52:in `block in show'
  [1m[36mReview Count (40.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 11:57:29.096796')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:53:in `block (2 levels) in show'
  [1m[36mReaction Count (56.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:55:in `block in show'
  [1m[36mReaction Count (38.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 10.2ms | Allocations: 1998)
  Rendered layout layouts/application.html.erb (Duration: 11.7ms | Allocations: 2091)
Completed 500 Internal Server Error in 1566ms (ActiveRecord: 1262.8ms | Allocations: 37876)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `admin_path' for #<ActionView::Base:0x00000000015810>):
    1: <div class="title_container" style="flex-direction: row !important">
    2:     <h1 class="title">Mi <span class="title_key_word">Cuenta</span></h1>
    3:     <%= link_to admin_path, class: "admin_view_button", style: "text-decoration: none" do %>
    4:         <div>AdministraciÃ³n</div>
    5:     <% end %>
    6:     <%= link_to logout_path, class: "logout_button", method: :delete do %>
  
app/views/users/show.html.erb:3
Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-17 12:58:29 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (139.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (40.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (38.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (36.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (45.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 11:58:30.240723')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (39.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 11:58:30.290049')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (42.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 11:58:30.334570')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (37.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mRestaurant Load (37.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:49:in `show'
  [1m[36mReview Count (42.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 11:58:30.671458')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:50:in `block in show'
  [1m[36mDish Load (40.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:52:in `block in show'
  [1m[36mReview Count (133.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 11:58:30.919915')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:53:in `block (2 levels) in show'
  [1m[36mReaction Count (142.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:55:in `block in show'
  [1m[36mReaction Count (42.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 23.9ms | Allocations: 3073)
  Rendered layouts/_header.html.erb (Duration: 5.6ms | Allocations: 1267)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 13.0ms | Allocations: 4923)
  Rendered layout layouts/application.html.erb (Duration: 104.7ms | Allocations: 27787)
Completed 200 OK in 2156ms (Views: 110.8ms | ActiveRecord: 1626.2ms | Allocations: 63577)


Started GET "/admin" for 127.0.0.1 at 2023-11-17 12:58:33 +0100
Processing by AdminController#dashboard as HTML
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 3.5ms | Allocations: 327)
  Rendered layouts/_header.html.erb (Duration: 5.4ms | Allocations: 1027)
  [1m[36mUser Load (40.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (56.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 125.3ms | Allocations: 4390)
  Rendered layout layouts/application.html.erb (Duration: 160.2ms | Allocations: 9773)
Completed 200 OK in 164ms (Views: 65.8ms | ActiveRecord: 96.9ms | Allocations: 10186)


Started GET "/admin" for 127.0.0.1 at 2023-11-17 12:59:44 +0100
Processing by AdminController#dashboard as HTML
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 0.8ms | Allocations: 355)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1305)
  [1m[36mUser Load (41.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (44.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 433.7ms | Allocations: 20462)
  Rendered layout layouts/application.html.erb (Duration: 455.1ms | Allocations: 40867)
Completed 200 OK in 458ms (Views: 170.2ms | ActiveRecord: 287.1ms | Allocations: 41610)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-17 12:59:46 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (124.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (41.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (39.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (53.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (54.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 11:59:47.227119')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (51.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 11:59:47.285930')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (50.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 11:59:47.340660')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (75.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mRestaurant Load (37.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:49:in `show'
  [1m[36mReview Count (48.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 11:59:47.518629')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:50:in `block in show'
  [1m[36mDish Load (37.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:52:in `block in show'
  [1m[36mReview Count (49.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 11:59:47.752417')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:53:in `block (2 levels) in show'
  [1m[36mReaction Count (38.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:55:in `block in show'
  [1m[36mReaction Count (340.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 17.2ms | Allocations: 2999)
  Rendered layouts/_header.html.erb (Duration: 5.5ms | Allocations: 1016)
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 23.1ms | Allocations: 4186)
  Rendered layout layouts/application.html.erb (Duration: 65.3ms | Allocations: 11844)
Completed 200 OK in 1687ms (Views: 68.1ms | ActiveRecord: 1435.4ms | Allocations: 32562)


Started GET "/logout" for 127.0.0.1 at 2023-11-17 12:59:54 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 4ms (ActiveRecord: 0.0ms | Allocations: 419)


Started GET "/" for 127.0.0.1 at 2023-11-17 12:59:54 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (78.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:5
  Rendered categories/index.html.erb within layouts/application (Duration: 147.1ms | Allocations: 4467)
  Rendered layouts/_header.html.erb (Duration: 4.7ms | Allocations: 1027)
  Rendered layouts/_sidenav.html.erb (Duration: 6.7ms | Allocations: 2452)
  Rendered layout layouts/application.html.erb (Duration: 175.7ms | Allocations: 11783)
Completed 200 OK in 193ms (Views: 50.9ms | ActiveRecord: 127.4ms | Allocations: 13364)


Started GET "/login" for 127.0.0.1 at 2023-11-17 12:59:56 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 11.3ms | Allocations: 2841)
  Rendered layouts/_header.html.erb (Duration: 4.5ms | Allocations: 1002)
  Rendered layouts/_sidenav.html.erb (Duration: 7.3ms | Allocations: 2449)
  Rendered layout layouts/application.html.erb (Duration: 40.7ms | Allocations: 9929)
Completed 200 OK in 45ms (Views: 43.2ms | ActiveRecord: 0.0ms | Allocations: 10379)


Started POST "/login" for 127.0.0.1 at 2023-11-17 13:00:00 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"gari", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (318.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 519ms (ActiveRecord: 318.3ms | Allocations: 901)


Started GET "/" for 127.0.0.1 at 2023-11-17 13:00:01 +0100
Processing by CategoriesController#index as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (129.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:5
  Rendered categories/index.html.erb within layouts/application (Duration: 141.6ms | Allocations: 2734)
  Rendered layouts/_header.html.erb (Duration: 4.9ms | Allocations: 1041)
  [1m[36mUser Load (88.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (51.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 155.0ms | Allocations: 3928)
  Rendered layout layouts/application.html.erb (Duration: 320.0ms | Allocations: 11610)
Completed 200 OK in 322ms (Views: 52.0ms | ActiveRecord: 269.0ms | Allocations: 11917)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-17 13:00:02 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"gari"}
  [1m[36mUser Load (270.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (178.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (80.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (41.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (104.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 12:00:03.267844')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (44.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 12:00:03.377320')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (55.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 12:00:03.425947')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (58.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 14.8ms | Allocations: 2156)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1002)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (52.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 65.0ms | Allocations: 3786)
  Rendered layout layouts/application.html.erb (Duration: 95.5ms | Allocations: 10553)
Completed 200 OK in 957ms (Views: 44.8ms | ActiveRecord: 885.1ms | Allocations: 14914)


Started GET "/admin" for 127.0.0.1 at 2023-11-17 13:00:08 +0100
Processing by AdminController#dashboard as HTML
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 0.4ms | Allocations: 77)
  Rendered layouts/_header.html.erb (Duration: 2.8ms | Allocations: 1027)
  [1m[36mUser Load (123.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (185.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 326.3ms | Allocations: 3895)
  Rendered layout layouts/application.html.erb (Duration: 341.8ms | Allocations: 8991)
Completed 200 OK in 345ms (Views: 34.9ms | ActiveRecord: 308.7ms | Allocations: 9241)


Started GET "/logout" for 127.0.0.1 at 2023-11-17 13:00:18 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 4ms (ActiveRecord: 0.0ms | Allocations: 347)


Started GET "/" for 127.0.0.1 at 2023-11-17 13:00:18 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (330.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:5
  Rendered categories/index.html.erb within layouts/application (Duration: 342.2ms | Allocations: 2724)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1027)
  Rendered layouts/_sidenav.html.erb (Duration: 2.9ms | Allocations: 2450)
  Rendered layout layouts/application.html.erb (Duration: 360.7ms | Allocations: 9994)
Completed 200 OK in 364ms (Views: 32.3ms | ActiveRecord: 330.3ms | Allocations: 10255)


Started GET "/login" for 127.0.0.1 at 2023-11-17 13:00:20 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 6.4ms | Allocations: 2526)
  Rendered layouts/_header.html.erb (Duration: 3.0ms | Allocations: 1002)
  Rendered layouts/_sidenav.html.erb (Duration: 5.2ms | Allocations: 2449)
  Rendered layout layouts/application.html.erb (Duration: 23.2ms | Allocations: 9611)
Completed 200 OK in 26ms (Views: 24.5ms | ActiveRecord: 0.0ms | Allocations: 9874)


Started POST "/login" for 127.0.0.1 at 2023-11-17 13:00:27 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"Atreides", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (336.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 560ms (ActiveRecord: 336.1ms | Allocations: 833)


Started GET "/" for 127.0.0.1 at 2023-11-17 13:00:28 +0100
Processing by CategoriesController#index as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (744.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:5
  Rendered categories/index.html.erb within layouts/application (Duration: 748.9ms | Allocations: 2738)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1041)
  [1m[36mUser Load (810.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (656.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 1477.1ms | Allocations: 4431)
  Rendered layout layouts/application.html.erb (Duration: 2232.3ms | Allocations: 12110)
Completed 200 OK in 2235ms (Views: 22.7ms | ActiveRecord: 2210.8ms | Allocations: 12374)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-17 13:00:38 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (498.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (160.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (532.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (67.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (44.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 12:00:39.918639')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (62.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 12:00:39.966178')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (59.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 12:00:40.031910')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (37.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mRestaurant Load (518.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:49:in `show'
  [1m[36mReview Count (507.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 12:00:40.656493')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:50:in `block in show'
  [1m[36mDish Load (894.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:52:in `block in show'
  [1m[36mReview Count (51.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 12:00:42.063610')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:53:in `block (2 levels) in show'
  [1m[36mReaction Count (114.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:55:in `block in show'
  [1m[36mReaction Count (36.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 4.9ms | Allocations: 2146)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1006)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 8.8ms | Allocations: 4167)
  Rendered layout layouts/application.html.erb (Duration: 23.2ms | Allocations: 10928)
Completed 200 OK in 3646ms (Views: 23.9ms | ActiveRecord: 3584.4ms | Allocations: 18381)


Started GET "/logout" for 127.0.0.1 at 2023-11-17 13:01:30 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 3ms (ActiveRecord: 0.0ms | Allocations: 368)


Started GET "/" for 127.0.0.1 at 2023-11-17 13:01:30 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (227.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:5
  Rendered categories/index.html.erb within layouts/application (Duration: 240.5ms | Allocations: 2724)
  Rendered layouts/_header.html.erb (Duration: 2.7ms | Allocations: 1027)
  Rendered layouts/_sidenav.html.erb (Duration: 5.2ms | Allocations: 2449)
  Rendered layout layouts/application.html.erb (Duration: 266.2ms | Allocations: 10017)
Completed 200 OK in 269ms (Views: 40.6ms | ActiveRecord: 227.4ms | Allocations: 10278)


Started GET "/login" for 127.0.0.1 at 2023-11-17 13:01:32 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 6.1ms | Allocations: 2531)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1002)
  Rendered layouts/_sidenav.html.erb (Duration: 2.3ms | Allocations: 2449)
  Rendered layout layouts/application.html.erb (Duration: 15.7ms | Allocations: 9617)
Completed 200 OK in 17ms (Views: 16.6ms | ActiveRecord: 0.0ms | Allocations: 9879)


Started POST "/login" for 127.0.0.1 at 2023-11-17 13:01:37 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"gari", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (182.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 418ms (ActiveRecord: 182.7ms | Allocations: 833)


Started GET "/" for 127.0.0.1 at 2023-11-17 13:01:37 +0100
Processing by CategoriesController#index as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (195.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:5
  Rendered categories/index.html.erb within layouts/application (Duration: 200.7ms | Allocations: 2723)
  Rendered layouts/_header.html.erb (Duration: 4.6ms | Allocations: 1040)
  [1m[36mUser Load (131.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (94.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 246.5ms | Allocations: 3928)
  Rendered layout layouts/application.html.erb (Duration: 459.4ms | Allocations: 11500)
Completed 200 OK in 461ms (Views: 38.9ms | ActiveRecord: 421.6ms | Allocations: 11765)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-17 13:01:43 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"gari"}
  [1m[36mUser Load (131.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (96.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (102.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (96.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (104.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 12:01:43.790764')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (91.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 12:01:43.900527')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (208.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 12:01:43.993939')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (202.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 16.5ms | Allocations: 2157)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1015)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (205.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 221.5ms | Allocations: 3821)
  Rendered layout layouts/application.html.erb (Duration: 254.9ms | Allocations: 10627)
Completed 200 OK in 1323ms (Views: 51.5ms | ActiveRecord: 1238.7ms | Allocations: 14962)


Started GET "/admin" for 127.0.0.1 at 2023-11-17 13:01:45 +0100
Processing by AdminController#dashboard as HTML
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 0.7ms | Allocations: 77)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1027)
  [1m[36mUser Load (214.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (198.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 431.8ms | Allocations: 3892)
  Rendered layout layouts/application.html.erb (Duration: 448.9ms | Allocations: 8976)
Completed 200 OK in 452ms (Views: 37.4ms | ActiveRecord: 413.2ms | Allocations: 9227)


Started GET "/admin" for 127.0.0.1 at 2023-11-17 13:02:48 +0100
Processing by AdminController#index as HTML
  [1m[36mPost Count (101.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-17 12:02:48.229192')[0m
  â†³ app/controllers/admin_controller.rb:5:in `index'
  [1m[36mReview Count (95.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-17 12:02:48.610061')[0m
  â†³ app/controllers/admin_controller.rb:6:in `index'
  [1m[36mResponse Count (101.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-17 12:02:48.815366')[0m
  â†³ app/controllers/admin_controller.rb:7:in `index'
Completed 406 Not Acceptable in 793ms (ActiveRecord: 582.1ms | Allocations: 8781)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionController::MissingExactTemplate (AdminController#index is missing a template for request formats: text/html):
  
actionpack (7.1.1) lib/action_controller/metal/implicit_render.rb:47:in `default_render'
actionpack (7.1.1) lib/action_controller/metal/basic_implicit_render.rb:7:in `send_action'
actionpack (7.1.1) lib/abstract_controller/base.rb:224:in `process_action'
actionpack (7.1.1) lib/action_controller/metal/rendering.rb:165:in `process_action'
actionpack (7.1.1) lib/abstract_controller/callbacks.rb:259:in `block in process_action'
activesupport (7.1.1) lib/active_support/callbacks.rb:121:in `block in run_callbacks'
actiontext (7.1.1) lib/action_text/rendering.rb:23:in `with_renderer'
actiontext (7.1.1) lib/action_text/engine.rb:69:in `block (4 levels) in <class:Engine>'
activesupport (7.1.1) lib/active_support/callbacks.rb:130:in `instance_exec'
activesupport (7.1.1) lib/active_support/callbacks.rb:130:in `block in run_callbacks'
activesupport (7.1.1) lib/active_support/callbacks.rb:141:in `run_callbacks'
actionpack (7.1.1) lib/abstract_controller/callbacks.rb:258:in `process_action'
actionpack (7.1.1) lib/action_controller/metal/rescue.rb:25:in `process_action'
actionpack (7.1.1) lib/action_controller/metal/instrumentation.rb:74:in `block in process_action'
activesupport (7.1.1) lib/active_support/notifications.rb:206:in `block in instrument'
activesupport (7.1.1) lib/active_support/notifications/instrumenter.rb:58:in `instrument'
activesupport (7.1.1) lib/active_support/notifications.rb:206:in `instrument'
actionpack (7.1.1) lib/action_controller/metal/instrumentation.rb:73:in `process_action'
actionpack (7.1.1) lib/action_controller/metal/params_wrapper.rb:261:in `process_action'
activerecord (7.1.1) lib/active_record/railties/controller_runtime.rb:32:in `process_action'
actionpack (7.1.1) lib/abstract_controller/base.rb:160:in `process'
actionview (7.1.1) lib/action_view/rendering.rb:40:in `process'
actionpack (7.1.1) lib/action_controller/metal.rb:227:in `dispatch'
actionpack (7.1.1) lib/action_controller/metal.rb:309:in `dispatch'
actionpack (7.1.1) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.1.1) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.1.1) lib/action_dispatch/journey/router.rb:51:in `block in serve'
actionpack (7.1.1) lib/action_dispatch/journey/router.rb:131:in `block in find_routes'
actionpack (7.1.1) lib/action_dispatch/journey/router.rb:124:in `each'
actionpack (7.1.1) lib/action_dispatch/journey/router.rb:124:in `find_routes'
actionpack (7.1.1) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.1.1) lib/action_dispatch/routing/route_set.rb:882:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.8) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.0.8) lib/rack/etag.rb:29:in `call'
rack (3.0.8) lib/rack/conditional_get.rb:31:in `call'
rack (3.0.8) lib/rack/head.rb:15:in `call'
actionpack (7.1.1) lib/action_dispatch/http/permissions_policy.rb:36:in `call'
actionpack (7.1.1) lib/action_dispatch/http/content_security_policy.rb:33:in `call'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:272:in `context'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:266:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/cookies.rb:689:in `call'
activerecord (7.1.1) lib/active_record/migration.rb:653:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
activesupport (7.1.1) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.1.1) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/actionable_exceptions.rb:16:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (7.1.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (7.1.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (7.1.1) lib/active_support/tagged_logging.rb:135:in `block in tagged'
activesupport (7.1.1) lib/active_support/tagged_logging.rb:39:in `tagged'
activesupport (7.1.1) lib/active_support/tagged_logging.rb:135:in `tagged'
activesupport (7.1.1) lib/active_support/broadcast_logger.rb:232:in `method_missing'
railties (7.1.1) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/remote_ip.rb:92:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/request_id.rb:28:in `call'
rack (3.0.8) lib/rack/method_override.rb:28:in `call'
rack (3.0.8) lib/rack/runtime.rb:24:in `call'
activesupport (7.1.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/server_timing.rb:59:in `block in call'
actionpack (7.1.1) lib/action_dispatch/middleware/server_timing.rb:24:in `collect_events'
actionpack (7.1.1) lib/action_dispatch/middleware/server_timing.rb:58:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.8) lib/rack/sendfile.rb:114:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/host_authorization.rb:141:in `call'
railties (7.1.1) lib/rails/engine.rb:529:in `call'
puma (6.4.0) lib/puma/configuration.rb:272:in `call'
puma (6.4.0) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.0) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.0) lib/puma/request.rb:99:in `handle_request'
puma (6.4.0) lib/puma/server.rb:443:in `process_client'
puma (6.4.0) lib/puma/server.rb:241:in `block in run'
puma (6.4.0) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
Started GET "/admin" for 127.0.0.1 at 2023-11-17 13:02:59 +0100
Processing by AdminController#dashboard as HTML
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 0.8ms | Allocations: 357)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1303)
  [1m[36mUser Load (94.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (201.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 1210.7ms | Allocations: 17135)
  Rendered layout layouts/application.html.erb (Duration: 1227.7ms | Allocations: 37755)
Completed 200 OK in 1229ms (Views: 248.4ms | ActiveRecord: 980.7ms | Allocations: 38500)


Started GET "/admin" for 127.0.0.1 at 2023-11-17 13:04:19 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (197.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-17 12:04:19.354717')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (79.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-17 12:04:19.963152')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (54.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-17 12:04:20.348284')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 0.7ms | Allocations: 364)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1295)
  [1m[36mUser Load (147.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (37.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 1293.2ms | Allocations: 16867)
  Rendered layout layouts/application.html.erb (Duration: 1309.0ms | Allocations: 37312)
Completed 200 OK in 2465ms (Views: 60.8ms | ActiveRecord: 2165.9ms | Allocations: 46196)


Started GET "/admin" for 127.0.0.1 at 2023-11-17 13:04:33 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (50.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-17 12:04:33.923996')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (243.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-17 12:04:34.216052')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (101.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-17 12:04:34.534273')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 2.2ms | Allocations: 365)
  Rendered layouts/_header.html.erb (Duration: 3.0ms | Allocations: 1306)
  [1m[36mUser Load (79.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (74.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 789.9ms | Allocations: 16899)
  Rendered layout layouts/application.html.erb (Duration: 843.6ms | Allocations: 37479)
Completed 200 OK in 1716ms (Views: 106.0ms | ActiveRecord: 1392.5ms | Allocations: 46324)


Started GET "/admin" for 127.0.0.1 at 2023-11-17 13:06:11 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (53.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-17 12:06:11.416810')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (581.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-17 12:06:11.788611')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (175.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-17 12:06:12.427314')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (172.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE (created_at > '2023-10-17 12:06:12.809632')[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
Completed 500 Internal Server Error in 1738ms (ActiveRecord: 1455.2ms | Allocations: 13278)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::StatementInvalid (PG::UndefinedColumn: ERROR:  column "created_at" does not exist
LINE 1: SELECT COUNT(*) FROM "users" WHERE (created_at > '2023-10-17...
                                            ^
):
  
Started GET "/admin" for 127.0.0.1 at 2023-11-17 13:06:45 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (71.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-17 12:06:45.596343')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (156.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-17 12:06:45.817352')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (53.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-17 12:06:46.051041')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (150.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 1.0ms | Allocations: 369)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1303)
  [1m[36mUser Load (199.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (45.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 591.6ms | Allocations: 12882)
  Rendered layout layouts/application.html.erb (Duration: 610.7ms | Allocations: 33458)
Completed 200 OK in 1719ms (Views: 76.7ms | ActiveRecord: 1511.0ms | Allocations: 46751)


Started GET "/logout" for 127.0.0.1 at 2023-11-17 13:10:35 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 435)


Started GET "/" for 127.0.0.1 at 2023-11-17 13:10:35 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (200.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:5
  Rendered categories/index.html.erb within layouts/application (Duration: 254.0ms | Allocations: 4467)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1027)
  Rendered layouts/_sidenav.html.erb (Duration: 2.7ms | Allocations: 2452)
  Rendered layout layouts/application.html.erb (Duration: 262.3ms | Allocations: 11765)
Completed 200 OK in 267ms (Views: 16.5ms | ActiveRecord: 246.6ms | Allocations: 13346)


Started GET "/login" for 127.0.0.1 at 2023-11-17 13:10:38 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 5.0ms | Allocations: 2846)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1016)
  Rendered layouts/_sidenav.html.erb (Duration: 2.7ms | Allocations: 2484)
  Rendered layout layouts/application.html.erb (Duration: 14.3ms | Allocations: 10017)
Completed 200 OK in 16ms (Views: 15.3ms | ActiveRecord: 0.0ms | Allocations: 10468)


Started POST "/login" for 127.0.0.1 at 2023-11-17 13:10:45 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"Atreides", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (42.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 232ms (ActiveRecord: 42.0ms | Allocations: 868)


Started GET "/" for 127.0.0.1 at 2023-11-17 13:10:45 +0100
Processing by CategoriesController#index as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (274.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:5
  Rendered categories/index.html.erb within layouts/application (Duration: 281.8ms | Allocations: 2734)
  Rendered layouts/_header.html.erb (Duration: 3.2ms | Allocations: 1027)
  [1m[36mUser Load (52.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (37.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 118.1ms | Allocations: 7251)
  Rendered layout layouts/application.html.erb (Duration: 416.1ms | Allocations: 14876)
Completed 200 OK in 418ms (Views: 53.6ms | ActiveRecord: 363.5ms | Allocations: 15184)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-17 13:10:48 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (62.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (111.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (43.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (53.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (51.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 12:10:48.884888')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (70.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 12:10:48.938656')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (75.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 12:10:49.011753')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (104.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mRestaurant Load (40.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:49:in `show'
  [1m[36mReview Count (69.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 12:10:49.241200')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:50:in `block in show'
  [1m[36mDish Load (42.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:52:in `block in show'
  [1m[36mReview Count (222.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 12:10:49.510196')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:53:in `block (2 levels) in show'
  [1m[36mReaction Count (115.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:55:in `block in show'
  [1m[36mReaction Count (126.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 16.7ms | Allocations: 2977)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1002)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 10.5ms | Allocations: 4172)
  Rendered layout layouts/application.html.erb (Duration: 41.9ms | Allocations: 11764)
Completed 200 OK in 1594ms (Views: 44.6ms | ActiveRecord: 1488.2ms | Allocations: 26178)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-17 13:12:17 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (44.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (39.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (150.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (67.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (42.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 12:12:18.966927')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (60.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 12:12:19.012131')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (98.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 12:12:19.075326')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (63.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mRestaurant Load (97.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:49:in `show'
  [1m[36mReview Count (53.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 12:12:19.618857')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:50:in `block in show'
  [1m[36mDish Load (228.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:52:in `block in show'
  [1m[36mReview Count (163.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 12:12:20.060166')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:53:in `block (2 levels) in show'
  [1m[36mReaction Count (47.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:55:in `block in show'
  [1m[36mReaction Count (81.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 12.1ms | Allocations: 3078)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1265)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 9.5ms | Allocations: 4923)
  Rendered layout layouts/application.html.erb (Duration: 46.9ms | Allocations: 27711)
Completed 200 OK in 2597ms (Views: 50.4ms | ActiveRecord: 2280.3ms | Allocations: 63510)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-17 13:13:18 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (191.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (86.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (85.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (35.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (85.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 12:13:20.665152')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (65.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 12:13:20.752146')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (61.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 12:13:20.819487')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (72.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mRestaurant Load (54.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:49:in `show'
  [1m[36mReview Count (197.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 12:13:21.237234')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:50:in `block in show'
  [1m[36mDish Load (66.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:52:in `block in show'
  [1m[36mReview Count (42.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 12:13:21.918076')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:53:in `block (2 levels) in show'
  [1m[36mReaction Count (44.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:55:in `block in show'
  [1m[36mReaction Count (82.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 6.5ms | Allocations: 3083)
  Rendered layouts/_header.html.erb (Duration: 2.6ms | Allocations: 1265)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 9.6ms | Allocations: 4923)
  Rendered layout layouts/application.html.erb (Duration: 41.3ms | Allocations: 27716)
Completed 200 OK in 3449ms (Views: 43.6ms | ActiveRecord: 2697.5ms | Allocations: 63428)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-17 13:13:40 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (36.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (52.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (38.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (49.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (37.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 12:13:40.781848')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (36.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 12:13:40.821074')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (45.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 12:13:40.858634')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (39.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mRestaurant Load (35.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:49:in `show'
  [1m[36mReview Count (42.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 12:13:41.133453')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:50:in `block in show'
  [1m[36mDish Load (51.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:52:in `block in show'
  [1m[36mReview Count (144.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 12:13:41.320769')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:53:in `block (2 levels) in show'
  [1m[36mReaction Count (155.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:55:in `block in show'
  [1m[36mReaction Count (53.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 4.3ms | Allocations: 3087)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1265)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 6.0ms | Allocations: 4923)
  Rendered layout layouts/application.html.erb (Duration: 25.9ms | Allocations: 27720)
Completed 200 OK in 1685ms (Views: 28.2ms | ActiveRecord: 1402.7ms | Allocations: 63436)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-17 13:14:51 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (36.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (47.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (50.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (42.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (35.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 12:14:52.244417')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (49.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 12:14:52.281972')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (137.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 12:14:52.333959')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (37.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mRestaurant Load (53.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:49:in `show'
  [1m[36mReview Count (57.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 12:14:52.977539')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:50:in `block in show'
  [1m[36mDish Load (45.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:52:in `block in show'
  [1m[36mReview Count (55.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 12:14:53.212585')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:53:in `block (2 levels) in show'
  [1m[36mReaction Count (49.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:55:in `block in show'
  [1m[36mReaction Count (38.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 12.8ms | Allocations: 3080)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1265)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 6.2ms | Allocations: 4923)
  Rendered layout layouts/application.html.erb (Duration: 77.8ms | Allocations: 39307)
Completed 200 OK in 1847ms (Views: 81.9ms | ActiveRecord: 1490.6ms | Allocations: 74967)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-17 13:15:03 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (36.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (36.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (58.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (43.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (45.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 12:15:03.790564')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (44.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 12:15:03.837318')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (136.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 12:15:03.883239')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (140.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mRestaurant Load (143.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:49:in `show'
  [1m[36mReview Count (44.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 12:15:04.316252')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:50:in `block in show'
  [1m[36mDish Load (36.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:52:in `block in show'
  [1m[36mReview Count (44.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 12:15:04.403278')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:53:in `block (2 levels) in show'
  [1m[36mReaction Count (50.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:55:in `block in show'
  [1m[36mReaction Count (42.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 6.3ms | Allocations: 2146)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1016)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 5.9ms | Allocations: 4209)
  Rendered layout layouts/application.html.erb (Duration: 43.6ms | Allocations: 17503)
Completed 200 OK in 990ms (Views: 44.4ms | ActiveRecord: 904.5ms | Allocations: 24970)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-17 13:15:40 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (129.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (98.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (97.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (104.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (101.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 12:15:40.649312')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (146.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 12:15:40.754072')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (201.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 12:15:40.904717')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (201.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mRestaurant Load (203.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:49:in `show'
  [1m[36mReview Count (100.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 12:15:41.520943')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:50:in `block in show'
  [1m[36mDish Load (94.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:52:in `block in show'
  [1m[36mReview Count (99.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 12:15:41.723557')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:53:in `block (2 levels) in show'
  [1m[36mReaction Count (97.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:55:in `block in show'
  [1m[36mReaction Count (98.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 10.8ms | Allocations: 2125)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1002)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 10.7ms | Allocations: 4168)
  Rendered layout layouts/application.html.erb (Duration: 68.8ms | Allocations: 17386)
Completed 200 OK in 1893ms (Views: 70.1ms | ActiveRecord: 1774.4ms | Allocations: 24838)


Started GET "/categories" for 127.0.0.1 at 2023-11-17 13:41:00 +0100
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::ConnectionNotEstablished (connection to server on socket "/var/run/postgresql/.s.PGSQL.5432" failed: FATAL:  role "dani" does not exist
):
  
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:80:in `rescue in new_client'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:68:in `new_client'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:981:in `connect'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:993:in `reconnect'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:685:in `block in reconnect!'
activesupport (7.1.1) lib/active_support/concurrency/null_lock.rb:9:in `synchronize'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:684:in `reconnect!'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:788:in `verify!'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:795:in `connect!'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:997:in `block in with_raw_connection'
activesupport (7.1.1) lib/active_support/concurrency/null_lock.rb:9:in `synchronize'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:996:in `with_raw_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:1104:in `valid_raw_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:619:in `get_database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/schema_cache.rb:374:in `database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/schema_cache.rb:70:in `database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/schema_cache.rb:200:in `database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract_adapter.rb:871:in `database_version'
activerecord (7.1.1) lib/active_record/connection_adapters/postgresql_adapter.rb:647:in `check_version'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:675:in `new_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:720:in `checkout_new_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:699:in `try_to_checkout_new_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:657:in `acquire_connection'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:355:in `checkout'
activerecord (7.1.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:184:in `connection'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:501:in `block in with_temporary_connection'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:518:in `with_temporary_pool'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:500:in `with_temporary_connection'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:494:in `block in with_temporary_connection_for_each'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:493:in `each'
activerecord (7.1.1) lib/active_record/tasks/database_tasks.rb:493:in `with_temporary_connection_for_each'
activerecord (7.1.1) lib/active_record/migration.rb:771:in `pending_migrations'
activerecord (7.1.1) lib/active_record/migration.rb:750:in `check_pending_migrations'
activerecord (7.1.1) lib/active_record/migration.rb:642:in `block (2 levels) in call'
activesupport (7.1.1) lib/active_support/file_update_checker.rb:85:in `execute'
activerecord (7.1.1) lib/active_record/migration.rb:647:in `block in call'
activerecord (7.1.1) lib/active_record/migration.rb:639:in `synchronize'
activerecord (7.1.1) lib/active_record/migration.rb:639:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
activesupport (7.1.1) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.1.1) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/actionable_exceptions.rb:16:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (7.1.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (7.1.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (7.1.1) lib/active_support/tagged_logging.rb:135:in `block in tagged'
activesupport (7.1.1) lib/active_support/tagged_logging.rb:39:in `tagged'
activesupport (7.1.1) lib/active_support/tagged_logging.rb:135:in `tagged'
activesupport (7.1.1) lib/active_support/broadcast_logger.rb:232:in `method_missing'
railties (7.1.1) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/remote_ip.rb:92:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/request_id.rb:28:in `call'
rack (3.0.8) lib/rack/method_override.rb:28:in `call'
rack (3.0.8) lib/rack/runtime.rb:24:in `call'
activesupport (7.1.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/server_timing.rb:59:in `block in call'
actionpack (7.1.1) lib/action_dispatch/middleware/server_timing.rb:24:in `collect_events'
actionpack (7.1.1) lib/action_dispatch/middleware/server_timing.rb:58:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.8) lib/rack/sendfile.rb:114:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/host_authorization.rb:141:in `call'
railties (7.1.1) lib/rails/engine.rb:529:in `call'
puma (6.4.0) lib/puma/configuration.rb:272:in `call'
puma (6.4.0) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.0) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.0) lib/puma/request.rb:99:in `handle_request'
puma (6.4.0) lib/puma/server.rb:443:in `process_client'
puma (6.4.0) lib/puma/server.rb:241:in `block in run'
puma (6.4.0) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
Started GET "/categories" for 127.0.0.1 at 2023-11-17 13:41:39 +0100
  [1m[36mActiveRecord::SchemaMigration Load (93.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (129.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:5
  Rendered categories/index.html.erb within layouts/application (Duration: 561.0ms | Allocations: 63653)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1326)
  [1m[36mUser Load (102.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (103.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 1513.6ms | Allocations: 34043)
  Rendered layout layouts/application.html.erb (Duration: 2102.4ms | Allocations: 119119)
Completed 200 OK in 2136ms (Views: 760.8ms | ActiveRecord: 1345.1ms | Allocations: 130559)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-17 13:41:50 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (216.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (200.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (102.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (99.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (101.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 12:41:51.970404')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (98.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 12:41:52.075546')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (97.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 12:41:52.177843')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (98.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mRestaurant Load (102.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:49:in `show'
  [1m[36mReview Count (198.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 12:41:52.486494')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:50:in `block in show'
  [1m[36mDish Load (102.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:52:in `block in show'
  [1m[36mReview Count (101.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 12:41:53.358506')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:53:in `block (2 levels) in show'
  [1m[36mReaction Count (100.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:55:in `block in show'
  [1m[36mReaction Count (97.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 19.4ms | Allocations: 3772)
  Rendered layouts/_header.html.erb (Duration: 2.6ms | Allocations: 1002)
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 10.1ms | Allocations: 4172)
  Rendered layout layouts/application.html.erb (Duration: 42.1ms | Allocations: 12559)
Completed 200 OK in 3032ms (Views: 44.8ms | ActiveRecord: 2672.2ms | Allocations: 37811)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-17 13:42:58 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (191.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (99.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (99.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (99.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (100.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 12:42:59.867936')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (97.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 12:42:59.972093')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (200.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 12:43:00.073836')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (101.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mRestaurant Load (104.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:49:in `show'
  [1m[36mReview Count (86.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 12:43:01.058124')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:50:in `block in show'
  [1m[36mDish Load (99.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:52:in `block in show'
  [1m[36mReview Count (85.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 12:43:01.469481')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:53:in `block (2 levels) in show'
  [1m[36mReaction Count (149.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:55:in `block in show'
  [1m[36mReaction Count (199.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 11.4ms | Allocations: 3084)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1263)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 5.9ms | Allocations: 4917)
  Rendered layout layouts/application.html.erb (Duration: 42.0ms | Allocations: 27772)
Completed 200 OK in 3593ms (Views: 45.8ms | ActiveRecord: 3135.8ms | Allocations: 63561)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-17 13:44:08 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (106.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (98.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (101.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (97.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (99.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 12:44:09.411434')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (94.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 12:44:09.516849')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (99.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 12:44:09.615462')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (97.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mRestaurant Load (261.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:49:in `show'
  [1m[36mReview Count (405.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 12:44:10.083718')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:50:in `block in show'
  [1m[36mDish Load (193.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:52:in `block in show'
  [1m[36mReview Count (97.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 12:44:10.692542')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:53:in `block (2 levels) in show'
  [1m[36mReaction Count (98.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:55:in `block in show'
  [1m[36mReaction Count (98.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 13.4ms | Allocations: 2146)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1014)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 6.0ms | Allocations: 4203)
  Rendered layout layouts/application.html.erb (Duration: 61.9ms | Allocations: 17821)
Completed 200 OK in 2069ms (Views: 63.2ms | ActiveRecord: 1949.3ms | Allocations: 25294)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-17 13:46:25 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (125.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (98.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (98.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (98.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (99.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 12:46:25.735607')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (202.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 12:46:25.837650')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (201.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 12:46:26.043474')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (199.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mRestaurant Load (98.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:49:in `show'
  [1m[36mReview Count (100.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 12:46:26.553604')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:50:in `block in show'
  [1m[36mDish Load (101.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:52:in `block in show'
  [1m[36mReview Count (97.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 12:46:26.761395')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:53:in `block (2 levels) in show'
  [1m[36mReaction Count (98.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:55:in `block in show'
  [1m[36mReaction Count (105.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 7.4ms | Allocations: 2125)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1002)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 5.7ms | Allocations: 4167)
  Rendered layout layouts/application.html.erb (Duration: 52.9ms | Allocations: 17400)
Completed 200 OK in 1828ms (Views: 53.9ms | ActiveRecord: 1724.9ms | Allocations: 24863)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-17 13:46:42 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (94.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (103.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (99.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (97.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (102.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 12:46:42.581029')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (202.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 12:46:42.685765')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (100.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 12:46:42.891757')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (96.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mRestaurant Load (199.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:49:in `show'
  [1m[36mReview Count (203.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 12:46:43.298648')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:50:in `block in show'
  [1m[36mDish Load (193.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:52:in `block in show'
  [1m[36mReview Count (98.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 12:46:43.711021')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:53:in `block (2 levels) in show'
  [1m[36mReaction Count (98.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:55:in `block in show'
  [1m[36mReaction Count (98.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 6.7ms | Allocations: 2146)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1014)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 5.3ms | Allocations: 4203)
  Rendered layout layouts/application.html.erb (Duration: 38.0ms | Allocations: 17533)
Completed 200 OK in 1876ms (Views: 38.7ms | ActiveRecord: 1787.6ms | Allocations: 24996)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-17 13:47:25 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (180.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (212.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (96.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (89.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (99.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 12:47:26.111055')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (99.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 12:47:26.213663')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (98.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 12:47:26.317271')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (94.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mRestaurant Load (100.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:49:in `show'
  [1m[36mReview Count (101.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 12:47:26.621613')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:50:in `block in show'
  [1m[36mDish Load (101.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:52:in `block in show'
  [1m[36mReview Count (201.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 12:47:26.828571')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:53:in `block (2 levels) in show'
  [1m[36mReaction Count (200.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:55:in `block in show'
  [1m[36mReaction Count (201.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 12.4ms | Allocations: 2143)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1002)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 9.7ms | Allocations: 4167)
  Rendered layout layouts/application.html.erb (Duration: 66.3ms | Allocations: 17419)
Completed 200 OK in 1994ms (Views: 67.7ms | ActiveRecord: 1878.9ms | Allocations: 24917)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-17 13:49:34 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (116.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (104.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (95.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (102.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (96.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 12:49:34.594981')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (98.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 12:49:34.694705')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (98.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 12:49:34.797353')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (198.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mRestaurant Load (205.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:49:in `show'
  [1m[36mReview Count (264.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 12:49:35.311957')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:50:in `block in show'
  [1m[36mDish Load (85.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:52:in `block in show'
  [1m[36mReview Count (98.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 12:49:35.667372')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:53:in `block (2 levels) in show'
  [1m[36mReaction Count (99.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:55:in `block in show'
  [1m[36mReaction Count (101.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 2.4ms | Allocations: 2126)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1014)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 6.1ms | Allocations: 4204)
  Rendered layout layouts/application.html.erb (Duration: 15.0ms | Allocations: 10971)
Completed 200 OK in 1826ms (Views: 15.4ms | ActiveRecord: 1766.1ms | Allocations: 18435)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-17 13:50:47 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (196.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (142.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (85.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (100.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (100.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 12:50:48.173784')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (101.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 12:50:48.276129')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (102.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 12:50:48.380078')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (95.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mRestaurant Load (200.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:49:in `show'
  [1m[36mReview Count (157.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 12:50:48.788330')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:50:in `block in show'
  [1m[36mDish Load (197.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:52:in `block in show'
  [1m[36mReview Count (97.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 12:50:49.150065')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:53:in `block (2 levels) in show'
  [1m[36mReaction Count (98.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:55:in `block in show'
  [1m[36mReaction Count (101.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 12.2ms | Allocations: 2145)
  Rendered layouts/_header.html.erb (Duration: 2.6ms | Allocations: 1014)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 8.0ms | Allocations: 4203)
  Rendered layout layouts/application.html.erb (Duration: 58.6ms | Allocations: 17517)
Completed 200 OK in 1884ms (Views: 60.1ms | ActiveRecord: 1778.0ms | Allocations: 24997)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-17 13:51:04 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (87.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (101.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (100.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (99.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (100.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 12:51:04.459440')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (100.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 12:51:04.561908')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (100.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 12:51:04.664003')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (203.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mRestaurant Load (200.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:49:in `show'
  [1m[36mReview Count (203.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 12:51:05.175503')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:50:in `block in show'
  [1m[36mDish Load (102.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:52:in `block in show'
  [1m[36mReview Count (97.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 12:51:05.485657')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:53:in `block (2 levels) in show'
  [1m[36mReaction Count (104.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:55:in `block in show'
  [1m[36mReaction Count (98.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 7.1ms | Allocations: 2125)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1002)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 9.3ms | Allocations: 4167)
  Rendered layout layouts/application.html.erb (Duration: 64.3ms | Allocations: 17385)
Completed 200 OK in 1797ms (Views: 65.4ms | ActiveRecord: 1698.6ms | Allocations: 24823)


Started GET "/" for ::1 at 2023-11-17 13:53:35 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
Started GET "/" for 127.0.0.1 at 2023-11-17 16:42:38 +0100
  [1m[36mActiveRecord::SchemaMigration Load (25.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (25.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:5
  Rendered categories/index.html.erb within layouts/application (Duration: 1077.4ms | Allocations: 121225)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1326)
  Rendered layouts/_sidenav.html.erb (Duration: 2.3ms | Allocations: 3205)
  Rendered layout layouts/application.html.erb (Duration: 1126.1ms | Allocations: 144673)
Completed 200 OK in 1215ms (Views: 1052.1ms | ActiveRecord: 77.5ms | Allocations: 156112)


Started GET "/" for 127.0.0.1 at 2023-11-17 16:51:00 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  Rendered categories/index.html.erb within layouts/application (Duration: 18.5ms | Allocations: 1611)
  Rendered layout layouts/application.html.erb (Duration: 18.7ms | Allocations: 1715)
Completed 500 Internal Server Error in 22ms (ActiveRecord: 0.0ms | Allocations: 4042)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <div class="title_container">
  <h1 class="title"><span class="title_key_word">CategorÃ­as</span> de conversaciÃ³n</h1>
</div>
<ul class="categories_list">
  <% @categories.each do |category| %>
    <li>
      <%= link_to category_path(category) do %>
        <div class="category_box">
          <% if category.ruta_img.present? do %>
            <%= image_tag category.ruta_img, class: "category_image" %>
          <% else %>
            <%= image_tag "burger-category", class: "category_image" %>
          <% end %>
          <div class="category_name"><%= category.nombre %></div>
        </div>
      <% end %>
    </li>
  <% end %>
</ul>


):
1:    <div class="title_container">
2:      <h1 class="title"><span class="title_key_word">CategorÃ­as</span> de conversaciÃ³n</h1>
3:    </div>
4:    <ul class="categories_list">
5:      <% @categories.each do |category| %>
6:        <li>
7:          <%= link_to category_path(category) do %>
8:            <div class="category_box">
9:              <% if category.ruta_img.present? do %>
10:                <%= image_tag category.ruta_img, class: "category_image" %>
11:              <% else %>
12:                <%= image_tag "burger-category", class: "category_image" %>
13:              <% end %>
14:              <div class="category_name"><%= category.nombre %></div>
15:            </div>
16:          <% end %>
17:        </li>
18:      <% end %>
19:    </ul>
  
app/views/categories/index.html.erb:11: else without rescue is useless
app/views/categories/index.html.erb:23: syntax error, unexpected end-of-input
Started GET "/" for 127.0.0.1 at 2023-11-17 16:51:36 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (524.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:5
  Rendered categories/index.html.erb within layouts/application (Duration: 528.0ms | Allocations: 7673)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1295)
  Rendered layouts/_sidenav.html.erb (Duration: 2.0ms | Allocations: 3181)
  Rendered layout layouts/application.html.erb (Duration: 541.5ms | Allocations: 30880)
Completed 200 OK in 545ms (Views: -186.4ms | ActiveRecord: 728.9ms | Allocations: 33169)


Started GET "/login" for 127.0.0.1 at 2023-11-17 16:52:43 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 38.3ms | Allocations: 3088)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1002)
  Rendered layouts/_sidenav.html.erb (Duration: 1.9ms | Allocations: 2450)
  Rendered layout layouts/application.html.erb (Duration: 44.9ms | Allocations: 10178)
Completed 200 OK in 131ms (Views: 45.4ms | ActiveRecord: 28.4ms | Allocations: 19080)


Started POST "/login" for 127.0.0.1 at 2023-11-17 16:52:47 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"gari", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (26.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 289ms (ActiveRecord: 77.6ms | Allocations: 2585)


Started GET "/" for 127.0.0.1 at 2023-11-17 16:52:47 +0100
Processing by CategoriesController#index as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (49.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:5
  Rendered categories/index.html.erb within layouts/application (Duration: 57.6ms | Allocations: 2727)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1039)
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 258.4ms | Allocations: 13735)
  Rendered layout layouts/application.html.erb (Duration: 320.8ms | Allocations: 21426)
Completed 200 OK in 321ms (Views: 118.1ms | ActiveRecord: 203.1ms | Allocations: 21735)


Started GET "/" for 127.0.0.1 at 2023-11-17 17:07:36 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (611.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:8
  Rendered categories/index.html.erb within layouts/application (Duration: 615.5ms | Allocations: 7755)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1295)
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 143.1ms | Allocations: 16162)
  Rendered layout layouts/application.html.erb (Duration: 768.3ms | Allocations: 43946)
Completed 200 OK in 772ms (Views: -120.4ms | ActiveRecord: 889.5ms | Allocations: 46226)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:07:40 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 13.5ms | Allocations: 1374)
  Rendered categories/new.html.erb within layouts/application (Duration: 27.2ms | Allocations: 1612)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1026)
  [1m[36mUser Load (24.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 51.7ms | Allocations: 3894)
  Rendered layout layouts/application.html.erb (Duration: 81.8ms | Allocations: 10330)
Completed 200 OK in 97ms (Views: 33.6ms | ActiveRecord: 48.5ms | Allocations: 10665)


Started GET "/" for 127.0.0.1 at 2023-11-17 17:08:54 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (50.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:8
  Rendered categories/index.html.erb within layouts/application (Duration: 107.0ms | Allocations: 4783)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1295)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 197.4ms | Allocations: 16759)
  Rendered layout layouts/application.html.erb (Duration: 321.4ms | Allocations: 48026)
Completed 200 OK in 325ms (Views: 41.0ms | ActiveRecord: 281.2ms | Allocations: 50310)


Started GET "/" for 127.0.0.1 at 2023-11-17 17:09:05 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (50.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:8
  Rendered categories/index.html.erb within layouts/application (Duration: 52.6ms | Allocations: 2753)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1039)
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 55.1ms | Allocations: 3921)
  Rendered layout layouts/application.html.erb (Duration: 121.4ms | Allocations: 18003)
Completed 200 OK in 122ms (Views: 20.2ms | ActiveRecord: 101.5ms | Allocations: 18264)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:09:13 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 1.0ms | Allocations: 950)
  Rendered categories/new.html.erb within layouts/application (Duration: 1.6ms | Allocations: 1187)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1026)
  [1m[36mUser Load (91.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 120.1ms | Allocations: 3911)
  Rendered layout layouts/application.html.erb (Duration: 124.9ms | Allocations: 9926)
Completed 200 OK in 126ms (Views: 8.8ms | ActiveRecord: 116.4ms | Allocations: 10265)


Started GET "/" for 127.0.0.1 at 2023-11-17 17:11:11 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (26.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 165.1ms | Allocations: 10777)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1298)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 115.0ms | Allocations: 11332)
  Rendered layout layouts/application.html.erb (Duration: 293.9ms | Allocations: 41897)
Completed 200 OK in 297ms (Views: 66.6ms | ActiveRecord: 228.1ms | Allocations: 44188)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-17 17:11:13 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"gari"}
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (26.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (26.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (26.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 16:11:13.854514')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (24.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 16:11:13.879858')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 16:11:13.905141')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 3.2ms | Allocations: 3089)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1002)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.0ms | Allocations: 3822)
  Rendered layout layouts/application.html.erb (Duration: 34.1ms | Allocations: 11540)
Completed 200 OK in 352ms (Views: 10.3ms | ActiveRecord: 301.4ms | Allocations: 22929)


Started GET "/logout" for 127.0.0.1 at 2023-11-17 17:11:17 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 440)


Started GET "/" for 127.0.0.1 at 2023-11-17 17:11:17 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  Rendered categories/index.html.erb within layouts/application (Duration: 0.3ms | Allocations: 1246)
  Rendered layout layouts/application.html.erb (Duration: 0.5ms | Allocations: 1338)
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 1589)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (Couldn't find User without an ID):
    1: <div class="title_container categories_title_container">
    2:   <h1 class="title"><span class="title_key_word">CategorÃ­as</span> de conversaciÃ³n</h1>
    3:   <% if getCurrentUser.esAdmin %>
    4:     <%= link_to new_category_path, class: "categories_new_button" do %>
    5:       <div>AÃ±adir</div>
    6:     <% end %>
  
app/helpers/application_helper.rb:3:in `getCurrentUser'
app/views/categories/index.html.erb:3
Started GET "/logout" for 127.0.0.1 at 2023-11-17 17:13:58 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 655)


Started GET "/" for 127.0.0.1 at 2023-11-17 17:13:58 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (51.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 106.4ms | Allocations: 5011)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1295)
  Rendered layouts/_sidenav.html.erb (Duration: 2.8ms | Allocations: 3179)
  Rendered layout layouts/application.html.erb (Duration: 118.9ms | Allocations: 28008)
Completed 200 OK in 122ms (Views: 16.4ms | ActiveRecord: 102.9ms | Allocations: 30073)


Started GET "/login" for 127.0.0.1 at 2023-11-17 17:14:02 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 2.0ms | Allocations: 2859)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1002)
  Rendered layouts/_sidenav.html.erb (Duration: 1.5ms | Allocations: 2449)
  Rendered layout layouts/application.html.erb (Duration: 6.6ms | Allocations: 9948)
Completed 200 OK in 40ms (Views: 7.2ms | ActiveRecord: 24.9ms | Allocations: 15506)


Started POST "/login" for 127.0.0.1 at 2023-11-17 17:14:09 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"Atreides", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (26.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 193ms (ActiveRecord: 26.1ms | Allocations: 1091)


Started GET "/" for 127.0.0.1 at 2023-11-17 17:14:09 +0100
Processing by CategoriesController#index as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (23.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (45.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 71.9ms | Allocations: 3367)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1039)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 128.1ms | Allocations: 20089)
  Rendered layout layouts/application.html.erb (Duration: 203.8ms | Allocations: 28201)
Completed 200 OK in 204ms (Views: 32.8ms | ActiveRecord: 171.2ms | Allocations: 28509)


Started GET "/login" for 127.0.0.1 at 2023-11-17 17:14:13 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 1.9ms | Allocations: 2536)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1014)
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.0ms | Allocations: 4407)
  Rendered layout layouts/application.html.erb (Duration: 58.8ms | Allocations: 11644)
Completed 200 OK in 59ms (Views: 10.0ms | ActiveRecord: 49.1ms | Allocations: 11907)


Started GET "/" for 127.0.0.1 at 2023-11-17 17:14:18 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (25.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 52.8ms | Allocations: 3361)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1027)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.8ms | Allocations: 4283)
  Rendered layout layouts/application.html.erb (Duration: 84.6ms | Allocations: 12281)
Completed 200 OK in 85ms (Views: 9.7ms | ActiveRecord: 75.2ms | Allocations: 12543)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-17 17:14:19 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 16:14:19.563181')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 16:14:19.591766')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 16:14:19.618161')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (25.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:49:in `show'
  [1m[36mReview Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 16:14:19.702500')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:50:in `block in show'
  [1m[36mDish Load (25.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:52:in `block in show'
  [1m[36mReview Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 16:14:19.975439')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:53:in `block (2 levels) in show'
  [1m[36mReaction Count (24.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:55:in `block in show'
  [1m[36mReaction Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 2.7ms | Allocations: 2989)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1014)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 4.0ms | Allocations: 4208)
  Rendered layout layouts/application.html.erb (Duration: 9.4ms | Allocations: 11877)
Completed 200 OK in 732ms (Views: 9.8ms | ActiveRecord: 502.1ms | Allocations: 36676)


Started GET "/logout" for 127.0.0.1 at 2023-11-17 17:14:20 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 353)


Started GET "/" for 127.0.0.1 at 2023-11-17 17:14:20 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (50.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 52.7ms | Allocations: 2933)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1039)
  Rendered layouts/_sidenav.html.erb (Duration: 1.5ms | Allocations: 2478)
  Rendered layout layouts/application.html.erb (Duration: 57.4ms | Allocations: 10109)
Completed 200 OK in 58ms (Views: 7.5ms | ActiveRecord: 50.1ms | Allocations: 10371)


Started GET "/login" for 127.0.0.1 at 2023-11-17 17:14:22 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 2.3ms | Allocations: 2514)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1002)
  Rendered layouts/_sidenav.html.erb (Duration: 1.8ms | Allocations: 2449)
  Rendered layout layouts/application.html.erb (Duration: 7.3ms | Allocations: 9599)
Completed 200 OK in 8ms (Views: 7.9ms | ActiveRecord: 0.0ms | Allocations: 9861)


Started POST "/login" for 127.0.0.1 at 2023-11-17 17:14:25 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"gari", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 192ms (ActiveRecord: 24.7ms | Allocations: 852)


Started GET "/" for 127.0.0.1 at 2023-11-17 17:14:25 +0100
Processing by CategoriesController#index as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 52.0ms | Allocations: 3351)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1027)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.4ms | Allocations: 3786)
  Rendered layout layouts/application.html.erb (Duration: 83.6ms | Allocations: 11774)
Completed 200 OK in 84ms (Views: 9.4ms | ActiveRecord: 74.5ms | Allocations: 12038)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-17 17:28:48 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRank Load (24.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:11:in `map'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  Rendered restaurants/index.html.erb within layouts/application (Duration: 54.3ms | Allocations: 7621)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1002)
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 104.2ms | Allocations: 3921)
  Rendered layout layouts/application.html.erb (Duration: 162.2ms | Allocations: 16365)
Completed 200 OK in 956ms (Views: 63.2ms | ActiveRecord: 480.0ms | Allocations: 28089)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 17:28:50 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (26.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 1.7ms | Allocations: 2577)
  [1m[36mDish Load (25.3ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 3.8ms | Allocations: 843)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 401)
  Rendered layouts/_comment.html.erb (Duration: 57.6ms | Allocations: 4364)
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 645)
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 403)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 399)
  Rendered layouts/_comment.html.erb (Duration: 3.3ms | Allocations: 4866)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 156.4ms | Allocations: 15146)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1013)
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.5ms | Allocations: 3921)
  Rendered layout layouts/application.html.erb (Duration: 212.4ms | Allocations: 23742)
Completed 200 OK in 648ms (Views: 88.0ms | ActiveRecord: 479.4ms | Allocations: 40142)


Started GET "/restaurants/3/dishes/4" for 127.0.0.1 at 2023-11-17 17:28:51 +0100
Processing by DishesController#show as HTML
  Parameters: {"restaurant_id"=>"3", "id"=>"4"}
  [1m[36mDish Load (25.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."id" = $1 AND "dishes"."restaurant_id" = $2 LIMIT $3[0m  [["id", 4], ["restaurant_id", 3], ["LIMIT", 1]]
  â†³ app/controllers/dishes_controller.rb:5:in `show'
  Rendering layout layouts/application.html.erb
  Rendering dishes/show.html.erb within layouts/application
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/dishes/show.html.erb:3
  [1m[36mReview Load (24.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_comment.html.erb (Duration: 27.6ms | Allocations: 3519)
  Rendered dishes/show.html.erb within layouts/application (Duration: 54.9ms | Allocations: 5607)
  Rendered layout layouts/application.html.erb (Duration: 55.1ms | Allocations: 5699)
Completed 500 Internal Server Error in 130ms (ActiveRecord: 74.7ms | Allocations: 7789)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `locals' for #<ActionView::Base:0x00000000036bc8>):
    17:       <% end %>
    18:       <div class="comment_actions_row">
    19:         <div class="comment_action_item">
    20:           <%= render "layouts/reaction", locals: {comment: comment, button: "Like", rcts_no: locals[:reactions][comment.id][:likes], user_reaction_id: locals[:user_reactions][comment.id][:reaction_id]} %>
    21:         </div>
    22:         <div class="comment_action_item">
    23:           <%= render "layouts/reaction", locals: {comment: comment, button: "Dislike", rcts_no: locals[:reactions][comment.id][:dislikes], user_reaction_id: locals[:user_reactions][comment.id][:reaction_id]} %>
  
app/views/layouts/_comment.html.erb:20
app/views/layouts/_comment.html.erb:2
app/views/dishes/show.html.erb:8
Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 17:29:07 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (30.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (25.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 1.5ms | Allocations: 2185)
  [1m[36mDish Load (24.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 580)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 399)
  Rendered layouts/_comment.html.erb (Duration: 27.9ms | Allocations: 2646)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 492)
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 405)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 403)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 399)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 402)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 399)
  Rendered layouts/_comment.html.erb (Duration: 2.8ms | Allocations: 4825)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 84.4ms | Allocations: 11962)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1013)
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.7ms | Allocations: 3921)
  Rendered layout layouts/application.html.erb (Duration: 141.3ms | Allocations: 20555)
Completed 200 OK in 456ms (Views: 16.7ms | ActiveRecord: 432.1ms | Allocations: 25911)


Started GET "/categories" for 127.0.0.1 at 2023-11-17 17:29:37 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (26.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 53.5ms | Allocations: 3338)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1027)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.5ms | Allocations: 3786)
  Rendered layout layouts/application.html.erb (Duration: 84.8ms | Allocations: 11761)
Completed 200 OK in 85ms (Views: 8.9ms | ActiveRecord: 76.2ms | Allocations: 12022)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:29:38 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 1.1ms | Allocations: 868)
  Rendered categories/new.html.erb within layouts/application (Duration: 1.8ms | Allocations: 1103)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1026)
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 55.4ms | Allocations: 3899)
  Rendered layout layouts/application.html.erb (Duration: 60.1ms | Allocations: 9826)
Completed 200 OK in 61ms (Views: 9.8ms | ActiveRecord: 50.6ms | Allocations: 10160)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:31:49 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 1.0ms | Allocations: 944)
  Rendered categories/new.html.erb within layouts/application (Duration: 1.4ms | Allocations: 1188)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1288)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 194.3ms | Allocations: 16747)
  Rendered layout layouts/application.html.erb (Duration: 204.7ms | Allocations: 37906)
Completed 200 OK in 286ms (Views: 28.0ms | ActiveRecord: 228.5ms | Allocations: 41752)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:33:18 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 1.2ms | Allocations: 2224)
  Rendered categories/new.html.erb within layouts/application (Duration: 1.7ms | Allocations: 2468)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | Allocations: 2561)
Completed 500 Internal Server Error in 83ms (ActiveRecord: 50.5ms | Allocations: 6346)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `locals' for #<ActionView::Base:0x00000000043eb8>):
    16: 
    17: <div class="posts_container">
    18:   <div class="title_container">
    19:     <h1 class="title">Escribe tu <span class="title_key_word"><%= locals[:tipo] %></span></h1>
    20:   </div>
    21:   <%= form_with model: locals[:comment] do |form| %>
    22:     <div class="new_post_container">
  
app/views/categories/_form.html.erb:19
app/views/categories/new.html.erb:4
Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:33:34 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 1.3ms | Allocations: 2257)
  Rendered categories/new.html.erb within layouts/application (Duration: 1.7ms | Allocations: 2499)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | Allocations: 2592)
Completed 500 Internal Server Error in 84ms (ActiveRecord: 51.4ms | Allocations: 6416)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `locals' for #<ActionView::Base:0x0000000004a8f8>):
    15: <% end %>
    16: 
    17: <div class="posts_container">
    18:   <%= form_with model: locals[:comment] do |form| %>
    19:     <div class="new_post_container">
    20:       <div>
    21:         <%= form.text_area :contenido, class: "new_post_text_field", placeholder: "Escribe tu contenido", size: '90x16' %>
  
app/views/categories/_form.html.erb:18
app/views/categories/new.html.erb:4
Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:33:56 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 10.6ms | Allocations: 2808)
  Rendered categories/new.html.erb within layouts/application (Duration: 11.0ms | Allocations: 3050)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1266)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 169.0ms | Allocations: 16724)
  Rendered layout layouts/application.html.erb (Duration: 189.4ms | Allocations: 39573)
Completed 200 OK in 270ms (Views: 38.8ms | ActiveRecord: 202.7ms | Allocations: 43420)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:34:11 +0100
Processing by CategoriesController#new as */*
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.5ms | Allocations: 1882)
  Rendered categories/new.html.erb within layouts/application (Duration: 2.7ms | Allocations: 1946)
  Rendered layouts/_header.html.erb (Duration: 2.4ms | Allocations: 1311)
  Rendered layouts/_sidenav.html.erb (Duration: 4.8ms | Allocations: 2604)
  Rendered layout layouts/application.html.erb (Duration: 14.5ms | Allocations: 9511)
Completed 200 OK in 15ms (Views: 14.9ms | ActiveRecord: 0.0ms | Allocations: 9858)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:37:14 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.4ms | Allocations: 2000)
  Rendered categories/new.html.erb within layouts/application (Duration: 2.6ms | Allocations: 2064)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1013)
  [1m[36mUser Load (25.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.3ms | Allocations: 3922)
  Rendered layout layouts/application.html.erb (Duration: 71.4ms | Allocations: 17118)
Completed 200 OK in 72ms (Views: 22.5ms | ActiveRecord: 49.2ms | Allocations: 17378)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:38:03 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 1.9ms | Allocations: 2004)
  Rendered categories/new.html.erb within layouts/application (Duration: 2.0ms | Allocations: 2068)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1013)
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.4ms | Allocations: 3922)
  Rendered layout layouts/application.html.erb (Duration: 60.5ms | Allocations: 10641)
Completed 200 OK in 61ms (Views: 10.3ms | ActiveRecord: 50.5ms | Allocations: 10901)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:39:43 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.6ms | Allocations: 2692)
  Rendered categories/new.html.erb within layouts/application (Duration: 3.2ms | Allocations: 2936)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1266)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 170.8ms | Allocations: 16756)
  Rendered layout layouts/application.html.erb (Duration: 184.3ms | Allocations: 39489)
Completed 200 OK in 268ms (Views: 32.8ms | ActiveRecord: 203.9ms | Allocations: 43336)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:39:52 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.4ms | Allocations: 2691)
  Rendered categories/new.html.erb within layouts/application (Duration: 2.8ms | Allocations: 2935)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1266)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 170.7ms | Allocations: 16783)
  Rendered layout layouts/application.html.erb (Duration: 182.9ms | Allocations: 39517)
Completed 200 OK in 264ms (Views: 31.5ms | ActiveRecord: 203.4ms | Allocations: 43367)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:40:18 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.1ms | Allocations: 2701)
  Rendered categories/new.html.erb within layouts/application (Duration: 2.7ms | Allocations: 2945)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1266)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 170.7ms | Allocations: 16724)
  Rendered layout layouts/application.html.erb (Duration: 182.7ms | Allocations: 39469)
Completed 200 OK in 264ms (Views: 31.3ms | ActiveRecord: 203.4ms | Allocations: 43317)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:40:25 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.1ms | Allocations: 2670)
  Rendered categories/new.html.erb within layouts/application (Duration: 2.5ms | Allocations: 2910)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1254)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 170.7ms | Allocations: 16653)
  Rendered layout layouts/application.html.erb (Duration: 181.8ms | Allocations: 39078)
Completed 200 OK in 264ms (Views: 29.1ms | ActiveRecord: 204.4ms | Allocations: 42837)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-17 17:41:30 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"gari"}
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (25.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (25.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (24.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 16:41:30.362410')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 16:41:30.387776')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (24.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 16:41:30.413227')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 2.7ms | Allocations: 3089)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1263)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.6ms | Allocations: 4862)
  Rendered layout layouts/application.html.erb (Duration: 41.6ms | Allocations: 27723)
Completed 200 OK in 507ms (Views: 18.2ms | ActiveRecord: 429.6ms | Allocations: 50628)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-17 17:42:03 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"gari"}
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (25.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (26.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 16:42:03.768419')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 16:42:03.793651')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 16:42:03.818417')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 2.3ms | Allocations: 2134)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1002)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.7ms | Allocations: 3786)
  Rendered layout layouts/application.html.erb (Duration: 39.7ms | Allocations: 16997)
Completed 200 OK in 247ms (Views: 16.0ms | ActiveRecord: 225.7ms | Allocations: 21335)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:42:09 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.1ms | Allocations: 2473)
  Rendered categories/new.html.erb within layouts/application (Duration: 2.6ms | Allocations: 2708)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1001)
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.7ms | Allocations: 3896)
  Rendered layout layouts/application.html.erb (Duration: 59.4ms | Allocations: 11243)
Completed 200 OK in 89ms (Views: 9.3ms | ActiveRecord: 76.3ms | Allocations: 14231)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:43:32 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.2ms | Allocations: 2555)
  Rendered categories/new.html.erb within layouts/application (Duration: 2.8ms | Allocations: 2795)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1269)
  [1m[36mUser Load (24.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 170.2ms | Allocations: 16691)
  Rendered layout layouts/application.html.erb (Duration: 184.6ms | Allocations: 39029)
Completed 200 OK in 265ms (Views: 33.1ms | ActiveRecord: 203.0ms | Allocations: 42789)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:44:39 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.5ms | Allocations: 2590)
  Rendered categories/new.html.erb within layouts/application (Duration: 3.0ms | Allocations: 2830)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1266)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 170.6ms | Allocations: 16639)
  Rendered layout layouts/application.html.erb (Duration: 183.5ms | Allocations: 39111)
Completed 200 OK in 265ms (Views: 32.3ms | ActiveRecord: 203.2ms | Allocations: 42877)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:45:25 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.4ms | Allocations: 2550)
  Rendered categories/new.html.erb within layouts/application (Duration: 2.8ms | Allocations: 2794)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1266)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 168.8ms | Allocations: 16748)
  Rendered layout layouts/application.html.erb (Duration: 181.7ms | Allocations: 39375)
Completed 200 OK in 267ms (Views: 31.2ms | ActiveRecord: 202.2ms | Allocations: 43158)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:46:44 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 3.7ms | Allocations: 2581)
  Rendered categories/new.html.erb within layouts/application (Duration: 4.4ms | Allocations: 2821)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1254)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 171.6ms | Allocations: 16599)
  Rendered layout layouts/application.html.erb (Duration: 186.9ms | Allocations: 39031)
Completed 200 OK in 269ms (Views: 34.3ms | ActiveRecord: 205.2ms | Allocations: 42797)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:47:17 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.7ms | Allocations: 2570)
  Rendered categories/new.html.erb within layouts/application (Duration: 3.2ms | Allocations: 2814)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1266)
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 171.4ms | Allocations: 16724)
  Rendered layout layouts/application.html.erb (Duration: 183.7ms | Allocations: 39337)
Completed 200 OK in 268ms (Views: 32.4ms | ActiveRecord: 203.8ms | Allocations: 43187)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:47:23 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.1ms | Allocations: 2551)
  Rendered categories/new.html.erb within layouts/application (Duration: 2.5ms | Allocations: 2791)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1269)
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 172.5ms | Allocations: 16750)
  Rendered layout layouts/application.html.erb (Duration: 185.9ms | Allocations: 39074)
Completed 200 OK in 267ms (Views: 32.7ms | ActiveRecord: 205.0ms | Allocations: 42835)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:48:22 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.0ms | Allocations: 2564)
  Rendered categories/new.html.erb within layouts/application (Duration: 2.5ms | Allocations: 2804)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1266)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 170.3ms | Allocations: 16618)
  Rendered layout layouts/application.html.erb (Duration: 188.5ms | Allocations: 45525)
Completed 200 OK in 270ms (Views: 36.2ms | ActiveRecord: 204.0ms | Allocations: 49290)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:49:07 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 1.8ms | Allocations: 1975)
  Rendered categories/new.html.erb within layouts/application (Duration: 1.9ms | Allocations: 2039)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1001)
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 60.1ms | Allocations: 3922)
  Rendered layout layouts/application.html.erb (Duration: 73.3ms | Allocations: 17062)
Completed 200 OK in 74ms (Views: 22.9ms | ActiveRecord: 50.8ms | Allocations: 17324)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:49:45 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 3.7ms | Allocations: 1973)
  Rendered categories/new.html.erb within layouts/application (Duration: 3.9ms | Allocations: 2037)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1013)
  [1m[36mUser Load (25.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 56.3ms | Allocations: 3922)
  Rendered layout layouts/application.html.erb (Duration: 72.0ms | Allocations: 17086)
Completed 200 OK in 73ms (Views: 21.2ms | ActiveRecord: 51.3ms | Allocations: 17346)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:50:47 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.3ms | Allocations: 2547)
  Rendered categories/new.html.erb within layouts/application (Duration: 2.8ms | Allocations: 2791)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1254)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 179.6ms | Allocations: 16747)
  Rendered layout layouts/application.html.erb (Duration: 190.7ms | Allocations: 39270)
Completed 200 OK in 274ms (Views: 39.2ms | ActiveRecord: 204.7ms | Allocations: 43117)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:51:30 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.4ms | Allocations: 2574)
  Rendered categories/new.html.erb within layouts/application (Duration: 2.9ms | Allocations: 2816)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1266)
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 174.2ms | Allocations: 16612)
  Rendered layout layouts/application.html.erb (Duration: 186.9ms | Allocations: 39068)
Completed 200 OK in 271ms (Views: 34.7ms | ActiveRecord: 204.3ms | Allocations: 42833)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:51:39 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.3ms | Allocations: 1965)
  Rendered categories/new.html.erb within layouts/application (Duration: 2.5ms | Allocations: 2029)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1013)
  [1m[36mUser Load (25.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 56.0ms | Allocations: 3922)
  Rendered layout layouts/application.html.erb (Duration: 61.7ms | Allocations: 10612)
Completed 200 OK in 62ms (Views: 10.7ms | ActiveRecord: 51.4ms | Allocations: 10874)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:51:53 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 3.5ms | Allocations: 1988)
  Rendered categories/new.html.erb within layouts/application (Duration: 3.7ms | Allocations: 2052)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1009)
  [1m[36mUser Load (25.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 55.9ms | Allocations: 3909)
  Rendered layout layouts/application.html.erb (Duration: 63.7ms | Allocations: 10614)
Completed 200 OK in 64ms (Views: 13.0ms | ActiveRecord: 51.1ms | Allocations: 10875)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:51:56 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 3.3ms | Allocations: 2565)
  Rendered categories/new.html.erb within layouts/application (Duration: 3.8ms | Allocations: 2809)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1254)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 177.3ms | Allocations: 16793)
  Rendered layout layouts/application.html.erb (Duration: 190.8ms | Allocations: 39334)
Completed 200 OK in 273ms (Views: 38.8ms | ActiveRecord: 204.1ms | Allocations: 43181)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:53:06 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 3.5ms | Allocations: 1973)
  Rendered categories/new.html.erb within layouts/application (Duration: 3.7ms | Allocations: 2037)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1013)
  [1m[36mUser Load (27.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 57.5ms | Allocations: 3901)
  Rendered layout layouts/application.html.erb (Duration: 72.8ms | Allocations: 17068)
Completed 200 OK in 74ms (Views: 20.7ms | ActiveRecord: 52.5ms | Allocations: 17329)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:53:13 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 3.1ms | Allocations: 2576)
  Rendered categories/new.html.erb within layouts/application (Duration: 3.7ms | Allocations: 2820)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1266)
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 179.5ms | Allocations: 16724)
  Rendered layout layouts/application.html.erb (Duration: 197.8ms | Allocations: 39344)
Completed 200 OK in 281ms (Views: 45.1ms | ActiveRecord: 205.2ms | Allocations: 43202)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:53:35 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 3.4ms | Allocations: 2579)
  Rendered categories/new.html.erb within layouts/application (Duration: 4.0ms | Allocations: 2819)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1254)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 174.6ms | Allocations: 16653)
  Rendered layout layouts/application.html.erb (Duration: 196.4ms | Allocations: 45464)
Completed 200 OK in 281ms (Views: 46.3ms | ActiveRecord: 203.7ms | Allocations: 49234)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:54:07 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.5ms | Allocations: 2568)
  Rendered categories/new.html.erb within layouts/application (Duration: 3.0ms | Allocations: 2812)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1266)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 174.1ms | Allocations: 16725)
  Rendered layout layouts/application.html.erb (Duration: 197.5ms | Allocations: 45813)
Completed 200 OK in 280ms (Views: 45.3ms | ActiveRecord: 204.0ms | Allocations: 49669)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:54:52 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 3.2ms | Allocations: 1990)
  Rendered categories/new.html.erb within layouts/application (Duration: 3.4ms | Allocations: 2054)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1001)
  [1m[36mUser Load (92.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 123.5ms | Allocations: 3892)
  Rendered layout layouts/application.html.erb (Duration: 137.8ms | Allocations: 17052)
Completed 200 OK in 139ms (Views: 20.0ms | ActiveRecord: 118.3ms | Allocations: 17313)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:55:11 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.4ms | Allocations: 2562)
  Rendered categories/new.html.erb within layouts/application (Duration: 3.0ms | Allocations: 2804)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1266)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 175.8ms | Allocations: 16667)
  Rendered layout layouts/application.html.erb (Duration: 188.8ms | Allocations: 39269)
Completed 200 OK in 273ms (Views: 37.2ms | ActiveRecord: 204.1ms | Allocations: 43066)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:55:21 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 1.9ms | Allocations: 1954)
  Rendered categories/new.html.erb within layouts/application (Duration: 2.1ms | Allocations: 2018)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1001)
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (31.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 64.5ms | Allocations: 3892)
  Rendered layout layouts/application.html.erb (Duration: 79.3ms | Allocations: 17035)
Completed 200 OK in 80ms (Views: 22.2ms | ActiveRecord: 57.4ms | Allocations: 17296)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:55:39 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 4.2ms | Allocations: 2570)
  Rendered categories/new.html.erb within layouts/application (Duration: 4.8ms | Allocations: 2810)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1268)
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 175.8ms | Allocations: 16788)
  Rendered layout layouts/application.html.erb (Duration: 196.1ms | Allocations: 39391)
Completed 200 OK in 278ms (Views: 42.9ms | ActiveRecord: 205.3ms | Allocations: 43152)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:57:54 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 3.1ms | Allocations: 3769)
  Rendered categories/new.html.erb within layouts/application (Duration: 3.7ms | Allocations: 4009)
  Rendered layout layouts/application.html.erb (Duration: 3.9ms | Allocations: 4102)
Completed 500 Internal Server Error in 87ms (ActiveRecord: 52.0ms | Allocations: 7847)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `ruta_img_perfil' for nil:NilClass):
    40: 
    41: <div class="my_account_profile_img_container">
    42:     <div class="my_account_profile_img_title">Imagen de Perfil</div>
    43:     <% if @user.ruta_img_perfil.present? %>
    44:         <%= image_tag @user.ruta_img_perfil, class: "my_account_profile_img" %>
    45:     <% else %>
    46:         <%= image_tag "burger-category", class: "my_account_profile_img" %>
  
app/views/categories/_form.html.erb:43
app/views/categories/new.html.erb:4
Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:58:42 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 3.3ms | Allocations: 4258)
  Rendered categories/new.html.erb within layouts/application (Duration: 3.8ms | Allocations: 4498)
  Rendered layout layouts/application.html.erb (Duration: 3.9ms | Allocations: 4591)
Completed 500 Internal Server Error in 86ms (ActiveRecord: 51.1ms | Allocations: 8414)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `form' for #<ActionView::Base:0x000000000e4908>):
    46:         <%= image_tag "burger-category", class: "my_account_profile_img" %>
    47:     <% end %>
    48:     <label class="new_post_image_upload_button">
    49:         <%= form.file_field :ruta_img %>
    50:         <%= image_tag "image-icon", class: "new_post_image_upload_icon" %>
    51:         <div class="new_post_image_upload_text">Modificar</div>
    52:     </label>
  
app/views/categories/_form.html.erb:49
app/views/categories/new.html.erb:4
Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:58:55 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 3.2ms | Allocations: 3547)
  Rendered categories/new.html.erb within layouts/application (Duration: 3.7ms | Allocations: 3789)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1266)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 169.8ms | Allocations: 16784)
  Rendered layout layouts/application.html.erb (Duration: 185.8ms | Allocations: 40347)
Completed 200 OK in 275ms (Views: 35.7ms | ActiveRecord: 209.1ms | Allocations: 44194)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 17:59:36 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 3.8ms | Allocations: 3532)
  Rendered categories/new.html.erb within layouts/application (Duration: 4.7ms | Allocations: 3776)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1266)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 204.9ms | Allocations: 16724)
  Rendered layout layouts/application.html.erb (Duration: 219.4ms | Allocations: 40274)
Completed 200 OK in 302ms (Views: 67.7ms | ActiveRecord: 203.8ms | Allocations: 44141)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 18:00:49 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.9ms | Allocations: 3163)
  Rendered categories/new.html.erb within layouts/application (Duration: 3.4ms | Allocations: 3405)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1258)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 172.8ms | Allocations: 16644)
  Rendered layout layouts/application.html.erb (Duration: 185.8ms | Allocations: 39653)
Completed 200 OK in 267ms (Views: 34.1ms | ActiveRecord: 203.6ms | Allocations: 43529)


Started GET "/" for 127.0.0.1 at 2023-11-17 18:03:25 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (25.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 54.3ms | Allocations: 3782)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1027)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 29.4ms | Allocations: 3786)
  Rendered layout layouts/application.html.erb (Duration: 94.0ms | Allocations: 18695)
Completed 200 OK in 95ms (Views: 18.6ms | ActiveRecord: 75.8ms | Allocations: 19056)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 18:03:40 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.1ms | Allocations: 2463)
  Rendered categories/new.html.erb within layouts/application (Duration: 2.2ms | Allocations: 2527)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1001)
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 57.6ms | Allocations: 3918)
  Rendered layout layouts/application.html.erb (Duration: 71.2ms | Allocations: 17541)
Completed 200 OK in 72ms (Views: 20.9ms | ActiveRecord: 50.7ms | Allocations: 17802)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 18:04:10 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.9ms | Allocations: 3157)
  Rendered categories/new.html.erb within layouts/application (Duration: 3.4ms | Allocations: 3401)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1258)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 171.9ms | Allocations: 16719)
  Rendered layout layouts/application.html.erb (Duration: 192.1ms | Allocations: 46323)
Completed 200 OK in 273ms (Views: 41.0ms | ActiveRecord: 202.5ms | Allocations: 50170)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 18:04:39 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.2ms | Allocations: 2457)
  Rendered categories/new.html.erb within layouts/application (Duration: 2.3ms | Allocations: 2521)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1013)
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 55.7ms | Allocations: 3922)
  Rendered layout layouts/application.html.erb (Duration: 74.0ms | Allocations: 17590)
Completed 200 OK in 75ms (Views: 23.5ms | ActiveRecord: 50.9ms | Allocations: 17851)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-17 18:04:49 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"gari"}
  [1m[36mUser Load (25.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (26.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (25.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (26.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 17:04:49.552805')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 17:04:49.577871')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 17:04:49.602788')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 2.6ms | Allocations: 2981)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1002)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.8ms | Allocations: 3792)
  Rendered layout layouts/application.html.erb (Duration: 33.6ms | Allocations: 11392)
Completed 200 OK in 327ms (Views: 9.5ms | ActiveRecord: 301.9ms | Allocations: 22400)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 18:05:28 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.2ms | Allocations: 2594)
  Rendered categories/new.html.erb within layouts/application (Duration: 2.6ms | Allocations: 2834)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1268)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 174.1ms | Allocations: 16755)
  Rendered layout layouts/application.html.erb (Duration: 190.5ms | Allocations: 39381)
Completed 200 OK in 273ms (Views: 38.7ms | ActiveRecord: 203.8ms | Allocations: 43228)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 18:06:09 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.7ms | Allocations: 3149)
  Rendered categories/new.html.erb within layouts/application (Duration: 3.2ms | Allocations: 3389)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1270)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 173.6ms | Allocations: 16806)
  Rendered layout layouts/application.html.erb (Duration: 190.7ms | Allocations: 39949)
Completed 200 OK in 273ms (Views: 39.1ms | ActiveRecord: 203.8ms | Allocations: 43715)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 18:06:28 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 3.3ms | Allocations: 2608)
  Rendered categories/new.html.erb within layouts/application (Duration: 3.7ms | Allocations: 2850)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1266)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 174.9ms | Allocations: 16782)
  Rendered layout layouts/application.html.erb (Duration: 190.9ms | Allocations: 39411)
Completed 200 OK in 275ms (Views: 39.0ms | ActiveRecord: 204.5ms | Allocations: 43235)


Started POST "/categories" for 127.0.0.1 at 2023-11-17 18:07:16 +0100
Processing by CategoriesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "category"=>{"nombre"=>"KBBQ", "ruta_img"=>#<ActionDispatch::Http::UploadedFile:0x00007f5400859bb0 @tempfile=#<Tempfile:/tmp/RackMultipart20231117-4966-x4vmbl.png>, @content_type="image/png", @original_filename="1854736-200.png", @headers="Content-Disposition: form-data; name=\"category[ruta_img]\"; filename=\"1854736-200.png\"\r\nContent-Type: image/png\r\n">}, "button"=>""}
  [1m[36mTRANSACTION (26.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/categories_controller.rb:24:in `create'
  [1m[36mCategory Create (53.0ms)[0m  [1m[32mINSERT INTO "categories" ("nombre", "created_at", "updated_at", "ruta_img") VALUES ($1, $2, $3, $4)[0m  [["nombre", "KBBQ"], ["created_at", "2023-11-17 17:07:16.063979"], ["updated_at", "2023-11-17 17:07:16.063979"], ["ruta_img", "#<ActionDispatch::Http::UploadedFile:0x00007f5400859bb0>"]]
  â†³ app/controllers/categories_controller.rb:24:in `create'
  [1m[36mTRANSACTION (29.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/categories_controller.rb:24:in `create'
Redirected to http://localhost:3000/categories/KBBQ
Completed 302 Found in 85ms (ActiveRecord: 108.8ms | Allocations: 3199)


Started GET "/categories/KBBQ" for 127.0.0.1 at 2023-11-17 18:07:16 +0100
Processing by CategoriesController#show as TURBO_STREAM
  Parameters: {"nombre"=>"KBBQ"}
  [1m[36mCategory Load (24.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "KBBQ"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='KBBQ' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='KBBQ' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='KBBQ' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "KBBQ"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='KBBQ' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mPost Load (25.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "KBBQ"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_comment.html.erb (Duration: 26.3ms | Allocations: 1075)
  Rendered layouts/_add_comment.html.erb (Duration: 0.8ms | Allocations: 830)
  Rendered categories/show.html.erb within layouts/application (Duration: 28.1ms | Allocations: 2386)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1005)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.9ms | Allocations: 3905)
  Rendered layout layouts/application.html.erb (Duration: 92.7ms | Allocations: 18516)
Completed 200 OK in 359ms (Views: 18.4ms | ActiveRecord: 276.1ms | Allocations: 33375)


Started GET "/categories" for 127.0.0.1 at 2023-11-17 18:07:20 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 54.2ms | Allocations: 6421)
  Rendered layout layouts/application.html.erb (Duration: 54.3ms | Allocations: 6513)
Completed 500 Internal Server Error in 55ms (ActiveRecord: 49.2ms | Allocations: 6825)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (The asset "" is not present in the asset pipeline.
):
    12:       <%= link_to category_path(category) do %>
    13:         <div class="category_box">
    14:           <% if category.ruta_img.present? %>
    15:             <%= image_tag category.ruta_img, class: "category_image" %>
    16:           <% else %>
    17:             <%= image_tag "burger-category", class: "category_image" %>
    18:           <% end %>
  
app/views/categories/index.html.erb:15
app/views/categories/index.html.erb:12
app/views/categories/index.html.erb:10
Started GET "/restaurants" for 127.0.0.1 at 2023-11-17 18:08:55 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRank Load (25.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:11:in `map'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  Rendered restaurants/index.html.erb within layouts/application (Duration: 79.8ms | Allocations: 9176)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1274)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 111.8ms | Allocations: 12697)
  Rendered layout layouts/application.html.erb (Duration: 200.7ms | Allocations: 41950)
Completed 200 OK in 472ms (Views: 28.0ms | ActiveRecord: 403.1ms | Allocations: 56406)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-17 18:08:55 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRank Load (50.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:11:in `map'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  Rendered restaurants/index.html.erb within layouts/application (Duration: 57.8ms | Allocations: 6869)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1018)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.4ms | Allocations: 3931)
  Rendered layout layouts/application.html.erb (Duration: 116.0ms | Allocations: 15684)
Completed 200 OK in 245ms (Views: 17.3ms | ActiveRecord: 224.6ms | Allocations: 17657)


Started GET "/categories" for 127.0.0.1 at 2023-11-17 18:11:08 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (25.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 163.7ms | Allocations: 12738)
  Rendered layout layouts/application.html.erb (Duration: 163.9ms | Allocations: 12831)
Completed 500 Internal Server Error in 167ms (ActiveRecord: 126.7ms | Allocations: 15099)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (The asset "category.ruta_img" is not present in the asset pipeline.
):
    12:       <%= link_to category_path(category) do %>
    13:         <div class="category_box">
    14:           <% if category.ruta_img.present? %>
    15:             <%= image_tag "category.ruta_img", class: "category_image" %>
    16:           <% else %>
    17:             <%= image_tag "burger-category", class: "category_image" %>
    18:           <% end %>
  
app/views/categories/index.html.erb:15
app/views/categories/index.html.erb:12
app/views/categories/index.html.erb:10
Started GET "/categories" for 127.0.0.1 at 2023-11-17 18:12:25 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 52.9ms | Allocations: 3376)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1301)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 125.7ms | Allocations: 23356)
  Rendered layout layouts/application.html.erb (Duration: 190.1ms | Allocations: 46605)
Completed 200 OK in 191ms (Views: 32.3ms | ActiveRecord: 158.2ms | Allocations: 46875)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 18:12:29 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.4ms | Allocations: 2522)
  Rendered categories/new.html.erb within layouts/application (Duration: 2.9ms | Allocations: 2757)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1005)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.7ms | Allocations: 3902)
  Rendered layout layouts/application.html.erb (Duration: 59.3ms | Allocations: 11284)
Completed 200 OK in 60ms (Views: 9.9ms | ActiveRecord: 49.8ms | Allocations: 11618)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 18:12:32 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.2ms | Allocations: 2112)
  Rendered categories/new.html.erb within layouts/application (Duration: 2.3ms | Allocations: 2176)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1005)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.7ms | Allocations: 3902)
  Rendered layout layouts/application.html.erb (Duration: 59.3ms | Allocations: 10701)
Completed 200 OK in 60ms (Views: 9.9ms | ActiveRecord: 49.8ms | Allocations: 10963)


Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 18:13:52 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.7ms | Allocations: 2637)
  Rendered categories/new.html.erb within layouts/application (Duration: 3.5ms | Allocations: 2896)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1270)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 171.7ms | Allocations: 16734)
  Rendered layout layouts/application.html.erb (Duration: 186.6ms | Allocations: 39431)
Completed 200 OK in 268ms (Views: 35.5ms | ActiveRecord: 202.6ms | Allocations: 43286)


Started POST "/categories" for 127.0.0.1 at 2023-11-17 18:13:57 +0100
Processing by CategoriesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "category"=>{"nombre"=>"KBBQ", "ruta_img"=>#<ActionDispatch::Http::UploadedFile:0x00007f5400893130 @tempfile=#<Tempfile:/tmp/RackMultipart20231117-4966-3lexnp.png>, @content_type="image/png", @original_filename="1854736-200.png", @headers="Content-Disposition: form-data; name=\"category[ruta_img]\"; filename=\"1854736-200.png\"\r\nContent-Type: image/png\r\n">}, "button"=>""}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 875)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveModel::UnknownAttributeError (unknown attribute 'nomre' for Category.):
  
app/controllers/categories_controller.rb:22:in `create'
Started GET "/categories/new" for 127.0.0.1 at 2023-11-17 18:14:07 +0100
Processing by CategoriesController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.7ms | Allocations: 2626)
  Rendered categories/new.html.erb within layouts/application (Duration: 3.3ms | Allocations: 2866)
  Rendered layouts/_header.html.erb (Duration: 4.1ms | Allocations: 1275)
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 173.0ms | Allocations: 16832)
  Rendered layout layouts/application.html.erb (Duration: 196.8ms | Allocations: 47176)
Completed 200 OK in 281ms (Views: 46.6ms | ActiveRecord: 203.0ms | Allocations: 51030)


Started POST "/categories" for 127.0.0.1 at 2023-11-17 18:14:21 +0100
Processing by CategoriesController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "category"=>{"nombre"=>"KBBQ", "ruta_img"=>#<ActionDispatch::Http::UploadedFile:0x00007f5400855a10 @tempfile=#<Tempfile:/tmp/RackMultipart20231117-4966-5r4js9.png>, @content_type="image/png", @original_filename="1854736-200.png", @headers="Content-Disposition: form-data; name=\"category[ruta_img]\"; filename=\"1854736-200.png\"\r\nContent-Type: image/png\r\n">}, "button"=>""}
  [1m[36mTRANSACTION (26.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/categories_controller.rb:24:in `create'
  [1m[36mCategory Create (53.1ms)[0m  [1m[32mINSERT INTO "categories" ("nombre", "created_at", "updated_at", "ruta_img") VALUES ($1, $2, $3, $4)[0m  [["nombre", "KBBQ"], ["created_at", "2023-11-17 17:14:21.740677"], ["updated_at", "2023-11-17 17:14:21.740677"], ["ruta_img", "d4f4c2a547b5210f946d.png"]]
  â†³ app/controllers/categories_controller.rb:24:in `create'
  [1m[36mTRANSACTION (25.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/categories_controller.rb:24:in `create'
Redirected to http://localhost:3000/categories/KBBQ
Completed 302 Found in 81ms (ActiveRecord: 104.6ms | Allocations: 2257)


Started GET "/categories/KBBQ" for 127.0.0.1 at 2023-11-17 18:14:21 +0100
Processing by CategoriesController#show as TURBO_STREAM
  Parameters: {"nombre"=>"KBBQ"}
  [1m[36mCategory Load (27.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "KBBQ"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='KBBQ' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='KBBQ' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='KBBQ' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "KBBQ"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='KBBQ' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mPost Load (25.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "KBBQ"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_comment.html.erb (Duration: 26.2ms | Allocations: 1075)
  Rendered layouts/_add_comment.html.erb (Duration: 0.8ms | Allocations: 836)
  Rendered categories/show.html.erb within layouts/application (Duration: 27.9ms | Allocations: 2389)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1013)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.6ms | Allocations: 3929)
  Rendered layout layouts/application.html.erb (Duration: 91.8ms | Allocations: 18789)
Completed 200 OK in 304ms (Views: 17.5ms | ActiveRecord: 277.7ms | Allocations: 24856)


Started GET "/categories" for 127.0.0.1 at 2023-11-17 18:14:30 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (25.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 55.1ms | Allocations: 5773)
  Rendered layout layouts/application.html.erb (Duration: 55.3ms | Allocations: 5865)
Completed 500 Internal Server Error in 56ms (ActiveRecord: 50.7ms | Allocations: 6175)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (The asset "category.ruta_img" is not present in the asset pipeline.
):
    12:       <%= link_to category_path(category) do %>
    13:         <div class="category_box">
    14:           <% if category.ruta_img.present? %>
    15:             <%= image_tag "category.ruta_img", class: "category_image" %>
    16:           <% else %>
    17:             <%= image_tag "burger-category", class: "category_image" %>
    18:           <% end %>
  
app/views/categories/index.html.erb:15
app/views/categories/index.html.erb:12
app/views/categories/index.html.erb:10
Started GET "/users/gari" for 127.0.0.1 at 2023-11-17 18:15:53 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"gari"}
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (25.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (26.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 17:15:53.641626')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 17:15:53.666662')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 17:15:53.691458')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 3.5ms | Allocations: 3000)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1026)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.5ms | Allocations: 3855)
  Rendered layout layouts/application.html.erb (Duration: 35.3ms | Allocations: 11618)
Completed 200 OK in 299ms (Views: 10.9ms | ActiveRecord: 276.4ms | Allocations: 20275)


Started PATCH "/users/gari" for 127.0.0.1 at 2023-11-17 18:16:58 +0100
Processing by UsersController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "user"=>{"nombre"=>"gari", "password"=>"[FILTERED]", "ruta_img_perfil"=>#<ActionDispatch::Http::UploadedFile:0x00007f5400841c40 @tempfile=#<Tempfile:/tmp/RackMultipart20231117-4966-ydoskd.webp>, @content_type="image/webp", @original_filename="r6-operators-list-jackal.webp", @headers="Content-Disposition: form-data; name=\"user[ruta_img_perfil]\"; filename=\"r6-operators-list-jackal.webp\"\r\nContent-Type: image/webp\r\n">}, "button"=>"", "id"=>"gari"}
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:62:in `update'
  [1m[36mTRANSACTION (25.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/users_controller.rb:65:in `update'
  [1m[36mUser Update (51.3ms)[0m  [1m[33mUPDATE "users" SET "ruta_img_perfil" = $1 WHERE "users"."nombre" = $2[0m  [["ruta_img_perfil", "2bed713ee49b398f3580.webp"], ["nombre", "gari"]]
  â†³ app/controllers/users_controller.rb:65:in `update'
  [1m[36mTRANSACTION (26.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/users_controller.rb:65:in `update'
Redirected to http://localhost:3000/users/gari
Completed 302 Found in 106ms (ActiveRecord: 128.7ms | Allocations: 2955)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-17 18:16:58 +0100
Processing by UsersController#show as TURBO_STREAM
  Parameters: {"id"=>"gari"}
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (25.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (25.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (25.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 17:16:58.387099')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 17:16:58.412114')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 17:16:58.437189')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 46.5ms | Allocations: 54717)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1030)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.7ms | Allocations: 3856)
  Rendered layout layouts/application.html.erb (Duration: 77.2ms | Allocations: 63287)
Completed 200 OK in 281ms (Views: 53.9ms | ActiveRecord: 223.0ms | Allocations: 67676)


Started GET "/categories" for 127.0.0.1 at 2023-11-17 18:17:14 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 163.7ms | Allocations: 11363)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1311)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 118.0ms | Allocations: 11366)
  Rendered layout layouts/application.html.erb (Duration: 291.3ms | Allocations: 42658)
Completed 200 OK in 295ms (Views: 64.9ms | ActiveRecord: 227.3ms | Allocations: 44948)


Started GET "/categories" for 127.0.0.1 at 2023-11-17 18:17:41 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (25.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 54.0ms | Allocations: 3441)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1055)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.5ms | Allocations: 3844)
  Rendered layout layouts/application.html.erb (Duration: 86.0ms | Allocations: 12024)
Completed 200 OK in 87ms (Views: 9.9ms | ActiveRecord: 76.4ms | Allocations: 12284)


Started GET "/categories/chino" for 127.0.0.1 at 2023-11-17 18:17:49 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"chino"}
  [1m[36mCategory Load (26.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "chino"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (26.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='chino' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mPost Load (25.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_reaction.html.erb (Duration: 3.4ms | Allocations: 2297)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 408)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 406)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 416)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 413)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 411)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 413)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 411)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_comment.html.erb (Duration: 50.3ms | Allocations: 36786)
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 645)
  Rendered categories/show.html.erb within layouts/application (Duration: 52.0ms | Allocations: 37852)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1017)
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 70.9ms | Allocations: 3936)
  Rendered layout layouts/application.html.erb (Duration: 129.3ms | Allocations: 46440)
Completed 200 OK in 351ms (Views: 54.1ms | ActiveRecord: 282.1ms | Allocations: 65652)


Started GET "/categories/chino" for 127.0.0.1 at 2023-11-17 18:19:07 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"chino"}
  [1m[36mCategory Load (26.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "chino"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='chino' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_reaction.html.erb (Duration: 2.8ms | Allocations: 2281)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 408)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 406)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 416)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 412)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 408)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 413)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 411)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 408)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 411)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 413)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 411)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_comment.html.erb (Duration: 53.2ms | Allocations: 36804)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 647)
  Rendered categories/show.html.erb within layouts/application (Duration: 112.1ms | Allocations: 43745)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1285)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 114.9ms | Allocations: 11340)
  Rendered layout layouts/application.html.erb (Duration: 237.0ms | Allocations: 74983)
Completed 200 OK in 535ms (Views: 59.1ms | ActiveRecord: 434.9ms | Allocations: 88983)


Started GET "/categories/chino" for 127.0.0.1 at 2023-11-17 18:19:27 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"chino"}
  [1m[36mCategory Load (25.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "chino"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='chino' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_reaction.html.erb (Duration: 3.1ms | Allocations: 2279)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 408)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 406)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 416)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 411)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 413)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 411)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 413)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 411)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_comment.html.erb (Duration: 55.8ms | Allocations: 36809)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 649)
  Rendered categories/show.html.erb within layouts/application (Duration: 114.9ms | Allocations: 43706)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1285)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 112.8ms | Allocations: 11378)
  Rendered layout layouts/application.html.erb (Duration: 237.5ms | Allocations: 74982)
Completed 200 OK in 533ms (Views: 61.8ms | ActiveRecord: 430.0ms | Allocations: 89027)


Started GET "/categories/chino/edit" for 127.0.0.1 at 2023-11-17 18:19:31 +0100
Processing by CategoriesController#edit as HTML
  Parameters: {"nombre"=>"chino"}
  [1m[36mCategory Load (25.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "chino"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:32:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering categories/edit.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.4ms | Allocations: 2610)
  Rendered categories/edit.html.erb within layouts/application (Duration: 3.0ms | Allocations: 2846)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1017)
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.3ms | Allocations: 3932)
  Rendered layout layouts/application.html.erb (Duration: 59.2ms | Allocations: 11428)
Completed 200 OK in 86ms (Views: 9.8ms | ActiveRecord: 74.9ms | Allocations: 12139)


Started GET "/categories/chino/edit" for 127.0.0.1 at 2023-11-17 18:19:58 +0100
Processing by CategoriesController#edit as HTML
  Parameters: {"nombre"=>"chino"}
  [1m[36mCategory Load (25.8ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "chino"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:32:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering categories/edit.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 3.1ms | Allocations: 2649)
  Rendered categories/edit.html.erb within layouts/application (Duration: 3.8ms | Allocations: 2890)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1270)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 172.6ms | Allocations: 16668)
  Rendered layout layouts/application.html.erb (Duration: 186.3ms | Allocations: 39167)
Completed 200 OK in 295ms (Views: 35.3ms | ActiveRecord: 229.1ms | Allocations: 43610)


Started PATCH "/categories/chino" for 127.0.0.1 at 2023-11-17 18:20:13 +0100
Processing by CategoriesController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "category"=>{"nombre"=>"Chino"}, "button"=>"", "nombre"=>"chino"}
  [1m[36mCategory Load (26.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "chino"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:36:in `update'
  [1m[36mTRANSACTION (25.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/categories_controller.rb:37:in `update'
  [1m[36mCategory Update (53.7ms)[0m  [1m[33mUPDATE "categories" SET "nombre" = $1, "updated_at" = $2 WHERE "categories"."nombre" = $3[0m  [["nombre", "Chino"], ["updated_at", "2023-11-17 17:20:13.517974"], ["nombre", "chino"]]
  â†³ app/controllers/categories_controller.rb:37:in `update'
  [1m[36mTRANSACTION (24.5ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/controllers/categories_controller.rb:37:in `update'
Completed 500 Internal Server Error in 107ms (ActiveRecord: 130.0ms | Allocations: 3741)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  update or delete on table "categories" violates foreign key constraint "fk_rails_933d904194" on table "restaurants"
DETAIL:  Key (nombre)=(chino) is still referenced from table "restaurants".
):
  
Started GET "/categories" for 127.0.0.1 at 2023-11-17 18:20:18 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (25.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 55.9ms | Allocations: 3797)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1055)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 29.5ms | Allocations: 3856)
  Rendered layout layouts/application.html.erb (Duration: 90.0ms | Allocations: 12392)
Completed 200 OK in 91ms (Views: 13.9ms | ActiveRecord: 76.4ms | Allocations: 12717)


Started GET "/categories" for 127.0.0.1 at 2023-11-17 18:20:34 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (25.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 54.2ms | Allocations: 3405)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1043)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 30.2ms | Allocations: 3826)
  Rendered layout layouts/application.html.erb (Duration: 88.8ms | Allocations: 11912)
Completed 200 OK in 90ms (Views: 13.1ms | ActiveRecord: 76.2ms | Allocations: 12173)


Started GET "/categories/chino" for 127.0.0.1 at 2023-11-17 18:20:38 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"chino"}
  [1m[36mCategory Load (25.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "chino"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='chino' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_reaction.html.erb (Duration: 3.2ms | Allocations: 2280)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 408)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 406)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 416)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 413)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 411)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 413)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 411)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_comment.html.erb (Duration: 51.0ms | Allocations: 36764)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 645)
  Rendered categories/show.html.erb within layouts/application (Duration: 77.8ms | Allocations: 38370)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1017)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.6ms | Allocations: 3830)
  Rendered layout layouts/application.html.erb (Duration: 108.6ms | Allocations: 46851)
Completed 200 OK in 329ms (Views: 34.2ms | ActiveRecord: 277.6ms | Allocations: 65986)


Started GET "/categories/chino/edit" for 127.0.0.1 at 2023-11-17 18:20:40 +0100
Processing by CategoriesController#edit as HTML
  Parameters: {"nombre"=>"chino"}
  [1m[36mCategory Load (25.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "chino"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:32:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering categories/edit.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.2ms | Allocations: 2174)
  Rendered categories/edit.html.erb within layouts/application (Duration: 2.3ms | Allocations: 2238)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1017)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.8ms | Allocations: 3932)
  Rendered layout layouts/application.html.erb (Duration: 58.3ms | Allocations: 10820)
Completed 200 OK in 84ms (Views: 8.9ms | ActiveRecord: 74.6ms | Allocations: 11471)


Started PATCH "/categories/chino" for 127.0.0.1 at 2023-11-17 18:22:27 +0100
Processing by CategoriesController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "category"=>{"nombre"=>"chino", "ruta_img"=>#<ActionDispatch::Http::UploadedFile:0x00007f540188c190 @tempfile=#<Tempfile:/tmp/RackMultipart20231117-4966-yy5qg8.png>, @content_type="image/png", @original_filename="05fd49ad8247bcaf8e7f01f9d7b87e03.png", @headers="Content-Disposition: form-data; name=\"category[ruta_img]\"; filename=\"05fd49ad8247bcaf8e7f01f9d7b87e03.png\"\r\nContent-Type: image/png\r\n">}, "button"=>"", "nombre"=>"chino"}
  [1m[36mCategory Load (25.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "chino"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:36:in `update'
  [1m[36mTRANSACTION (25.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/categories_controller.rb:37:in `update'
  [1m[36mCategory Update (52.0ms)[0m  [1m[33mUPDATE "categories" SET "updated_at" = $1, "ruta_img" = $2 WHERE "categories"."nombre" = $3[0m  [["updated_at", "2023-11-17 17:22:27.064291"], ["ruta_img", "#<ActionDispatch::Http::UploadedFile:0x00007f540188c190>"], ["nombre", "chino"]]
  â†³ app/controllers/categories_controller.rb:37:in `update'
  [1m[36mTRANSACTION (26.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/categories_controller.rb:37:in `update'
Redirected to http://localhost:3000/categories/chino
Completed 302 Found in 108ms (ActiveRecord: 130.2ms | Allocations: 2488)


Started GET "/categories/chino" for 127.0.0.1 at 2023-11-17 18:22:27 +0100
Processing by CategoriesController#show as TURBO_STREAM
  Parameters: {"nombre"=>"chino"}
  [1m[36mCategory Load (25.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "chino"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (26.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='chino' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 586)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 406)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 413)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 413)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 411)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 413)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 411)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 407)
  Rendered layouts/_comment.html.erb (Duration: 47.4ms | Allocations: 33447)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 499)
  Rendered categories/show.html.erb within layouts/application (Duration: 73.5ms | Allocations: 34594)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1029)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.2ms | Allocations: 3856)
  Rendered layout layouts/application.html.erb (Duration: 105.0ms | Allocations: 43159)
Completed 200 OK in 262ms (Views: 29.9ms | ActiveRecord: 227.4ms | Allocations: 47481)


Started GET "/categories" for 127.0.0.1 at 2023-11-17 18:22:28 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 53.7ms | Allocations: 5643)
  Rendered layout layouts/application.html.erb (Duration: 53.9ms | Allocations: 5735)
Completed 500 Internal Server Error in 54ms (ActiveRecord: 49.3ms | Allocations: 5974)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (The asset "" is not present in the asset pipeline.
):
    12:       <%= link_to category_path(category) do %>
    13:         <div class="category_box">
    14:           <% if category.ruta_img.present? %>
    15:             <%= image_tag category.ruta_img, class: "category_image" %>
    16:           <% else %>
    17:             <%= image_tag "burger-category", class: "category_image" %>
    18:           <% end %>
  
app/views/categories/index.html.erb:15
app/views/categories/index.html.erb:12
app/views/categories/index.html.erb:10
Started GET "/categories" for 127.0.0.1 at 2023-11-17 18:25:08 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 163.8ms | Allocations: 10809)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1311)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 115.8ms | Allocations: 11347)
  Rendered layout layouts/application.html.erb (Duration: 289.7ms | Allocations: 42085)
Completed 200 OK in 293ms (Views: 62.7ms | ActiveRecord: 227.8ms | Allocations: 44375)


Started GET "/categories/chino" for 127.0.0.1 at 2023-11-17 18:25:15 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"chino"}
  [1m[36mCategory Load (25.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "chino"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='chino' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_reaction.html.erb (Duration: 3.2ms | Allocations: 2284)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 408)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 406)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 416)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 413)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 411)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 413)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 411)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 407)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 410)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 407)
  Rendered layouts/_comment.html.erb (Duration: 48.3ms | Allocations: 36772)
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 645)
  Rendered categories/show.html.erb within layouts/application (Duration: 74.8ms | Allocations: 38376)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1017)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.5ms | Allocations: 3830)
  Rendered layout layouts/application.html.erb (Duration: 105.0ms | Allocations: 46857)
Completed 200 OK in 320ms (Views: 30.4ms | ActiveRecord: 278.6ms | Allocations: 57278)


Started GET "/categories/chino/edit" for 127.0.0.1 at 2023-11-17 18:25:18 +0100
Processing by CategoriesController#edit as HTML
  Parameters: {"nombre"=>"chino"}
  [1m[36mCategory Load (25.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "chino"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:32:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering categories/edit.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.3ms | Allocations: 2589)
  Rendered categories/edit.html.erb within layouts/application (Duration: 2.8ms | Allocations: 2824)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1017)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.3ms | Allocations: 3932)
  Rendered layout layouts/application.html.erb (Duration: 59.7ms | Allocations: 11406)
Completed 200 OK in 86ms (Views: 10.4ms | ActiveRecord: 74.8ms | Allocations: 12118)


Started PATCH "/categories/chino" for 127.0.0.1 at 2023-11-17 18:25:28 +0100
Processing by CategoriesController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "category"=>{"nombre"=>"chino", "ruta_img"=>#<ActionDispatch::Http::UploadedFile:0x00007f540188c2d0 @tempfile=#<Tempfile:/tmp/RackMultipart20231117-4966-p2euse.png>, @content_type="image/png", @original_filename="05fd49ad8247bcaf8e7f01f9d7b87e03.png", @headers="Content-Disposition: form-data; name=\"category[ruta_img]\"; filename=\"05fd49ad8247bcaf8e7f01f9d7b87e03.png\"\r\nContent-Type: image/png\r\n">}, "button"=>"", "nombre"=>"chino"}
  [1m[36mCategory Load (25.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "chino"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:36:in `update'
  [1m[36mTRANSACTION (25.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/categories_controller.rb:38:in `update'
  [1m[36mCategory Update (50.9ms)[0m  [1m[33mUPDATE "categories" SET "updated_at" = $1, "ruta_img" = $2 WHERE "categories"."nombre" = $3[0m  [["updated_at", "2023-11-17 17:25:28.449861"], ["ruta_img", "82452c732b059db40077.png"], ["nombre", "chino"]]
  â†³ app/controllers/categories_controller.rb:38:in `update'
  [1m[36mTRANSACTION (26.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/categories_controller.rb:38:in `update'
Redirected to http://localhost:3000/categories/chino
Completed 302 Found in 126ms (ActiveRecord: 129.1ms | Allocations: 2739)


Started GET "/categories/chino" for 127.0.0.1 at 2023-11-17 18:25:28 +0100
Processing by CategoriesController#show as TURBO_STREAM
  Parameters: {"nombre"=>"chino"}
  [1m[36mCategory Load (25.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "chino"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='chino' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 592)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 412)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 408)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 412)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 415)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 412)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 411)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 411)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 414)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 411)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 412)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 412)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 412)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 415)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 413)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 411)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 412)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 412)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 415)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 413)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 412)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 409)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 412)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 409)
  Rendered layouts/_comment.html.erb (Duration: 45.4ms | Allocations: 33609)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 501)
  Rendered categories/show.html.erb within layouts/application (Duration: 71.3ms | Allocations: 34758)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1033)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.8ms | Allocations: 3866)
  Rendered layout layouts/application.html.erb (Duration: 110.9ms | Allocations: 51149)
Completed 200 OK in 264ms (Views: 36.6ms | ActiveRecord: 223.3ms | Allocations: 55472)


Started GET "/categories" for 127.0.0.1 at 2023-11-17 18:25:29 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 127.4ms | Allocations: 48764)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1047)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.9ms | Allocations: 3836)
  Rendered layout layouts/application.html.erb (Duration: 158.2ms | Allocations: 57291)
Completed 200 OK in 159ms (Views: 84.5ms | ActiveRecord: 74.0ms | Allocations: 57553)


Started GET "/categories/Turca" for 127.0.0.1 at 2023-11-17 18:26:18 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"Turca"}
  [1m[36mCategory Load (25.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Turca"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='Turca' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='Turca' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='Turca' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Turca"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='Turca' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Turca"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_comment.html.erb (Duration: 25.9ms | Allocations: 650)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 689)
  Rendered categories/show.html.erb within layouts/application (Duration: 51.9ms | Allocations: 1944)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1021)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.0ms | Allocations: 3856)
  Rendered layout layouts/application.html.erb (Duration: 83.5ms | Allocations: 10486)
Completed 200 OK in 239ms (Views: 9.2ms | ActiveRecord: 226.3ms | Allocations: 13177)


Started GET "/categories/Turca/edit" for 127.0.0.1 at 2023-11-17 18:26:20 +0100
Processing by CategoriesController#edit as HTML
  Parameters: {"nombre"=>"Turca"}
  [1m[36mCategory Load (25.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Turca"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:32:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering categories/edit.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.3ms | Allocations: 2196)
  Rendered categories/edit.html.erb within layouts/application (Duration: 2.5ms | Allocations: 2260)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1021)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.0ms | Allocations: 3942)
  Rendered layout layouts/application.html.erb (Duration: 59.4ms | Allocations: 10862)
Completed 200 OK in 86ms (Views: 10.1ms | ActiveRecord: 75.0ms | Allocations: 11511)


Started PATCH "/categories/Turca" for 127.0.0.1 at 2023-11-17 18:26:45 +0100
Processing by CategoriesController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "category"=>{"nombre"=>"Turca", "ruta_img"=>#<ActionDispatch::Http::UploadedFile:0x00007f5400f90f00 @tempfile=#<Tempfile:/tmp/RackMultipart20231117-4966-m3midg.jpeg>, @content_type="image/jpeg", @original_filename="817126f8065466fa92a8f233d7059a50.jpeg", @headers="Content-Disposition: form-data; name=\"category[ruta_img]\"; filename=\"817126f8065466fa92a8f233d7059a50.jpeg\"\r\nContent-Type: image/jpeg\r\n">}, "button"=>"", "nombre"=>"Turca"}
  [1m[36mCategory Load (25.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Turca"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:36:in `update'
  [1m[36mTRANSACTION (25.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/categories_controller.rb:38:in `update'
  [1m[36mCategory Update (51.2ms)[0m  [1m[33mUPDATE "categories" SET "updated_at" = $1, "ruta_img" = $2 WHERE "categories"."nombre" = $3[0m  [["updated_at", "2023-11-17 17:26:45.337472"], ["ruta_img", "04ac8ff76866e8a64dde.jpeg"], ["nombre", "Turca"]]
  â†³ app/controllers/categories_controller.rb:38:in `update'
  [1m[36mTRANSACTION (27.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/categories_controller.rb:38:in `update'
Redirected to http://localhost:3000/categories/Turca
Completed 302 Found in 107ms (ActiveRecord: 130.1ms | Allocations: 2451)


Started GET "/categories/Turca" for 127.0.0.1 at 2023-11-17 18:26:45 +0100
Processing by CategoriesController#show as TURBO_STREAM
  Parameters: {"nombre"=>"Turca"}
  [1m[36mCategory Load (25.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Turca"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='Turca' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='Turca' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='Turca' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Turca"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='Turca' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Turca"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_comment.html.erb (Duration: 26.2ms | Allocations: 650)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 692)
  Rendered categories/show.html.erb within layouts/application (Duration: 52.3ms | Allocations: 1947)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1025)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.2ms | Allocations: 3846)
  Rendered layout layouts/application.html.erb (Duration: 91.1ms | Allocations: 18313)
Completed 200 OK in 243ms (Views: 16.0ms | ActiveRecord: 224.2ms | Allocations: 20998)


Started GET "/categories" for 127.0.0.1 at 2023-11-17 18:26:46 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 137.6ms | Allocations: 49312)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1059)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.7ms | Allocations: 3881)
  Rendered layout layouts/application.html.erb (Duration: 168.7ms | Allocations: 57922)
Completed 200 OK in 169ms (Views: 95.1ms | ActiveRecord: 73.8ms | Allocations: 58183)


Started GET "/categories/Turca" for 127.0.0.1 at 2023-11-17 18:27:45 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"Turca"}
  [1m[36mCategory Load (26.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Turca"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='Turca' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='Turca' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='Turca' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Turca"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='Turca' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Turca"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_comment.html.erb (Duration: 26.4ms | Allocations: 650)
  Rendered layouts/_add_comment.html.erb (Duration: 0.8ms | Allocations: 696)
  Rendered categories/show.html.erb within layouts/application (Duration: 53.4ms | Allocations: 1951)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1033)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.3ms | Allocations: 3866)
  Rendered layout layouts/application.html.erb (Duration: 85.7ms | Allocations: 10537)
Completed 200 OK in 244ms (Views: 11.2ms | ActiveRecord: 228.2ms | Allocations: 13218)


Started GET "/categories/Turca/edit" for 127.0.0.1 at 2023-11-17 18:27:46 +0100
Processing by CategoriesController#edit as HTML
  Parameters: {"nombre"=>"Turca"}
  [1m[36mCategory Load (25.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Turca"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:32:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering categories/edit.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.0ms | Allocations: 2184)
  Rendered categories/edit.html.erb within layouts/application (Duration: 2.1ms | Allocations: 2248)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1025)
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.8ms | Allocations: 3955)
  Rendered layout layouts/application.html.erb (Duration: 59.3ms | Allocations: 10898)
Completed 200 OK in 86ms (Views: 9.9ms | ActiveRecord: 75.3ms | Allocations: 11548)


Started PATCH "/categories/Turca" for 127.0.0.1 at 2023-11-17 18:27:56 +0100
Processing by CategoriesController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "category"=>{"nombre"=>"Turca", "ruta_img"=>#<ActionDispatch::Http::UploadedFile:0x00007f53b7ef8e88 @tempfile=#<Tempfile:/tmp/RackMultipart20231117-4966-2v28yo.png>, @content_type="image/png", @original_filename="817126f8065466fa92a8f233d7059a50.png", @headers="Content-Disposition: form-data; name=\"category[ruta_img]\"; filename=\"817126f8065466fa92a8f233d7059a50.png\"\r\nContent-Type: image/png\r\n">}, "button"=>"", "nombre"=>"Turca"}
  [1m[36mCategory Load (26.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Turca"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:36:in `update'
  [1m[36mTRANSACTION (25.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/categories_controller.rb:38:in `update'
  [1m[36mCategory Update (50.8ms)[0m  [1m[33mUPDATE "categories" SET "updated_at" = $1, "ruta_img" = $2 WHERE "categories"."nombre" = $3[0m  [["updated_at", "2023-11-17 17:27:56.113978"], ["ruta_img", "425c464a8b3076762d60.png"], ["nombre", "Turca"]]
  â†³ app/controllers/categories_controller.rb:38:in `update'
  [1m[36mTRANSACTION (26.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/categories_controller.rb:38:in `update'
Redirected to http://localhost:3000/categories/Turca
Completed 302 Found in 107ms (ActiveRecord: 129.1ms | Allocations: 2456)


Started GET "/categories/Turca" for 127.0.0.1 at 2023-11-17 18:27:56 +0100
Processing by CategoriesController#show as TURBO_STREAM
  Parameters: {"nombre"=>"Turca"}
  [1m[36mCategory Load (25.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Turca"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='Turca' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='Turca' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='Turca' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Turca"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='Turca' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Turca"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_comment.html.erb (Duration: 25.9ms | Allocations: 650)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 699)
  Rendered categories/show.html.erb within layouts/application (Duration: 52.4ms | Allocations: 1954)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1029)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.9ms | Allocations: 3856)
  Rendered layout layouts/application.html.erb (Duration: 91.4ms | Allocations: 18339)
Completed 200 OK in 244ms (Views: 16.6ms | ActiveRecord: 224.8ms | Allocations: 21027)


Started GET "/categories" for 127.0.0.1 at 2023-11-17 18:27:57 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 82.2ms | Allocations: 49708)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1055)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.9ms | Allocations: 3856)
  Rendered layout layouts/application.html.erb (Duration: 113.0ms | Allocations: 58275)
Completed 200 OK in 114ms (Views: 39.8ms | ActiveRecord: 73.5ms | Allocations: 58537)


Started GET "/categories/Gourmet" for 127.0.0.1 at 2023-11-17 18:29:05 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"Gourmet"}
  [1m[36mCategory Load (26.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Gourmet"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='Gourmet' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='Gourmet' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='Gourmet' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Gourmet"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='Gourmet' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.4ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Gourmet"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_comment.html.erb (Duration: 26.3ms | Allocations: 650)
  Rendered layouts/_add_comment.html.erb (Duration: 0.8ms | Allocations: 689)
  Rendered categories/show.html.erb within layouts/application (Duration: 53.1ms | Allocations: 1945)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1021)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.7ms | Allocations: 3836)
  Rendered layout layouts/application.html.erb (Duration: 93.4ms | Allocations: 18271)
Completed 200 OK in 250ms (Views: 18.2ms | ActiveRecord: 227.5ms | Allocations: 20934)


Started GET "/categories/Gourmet/edit" for 127.0.0.1 at 2023-11-17 18:29:06 +0100
Processing by CategoriesController#edit as HTML
  Parameters: {"nombre"=>"Gourmet"}
  [1m[36mCategory Load (25.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Gourmet"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:32:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering categories/edit.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.1ms | Allocations: 2153)
  Rendered categories/edit.html.erb within layouts/application (Duration: 2.2ms | Allocations: 2217)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1021)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.8ms | Allocations: 3942)
  Rendered layout layouts/application.html.erb (Duration: 58.8ms | Allocations: 10875)
Completed 200 OK in 85ms (Views: 9.5ms | ActiveRecord: 74.9ms | Allocations: 11524)


Started PATCH "/categories/Gourmet" for 127.0.0.1 at 2023-11-17 18:29:10 +0100
Processing by CategoriesController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "category"=>{"nombre"=>"Gourmet", "ruta_img"=>#<ActionDispatch::Http::UploadedFile:0x00007f5408181a60 @tempfile=#<Tempfile:/tmp/RackMultipart20231117-4966-dfnxax.jpeg>, @content_type="image/jpeg", @original_filename="gourmet-category.jpeg", @headers="Content-Disposition: form-data; name=\"category[ruta_img]\"; filename=\"gourmet-category.jpeg\"\r\nContent-Type: image/jpeg\r\n">}, "button"=>"", "nombre"=>"Gourmet"}
  [1m[36mCategory Load (25.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Gourmet"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:36:in `update'
  [1m[36mTRANSACTION (24.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/categories_controller.rb:38:in `update'
  [1m[36mCategory Update (49.4ms)[0m  [1m[33mUPDATE "categories" SET "updated_at" = $1, "ruta_img" = $2 WHERE "categories"."nombre" = $3[0m  [["updated_at", "2023-11-17 17:29:10.852471"], ["ruta_img", "d0efb8085d3ab2ef8594.jpeg"], ["nombre", "Gourmet"]]
  â†³ app/controllers/categories_controller.rb:38:in `update'
  [1m[36mTRANSACTION (25.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/categories_controller.rb:38:in `update'
Redirected to http://localhost:3000/categories/Gourmet
Completed 302 Found in 104ms (ActiveRecord: 124.8ms | Allocations: 2430)


Started GET "/categories/Gourmet" for 127.0.0.1 at 2023-11-17 18:29:10 +0100
Processing by CategoriesController#show as TURBO_STREAM
  Parameters: {"nombre"=>"Gourmet"}
  [1m[36mCategory Load (25.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Gourmet"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='Gourmet' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='Gourmet' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='Gourmet' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Gourmet"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='Gourmet' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Gourmet"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_comment.html.erb (Duration: 26.0ms | Allocations: 650)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 692)
  Rendered categories/show.html.erb within layouts/application (Duration: 52.4ms | Allocations: 1947)
  Rendered layouts/_header.html.erb (Duration: 2.7ms | Allocations: 1029)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.4ms | Allocations: 3877)
  Rendered layout layouts/application.html.erb (Duration: 93.7ms | Allocations: 18341)
Completed 200 OK in 246ms (Views: 19.1ms | ActiveRecord: 224.2ms | Allocations: 21035)


Started GET "/categories" for 127.0.0.1 at 2023-11-17 18:29:11 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 81.0ms | Allocations: 49828)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1059)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.3ms | Allocations: 3871)
  Rendered layout layouts/application.html.erb (Duration: 111.0ms | Allocations: 58424)
Completed 200 OK in 112ms (Views: 37.8ms | ActiveRecord: 73.9ms | Allocations: 58685)


Started GET "/categories/Gourmet" for 127.0.0.1 at 2023-11-17 18:29:53 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"Gourmet"}
  [1m[36mCategory Load (26.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Gourmet"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='Gourmet' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='Gourmet' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='Gourmet' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Gourmet"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='Gourmet' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Gourmet"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_comment.html.erb (Duration: 26.1ms | Allocations: 650)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 696)
  Rendered categories/show.html.erb within layouts/application (Duration: 52.3ms | Allocations: 1951)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1025)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.6ms | Allocations: 3846)
  Rendered layout layouts/application.html.erb (Duration: 83.5ms | Allocations: 10493)
Completed 200 OK in 239ms (Views: 9.1ms | ActiveRecord: 226.5ms | Allocations: 13165)


Started GET "/categories/Gourmet/edit" for 127.0.0.1 at 2023-11-17 18:29:54 +0100
Processing by CategoriesController#edit as HTML
  Parameters: {"nombre"=>"Gourmet"}
  [1m[36mCategory Load (25.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Gourmet"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:32:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering categories/edit.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.6ms | Allocations: 2189)
  Rendered categories/edit.html.erb within layouts/application (Duration: 2.8ms | Allocations: 2253)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1025)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.5ms | Allocations: 3952)
  Rendered layout layouts/application.html.erb (Duration: 59.9ms | Allocations: 10900)
Completed 200 OK in 87ms (Views: 10.8ms | ActiveRecord: 74.9ms | Allocations: 11550)


Started PATCH "/categories/Gourmet" for 127.0.0.1 at 2023-11-17 18:29:58 +0100
Processing by CategoriesController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "category"=>{"nombre"=>"Gourmet", "ruta_img"=>#<ActionDispatch::Http::UploadedFile:0x00007f5400485c50 @tempfile=#<Tempfile:/tmp/RackMultipart20231117-4966-1a16te.png>, @content_type="image/png", @original_filename="gourmet-category.png", @headers="Content-Disposition: form-data; name=\"category[ruta_img]\"; filename=\"gourmet-category.png\"\r\nContent-Type: image/png\r\n">}, "button"=>"", "nombre"=>"Gourmet"}
  [1m[36mCategory Load (25.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Gourmet"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:36:in `update'
  [1m[36mTRANSACTION (25.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/categories_controller.rb:38:in `update'
  [1m[36mCategory Update (50.0ms)[0m  [1m[33mUPDATE "categories" SET "updated_at" = $1, "ruta_img" = $2 WHERE "categories"."nombre" = $3[0m  [["updated_at", "2023-11-17 17:29:58.715935"], ["ruta_img", "1e68dcf64a89d9e54714.png"], ["nombre", "Gourmet"]]
  â†³ app/controllers/categories_controller.rb:38:in `update'
  [1m[36mTRANSACTION (26.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/categories_controller.rb:38:in `update'
Redirected to http://localhost:3000/categories/Gourmet
Completed 302 Found in 105ms (ActiveRecord: 126.4ms | Allocations: 2432)


Started GET "/categories/Gourmet" for 127.0.0.1 at 2023-11-17 18:29:58 +0100
Processing by CategoriesController#show as TURBO_STREAM
  Parameters: {"nombre"=>"Gourmet"}
  [1m[36mCategory Load (25.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Gourmet"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='Gourmet' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='Gourmet' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='Gourmet' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Gourmet"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='Gourmet' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Gourmet"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_comment.html.erb (Duration: 25.7ms | Allocations: 650)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 696)
  Rendered categories/show.html.erb within layouts/application (Duration: 51.4ms | Allocations: 1951)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1029)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.5ms | Allocations: 3856)
  Rendered layout layouts/application.html.erb (Duration: 90.0ms | Allocations: 18329)
Completed 200 OK in 242ms (Views: 16.3ms | ActiveRecord: 222.9ms | Allocations: 20981)


Started GET "/categories" for 127.0.0.1 at 2023-11-17 18:30:00 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 85.1ms | Allocations: 49932)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1062)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.9ms | Allocations: 3856)
  Rendered layout layouts/application.html.erb (Duration: 117.3ms | Allocations: 58514)
Completed 200 OK in 118ms (Views: 43.3ms | ActiveRecord: 74.3ms | Allocations: 58775)


Started GET "/categories/pizza" for 127.0.0.1 at 2023-11-17 18:30:12 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"pizza"}
  [1m[36mCategory Load (26.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "pizza"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='pizza' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='pizza' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='pizza' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "pizza"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='pizza' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "pizza"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 594)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 413)
  Rendered layouts/_comment.html.erb (Duration: 27.8ms | Allocations: 3066)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 499)
  Rendered categories/show.html.erb within layouts/application (Duration: 53.8ms | Allocations: 4170)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1029)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.6ms | Allocations: 3856)
  Rendered layout layouts/application.html.erb (Duration: 84.2ms | Allocations: 12732)
Completed 200 OK in 240ms (Views: 9.6ms | ActiveRecord: 227.0ms | Allocations: 15537)


Started GET "/categories/pizza/edit" for 127.0.0.1 at 2023-11-17 18:30:13 +0100
Processing by CategoriesController#edit as HTML
  Parameters: {"nombre"=>"pizza"}
  [1m[36mCategory Load (25.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "pizza"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:32:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering categories/edit.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.1ms | Allocations: 2189)
  Rendered categories/edit.html.erb within layouts/application (Duration: 2.3ms | Allocations: 2253)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1041)
  [1m[36mUser Load (24.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.2ms | Allocations: 3993)
  Rendered layout layouts/application.html.erb (Duration: 58.4ms | Allocations: 10984)
Completed 200 OK in 85ms (Views: 9.0ms | ActiveRecord: 75.1ms | Allocations: 11634)


Started PATCH "/categories/pizza" for 127.0.0.1 at 2023-11-17 18:30:17 +0100
Processing by CategoriesController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "category"=>{"nombre"=>"pizza", "ruta_img"=>#<ActionDispatch::Http::UploadedFile:0x00007f5400ae1a90 @tempfile=#<Tempfile:/tmp/RackMultipart20231117-4966-x5oiqb.png>, @content_type="image/png", @original_filename="pizza-category.png", @headers="Content-Disposition: form-data; name=\"category[ruta_img]\"; filename=\"pizza-category.png\"\r\nContent-Type: image/png\r\n">}, "button"=>"", "nombre"=>"pizza"}
  [1m[36mCategory Load (25.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "pizza"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:36:in `update'
  [1m[36mTRANSACTION (25.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/categories_controller.rb:38:in `update'
  [1m[36mCategory Update (52.6ms)[0m  [1m[33mUPDATE "categories" SET "updated_at" = $1, "ruta_img" = $2 WHERE "categories"."nombre" = $3[0m  [["updated_at", "2023-11-17 17:30:17.915351"], ["ruta_img", "c56dc9a76bb3f3ba89e9.png"], ["nombre", "pizza"]]
  â†³ app/controllers/categories_controller.rb:38:in `update'
  [1m[36mTRANSACTION (27.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/categories_controller.rb:38:in `update'
Redirected to http://localhost:3000/categories/pizza
Completed 302 Found in 108ms (ActiveRecord: 131.0ms | Allocations: 2448)


Started GET "/categories/pizza" for 127.0.0.1 at 2023-11-17 18:30:17 +0100
Processing by CategoriesController#show as TURBO_STREAM
  Parameters: {"nombre"=>"pizza"}
  [1m[36mCategory Load (25.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "pizza"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='pizza' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='pizza' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='pizza' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "pizza"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='pizza' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "pizza"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 598)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 415)
  Rendered layouts/_comment.html.erb (Duration: 28.3ms | Allocations: 3080)
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 507)
  Rendered categories/show.html.erb within layouts/application (Duration: 54.3ms | Allocations: 4192)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1045)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.1ms | Allocations: 3896)
  Rendered layout layouts/application.html.erb (Duration: 93.6ms | Allocations: 20661)
Completed 200 OK in 247ms (Views: 19.2ms | ActiveRecord: 224.3ms | Allocations: 23442)


Started GET "/categories" for 127.0.0.1 at 2023-11-17 18:30:20 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 84.7ms | Allocations: 50828)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1059)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.4ms | Allocations: 3866)
  Rendered layout layouts/application.html.erb (Duration: 116.6ms | Allocations: 59421)
Completed 200 OK in 117ms (Views: 42.4ms | ActiveRecord: 74.6ms | Allocations: 59682)


Started GET "/categories/Tapas" for 127.0.0.1 at 2023-11-17 18:30:54 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"Tapas"}
  [1m[36mCategory Load (25.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Tapas"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='Tapas' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='Tapas' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='Tapas' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Tapas"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='Tapas' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Tapas"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_comment.html.erb (Duration: 26.0ms | Allocations: 650)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 698)
  Rendered categories/show.html.erb within layouts/application (Duration: 52.2ms | Allocations: 1953)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1033)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.9ms | Allocations: 3867)
  Rendered layout layouts/application.html.erb (Duration: 83.2ms | Allocations: 10536)
Completed 200 OK in 238ms (Views: 9.0ms | ActiveRecord: 225.9ms | Allocations: 13213)


Started GET "/categories/Tapas/edit" for 127.0.0.1 at 2023-11-17 18:30:55 +0100
Processing by CategoriesController#edit as HTML
  Parameters: {"nombre"=>"Tapas"}
  [1m[36mCategory Load (24.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Tapas"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:32:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering categories/edit.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 1.8ms | Allocations: 2205)
  Rendered categories/edit.html.erb within layouts/application (Duration: 1.9ms | Allocations: 2269)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1033)
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.5ms | Allocations: 3972)
  Rendered layout layouts/application.html.erb (Duration: 57.3ms | Allocations: 10931)
Completed 200 OK in 83ms (Views: 8.3ms | ActiveRecord: 73.5ms | Allocations: 11580)


Started PATCH "/categories/Tapas" for 127.0.0.1 at 2023-11-17 18:30:58 +0100
Processing by CategoriesController#update as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "category"=>{"nombre"=>"Tapas", "ruta_img"=>#<ActionDispatch::Http::UploadedFile:0x00007f5400a5f478 @tempfile=#<Tempfile:/tmp/RackMultipart20231117-4966-wrtcmj.jpeg>, @content_type="image/jpeg", @original_filename="tapas-category.jpeg", @headers="Content-Disposition: form-data; name=\"category[ruta_img]\"; filename=\"tapas-category.jpeg\"\r\nContent-Type: image/jpeg\r\n">}, "button"=>"", "nombre"=>"Tapas"}
  [1m[36mCategory Load (25.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Tapas"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:36:in `update'
  [1m[36mTRANSACTION (25.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/categories_controller.rb:38:in `update'
  [1m[36mCategory Update (50.5ms)[0m  [1m[33mUPDATE "categories" SET "updated_at" = $1, "ruta_img" = $2 WHERE "categories"."nombre" = $3[0m  [["updated_at", "2023-11-17 17:30:58.797688"], ["ruta_img", "2f98ee323a4082786305.jpeg"], ["nombre", "Tapas"]]
  â†³ app/controllers/categories_controller.rb:38:in `update'
  [1m[36mTRANSACTION (25.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/categories_controller.rb:38:in `update'
Redirected to http://localhost:3000/categories/Tapas
Completed 302 Found in 105ms (ActiveRecord: 127.2ms | Allocations: 2433)


Started GET "/categories/Tapas" for 127.0.0.1 at 2023-11-17 18:30:58 +0100
Processing by CategoriesController#show as TURBO_STREAM
  Parameters: {"nombre"=>"Tapas"}
  [1m[36mCategory Load (25.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "Tapas"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='Tapas' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='Tapas' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='Tapas' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Tapas"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='Tapas' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (25.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "Tapas"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_comment.html.erb (Duration: 26.1ms | Allocations: 650)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 701)
  Rendered categories/show.html.erb within layouts/application (Duration: 52.3ms | Allocations: 1956)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1037)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.9ms | Allocations: 3876)
  Rendered layout layouts/application.html.erb (Duration: 90.5ms | Allocations: 18387)
Completed 200 OK in 243ms (Views: 15.2ms | ActiveRecord: 225.1ms | Allocations: 21045)


Started GET "/categories" for 127.0.0.1 at 2023-11-17 18:31:00 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 85.4ms | Allocations: 51023)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1075)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.2ms | Allocations: 3911)
  Rendered layout layouts/application.html.erb (Duration: 117.1ms | Allocations: 59724)
Completed 200 OK in 118ms (Views: 43.0ms | ActiveRecord: 74.4ms | Allocations: 59986)


Started GET "/categories/chino" for 127.0.0.1 at 2023-11-17 18:31:52 +0100
Processing by CategoriesController#show as HTML
  Parameters: {"nombre"=>"chino"}
  [1m[36mCategory Load (25.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "chino"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:8:in `show'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND categoria='chino' GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='gari' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND categoria='chino' GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering categories/show.html.erb within layouts/application
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mPost Load (24.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."categoria" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["categoria", "chino"], ["LIMIT", 1000]]
  â†³ app/views/layouts/_comment.html.erb:2:in `each'
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 599)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 416)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 423)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 419)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 419)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 419)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 423)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 421)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 419)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 423)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 421)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 46.9ms | Allocations: 34210)
  Rendered layouts/_add_comment.html.erb (Duration: 0.4ms | Allocations: 509)
  Rendered categories/show.html.erb within layouts/application (Duration: 73.4ms | Allocations: 35324)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1045)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.9ms | Allocations: 3896)
  Rendered layout layouts/application.html.erb (Duration: 104.3ms | Allocations: 43945)
Completed 200 OK in 260ms (Views: 30.4ms | ActiveRecord: 225.5ms | Allocations: 48203)


Started GET "/categories/chino/edit" for 127.0.0.1 at 2023-11-17 18:31:53 +0100
Processing by CategoriesController#edit as HTML
  Parameters: {"nombre"=>"chino"}
  [1m[36mCategory Load (25.6ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "chino"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:32:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering categories/edit.html.erb within layouts/application
  Rendered categories/_form.html.erb (Duration: 2.0ms | Allocations: 2209)
  Rendered categories/edit.html.erb within layouts/application (Duration: 2.2ms | Allocations: 2273)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1037)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.9ms | Allocations: 3982)
  Rendered layout layouts/application.html.erb (Duration: 59.0ms | Allocations: 10955)
Completed 200 OK in 86ms (Views: 9.2ms | ActiveRecord: 75.8ms | Allocations: 11605)


Started GET "/categories" for 127.0.0.1 at 2023-11-17 18:31:57 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 54.5ms | Allocations: 4390)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1063)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.0ms | Allocations: 3876)
  Rendered layout layouts/application.html.erb (Duration: 85.9ms | Allocations: 12997)
Completed 200 OK in 87ms (Views: 12.4ms | ActiveRecord: 73.9ms | Allocations: 13258)


Started GET "/admin" for 127.0.0.1 at 2023-11-17 18:33:17 +0100
Processing by AdminController#dashboard as HTML
  [1m[36mPost Count (51.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE (created_at > '2023-10-17 17:33:17.792365')[0m
  â†³ app/controllers/admin_controller.rb:5:in `dashboard'
  [1m[36mReview Count (26.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE (created_at > '2023-10-17 17:33:17.844356')[0m
  â†³ app/controllers/admin_controller.rb:6:in `dashboard'
  [1m[36mResponse Count (24.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE (created_at > '2023-10-17 17:33:17.897305')[0m
  â†³ app/controllers/admin_controller.rb:7:in `dashboard'
  [1m[36mUser Count (24.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  â†³ app/controllers/admin_controller.rb:9:in `dashboard'
  Rendering layout layouts/application.html.erb
  Rendering admin/dashboard.html.erb within layouts/application
  Rendered admin/dashboard.html.erb within layouts/application (Duration: 0.5ms | Allocations: 355)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1063)
  [1m[36mUser Load (24.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 51.9ms | Allocations: 3983)
  Rendered layout layouts/application.html.erb (Duration: 56.1ms | Allocations: 9478)
Completed 200 OK in 238ms (Views: 7.8ms | ActiveRecord: 226.9ms | Allocations: 13144)


Started GET "/categories" for 127.0.0.1 at 2023-11-17 18:33:19 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 53.6ms | Allocations: 4362)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1063)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.2ms | Allocations: 3876)
  Rendered layout layouts/application.html.erb (Duration: 85.7ms | Allocations: 12969)
Completed 200 OK in 86ms (Views: 11.5ms | ActiveRecord: 74.5ms | Allocations: 13230)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-17 18:33:29 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRank Load (24.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:11:in `map'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  Rendered restaurants/index.html.erb within layouts/application (Duration: 53.6ms | Allocations: 7811)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1038)
  [1m[36mUser Load (24.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 52.2ms | Allocations: 3985)
  Rendered layout layouts/application.html.erb (Duration: 109.1ms | Allocations: 16708)
Completed 200 OK in 269ms (Views: 11.7ms | ActiveRecord: 249.6ms | Allocations: 25293)


Started GET "/users/gari" for 127.0.0.1 at 2023-11-17 18:33:34 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"gari"}
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (25.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 17:33:34.849197')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 17:33:34.874550')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 17:33:34.899922')[0m  [["autor", "gari"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 3.4ms | Allocations: 3029)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1038)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "gari"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "gari"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 27.3ms | Allocations: 3877)
  Rendered layout layouts/application.html.erb (Duration: 33.9ms | Allocations: 11614)
Completed 200 OK in 238ms (Views: 10.7ms | ActiveRecord: 220.8ms | Allocations: 16326)


Started GET "/logout" for 127.0.0.1 at 2023-11-17 18:33:35 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 433)


Started GET "/" for 127.0.0.1 at 2023-11-17 18:33:35 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (49.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 52.8ms | Allocations: 3939)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1063)
  Rendered layouts/_sidenav.html.erb (Duration: 1.8ms | Allocations: 2541)
  Rendered layout layouts/application.html.erb (Duration: 57.9ms | Allocations: 11211)
Completed 200 OK in 58ms (Views: 8.6ms | ActiveRecord: 49.5ms | Allocations: 11473)


Started GET "/logout" for 127.0.0.1 at 2023-11-17 18:33:40 +0100
Processing by LoginsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 1ms (ActiveRecord: 0.0ms | Allocations: 362)


Started GET "/" for 127.0.0.1 at 2023-11-17 18:33:40 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (50.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 53.2ms | Allocations: 3960)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1063)
  Rendered layouts/_sidenav.html.erb (Duration: 1.5ms | Allocations: 2539)
  Rendered layout layouts/application.html.erb (Duration: 57.6ms | Allocations: 11230)
Completed 200 OK in 58ms (Views: 7.6ms | ActiveRecord: 50.3ms | Allocations: 11491)


Started GET "/login" for 127.0.0.1 at 2023-11-17 18:33:42 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 2.2ms | Allocations: 2881)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1050)
  Rendered layouts/_sidenav.html.erb (Duration: 1.6ms | Allocations: 2569)
  Rendered layout layouts/application.html.erb (Duration: 11.0ms | Allocations: 10228)
Completed 200 OK in 12ms (Views: 11.4ms | ActiveRecord: 0.0ms | Allocations: 10678)


Started POST "/login" for 127.0.0.1 at 2023-11-17 18:33:48 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"Atreides", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (25.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 193ms (ActiveRecord: 25.8ms | Allocations: 867)


Started GET "/" for 127.0.0.1 at 2023-11-17 18:33:48 +0100
Processing by CategoriesController#index as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 54.1ms | Allocations: 4379)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1075)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.5ms | Allocations: 4433)
  Rendered layout layouts/application.html.erb (Duration: 86.1ms | Allocations: 13593)
Completed 200 OK in 87ms (Views: 11.0ms | ActiveRecord: 75.3ms | Allocations: 13858)


Started GET "/categories" for 127.0.0.1 at 2023-11-17 18:33:50 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (25.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 54.0ms | Allocations: 4353)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1075)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 28.6ms | Allocations: 4423)
  Rendered layout layouts/application.html.erb (Duration: 85.8ms | Allocations: 13551)
Completed 200 OK in 86ms (Views: 11.2ms | ActiveRecord: 74.9ms | Allocations: 13812)


Started GET "/users/Atreides" for 127.0.0.1 at 2023-11-17 18:33:51 +0100
Processing by UsersController#show as HTML
  Parameters: {"id"=>"Atreides"}
  [1m[36mUser Load (24.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:23:in `show'
  [1m[36mPost Count (25.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:25:in `show'
  [1m[36mReview Count (24.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:28:in `show'
  [1m[36mResponse Count (25.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:31:in `show'
  [1m[36mPost Count (24.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "posts" WHERE "posts"."autor" = $1 AND (created_at > '2023-10-17 17:33:51.860972')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:35:in `show'
  [1m[36mReview Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."autor" = $1 AND (created_at > '2023-10-17 17:33:51.885999')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:36:in `show'
  [1m[36mResponse Count (24.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "responses" WHERE "responses"."autor" = $1 AND (created_at > '2023-10-17 17:33:51.911150')[0m  [["autor", "Atreides"]]
  â†³ app/controllers/users_controller.rb:37:in `show'
  [1m[36mRestaurant Count (24.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:40:in `show'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/controllers/users_controller.rb:49:in `show'
  [1m[36mReview Count (24.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 17:33:51.987876')[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/controllers/users_controller.rb:50:in `block in show'
  [1m[36mDish Load (24.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/controllers/users_controller.rb:52:in `block in show'
  [1m[36mReview Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 AND (created_at > '2023-10-17 17:33:52.099778')[0m  [["reviewable_id", 4], ["reviewable_type", "Dish"]]
  â†³ app/controllers/users_controller.rb:53:in `block (2 levels) in show'
  [1m[36mReaction Count (24.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Like"]]
  â†³ app/controllers/users_controller.rb:55:in `block in show'
  [1m[36mReaction Count (24.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "reactions" WHERE "reactions"."who" = $1 AND "reactions"."reaccion" = $2[0m  [["who", "3"], ["reaccion", "Dislike"]]
  â†³ app/controllers/users_controller.rb:56:in `block in show'
  Rendering layout layouts/application.html.erb
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (Duration: 2.2ms | Allocations: 2203)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1038)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE Restaurant Load (0.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 3.4ms | Allocations: 4279)
  Rendered layout layouts/application.html.erb (Duration: 8.7ms | Allocations: 11192)
Completed 200 OK in 453ms (Views: 9.0ms | ActiveRecord: 421.3ms | Allocations: 34678)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-17 18:33:55 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRank Load (49.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:11:in `map'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  Rendered restaurants/index.html.erb within layouts/application (Duration: 52.7ms | Allocations: 7088)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1038)
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.9ms | Allocations: 4496)
  Rendered layout layouts/application.html.erb (Duration: 110.1ms | Allocations: 16519)
Completed 200 OK in 237ms (Views: 11.7ms | ActiveRecord: 222.0ms | Allocations: 18489)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 18:33:56 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 1.5ms | Allocations: 2657)
  [1m[36mDish Load (24.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 603)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 421)
  Rendered layouts/_comment.html.erb (Duration: 28.0ms | Allocations: 3583)
  Rendered layouts/_add_comment.html.erb (Duration: 0.4ms | Allocations: 510)
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 419)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 2.6ms | Allocations: 5033)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 84.9ms | Allocations: 14264)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1037)
  [1m[36mUser Load (24.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.1ms | Allocations: 4496)
  Rendered layout layouts/application.html.erb (Duration: 141.0ms | Allocations: 23461)
Completed 200 OK in 476ms (Views: 17.5ms | ActiveRecord: 448.0ms | Allocations: 32870)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-17 22:29:34 +0100
  [1m[36mActiveRecord::SchemaMigration Load (25.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (26.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (26.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 1164.8ms | Allocations: 37540)
  [1m[36mDish Load (24.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (24.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 1041)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 418)
  Rendered layouts/_comment.html.erb (Duration: 76.9ms | Allocations: 5953)
  Rendered layouts/_add_comment.html.erb (Duration: 1.1ms | Allocations: 677)
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 1440.8ms | Allocations: 49054)
  Rendered layouts/_header.html.erb (Duration: 16.6ms | Allocations: 1376)
  Rendered layouts/_sidenav.html.erb (Duration: 4.7ms | Allocations: 3385)
  Rendered layout layouts/application.html.erb (Duration: 1609.9ms | Allocations: 72819)
Completed 200 OK in 2604ms (Views: 1503.7ms | ActiveRecord: 711.8ms | Allocations: 128544)


Started GET "/categories" for 127.0.0.1 at 2023-11-17 22:29:41 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (49.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 254.9ms | Allocations: 7055)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1063)
  Rendered layouts/_sidenav.html.erb (Duration: 1.6ms | Allocations: 2539)
  Rendered layout layouts/application.html.erb (Duration: 259.3ms | Allocations: 14384)
Completed 200 OK in 298ms (Views: 184.9ms | ActiveRecord: 74.8ms | Allocations: 16009)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-17 22:29:55 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRank Load (51.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:11:in `map'
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.9ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  Rendered restaurants/index.html.erb within layouts/application (Duration: 54.7ms | Allocations: 7841)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1052)
  Rendered layouts/_sidenav.html.erb (Duration: 1.9ms | Allocations: 2574)
  Rendered layout layouts/application.html.erb (Duration: 60.0ms | Allocations: 15378)
Completed 200 OK in 198ms (Views: 11.0ms | ActiveRecord: 176.9ms | Allocations: 17454)


Started GET "/login" for 127.0.0.1 at 2023-11-17 22:30:09 +0100
Processing by LoginsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 79.9ms | Allocations: 3152)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1038)
  Rendered layouts/_sidenav.html.erb (Duration: 1.4ms | Allocations: 2540)
  Rendered layout layouts/application.html.erb (Duration: 84.4ms | Allocations: 10426)
Completed 200 OK in 154ms (Views: 84.9ms | ActiveRecord: 25.5ms | Allocations: 18006)


Started POST "/login" for 127.0.0.1 at 2023-11-17 22:30:14 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"atreides", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (26.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "atreides"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 1.9ms | Allocations: 2338)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1038)
  Rendered layouts/_sidenav.html.erb (Duration: 1.9ms | Allocations: 2539)
  Rendered layout layouts/application.html.erb (Duration: 7.7ms | Allocations: 9646)
Completed 200 OK in 61ms (Views: 8.1ms | ActiveRecord: 26.3ms | Allocations: 10852)


Started POST "/login" for 127.0.0.1 at 2023-11-17 22:30:20 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"atreides", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (26.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "atreides"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 1.3ms | Allocations: 2337)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1038)
  Rendered layouts/_sidenav.html.erb (Duration: 4.2ms | Allocations: 2541)
  Rendered layout layouts/application.html.erb (Duration: 8.2ms | Allocations: 9604)
Completed 200 OK in 36ms (Views: 8.5ms | ActiveRecord: 26.3ms | Allocations: 10486)


Started POST "/login" for 127.0.0.1 at 2023-11-17 22:30:21 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"atreides", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (31.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "atreides"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
  Rendering layout layouts/application.html.erb
  Rendering logins/new.html.erb within layouts/application
  Rendered logins/new.html.erb within layouts/application (Duration: 1.6ms | Allocations: 2348)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1044)
  Rendered layouts/_sidenav.html.erb (Duration: 1.6ms | Allocations: 2553)
  Rendered layout layouts/application.html.erb (Duration: 6.4ms | Allocations: 9664)
Completed 200 OK in 39ms (Views: 6.6ms | ActiveRecord: 31.1ms | Allocations: 10539)


Started POST "/login" for 127.0.0.1 at 2023-11-17 22:30:25 +0100
Processing by LoginsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "nombre"=>"Atreides", "password"=>"[FILTERED]", "commit"=>"INICIAR SESIÃ“N"}
  [1m[36mUser Load (26.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/controllers/logins_controller.rb:7:in `create'
Redirected to http://localhost:3000/
Completed 302 Found in 190ms (ActiveRecord: 26.0ms | Allocations: 957)


Started GET "/" for 127.0.0.1 at 2023-11-17 22:30:25 +0100
Processing by CategoriesController#index as TURBO_STREAM
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (30.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (24.7ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 58.6ms | Allocations: 4393)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1067)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 112.9ms | Allocations: 8763)
  Rendered layout layouts/application.html.erb (Duration: 174.5ms | Allocations: 17907)
Completed 200 OK in 175ms (Views: 69.4ms | ActiveRecord: 105.4ms | Allocations: 18173)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-17 22:30:33 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRank Load (50.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:11:in `map'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  Rendered restaurants/index.html.erb within layouts/application (Duration: 52.6ms | Allocations: 7092)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1038)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.5ms | Allocations: 4498)
  Rendered layout layouts/application.html.erb (Duration: 109.5ms | Allocations: 16494)
Completed 200 OK in 238ms (Views: 11.7ms | ActiveRecord: 224.2ms | Allocations: 18463)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 22:30:34 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.1ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 1.4ms | Allocations: 2265)
  [1m[36mDish Load (24.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 606)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 421)
  Rendered layouts/_comment.html.erb (Duration: 27.7ms | Allocations: 2736)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 511)
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 421)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 3.0ms | Allocations: 5077)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 105.8ms | Allocations: 18166)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1051)
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.5ms | Allocations: 4538)
  Rendered layout layouts/application.html.erb (Duration: 164.7ms | Allocations: 27463)
Completed 200 OK in 474ms (Views: 40.1ms | ActiveRecord: 424.0ms | Allocations: 36654)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 22:46:47 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (25.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (26.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 16.3ms | Allocations: 1843)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 17.1ms | Allocations: 2508)
  Rendered layout layouts/application.html.erb (Duration: 17.2ms | Allocations: 2609)
Completed 500 Internal Server Error in 1220ms (ActiveRecord: 529.0ms | Allocations: 32918)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <div class="restaurants_header">
  <div class="restaurants_img">
    <% if locals[:restaurant].ruta_img_fondo.present? %>
      <%= image_tag locals[:restaurant].ruta_img_fondo %>
    <% else %>
      <%= image_tag "Default-restaurant-img" %>
    <% end %>
  </div>
  <div class="restaurants_header_content">
    <div>
      <div class="title">
        <%= locals[:restaurant].nombre %> - <span class="title_key_word"><%= locals[:restaurant].categoria %></span>
      </div>
      <div class="restaurant_rating_container">
        <% locals[:ratings].floor.times do %>
          <%= image_tag "Star", style: "width: 40px; height: 40px" %>
        <% end %>
        <div class="restaurant_rating_text"> - <span><%= locals[:ratings] %></span></div>
      </div>
    </div>
    <div>
      <% if session[:username].present? and user_is_owner?(restaurant.id) %>

    </div>
    <div>
      <% if locals[:statistics] %>
        <div class="restaurants_stats_button">
          <%= image_tag "Barchart" %>
          <span class="restaurant_stats_text">EstadÃ­sticas</span>
        </div> 
      <% else %>
        <div class="restaurants_einaeats_button">
          <%= image_tag "Bolsa-einaeats" %>
          <span class="restaurant_einaeats_button_text">Pedir en EinaEats</span>
        </div> 
      <% end %>
    </div>
  </div>

  <div class="restaurants_header_botones">
    <a href="#restaurant_menu" class="restaurants_header_page_button">
      <div>MenÃº</div>
    </a>
    <a href="#restaurant_reviews" class="restaurants_header_page_button">
      <div>ReseÃ±as</div>
    </a>
    <a href="#restaurant_posts" class="restaurants_header_page_button">
      <div>Posts del restaurante</div> 
    </a>
    <a href="#restaurant_info" class="restaurants_header_page_button">
      <div>InformaciÃ³n</div>
    </a>
  </div>
</div>

):
1:    <div class="restaurants_header">
2:      <div class="restaurants_img">
3:        <% if locals[:restaurant].ruta_img_fondo.present? %>
4:          <%= image_tag locals[:restaurant].ruta_img_fondo %>
5:        <% else %>
6:          <%= image_tag "Default-restaurant-img" %>
7:        <% end %>
8:      </div>
9:      <div class="restaurants_header_content">
10:        <div>
11:          <div class="title">
12:            <%= locals[:restaurant].nombre %> - <span class="title_key_word"><%= locals[:restaurant].categoria %></span>
13:          </div>
14:          <div class="restaurant_rating_container">
15:            <% locals[:ratings].floor.times do %>
16:              <%= image_tag "Star", style: "width: 40px; height: 40px" %>
17:            <% end %>
18:            <div class="restaurant_rating_text"> - <span><%= locals[:ratings] %></span></div>
19:          </div>
20:        </div>
21:        <div>
22:          <% if session[:username].present? and user_is_owner?(restaurant.id) %>
23:    
24:        </div>
25:        <div>
26:          <% if locals[:statistics] %>
27:            <div class="restaurants_stats_button">
28:              <%= image_tag "Barchart" %>
29:              <span class="restaurant_stats_text">EstadÃ­sticas</span>
30:            </div> 
31:          <% else %>
32:            <div class="restaurants_einaeats_button">
33:              <%= image_tag "Bolsa-einaeats" %>
34:              <span class="restaurant_einaeats_button_text">Pedir en EinaEats</span>
35:            </div> 
36:          <% end %>
37:        </div>
38:      </div>
39:    
40:      <div class="restaurants_header_botones">
41:        <a href="#restaurant_menu" class="restaurants_header_page_button">
42:          <div>MenÃº</div>
43:        </a>
44:        <a href="#restaurant_reviews" class="restaurants_header_page_button">
45:          <div>ReseÃ±as</div>
46:        </a>
47:        <a href="#restaurant_posts" class="restaurants_header_page_button">
48:          <div>Posts del restaurante</div> 
49:        </a>
50:        <a href="#restaurant_info" class="restaurants_header_page_button">
51:          <div>InformaciÃ³n</div>
52:        </a>
53:      </div>
54:    </div>
  
app/views/restaurants/_header.html.erb:57: syntax error, unexpected end-of-input
app/views/restaurants/show.html.erb:2
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/show_exceptions.rb:36)
Processing by ErrorsController#internal_server_error as HTML
  Parameters: {"id"=>"3"}
  Rendering layout layouts/application.html.erb
  Rendering errors/internal_server_error.html.erb within layouts/application
  Rendered errors/internal_server_error.html.erb within layouts/application (Duration: 0.2ms | Allocations: 91)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1372)
  [1m[36mUser Load (25.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 111.0ms | Allocations: 13006)
  Rendered layout layouts/application.html.erb (Duration: 119.6ms | Allocations: 33470)
Completed 500 Internal Server Error in 140ms (Views: 89.3ms | ActiveRecord: 50.7ms | Allocations: 33934)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 22:47:23 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 2.1ms | Allocations: 3322)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 3.0ms | Allocations: 3975)
  Rendered layout layouts/application.html.erb (Duration: 3.1ms | Allocations: 4068)
Completed 500 Internal Server Error in 625ms (ActiveRecord: 586.8ms | Allocations: 32308)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `restaurant' for #<ActionView::Base:0x0000000001c048>):
    19:       </div>
    20:     </div>
    21:     <div>
    22:       <% if session[:username].present? and user_is_owner?(restaurant.id) %>
    23:         
    24:       <% end %>
    25:     </div>
  
app/views/restaurants/_header.html.erb:22
app/views/restaurants/show.html.erb:2
Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 22:47:45 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.6ms | Allocations: 2996)
  [1m[36mDish Load (25.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 3.0ms | Allocations: 858)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 422)
  Rendered layouts/_comment.html.erb (Duration: 58.4ms | Allocations: 5427)
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 659)
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 424)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 3.1ms | Allocations: 5054)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 221.3ms | Allocations: 22355)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1310)
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 110.3ms | Allocations: 13319)
  Rendered layout layouts/application.html.erb (Duration: 340.9ms | Allocations: 55756)
Completed 200 OK in 929ms (Views: 89.8ms | ActiveRecord: 810.0ms | Allocations: 84023)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 22:47:53 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.3ms | Allocations: 2997)
  [1m[36mDish Load (24.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 859)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 422)
  Rendered layouts/_comment.html.erb (Duration: 33.7ms | Allocations: 5426)
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 657)
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 424)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 3.2ms | Allocations: 5050)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 178.2ms | Allocations: 33860)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1310)
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 111.1ms | Allocations: 13352)
  Rendered layout layouts/application.html.erb (Duration: 297.8ms | Allocations: 67294)
Completed 200 OK in 885ms (Views: 47.1ms | ActiveRecord: 809.4ms | Allocations: 95505)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 22:48:48 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (25.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.5ms | Allocations: 2512)
  [1m[36mDish Load (25.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 596)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 421)
  Rendered layouts/_comment.html.erb (Duration: 28.5ms | Allocations: 2712)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 504)
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 419)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 2.8ms | Allocations: 5033)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 110.5ms | Allocations: 12613)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1051)
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.2ms | Allocations: 4538)
  Rendered layout layouts/application.html.erb (Duration: 376.7ms | Allocations: 83708)
Completed 200 OK in 688ms (Views: 227.0ms | ActiveRecord: 454.3ms | Allocations: 89045)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 22:50:04 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 27.0ms | Allocations: 2996)
  [1m[36mDish Load (24.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 857)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 422)
  Rendered layouts/_comment.html.erb (Duration: 30.9ms | Allocations: 5410)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 657)
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 424)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 2.8ms | Allocations: 5050)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 171.0ms | Allocations: 22269)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1310)
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 112.8ms | Allocations: 13252)
  Rendered layout layouts/application.html.erb (Duration: 293.5ms | Allocations: 55640)
Completed 200 OK in 895ms (Views: 42.4ms | ActiveRecord: 812.5ms | Allocations: 83895)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 22:50:46 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.5ms | Allocations: 2984)
  [1m[36mDish Load (24.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 850)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 422)
  Rendered layouts/_comment.html.erb (Duration: 30.3ms | Allocations: 5386)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 650)
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 424)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 3.2ms | Allocations: 5050)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 169.2ms | Allocations: 22212)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1315)
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 113.4ms | Allocations: 13339)
  Rendered layout layouts/application.html.erb (Duration: 311.9ms | Allocations: 62133)
Completed 200 OK in 903ms (Views: 61.6ms | ActiveRecord: 814.0ms | Allocations: 90187)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 22:51:08 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (23.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (23.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (23.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 27.6ms | Allocations: 2993)
  [1m[36mDish Load (24.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 853)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 422)
  Rendered layouts/_comment.html.erb (Duration: 30.6ms | Allocations: 5398)
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 654)
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 424)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 2.5ms | Allocations: 5050)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 169.6ms | Allocations: 22241)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1296)
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 116.1ms | Allocations: 13225)
  Rendered layout layouts/application.html.erb (Duration: 293.9ms | Allocations: 55428)
Completed 200 OK in 867ms (Views: 43.3ms | ActiveRecord: 791.7ms | Allocations: 83582)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 22:53:15 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.9ms | Allocations: 3682)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 27.6ms | Allocations: 4333)
  Rendered layout layouts/application.html.erb (Duration: 27.7ms | Allocations: 4426)
Completed 500 Internal Server Error in 621ms (ActiveRecord: 585.5ms | Allocations: 32562)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (No route matches {:action=>"edit", :controller=>"categories", :id=>"3"}, missing required keys: [:nombre]):
    23:       <div>
    24:         <% if session[:username].present? and user_is_owner?(locals[:restaurant].id) %>
    25:           <div class="restaurants_einaeats_button">
    26:             <%= link_to edit_category_path do %><span>Editar</span><% end %>
    27:           </div> 
    28:         <% end %>
    29:       </div>
  
app/views/restaurants/_header.html.erb:26
app/views/restaurants/show.html.erb:2
Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 22:53:43 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 27.1ms | Allocations: 3094)
  [1m[36mDish Load (24.8ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 857)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 422)
  Rendered layouts/_comment.html.erb (Duration: 30.6ms | Allocations: 5416)
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 657)
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 424)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 2.8ms | Allocations: 5050)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 168.7ms | Allocations: 22342)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1305)
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 112.0ms | Allocations: 13265)
  Rendered layout layouts/application.html.erb (Duration: 290.9ms | Allocations: 55669)
Completed 200 OK in 888ms (Views: 41.2ms | ActiveRecord: 812.5ms | Allocations: 83958)


Started GET "/categories/3/edit" for 127.0.0.1 at 2023-11-17 22:53:48 +0100
Processing by CategoriesController#edit as HTML
  Parameters: {"nombre"=>"3"}
  [1m[36mCategory Load (25.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "3"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:32:in `edit'
Completed 404 Not Found in 79ms (ActiveRecord: 50.3ms | Allocations: 2341)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::RecordNotFound (Couldn't find Category with 'nombre'=3):
  
app/controllers/categories_controller.rb:32:in `edit'
Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 22:53:51 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.8ms | Allocations: 2554)
  [1m[36mDish Load (24.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 603)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 421)
  Rendered layouts/_comment.html.erb (Duration: 28.1ms | Allocations: 2733)
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 511)
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 419)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 3.1ms | Allocations: 5033)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 110.5ms | Allocations: 12649)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1051)
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.2ms | Allocations: 4540)
  Rendered layout layouts/application.html.erb (Duration: 167.8ms | Allocations: 21956)
Completed 200 OK in 473ms (Views: 18.7ms | ActiveRecord: 447.1ms | Allocations: 27306)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 22:54:04 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 27.7ms | Allocations: 3095)
  [1m[36mDish Load (24.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 857)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 422)
  Rendered layouts/_comment.html.erb (Duration: 31.0ms | Allocations: 5416)
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 657)
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 424)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 3.0ms | Allocations: 5050)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 171.1ms | Allocations: 22364)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1305)
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 112.3ms | Allocations: 13256)
  Rendered layout layouts/application.html.erb (Duration: 293.2ms | Allocations: 55684)
Completed 200 OK in 889ms (Views: 42.1ms | ActiveRecord: 811.0ms | Allocations: 83982)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 22:54:28 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.8ms | Allocations: 3105)
  [1m[36mDish Load (25.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 857)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 422)
  Rendered layouts/_comment.html.erb (Duration: 31.0ms | Allocations: 5417)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 657)
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 424)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 3.3ms | Allocations: 5050)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 170.2ms | Allocations: 22355)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1306)
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 111.1ms | Allocations: 13239)
  Rendered layout layouts/application.html.erb (Duration: 291.7ms | Allocations: 55659)
Completed 200 OK in 881ms (Views: 41.7ms | ActiveRecord: 808.6ms | Allocations: 83836)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 22:55:30 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.6ms | Allocations: 3106)
  [1m[36mDish Load (24.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 857)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 422)
  Rendered layouts/_comment.html.erb (Duration: 31.1ms | Allocations: 5416)
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 657)
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 424)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 2.9ms | Allocations: 5050)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 169.6ms | Allocations: 22356)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1306)
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 111.3ms | Allocations: 13239)
  Rendered layout layouts/application.html.erb (Duration: 297.9ms | Allocations: 62206)
Completed 200 OK in 891ms (Views: 48.6ms | ActiveRecord: 810.1ms | Allocations: 90309)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 22:55:37 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (25.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.1ms | Allocations: 2548)
  [1m[36mDish Load (24.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 596)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 421)
  Rendered layouts/_comment.html.erb (Duration: 27.6ms | Allocations: 2712)
  Rendered layouts/_add_comment.html.erb (Duration: 0.4ms | Allocations: 504)
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 419)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 2.6ms | Allocations: 5033)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 108.1ms | Allocations: 12612)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1037)
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.3ms | Allocations: 4496)
  Rendered layout layouts/application.html.erb (Duration: 171.8ms | Allocations: 28345)
Completed 200 OK in 481ms (Views: 23.3ms | ActiveRecord: 450.2ms | Allocations: 33701)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 22:55:47 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (25.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.1ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.3ms | Allocations: 2561)
  [1m[36mDish Load (24.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 603)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 422)
  Rendered layouts/_comment.html.erb (Duration: 27.6ms | Allocations: 2734)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 511)
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 2.8ms | Allocations: 5036)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 108.2ms | Allocations: 12663)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1051)
  [1m[36mUser Load (25.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.3ms | Allocations: 4538)
  Rendered layout layouts/application.html.erb (Duration: 172.2ms | Allocations: 28503)
Completed 200 OK in 482ms (Views: 24.5ms | ActiveRecord: 449.3ms | Allocations: 33838)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 22:56:50 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 27.0ms | Allocations: 3115)
  [1m[36mDish Load (24.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 857)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 423)
  Rendered layouts/_comment.html.erb (Duration: 30.2ms | Allocations: 5417)
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 657)
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 424)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 2.6ms | Allocations: 5052)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 168.7ms | Allocations: 22390)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1306)
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 111.8ms | Allocations: 13257)
  Rendered layout layouts/application.html.erb (Duration: 297.1ms | Allocations: 62256)
Completed 200 OK in 885ms (Views: 46.4ms | ActiveRecord: 807.7ms | Allocations: 90466)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 22:57:07 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.9ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.5ms | Allocations: 3115)
  [1m[36mDish Load (24.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 857)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 422)
  Rendered layouts/_comment.html.erb (Duration: 30.2ms | Allocations: 5410)
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 657)
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 424)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 3.0ms | Allocations: 5050)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 167.4ms | Allocations: 22355)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1306)
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 110.7ms | Allocations: 13240)
  Rendered layout layouts/application.html.erb (Duration: 295.0ms | Allocations: 62203)
Completed 200 OK in 883ms (Views: 45.4ms | ActiveRecord: 807.5ms | Allocations: 90467)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 22:59:40 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 36.4ms | Allocations: 3113)
  [1m[36mDish Load (24.2ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 857)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 422)
  Rendered layouts/_comment.html.erb (Duration: 31.3ms | Allocations: 5425)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 657)
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 424)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 3.3ms | Allocations: 5050)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 183.8ms | Allocations: 22395)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1306)
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 112.2ms | Allocations: 13257)
  Rendered layout layouts/application.html.erb (Duration: 305.6ms | Allocations: 55716)
Completed 200 OK in 929ms (Views: 59.6ms | ActiveRecord: 808.6ms | Allocations: 83944)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 23:00:02 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (23.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (23.6ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (22.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.0ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 27.5ms | Allocations: 3105)
  [1m[36mDish Load (23.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (23.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 857)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 422)
  Rendered layouts/_comment.html.erb (Duration: 29.3ms | Allocations: 5417)
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 657)
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 424)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 2.7ms | Allocations: 5050)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 166.6ms | Allocations: 22367)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1306)
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 113.3ms | Allocations: 13278)
  Rendered layout layouts/application.html.erb (Duration: 289.8ms | Allocations: 55711)
Completed 200 OK in 874ms (Views: 42.1ms | ActiveRecord: 800.1ms | Allocations: 83923)


Started GET "/categories/3/edit" for 127.0.0.1 at 2023-11-17 23:00:04 +0100
Processing by CategoriesController#edit as HTML
  Parameters: {"nombre"=>"3"}
  [1m[36mCategory Load (25.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "3"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:32:in `edit'
Completed 404 Not Found in 54ms (ActiveRecord: 50.3ms | Allocations: 2388)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::RecordNotFound (Couldn't find Category with 'nombre'=3):
  
app/controllers/categories_controller.rb:32:in `edit'
Started GET "/categories/3/edit" for 127.0.0.1 at 2023-11-17 23:00:24 +0100
Processing by CategoriesController#edit as HTML
  Parameters: {"nombre"=>"3"}
  [1m[36mCategory Load (25.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories" WHERE "categories"."nombre" = $1 LIMIT $2[0m  [["nombre", "3"], ["LIMIT", 1]]
  â†³ app/controllers/categories_controller.rb:32:in `edit'
Completed 404 Not Found in 81ms (ActiveRecord: 51.1ms | Allocations: 2585)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActiveRecord::RecordNotFound (Couldn't find Category with 'nombre'=3):
  
app/controllers/categories_controller.rb:32:in `edit'
Started GET "/restaurants" for 127.0.0.1 at 2023-11-17 23:00:25 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:11:in `map'
  [1m[36mRestaurant Load (23.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (23.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (23.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  Rendered restaurants/index.html.erb within layouts/application (Duration: 51.7ms | Allocations: 9091)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1311)
  [1m[36mUser Load (23.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 107.4ms | Allocations: 13301)
  Rendered layout layouts/application.html.erb (Duration: 168.8ms | Allocations: 42635)
Completed 200 OK in 404ms (Views: 26.2ms | ActiveRecord: 364.1ms | Allocations: 55764)


Started GET "/" for 127.0.0.1 at 2023-11-17 23:00:44 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mUser Load (25.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:3:in `getCurrentUser'
  [1m[36mCategory Load (25.0ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 58.8ms | Allocations: 4750)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1077)
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 29.3ms | Allocations: 4433)
  Rendered layout layouts/application.html.erb (Duration: 91.6ms | Allocations: 13993)
Completed 200 OK in 93ms (Views: 15.8ms | ActiveRecord: 76.3ms | Allocations: 14461)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-17 23:00:45 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRank Load (50.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:11:in `map'
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  Rendered restaurants/index.html.erb within layouts/application (Duration: 53.6ms | Allocations: 7082)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1040)
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.8ms | Allocations: 4503)
  Rendered layout layouts/application.html.erb (Duration: 111.7ms | Allocations: 16478)
Completed 200 OK in 241ms (Views: 12.5ms | ActiveRecord: 225.1ms | Allocations: 18467)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 23:00:47 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.7ms | Allocations: 3022)
  [1m[36mDish Load (24.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 857)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 422)
  Rendered layouts/_comment.html.erb (Duration: 30.5ms | Allocations: 5410)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 657)
  [1m[35m (24.2ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 424)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 2.9ms | Allocations: 5050)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 169.0ms | Allocations: 22258)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1037)
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.4ms | Allocations: 4500)
  Rendered layout layouts/application.html.erb (Duration: 225.6ms | Allocations: 31455)
Completed 200 OK in 648ms (Views: 25.0ms | ActiveRecord: 606.5ms | Allocations: 48474)


Started GET "/restaurants/3/edit" for 127.0.0.1 at 2023-11-17 23:00:48 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:33:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  Rendered restaurants/_form.html.erb (Duration: 0.2ms | Allocations: 82)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 0.7ms | Allocations: 320)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 1075)
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 55.2ms | Allocations: 4497)
  Rendered layout layouts/application.html.erb (Duration: 59.6ms | Allocations: 9940)
Completed 200 OK in 86ms (Views: 10.1ms | ActiveRecord: 74.8ms | Allocations: 10687)


Started GET "/restaurants/3/edit" for 127.0.0.1 at 2023-11-17 23:02:40 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:33:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  Rendered restaurants/_form.html.erb (Duration: 1.7ms | Allocations: 1697)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 2.2ms | Allocations: 1941)
  Rendered layout layouts/application.html.erb (Duration: 2.4ms | Allocations: 2034)
Completed 500 Internal Server Error in 142ms (ActiveRecord: 129.8ms | Allocations: 11199)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `ruta_img' for #<Restaurant id: 3, categoria: "chino", nombre: "Fumanchu", ruta_img_perfil: nil, ruta_img_fondo: nil, direccion: "c/123", telefono: "333333333", horario: "soleado">):
     8:       </div>
     9:       <div class="my_account_profile_img_container">
    10:         <div class="my_account_profile_img_title">AÃ±ade una magen identificativa</div>
    11:         <% if @restaurant.ruta_img.present? %>
    12:             <%= image_tag @restaurant.ruta_img, class: "categories_new_img" %>
    13:         <% else %>
    14:             <%= image_tag "burger-restaurant", class: "categories_new_img" %>
  
app/views/restaurants/_form.html.erb:11
app/views/restaurants/_form.html.erb:1
app/views/restaurants/edit.html.erb:4
Started GET "/restaurants/3/edit" for 127.0.0.1 at 2023-11-17 23:03:21 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:33:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  Rendered restaurants/_form.html.erb (Duration: 1.7ms | Allocations: 2653)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 2.2ms | Allocations: 2893)
  Rendered layout layouts/application.html.erb (Duration: 2.3ms | Allocations: 2986)
Completed 500 Internal Server Error in 143ms (ActiveRecord: 130.3ms | Allocations: 12128)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (The asset "burger-restaurant" is not present in the asset pipeline.
):
    11:         <% if @restaurant.ruta_img_fondo.present? %>
    12:             <%= image_tag @restaurant.ruta_img, class: "categories_new_img" %>
    13:         <% else %>
    14:             <%= image_tag "burger-restaurant", class: "categories_new_img" %>
    15:         <% end %>
    16:         <label class="new_post_image_upload_button">
    17:             <%= form.file_field :ruta_img %>
  
app/views/restaurants/_form.html.erb:14
app/views/restaurants/_form.html.erb:1
app/views/restaurants/edit.html.erb:4
Started GET "/restaurants/3/edit" for 127.0.0.1 at 2023-11-17 23:03:54 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:33:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  Rendered restaurants/_form.html.erb (Duration: 56.4ms | Allocations: 2906)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 56.9ms | Allocations: 3146)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1304)
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 113.9ms | Allocations: 13306)
  Rendered layout layouts/application.html.erb (Duration: 180.2ms | Allocations: 36486)
Completed 200 OK in 319ms (Views: 81.0ms | ActiveRecord: 229.7ms | Allocations: 45646)


Started GET "/restaurants/3/edit" for 127.0.0.1 at 2023-11-17 23:04:06 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:33:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  Rendered restaurants/_form.html.erb (Duration: 2.3ms | Allocations: 2701)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 2.8ms | Allocations: 2945)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1304)
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 112.9ms | Allocations: 13285)
  Rendered layout layouts/application.html.erb (Duration: 125.1ms | Allocations: 36263)
Completed 200 OK in 266ms (Views: 25.5ms | ActiveRecord: 231.1ms | Allocations: 45402)


Started GET "/restaurants/3/edit" for 127.0.0.1 at 2023-11-17 23:04:14 +0100
Processing by RestaurantsController#edit as */*
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:33:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  Rendered restaurants/_form.html.erb (Duration: 2.4ms | Allocations: 2065)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 2.5ms | Allocations: 2129)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1037)
  Rendered layouts/_sidenav.html.erb (Duration: 1.6ms | Allocations: 2543)
  Rendered layout layouts/application.html.erb (Duration: 7.2ms | Allocations: 9368)
Completed 200 OK in 34ms (Views: 7.6ms | ActiveRecord: 25.5ms | Allocations: 10109)


Started GET "/restaurants/3/edit" for 127.0.0.1 at 2023-11-17 23:04:50 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:33:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  Rendered restaurants/_form.html.erb (Duration: 2.5ms | Allocations: 2177)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 2.6ms | Allocations: 2241)
  Rendered layouts/_header.html.erb (Duration: 8.0ms | Allocations: 1037)
  [1m[36mUser Load (25.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 69.5ms | Allocations: 4496)
  Rendered layout layouts/application.html.erb (Duration: 111.8ms | Allocations: 17980)
Completed 200 OK in 138ms (Views: 60.9ms | ActiveRecord: 76.6ms | Allocations: 18637)


Started GET "/restaurants/3/edit" for 127.0.0.1 at 2023-11-17 23:07:17 +0100
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
SyntaxError (/home/alain/repos/appetizr/appetizr/app/controllers/restaurants_controller.rb:39: syntax error, unexpected ')', expecting `then' or ';' or '\n'
...uta_img_fondo: nombre_imagen)))
...                              ^
):
  
app/controllers/restaurants_controller.rb:39: syntax error, unexpected ')', expecting `then' or ';' or '\n'
Started GET "/restaurants/3/edit" for 127.0.0.1 at 2023-11-17 23:07:24 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:33:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  Rendered restaurants/_form.html.erb (Duration: 2.2ms | Allocations: 2688)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 2.7ms | Allocations: 2928)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1306)
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 113.6ms | Allocations: 13343)
  Rendered layout layouts/application.html.erb (Duration: 129.0ms | Allocations: 36336)
Completed 200 OK in 273ms (Views: 29.5ms | ActiveRecord: 233.3ms | Allocations: 45557)


Started GET "/restaurants/3/edit" for 127.0.0.1 at 2023-11-17 23:07:50 +0100
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:33:in `edit'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/edit.html.erb within layouts/application
  Rendered restaurants/_form.html.erb (Duration: 2.9ms | Allocations: 2683)
  Rendered restaurants/edit.html.erb within layouts/application (Duration: 3.3ms | Allocations: 2923)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1291)
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 116.9ms | Allocations: 13250)
  Rendered layout layouts/application.html.erb (Duration: 130.3ms | Allocations: 35946)
Completed 200 OK in 271ms (Views: 31.6ms | ActiveRecord: 229.1ms | Allocations: 44985)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-17 23:09:24 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRank Load (24.9ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:11:in `map'
  [1m[36mRestaurant Load (25.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (24.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (24.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  Rendered restaurants/index.html.erb within layouts/application (Duration: 79.3ms | Allocations: 9321)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1044)
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.6ms | Allocations: 4523)
  Rendered layout layouts/application.html.erb (Duration: 136.6ms | Allocations: 18765)
Completed 200 OK in 303ms (Views: 13.2ms | ActiveRecord: 275.4ms | Allocations: 32798)


Started GET "/restaurants/2" for 127.0.0.1 at 2023-11-17 23:09:25 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 2]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=2 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 2], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=2 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=2 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.6ms | Allocations: 3275)
  [1m[36mDish Load (24.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 2]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 2], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 870)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 422)
  Rendered layouts/_comment.html.erb (Duration: 30.5ms | Allocations: 5432)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 657)
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=2 AND posts.autor=users.nombre AND posts.restaurant_id=2[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.0ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 163.3ms | Allocations: 13917)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1037)
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.5ms | Allocations: 4500)
  Rendered layout layouts/application.html.erb (Duration: 219.9ms | Allocations: 23114)
Completed 200 OK in 640ms (Views: 19.3ms | ActiveRecord: 603.7ms | Allocations: 37014)


Started GET "/restaurants" for 127.0.0.1 at 2023-11-17 23:09:32 +0100
Processing by RestaurantsController#index as HTML
  [1m[36mRank Load (49.0ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as total_valoracion FROM "ranks" GROUP BY "ranks"."what" ORDER BY total_valoracion DESC[0m
  â†³ app/controllers/restaurants_controller.rb:11:in `map'
  [1m[36mRestaurant Load (24.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  [1m[36mRestaurant Load (23.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:11:in `block in index'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/index.html.erb within layouts/application
  [1m[36mCategory Load (23.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/restaurants/index.html.erb:44
  [1m[36mRestaurant Load (23.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
  â†³ app/views/restaurants/index.html.erb:51
  Rendered restaurants/index.html.erb within layouts/application (Duration: 50.9ms | Allocations: 7070)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1038)
  [1m[36mUser Load (23.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 50.8ms | Allocations: 4497)
  Rendered layout layouts/application.html.erb (Duration: 105.3ms | Allocations: 16451)
Completed 200 OK in 229ms (Views: 12.6ms | ActiveRecord: 213.7ms | Allocations: 18441)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 23:09:33 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.7ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.6ms | Allocations: 2565)
  [1m[36mDish Load (24.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 603)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 421)
  Rendered layouts/_comment.html.erb (Duration: 27.7ms | Allocations: 2733)
  Rendered layouts/_add_comment.html.erb (Duration: 0.3ms | Allocations: 511)
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 424)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 2.8ms | Allocations: 5050)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 110.3ms | Allocations: 15666)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 1051)
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 53.3ms | Allocations: 4538)
  Rendered layout layouts/application.html.erb (Duration: 166.5ms | Allocations: 24961)
Completed 200 OK in 471ms (Views: 16.9ms | ActiveRecord: 446.1ms | Allocations: 33172)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 23:14:48 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (25.1ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (26.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (26.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (24.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (25.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 27.7ms | Allocations: 3104)
  [1m[36mDish Load (24.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  Rendered restaurants/show.html.erb within layouts/application (Duration: 82.5ms | Allocations: 11256)
  Rendered layout layouts/application.html.erb (Duration: 82.7ms | Allocations: 11349)
Completed 500 Internal Server Error in 1344ms (ActiveRecord: 581.2ms | Allocations: 41542)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined method `user_is_owner' for #<ActionView::Base:0x000000000b6620>):
    18:               <div class="restaurant_dish_name"><%= dish.nombre%></div>
    19:               <div class="restaurant_dish_desc"><%= dish.descripcion %></div>
    20:             </div>
    21:             <% if session[:username].present? and user_is_owner(@restaurant.id) %>
    22:               <%= link_to new_category_path, class: "categories_new_button" do %>
    23:                 <div>AÃ±adir</div>
    24:               <% end %>
  
app/views/restaurants/show.html.erb:21
app/views/restaurants/show.html.erb:10
app/views/restaurants/show.html.erb:9
Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 23:14:59 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 27.0ms | Allocations: 3104)
  [1m[36mDish Load (24.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 857)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 422)
  Rendered layouts/_comment.html.erb (Duration: 55.3ms | Allocations: 5413)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 657)
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 424)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 2.8ms | Allocations: 5050)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 219.3ms | Allocations: 22687)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1306)
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 159.6ms | Allocations: 13292)
  Rendered layout layouts/application.html.erb (Duration: 388.2ms | Allocations: 56027)
Completed 200 OK in 1011ms (Views: 114.3ms | ActiveRecord: 862.8ms | Allocations: 84362)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 23:16:04 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (25.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (29.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 27.1ms | Allocations: 2548)
  [1m[36mDish Load (24.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 596)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 421)
  Rendered layouts/_comment.html.erb (Duration: 27.1ms | Allocations: 2712)
  Rendered layouts/_add_comment.html.erb (Duration: 0.4ms | Allocations: 504)
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 419)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 3.3ms | Allocations: 5033)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 135.6ms | Allocations: 12878)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1037)
  [1m[36mUser Load (24.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 54.3ms | Allocations: 4496)
  Rendered layout layouts/application.html.erb (Duration: 202.3ms | Allocations: 28640)
Completed 200 OK in 516ms (Views: 29.3ms | ActiveRecord: 479.5ms | Allocations: 34014)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 23:16:09 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 27.0ms | Allocations: 3104)
  [1m[36mDish Load (23.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (23.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (23.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 857)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 422)
  Rendered layouts/_comment.html.erb (Duration: 28.1ms | Allocations: 5410)
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 657)
  [1m[35m (23.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 424)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 2.5ms | Allocations: 5050)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 187.6ms | Allocations: 22682)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1308)
  [1m[36mUser Load (23.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (23.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 108.1ms | Allocations: 13285)
  Rendered layout layouts/application.html.erb (Duration: 310.8ms | Allocations: 56022)
Completed 200 OK in 900ms (Views: 44.9ms | ActiveRecord: 825.3ms | Allocations: 84241)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 23:16:29 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 27.0ms | Allocations: 3100)
  [1m[36mDish Load (24.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 853)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 422)
  Rendered layouts/_comment.html.erb (Duration: 34.9ms | Allocations: 5409)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 659)
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 426)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 3.3ms | Allocations: 5055)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 197.7ms | Allocations: 22678)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1306)
  [1m[36mUser Load (25.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 111.6ms | Allocations: 13361)
  Rendered layout layouts/application.html.erb (Duration: 327.7ms | Allocations: 62651)
Completed 200 OK in 920ms (Views: 54.6ms | ActiveRecord: 833.0ms | Allocations: 90804)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 23:18:28 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (23.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 27.0ms | Allocations: 3104)
  [1m[36mDish Load (24.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 857)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 422)
  Rendered layouts/_comment.html.erb (Duration: 31.6ms | Allocations: 5417)
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 657)
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 424)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 3.5ms | Allocations: 5050)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 196.9ms | Allocations: 22687)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1306)
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 113.1ms | Allocations: 13240)
  Rendered layout layouts/application.html.erb (Duration: 319.6ms | Allocations: 55979)
Completed 200 OK in 906ms (Views: 43.1ms | ActiveRecord: 829.5ms | Allocations: 84136)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 23:19:21 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (26.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 27.0ms | Allocations: 3090)
  [1m[36mDish Load (25.0ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 1.1ms | Allocations: 857)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 422)
  Rendered layouts/_comment.html.erb (Duration: 31.4ms | Allocations: 5425)
  Rendered layouts/_add_comment.html.erb (Duration: 0.9ms | Allocations: 657)
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 424)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 3.4ms | Allocations: 5051)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 202.2ms | Allocations: 22674)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1306)
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (25.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 111.8ms | Allocations: 13352)
  Rendered layout layouts/application.html.erb (Duration: 324.6ms | Allocations: 56078)
Completed 200 OK in 920ms (Views: 49.3ms | ActiveRecord: 839.0ms | Allocations: 84136)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 23:20:46 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.6ms | Allocations: 3100)
  [1m[36mDish Load (24.5ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.4ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.9ms | Allocations: 857)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 422)
  Rendered layouts/_comment.html.erb (Duration: 30.5ms | Allocations: 5414)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 657)
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 424)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 2.8ms | Allocations: 5050)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 195.2ms | Allocations: 22680)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1310)
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 112.5ms | Allocations: 13284)
  Rendered layout layouts/application.html.erb (Duration: 322.1ms | Allocations: 55795)
Completed 200 OK in 913ms (Views: 49.7ms | ActiveRecord: 829.8ms | Allocations: 83866)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 23:21:09 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.3ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.5ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 27.5ms | Allocations: 3099)
  [1m[36mDish Load (24.7ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (24.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 857)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 422)
  Rendered layouts/_comment.html.erb (Duration: 29.6ms | Allocations: 5418)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 657)
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 424)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 421)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 2.7ms | Allocations: 5051)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 193.5ms | Allocations: 22686)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1306)
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 111.5ms | Allocations: 13204)
  Rendered layout layouts/application.html.erb (Duration: 314.1ms | Allocations: 55789)
Completed 200 OK in 906ms (Views: 40.5ms | ActiveRecord: 837.3ms | Allocations: 83916)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 23:21:43 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.4ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.0ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.5ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.6ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.8ms | Allocations: 3104)
  [1m[36mDish Load (24.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 857)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 422)
  Rendered layouts/_comment.html.erb (Duration: 31.6ms | Allocations: 5409)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 657)
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 424)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 3.4ms | Allocations: 5050)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 197.5ms | Allocations: 22680)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1306)
  [1m[36mUser Load (25.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 113.2ms | Allocations: 13240)
  Rendered layout layouts/application.html.erb (Duration: 320.5ms | Allocations: 55972)
Completed 200 OK in 913ms (Views: 46.1ms | ActiveRecord: 833.8ms | Allocations: 84200)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 23:24:43 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.6ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 27.3ms | Allocations: 3104)
  [1m[36mDish Load (24.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 857)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 423)
  Rendered layouts/_comment.html.erb (Duration: 30.7ms | Allocations: 5411)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 657)
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 424)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.1ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 2.6ms | Allocations: 5050)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 194.1ms | Allocations: 22097)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1309)
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 112.1ms | Allocations: 13285)
  Rendered layout layouts/application.html.erb (Duration: 318.2ms | Allocations: 55436)
Completed 200 OK in 908ms (Views: 42.4ms | ActiveRecord: 834.3ms | Allocations: 83671)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 23:24:49 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (25.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.5ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (22.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.3ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 51.5ms | Allocations: 3100)
  [1m[36mDish Load (24.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.2ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 857)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 422)
  Rendered layouts/_comment.html.erb (Duration: 33.1ms | Allocations: 5427)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 657)
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 1.7ms | Allocations: 424)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 4.7ms | Allocations: 5050)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 243.0ms | Allocations: 22714)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1306)
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 111.2ms | Allocations: 13304)
  Rendered layout layouts/application.html.erb (Duration: 365.1ms | Allocations: 56072)
Completed 200 OK in 977ms (Views: 93.8ms | ActiveRecord: 838.9ms | Allocations: 84246)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 23:24:58 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.3ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (26.0ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.8ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 27.0ms | Allocations: 3098)
  [1m[36mDish Load (24.6ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 853)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 422)
  Rendered layouts/_comment.html.erb (Duration: 31.1ms | Allocations: 5400)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 650)
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 424)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 2.8ms | Allocations: 5050)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 170.0ms | Allocations: 22313)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1310)
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 113.8ms | Allocations: 13322)
  Rendered layout layouts/application.html.erb (Duration: 298.3ms | Allocations: 55514)
Completed 200 OK in 893ms (Views: 47.8ms | ActiveRecord: 811.1ms | Allocations: 83653)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 23:25:51 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.8ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.6ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.8ms | Allocations: 3099)
  [1m[36mDish Load (24.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.9ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  [1m[36mReview Load (25.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 856)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 422)
  Rendered layouts/_comment.html.erb (Duration: 31.0ms | Allocations: 5414)
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 653)
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 424)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 2.8ms | Allocations: 5050)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 197.6ms | Allocations: 22676)
  Rendered layouts/_header.html.erb (Duration: 4.8ms | Allocations: 1307)
  [1m[36mUser Load (25.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 113.0ms | Allocations: 13279)
  Rendered layout layouts/application.html.erb (Duration: 323.9ms | Allocations: 55859)
Completed 200 OK in 916ms (Views: 47.8ms | ActiveRecord: 836.0ms | Allocations: 83926)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 23:26:35 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.6ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.4ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.9ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.8ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 27.3ms | Allocations: 3099)
  [1m[36mDish Load (24.9ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (24.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.8ms | Allocations: 856)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 422)
  Rendered layouts/_comment.html.erb (Duration: 30.1ms | Allocations: 5406)
  Rendered layouts/_add_comment.html.erb (Duration: 0.5ms | Allocations: 653)
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 424)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 2.9ms | Allocations: 5050)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 169.4ms | Allocations: 22326)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1310)
  [1m[36mUser Load (25.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 111.8ms | Allocations: 13374)
  Rendered layout layouts/application.html.erb (Duration: 294.9ms | Allocations: 55674)
Completed 200 OK in 892ms (Views: 46.3ms | ActiveRecord: 809.1ms | Allocations: 83760)


Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 23:28:08 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (25.2ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (24.3ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.8ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.1ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.5ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.4ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 30.4ms | Allocations: 3105)
  [1m[36mDish Load (24.4ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[35m (24.5ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/show.html.erb within layouts/application (Duration: 145.2ms | Allocations: 11648)
  Rendered layout layouts/application.html.erb (Duration: 145.3ms | Allocations: 11741)
Completed 500 Internal Server Error in 797ms (ActiveRecord: 685.5ms | Allocations: 39809)


DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/alain/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionView::Template::Error (undefined local variable or method `edit_dish_path' for #<ActionView::Base:0x00000000116728>):
    22: 
    23:           <div>
    24:             <% if session[:username].present? and user_is_owner?(@restaurant.id) %>
    25:               <%= link_to edit_dish_path, class: "restaurant_dish_edit_button" do %>
    26:                 <div>Editar</div>
    27:               <% end %>
    28:             <% end %>
  
app/views/restaurants/show.html.erb:25
app/views/restaurants/show.html.erb:10
app/views/restaurants/show.html.erb:9
Started GET "/restaurants/3" for 127.0.0.1 at 2023-11-17 23:30:01 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mRestaurant Load (24.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (24.7ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 3]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (24.8ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (24.7ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.3ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=3 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (25.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 3], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (25.2ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=3 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (25.6ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.9ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (25.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (25.7ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (24.6ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='Atreides' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=3 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  [1m[35m (24.7ms)[0m  [1m[34mSELECT restaurants.id, restaurants.nombre 
                                                        FROM restaurants, users, restaurants_users as ru 
                                                        WHERE users.nombre='Atreides' 
                                                        AND users.nombre=ru.user_id 
                                                        AND ru.restaurant_id=restaurants.id [0m
  â†³ app/helpers/restaurants_helper.rb:17:in `user_is_owner?'
  Rendered restaurants/_header.html.erb (Duration: 26.9ms | Allocations: 3104)
  [1m[36mDish Load (25.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (25.2ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 3], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 857)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 422)
  Rendered layouts/_comment.html.erb (Duration: 31.0ms | Allocations: 5418)
  Rendered layouts/_add_comment.html.erb (Duration: 0.6ms | Allocations: 657)
  [1m[35m (24.9ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=3 AND posts.autor=users.nombre AND posts.restaurant_id=3[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 424)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.3ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.2ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 2.9ms | Allocations: 5050)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 171.3ms | Allocations: 22353)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1306)
  [1m[36mUser Load (25.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mRestaurant Load (24.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" INNER JOIN "restaurants_users" ON "restaurants"."id" = "restaurants_users"."restaurant_id" WHERE "restaurants_users"."user_id" = $1[0m  [["user_id", "Atreides"]]
  â†³ app/helpers/application_helper.rb:64:in `user_has_restaurants'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."nombre" = $1 LIMIT $2[0m  [["nombre", "Atreides"], ["LIMIT", 1]]
  â†³ app/helpers/logins_helper.rb:9:in `current_user'
  Rendered layouts/_sidenav.html.erb (Duration: 112.6ms | Allocations: 13241)
  Rendered layout layouts/application.html.erb (Duration: 293.3ms | Allocations: 55647)
Completed 200 OK in 892ms (Views: 40.8ms | ActiveRecord: 819.2ms | Allocations: 83850)


Started GET "/" for ::1 at 2023-11-18 16:28:15 +0100
  [1m[36mActiveRecord::SchemaMigration Load (41.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (40.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 822.9ms | Allocations: 83064)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1361)
  Rendered layouts/_sidenav.html.erb (Duration: 4.5ms | Allocations: 3292)
  Rendered layout layouts/application.html.erb (Duration: 852.5ms | Allocations: 106665)
Completed 200 OK in 927ms (Views: 740.4ms | ActiveRecord: 123.3ms | Allocations: 118151)


Started GET "/categories" for ::1 at 2023-11-18 16:30:16 +0100
Processing by CategoriesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (92.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  â†³ app/views/categories/index.html.erb:10
  Rendered categories/index.html.erb within layouts/application (Duration: 199.5ms | Allocations: 7070)
  Rendered layouts/_header.html.erb (Duration: 4.2ms | Allocations: 1331)
  Rendered layouts/_sidenav.html.erb (Duration: 11.4ms | Allocations: 3272)
  Rendered layout layouts/application.html.erb (Duration: 251.3ms | Allocations: 30431)
Completed 200 OK in 259ms (Views: 73.0ms | ActiveRecord: 180.5ms | Allocations: 32726)


Started GET "/nearme" for ::1 at 2023-11-18 16:30:19 +0100
DEPRECATION WARNING: Setting action_dispatch.show_exceptions to true is deprecated. Set to :all instead. (called from rescue in call at /home/dani/.asdf/installs/ruby/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.1/lib/action_dispatch/middleware/debug_exceptions.rb:43)
  
ActionController::RoutingError (uninitialized constant NearmeController):
  
Started GET "/nearme" for ::1 at 2023-11-18 16:31:59 +0100
Processing by NearmeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering nearme/index.html.erb within layouts/application
  Rendered nearme/index.html.erb within layouts/application (Duration: 0.7ms | Allocations: 92)
  Rendered layouts/_header.html.erb (Duration: 2.8ms | Allocations: 1370)
  Rendered layouts/_sidenav.html.erb (Duration: 10.3ms | Allocations: 3274)
  Rendered layout layouts/application.html.erb (Duration: 51.7ms | Allocations: 23932)
Completed 200 OK in 55ms (Views: 54.1ms | ActiveRecord: 0.0ms | Allocations: 24872)


Started GET "/nearme" for ::1 at 2023-11-18 16:35:16 +0100
Processing by NearmeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering nearme/index.html.erb within layouts/application
  Rendered nearme/index.html.erb within layouts/application (Duration: 2.2ms | Allocations: 95)
  Rendered layouts/_header.html.erb (Duration: 6.2ms | Allocations: 1370)
  Rendered layouts/_sidenav.html.erb (Duration: 7.6ms | Allocations: 3274)
  Rendered layout layouts/application.html.erb (Duration: 64.0ms | Allocations: 23913)
Completed 200 OK in 68ms (Views: 67.3ms | ActiveRecord: 0.0ms | Allocations: 24853)


Started GET "/nearme" for ::1 at 2023-11-18 16:35:28 +0100
Processing by NearmeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering nearme/index.html.erb within layouts/application
  Rendered nearme/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1076)
  Rendered layouts/_sidenav.html.erb (Duration: 2.6ms | Allocations: 2539)
  Rendered layout layouts/application.html.erb (Duration: 11.9ms | Allocations: 7658)
Completed 200 OK in 16ms (Views: 15.0ms | ActiveRecord: 0.0ms | Allocations: 7910)


Started GET "/nearme" for ::1 at 2023-11-18 16:36:40 +0100
Processing by NearmeController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering nearme/index.html.erb within layouts/application
  Rendered nearme/index.html.erb within layouts/application (Duration: 0.7ms | Allocations: 93)
  Rendered layouts/_header.html.erb (Duration: 4.5ms | Allocations: 1370)
  Rendered layouts/_sidenav.html.erb (Duration: 5.4ms | Allocations: 3274)
  Rendered layout layouts/application.html.erb (Duration: 37.5ms | Allocations: 23915)
Completed 200 OK in 40ms (Views: 39.3ms | ActiveRecord: 0.0ms | Allocations: 24853)


Started GET "/search?search=Goiko" for ::1 at 2023-11-18 16:37:12 +0100
Processing by RestaurantsController#search as HTML
  Parameters: {"search"=>"Goiko"}
  [1m[36mRestaurant Load (43.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."nombre" = $1 LIMIT $2[0m  [["nombre", "Goiko"], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:55:in `search'
Redirected to http://localhost:3000/restaurants/1
Completed 302 Found in 400ms (ActiveRecord: 251.9ms | Allocations: 17053)


Started GET "/restaurants/1" for ::1 at 2023-11-18 16:37:13 +0100
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRestaurant Load (40.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:15:in `show'
  [1m[36mRank Load (43.8ms)[0m  [1m[34mSELECT "ranks"."what", AVG(valoracion) as rest_val FROM "ranks" WHERE "ranks"."what" = $1 GROUP BY "ranks"."what"[0m  [["what", 1]]
  â†³ app/controllers/restaurants_controller.rb:17:in `show'
  [1m[35m (41.2ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Like' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (41.0ms)[0m  [1m[34mSELECT posts.id, COUNT(reaccion) as react FROM posts LEFT JOIN reactions ON reactionable_id=posts.id AND reactionable_type='Post' AND reaccion='Dislike' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (49.1ms)[0m  [1m[34mSELECT posts.id, COUNT(responses.id) as resp_count FROM posts LEFT JOIN responses ON respondable_id=posts.id AND respondable_type='Post' AND restaurant_id=1 GROUP BY posts.id ORDER BY posts.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mPost Load (39.2ms)[0m  [1m[34mSELECT "posts".* FROM "posts" WHERE "posts"."restaurant_id" = $1 ORDER BY "posts"."id" ASC LIMIT $2[0m  [["restaurant_id", 1], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (44.9ms)[0m  [1m[34mSELECT posts.id, reactions.id as reaction_id FROM posts LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=posts.id AND reactions.reactionable_type='Post' AND restaurant_id=1 GROUP BY posts.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  [1m[35m (40.7ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Like' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (41.4ms)[0m  [1m[34mSELECT reviews.id, COUNT(reaccion) as react FROM reviews LEFT JOIN reactions ON reactionable_id=reviews.id AND reactionable_type='Review' AND reaccion='Dislike' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC [0m
  â†³ app/controllers/concerns/queries_concern.rb:5:in `get_all_reactions'
  [1m[35m (47.0ms)[0m  [1m[34mSELECT reviews.id, COUNT(responses.id) as resp_count FROM reviews LEFT JOIN responses ON respondable_id=reviews.id AND respondable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id ORDER BY reviews.id ASC[0m
  â†³ app/controllers/concerns/queries_concern.rb:9:in `get_all_responses'
  [1m[36mReview Load (41.3ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2 ORDER BY "reviews"."id" ASC LIMIT $3[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"], ["LIMIT", 1000]]
  â†³ app/controllers/concerns/queries_concern.rb:23:in `each'
  [1m[35m (43.2ms)[0m  [1m[34mSELECT reviews.id, reactions.id as reaction_id FROM reviews LEFT JOIN reactions ON reactions.who='' AND reactions.reactionable_id=reviews.id AND reactions.reactionable_type='Review' AND reviewable_id=1 AND reviewable_type='Restaurant' GROUP BY reviews.id, reaction_id[0m
  â†³ app/controllers/concerns/queries_concern.rb:13:in `get_comments_user_reactions'
  Rendering layout layouts/application.html.erb
  Rendering restaurants/show.html.erb within layouts/application
  Rendered restaurants/_header.html.erb (Duration: 10.2ms | Allocations: 2483)
  [1m[36mDish Load (40.1ms)[0m  [1m[34mSELECT "dishes".* FROM "dishes" WHERE "dishes"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/views/restaurants/show.html.erb:9
  [1m[36mReview Load (40.5ms)[0m  [1m[34mSELECT "reviews".* FROM "reviews" WHERE "reviews"."reviewable_id" = $1 AND "reviews"."reviewable_type" = $2[0m  [["reviewable_id", 1], ["reviewable_type", "Restaurant"]]
  â†³ app/views/layouts/_comment.html.erb:2
  Rendered layouts/_reaction.html.erb (Duration: 1.4ms | Allocations: 878)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 418)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.5ms | Allocations: 421)
  Rendered layouts/_reaction.html.erb (Duration: 0.4ms | Allocations: 417)
  Rendered layouts/_reaction.html.erb (Duration: 0.7ms | Allocations: 420)
  Rendered layouts/_reaction.html.erb (Duration: 0.6ms | Allocations: 417)
  Rendered layouts/_comment.html.erb (Duration: 116.6ms | Allocations: 11339)
  Rendered layouts/_add_comment.html.erb (Duration: 1.7ms | Allocations: 661)
  [1m[35m (42.2ms)[0m  [1m[34mSELECT posts.* FROM posts, users, restaurants_users as ru WHERE ru.user_id=users.nombre AND ru.restaurant_id=1 AND posts.autor=users.nombre AND posts.restaurant_id=1[0m
  â†³ app/helpers/restaurants_helper.rb:3:in `get_rest_managers_posts'
  Rendered layouts/_comment.html.erb (Duration: 0.1ms | Allocations: 7)
  Rendered restaurants/show.html.erb within layouts/application (Duration: 406.5ms | Allocations: 27020)
  Rendered layouts/_header.html.erb (Duration: 3.3ms | Allocations: 1051)
  Rendered layouts/_sidenav.html.erb (Duration: 8.1ms | Allocations: 2569)
  Rendered layout layouts/application.html.erb (Duration: 433.4ms | Allocations: 34366)
Completed 200 OK in 1458ms (Views: 224.3ms | ActiveRecord: 984.1ms | Allocations: 60413)


